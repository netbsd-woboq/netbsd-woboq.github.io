<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>tinytest.h source code [netbsd/external/bsd/libevent/dist/test/tinytest.h] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="testcase_setup_t,testcase_t,testgroup_t,testlist_alias_t "/>
<link rel="stylesheet" href="https://code.woboq.org/data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="https://code.woboq.org/data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="https://code.woboq.org/data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="https://code.woboq.org/data/jquery/jquery-ui.min.js"></script>
<script>var file = 'netbsd/external/bsd/libevent/dist/test/tinytest.h'; var root_path = '../../../../../..'; var data_path = 'https://code.woboq.org/data'; var ecma_script_api_version = 2;</script>
<script src='https://code.woboq.org/data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../../..'>netbsd</a>/<a href='../../../..'>external</a>/<a href='../../..'>bsd</a>/<a href='../..'>libevent</a>/<a href='..'>dist</a>/<a href='./'>test</a>/<a href='tinytest.h.html'>tinytest.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*	$NetBSD: tinytest.h,v 1.1.1.2 2017/01/31 21:14:53 christos Exp $	*/</i></td></tr>
<tr><th id="2">2</th><td><i>/* tinytest.h -- Copyright 2009-2012 Nick Mathewson</i></td></tr>
<tr><th id="3">3</th><td><i> *</i></td></tr>
<tr><th id="4">4</th><td><i> * Redistribution and use in source and binary forms, with or without</i></td></tr>
<tr><th id="5">5</th><td><i> * modification, are permitted provided that the following conditions</i></td></tr>
<tr><th id="6">6</th><td><i> * are met:</i></td></tr>
<tr><th id="7">7</th><td><i> * 1. Redistributions of source code must retain the above copyright</i></td></tr>
<tr><th id="8">8</th><td><i> *    notice, this list of conditions and the following disclaimer.</i></td></tr>
<tr><th id="9">9</th><td><i> * 2. Redistributions in binary form must reproduce the above copyright</i></td></tr>
<tr><th id="10">10</th><td><i> *    notice, this list of conditions and the following disclaimer in the</i></td></tr>
<tr><th id="11">11</th><td><i> *    documentation and/or other materials provided with the distribution.</i></td></tr>
<tr><th id="12">12</th><td><i> * 3. The name of the author may not be used to endorse or promote products</i></td></tr>
<tr><th id="13">13</th><td><i> *    derived from this software without specific prior written permission.</i></td></tr>
<tr><th id="14">14</th><td><i> *</i></td></tr>
<tr><th id="15">15</th><td><i> * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR</i></td></tr>
<tr><th id="16">16</th><td><i> * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</i></td></tr>
<tr><th id="17">17</th><td><i> * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</i></td></tr>
<tr><th id="18">18</th><td><i> * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,</i></td></tr>
<tr><th id="19">19</th><td><i> * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT</i></td></tr>
<tr><th id="20">20</th><td><i> * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</i></td></tr>
<tr><th id="21">21</th><td><i> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</i></td></tr>
<tr><th id="22">22</th><td><i> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</i></td></tr>
<tr><th id="23">23</th><td><i> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF</i></td></tr>
<tr><th id="24">24</th><td><i> * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</i></td></tr>
<tr><th id="25">25</th><td><i> */</i></td></tr>
<tr><th id="26">26</th><td></td></tr>
<tr><th id="27">27</th><td><u>#<span data-ppcond="27">ifndef</span> <span class="macro" data-ref="_M/TINYTEST_H_INCLUDED_">TINYTEST_H_INCLUDED_</span></u></td></tr>
<tr><th id="28">28</th><td><u>#define <dfn class="macro" id="_M/TINYTEST_H_INCLUDED_" data-ref="_M/TINYTEST_H_INCLUDED_">TINYTEST_H_INCLUDED_</dfn></u></td></tr>
<tr><th id="29">29</th><td></td></tr>
<tr><th id="30">30</th><td><i class="doc">/** Flag for a test that needs to run in a subprocess. */</i></td></tr>
<tr><th id="31">31</th><td><u>#define <dfn class="macro" id="_M/TT_FORK" data-ref="_M/TT_FORK">TT_FORK</dfn>  (1&lt;&lt;0)</u></td></tr>
<tr><th id="32">32</th><td><i class="doc">/** Runtime flag for a test we've decided to skip. */</i></td></tr>
<tr><th id="33">33</th><td><u>#define <dfn class="macro" id="_M/TT_SKIP" data-ref="_M/TT_SKIP">TT_SKIP</dfn>  (1&lt;&lt;1)</u></td></tr>
<tr><th id="34">34</th><td><i class="doc">/** Internal runtime flag for a test we've decided to run. */</i></td></tr>
<tr><th id="35">35</th><td><u>#define <dfn class="macro" id="_M/TT_ENABLED_" data-ref="_M/TT_ENABLED_">TT_ENABLED_</dfn>  (1&lt;&lt;2)</u></td></tr>
<tr><th id="36">36</th><td><i class="doc">/** Flag for a test that's off by default. */</i></td></tr>
<tr><th id="37">37</th><td><u>#define <dfn class="macro" id="_M/TT_OFF_BY_DEFAULT" data-ref="_M/TT_OFF_BY_DEFAULT">TT_OFF_BY_DEFAULT</dfn>  (1&lt;&lt;3)</u></td></tr>
<tr><th id="38">38</th><td><i class="doc">/** If you add your own flags, make them start at this point. */</i></td></tr>
<tr><th id="39">39</th><td><u>#define <dfn class="macro" id="_M/TT_FIRST_USER_FLAG" data-ref="_M/TT_FIRST_USER_FLAG">TT_FIRST_USER_FLAG</dfn> (1&lt;&lt;4)</u></td></tr>
<tr><th id="40">40</th><td></td></tr>
<tr><th id="41">41</th><td><b>typedef</b> <em>void</em> (*<dfn class="typedef" id="testcase_fn" title='testcase_fn' data-type='void (*)(void *)' data-ref="testcase_fn" data-ref-filename="testcase_fn">testcase_fn</dfn>)(<em>void</em> *);</td></tr>
<tr><th id="42">42</th><td></td></tr>
<tr><th id="43">43</th><td><b>struct</b> <a class="type" href="#testcase_t" title='testcase_t' data-ref="testcase_t" data-ref-filename="testcase_t">testcase_t</a>;</td></tr>
<tr><th id="44">44</th><td></td></tr>
<tr><th id="45">45</th><td><i class="doc">/** Functions to initialize/teardown a structure for a testcase. */</i></td></tr>
<tr><th id="46">46</th><td><b>struct</b> <dfn class="type def" id="testcase_setup_t" title='testcase_setup_t' data-ref="testcase_setup_t" data-ref-filename="testcase_setup_t">testcase_setup_t</dfn> {</td></tr>
<tr><th id="47">47</th><td>	<i class="doc">/** Return a new structure for use by a given testcase. */</i></td></tr>
<tr><th id="48">48</th><td>	<em>void</em> *(*<dfn class="decl field" id="testcase_setup_t::setup_fn" title='testcase_setup_t::setup_fn' data-ref="testcase_setup_t::setup_fn" data-ref-filename="testcase_setup_t..setup_fn">setup_fn</dfn>)(<em>const</em> <b>struct</b> <a class="type" href="#testcase_t" title='testcase_t' data-ref="testcase_t" data-ref-filename="testcase_t">testcase_t</a> *);</td></tr>
<tr><th id="49">49</th><td>	<i class="doc">/** Clean/free a structure from setup_fn. Return 1 if ok, 0 on err. */</i></td></tr>
<tr><th id="50">50</th><td>	<em>int</em> (*<dfn class="decl field" id="testcase_setup_t::cleanup_fn" title='testcase_setup_t::cleanup_fn' data-ref="testcase_setup_t::cleanup_fn" data-ref-filename="testcase_setup_t..cleanup_fn">cleanup_fn</dfn>)(<em>const</em> <b>struct</b> <a class="type" href="#testcase_t" title='testcase_t' data-ref="testcase_t" data-ref-filename="testcase_t">testcase_t</a> *, <em>void</em> *);</td></tr>
<tr><th id="51">51</th><td>};</td></tr>
<tr><th id="52">52</th><td></td></tr>
<tr><th id="53">53</th><td><i class="doc">/** A single test-case that you can run. */</i></td></tr>
<tr><th id="54">54</th><td><b>struct</b> <dfn class="type def" id="testcase_t" title='testcase_t' data-ref="testcase_t" data-ref-filename="testcase_t">testcase_t</dfn> {</td></tr>
<tr><th id="55">55</th><td>	<em>const</em> <em>char</em> *<dfn class="decl field" id="testcase_t::name" title='testcase_t::name' data-ref="testcase_t::name" data-ref-filename="testcase_t..name">name</dfn>; <i class="doc">/**&lt; An identifier for this case. */</i></td></tr>
<tr><th id="56">56</th><td>	<a class="typedef" href="#testcase_fn" title='testcase_fn' data-type='void (*)(void *)' data-ref="testcase_fn" data-ref-filename="testcase_fn">testcase_fn</a> <dfn class="decl field" id="testcase_t::fn" title='testcase_t::fn' data-ref="testcase_t::fn" data-ref-filename="testcase_t..fn">fn</dfn>; <i class="doc">/**&lt; The function to run to implement this case. */</i></td></tr>
<tr><th id="57">57</th><td>	<em>unsigned</em> <em>long</em> <dfn class="decl field" id="testcase_t::flags" title='testcase_t::flags' data-ref="testcase_t::flags" data-ref-filename="testcase_t..flags">flags</dfn>; <i class="doc">/**&lt; Bitfield of TT_* flags. */</i></td></tr>
<tr><th id="58">58</th><td>	<em>const</em> <b>struct</b> <a class="type" href="#testcase_setup_t" title='testcase_setup_t' data-ref="testcase_setup_t" data-ref-filename="testcase_setup_t">testcase_setup_t</a> *<dfn class="decl field" id="testcase_t::setup" title='testcase_t::setup' data-ref="testcase_t::setup" data-ref-filename="testcase_t..setup">setup</dfn>; <i class="doc">/**&lt; Optional setup/cleanup fns*/</i></td></tr>
<tr><th id="59">59</th><td>	<em>void</em> *<dfn class="decl field" id="testcase_t::setup_data" title='testcase_t::setup_data' data-ref="testcase_t::setup_data" data-ref-filename="testcase_t..setup_data">setup_data</dfn>; <i class="doc">/**&lt; Extra data usable by setup function */</i></td></tr>
<tr><th id="60">60</th><td>};</td></tr>
<tr><th id="61">61</th><td><u>#define <dfn class="macro" id="_M/END_OF_TESTCASES" data-ref="_M/END_OF_TESTCASES">END_OF_TESTCASES</dfn> { NULL, NULL, 0, NULL, NULL }</u></td></tr>
<tr><th id="62">62</th><td></td></tr>
<tr><th id="63">63</th><td><i class="doc">/** A group of tests that are selectable together. */</i></td></tr>
<tr><th id="64">64</th><td><b>struct</b> <dfn class="type def" id="testgroup_t" title='testgroup_t' data-ref="testgroup_t" data-ref-filename="testgroup_t">testgroup_t</dfn> {</td></tr>
<tr><th id="65">65</th><td>	<em>const</em> <em>char</em> *<dfn class="decl field" id="testgroup_t::prefix" title='testgroup_t::prefix' data-ref="testgroup_t::prefix" data-ref-filename="testgroup_t..prefix">prefix</dfn>; <i class="doc">/**&lt; Prefix to prepend to testnames. */</i></td></tr>
<tr><th id="66">66</th><td>	<b>struct</b> <a class="type" href="#testcase_t" title='testcase_t' data-ref="testcase_t" data-ref-filename="testcase_t">testcase_t</a> *<dfn class="decl field" id="testgroup_t::cases" title='testgroup_t::cases' data-ref="testgroup_t::cases" data-ref-filename="testgroup_t..cases">cases</dfn>; <i class="doc">/** Array, ending with END_OF_TESTCASES */</i></td></tr>
<tr><th id="67">67</th><td>};</td></tr>
<tr><th id="68">68</th><td><u>#define <dfn class="macro" id="_M/END_OF_GROUPS" data-ref="_M/END_OF_GROUPS">END_OF_GROUPS</dfn> { NULL, NULL}</u></td></tr>
<tr><th id="69">69</th><td></td></tr>
<tr><th id="70">70</th><td><b>struct</b> <dfn class="type def" id="testlist_alias_t" title='testlist_alias_t' data-ref="testlist_alias_t" data-ref-filename="testlist_alias_t">testlist_alias_t</dfn> {</td></tr>
<tr><th id="71">71</th><td>	<em>const</em> <em>char</em> *<dfn class="decl field" id="testlist_alias_t::name" title='testlist_alias_t::name' data-ref="testlist_alias_t::name" data-ref-filename="testlist_alias_t..name">name</dfn>;</td></tr>
<tr><th id="72">72</th><td>	<em>const</em> <em>char</em> **<dfn class="decl field" id="testlist_alias_t::tests" title='testlist_alias_t::tests' data-ref="testlist_alias_t::tests" data-ref-filename="testlist_alias_t..tests">tests</dfn>;</td></tr>
<tr><th id="73">73</th><td>};</td></tr>
<tr><th id="74">74</th><td><u>#define <dfn class="macro" id="_M/END_OF_ALIASES" data-ref="_M/END_OF_ALIASES">END_OF_ALIASES</dfn> { NULL, NULL }</u></td></tr>
<tr><th id="75">75</th><td></td></tr>
<tr><th id="76">76</th><td><i class="doc">/** Implementation: called from a test to indicate failure, before logging. */</i></td></tr>
<tr><th id="77">77</th><td><em>void</em> <dfn class="decl fn" id="tinytest_set_test_failed_" title='tinytest_set_test_failed_' data-ref="tinytest_set_test_failed_" data-ref-filename="tinytest_set_test_failed_">tinytest_set_test_failed_</dfn>(<em>void</em>);</td></tr>
<tr><th id="78">78</th><td><i class="doc">/** Implementation: called from a test to indicate that we're skipping. */</i></td></tr>
<tr><th id="79">79</th><td><em>void</em> <dfn class="decl fn" id="tinytest_set_test_skipped_" title='tinytest_set_test_skipped_' data-ref="tinytest_set_test_skipped_" data-ref-filename="tinytest_set_test_skipped_">tinytest_set_test_skipped_</dfn>(<em>void</em>);</td></tr>
<tr><th id="80">80</th><td><i class="doc">/** Implementation: return 0 for quiet, 1 for normal, 2 for loud. */</i></td></tr>
<tr><th id="81">81</th><td><em>int</em> <dfn class="decl fn" id="tinytest_get_verbosity_" title='tinytest_get_verbosity_' data-ref="tinytest_get_verbosity_" data-ref-filename="tinytest_get_verbosity_">tinytest_get_verbosity_</dfn>(<em>void</em>);</td></tr>
<tr><th id="82">82</th><td><i class="doc">/** Implementation: Set a flag on tests matching a name; returns number</i></td></tr>
<tr><th id="83">83</th><td><i class="doc"> * of tests that matched. */</i></td></tr>
<tr><th id="84">84</th><td><em>int</em> <dfn class="decl fn" id="tinytest_set_flag_" title='tinytest_set_flag_' data-ref="tinytest_set_flag_" data-ref-filename="tinytest_set_flag_">tinytest_set_flag_</dfn>(<b>struct</b> <a class="type" href="#testgroup_t" title='testgroup_t' data-ref="testgroup_t" data-ref-filename="testgroup_t">testgroup_t</a> *, <em>const</em> <em>char</em> *, <em>int</em> <dfn class="local col1 decl" id="1set" title='set' data-type='int' data-ref="1set" data-ref-filename="1set">set</dfn>, <em>unsigned</em> <em>long</em>);</td></tr>
<tr><th id="85">85</th><td><i class="doc">/** Implementation: Put a chunk of memory into hex. */</i></td></tr>
<tr><th id="86">86</th><td><em>char</em> *<dfn class="decl fn" id="tinytest_format_hex_" title='tinytest_format_hex_' data-ref="tinytest_format_hex_" data-ref-filename="tinytest_format_hex_">tinytest_format_hex_</dfn>(<em>const</em> <em>void</em> *, <em>unsigned</em> <em>long</em>);</td></tr>
<tr><th id="87">87</th><td></td></tr>
<tr><th id="88">88</th><td><i class="doc">/** Set all tests in 'groups' matching the name 'named' to be skipped. */</i></td></tr>
<tr><th id="89">89</th><td><u>#define <dfn class="macro" id="_M/tinytest_skip" data-ref="_M/tinytest_skip">tinytest_skip</dfn>(groups, named) \</u></td></tr>
<tr><th id="90">90</th><td><u>	tinytest_set_flag_(groups, named, 1, TT_SKIP)</u></td></tr>
<tr><th id="91">91</th><td></td></tr>
<tr><th id="92">92</th><td><i class="doc">/** Run a single testcase in a single group. */</i></td></tr>
<tr><th id="93">93</th><td><em>int</em> <dfn class="decl fn" id="testcase_run_one" title='testcase_run_one' data-ref="testcase_run_one" data-ref-filename="testcase_run_one">testcase_run_one</dfn>(<em>const</em> <b>struct</b> <a class="type" href="#testgroup_t" title='testgroup_t' data-ref="testgroup_t" data-ref-filename="testgroup_t">testgroup_t</a> *,<em>const</em> <b>struct</b> <a class="type" href="#testcase_t" title='testcase_t' data-ref="testcase_t" data-ref-filename="testcase_t">testcase_t</a> *);</td></tr>
<tr><th id="94">94</th><td></td></tr>
<tr><th id="95">95</th><td><em>void</em> <dfn class="decl fn" id="tinytest_set_aliases" title='tinytest_set_aliases' data-ref="tinytest_set_aliases" data-ref-filename="tinytest_set_aliases">tinytest_set_aliases</dfn>(<em>const</em> <b>struct</b> <a class="type" href="#testlist_alias_t" title='testlist_alias_t' data-ref="testlist_alias_t" data-ref-filename="testlist_alias_t">testlist_alias_t</a> *<dfn class="local col2 decl" id="2aliases" title='aliases' data-type='const struct testlist_alias_t *' data-ref="2aliases" data-ref-filename="2aliases">aliases</dfn>);</td></tr>
<tr><th id="96">96</th><td></td></tr>
<tr><th id="97">97</th><td><i class="doc">/** Run a set of testcases from an END_OF_GROUPS-terminated array of groups,</i></td></tr>
<tr><th id="98">98</th><td><i class="doc">    as selected from the command line. */</i></td></tr>
<tr><th id="99">99</th><td><em>int</em> <dfn class="decl fn" id="tinytest_main" title='tinytest_main' data-ref="tinytest_main" data-ref-filename="tinytest_main">tinytest_main</dfn>(<em>int</em> <dfn class="local col3 decl" id="3argc" title='argc' data-type='int' data-ref="3argc" data-ref-filename="3argc">argc</dfn>, <em>const</em> <em>char</em> **<dfn class="local col4 decl" id="4argv" title='argv' data-type='const char **' data-ref="4argv" data-ref-filename="4argv">argv</dfn>, <b>struct</b> <a class="type" href="#testgroup_t" title='testgroup_t' data-ref="testgroup_t" data-ref-filename="testgroup_t">testgroup_t</a> *<dfn class="local col5 decl" id="5groups" title='groups' data-type='struct testgroup_t *' data-ref="5groups" data-ref-filename="5groups">groups</dfn>);</td></tr>
<tr><th id="100">100</th><td></td></tr>
<tr><th id="101">101</th><td><u>#<span data-ppcond="27">endif</span></u></td></tr>
<tr><th id="102">102</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='regress.c.html'>netbsd/external/bsd/libevent/dist/test/regress.c</a><br/>Generated on <em>2019-Jul-19</em> from project netbsd revision <em>f9da89e0d</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
