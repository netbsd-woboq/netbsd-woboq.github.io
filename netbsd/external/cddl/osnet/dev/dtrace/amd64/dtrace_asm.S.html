<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>dtrace_asm.S source code [netbsd/external/cddl/osnet/dev/dtrace/amd64/dtrace_asm.S] - Woboq Code Browser</title>
<link rel="stylesheet" href="https://code.woboq.org/data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="https://code.woboq.org/data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="https://code.woboq.org/data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="https://code.woboq.org/data/jquery/jquery-ui.min.js"></script>
<script>var file = 'netbsd/external/cddl/osnet/dev/dtrace/amd64/dtrace_asm.S'; var root_path = '../../../../../../..'; var data_path = 'https://code.woboq.org/data'; var ecma_script_api_version = 2;</script>
<script src='https://code.woboq.org/data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../../../..'>netbsd</a>/<a href='../../../../..'>external</a>/<a href='../../../..'>cddl</a>/<a href='../../..'>osnet</a>/<a href='../..'>dev</a>/<a href='..'>dtrace</a>/<a href='./'>amd64</a>/<a href='dtrace_asm.S.html'>dtrace_asm.S</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*	$NetBSD: dtrace_asm.S,v 1.8 2018/05/28 21:05:03 chs Exp $	*/</i></td></tr>
<tr><th id="2">2</th><td></td></tr>
<tr><th id="3">3</th><td><i>/*</i></td></tr>
<tr><th id="4">4</th><td><i> * CDDL HEADER START</i></td></tr>
<tr><th id="5">5</th><td><i> *</i></td></tr>
<tr><th id="6">6</th><td><i> * The contents of this file are subject to the terms of the</i></td></tr>
<tr><th id="7">7</th><td><i> * Common Development and Distribution License (the "License").</i></td></tr>
<tr><th id="8">8</th><td><i> * You may not use this file except in compliance with the License.</i></td></tr>
<tr><th id="9">9</th><td><i> *</i></td></tr>
<tr><th id="10">10</th><td><i> * You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE</i></td></tr>
<tr><th id="11">11</th><td><i> * or <a href="http://www.opensolaris.org/os/licensing">http://www.opensolaris.org/os/licensing</a>.</i></td></tr>
<tr><th id="12">12</th><td><i> * See the License for the specific language governing permissions</i></td></tr>
<tr><th id="13">13</th><td><i> * and limitations under the License.</i></td></tr>
<tr><th id="14">14</th><td><i> *</i></td></tr>
<tr><th id="15">15</th><td><i> * When distributing Covered Code, include this CDDL HEADER in each</i></td></tr>
<tr><th id="16">16</th><td><i> * file and include the License file at usr/src/OPENSOLARIS.LICENSE.</i></td></tr>
<tr><th id="17">17</th><td><i> * If applicable, add the following below this CDDL HEADER, with the</i></td></tr>
<tr><th id="18">18</th><td><i> * fields enclosed by brackets "[]" replaced with your own identifying</i></td></tr>
<tr><th id="19">19</th><td><i> * information: Portions Copyright [yyyy] [name of copyright owner]</i></td></tr>
<tr><th id="20">20</th><td><i> *</i></td></tr>
<tr><th id="21">21</th><td><i> * CDDL HEADER END</i></td></tr>
<tr><th id="22">22</th><td><i> *</i></td></tr>
<tr><th id="23">23</th><td><i> * Portions Copyright 2008 John Birrell &lt;jb@freebsd.org&gt;</i></td></tr>
<tr><th id="24">24</th><td><i> *</i></td></tr>
<tr><th id="25">25</th><td><i> * $FreeBSD: head/sys/cddl/dev/dtrace/amd64/dtrace_asm.S 298171 2016-04-17 23:08:47Z markj $</i></td></tr>
<tr><th id="26">26</th><td><i> *</i></td></tr>
<tr><th id="27">27</th><td><i> */</i></td></tr>
<tr><th id="28">28</th><td><i>/*</i></td></tr>
<tr><th id="29">29</th><td><i> * Copyright 2007 Sun Microsystems, Inc.  All rights reserved.</i></td></tr>
<tr><th id="30">30</th><td><i> * Use is subject to license terms.</i></td></tr>
<tr><th id="31">31</th><td><i> */</i></td></tr>
<tr><th id="32">32</th><td></td></tr>
<tr><th id="33">33</th><td><u>#define <dfn class="macro" id="_M/_ASM" data-ref="_M/_ASM">_ASM</dfn></u></td></tr>
<tr><th id="34">34</th><td></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="../../../sys/sys/cpuvar_defs.h.html">&lt;sys/cpuvar_defs.h&gt;</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="../../../dist/uts/common/sys/dtrace.h.html">&lt;sys/dtrace.h&gt;</a></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="../../../../../../sys/arch/amd64/include/asm.h.html">&lt;machine/asm.h&gt;</a></u></td></tr>
<tr><th id="38">38</th><td><u>#define <dfn class="macro" id="_M/MEXITCOUNT" data-ref="_M/MEXITCOUNT">MEXITCOUNT</dfn></u></td></tr>
<tr><th id="39">39</th><td></td></tr>
<tr><th id="40">40</th><td><u>#include <a href="../../../../../../objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/dtrace/dtrace/assym.h.html">"assym.h"</a></u></td></tr>
<tr><th id="41">41</th><td></td></tr>
<tr><th id="42">42</th><td><u>#define <dfn class="macro" id="_M/INTR_POP" data-ref="_M/INTR_POP">INTR_POP</dfn>				\</u></td></tr>
<tr><th id="43">43</th><td><u>	MEXITCOUNT;				\</u></td></tr>
<tr><th id="44">44</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_RDI(%rsp),%rdi;		\</u></td></tr>
<tr><th id="45">45</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_RSI(%rsp),%rsi;		\</u></td></tr>
<tr><th id="46">46</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_RDX(%rsp),%rdx;		\</u></td></tr>
<tr><th id="47">47</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_RCX(%rsp),%rcx;		\</u></td></tr>
<tr><th id="48">48</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_R8(%rsp),%r8;		\</u></td></tr>
<tr><th id="49">49</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_R9(%rsp),%r9;		\</u></td></tr>
<tr><th id="50">50</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_RAX(%rsp),%rax;		\</u></td></tr>
<tr><th id="51">51</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_RBX(%rsp),%rbx;		\</u></td></tr>
<tr><th id="52">52</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_RBP(%rsp),%rbp;		\</u></td></tr>
<tr><th id="53">53</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_R10(%rsp),%r10;		\</u></td></tr>
<tr><th id="54">54</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_R11(%rsp),%r11;		\</u></td></tr>
<tr><th id="55">55</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_R12(%rsp),%r12;		\</u></td></tr>
<tr><th id="56">56</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_R13(%rsp),%r13;		\</u></td></tr>
<tr><th id="57">57</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_R14(%rsp),%r14;		\</u></td></tr>
<tr><th id="58">58</th><td><u>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	TF_R15(%rsp),%r15;		\</u></td></tr>
<tr><th id="59">59</th><td><u>	<span class='error' title="unknown type name &apos;testb&apos;">testb</span>	<span class='error' title="expected identifier or &apos;(&apos;">$</span>SEL_RPL_MASK,TF_CS(%rsp);	\</u></td></tr>
<tr><th id="60">60</th><td><u>	<span class='error' title="unknown type name &apos;jz&apos;">jz</span>	<span class='error' title="expected identifier or &apos;(&apos;">1f</span>;				\</u></td></tr>
<tr><th id="61">61</th><td><u>	<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="cli" title='cli' data-ref="cli" data-ref-filename="cli"><dfn class="decl def" id="cli" title='cli' data-ref="cli" data-ref-filename="cli"><dfn class="decl def" id="cli" title='cli' data-ref="cli" data-ref-filename="cli"><dfn class="decl def" id="cli" title='cli' data-ref="cli" data-ref-filename="cli">cli</dfn></dfn></dfn></dfn></span>;					\</u></td></tr>
<tr><th id="62">62</th><td><u>	<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="swapgs" title='swapgs' data-ref="swapgs" data-ref-filename="swapgs"><dfn class="decl def" id="swapgs" title='swapgs' data-ref="swapgs" data-ref-filename="swapgs"><dfn class="decl def" id="swapgs" title='swapgs' data-ref="swapgs" data-ref-filename="swapgs"><dfn class="decl def" id="swapgs" title='swapgs' data-ref="swapgs" data-ref-filename="swapgs">swapgs</dfn></dfn></dfn></dfn></span>;					<span class='error' title="expected identifier or &apos;(&apos;">\</span></u></td></tr>
<tr><th id="63">63</th><td><u><span class='error' title="expected identifier or &apos;(&apos;">1</span>:	addq	$TF_RIP,%rsp;</u></td></tr>
<tr><th id="64">64</th><td></td></tr>
<tr><th id="65">65</th><td></td></tr>
<tr><th id="66">66</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_invop_start; .type dtrace_invop_start,@function; dtrace_invop_start:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_invop_start" title='dtrace_invop_start' data-ref="dtrace_invop_start" data-ref-filename="dtrace_invop_start">dtrace_invop_start</dfn></span>)</td></tr>
<tr><th id="67">67</th><td></td></tr>
<tr><th id="68">68</th><td>	<i>/*</i></td></tr>
<tr><th id="69">69</th><td><i>	 * #BP traps with %rip set to the next address. We need to decrement</i></td></tr>
<tr><th id="70">70</th><td><i>	 * the value to indicate the address of the int3 (0xcc) instruction</i></td></tr>
<tr><th id="71">71</th><td><i>	 * that we substituted.</i></td></tr>
<tr><th id="72">72</th><td><i>	 */</i></td></tr>
<tr><th id="73">73</th><td>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	<a class="macro" href="../../../../../../objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/dtrace/dtrace/assym.h.html#72" title="200" data-ref="_M/TF_RIP">TF_RIP</a>(%rsp), %rdi</td></tr>
<tr><th id="74">74</th><td>	decq	%rdi</td></tr>
<tr><th id="75">75</th><td>	movq	%rsp, %rsi</td></tr>
<tr><th id="76">76</th><td>	movq	<a class="macro" href="../../../../../../objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/dtrace/dtrace/assym.h.html#65" title="144" data-ref="_M/TF_RAX">TF_RAX</a>(%rsp), %rdx</td></tr>
<tr><th id="77">77</th><td>	call	dtrace_invop</td></tr>
<tr><th id="78">78</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#108" title=".text; .align 16; .globl dtrace_invop_callsite; .type dtrace_invop_callsite,@function; dtrace_invop_callsite:" data-ref="_M/ALTENTRY">ALTENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_invop_callsite" title='dtrace_invop_callsite' data-ref="dtrace_invop_callsite" data-ref-filename="dtrace_invop_callsite">dtrace_invop_callsite</dfn></span>)</td></tr>
<tr><th id="79">79</th><td>	<span class='error' title="unknown type name &apos;cmpl&apos;">cmpl</span>	<span class='error' title="expected identifier or &apos;(&apos;">$</span><a class="macro" href="../../../dist/uts/common/sys/dtrace.h.html#2427" title="1" data-ref="_M/DTRACE_INVOP_PUSHL_EBP">DTRACE_INVOP_PUSHL_EBP</a>, %eax</td></tr>
<tr><th id="80">80</th><td>	je	bp_push</td></tr>
<tr><th id="81">81</th><td>	cmpl	$<a class="macro" href="../../../dist/uts/common/sys/dtrace.h.html#2431" title="3" data-ref="_M/DTRACE_INVOP_LEAVE">DTRACE_INVOP_LEAVE</a>, %eax</td></tr>
<tr><th id="82">82</th><td>	je	bp_leave</td></tr>
<tr><th id="83">83</th><td>	cmpl	$<a class="macro" href="../../../dist/uts/common/sys/dtrace.h.html#2432" title="4" data-ref="_M/DTRACE_INVOP_NOP">DTRACE_INVOP_NOP</a>, %eax</td></tr>
<tr><th id="84">84</th><td>	je	bp_nop</td></tr>
<tr><th id="85">85</th><td>	cmpl	$<a class="macro" href="../../../dist/uts/common/sys/dtrace.h.html#2433" title="5" data-ref="_M/DTRACE_INVOP_RET">DTRACE_INVOP_RET</a>, %eax</td></tr>
<tr><th id="86">86</th><td>	je	bp_ret</td></tr>
<tr><th id="87">87</th><td></td></tr>
<tr><th id="88">88</th><td>	<i>/* When all else fails handle the trap in the usual way. */</i></td></tr>
<tr><th id="89">89</th><td>	jmpq	*dtrace_invop_calltrap_addr</td></tr>
<tr><th id="90">90</th><td></td></tr>
<tr><th id="91">91</th><td>bp_push:</td></tr>
<tr><th id="92">92</th><td>	<i>/*</i></td></tr>
<tr><th id="93">93</th><td><i>	 * We must emulate a "pushq %rbp".  To do this, we pull the stack</i></td></tr>
<tr><th id="94">94</th><td><i>	 * down 8 bytes, and then store the base pointer.</i></td></tr>
<tr><th id="95">95</th><td><i>	 */</i></td></tr>
<tr><th id="96">96</th><td>	<a class="macro" href="#42" title="; movq 0(%rsp),%rdi; movq 8(%rsp),%rsi; movq 16(%rsp),%rdx; movq 80(%rsp),%rcx; movq 32(%rsp),%r8; movq 40(%rsp),%r9; movq 144(%rsp),%rax; movq 136(%rsp),%rbx; movq 128(%rsp),%rbp; movq 24(%rsp),%r10; movq 88(%rsp),%r11; movq 96(%rsp),%r12; movq 104(%rsp),%r13; movq 112(%rsp),%r14; movq 120(%rsp),%r15; testb $3,208(%rsp); jz 1f; cli; swapgs; 1: addq $200,%rsp;" data-ref="_M/INTR_POP">INTR_POP</a></td></tr>
<tr><th id="97">97</th><td>	<span class='error' title="unknown type name &apos;subq&apos;">subq</span>	<span class='error' title="expected identifier or &apos;(&apos;">$</span><var>16</var>, %rsp		<i>/* make room for %rbp */</i></td></tr>
<tr><th id="98">98</th><td>	pushq	%rax			<i>/* push temp */</i></td></tr>
<tr><th id="99">99</th><td>	movq	<var>24</var>(%rsp), %rax		<i>/* load calling RIP */</i></td></tr>
<tr><th id="100">100</th><td>	movq	%rax, <var>8</var>(%rsp)		<i>/* store calling RIP */</i></td></tr>
<tr><th id="101">101</th><td>	movq	<var>32</var>(%rsp), %rax		<i>/* load calling CS */</i></td></tr>
<tr><th id="102">102</th><td>	movq	%rax, <var>16</var>(%rsp)		<i>/* store calling CS */</i></td></tr>
<tr><th id="103">103</th><td>	movq	<var>40</var>(%rsp), %rax		<i>/* load calling RFLAGS */</i></td></tr>
<tr><th id="104">104</th><td>	movq	%rax, <var>24</var>(%rsp)		<i>/* store calling RFLAGS */</i></td></tr>
<tr><th id="105">105</th><td>	movq	<var>48</var>(%rsp), %rax		<i>/* load calling RSP */</i></td></tr>
<tr><th id="106">106</th><td>	subq	$<var>8</var>, %rax		<i>/* make room for %rbp */</i></td></tr>
<tr><th id="107">107</th><td>	movq	%rax, <var>32</var>(%rsp)		<i>/* store calling RSP */</i></td></tr>
<tr><th id="108">108</th><td>	movq	<var>56</var>(%rsp), %rax		<i>/* load calling SS */</i></td></tr>
<tr><th id="109">109</th><td>	movq	%rax, <var>40</var>(%rsp)		<i>/* store calling SS */</i></td></tr>
<tr><th id="110">110</th><td>	movq	<var>32</var>(%rsp), %rax		<i>/* reload calling RSP */</i></td></tr>
<tr><th id="111">111</th><td>	movq	%rbp, (%rax)		<i>/* store %rbp there */</i></td></tr>
<tr><th id="112">112</th><td>	popq	%rax			<i>/* pop off temp */</i></td></tr>
<tr><th id="113">113</th><td>	iretq				<i>/* return from interrupt */</i></td></tr>
<tr><th id="114">114</th><td>	<i>/*NOTREACHED*/</i></td></tr>
<tr><th id="115">115</th><td></td></tr>
<tr><th id="116">116</th><td>bp_leave:</td></tr>
<tr><th id="117">117</th><td>	<i>/*</i></td></tr>
<tr><th id="118">118</th><td><i>	 * We must emulate a "leave", which is the same as a "movq %rbp, %rsp"</i></td></tr>
<tr><th id="119">119</th><td><i>	 * followed by a "popq %rbp".  This is quite a bit simpler on amd64</i></td></tr>
<tr><th id="120">120</th><td><i>	 * than it is on i386 -- we can exploit the fact that the %rsp is</i></td></tr>
<tr><th id="121">121</th><td><i>	 * explicitly saved to effect the pop without having to reshuffle</i></td></tr>
<tr><th id="122">122</th><td><i>	 * the other data pushed for the trap.</i></td></tr>
<tr><th id="123">123</th><td><i>	 */</i></td></tr>
<tr><th id="124">124</th><td>	<a class="macro" href="#42" title="; movq 0(%rsp),%rdi; movq 8(%rsp),%rsi; movq 16(%rsp),%rdx; movq 80(%rsp),%rcx; movq 32(%rsp),%r8; movq 40(%rsp),%r9; movq 144(%rsp),%rax; movq 136(%rsp),%rbx; movq 128(%rsp),%rbp; movq 24(%rsp),%r10; movq 88(%rsp),%r11; movq 96(%rsp),%r12; movq 104(%rsp),%r13; movq 112(%rsp),%r14; movq 120(%rsp),%r15; testb $3,208(%rsp); jz 1f; cli; swapgs; 1: addq $200,%rsp;" data-ref="_M/INTR_POP">INTR_POP</a></td></tr>
<tr><th id="125">125</th><td>	<span class='error' title="unknown type name &apos;pushq&apos;">pushq</span>	<span class='error' title="expected identifier or &apos;(&apos;">%</span>rax			<i>/* push temp */</i></td></tr>
<tr><th id="126">126</th><td>	movq	<var>8</var>(%rsp), %rax		<i>/* load calling RIP */</i></td></tr>
<tr><th id="127">127</th><td>	movq	%rax, <var>8</var>(%rsp)		<i>/* store calling RIP */</i></td></tr>
<tr><th id="128">128</th><td>	movq	(%rbp), %rax		<i>/* get new %rbp */</i></td></tr>
<tr><th id="129">129</th><td>	addq	$<var>8</var>, %rbp		<i>/* adjust new %rsp */</i></td></tr>
<tr><th id="130">130</th><td>	movq	%rbp, <var>32</var>(%rsp)		<i>/* store new %rsp */</i></td></tr>
<tr><th id="131">131</th><td>	movq	%rax, %rbp		<i>/* set new %rbp */</i></td></tr>
<tr><th id="132">132</th><td>	popq	%rax			<i>/* pop off temp */</i></td></tr>
<tr><th id="133">133</th><td>	iretq				<i>/* return from interrupt */</i></td></tr>
<tr><th id="134">134</th><td>	<i>/*NOTREACHED*/</i></td></tr>
<tr><th id="135">135</th><td></td></tr>
<tr><th id="136">136</th><td>bp_nop:</td></tr>
<tr><th id="137">137</th><td>	<i>/* We must emulate a "nop". */</i></td></tr>
<tr><th id="138">138</th><td>	<a class="macro" href="#42" title="; movq 0(%rsp),%rdi; movq 8(%rsp),%rsi; movq 16(%rsp),%rdx; movq 80(%rsp),%rcx; movq 32(%rsp),%r8; movq 40(%rsp),%r9; movq 144(%rsp),%rax; movq 136(%rsp),%rbx; movq 128(%rsp),%rbp; movq 24(%rsp),%r10; movq 88(%rsp),%r11; movq 96(%rsp),%r12; movq 104(%rsp),%r13; movq 112(%rsp),%r14; movq 120(%rsp),%r15; testb $3,208(%rsp); jz 1f; cli; swapgs; 1: addq $200,%rsp;" data-ref="_M/INTR_POP">INTR_POP</a></td></tr>
<tr><th id="139">139</th><td>	<span class='error' title="unknown type name &apos;iretq&apos;">iretq</span></td></tr>
<tr><th id="140">140</th><td>	<i>/*NOTREACHED*/</i></td></tr>
<tr><th id="141">141</th><td></td></tr>
<tr><th id="142">142</th><td><dfn class="tu decl def" id="bp_ret" title='bp_ret' data-type='int' data-ref="bp_ret" data-ref-filename="bp_ret">bp_ret</dfn><span class='error' title="expected &apos;;&apos; after top level declarator">:</span></td></tr>
<tr><th id="143">143</th><td>	<a class="macro" href="#42" title="; movq 0(%rsp),%rdi; movq 8(%rsp),%rsi; movq 16(%rsp),%rdx; movq 80(%rsp),%rcx; movq 32(%rsp),%r8; movq 40(%rsp),%r9; movq 144(%rsp),%rax; movq 136(%rsp),%rbx; movq 128(%rsp),%rbp; movq 24(%rsp),%r10; movq 88(%rsp),%r11; movq 96(%rsp),%r12; movq 104(%rsp),%r13; movq 112(%rsp),%r14; movq 120(%rsp),%r15; testb $3,208(%rsp); jz 1f; cli; swapgs; 1: addq $200,%rsp;" data-ref="_M/INTR_POP">INTR_POP</a></td></tr>
<tr><th id="144">144</th><td>	<span class='error' title="unknown type name &apos;pushq&apos;">pushq</span>	<span class='error' title="expected identifier or &apos;(&apos;">%</span>rax			<i>/* push temp */</i></td></tr>
<tr><th id="145">145</th><td>	movq	<var>32</var>(%rsp), %rax		<i>/* load %rsp */</i></td></tr>
<tr><th id="146">146</th><td>	movq	(%rax), %rax		<i>/* load calling RIP */</i></td></tr>
<tr><th id="147">147</th><td>	movq	%rax, <var>8</var>(%rsp)		<i>/* store calling RIP */</i></td></tr>
<tr><th id="148">148</th><td>	addq	$<var>8</var>, <var>32</var>(%rsp)		<i>/* adjust new %rsp */</i></td></tr>
<tr><th id="149">149</th><td>	popq	%rax			<i>/* pop off temp */</i></td></tr>
<tr><th id="150">150</th><td>	iretq				<i>/* return from interrupt */</i></td></tr>
<tr><th id="151">151</th><td>	<i>/*NOTREACHED*/</i></td></tr>
<tr><th id="152">152</th><td></td></tr>
<tr><th id="153">153</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_invop_start, . - dtrace_invop_start" data-ref="_M/END">END</a>(dtrace_invop_start)</td></tr>
<tr><th id="154">154</th><td></td></tr>
<tr><th id="155">155</th><td><i>/*</i></td></tr>
<tr><th id="156">156</th><td><i>void dtrace_invop_init(void)</i></td></tr>
<tr><th id="157">157</th><td><i>*/</i></td></tr>
<tr><th id="158">158</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_invop_init; .type dtrace_invop_init,@function; dtrace_invop_init:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_invop_init" title='dtrace_invop_init' data-ref="dtrace_invop_init" data-ref-filename="dtrace_invop_init">dtrace_invop_init</dfn></span>)</td></tr>
<tr><th id="159">159</th><td>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	<span class='error' title="expected identifier or &apos;(&apos;">$</span>dtrace_invop_start, dtrace_invop_jump_addr(%rip)</td></tr>
<tr><th id="160">160</th><td>	ret</td></tr>
<tr><th id="161">161</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_invop_init, . - dtrace_invop_init" data-ref="_M/END">END</a>(dtrace_invop_init)</td></tr>
<tr><th id="162">162</th><td></td></tr>
<tr><th id="163">163</th><td><i>/*</i></td></tr>
<tr><th id="164">164</th><td><i>void dtrace_invop_uninit(void)</i></td></tr>
<tr><th id="165">165</th><td><i>*/</i></td></tr>
<tr><th id="166">166</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_invop_uninit; .type dtrace_invop_uninit,@function; dtrace_invop_uninit:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_invop_uninit" title='dtrace_invop_uninit' data-ref="dtrace_invop_uninit" data-ref-filename="dtrace_invop_uninit">dtrace_invop_uninit</dfn></span>)</td></tr>
<tr><th id="167">167</th><td>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	<span class='error' title="expected identifier or &apos;(&apos;">$</span><var>0</var>, dtrace_invop_jump_addr(%rip)</td></tr>
<tr><th id="168">168</th><td>	ret</td></tr>
<tr><th id="169">169</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_invop_uninit, . - dtrace_invop_uninit" data-ref="_M/END">END</a>(dtrace_invop_uninit)</td></tr>
<tr><th id="170">170</th><td></td></tr>
<tr><th id="171">171</th><td><i>/*</i></td></tr>
<tr><th id="172">172</th><td><i>greg_t dtrace_getfp(void)</i></td></tr>
<tr><th id="173">173</th><td><i>*/</i></td></tr>
<tr><th id="174">174</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_getfp; .type dtrace_getfp,@function; dtrace_getfp:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_getfp" title='dtrace_getfp' data-ref="dtrace_getfp" data-ref-filename="dtrace_getfp">dtrace_getfp</dfn></span>)</td></tr>
<tr><th id="175">175</th><td>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	<span class='error' title="expected identifier or &apos;(&apos;">%</span>rbp, %rax</td></tr>
<tr><th id="176">176</th><td>	ret</td></tr>
<tr><th id="177">177</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_getfp, . - dtrace_getfp" data-ref="_M/END">END</a>(dtrace_getfp)</td></tr>
<tr><th id="178">178</th><td></td></tr>
<tr><th id="179">179</th><td><i>/*</i></td></tr>
<tr><th id="180">180</th><td><i>uint32_t</i></td></tr>
<tr><th id="181">181</th><td><i>dtrace_cas32(uint32_t *target, uint32_t cmp, uint32_t new)</i></td></tr>
<tr><th id="182">182</th><td><i>*/</i></td></tr>
<tr><th id="183">183</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_cas32; .type dtrace_cas32,@function; dtrace_cas32:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_cas32" title='dtrace_cas32' data-ref="dtrace_cas32" data-ref-filename="dtrace_cas32">dtrace_cas32</dfn></span>)</td></tr>
<tr><th id="184">184</th><td>	<span class='error' title="unknown type name &apos;movl&apos;">movl</span>	<span class='error' title="expected identifier or &apos;(&apos;">%</span>esi, %eax</td></tr>
<tr><th id="185">185</th><td>	lock</td></tr>
<tr><th id="186">186</th><td>	cmpxchgl %edx, (%rdi)</td></tr>
<tr><th id="187">187</th><td>	ret</td></tr>
<tr><th id="188">188</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_cas32, . - dtrace_cas32" data-ref="_M/END">END</a>(dtrace_cas32)</td></tr>
<tr><th id="189">189</th><td></td></tr>
<tr><th id="190">190</th><td><i>/*</i></td></tr>
<tr><th id="191">191</th><td><i>void *</i></td></tr>
<tr><th id="192">192</th><td><i>dtrace_casptr(void *target, void *cmp, void *new)</i></td></tr>
<tr><th id="193">193</th><td><i>*/</i></td></tr>
<tr><th id="194">194</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_casptr; .type dtrace_casptr,@function; dtrace_casptr:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_casptr" title='dtrace_casptr' data-ref="dtrace_casptr" data-ref-filename="dtrace_casptr">dtrace_casptr</dfn></span>)</td></tr>
<tr><th id="195">195</th><td>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	<span class='error' title="expected identifier or &apos;(&apos;">%</span>rsi, %rax</td></tr>
<tr><th id="196">196</th><td>	lock</td></tr>
<tr><th id="197">197</th><td>	cmpxchgq %rdx, (%rdi)</td></tr>
<tr><th id="198">198</th><td>	ret</td></tr>
<tr><th id="199">199</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_casptr, . - dtrace_casptr" data-ref="_M/END">END</a>(dtrace_casptr)</td></tr>
<tr><th id="200">200</th><td></td></tr>
<tr><th id="201">201</th><td><i>/*</i></td></tr>
<tr><th id="202">202</th><td><i>uintptr_t</i></td></tr>
<tr><th id="203">203</th><td><i>dtrace_caller(int aframes)</i></td></tr>
<tr><th id="204">204</th><td><i>*/</i></td></tr>
<tr><th id="205">205</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_caller; .type dtrace_caller,@function; dtrace_caller:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_caller" title='dtrace_caller' data-ref="dtrace_caller" data-ref-filename="dtrace_caller">dtrace_caller</dfn></span>)</td></tr>
<tr><th id="206">206</th><td>	<span class='error' title="unknown type name &apos;movq&apos;">movq</span>	<span class='error' title="expected identifier or &apos;(&apos;">$</span>-<var>1</var>, %rax</td></tr>
<tr><th id="207">207</th><td>	ret</td></tr>
<tr><th id="208">208</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_caller, . - dtrace_caller" data-ref="_M/END">END</a>(dtrace_caller)</td></tr>
<tr><th id="209">209</th><td></td></tr>
<tr><th id="210">210</th><td><i>/*</i></td></tr>
<tr><th id="211">211</th><td><i>void</i></td></tr>
<tr><th id="212">212</th><td><i>dtrace_copy(uintptr_t src, uintptr_t dest, size_t size)</i></td></tr>
<tr><th id="213">213</th><td><i>*/</i></td></tr>
<tr><th id="214">214</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_copy; .type dtrace_copy,@function; dtrace_copy:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_copy" title='dtrace_copy' data-ref="dtrace_copy" data-ref-filename="dtrace_copy">dtrace_copy</dfn></span>)</td></tr>
<tr><th id="215">215</th><td>	<span class='error' title="unknown type name &apos;pushq&apos;">pushq</span>	<span class='error' title="expected identifier or &apos;(&apos;">%</span>rbp</td></tr>
<tr><th id="216">216</th><td>	movq	%rsp, %rbp</td></tr>
<tr><th id="217">217</th><td></td></tr>
<tr><th id="218">218</th><td>	xchgq	%rdi, %rsi		<i>/* make %rsi source, %rdi dest */</i></td></tr>
<tr><th id="219">219</th><td>	movq	%rdx, %rcx		<i>/* load count */</i></td></tr>
<tr><th id="220">220</th><td>	repz				<i>/* repeat for count ... */</i></td></tr>
<tr><th id="221">221</th><td>	smovb				<i>/*   move from %ds:rsi to %ed:rdi */</i></td></tr>
<tr><th id="222">222</th><td>	leave</td></tr>
<tr><th id="223">223</th><td>	ret</td></tr>
<tr><th id="224">224</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_copy, . - dtrace_copy" data-ref="_M/END">END</a>(dtrace_copy)</td></tr>
<tr><th id="225">225</th><td></td></tr>
<tr><th id="226">226</th><td><i>/*</i></td></tr>
<tr><th id="227">227</th><td><i>void</i></td></tr>
<tr><th id="228">228</th><td><i>dtrace_copystr(uintptr_t uaddr, uintptr_t kaddr, size_t size,</i></td></tr>
<tr><th id="229">229</th><td><i>    volatile uint16_t *flags)</i></td></tr>
<tr><th id="230">230</th><td><i>*/</i></td></tr>
<tr><th id="231">231</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_copystr; .type dtrace_copystr,@function; dtrace_copystr:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_copystr" title='dtrace_copystr' data-ref="dtrace_copystr" data-ref-filename="dtrace_copystr">dtrace_copystr</dfn></span>)</td></tr>
<tr><th id="232">232</th><td>	<span class='error' title="unknown type name &apos;pushq&apos;">pushq</span>	<span class='error' title="expected identifier or &apos;(&apos;">%</span>rbp</td></tr>
<tr><th id="233">233</th><td>	movq	%rsp, %rbp</td></tr>
<tr><th id="234">234</th><td></td></tr>
<tr><th id="235">235</th><td><var>0</var>:</td></tr>
<tr><th id="236">236</th><td>	movb	(%rdi), %al		<i>/* load from source */</i></td></tr>
<tr><th id="237">237</th><td>	movb	%al, (%rsi)		<i>/* store to destination */</i></td></tr>
<tr><th id="238">238</th><td>	addq	$<var>1</var>, %rdi		<i>/* increment source pointer */</i></td></tr>
<tr><th id="239">239</th><td>	addq	$<var>1</var>, %rsi		<i>/* increment destination pointer */</i></td></tr>
<tr><th id="240">240</th><td>	subq	$<var>1</var>, %rdx		<i>/* decrement remaining count */</i></td></tr>
<tr><th id="241">241</th><td>	cmpb	$<var>0</var>, %al</td></tr>
<tr><th id="242">242</th><td>	je	<var>2f</var></td></tr>
<tr><th id="243">243</th><td>	testq	$<var>0xfff</var>, %rdx		<i>/* test if count is 4k-aligned */</i></td></tr>
<tr><th id="244">244</th><td>	jnz	<var>1f</var>			<i>/* if not, continue with copying */</i></td></tr>
<tr><th id="245">245</th><td>	testq	$<a class="macro" href="../../../sys/sys/cpuvar_defs.h.html#37" title="0x0004" data-ref="_M/CPU_DTRACE_BADADDR">CPU_DTRACE_BADADDR</a>, (%rcx) <i>/* load and test dtrace flags */</i></td></tr>
<tr><th id="246">246</th><td>	jnz	<var>2f</var></td></tr>
<tr><th id="247">247</th><td><var>1</var>:</td></tr>
<tr><th id="248">248</th><td>	cmpq	$<var>0</var>, %rdx</td></tr>
<tr><th id="249">249</th><td>	jne	<var>0b</var></td></tr>
<tr><th id="250">250</th><td><var>2</var>:</td></tr>
<tr><th id="251">251</th><td>	leave</td></tr>
<tr><th id="252">252</th><td>	ret</td></tr>
<tr><th id="253">253</th><td></td></tr>
<tr><th id="254">254</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_copystr, . - dtrace_copystr" data-ref="_M/END">END</a>(dtrace_copystr)</td></tr>
<tr><th id="255">255</th><td></td></tr>
<tr><th id="256">256</th><td><i>/*</i></td></tr>
<tr><th id="257">257</th><td><i>uintptr_t</i></td></tr>
<tr><th id="258">258</th><td><i>dtrace_fulword(void *addr)</i></td></tr>
<tr><th id="259">259</th><td><i>*/</i></td></tr>
<tr><th id="260">260</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_fulword; .type dtrace_fulword,@function; dtrace_fulword:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_fulword" title='dtrace_fulword' data-ref="dtrace_fulword" data-ref-filename="dtrace_fulword">dtrace_fulword</dfn></span>)</td></tr>
<tr><th id="261">261</th><td>	<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl fn" id="movq" title='movq' data-ref="movq" data-ref-filename="movq">movq</dfn></span>	(<span class='error' title="expected parameter declarator"><span class='error' title="expected &apos;)&apos;">%</span></span>rdi),<span class='error' title="expected &apos;;&apos; after top level declarator"></span> <span class='error' title="expected identifier or &apos;(&apos;">%</span>rax</td></tr>
<tr><th id="262">262</th><td>	ret</td></tr>
<tr><th id="263">263</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_fulword, . - dtrace_fulword" data-ref="_M/END">END</a>(dtrace_fulword)</td></tr>
<tr><th id="264">264</th><td></td></tr>
<tr><th id="265">265</th><td><i>/*</i></td></tr>
<tr><th id="266">266</th><td><i>uint8_t</i></td></tr>
<tr><th id="267">267</th><td><i>dtrace_fuword8_nocheck(void *addr)</i></td></tr>
<tr><th id="268">268</th><td><i>*/</i></td></tr>
<tr><th id="269">269</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_fuword8_nocheck; .type dtrace_fuword8_nocheck,@function; dtrace_fuword8_nocheck:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_fuword8_nocheck" title='dtrace_fuword8_nocheck' data-ref="dtrace_fuword8_nocheck" data-ref-filename="dtrace_fuword8_nocheck">dtrace_fuword8_nocheck</dfn></span>)</td></tr>
<tr><th id="270">270</th><td>	<span class='error' title="unknown type name &apos;xorq&apos;">xorq</span>	<span class='error' title="expected identifier or &apos;(&apos;">%</span>rax, %rax</td></tr>
<tr><th id="271">271</th><td>	movb	(%rdi), %al</td></tr>
<tr><th id="272">272</th><td>	ret</td></tr>
<tr><th id="273">273</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_fuword8_nocheck, . - dtrace_fuword8_nocheck" data-ref="_M/END">END</a>(dtrace_fuword8_nocheck)</td></tr>
<tr><th id="274">274</th><td></td></tr>
<tr><th id="275">275</th><td><i>/*</i></td></tr>
<tr><th id="276">276</th><td><i>uint16_t</i></td></tr>
<tr><th id="277">277</th><td><i>dtrace_fuword16_nocheck(void *addr)</i></td></tr>
<tr><th id="278">278</th><td><i>*/</i></td></tr>
<tr><th id="279">279</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_fuword16_nocheck; .type dtrace_fuword16_nocheck,@function; dtrace_fuword16_nocheck:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_fuword16_nocheck" title='dtrace_fuword16_nocheck' data-ref="dtrace_fuword16_nocheck" data-ref-filename="dtrace_fuword16_nocheck">dtrace_fuword16_nocheck</dfn></span>)</td></tr>
<tr><th id="280">280</th><td>	<span class='error' title="unknown type name &apos;xorq&apos;">xorq</span>	<span class='error' title="expected identifier or &apos;(&apos;">%</span>rax, %rax</td></tr>
<tr><th id="281">281</th><td>	movw	(%rdi), %ax</td></tr>
<tr><th id="282">282</th><td>	ret</td></tr>
<tr><th id="283">283</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_fuword16_nocheck, . - dtrace_fuword16_nocheck" data-ref="_M/END">END</a>(dtrace_fuword16_nocheck)</td></tr>
<tr><th id="284">284</th><td></td></tr>
<tr><th id="285">285</th><td><i>/*</i></td></tr>
<tr><th id="286">286</th><td><i>uint32_t</i></td></tr>
<tr><th id="287">287</th><td><i>dtrace_fuword32_nocheck(void *addr)</i></td></tr>
<tr><th id="288">288</th><td><i>*/</i></td></tr>
<tr><th id="289">289</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_fuword32_nocheck; .type dtrace_fuword32_nocheck,@function; dtrace_fuword32_nocheck:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_fuword32_nocheck" title='dtrace_fuword32_nocheck' data-ref="dtrace_fuword32_nocheck" data-ref-filename="dtrace_fuword32_nocheck">dtrace_fuword32_nocheck</dfn></span>)</td></tr>
<tr><th id="290">290</th><td>	<span class='error' title="unknown type name &apos;xorq&apos;">xorq</span>	<span class='error' title="expected identifier or &apos;(&apos;">%</span>rax, %rax</td></tr>
<tr><th id="291">291</th><td>	movl	(%rdi), %eax</td></tr>
<tr><th id="292">292</th><td>	ret</td></tr>
<tr><th id="293">293</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_fuword32_nocheck, . - dtrace_fuword32_nocheck" data-ref="_M/END">END</a>(dtrace_fuword32_nocheck)</td></tr>
<tr><th id="294">294</th><td></td></tr>
<tr><th id="295">295</th><td><i>/*</i></td></tr>
<tr><th id="296">296</th><td><i>uint64_t</i></td></tr>
<tr><th id="297">297</th><td><i>dtrace_fuword64_nocheck(void *addr)</i></td></tr>
<tr><th id="298">298</th><td><i>*/</i></td></tr>
<tr><th id="299">299</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_fuword64_nocheck; .type dtrace_fuword64_nocheck,@function; dtrace_fuword64_nocheck:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_fuword64_nocheck" title='dtrace_fuword64_nocheck' data-ref="dtrace_fuword64_nocheck" data-ref-filename="dtrace_fuword64_nocheck">dtrace_fuword64_nocheck</dfn></span>)</td></tr>
<tr><th id="300">300</th><td>	<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><a class="decl fn" href="#movq" title='movq' data-ref="movq" data-ref-filename="movq">movq</a></span>	(<span class='error' title="expected parameter declarator"><span class='error' title="expected &apos;)&apos;">%</span></span>rdi),<span class='error' title="expected &apos;;&apos; after top level declarator"></span> <span class='error' title="expected identifier or &apos;(&apos;">%</span>rax</td></tr>
<tr><th id="301">301</th><td>	ret</td></tr>
<tr><th id="302">302</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_fuword64_nocheck, . - dtrace_fuword64_nocheck" data-ref="_M/END">END</a>(dtrace_fuword64_nocheck)</td></tr>
<tr><th id="303">303</th><td></td></tr>
<tr><th id="304">304</th><td><i>/*</i></td></tr>
<tr><th id="305">305</th><td><i>void</i></td></tr>
<tr><th id="306">306</th><td><i>dtrace_probe_error(dtrace_state_t *state, dtrace_epid_t epid, int which,</i></td></tr>
<tr><th id="307">307</th><td><i>    int fault, int fltoffs, uintptr_t illval)</i></td></tr>
<tr><th id="308">308</th><td><i>*/</i></td></tr>
<tr><th id="309">309</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_probe_error; .type dtrace_probe_error,@function; dtrace_probe_error:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_probe_error" title='dtrace_probe_error' data-ref="dtrace_probe_error" data-ref-filename="dtrace_probe_error">dtrace_probe_error</dfn></span>)</td></tr>
<tr><th id="310">310</th><td>	<span class='error' title="unknown type name &apos;pushq&apos;">pushq</span>	<span class='error' title="expected identifier or &apos;(&apos;">%</span>rbp</td></tr>
<tr><th id="311">311</th><td>	movq	%rsp, %rbp</td></tr>
<tr><th id="312">312</th><td>	subq	$<var>0x8</var>, %rsp</td></tr>
<tr><th id="313">313</th><td>	movq	%r9, (%rsp)</td></tr>
<tr><th id="314">314</th><td>	movq	%r8, %r9</td></tr>
<tr><th id="315">315</th><td>	movq	%rcx, %r8</td></tr>
<tr><th id="316">316</th><td>	movq	%rdx, %rcx</td></tr>
<tr><th id="317">317</th><td>	movq	%rsi, %rdx</td></tr>
<tr><th id="318">318</th><td>	movq	%rdi, %rsi</td></tr>
<tr><th id="319">319</th><td>	movl	dtrace_probeid_error(%rip), %edi</td></tr>
<tr><th id="320">320</th><td>	call	dtrace_probe</td></tr>
<tr><th id="321">321</th><td>	addq	$<var>0x8</var>, %rsp</td></tr>
<tr><th id="322">322</th><td>	leave</td></tr>
<tr><th id="323">323</th><td>	ret</td></tr>
<tr><th id="324">324</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_probe_error, . - dtrace_probe_error" data-ref="_M/END">END</a>(dtrace_probe_error)</td></tr>
<tr><th id="325">325</th><td></td></tr>
<tr><th id="326">326</th><td><i>/*</i></td></tr>
<tr><th id="327">327</th><td><i>void</i></td></tr>
<tr><th id="328">328</th><td><i>dtrace_membar_producer(void)</i></td></tr>
<tr><th id="329">329</th><td><i>*/</i></td></tr>
<tr><th id="330">330</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_membar_producer; .type dtrace_membar_producer,@function; dtrace_membar_producer:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_membar_producer" title='dtrace_membar_producer' data-ref="dtrace_membar_producer" data-ref-filename="dtrace_membar_producer">dtrace_membar_producer</dfn></span>)</td></tr>
<tr><th id="331">331</th><td>	<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="rep" title='rep' data-ref="rep" data-ref-filename="rep">rep</dfn></span>;	<span class='error' title="unknown type name &apos;ret&apos;">ret</span>	<i>/* use 2 byte return instruction when branch target */</i></td></tr>
<tr><th id="332">332</th><td>			<i>/* AMD Software Optimization Guide - Section 6.2 */</i></td></tr>
<tr><th id="333">333</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_membar_producer, . - dtrace_membar_producer" data-ref="_M/END">END</a>(dtrace_membar_producer)</td></tr>
<tr><th id="334">334</th><td></td></tr>
<tr><th id="335">335</th><td><i>/*</i></td></tr>
<tr><th id="336">336</th><td><i>void</i></td></tr>
<tr><th id="337">337</th><td><i>dtrace_membar_consumer(void)</i></td></tr>
<tr><th id="338">338</th><td><i>*/</i></td></tr>
<tr><th id="339">339</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_membar_consumer; .type dtrace_membar_consumer,@function; dtrace_membar_consumer:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_membar_consumer" title='dtrace_membar_consumer' data-ref="dtrace_membar_consumer" data-ref-filename="dtrace_membar_consumer">dtrace_membar_consumer</dfn></span>)</td></tr>
<tr><th id="340">340</th><td>	<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="rep" title='rep' data-ref="rep" data-ref-filename="rep">rep</dfn></span>;	<span class='error' title="unknown type name &apos;ret&apos;">ret</span>	<i>/* use 2 byte return instruction when branch target */</i></td></tr>
<tr><th id="341">341</th><td>			<i>/* AMD Software Optimization Guide - Section 6.2 */</i></td></tr>
<tr><th id="342">342</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_membar_consumer, . - dtrace_membar_consumer" data-ref="_M/END">END</a>(dtrace_membar_consumer)</td></tr>
<tr><th id="343">343</th><td></td></tr>
<tr><th id="344">344</th><td><i>/*</i></td></tr>
<tr><th id="345">345</th><td><i>dtrace_icookie_t</i></td></tr>
<tr><th id="346">346</th><td><i>dtrace_interrupt_disable(void)</i></td></tr>
<tr><th id="347">347</th><td><i>*/</i></td></tr>
<tr><th id="348">348</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_interrupt_disable; .type dtrace_interrupt_disable,@function; dtrace_interrupt_disable:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_interrupt_disable" title='dtrace_interrupt_disable' data-ref="dtrace_interrupt_disable" data-ref-filename="dtrace_interrupt_disable">dtrace_interrupt_disable</dfn></span>)</td></tr>
<tr><th id="349">349</th><td>	<span class='error' title="unknown type name &apos;pushfq&apos;">pushfq</span></td></tr>
<tr><th id="350">350</th><td>	<dfn class="tu decl def" id="popq" title='popq' data-type='int' data-ref="popq" data-ref-filename="popq">popq</dfn><span class='error' title="expected &apos;;&apos; after top level declarator"></span>	%rax</td></tr>
<tr><th id="351">351</th><td>	cli</td></tr>
<tr><th id="352">352</th><td>	ret</td></tr>
<tr><th id="353">353</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_interrupt_disable, . - dtrace_interrupt_disable" data-ref="_M/END">END</a>(dtrace_interrupt_disable)</td></tr>
<tr><th id="354">354</th><td></td></tr>
<tr><th id="355">355</th><td><i>/*</i></td></tr>
<tr><th id="356">356</th><td><i>void</i></td></tr>
<tr><th id="357">357</th><td><i>dtrace_interrupt_enable(dtrace_icookie_t cookie)</i></td></tr>
<tr><th id="358">358</th><td><i>*/</i></td></tr>
<tr><th id="359">359</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#106" title=".text; .align 16; .globl dtrace_interrupt_enable; .type dtrace_interrupt_enable,@function; dtrace_interrupt_enable:;" data-ref="_M/ENTRY">ENTRY</a>(<span class='warning' title="type specifier missing, defaults to &apos;int&apos;"><dfn class="decl def" id="dtrace_interrupt_enable" title='dtrace_interrupt_enable' data-ref="dtrace_interrupt_enable" data-ref-filename="dtrace_interrupt_enable">dtrace_interrupt_enable</dfn></span>)</td></tr>
<tr><th id="360">360</th><td>	<span class='error' title="unknown type name &apos;pushq&apos;">pushq</span>	<span class='error' title="expected identifier or &apos;(&apos;">%</span>rdi</td></tr>
<tr><th id="361">361</th><td>	popfq</td></tr>
<tr><th id="362">362</th><td>	ret</td></tr>
<tr><th id="363">363</th><td>	<a class="macro" href="../../../../../../sys/arch/amd64/include/asm.h.html#111" title=".size dtrace_interrupt_enable, . - dtrace_interrupt_enable" data-ref="_M/END">END</a>(dtrace_interrupt_enable)</td></tr>
<tr><th id="364">364</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2019-Jul-19</em> from project netbsd revision <em>f9da89e0d</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
