<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>rcsfcmp.c source code [netbsd/external/gpl2/rcs/dist/src/rcsfcmp.c] - Woboq Code Browser</title>
<link rel="stylesheet" href="https://code.woboq.org/data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="https://code.woboq.org/data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="https://code.woboq.org/data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="https://code.woboq.org/data/jquery/jquery-ui.min.js"></script>
<script>var file = 'netbsd/external/gpl2/rcs/dist/src/rcsfcmp.c'; var root_path = '../../../../../..'; var data_path = 'https://code.woboq.org/data'; var ecma_script_api_version = 2;</script>
<script src='https://code.woboq.org/data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../../..'>netbsd</a>/<a href='../../../..'>external</a>/<a href='../../..'>gpl2</a>/<a href='../..'>rcs</a>/<a href='..'>dist</a>/<a href='./'>src</a>/<a href='rcsfcmp.c.html'>rcsfcmp.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*	$NetBSD: rcsfcmp.c,v 1.2 2016/01/14 04:22:39 christos Exp $	*/</i></td></tr>
<tr><th id="2">2</th><td></td></tr>
<tr><th id="3">3</th><td><i>/* Compare working files, ignoring RCS keyword strings.  */</i></td></tr>
<tr><th id="4">4</th><td></td></tr>
<tr><th id="5">5</th><td><i>/*****************************************************************************</i></td></tr>
<tr><th id="6">6</th><td><i> *                       rcsfcmp()</i></td></tr>
<tr><th id="7">7</th><td><i> *                       Testprogram: define FCMPTEST</i></td></tr>
<tr><th id="8">8</th><td><i> *****************************************************************************</i></td></tr>
<tr><th id="9">9</th><td><i> */</i></td></tr>
<tr><th id="10">10</th><td></td></tr>
<tr><th id="11">11</th><td><i>/* Copyright 1982, 1988, 1989 Walter Tichy</i></td></tr>
<tr><th id="12">12</th><td><i>   Copyright 1990, 1991, 1992, 1993, 1994, 1995 Paul Eggert</i></td></tr>
<tr><th id="13">13</th><td><i>   Distributed under license by the Free Software Foundation, Inc.</i></td></tr>
<tr><th id="14">14</th><td><i></i></td></tr>
<tr><th id="15">15</th><td><i>This file is part of RCS.</i></td></tr>
<tr><th id="16">16</th><td><i></i></td></tr>
<tr><th id="17">17</th><td><i>RCS is free software; you can redistribute it and/or modify</i></td></tr>
<tr><th id="18">18</th><td><i>it under the terms of the GNU General Public License as published by</i></td></tr>
<tr><th id="19">19</th><td><i>the Free Software Foundation; either version 2, or (at your option)</i></td></tr>
<tr><th id="20">20</th><td><i>any later version.</i></td></tr>
<tr><th id="21">21</th><td><i></i></td></tr>
<tr><th id="22">22</th><td><i>RCS is distributed in the hope that it will be useful,</i></td></tr>
<tr><th id="23">23</th><td><i>but WITHOUT ANY WARRANTY; without even the implied warranty of</i></td></tr>
<tr><th id="24">24</th><td><i>MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</i></td></tr>
<tr><th id="25">25</th><td><i>GNU General Public License for more details.</i></td></tr>
<tr><th id="26">26</th><td><i></i></td></tr>
<tr><th id="27">27</th><td><i>You should have received a copy of the GNU General Public License</i></td></tr>
<tr><th id="28">28</th><td><i>along with RCS; see the file COPYING.</i></td></tr>
<tr><th id="29">29</th><td><i>If not, write to the Free Software Foundation,</i></td></tr>
<tr><th id="30">30</th><td><i>59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</i></td></tr>
<tr><th id="31">31</th><td><i></i></td></tr>
<tr><th id="32">32</th><td><i>Report problems and direct all questions to:</i></td></tr>
<tr><th id="33">33</th><td><i></i></td></tr>
<tr><th id="34">34</th><td><i>    rcs-bugs@cs.purdue.edu</i></td></tr>
<tr><th id="35">35</th><td><i></i></td></tr>
<tr><th id="36">36</th><td><i>*/</i></td></tr>
<tr><th id="37">37</th><td></td></tr>
<tr><th id="38">38</th><td></td></tr>
<tr><th id="39">39</th><td></td></tr>
<tr><th id="40">40</th><td></td></tr>
<tr><th id="41">41</th><td></td></tr>
<tr><th id="42">42</th><td><i>/*</i></td></tr>
<tr><th id="43">43</th><td><i> * Log: rcsfcmp.c,v </i></td></tr>
<tr><th id="44">44</th><td><i> * Revision 5.14  1995/06/16 06:19:24  eggert</i></td></tr>
<tr><th id="45">45</th><td><i> * Update FSF address.</i></td></tr>
<tr><th id="46">46</th><td><i> *</i></td></tr>
<tr><th id="47">47</th><td><i> * Revision 5.13  1995/06/01 16:23:43  eggert</i></td></tr>
<tr><th id="48">48</th><td><i> * (rcsfcmp): Add -kb support.</i></td></tr>
<tr><th id="49">49</th><td><i> *</i></td></tr>
<tr><th id="50">50</th><td><i> * Revision 5.12  1994/03/17 14:05:48  eggert</i></td></tr>
<tr><th id="51">51</th><td><i> * Normally calculate the $Log prefix from context, not from RCS file.</i></td></tr>
<tr><th id="52">52</th><td><i> * Calculate line numbers correctly even if the $Log prefix contains newlines.</i></td></tr>
<tr><th id="53">53</th><td><i> * Remove lint.</i></td></tr>
<tr><th id="54">54</th><td><i> *</i></td></tr>
<tr><th id="55">55</th><td><i> * Revision 5.11  1993/11/03 17:42:27  eggert</i></td></tr>
<tr><th id="56">56</th><td><i> * Fix yet another off-by-one error when comparing Log string expansions.</i></td></tr>
<tr><th id="57">57</th><td><i> *</i></td></tr>
<tr><th id="58">58</th><td><i> * Revision 5.10  1992/07/28 16:12:44  eggert</i></td></tr>
<tr><th id="59">59</th><td><i> * Statement macro names now end in _.</i></td></tr>
<tr><th id="60">60</th><td><i> *</i></td></tr>
<tr><th id="61">61</th><td><i> * Revision 5.9  1991/10/07  17:32:46  eggert</i></td></tr>
<tr><th id="62">62</th><td><i> * Count log lines correctly.</i></td></tr>
<tr><th id="63">63</th><td><i> *</i></td></tr>
<tr><th id="64">64</th><td><i> * Revision 5.8  1991/08/19  03:13:55  eggert</i></td></tr>
<tr><th id="65">65</th><td><i> * Tune.</i></td></tr>
<tr><th id="66">66</th><td><i> *</i></td></tr>
<tr><th id="67">67</th><td><i> * Revision 5.7  1991/04/21  11:58:22  eggert</i></td></tr>
<tr><th id="68">68</th><td><i> * Fix errno bug.  Add MS-DOS support.</i></td></tr>
<tr><th id="69">69</th><td><i> *</i></td></tr>
<tr><th id="70">70</th><td><i> * Revision 5.6  1991/02/28  19:18:47  eggert</i></td></tr>
<tr><th id="71">71</th><td><i> * Open work file at most once.</i></td></tr>
<tr><th id="72">72</th><td><i> *</i></td></tr>
<tr><th id="73">73</th><td><i> * Revision 5.5  1990/11/27  09:26:05  eggert</i></td></tr>
<tr><th id="74">74</th><td><i> * Fix comment leader bug.</i></td></tr>
<tr><th id="75">75</th><td><i> *</i></td></tr>
<tr><th id="76">76</th><td><i> * Revision 5.4  1990/11/01  05:03:42  eggert</i></td></tr>
<tr><th id="77">77</th><td><i> * Permit arbitrary data in logs and comment leaders.</i></td></tr>
<tr><th id="78">78</th><td><i> *</i></td></tr>
<tr><th id="79">79</th><td><i> * Revision 5.3  1990/09/11  02:41:15  eggert</i></td></tr>
<tr><th id="80">80</th><td><i> * Don't ignore differences inside keyword strings if -ko is set.</i></td></tr>
<tr><th id="81">81</th><td><i> *</i></td></tr>
<tr><th id="82">82</th><td><i> * Revision 5.1  1990/08/29  07:13:58  eggert</i></td></tr>
<tr><th id="83">83</th><td><i> * Clean old log messages too.</i></td></tr>
<tr><th id="84">84</th><td><i> *</i></td></tr>
<tr><th id="85">85</th><td><i> * Revision 5.0  1990/08/22  08:12:49  eggert</i></td></tr>
<tr><th id="86">86</th><td><i> * Don't append "checked in with -k by " log to logs,</i></td></tr>
<tr><th id="87">87</th><td><i> * so that checking in a program with -k doesn't change it.</i></td></tr>
<tr><th id="88">88</th><td><i> * Ansify and Posixate.  Remove lint.</i></td></tr>
<tr><th id="89">89</th><td><i> *</i></td></tr>
<tr><th id="90">90</th><td><i> * Revision 4.5  89/05/01  15:12:42  narten</i></td></tr>
<tr><th id="91">91</th><td><i> * changed copyright header to reflect current distribution rules</i></td></tr>
<tr><th id="92">92</th><td><i> * </i></td></tr>
<tr><th id="93">93</th><td><i> * Revision 4.4  88/08/09  19:12:50  eggert</i></td></tr>
<tr><th id="94">94</th><td><i> * Shrink stdio code size.</i></td></tr>
<tr><th id="95">95</th><td><i> * </i></td></tr>
<tr><th id="96">96</th><td><i> * Revision 4.3  87/12/18  11:40:02  narten</i></td></tr>
<tr><th id="97">97</th><td><i> * lint cleanups (Guy Harris)</i></td></tr>
<tr><th id="98">98</th><td><i> * </i></td></tr>
<tr><th id="99">99</th><td><i> * Revision 4.2  87/10/18  10:33:06  narten</i></td></tr>
<tr><th id="100">100</th><td><i> * updting version number. Changes relative to 1.1 actually relative to </i></td></tr>
<tr><th id="101">101</th><td><i> * 4.1</i></td></tr>
<tr><th id="102">102</th><td><i> * </i></td></tr>
<tr><th id="103">103</th><td><i> * Revision 1.2  87/03/27  14:22:19  jenkins</i></td></tr>
<tr><th id="104">104</th><td><i> * Port to suns</i></td></tr>
<tr><th id="105">105</th><td><i> * </i></td></tr>
<tr><th id="106">106</th><td><i> * Revision 4.1  83/05/10  16:24:04  wft</i></td></tr>
<tr><th id="107">107</th><td><i> * Marker matching now uses trymatch(). Marker pattern is now</i></td></tr>
<tr><th id="108">108</th><td><i> * checked precisely.</i></td></tr>
<tr><th id="109">109</th><td><i> * </i></td></tr>
<tr><th id="110">110</th><td><i> * Revision 3.1  82/12/04  13:21:40  wft</i></td></tr>
<tr><th id="111">111</th><td><i> * Initial revision.</i></td></tr>
<tr><th id="112">112</th><td><i> *</i></td></tr>
<tr><th id="113">113</th><td><i> */</i></td></tr>
<tr><th id="114">114</th><td></td></tr>
<tr><th id="115">115</th><td><i>/*</i></td></tr>
<tr><th id="116">116</th><td><i>#define FCMPTEST</i></td></tr>
<tr><th id="117">117</th><td><i>*/</i></td></tr>
<tr><th id="118">118</th><td><i>/* Testprogram; prints out whether two files are identical,</i></td></tr>
<tr><th id="119">119</th><td><i> * except for keywords</i></td></tr>
<tr><th id="120">120</th><td><i> */</i></td></tr>
<tr><th id="121">121</th><td></td></tr>
<tr><th id="122">122</th><td><u>#include  <a href="rcsbase.h.html">"rcsbase.h"</a></u></td></tr>
<tr><th id="123">123</th><td></td></tr>
<tr><th id="124">124</th><td><a class="macro" href="rcsbase.h.html#414" title="char const fcmpId[] = &quot;Id: rcsfcmp.c,v 5.14 1995/06/16 06:19:24 eggert Exp &quot;;" data-ref="_M/libId">libId</a>(<dfn class="decl def" id="fcmpId" title='fcmpId' data-ref="fcmpId" data-ref-filename="fcmpId">fcmpId</dfn>, <q>"Id: rcsfcmp.c,v 5.14 1995/06/16 06:19:24 eggert Exp "</q>)</td></tr>
<tr><th id="125">125</th><td></td></tr>
<tr><th id="126">126</th><td>	<em>static</em> <em>int</em> <a class="tu decl fn" href="#discardkeyval" title='discardkeyval' data-type='int discardkeyval(int , RILE * )' data-ref="discardkeyval" data-ref-filename="discardkeyval">discardkeyval</a> <a class="macro" href="../../include/conf.h.html#105" title="(int,RILE*)" data-ref="_M/P">P</a>((<em>int</em>,<a class="typedef" href="rcsbase.h.html#RILE" title='RILE' data-type='struct RILE' data-ref="RILE" data-ref-filename="RILE">RILE</a>*));</td></tr>
<tr><th id="127">127</th><td>	<em>static</em> <em>int</em></td></tr>
<tr><th id="128">128</th><td><dfn class="tu decl def fn" id="discardkeyval" title='discardkeyval' data-type='int discardkeyval(int c, RILE * f)' data-ref="discardkeyval" data-ref-filename="discardkeyval">discardkeyval</dfn>(c, f)</td></tr>
<tr><th id="129">129</th><td>	<em>register</em> <em>int</em> <dfn class="local col1 decl" id="1c" title='c' data-type='int' data-ref="1c" data-ref-filename="1c">c</dfn>;</td></tr>
<tr><th id="130">130</th><td>	<em>register</em> <a class="typedef" href="rcsbase.h.html#RILE" title='RILE' data-type='struct RILE' data-ref="RILE" data-ref-filename="RILE">RILE</a> *<dfn class="local col2 decl" id="2f" title='f' data-type='RILE *' data-ref="2f" data-ref-filename="2f">f</dfn>;</td></tr>
<tr><th id="131">131</th><td>{</td></tr>
<tr><th id="132">132</th><td>	<b>for</b> (;;)</td></tr>
<tr><th id="133">133</th><td>		<b>switch</b> (<a class="local col1 ref" href="#1c" title='c' data-ref="1c" data-ref-filename="1c">c</a>) {</td></tr>
<tr><th id="134">134</th><td>			<b>case</b> <a class="macro" href="rcsbase.h.html#230" title="&apos;$&apos;" data-ref="_M/KDELIM">KDELIM</a>:</td></tr>
<tr><th id="135">135</th><td>			<b>case</b> <kbd>'\n'</kbd>:</td></tr>
<tr><th id="136">136</th><td>				<b>return</b> <a class="local col1 ref" href="#1c" title='c' data-ref="1c" data-ref-filename="1c">c</a>;</td></tr>
<tr><th id="137">137</th><td>			<b>default</b>:</td></tr>
<tr><th id="138">138</th><td>				<a class="macro" href="rcsbase.h.html#275" title="{ if ((f)-&gt;ptr==(f)-&gt;lim) return (-1); else (c)= *(f)-&gt;ptr++; }" data-ref="_M/Igeteof_">Igeteof_</a>(<a class="local col2 ref" href="#2f" title='f' data-ref="2f" data-ref-filename="2f">f</a>, <a class="local col1 ref" href="#1c" title='c' data-ref="1c" data-ref-filename="1c">c</a>, <b>return</b> <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#183" title="(-1)" data-ref="_M/EOF">EOF</a>;)</td></tr>
<tr><th id="139">139</th><td>				<b>break</b>;</td></tr>
<tr><th id="140">140</th><td>		}</td></tr>
<tr><th id="141">141</th><td>}</td></tr>
<tr><th id="142">142</th><td></td></tr>
<tr><th id="143">143</th><td>	<em>int</em></td></tr>
<tr><th id="144">144</th><td><dfn class="decl def fn" id="rcsfcmp" title='rcsfcmp' data-ref="rcsfcmp" data-ref-filename="rcsfcmp">rcsfcmp</dfn>(xfp, xstatp, uname, delta)</td></tr>
<tr><th id="145">145</th><td>	<em>register</em> <a class="typedef" href="rcsbase.h.html#RILE" title='RILE' data-type='struct RILE' data-ref="RILE" data-ref-filename="RILE">RILE</a> *<dfn class="local col3 decl" id="3xfp" title='xfp' data-type='RILE *' data-ref="3xfp" data-ref-filename="3xfp">xfp</dfn>;</td></tr>
<tr><th id="146">146</th><td>	<b>struct</b> <a class="type" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat" title='stat' data-ref="stat" data-ref-filename="stat">stat</a> <em>const</em> *<dfn class="local col4 decl" id="4xstatp" title='xstatp' data-type='const struct stat *' data-ref="4xstatp" data-ref-filename="4xstatp">xstatp</dfn>;</td></tr>
<tr><th id="147">147</th><td>	<em>char</em> <em>const</em> *<dfn class="local col5 decl" id="5uname" title='uname' data-type='const char *' data-ref="5uname" data-ref-filename="5uname">uname</dfn>;</td></tr>
<tr><th id="148">148</th><td>	<b>struct</b> <a class="type" href="rcsbase.h.html#hshentry" title='hshentry' data-ref="hshentry" data-ref-filename="hshentry">hshentry</a> <em>const</em> *<dfn class="local col6 decl" id="6delta" title='delta' data-type='const struct hshentry *' data-ref="6delta" data-ref-filename="6delta">delta</dfn>;</td></tr>
<tr><th id="149">149</th><td><i>/* Compare the files xfp and uname.  Return zero</i></td></tr>
<tr><th id="150">150</th><td><i> * if xfp has the same contents as uname and neither has keywords,</i></td></tr>
<tr><th id="151">151</th><td><i> * otherwise -1 if they are the same ignoring keyword values,</i></td></tr>
<tr><th id="152">152</th><td><i> * and 1 if they differ even ignoring</i></td></tr>
<tr><th id="153">153</th><td><i> * keyword values. For the LOG-keyword, rcsfcmp skips the log message</i></td></tr>
<tr><th id="154">154</th><td><i> * given by the parameter delta in xfp.  Thus, rcsfcmp returns nonpositive</i></td></tr>
<tr><th id="155">155</th><td><i> * if xfp contains the same as uname, with the keywords expanded.</i></td></tr>
<tr><th id="156">156</th><td><i> * Implementation: character-by-character comparison until $ is found.</i></td></tr>
<tr><th id="157">157</th><td><i> * If a $ is found, read in the marker keywords; if they are real keywords</i></td></tr>
<tr><th id="158">158</th><td><i> * and identical, read in keyword value. If value is terminated properly,</i></td></tr>
<tr><th id="159">159</th><td><i> * disregard it and optionally skip log message; otherwise, compare value.</i></td></tr>
<tr><th id="160">160</th><td><i> */</i></td></tr>
<tr><th id="161">161</th><td>{</td></tr>
<tr><th id="162">162</th><td>    <em>register</em> <em>int</em> <dfn class="local col7 decl" id="7xc" title='xc' data-type='int' data-ref="7xc" data-ref-filename="7xc">xc</dfn>, <dfn class="local col8 decl" id="8uc" title='uc' data-type='int' data-ref="8uc" data-ref-filename="8uc">uc</dfn>;</td></tr>
<tr><th id="163">163</th><td>    <em>char</em> <dfn class="local col9 decl" id="9xkeyword" title='xkeyword' data-type='char [34]' data-ref="9xkeyword" data-ref-filename="9xkeyword">xkeyword</dfn>[<a class="macro" href="rcsbase.h.html#433" title="32" data-ref="_M/keylength">keylength</a>+<var>2</var>];</td></tr>
<tr><th id="164">164</th><td>    <em>int</em> <dfn class="local col0 decl" id="10eqkeyvals" title='eqkeyvals' data-type='int' data-ref="10eqkeyvals" data-ref-filename="10eqkeyvals">eqkeyvals</dfn>;</td></tr>
<tr><th id="165">165</th><td>    <em>register</em> <a class="typedef" href="rcsbase.h.html#RILE" title='RILE' data-type='struct RILE' data-ref="RILE" data-ref-filename="RILE">RILE</a> *<dfn class="local col1 decl" id="11ufp" title='ufp' data-type='RILE *' data-ref="11ufp" data-ref-filename="11ufp">ufp</dfn>;</td></tr>
<tr><th id="166">166</th><td>    <em>register</em> <em>int</em> <dfn class="local col2 decl" id="12xeof" title='xeof' data-type='int' data-ref="12xeof" data-ref-filename="12xeof">xeof</dfn>, <dfn class="local col3 decl" id="13ueof" title='ueof' data-type='int' data-ref="13ueof" data-ref-filename="13ueof">ueof</dfn>;</td></tr>
<tr><th id="167">167</th><td>    <em>register</em> <em>char</em> * <dfn class="local col4 decl" id="14tp" title='tp' data-type='char *' data-ref="14tp" data-ref-filename="14tp">tp</dfn>;</td></tr>
<tr><th id="168">168</th><td>    <em>register</em> <em>char</em> <em>const</em> *<dfn class="local col5 decl" id="15sp" title='sp' data-type='const char *' data-ref="15sp" data-ref-filename="15sp">sp</dfn>;</td></tr>
<tr><th id="169">169</th><td>    <em>register</em> <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col6 decl" id="16leaderlen" title='leaderlen' data-type='size_t' data-ref="16leaderlen" data-ref-filename="16leaderlen">leaderlen</dfn>;</td></tr>
<tr><th id="170">170</th><td>    <em>int</em> <dfn class="local col7 decl" id="17result" title='result' data-type='int' data-ref="17result" data-ref-filename="17result">result</dfn>;</td></tr>
<tr><th id="171">171</th><td>    <b>enum</b> <a class="type" href="rcsbase.h.html#markers" title='markers' data-ref="markers" data-ref-filename="markers">markers</a> <dfn class="local col8 decl" id="18match1" title='match1' data-type='enum markers' data-ref="18match1" data-ref-filename="18match1">match1</dfn>;</td></tr>
<tr><th id="172">172</th><td>    <b>struct</b> <a class="type" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat" title='stat' data-ref="stat" data-ref-filename="stat">stat</a> <dfn class="local col9 decl" id="19ustat" title='ustat' data-type='struct stat' data-ref="19ustat" data-ref-filename="19ustat">ustat</dfn>;</td></tr>
<tr><th id="173">173</th><td></td></tr>
<tr><th id="174">174</th><td>    <b>if</b> (!(<a class="local col1 ref" href="#11ufp" title='ufp' data-ref="11ufp" data-ref-filename="11ufp">ufp</a> = <a class="macro" href="rcsbase.h.html#614" title="I_open(uname,&amp;ustat)" data-ref="_M/Iopen">Iopen</a>(<a class="local col5 ref" href="#5uname" title='uname' data-ref="5uname" data-ref-filename="5uname">uname</a>, FOPEN_R_WORK, &amp;<a class="local col9 ref" href="#19ustat" title='ustat' data-ref="19ustat" data-ref-filename="19ustat">ustat</a>))) {</td></tr>
<tr><th id="175">175</th><td>       <a class="ref fn" href="rcsbase.h.html#efaterror" title='efaterror' data-ref="efaterror" data-ref-filename="efaterror">efaterror</a>(<a class="local col5 ref" href="#5uname" title='uname' data-ref="5uname" data-ref-filename="5uname">uname</a>);</td></tr>
<tr><th id="176">176</th><td>    }</td></tr>
<tr><th id="177">177</th><td>    <a class="local col2 ref" href="#12xeof" title='xeof' data-ref="12xeof" data-ref-filename="12xeof">xeof</a> = <a class="local col3 ref" href="#13ueof" title='ueof' data-ref="13ueof" data-ref-filename="13ueof">ueof</a> = <a class="macro" href="rcsbase.h.html#237" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="178">178</th><td>    <b>if</b> (<a class="macro" href="rcsbase.h.html#648" title="4" data-ref="_M/MIN_UNEXPAND">MIN_UNEXPAND</a> &lt;= <a class="ref" href="rcsbase.h.html#Expand" title='Expand' data-ref="Expand" data-ref-filename="Expand">Expand</a>) {</td></tr>
<tr><th id="179">179</th><td>	<b>if</b> (!(<a class="local col7 ref" href="#17result" title='result' data-ref="17result" data-ref-filename="17result">result</a> = <a class="local col4 ref" href="#4xstatp" title='xstatp' data-ref="4xstatp" data-ref-filename="4xstatp">xstatp</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat::st_size" title='stat::st_size' data-ref="stat::st_size" data-ref-filename="stat..st_size">st_size</a>!=<a class="local col9 ref" href="#19ustat" title='ustat' data-ref="19ustat" data-ref-filename="19ustat">ustat</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat::st_size" title='stat::st_size' data-ref="stat::st_size" data-ref-filename="stat..st_size">st_size</a>)) {</td></tr>
<tr><th id="180">180</th><td><u>#	    <span data-ppcond="180">if</span> <a class="macro" href="../../include/conf.h.html#207" title="1" data-ref="_M/large_memory">large_memory</a> &amp;&amp; <a class="macro" href="rcsbase.h.html#257" title="(0 || 1)" data-ref="_M/maps_memory">maps_memory</a></u></td></tr>
<tr><th id="181">181</th><td>		<a class="local col7 ref" href="#17result" title='result' data-ref="17result" data-ref-filename="17result">result</a> = !!<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcmp" title='memcmp' data-ref="memcmp" data-ref-filename="memcmp">memcmp</a>(<a class="local col3 ref" href="#3xfp" title='xfp' data-ref="3xfp" data-ref-filename="3xfp">xfp</a>-&gt;<a class="ref field" href="rcsbase.h.html#RILE::base" title='RILE::base' data-ref="RILE::base" data-ref-filename="RILE..base">base</a>,<a class="local col1 ref" href="#11ufp" title='ufp' data-ref="11ufp" data-ref-filename="11ufp">ufp</a>-&gt;<a class="ref field" href="rcsbase.h.html#RILE::base" title='RILE::base' data-ref="RILE::base" data-ref-filename="RILE..base">base</a>,(<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a>)<a class="local col4 ref" href="#4xstatp" title='xstatp' data-ref="4xstatp" data-ref-filename="4xstatp">xstatp</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat::st_size" title='stat::st_size' data-ref="stat::st_size" data-ref-filename="stat..st_size">st_size</a>);</td></tr>
<tr><th id="182">182</th><td><u>#	    <span data-ppcond="180">else</span></u></td></tr>
<tr><th id="183">183</th><td>		<b>for</b> (;;) {</td></tr>
<tr><th id="184">184</th><td>		    <i>/* get the next characters */</i></td></tr>
<tr><th id="185">185</th><td>		    Igeteof_(xfp, xc, xeof=true;)</td></tr>
<tr><th id="186">186</th><td>		    Igeteof_(ufp, uc, ueof=true;)</td></tr>
<tr><th id="187">187</th><td>		    <b>if</b> (xeof | ueof)</td></tr>
<tr><th id="188">188</th><td>			<b>goto</b> eof;</td></tr>
<tr><th id="189">189</th><td>		    <b>if</b> (xc != uc)</td></tr>
<tr><th id="190">190</th><td>			<b>goto</b> return1;</td></tr>
<tr><th id="191">191</th><td>		}</td></tr>
<tr><th id="192">192</th><td><u>#	    <span data-ppcond="180">endif</span></u></td></tr>
<tr><th id="193">193</th><td>	}</td></tr>
<tr><th id="194">194</th><td>    } <b>else</b> {</td></tr>
<tr><th id="195">195</th><td>	<a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a> = <var>0</var>;</td></tr>
<tr><th id="196">196</th><td>	<a class="local col8 ref" href="#8uc" title='uc' data-ref="8uc" data-ref-filename="8uc">uc</a> = <var>0</var>; <i>/* Keep lint happy.  */</i></td></tr>
<tr><th id="197">197</th><td>	<a class="local col6 ref" href="#16leaderlen" title='leaderlen' data-ref="16leaderlen" data-ref-filename="16leaderlen">leaderlen</a> = <var>0</var>;</td></tr>
<tr><th id="198">198</th><td>	<a class="local col7 ref" href="#17result" title='result' data-ref="17result" data-ref-filename="17result">result</a> = <var>0</var>;</td></tr>
<tr><th id="199">199</th><td></td></tr>
<tr><th id="200">200</th><td>	<b>for</b> (;;) {</td></tr>
<tr><th id="201">201</th><td>	  <b>if</b> (<a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a> != <a class="macro" href="rcsbase.h.html#230" title="&apos;$&apos;" data-ref="_M/KDELIM">KDELIM</a>) {</td></tr>
<tr><th id="202">202</th><td>	    <i>/* get the next characters */</i></td></tr>
<tr><th id="203">203</th><td>	    <a class="macro" href="rcsbase.h.html#275" title="{ if ((xfp)-&gt;ptr==(xfp)-&gt;lim) xeof=1; else (xc)= *(xfp)-&gt;ptr++; }" data-ref="_M/Igeteof_">Igeteof_</a>(<a class="local col3 ref" href="#3xfp" title='xfp' data-ref="3xfp" data-ref-filename="3xfp">xfp</a>, <a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>, <a class="local col2 ref" href="#12xeof" title='xeof' data-ref="12xeof" data-ref-filename="12xeof">xeof</a>=<a class="macro" href="rcsbase.h.html#236" title="1" data-ref="_M/true">true</a>;)</td></tr>
<tr><th id="204">204</th><td>	    <a class="macro" href="rcsbase.h.html#275" title="{ if ((ufp)-&gt;ptr==(ufp)-&gt;lim) ueof=1; else (uc)= *(ufp)-&gt;ptr++; }" data-ref="_M/Igeteof_">Igeteof_</a>(<a class="local col1 ref" href="#11ufp" title='ufp' data-ref="11ufp" data-ref-filename="11ufp">ufp</a>, <a class="local col8 ref" href="#8uc" title='uc' data-ref="8uc" data-ref-filename="8uc">uc</a>, <a class="local col3 ref" href="#13ueof" title='ueof' data-ref="13ueof" data-ref-filename="13ueof">ueof</a>=<a class="macro" href="rcsbase.h.html#236" title="1" data-ref="_M/true">true</a>;)</td></tr>
<tr><th id="205">205</th><td>	    <b>if</b> (<a class="local col2 ref" href="#12xeof" title='xeof' data-ref="12xeof" data-ref-filename="12xeof">xeof</a> | <a class="local col3 ref" href="#13ueof" title='ueof' data-ref="13ueof" data-ref-filename="13ueof">ueof</a>)</td></tr>
<tr><th id="206">206</th><td>		<b>goto</b> <a class="lbl" href="#20eof" data-ref="20eof" data-ref-filename="20eof">eof</a>;</td></tr>
<tr><th id="207">207</th><td>	  } <b>else</b> {</td></tr>
<tr><th id="208">208</th><td>	    <i>/* try to get both keywords */</i></td></tr>
<tr><th id="209">209</th><td>	    <a class="local col4 ref" href="#14tp" title='tp' data-ref="14tp" data-ref-filename="14tp">tp</a> = <a class="local col9 ref" href="#9xkeyword" title='xkeyword' data-ref="9xkeyword" data-ref-filename="9xkeyword">xkeyword</a>;</td></tr>
<tr><th id="210">210</th><td>	    <b>for</b> (;;) {</td></tr>
<tr><th id="211">211</th><td>		<a class="macro" href="rcsbase.h.html#275" title="{ if ((xfp)-&gt;ptr==(xfp)-&gt;lim) xeof=1; else (xc)= *(xfp)-&gt;ptr++; }" data-ref="_M/Igeteof_">Igeteof_</a>(<a class="local col3 ref" href="#3xfp" title='xfp' data-ref="3xfp" data-ref-filename="3xfp">xfp</a>, <a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>, <a class="local col2 ref" href="#12xeof" title='xeof' data-ref="12xeof" data-ref-filename="12xeof">xeof</a>=<a class="macro" href="rcsbase.h.html#236" title="1" data-ref="_M/true">true</a>;)</td></tr>
<tr><th id="212">212</th><td>		<a class="macro" href="rcsbase.h.html#275" title="{ if ((ufp)-&gt;ptr==(ufp)-&gt;lim) ueof=1; else (uc)= *(ufp)-&gt;ptr++; }" data-ref="_M/Igeteof_">Igeteof_</a>(<a class="local col1 ref" href="#11ufp" title='ufp' data-ref="11ufp" data-ref-filename="11ufp">ufp</a>, <a class="local col8 ref" href="#8uc" title='uc' data-ref="8uc" data-ref-filename="8uc">uc</a>, <a class="local col3 ref" href="#13ueof" title='ueof' data-ref="13ueof" data-ref-filename="13ueof">ueof</a>=<a class="macro" href="rcsbase.h.html#236" title="1" data-ref="_M/true">true</a>;)</td></tr>
<tr><th id="213">213</th><td>		<b>if</b> (<a class="local col2 ref" href="#12xeof" title='xeof' data-ref="12xeof" data-ref-filename="12xeof">xeof</a> | <a class="local col3 ref" href="#13ueof" title='ueof' data-ref="13ueof" data-ref-filename="13ueof">ueof</a>)</td></tr>
<tr><th id="214">214</th><td>		    <b>goto</b> <a class="lbl" href="#20eof" data-ref="20eof" data-ref-filename="20eof">eof</a>;</td></tr>
<tr><th id="215">215</th><td>		<b>if</b> (<a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a> != <a class="local col8 ref" href="#8uc" title='uc' data-ref="8uc" data-ref-filename="8uc">uc</a>)</td></tr>
<tr><th id="216">216</th><td>		    <b>break</b>;</td></tr>
<tr><th id="217">217</th><td>		<b>switch</b> (<a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>) {</td></tr>
<tr><th id="218">218</th><td>		    <b>default</b>:</td></tr>
<tr><th id="219">219</th><td>			<b>if</b> (<a class="local col9 ref" href="#9xkeyword" title='xkeyword' data-ref="9xkeyword" data-ref-filename="9xkeyword">xkeyword</a>+<a class="macro" href="rcsbase.h.html#433" title="32" data-ref="_M/keylength">keylength</a> &lt;= <a class="local col4 ref" href="#14tp" title='tp' data-ref="14tp" data-ref-filename="14tp">tp</a>)</td></tr>
<tr><th id="220">220</th><td>			    <b>break</b>;</td></tr>
<tr><th id="221">221</th><td>			*<a class="local col4 ref" href="#14tp" title='tp' data-ref="14tp" data-ref-filename="14tp">tp</a>++ = <a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>;</td></tr>
<tr><th id="222">222</th><td>			<b>continue</b>;</td></tr>
<tr><th id="223">223</th><td>		    <b>case</b> <kbd>'\n'</kbd>: <b>case</b> <a class="macro" href="rcsbase.h.html#230" title="&apos;$&apos;" data-ref="_M/KDELIM">KDELIM</a>: <b>case</b> <a class="macro" href="rcsbase.h.html#231" title="&apos;:&apos;" data-ref="_M/VDELIM">VDELIM</a>:</td></tr>
<tr><th id="224">224</th><td>			<b>break</b>;</td></tr>
<tr><th id="225">225</th><td>		}</td></tr>
<tr><th id="226">226</th><td>		<b>break</b>;</td></tr>
<tr><th id="227">227</th><td>	    }</td></tr>
<tr><th id="228">228</th><td>	    <b>if</b> (</td></tr>
<tr><th id="229">229</th><td>		(<a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>==<a class="macro" href="rcsbase.h.html#230" title="&apos;$&apos;" data-ref="_M/KDELIM">KDELIM</a> || <a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>==<a class="macro" href="rcsbase.h.html#231" title="&apos;:&apos;" data-ref="_M/VDELIM">VDELIM</a>)  &amp;&amp;  (<a class="local col8 ref" href="#8uc" title='uc' data-ref="8uc" data-ref-filename="8uc">uc</a>==<a class="macro" href="rcsbase.h.html#230" title="&apos;$&apos;" data-ref="_M/KDELIM">KDELIM</a> || <a class="local col8 ref" href="#8uc" title='uc' data-ref="8uc" data-ref-filename="8uc">uc</a>==<a class="macro" href="rcsbase.h.html#231" title="&apos;:&apos;" data-ref="_M/VDELIM">VDELIM</a>)  &amp;&amp;</td></tr>
<tr><th id="230">230</th><td>		(*<a class="local col4 ref" href="#14tp" title='tp' data-ref="14tp" data-ref-filename="14tp">tp</a> = <a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>,  (<a class="local col8 ref" href="#18match1" title='match1' data-ref="18match1" data-ref-filename="18match1">match1</a> = <a class="ref fn" href="rcsbase.h.html#trymatch" title='trymatch' data-ref="trymatch" data-ref-filename="trymatch">trymatch</a>(<a class="local col9 ref" href="#9xkeyword" title='xkeyword' data-ref="9xkeyword" data-ref-filename="9xkeyword">xkeyword</a>)) != <a class="enum" href="rcsbase.h.html#Nomatch" title='Nomatch' data-ref="Nomatch" data-ref-filename="Nomatch">Nomatch</a>)</td></tr>
<tr><th id="231">231</th><td>	    ) {</td></tr>
<tr><th id="232">232</th><td><u>#<span data-ppcond="232">ifdef</span> <span class="macro" data-ref="_M/FCMPTEST">FCMPTEST</span></u></td></tr>
<tr><th id="233">233</th><td>	      VOID printf(<q>"found common keyword %s\n"</q>,xkeyword);</td></tr>
<tr><th id="234">234</th><td><u>#<span data-ppcond="232">endif</span></u></td></tr>
<tr><th id="235">235</th><td>	      <a class="local col7 ref" href="#17result" title='result' data-ref="17result" data-ref-filename="17result">result</a> = -<var>1</var>;</td></tr>
<tr><th id="236">236</th><td>	      <b>for</b> (;;) {</td></tr>
<tr><th id="237">237</th><td>		  <b>if</b> (<a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a> != <a class="local col8 ref" href="#8uc" title='uc' data-ref="8uc" data-ref-filename="8uc">uc</a>) {</td></tr>
<tr><th id="238">238</th><td>		      <a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a> = <a class="tu ref fn" href="#discardkeyval" title='discardkeyval' data-use='c' data-ref="discardkeyval" data-ref-filename="discardkeyval">discardkeyval</a>(<a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>, <a class="local col3 ref" href="#3xfp" title='xfp' data-ref="3xfp" data-ref-filename="3xfp">xfp</a>);</td></tr>
<tr><th id="239">239</th><td>		      <a class="local col8 ref" href="#8uc" title='uc' data-ref="8uc" data-ref-filename="8uc">uc</a> = <a class="tu ref fn" href="#discardkeyval" title='discardkeyval' data-use='c' data-ref="discardkeyval" data-ref-filename="discardkeyval">discardkeyval</a>(<a class="local col8 ref" href="#8uc" title='uc' data-ref="8uc" data-ref-filename="8uc">uc</a>, <a class="local col1 ref" href="#11ufp" title='ufp' data-ref="11ufp" data-ref-filename="11ufp">ufp</a>);</td></tr>
<tr><th id="240">240</th><td>		      <b>if</b> ((<a class="local col2 ref" href="#12xeof" title='xeof' data-ref="12xeof" data-ref-filename="12xeof">xeof</a> = <a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>==<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#183" title="(-1)" data-ref="_M/EOF">EOF</a>)  |  (<a class="local col3 ref" href="#13ueof" title='ueof' data-ref="13ueof" data-ref-filename="13ueof">ueof</a> = <a class="local col8 ref" href="#8uc" title='uc' data-ref="8uc" data-ref-filename="8uc">uc</a>==<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#183" title="(-1)" data-ref="_M/EOF">EOF</a>))</td></tr>
<tr><th id="241">241</th><td>			  <b>goto</b> <a class="lbl" href="#20eof" data-ref="20eof" data-ref-filename="20eof">eof</a>;</td></tr>
<tr><th id="242">242</th><td>		      <a class="local col0 ref" href="#10eqkeyvals" title='eqkeyvals' data-ref="10eqkeyvals" data-ref-filename="10eqkeyvals">eqkeyvals</a> = <a class="macro" href="rcsbase.h.html#237" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="243">243</th><td>		      <b>break</b>;</td></tr>
<tr><th id="244">244</th><td>		  }</td></tr>
<tr><th id="245">245</th><td>		  <b>switch</b> (<a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>) {</td></tr>
<tr><th id="246">246</th><td>		      <b>default</b>:</td></tr>
<tr><th id="247">247</th><td>			  <a class="macro" href="rcsbase.h.html#275" title="{ if ((xfp)-&gt;ptr==(xfp)-&gt;lim) xeof=1; else (xc)= *(xfp)-&gt;ptr++; }" data-ref="_M/Igeteof_">Igeteof_</a>(<a class="local col3 ref" href="#3xfp" title='xfp' data-ref="3xfp" data-ref-filename="3xfp">xfp</a>, <a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>, <a class="local col2 ref" href="#12xeof" title='xeof' data-ref="12xeof" data-ref-filename="12xeof">xeof</a>=<a class="macro" href="rcsbase.h.html#236" title="1" data-ref="_M/true">true</a>;)</td></tr>
<tr><th id="248">248</th><td>			  <a class="macro" href="rcsbase.h.html#275" title="{ if ((ufp)-&gt;ptr==(ufp)-&gt;lim) ueof=1; else (uc)= *(ufp)-&gt;ptr++; }" data-ref="_M/Igeteof_">Igeteof_</a>(<a class="local col1 ref" href="#11ufp" title='ufp' data-ref="11ufp" data-ref-filename="11ufp">ufp</a>, <a class="local col8 ref" href="#8uc" title='uc' data-ref="8uc" data-ref-filename="8uc">uc</a>, <a class="local col3 ref" href="#13ueof" title='ueof' data-ref="13ueof" data-ref-filename="13ueof">ueof</a>=<a class="macro" href="rcsbase.h.html#236" title="1" data-ref="_M/true">true</a>;)</td></tr>
<tr><th id="249">249</th><td>			  <b>if</b> (<a class="local col2 ref" href="#12xeof" title='xeof' data-ref="12xeof" data-ref-filename="12xeof">xeof</a> | <a class="local col3 ref" href="#13ueof" title='ueof' data-ref="13ueof" data-ref-filename="13ueof">ueof</a>)</td></tr>
<tr><th id="250">250</th><td>			      <b>goto</b> <a class="lbl" href="#20eof" data-ref="20eof" data-ref-filename="20eof">eof</a>;</td></tr>
<tr><th id="251">251</th><td>			  <b>continue</b>;</td></tr>
<tr><th id="252">252</th><td></td></tr>
<tr><th id="253">253</th><td>		      <b>case</b> <kbd>'\n'</kbd>: <b>case</b> <a class="macro" href="rcsbase.h.html#230" title="&apos;$&apos;" data-ref="_M/KDELIM">KDELIM</a>:</td></tr>
<tr><th id="254">254</th><td>			  <a class="local col0 ref" href="#10eqkeyvals" title='eqkeyvals' data-ref="10eqkeyvals" data-ref-filename="10eqkeyvals">eqkeyvals</a> = <a class="macro" href="rcsbase.h.html#236" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="255">255</th><td>			  <b>break</b>;</td></tr>
<tr><th id="256">256</th><td>		  }</td></tr>
<tr><th id="257">257</th><td>		  <b>break</b>;</td></tr>
<tr><th id="258">258</th><td>	      }</td></tr>
<tr><th id="259">259</th><td>	      <b>if</b> (<a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a> != <a class="local col8 ref" href="#8uc" title='uc' data-ref="8uc" data-ref-filename="8uc">uc</a>)</td></tr>
<tr><th id="260">260</th><td>		  <b>goto</b> <a class="lbl" href="#21return1" data-ref="21return1" data-ref-filename="21return1">return1</a>;</td></tr>
<tr><th id="261">261</th><td>	      <b>if</b> (<a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>==<a class="macro" href="rcsbase.h.html#230" title="&apos;$&apos;" data-ref="_M/KDELIM">KDELIM</a>) {</td></tr>
<tr><th id="262">262</th><td>		  <i>/* Skip closing KDELIM.  */</i></td></tr>
<tr><th id="263">263</th><td>		  <a class="macro" href="rcsbase.h.html#275" title="{ if ((xfp)-&gt;ptr==(xfp)-&gt;lim) xeof=1; else (xc)= *(xfp)-&gt;ptr++; }" data-ref="_M/Igeteof_">Igeteof_</a>(<a class="local col3 ref" href="#3xfp" title='xfp' data-ref="3xfp" data-ref-filename="3xfp">xfp</a>, <a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>, <a class="local col2 ref" href="#12xeof" title='xeof' data-ref="12xeof" data-ref-filename="12xeof">xeof</a>=<a class="macro" href="rcsbase.h.html#236" title="1" data-ref="_M/true">true</a>;)</td></tr>
<tr><th id="264">264</th><td>		  <a class="macro" href="rcsbase.h.html#275" title="{ if ((ufp)-&gt;ptr==(ufp)-&gt;lim) ueof=1; else (uc)= *(ufp)-&gt;ptr++; }" data-ref="_M/Igeteof_">Igeteof_</a>(<a class="local col1 ref" href="#11ufp" title='ufp' data-ref="11ufp" data-ref-filename="11ufp">ufp</a>, <a class="local col8 ref" href="#8uc" title='uc' data-ref="8uc" data-ref-filename="8uc">uc</a>, <a class="local col3 ref" href="#13ueof" title='ueof' data-ref="13ueof" data-ref-filename="13ueof">ueof</a>=<a class="macro" href="rcsbase.h.html#236" title="1" data-ref="_M/true">true</a>;)</td></tr>
<tr><th id="265">265</th><td>		  <b>if</b> (<a class="local col2 ref" href="#12xeof" title='xeof' data-ref="12xeof" data-ref-filename="12xeof">xeof</a> | <a class="local col3 ref" href="#13ueof" title='ueof' data-ref="13ueof" data-ref-filename="13ueof">ueof</a>)</td></tr>
<tr><th id="266">266</th><td>		      <b>goto</b> <a class="lbl" href="#20eof" data-ref="20eof" data-ref-filename="20eof">eof</a>;</td></tr>
<tr><th id="267">267</th><td>		  <i>/* if the keyword is LOG, also skip the log message in xfp*/</i></td></tr>
<tr><th id="268">268</th><td>		  <b>if</b> (<a class="local col8 ref" href="#18match1" title='match1' data-ref="18match1" data-ref-filename="18match1">match1</a>==<a class="enum" href="rcsbase.h.html#Log" title='Log' data-ref="Log" data-ref-filename="Log">Log</a>) {</td></tr>
<tr><th id="269">269</th><td>		      <i>/* first, compute the number of line feeds in log msg */</i></td></tr>
<tr><th id="270">270</th><td>		      <em>int</em> <dfn class="local col2 decl" id="22lncnt" title='lncnt' data-type='int' data-ref="22lncnt" data-ref-filename="22lncnt">lncnt</dfn>;</td></tr>
<tr><th id="271">271</th><td>		      <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col3 decl" id="23ls" title='ls' data-type='size_t' data-ref="23ls" data-ref-filename="23ls">ls</dfn>, <dfn class="local col4 decl" id="24ccnt" title='ccnt' data-type='size_t' data-ref="24ccnt" data-ref-filename="24ccnt">ccnt</dfn>;</td></tr>
<tr><th id="272">272</th><td>		      <a class="local col5 ref" href="#15sp" title='sp' data-ref="15sp" data-ref-filename="15sp">sp</a> = <a class="local col6 ref" href="#6delta" title='delta' data-ref="6delta" data-ref-filename="6delta">delta</a>-&gt;<a class="ref field" href="rcsbase.h.html#hshentry::log" title='hshentry::log' data-ref="hshentry::log" data-ref-filename="hshentry..log">log</a>.<a class="ref field" href="rcsbase.h.html#cbuf::string" title='cbuf::string' data-ref="cbuf::string" data-ref-filename="cbuf..string">string</a>;</td></tr>
<tr><th id="273">273</th><td>		      <a class="local col3 ref" href="#23ls" title='ls' data-ref="23ls" data-ref-filename="23ls">ls</a> = <a class="local col6 ref" href="#6delta" title='delta' data-ref="6delta" data-ref-filename="6delta">delta</a>-&gt;<a class="ref field" href="rcsbase.h.html#hshentry::log" title='hshentry::log' data-ref="hshentry::log" data-ref-filename="hshentry..log">log</a>.<a class="ref field" href="rcsbase.h.html#cbuf::size" title='cbuf::size' data-ref="cbuf::size" data-ref-filename="cbuf..size">size</a>;</td></tr>
<tr><th id="274">274</th><td>		      <b>if</b> (<a class="local col3 ref" href="#23ls" title='ls' data-ref="23ls" data-ref-filename="23ls">ls</a>&lt;<b>sizeof</b>(<a class="ref" href="rcsbase.h.html#ciklog" title='ciklog' data-ref="ciklog" data-ref-filename="ciklog">ciklog</a>)-<var>1</var> || <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcmp" title='memcmp' data-ref="memcmp" data-ref-filename="memcmp">memcmp</a>(<a class="local col5 ref" href="#15sp" title='sp' data-ref="15sp" data-ref-filename="15sp">sp</a>,<a class="ref" href="rcsbase.h.html#ciklog" title='ciklog' data-ref="ciklog" data-ref-filename="ciklog">ciklog</a>,<b>sizeof</b>(<a class="ref" href="rcsbase.h.html#ciklog" title='ciklog' data-ref="ciklog" data-ref-filename="ciklog">ciklog</a>)-<var>1</var>)) {</td></tr>
<tr><th id="275">275</th><td>			<i>/*</i></td></tr>
<tr><th id="276">276</th><td><i>			* This log message was inserted.  Skip its header.</i></td></tr>
<tr><th id="277">277</th><td><i>			* The number of newlines to skip is</i></td></tr>
<tr><th id="278">278</th><td><i>			* 1 + (C+1)*(1+L+1), where C is the number of newlines</i></td></tr>
<tr><th id="279">279</th><td><i>			* in the comment leader, and L is the number of</i></td></tr>
<tr><th id="280">280</th><td><i>			* newlines in the log string.</i></td></tr>
<tr><th id="281">281</th><td><i>			*/</i></td></tr>
<tr><th id="282">282</th><td>			<em>int</em> <dfn class="local col5 decl" id="25c1" title='c1' data-type='int' data-ref="25c1" data-ref-filename="25c1">c1</dfn> = <var>1</var>;</td></tr>
<tr><th id="283">283</th><td>			<b>for</b> (<a class="local col4 ref" href="#24ccnt" title='ccnt' data-ref="24ccnt" data-ref-filename="24ccnt">ccnt</a>=<a class="ref" href="rcsbase.h.html#Comment" title='Comment' data-ref="Comment" data-ref-filename="Comment">Comment</a>.<a class="ref field" href="rcsbase.h.html#cbuf::size" title='cbuf::size' data-ref="cbuf::size" data-ref-filename="cbuf..size">size</a>; <a class="local col4 ref" href="#24ccnt" title='ccnt' data-ref="24ccnt" data-ref-filename="24ccnt">ccnt</a>--; )</td></tr>
<tr><th id="284">284</th><td>			    <a class="local col5 ref" href="#25c1" title='c1' data-ref="25c1" data-ref-filename="25c1">c1</a> += <a class="ref" href="rcsbase.h.html#Comment" title='Comment' data-ref="Comment" data-ref-filename="Comment">Comment</a>.<a class="ref field" href="rcsbase.h.html#cbuf::string" title='cbuf::string' data-ref="cbuf::string" data-ref-filename="cbuf..string">string</a>[<a class="local col4 ref" href="#24ccnt" title='ccnt' data-ref="24ccnt" data-ref-filename="24ccnt">ccnt</a>] == <kbd>'\n'</kbd>;</td></tr>
<tr><th id="285">285</th><td>			<a class="local col2 ref" href="#22lncnt" title='lncnt' data-ref="22lncnt" data-ref-filename="22lncnt">lncnt</a> = <var>2</var>*<a class="local col5 ref" href="#25c1" title='c1' data-ref="25c1" data-ref-filename="25c1">c1</a> + <var>1</var>;</td></tr>
<tr><th id="286">286</th><td>			<b>while</b> (<a class="local col3 ref" href="#23ls" title='ls' data-ref="23ls" data-ref-filename="23ls">ls</a>--) <b>if</b> (*<a class="local col5 ref" href="#15sp" title='sp' data-ref="15sp" data-ref-filename="15sp">sp</a>++==<kbd>'\n'</kbd>) <a class="local col2 ref" href="#22lncnt" title='lncnt' data-ref="22lncnt" data-ref-filename="22lncnt">lncnt</a> += <a class="local col5 ref" href="#25c1" title='c1' data-ref="25c1" data-ref-filename="25c1">c1</a>;</td></tr>
<tr><th id="287">287</th><td>			<b>for</b> (;;) {</td></tr>
<tr><th id="288">288</th><td>			    <b>if</b> (<a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>==<kbd>'\n'</kbd>)</td></tr>
<tr><th id="289">289</th><td>				<b>if</b>(--<a class="local col2 ref" href="#22lncnt" title='lncnt' data-ref="22lncnt" data-ref-filename="22lncnt">lncnt</a>==<var>0</var>) <b>break</b>;</td></tr>
<tr><th id="290">290</th><td>			    <a class="macro" href="rcsbase.h.html#275" title="{ if ((xfp)-&gt;ptr==(xfp)-&gt;lim) goto returnresult; else (xc)= *(xfp)-&gt;ptr++; }" data-ref="_M/Igeteof_">Igeteof_</a>(<a class="local col3 ref" href="#3xfp" title='xfp' data-ref="3xfp" data-ref-filename="3xfp">xfp</a>, <a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>, <b>goto</b> <a class="lbl" href="#26returnresult" data-ref="26returnresult" data-ref-filename="26returnresult">returnresult</a>;)</td></tr>
<tr><th id="291">291</th><td>			}</td></tr>
<tr><th id="292">292</th><td>			<i>/* skip last comment leader */</i></td></tr>
<tr><th id="293">293</th><td>			<i>/* Can't just skip another line here, because there may be */</i></td></tr>
<tr><th id="294">294</th><td>			<i>/* additional characters on the line (after the Log....$)  */</i></td></tr>
<tr><th id="295">295</th><td>			<a class="local col4 ref" href="#24ccnt" title='ccnt' data-ref="24ccnt" data-ref-filename="24ccnt">ccnt</a> = <a class="ref" href="rcsbase.h.html#RCSversion" title='RCSversion' data-ref="RCSversion" data-ref-filename="RCSversion">RCSversion</a>&lt;<a class="macro" href="rcsbase.h.html#217" title="((5) - 5)" data-ref="_M/VERSION">VERSION</a>(<var>5</var>) ? <a class="ref" href="rcsbase.h.html#Comment" title='Comment' data-ref="Comment" data-ref-filename="Comment">Comment</a>.<a class="ref field" href="rcsbase.h.html#cbuf::size" title='cbuf::size' data-ref="cbuf::size" data-ref-filename="cbuf..size">size</a> : <a class="local col6 ref" href="#16leaderlen" title='leaderlen' data-ref="16leaderlen" data-ref-filename="16leaderlen">leaderlen</a>;</td></tr>
<tr><th id="296">296</th><td>			<b>do</b> {</td></tr>
<tr><th id="297">297</th><td>			    <a class="macro" href="rcsbase.h.html#275" title="{ if ((xfp)-&gt;ptr==(xfp)-&gt;lim) goto returnresult; else (xc)= *(xfp)-&gt;ptr++; }" data-ref="_M/Igeteof_">Igeteof_</a>(<a class="local col3 ref" href="#3xfp" title='xfp' data-ref="3xfp" data-ref-filename="3xfp">xfp</a>, <a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>, <b>goto</b> <a class="lbl" href="#26returnresult" data-ref="26returnresult" data-ref-filename="26returnresult">returnresult</a>;)</td></tr>
<tr><th id="298">298</th><td>			    <i>/*</i></td></tr>
<tr><th id="299">299</th><td><i>			     * Read to the end of the comment leader or '\n',</i></td></tr>
<tr><th id="300">300</th><td><i>			     * whatever comes first, because the leader's</i></td></tr>
<tr><th id="301">301</th><td><i>			     * trailing white space was probably stripped.</i></td></tr>
<tr><th id="302">302</th><td><i>			     */</i></td></tr>
<tr><th id="303">303</th><td>			} <b>while</b> (<a class="local col4 ref" href="#24ccnt" title='ccnt' data-ref="24ccnt" data-ref-filename="24ccnt">ccnt</a>-- &amp;&amp; (<a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a>!=<kbd>'\n'</kbd> || --<a class="local col5 ref" href="#25c1" title='c1' data-ref="25c1" data-ref-filename="25c1">c1</a>));</td></tr>
<tr><th id="304">304</th><td>		      }</td></tr>
<tr><th id="305">305</th><td>		  }</td></tr>
<tr><th id="306">306</th><td>	      } <b>else</b> {</td></tr>
<tr><th id="307">307</th><td>		  <i>/* both end in the same character, but not a KDELIM */</i></td></tr>
<tr><th id="308">308</th><td>		  <i>/* must compare string values.*/</i></td></tr>
<tr><th id="309">309</th><td><u>#<span data-ppcond="309">ifdef</span> <span class="macro" data-ref="_M/FCMPTEST">FCMPTEST</span></u></td></tr>
<tr><th id="310">310</th><td>		  VOID printf(<q>"non-terminated keywords %s, potentially different values\n"</q>,xkeyword);</td></tr>
<tr><th id="311">311</th><td><u>#<span data-ppcond="309">endif</span></u></td></tr>
<tr><th id="312">312</th><td>		  <b>if</b> (!<a class="local col0 ref" href="#10eqkeyvals" title='eqkeyvals' data-ref="10eqkeyvals" data-ref-filename="10eqkeyvals">eqkeyvals</a>)</td></tr>
<tr><th id="313">313</th><td>		      <b>goto</b> <a class="lbl" href="#21return1" data-ref="21return1" data-ref-filename="21return1">return1</a>;</td></tr>
<tr><th id="314">314</th><td>	      }</td></tr>
<tr><th id="315">315</th><td>	    }</td></tr>
<tr><th id="316">316</th><td>	  }</td></tr>
<tr><th id="317">317</th><td>	  <b>if</b> (<a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a> != <a class="local col8 ref" href="#8uc" title='uc' data-ref="8uc" data-ref-filename="8uc">uc</a>)</td></tr>
<tr><th id="318">318</th><td>	      <b>goto</b> <a class="lbl" href="#21return1" data-ref="21return1" data-ref-filename="21return1">return1</a>;</td></tr>
<tr><th id="319">319</th><td>	  <b>if</b> (<a class="local col7 ref" href="#7xc" title='xc' data-ref="7xc" data-ref-filename="7xc">xc</a> == <kbd>'\n'</kbd>)</td></tr>
<tr><th id="320">320</th><td>	      <a class="local col6 ref" href="#16leaderlen" title='leaderlen' data-ref="16leaderlen" data-ref-filename="16leaderlen">leaderlen</a> = <var>0</var>;</td></tr>
<tr><th id="321">321</th><td>	  <b>else</b></td></tr>
<tr><th id="322">322</th><td>	      <a class="local col6 ref" href="#16leaderlen" title='leaderlen' data-ref="16leaderlen" data-ref-filename="16leaderlen">leaderlen</a>++;</td></tr>
<tr><th id="323">323</th><td>	}</td></tr>
<tr><th id="324">324</th><td>    }</td></tr>
<tr><th id="325">325</th><td></td></tr>
<tr><th id="326">326</th><td>  <dfn class="lbl" id="20eof" data-ref="20eof" data-ref-filename="20eof">eof</dfn>:</td></tr>
<tr><th id="327">327</th><td>    <b>if</b> (<a class="local col2 ref" href="#12xeof" title='xeof' data-ref="12xeof" data-ref-filename="12xeof">xeof</a>==<a class="local col3 ref" href="#13ueof" title='ueof' data-ref="13ueof" data-ref-filename="13ueof">ueof</a>)</td></tr>
<tr><th id="328">328</th><td>	<b>goto</b> <a class="lbl" href="#26returnresult" data-ref="26returnresult" data-ref-filename="26returnresult">returnresult</a>;</td></tr>
<tr><th id="329">329</th><td>  <dfn class="lbl" id="21return1" data-ref="21return1" data-ref-filename="21return1">return1</dfn>:</td></tr>
<tr><th id="330">330</th><td>    <a class="local col7 ref" href="#17result" title='result' data-ref="17result" data-ref-filename="17result">result</a> = <var>1</var>;</td></tr>
<tr><th id="331">331</th><td>  <dfn class="lbl" id="26returnresult" data-ref="26returnresult" data-ref-filename="26returnresult">returnresult</dfn>:</td></tr>
<tr><th id="332">332</th><td>    <a class="ref fn" href="rcsbase.h.html#Ifclose" title='Ifclose' data-ref="Ifclose" data-ref-filename="Ifclose">Ifclose</a>(<a class="local col1 ref" href="#11ufp" title='ufp' data-ref="11ufp" data-ref-filename="11ufp">ufp</a>);</td></tr>
<tr><th id="333">333</th><td>    <b>return</b> <a class="local col7 ref" href="#17result" title='result' data-ref="17result" data-ref-filename="17result">result</a>;</td></tr>
<tr><th id="334">334</th><td>}</td></tr>
<tr><th id="335">335</th><td></td></tr>
<tr><th id="336">336</th><td></td></tr>
<tr><th id="337">337</th><td></td></tr>
<tr><th id="338">338</th><td><u>#<span data-ppcond="338">ifdef</span> <span class="macro" data-ref="_M/FCMPTEST">FCMPTEST</span></u></td></tr>
<tr><th id="339">339</th><td></td></tr>
<tr><th id="340">340</th><td><em>char</em> <em>const</em> cmdid[] = <q>"rcsfcmp"</q>;</td></tr>
<tr><th id="341">341</th><td></td></tr>
<tr><th id="342">342</th><td>main(argc, argv)</td></tr>
<tr><th id="343">343</th><td><em>int</em>  argc; <em>char</em>  *argv[];</td></tr>
<tr><th id="344">344</th><td><i>/* first argument: comment leader; 2nd: log message, 3rd: expanded file,</i></td></tr>
<tr><th id="345">345</th><td><i> * 4th: unexpanded file</i></td></tr>
<tr><th id="346">346</th><td><i> */</i></td></tr>
<tr><th id="347">347</th><td>{       <b>struct</b> hshentry delta;</td></tr>
<tr><th id="348">348</th><td></td></tr>
<tr><th id="349">349</th><td>	Comment.string = argv[<var>1</var>];</td></tr>
<tr><th id="350">350</th><td>	Comment.size = strlen(argv[<var>1</var>]);</td></tr>
<tr><th id="351">351</th><td>	delta.log.string = argv[<var>2</var>];</td></tr>
<tr><th id="352">352</th><td>	delta.log.size = strlen(argv[<var>2</var>]);</td></tr>
<tr><th id="353">353</th><td>	<b>if</b> (rcsfcmp(Iopen(argv[<var>3</var>], FOPEN_R_WORK, (<b>struct</b> stat*)<var>0</var>), argv[<var>4</var>], &amp;delta))</td></tr>
<tr><th id="354">354</th><td>                VOID printf(<q>"files are the same\n"</q>);</td></tr>
<tr><th id="355">355</th><td>        <b>else</b>    VOID printf(<q>"files are different\n"</q>);</td></tr>
<tr><th id="356">356</th><td>}</td></tr>
<tr><th id="357">357</th><td><u>#<span data-ppcond="338">endif</span></u></td></tr>
<tr><th id="358">358</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2019-Jul-19</em> from project netbsd revision <em>f9da89e0d</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
