<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>rcs.c source code [netbsd/external/gpl2/xcvs/dist/src/rcs.c] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="cmp_file_data,keyword,kflag,line,linevector,rcs_keyword,rcsbuffer "/>
<link rel="stylesheet" href="https://code.woboq.org/data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="https://code.woboq.org/data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="https://code.woboq.org/data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="https://code.woboq.org/data/jquery/jquery-ui.min.js"></script>
<script>var file = 'netbsd/external/gpl2/xcvs/dist/src/rcs.c'; var root_path = '../../../../../..'; var data_path = 'https://code.woboq.org/data'; var ecma_script_api_version = 2;</script>
<script src='https://code.woboq.org/data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../../..'>netbsd</a>/<a href='../../../..'>external</a>/<a href='../../..'>gpl2</a>/<a href='../..'>xcvs</a>/<a href='..'>dist</a>/<a href='./'>src</a>/<a href='rcs.c.html'>rcs.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> * Copyright (C) 1986-2005 The Free Software Foundation, Inc.</i></td></tr>
<tr><th id="3">3</th><td><i> *</i></td></tr>
<tr><th id="4">4</th><td><i> * Portions Copyright (C) 1998-2005 Derek Price, Ximbiot &lt;<a href="http://ximbiot.com">http://ximbiot.com</a>&gt;,</i></td></tr>
<tr><th id="5">5</th><td><i> *                                  and others.</i></td></tr>
<tr><th id="6">6</th><td><i> *</i></td></tr>
<tr><th id="7">7</th><td><i> * Portions Copyright (C) 1992, Brian Berliner and Jeff Polk</i></td></tr>
<tr><th id="8">8</th><td><i> * Portions Copyright (C) 1989-1992, Brian Berliner</i></td></tr>
<tr><th id="9">9</th><td><i> * </i></td></tr>
<tr><th id="10">10</th><td><i> * You may distribute under the terms of the GNU General Public License as</i></td></tr>
<tr><th id="11">11</th><td><i> * specified in the README file that comes with the CVS source distribution.</i></td></tr>
<tr><th id="12">12</th><td><i> * </i></td></tr>
<tr><th id="13">13</th><td><i> * The routines contained in this file do all the rcs file parsing and</i></td></tr>
<tr><th id="14">14</th><td><i> * manipulation</i></td></tr>
<tr><th id="15">15</th><td><i> */</i></td></tr>
<tr><th id="16">16</th><td><u>#include <a href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/cdefs.h.html">&lt;sys/cdefs.h&gt;</a></u></td></tr>
<tr><th id="17">17</th><td><a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/cdefs_elf.h.html#151" title="__asm(&quot;.pushsection &quot; &quot;.ident&quot; &quot;\n&quot; &quot;.asciz \&quot;&quot; &quot;$NetBSD: rcs.c,v 1.7 2017/09/15 21:03:26 christos Exp $&quot; &quot;\&quot;\n&quot; &quot;.popsection&quot;)" data-ref="_M/__RCSID">__RCSID</a>(<q>"$NetBSD: rcs.c,v 1.7 2017/09/15 21:03:26 christos Exp $"</q>);</td></tr>
<tr><th id="18">18</th><td></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="cvs.h.html">"cvs.h"</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="edit.h.html">"edit.h"</a></u></td></tr>
<tr><th id="21">21</th><td><u>#include <a href="hardlink.h.html">"hardlink.h"</a></u></td></tr>
<tr><th id="22">22</th><td></td></tr>
<tr><th id="23">23</th><td><i>/* These need to be source after cvs.h or HAVE_MMAP won't be set... */</i></td></tr>
<tr><th id="24">24</th><td><u>#<span data-ppcond="24">ifdef</span> <a class="macro" href="../../include/config.h.html#498" data-ref="_M/HAVE_MMAP">HAVE_MMAP</a></u></td></tr>
<tr><th id="25">25</th><td><u># include <a href="../lib/getpagesize.h.html">"getpagesize.h"</a></u></td></tr>
<tr><th id="26">26</th><td><u># include <a href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/mman.h.html">&lt;sys/mman.h&gt;</a></u></td></tr>
<tr><th id="27">27</th><td></td></tr>
<tr><th id="28">28</th><td><i>/* Define MAP_FILE when it isn't otherwise.  */</i></td></tr>
<tr><th id="29">29</th><td><u># <span data-ppcond="29">ifndef</span> <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/mman.h.html#100" data-ref="_M/MAP_FILE">MAP_FILE</a></u></td></tr>
<tr><th id="30">30</th><td><u>#  define MAP_FILE 0</u></td></tr>
<tr><th id="31">31</th><td><u># <span data-ppcond="29">endif</span></u></td></tr>
<tr><th id="32">32</th><td><i>/* Define MAP_FAILED for old systems which neglect to.  */</i></td></tr>
<tr><th id="33">33</th><td><u># <span data-ppcond="33">ifndef</span> <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/mman.h.html#167" data-ref="_M/MAP_FAILED">MAP_FAILED</a></u></td></tr>
<tr><th id="34">34</th><td><u>#  define MAP_FAILED ((void *)-1)</u></td></tr>
<tr><th id="35">35</th><td><u># <span data-ppcond="33">endif</span></u></td></tr>
<tr><th id="36">36</th><td><u>#<span data-ppcond="24">endif</span></u></td></tr>
<tr><th id="37">37</th><td></td></tr>
<tr><th id="38">38</th><td><i  data-doc="kflags">/* The RCS -k options, and a set of enums that must match the array.</i></td></tr>
<tr><th id="39">39</th><td><i  data-doc="kflags">   These come first so that we can use enum kflag in function</i></td></tr>
<tr><th id="40">40</th><td><i  data-doc="kflags">   prototypes.  */</i></td></tr>
<tr><th id="41">41</th><td><em>static</em> <em>const</em> <em>char</em> *<em>const</em> <dfn class="tu decl def" id="kflags" title='kflags' data-type='const char *const [7]' data-ref="kflags" data-ref-filename="kflags">kflags</dfn>[] =</td></tr>
<tr><th id="42">42</th><td>  {<q>"kv"</q>, <q>"kvl"</q>, <q>"k"</q>, <q>"v"</q>, <q>"o"</q>, <q>"b"</q>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>};</td></tr>
<tr><th id="43">43</th><td><b>enum</b> <dfn class="type def" id="kflag" title='kflag' data-ref="kflag" data-ref-filename="kflag">kflag</dfn> { <dfn class="enum" id="KFLAG_KV" title='KFLAG_KV' data-ref="KFLAG_KV" data-ref-filename="KFLAG_KV">KFLAG_KV</dfn> = <var>0</var>, <dfn class="enum" id="KFLAG_KVL" title='KFLAG_KVL' data-ref="KFLAG_KVL" data-ref-filename="KFLAG_KVL">KFLAG_KVL</dfn>, <dfn class="enum" id="KFLAG_K" title='KFLAG_K' data-ref="KFLAG_K" data-ref-filename="KFLAG_K">KFLAG_K</dfn>, <dfn class="enum" id="KFLAG_V" title='KFLAG_V' data-ref="KFLAG_V" data-ref-filename="KFLAG_V">KFLAG_V</dfn>, <dfn class="enum" id="KFLAG_O" title='KFLAG_O' data-ref="KFLAG_O" data-ref-filename="KFLAG_O">KFLAG_O</dfn>, <dfn class="enum" id="KFLAG_B" title='KFLAG_B' data-ref="KFLAG_B" data-ref-filename="KFLAG_B">KFLAG_B</dfn> };</td></tr>
<tr><th id="44">44</th><td></td></tr>
<tr><th id="45">45</th><td><i>/* A structure we use to buffer the contents of an RCS file.  The</i></td></tr>
<tr><th id="46">46</th><td><i>   various fields are only referenced directly by the rcsbuf_*</i></td></tr>
<tr><th id="47">47</th><td><i>   functions.  We declare the struct here so that we can allocate it</i></td></tr>
<tr><th id="48">48</th><td><i>   on the stack, rather than in memory.  */</i></td></tr>
<tr><th id="49">49</th><td></td></tr>
<tr><th id="50">50</th><td><b>struct</b> <dfn class="type def" id="rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</dfn></td></tr>
<tr><th id="51">51</th><td>{</td></tr>
<tr><th id="52">52</th><td>    <i>/* Points to the current position in the buffer.  */</i></td></tr>
<tr><th id="53">53</th><td>    <em>char</em> *<dfn class="decl field" id="rcsbuffer::ptr" title='rcsbuffer::ptr' data-ref="rcsbuffer::ptr" data-ref-filename="rcsbuffer..ptr">ptr</dfn>;</td></tr>
<tr><th id="54">54</th><td>    <i>/* Points just after the last valid character in the buffer.  */</i></td></tr>
<tr><th id="55">55</th><td>    <em>char</em> *<dfn class="decl field" id="rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</dfn>;</td></tr>
<tr><th id="56">56</th><td>    <i>/* The file.  */</i></td></tr>
<tr><th id="57">57</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="decl field" id="rcsbuffer::fp" title='rcsbuffer::fp' data-ref="rcsbuffer::fp" data-ref-filename="rcsbuffer..fp">fp</dfn>;</td></tr>
<tr><th id="58">58</th><td>    <i>/* The name of the file, used for error messages.  */</i></td></tr>
<tr><th id="59">59</th><td>    <em>const</em> <em>char</em> *<dfn class="decl field" id="rcsbuffer::filename" title='rcsbuffer::filename' data-ref="rcsbuffer::filename" data-ref-filename="rcsbuffer..filename">filename</dfn>;</td></tr>
<tr><th id="60">60</th><td>    <i>/* The starting file position of the data in the buffer.  */</i></td></tr>
<tr><th id="61">61</th><td>    <em>unsigned</em> <em>long</em> <dfn class="decl field" id="rcsbuffer::pos" title='rcsbuffer::pos' data-ref="rcsbuffer::pos" data-ref-filename="rcsbuffer..pos">pos</dfn>;</td></tr>
<tr><th id="62">62</th><td>    <i>/* The length of the value.  */</i></td></tr>
<tr><th id="63">63</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="decl field" id="rcsbuffer::vlen" title='rcsbuffer::vlen' data-ref="rcsbuffer::vlen" data-ref-filename="rcsbuffer..vlen">vlen</dfn>;</td></tr>
<tr><th id="64">64</th><td>    <i>/* Whether the value contains an '@' string.  If so, we can not</i></td></tr>
<tr><th id="65">65</th><td><i>       compress whitespace characters.  */</i></td></tr>
<tr><th id="66">66</th><td>    <em>int</em> <dfn class="decl field" id="rcsbuffer::at_string" title='rcsbuffer::at_string' data-ref="rcsbuffer::at_string" data-ref-filename="rcsbuffer..at_string">at_string</dfn>;</td></tr>
<tr><th id="67">67</th><td>    <i>/* The number of embedded '@' characters in an '@' string.  If</i></td></tr>
<tr><th id="68">68</th><td><i>       this is non-zero, we must search the string for pairs of '@'</i></td></tr>
<tr><th id="69">69</th><td><i>       and convert them to a single '@'.  */</i></td></tr>
<tr><th id="70">70</th><td>    <em>int</em> <dfn class="decl field" id="rcsbuffer::embedded_at" title='rcsbuffer::embedded_at' data-ref="rcsbuffer::embedded_at" data-ref-filename="rcsbuffer..embedded_at">embedded_at</dfn>;</td></tr>
<tr><th id="71">71</th><td>};</td></tr>
<tr><th id="72">72</th><td></td></tr>
<tr><th id="73">73</th><td><em>static</em> <a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<a class="tu decl fn" href="#RCS_parsercsfile_i" title='RCS_parsercsfile_i' data-type='RCSNode * RCS_parsercsfile_i(FILE * fp, const char * rcsfile)' data-ref="RCS_parsercsfile_i" data-ref-filename="RCS_parsercsfile_i">RCS_parsercsfile_i</a> (<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> * <dfn class="local col1 decl" id="1fp" title='fp' data-type='FILE *' data-ref="1fp" data-ref-filename="1fp">fp</dfn>, <em>const</em> <em>char</em> *<dfn class="local col2 decl" id="2rcsfile" title='rcsfile' data-type='const char *' data-ref="2rcsfile" data-ref-filename="2rcsfile">rcsfile</dfn>);</td></tr>
<tr><th id="74">74</th><td><em>static</em> <em>char</em> *<a class="tu decl fn" href="#RCS_getdatebranch" title='RCS_getdatebranch' data-type='char * RCS_getdatebranch(RCSNode * rcs, const char * date, const char * branch)' data-ref="RCS_getdatebranch" data-ref-filename="RCS_getdatebranch">RCS_getdatebranch</a> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> * <dfn class="local col3 decl" id="3rcs" title='rcs' data-type='RCSNode *' data-ref="3rcs" data-ref-filename="3rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col4 decl" id="4date" title='date' data-type='const char *' data-ref="4date" data-ref-filename="4date">date</dfn>,</td></tr>
<tr><th id="75">75</th><td>                                <em>const</em> <em>char</em> *<dfn class="local col5 decl" id="5branch" title='branch' data-type='const char *' data-ref="5branch" data-ref-filename="5branch">branch</dfn>);</td></tr>
<tr><th id="76">76</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#rcsbuf_open" title='rcsbuf_open' data-type='void rcsbuf_open(struct rcsbuffer * , FILE * fp, const char * filename, unsigned long pos)' data-ref="rcsbuf_open" data-ref-filename="rcsbuf_open">rcsbuf_open</a> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col6 decl" id="6fp" title='fp' data-type='FILE *' data-ref="6fp" data-ref-filename="6fp">fp</dfn>,</td></tr>
<tr><th id="77">77</th><td>                         <em>const</em> <em>char</em> *<dfn class="local col7 decl" id="7filename" title='filename' data-type='const char *' data-ref="7filename" data-ref-filename="7filename">filename</dfn>, <em>unsigned</em> <em>long</em> <dfn class="local col8 decl" id="8pos" title='pos' data-type='unsigned long' data-ref="8pos" data-ref-filename="8pos">pos</dfn>);</td></tr>
<tr><th id="78">78</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#rcsbuf_close" title='rcsbuf_close' data-type='void rcsbuf_close(struct rcsbuffer * )' data-ref="rcsbuf_close" data-ref-filename="rcsbuf_close">rcsbuf_close</a> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *);</td></tr>
<tr><th id="79">79</th><td><em>static</em> <em>int</em> <a class="tu decl fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-type='int rcsbuf_getkey(struct rcsbuffer * , char ** keyp, char ** valp)' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *, <em>char</em> **<dfn class="local col9 decl" id="9keyp" title='keyp' data-type='char **' data-ref="9keyp" data-ref-filename="9keyp">keyp</dfn>, <em>char</em> **<dfn class="local col0 decl" id="10valp" title='valp' data-type='char **' data-ref="10valp" data-ref-filename="10valp">valp</dfn>);</td></tr>
<tr><th id="80">80</th><td><em>static</em> <em>int</em> <a class="tu decl fn" href="#rcsbuf_getrevnum" title='rcsbuf_getrevnum' data-type='int rcsbuf_getrevnum(struct rcsbuffer * , char ** revp)' data-ref="rcsbuf_getrevnum" data-ref-filename="rcsbuf_getrevnum">rcsbuf_getrevnum</a> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *, <em>char</em> **<dfn class="local col1 decl" id="11revp" title='revp' data-type='char **' data-ref="11revp" data-ref-filename="11revp">revp</dfn>);</td></tr>
<tr><th id="81">81</th><td><em>static</em> <em>char</em> *<a class="tu decl fn" href="#rcsbuf_fill" title='rcsbuf_fill' data-type='char * rcsbuf_fill(struct rcsbuffer * , char * ptr, char ** keyp, char ** valp)' data-ref="rcsbuf_fill" data-ref-filename="rcsbuf_fill">rcsbuf_fill</a> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *, <em>char</em> *<dfn class="local col2 decl" id="12ptr" title='ptr' data-type='char *' data-ref="12ptr" data-ref-filename="12ptr">ptr</dfn>, <em>char</em> **<dfn class="local col3 decl" id="13keyp" title='keyp' data-type='char **' data-ref="13keyp" data-ref-filename="13keyp">keyp</dfn>,</td></tr>
<tr><th id="82">82</th><td>                          <em>char</em> **<dfn class="local col4 decl" id="14valp" title='valp' data-type='char **' data-ref="14valp" data-ref-filename="14valp">valp</dfn>);</td></tr>
<tr><th id="83">83</th><td><em>static</em> <em>int</em> <a class="tu decl fn" href="#rcsbuf_valcmp" title='rcsbuf_valcmp' data-type='int rcsbuf_valcmp(struct rcsbuffer * )' data-ref="rcsbuf_valcmp" data-ref-filename="rcsbuf_valcmp">rcsbuf_valcmp</a> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *);</td></tr>
<tr><th id="84">84</th><td><em>static</em> <em>char</em> *<a class="tu decl fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-type='char * rcsbuf_valcopy(struct rcsbuffer * , char * val, int polish, size_t * lenp)' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *, <em>char</em> *<dfn class="local col5 decl" id="15val" title='val' data-type='char *' data-ref="15val" data-ref-filename="15val">val</dfn>, <em>int</em> <dfn class="local col6 decl" id="16polish" title='polish' data-type='int' data-ref="16polish" data-ref-filename="16polish">polish</dfn>,</td></tr>
<tr><th id="85">85</th><td>                             <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> *<dfn class="local col7 decl" id="17lenp" title='lenp' data-type='size_t *' data-ref="17lenp" data-ref-filename="17lenp">lenp</dfn>);</td></tr>
<tr><th id="86">86</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#rcsbuf_valpolish" title='rcsbuf_valpolish' data-type='void rcsbuf_valpolish(struct rcsbuffer * , char * val, int polish, size_t * lenp)' data-ref="rcsbuf_valpolish" data-ref-filename="rcsbuf_valpolish">rcsbuf_valpolish</a> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *, <em>char</em> *<dfn class="local col8 decl" id="18val" title='val' data-type='char *' data-ref="18val" data-ref-filename="18val">val</dfn>, <em>int</em> <dfn class="local col9 decl" id="19polish" title='polish' data-type='int' data-ref="19polish" data-ref-filename="19polish">polish</dfn>,</td></tr>
<tr><th id="87">87</th><td>                              <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> *<dfn class="local col0 decl" id="20lenp" title='lenp' data-type='size_t *' data-ref="20lenp" data-ref-filename="20lenp">lenp</dfn>);</td></tr>
<tr><th id="88">88</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#rcsbuf_valpolish_internal" title='rcsbuf_valpolish_internal' data-type='void rcsbuf_valpolish_internal(struct rcsbuffer * , char * to, const char * from, size_t * lenp)' data-ref="rcsbuf_valpolish_internal" data-ref-filename="rcsbuf_valpolish_internal">rcsbuf_valpolish_internal</a> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *, <em>char</em> *<dfn class="local col1 decl" id="21to" title='to' data-type='char *' data-ref="21to" data-ref-filename="21to">to</dfn>,</td></tr>
<tr><th id="89">89</th><td>                                       <em>const</em> <em>char</em> *<dfn class="local col2 decl" id="22from" title='from' data-type='const char *' data-ref="22from" data-ref-filename="22from">from</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> *<dfn class="local col3 decl" id="23lenp" title='lenp' data-type='size_t *' data-ref="23lenp" data-ref-filename="23lenp">lenp</dfn>);</td></tr>
<tr><th id="90">90</th><td><em>static</em> <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#178" title="__off_t" data-ref="_M/off_t">off_t</a> <a class="tu decl fn" href="#rcsbuf_ftello" title='rcsbuf_ftello' data-type='__off_t rcsbuf_ftello(struct rcsbuffer * )' data-ref="rcsbuf_ftello" data-ref-filename="rcsbuf_ftello">rcsbuf_ftello</a> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *);</td></tr>
<tr><th id="91">91</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#rcsbuf_get_buffered" title='rcsbuf_get_buffered' data-type='void rcsbuf_get_buffered(struct rcsbuffer * , char ** datap, size_t * lenp)' data-ref="rcsbuf_get_buffered" data-ref-filename="rcsbuf_get_buffered">rcsbuf_get_buffered</a> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *, <em>char</em> **<dfn class="local col4 decl" id="24datap" title='datap' data-type='char **' data-ref="24datap" data-ref-filename="24datap">datap</dfn>,</td></tr>
<tr><th id="92">92</th><td>				 <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> *<dfn class="local col5 decl" id="25lenp" title='lenp' data-type='size_t *' data-ref="25lenp" data-ref-filename="25lenp">lenp</dfn>);</td></tr>
<tr><th id="93">93</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#rcsbuf_cache" title='rcsbuf_cache' data-type='void rcsbuf_cache(RCSNode * , struct rcsbuffer * )' data-ref="rcsbuf_cache" data-ref-filename="rcsbuf_cache">rcsbuf_cache</a> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *, <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *);</td></tr>
<tr><th id="94">94</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#rcsbuf_cache_close" title='rcsbuf_cache_close' data-type='void rcsbuf_cache_close()' data-ref="rcsbuf_cache_close" data-ref-filename="rcsbuf_cache_close">rcsbuf_cache_close</a> (<em>void</em>);</td></tr>
<tr><th id="95">95</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#rcsbuf_cache_open" title='rcsbuf_cache_open' data-type='void rcsbuf_cache_open(RCSNode * , __off_t , FILE ** , struct rcsbuffer * )' data-ref="rcsbuf_cache_open" data-ref-filename="rcsbuf_cache_open">rcsbuf_cache_open</a> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#178" title="__off_t" data-ref="_M/off_t">off_t</a>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> **, <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *);</td></tr>
<tr><th id="96">96</th><td><em>static</em> <em>int</em> <a class="tu decl fn" href="#checkmagic_proc" title='checkmagic_proc' data-type='int checkmagic_proc(Node * p, void * closure)' data-ref="checkmagic_proc" data-ref-filename="checkmagic_proc">checkmagic_proc</a> (<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col6 decl" id="26p" title='p' data-type='Node *' data-ref="26p" data-ref-filename="26p">p</dfn>, <em>void</em> *<dfn class="local col7 decl" id="27closure" title='closure' data-type='void *' data-ref="27closure" data-ref-filename="27closure">closure</dfn>);</td></tr>
<tr><th id="97">97</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#do_branches" title='do_branches' data-type='void do_branches(List * list, char * val)' data-ref="do_branches" data-ref-filename="do_branches">do_branches</a> (<a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> * <dfn class="local col8 decl" id="28list" title='list' data-type='List *' data-ref="28list" data-ref-filename="28list">list</dfn>, <em>char</em> *<dfn class="local col9 decl" id="29val" title='val' data-type='char *' data-ref="29val" data-ref-filename="29val">val</dfn>);</td></tr>
<tr><th id="98">98</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#do_symbols" title='do_symbols' data-type='void do_symbols(List * list, char * val)' data-ref="do_symbols" data-ref-filename="do_symbols">do_symbols</a> (<a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> * <dfn class="local col0 decl" id="30list" title='list' data-type='List *' data-ref="30list" data-ref-filename="30list">list</dfn>, <em>char</em> *<dfn class="local col1 decl" id="31val" title='val' data-type='char *' data-ref="31val" data-ref-filename="31val">val</dfn>);</td></tr>
<tr><th id="99">99</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#do_locks" title='do_locks' data-type='void do_locks(List * list, char * val)' data-ref="do_locks" data-ref-filename="do_locks">do_locks</a> (<a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> * <dfn class="local col2 decl" id="32list" title='list' data-type='List *' data-ref="32list" data-ref-filename="32list">list</dfn>, <em>char</em> *<dfn class="local col3 decl" id="33val" title='val' data-type='char *' data-ref="33val" data-ref-filename="33val">val</dfn>);</td></tr>
<tr><th id="100">100</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#free_rcsnode_contents" title='free_rcsnode_contents' data-type='void free_rcsnode_contents(RCSNode * )' data-ref="free_rcsnode_contents" data-ref-filename="free_rcsnode_contents">free_rcsnode_contents</a> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *);</td></tr>
<tr><th id="101">101</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#free_rcsvers_contents" title='free_rcsvers_contents' data-type='void free_rcsvers_contents(RCSVers * )' data-ref="free_rcsvers_contents" data-ref-filename="free_rcsvers_contents">free_rcsvers_contents</a> (<a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *);</td></tr>
<tr><th id="102">102</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#rcsvers_delproc" title='rcsvers_delproc' data-type='void rcsvers_delproc(Node * p)' data-ref="rcsvers_delproc" data-ref-filename="rcsvers_delproc">rcsvers_delproc</a> (<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> * <dfn class="local col4 decl" id="34p" title='p' data-type='Node *' data-ref="34p" data-ref-filename="34p">p</dfn>);</td></tr>
<tr><th id="103">103</th><td><em>static</em> <em>char</em> *<a class="tu decl fn" href="#translate_symtag" title='translate_symtag' data-type='char * translate_symtag(RCSNode * , const char * )' data-ref="translate_symtag" data-ref-filename="translate_symtag">translate_symtag</a> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *, <em>const</em> <em>char</em> *);</td></tr>
<tr><th id="104">104</th><td><em>static</em> <em>char</em> *<a class="tu decl fn" href="#RCS_addbranch" title='RCS_addbranch' data-type='char * RCS_addbranch(RCSNode * , const char * )' data-ref="RCS_addbranch" data-ref-filename="RCS_addbranch">RCS_addbranch</a> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *, <em>const</em> <em>char</em> *);</td></tr>
<tr><th id="105">105</th><td><em>static</em> <em>char</em> *<a class="tu decl fn" href="#truncate_revnum_in_place" title='truncate_revnum_in_place' data-type='char * truncate_revnum_in_place(char * )' data-ref="truncate_revnum_in_place" data-ref-filename="truncate_revnum_in_place">truncate_revnum_in_place</a> (<em>char</em> *);</td></tr>
<tr><th id="106">106</th><td><em>static</em> <em>char</em> *<a class="tu decl fn" href="#truncate_revnum" title='truncate_revnum' data-type='char * truncate_revnum(const char * )' data-ref="truncate_revnum" data-ref-filename="truncate_revnum">truncate_revnum</a> (<em>const</em> <em>char</em> *);</td></tr>
<tr><th id="107">107</th><td><em>static</em> <em>char</em> *<a class="tu decl fn" href="#printable_date" title='printable_date' data-type='char * printable_date(const char * )' data-ref="printable_date" data-ref-filename="printable_date">printable_date</a> (<em>const</em> <em>char</em> *);</td></tr>
<tr><th id="108">108</th><td><em>static</em> <em>char</em> *<a class="tu decl fn" href="#escape_keyword_value" title='escape_keyword_value' data-type='char * escape_keyword_value(const char * , int * )' data-ref="escape_keyword_value" data-ref-filename="escape_keyword_value">escape_keyword_value</a> (<em>const</em> <em>char</em> *, <em>int</em> *);</td></tr>
<tr><th id="109">109</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#expand_keywords" title='expand_keywords' data-type='void expand_keywords(RCSNode * , RCSVers * , const char * , const char * , size_t , enum kflag , char * , size_t , char ** , size_t * )' data-ref="expand_keywords" data-ref-filename="expand_keywords">expand_keywords</a> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *, <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *, <em>const</em> <em>char</em> *,</td></tr>
<tr><th id="110">110</th><td>                             <em>const</em> <em>char</em> *, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a>, <b>enum</b> <a class="type" href="#kflag" title='kflag' data-ref="kflag" data-ref-filename="kflag">kflag</a>, <em>char</em> *,</td></tr>
<tr><th id="111">111</th><td>                             <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a>, <em>char</em> **, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> *);</td></tr>
<tr><th id="112">112</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#cmp_file_buffer" title='cmp_file_buffer' data-type='void cmp_file_buffer(void * , const char * , size_t )' data-ref="cmp_file_buffer" data-ref-filename="cmp_file_buffer">cmp_file_buffer</a> (<em>void</em> *, <em>const</em> <em>char</em> *, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a>);</td></tr>
<tr><th id="113">113</th><td></td></tr>
<tr><th id="114">114</th><td><i  data-doc="getdelta">/* Routines for reading, parsing and writing RCS files. */</i></td></tr>
<tr><th id="115">115</th><td><em>static</em> <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<a class="tu decl fn" href="#getdelta" title='getdelta' data-type='RCSVers * getdelta(struct rcsbuffer * , char * , char ** , char ** )' data-ref="getdelta" data-ref-filename="getdelta">getdelta</a> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *, <em>char</em> *, <em>char</em> **, <em>char</em> **);</td></tr>
<tr><th id="116">116</th><td><em>static</em> <a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a> *<a class="tu decl fn" href="#RCS_getdeltatext" title='RCS_getdeltatext' data-type='Deltatext * RCS_getdeltatext(RCSNode * , FILE * , struct rcsbuffer * )' data-ref="RCS_getdeltatext" data-ref-filename="RCS_getdeltatext">RCS_getdeltatext</a> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *, <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *);</td></tr>
<tr><th id="117">117</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#freedeltatext" title='freedeltatext' data-type='void freedeltatext(Deltatext * )' data-ref="freedeltatext" data-ref-filename="freedeltatext">freedeltatext</a> (<a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a> *);</td></tr>
<tr><th id="118">118</th><td></td></tr>
<tr><th id="119">119</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#RCS_putadmin" title='RCS_putadmin' data-type='void RCS_putadmin(RCSNode * , FILE * )' data-ref="RCS_putadmin" data-ref-filename="RCS_putadmin">RCS_putadmin</a> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *);</td></tr>
<tr><th id="120">120</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#RCS_putdtree" title='RCS_putdtree' data-type='void RCS_putdtree(RCSNode * , char * , FILE * )' data-ref="RCS_putdtree" data-ref-filename="RCS_putdtree">RCS_putdtree</a> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *, <em>char</em> *, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *);</td></tr>
<tr><th id="121">121</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#RCS_putdesc" title='RCS_putdesc' data-type='void RCS_putdesc(RCSNode * , FILE * )' data-ref="RCS_putdesc" data-ref-filename="RCS_putdesc">RCS_putdesc</a> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *);</td></tr>
<tr><th id="122">122</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#putdelta" title='putdelta' data-type='void putdelta(RCSVers * , FILE * )' data-ref="putdelta" data-ref-filename="putdelta">putdelta</a> (<a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *);</td></tr>
<tr><th id="123">123</th><td><em>static</em> <em>int</em> <a class="tu decl fn" href="#putrcsfield_proc" title='putrcsfield_proc' data-type='int putrcsfield_proc(Node * , void * )' data-ref="putrcsfield_proc" data-ref-filename="putrcsfield_proc">putrcsfield_proc</a> (<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *, <em>void</em> *);</td></tr>
<tr><th id="124">124</th><td><em>static</em> <em>int</em> <a class="tu decl fn" href="#putsymbol_proc" title='putsymbol_proc' data-type='int putsymbol_proc(Node * , void * )' data-ref="putsymbol_proc" data-ref-filename="putsymbol_proc">putsymbol_proc</a> (<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *, <em>void</em> *);</td></tr>
<tr><th id="125">125</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#RCS_copydeltas" title='RCS_copydeltas' data-type='void RCS_copydeltas(RCSNode * , FILE * , struct rcsbuffer * , FILE * , Deltatext * , char * )' data-ref="RCS_copydeltas" data-ref-filename="RCS_copydeltas">RCS_copydeltas</a> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *, <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *,</td></tr>
<tr><th id="126">126</th><td>			    <a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a> *, <em>char</em> *);</td></tr>
<tr><th id="127">127</th><td><em>static</em> <em>int</em> <a class="tu decl fn" href="#count_delta_actions" title='count_delta_actions' data-type='int count_delta_actions(Node * , void * )' data-ref="count_delta_actions" data-ref-filename="count_delta_actions">count_delta_actions</a> (<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *, <em>void</em> *);</td></tr>
<tr><th id="128">128</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#putdeltatext" title='putdeltatext' data-type='void putdeltatext(FILE * , Deltatext * )' data-ref="putdeltatext" data-ref-filename="putdeltatext">putdeltatext</a> (<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *, <a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a> *);</td></tr>
<tr><th id="129">129</th><td></td></tr>
<tr><th id="130">130</th><td><em>static</em> <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<a class="tu decl fn" href="#rcs_internal_lockfile" title='rcs_internal_lockfile' data-type='FILE * rcs_internal_lockfile(char * )' data-ref="rcs_internal_lockfile" data-ref-filename="rcs_internal_lockfile">rcs_internal_lockfile</a> (<em>char</em> *);</td></tr>
<tr><th id="131">131</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#rcs_internal_unlockfile" title='rcs_internal_unlockfile' data-type='void rcs_internal_unlockfile(FILE * , char * )' data-ref="rcs_internal_unlockfile" data-ref-filename="rcs_internal_unlockfile">rcs_internal_unlockfile</a> (<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *, <em>char</em> *);</td></tr>
<tr><th id="132">132</th><td><em>static</em> <em>char</em> *<a class="tu decl fn" href="#rcs_lockfilename" title='rcs_lockfilename' data-type='char * rcs_lockfilename(const char * )' data-ref="rcs_lockfilename" data-ref-filename="rcs_lockfilename">rcs_lockfilename</a> (<em>const</em> <em>char</em> *);</td></tr>
<tr><th id="133">133</th><td></td></tr>
<tr><th id="134">134</th><td><i>/* The RCS file reading functions are called a lot, and they do some</i></td></tr>
<tr><th id="135">135</th><td><i>   string comparisons.  This macro speeds things up a bit by skipping</i></td></tr>
<tr><th id="136">136</th><td><i>   the function call when the first characters are different.  It</i></td></tr>
<tr><th id="137">137</th><td><i>   evaluates its arguments multiple times.  */</i></td></tr>
<tr><th id="138">138</th><td><u>#define <dfn class="macro" id="_M/STREQ" data-ref="_M/STREQ">STREQ</dfn>(a, b) (*(char *)(a) == *(char *)(b) &amp;&amp; <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcmp" title='strcmp' data-ref="strcmp" data-ref-filename="strcmp">strcmp</a> ((a), (b)) == 0)</u></td></tr>
<tr><th id="139">139</th><td></td></tr>
<tr><th id="140">140</th><td><em>static</em> <em>char</em> * <a class="tu decl fn" href="#getfullCVSname" title='getfullCVSname' data-type='char * getfullCVSname(char * , char ** )' data-ref="getfullCVSname" data-ref-filename="getfullCVSname">getfullCVSname</a> (<em>char</em> *, <em>char</em> **);</td></tr>
<tr><th id="141">141</th><td></td></tr>
<tr><th id="142">142</th><td><i  data-doc="spacetab">/*</i></td></tr>
<tr><th id="143">143</th><td><i  data-doc="spacetab"> * We don't want to use isspace() from the C library because:</i></td></tr>
<tr><th id="144">144</th><td><i  data-doc="spacetab"> *</i></td></tr>
<tr><th id="145">145</th><td><i  data-doc="spacetab"> * 1. The definition of "whitespace" in RCS files includes ASCII</i></td></tr>
<tr><th id="146">146</th><td><i  data-doc="spacetab"> *    backspace, but the C locale doesn't.</i></td></tr>
<tr><th id="147">147</th><td><i  data-doc="spacetab"> * 2. isspace is an very expensive function call in some implementations</i></td></tr>
<tr><th id="148">148</th><td><i  data-doc="spacetab"> *    due to the addition of wide character support.</i></td></tr>
<tr><th id="149">149</th><td><i  data-doc="spacetab"> */</i></td></tr>
<tr><th id="150">150</th><td><em>static</em> <em>const</em> <em>char</em> <dfn class="tu decl def" id="spacetab" title='spacetab' data-type='const char [256]' data-ref="spacetab" data-ref-filename="spacetab">spacetab</dfn>[] = {</td></tr>
<tr><th id="151">151</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>1</var>, <var>1</var>, <var>1</var>, <var>1</var>, <var>1</var>, <var>1</var>, <var>0</var>, <var>0</var>,	<i>/* 0x00 - 0x0f */</i></td></tr>
<tr><th id="152">152</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <i>/* 0x10 - 0x1f */</i></td></tr>
<tr><th id="153">153</th><td>        <var>1</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <i>/* 0x20 - 0x2f */</i></td></tr>
<tr><th id="154">154</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <i>/* 0x30 - 0x3f */</i></td></tr>
<tr><th id="155">155</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <i>/* 0x40 - 0x4f */</i></td></tr>
<tr><th id="156">156</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <i>/* 0x50 - 0x5f */</i></td></tr>
<tr><th id="157">157</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <i>/* 0x60 - 0x8f */</i></td></tr>
<tr><th id="158">158</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <i>/* 0x70 - 0x7f */</i></td></tr>
<tr><th id="159">159</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <i>/* 0x80 - 0x8f */</i></td></tr>
<tr><th id="160">160</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <i>/* 0x90 - 0x9f */</i></td></tr>
<tr><th id="161">161</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <i>/* 0xa0 - 0xaf */</i></td></tr>
<tr><th id="162">162</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <i>/* 0xb0 - 0xbf */</i></td></tr>
<tr><th id="163">163</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <i>/* 0xc0 - 0xcf */</i></td></tr>
<tr><th id="164">164</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <i>/* 0xd0 - 0xdf */</i></td></tr>
<tr><th id="165">165</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <i>/* 0xe0 - 0xef */</i></td></tr>
<tr><th id="166">166</th><td>        <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>, <var>0</var>  <i>/* 0xf0 - 0xff */</i></td></tr>
<tr><th id="167">167</th><td>};</td></tr>
<tr><th id="168">168</th><td></td></tr>
<tr><th id="169">169</th><td><u>#define <dfn class="macro" id="_M/whitespace" data-ref="_M/whitespace">whitespace</dfn>(c)	(<a class="tu ref" href="#spacetab" title='spacetab' data-use='r' data-ref="spacetab" data-ref-filename="spacetab">spacetab</a>[(unsigned char)c] != 0)</u></td></tr>
<tr><th id="170">170</th><td></td></tr>
<tr><th id="171">171</th><td><em>static</em> <em>char</em> *<dfn class="tu decl def" id="rcs_lockfile" title='rcs_lockfile' data-type='char *' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="172">172</th><td><em>static</em> <em>int</em> <dfn class="tu decl def" id="rcs_lockfd" title='rcs_lockfd' data-type='int' data-ref="rcs_lockfd" data-ref-filename="rcs_lockfd">rcs_lockfd</dfn> = -<var>1</var>;</td></tr>
<tr><th id="173">173</th><td></td></tr>
<tr><th id="174">174</th><td></td></tr>
<tr><th id="175">175</th><td></td></tr>
<tr><th id="176">176</th><td><i  data-doc="locate_rcs">/*</i></td></tr>
<tr><th id="177">177</th><td><i  data-doc="locate_rcs"> * char *</i></td></tr>
<tr><th id="178">178</th><td><i  data-doc="locate_rcs"> * locate_rcs ( const char* file, const char *repository , int *inattic )</i></td></tr>
<tr><th id="179">179</th><td><i  data-doc="locate_rcs"> *</i></td></tr>
<tr><th id="180">180</th><td><i  data-doc="locate_rcs"> * Find an RCS file in the repository, case insensitively when the cased name</i></td></tr>
<tr><th id="181">181</th><td><i  data-doc="locate_rcs"> * doesn't exist, we are running as the server, and a client has asked us to</i></td></tr>
<tr><th id="182">182</th><td><i  data-doc="locate_rcs"> * ignore case.</i></td></tr>
<tr><th id="183">183</th><td><i  data-doc="locate_rcs"> *</i></td></tr>
<tr><th id="184">184</th><td><i  data-doc="locate_rcs"> * Most parts of CVS will want to rely instead on RCS_parse which calls this</i></td></tr>
<tr><th id="185">185</th><td><i  data-doc="locate_rcs"> * function and is called by recurse.c which then puts the result in useful</i></td></tr>
<tr><th id="186">186</th><td><i  data-doc="locate_rcs"> * places like the rcs field of struct file_info.</i></td></tr>
<tr><th id="187">187</th><td><i  data-doc="locate_rcs"> *</i></td></tr>
<tr><th id="188">188</th><td><i  data-doc="locate_rcs"> * INPUTS</i></td></tr>
<tr><th id="189">189</th><td><i  data-doc="locate_rcs"> *</i></td></tr>
<tr><th id="190">190</th><td><i  data-doc="locate_rcs"> *  repository		the repository (including the directory)</i></td></tr>
<tr><th id="191">191</th><td><i  data-doc="locate_rcs"> *  file		the filename within that directory (without RCSEXT).</i></td></tr>
<tr><th id="192">192</th><td><i  data-doc="locate_rcs"> *  inattic		NULL or a pointer to the output boolean</i></td></tr>
<tr><th id="193">193</th><td><i  data-doc="locate_rcs"> *</i></td></tr>
<tr><th id="194">194</th><td><i  data-doc="locate_rcs"> * OUTPUTS</i></td></tr>
<tr><th id="195">195</th><td><i  data-doc="locate_rcs"> *</i></td></tr>
<tr><th id="196">196</th><td><i  data-doc="locate_rcs"> *  inattic		If this input was non-null, the destination will be</i></td></tr>
<tr><th id="197">197</th><td><i  data-doc="locate_rcs"> *  			set to true if the file was found in the attic or</i></td></tr>
<tr><th id="198">198</th><td><i  data-doc="locate_rcs"> *  			false if not.  If no RCS file is found, this value</i></td></tr>
<tr><th id="199">199</th><td><i  data-doc="locate_rcs"> *  			is undefined.</i></td></tr>
<tr><th id="200">200</th><td><i  data-doc="locate_rcs"> *</i></td></tr>
<tr><th id="201">201</th><td><i  data-doc="locate_rcs"> * RETURNS</i></td></tr>
<tr><th id="202">202</th><td><i  data-doc="locate_rcs"> *</i></td></tr>
<tr><th id="203">203</th><td><i  data-doc="locate_rcs"> *  a newly-malloc'd array containing the absolute pathname of the RCS</i></td></tr>
<tr><th id="204">204</th><td><i  data-doc="locate_rcs"> *  file that was found or NULL when none was found.</i></td></tr>
<tr><th id="205">205</th><td><i  data-doc="locate_rcs"> *</i></td></tr>
<tr><th id="206">206</th><td><i  data-doc="locate_rcs"> * ERRORS</i></td></tr>
<tr><th id="207">207</th><td><i  data-doc="locate_rcs"> *</i></td></tr>
<tr><th id="208">208</th><td><i  data-doc="locate_rcs"> *  errno can be set by the return value of the final call to</i></td></tr>
<tr><th id="209">209</th><td><i  data-doc="locate_rcs"> *  locate_file_in_dir().  This should resolve to the system's existence error</i></td></tr>
<tr><th id="210">210</th><td><i  data-doc="locate_rcs"> *  value (sometime ENOENT) if the Attic directory did not exist and ENOENT if</i></td></tr>
<tr><th id="211">211</th><td><i  data-doc="locate_rcs"> *  the Attic was found but no matching files were found in the Attic or its</i></td></tr>
<tr><th id="212">212</th><td><i  data-doc="locate_rcs"> *  parent.</i></td></tr>
<tr><th id="213">213</th><td><i  data-doc="locate_rcs"> */</i></td></tr>
<tr><th id="214">214</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="215">215</th><td><dfn class="tu decl def fn" id="locate_rcs" title='locate_rcs' data-type='char * locate_rcs(const char * repository, const char * file, int * inattic)' data-ref="locate_rcs" data-ref-filename="locate_rcs">locate_rcs</dfn> (<em>const</em> <em>char</em> *<dfn class="local col5 decl" id="35repository" title='repository' data-type='const char *' data-ref="35repository" data-ref-filename="35repository">repository</dfn>, <em>const</em> <em>char</em> *<dfn class="local col6 decl" id="36file" title='file' data-type='const char *' data-ref="36file" data-ref-filename="36file">file</dfn>, <em>int</em> *<dfn class="local col7 decl" id="37inattic" title='inattic' data-type='int *' data-ref="37inattic" data-ref-filename="37inattic">inattic</dfn>)</td></tr>
<tr><th id="216">216</th><td>{</td></tr>
<tr><th id="217">217</th><td>    <em>char</em> *<dfn class="local col8 decl" id="38retval" title='retval' data-type='char *' data-ref="38retval" data-ref-filename="38retval">retval</dfn>;</td></tr>
<tr><th id="218">218</th><td></td></tr>
<tr><th id="219">219</th><td>    <i>/* First, try to find the file as cased. */</i></td></tr>
<tr><th id="220">220</th><td>    <a class="local col8 ref" href="#38retval" title='retval' data-ref="38retval" data-ref-filename="38retval">retval</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col5 ref" href="#35repository" title='repository' data-ref="35repository" data-ref-filename="35repository">repository</a>)</td></tr>
<tr><th id="221">221</th><td>                      + <b>sizeof</b> (<a class="macro" href="cvs.h.html#206" title="&quot;Attic&quot;" data-ref="_M/CVSATTIC">CVSATTIC</a>)</td></tr>
<tr><th id="222">222</th><td>                      + <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col6 ref" href="#36file" title='file' data-ref="36file" data-ref-filename="36file">file</a>)</td></tr>
<tr><th id="223">223</th><td>                      + <b>sizeof</b> (<a class="macro" href="rcs.h.html#21" title="&quot;,v&quot;" data-ref="_M/RCSEXT">RCSEXT</a>)</td></tr>
<tr><th id="224">224</th><td>                      + <var>3</var>);</td></tr>
<tr><th id="225">225</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sprintf" title='sprintf' data-ref="sprintf" data-ref-filename="sprintf">sprintf</a> (<a class="local col8 ref" href="#38retval" title='retval' data-ref="38retval" data-ref-filename="38retval">retval</a>, <q>"%s/%s%s"</q>, <a class="local col5 ref" href="#35repository" title='repository' data-ref="35repository" data-ref-filename="35repository">repository</a>, <a class="local col6 ref" href="#36file" title='file' data-ref="36file" data-ref-filename="36file">file</a>, <a class="macro" href="rcs.h.html#21" title="&quot;,v&quot;" data-ref="_M/RCSEXT">RCSEXT</a>);</td></tr>
<tr><th id="226">226</th><td>    <b>if</b> (<a class="ref fn" href="cvs.h.html#isreadable" title='isreadable' data-ref="isreadable" data-ref-filename="isreadable">isreadable</a> (<a class="local col8 ref" href="#38retval" title='retval' data-ref="38retval" data-ref-filename="38retval">retval</a>))</td></tr>
<tr><th id="227">227</th><td>    {</td></tr>
<tr><th id="228">228</th><td>	<b>if</b> (<a class="local col7 ref" href="#37inattic" title='inattic' data-ref="37inattic" data-ref-filename="37inattic">inattic</a>)</td></tr>
<tr><th id="229">229</th><td>	    *<a class="local col7 ref" href="#37inattic" title='inattic' data-ref="37inattic" data-ref-filename="37inattic">inattic</a> = <var>0</var>;</td></tr>
<tr><th id="230">230</th><td>	<b>return</b> <a class="local col8 ref" href="#38retval" title='retval' data-ref="38retval" data-ref-filename="38retval">retval</a>;</td></tr>
<tr><th id="231">231</th><td>    }</td></tr>
<tr><th id="232">232</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sprintf" title='sprintf' data-ref="sprintf" data-ref-filename="sprintf">sprintf</a> (<a class="local col8 ref" href="#38retval" title='retval' data-ref="38retval" data-ref-filename="38retval">retval</a>, <q>"%s/%s/%s%s"</q>, <a class="local col5 ref" href="#35repository" title='repository' data-ref="35repository" data-ref-filename="35repository">repository</a>, <a class="macro" href="cvs.h.html#206" title="&quot;Attic&quot;" data-ref="_M/CVSATTIC">CVSATTIC</a>, <a class="local col6 ref" href="#36file" title='file' data-ref="36file" data-ref-filename="36file">file</a>, <a class="macro" href="rcs.h.html#21" title="&quot;,v&quot;" data-ref="_M/RCSEXT">RCSEXT</a>);</td></tr>
<tr><th id="233">233</th><td>    <b>if</b> (<a class="ref fn" href="cvs.h.html#isreadable" title='isreadable' data-ref="isreadable" data-ref-filename="isreadable">isreadable</a> (<a class="local col8 ref" href="#38retval" title='retval' data-ref="38retval" data-ref-filename="38retval">retval</a>))</td></tr>
<tr><th id="234">234</th><td>    {</td></tr>
<tr><th id="235">235</th><td>	<b>if</b> (<a class="local col7 ref" href="#37inattic" title='inattic' data-ref="37inattic" data-ref-filename="37inattic">inattic</a>)</td></tr>
<tr><th id="236">236</th><td>	    *<a class="local col7 ref" href="#37inattic" title='inattic' data-ref="37inattic" data-ref-filename="37inattic">inattic</a> = <var>1</var>;</td></tr>
<tr><th id="237">237</th><td>	<b>return</b> <a class="local col8 ref" href="#38retval" title='retval' data-ref="38retval" data-ref-filename="38retval">retval</a>;</td></tr>
<tr><th id="238">238</th><td>    }</td></tr>
<tr><th id="239">239</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#38retval" title='retval' data-ref="38retval" data-ref-filename="38retval">retval</a>);</td></tr>
<tr><th id="240">240</th><td></td></tr>
<tr><th id="241">241</th><td>    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="242">242</th><td>}</td></tr>
<tr><th id="243">243</th><td></td></tr>
<tr><th id="244">244</th><td></td></tr>
<tr><th id="245">245</th><td></td></tr>
<tr><th id="246">246</th><td><i>/* A few generic thoughts on error handling, in particular the</i></td></tr>
<tr><th id="247">247</th><td><i>   printing of unexpected characters that we find in the RCS file</i></td></tr>
<tr><th id="248">248</th><td><i>   (that is, why we use '\x%x' rather than %c or some such).</i></td></tr>
<tr><th id="249">249</th><td><i></i></td></tr>
<tr><th id="250">250</th><td><i>   * Avoiding %c means we don't have to worry about what is printable</i></td></tr>
<tr><th id="251">251</th><td><i>   and other such stuff.  In error handling, often better to keep it</i></td></tr>
<tr><th id="252">252</th><td><i>   simple.</i></td></tr>
<tr><th id="253">253</th><td><i></i></td></tr>
<tr><th id="254">254</th><td><i>   * Hex rather than decimal or octal because character set standards</i></td></tr>
<tr><th id="255">255</th><td><i>   tend to use hex.</i></td></tr>
<tr><th id="256">256</th><td><i></i></td></tr>
<tr><th id="257">257</th><td><i>   * Saying "character 0x%x" might make it sound like we are printing</i></td></tr>
<tr><th id="258">258</th><td><i>   a file offset.  So we use '\x%x'.</i></td></tr>
<tr><th id="259">259</th><td><i></i></td></tr>
<tr><th id="260">260</th><td><i>   * Would be nice to print the offset within the file, but I can</i></td></tr>
<tr><th id="261">261</th><td><i>   imagine various portability hassles (in particular, whether</i></td></tr>
<tr><th id="262">262</th><td><i>   unsigned long is always big enough to hold file offsets).  */</i></td></tr>
<tr><th id="263">263</th><td></td></tr>
<tr><th id="264">264</th><td><i>/* Parse an rcsfile given a user file name and a repository.  If there is</i></td></tr>
<tr><th id="265">265</th><td><i>   an error, we print an error message and return NULL.  If the file</i></td></tr>
<tr><th id="266">266</th><td><i>   does not exist, we return NULL without printing anything (I'm not</i></td></tr>
<tr><th id="267">267</th><td><i>   sure this allows the caller to do anything reasonable, but it is</i></td></tr>
<tr><th id="268">268</th><td><i>   the current behavior).  */</i></td></tr>
<tr><th id="269">269</th><td><a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *</td></tr>
<tr><th id="270">270</th><td><dfn class="decl def fn" id="RCS_parse" title='RCS_parse' data-ref="RCS_parse" data-ref-filename="RCS_parse">RCS_parse</dfn> (<em>const</em> <em>char</em> *<dfn class="local col9 decl" id="39file" title='file' data-type='const char *' data-ref="39file" data-ref-filename="39file">file</dfn>, <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="40repos" title='repos' data-type='const char *' data-ref="40repos" data-ref-filename="40repos">repos</dfn>)</td></tr>
<tr><th id="271">271</th><td>{</td></tr>
<tr><th id="272">272</th><td>    <a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col1 decl" id="41rcs" title='rcs' data-type='RCSNode *' data-ref="41rcs" data-ref-filename="41rcs">rcs</dfn>;</td></tr>
<tr><th id="273">273</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col2 decl" id="42fp" title='fp' data-type='FILE *' data-ref="42fp" data-ref-filename="42fp">fp</dfn>;</td></tr>
<tr><th id="274">274</th><td>    <a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col3 decl" id="43retval" title='retval' data-type='RCSNode *' data-ref="43retval" data-ref-filename="43retval">retval</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="275">275</th><td>    <em>char</em> *<dfn class="local col4 decl" id="44rcsfile" title='rcsfile' data-type='char *' data-ref="44rcsfile" data-ref-filename="44rcsfile">rcsfile</dfn>;</td></tr>
<tr><th id="276">276</th><td>    <em>int</em> <dfn class="local col5 decl" id="45inattic" title='inattic' data-type='int' data-ref="45inattic" data-ref-filename="45inattic">inattic</dfn>;</td></tr>
<tr><th id="277">277</th><td></td></tr>
<tr><th id="278">278</th><td>    <i>/* We're creating a new RCSNode, so there is no hope of finding it</i></td></tr>
<tr><th id="279">279</th><td><i>       in the cache.  */</i></td></tr>
<tr><th id="280">280</th><td>    <a class="tu ref fn" href="#rcsbuf_cache_close" title='rcsbuf_cache_close' data-use='c' data-ref="rcsbuf_cache_close" data-ref-filename="rcsbuf_cache_close">rcsbuf_cache_close</a> ();</td></tr>
<tr><th id="281">281</th><td></td></tr>
<tr><th id="282">282</th><td>    <b>if</b> (!(<a class="local col4 ref" href="#44rcsfile" title='rcsfile' data-ref="44rcsfile" data-ref-filename="44rcsfile">rcsfile</a> = <a class="tu ref fn" href="#locate_rcs" title='locate_rcs' data-use='c' data-ref="locate_rcs" data-ref-filename="locate_rcs">locate_rcs</a> (<a class="local col0 ref" href="#40repos" title='repos' data-ref="40repos" data-ref-filename="40repos">repos</a>, <a class="local col9 ref" href="#39file" title='file' data-ref="39file" data-ref-filename="39file">file</a>, &amp;<a class="local col5 ref" href="#45inattic" title='inattic' data-ref="45inattic" data-ref-filename="45inattic">inattic</a>)))</td></tr>
<tr><th id="283">283</th><td>    {</td></tr>
<tr><th id="284">284</th><td>	<i>/* Handle the error cases */</i></td></tr>
<tr><th id="285">285</th><td>    }</td></tr>
<tr><th id="286">286</th><td>    <b>else</b> <b>if</b> ((<a class="local col2 ref" href="#42fp" title='fp' data-ref="42fp" data-ref-filename="42fp">fp</a> = <a class="macro" href="../lib/system.h.html#224" title="fopen" data-ref="_M/CVS_FOPEN">CVS_FOPEN</a> (<a class="local col4 ref" href="#44rcsfile" title='rcsfile' data-ref="44rcsfile" data-ref-filename="44rcsfile">rcsfile</a>, <a class="macro" href="../lib/system.h.html#337" title="(&quot;rb&quot;)" data-ref="_M/FOPEN_BINARY_READ">FOPEN_BINARY_READ</a>))) </td></tr>
<tr><th id="287">287</th><td>    {</td></tr>
<tr><th id="288">288</th><td>	<a class="local col1 ref" href="#41rcs" title='rcs' data-ref="41rcs" data-ref-filename="41rcs">rcs</a> = <a class="tu ref fn" href="#RCS_parsercsfile_i" title='RCS_parsercsfile_i' data-use='c' data-ref="RCS_parsercsfile_i" data-ref-filename="RCS_parsercsfile_i">RCS_parsercsfile_i</a> (<a class="local col2 ref" href="#42fp" title='fp' data-ref="42fp" data-ref-filename="42fp">fp</a>, <a class="local col4 ref" href="#44rcsfile" title='rcsfile' data-ref="44rcsfile" data-ref-filename="44rcsfile">rcsfile</a>);</td></tr>
<tr><th id="289">289</th><td>	<b>if</b> (<a class="local col1 ref" href="#41rcs" title='rcs' data-ref="41rcs" data-ref-filename="41rcs">rcs</a>)</td></tr>
<tr><th id="290">290</th><td>	{	</td></tr>
<tr><th id="291">291</th><td>	    <a class="local col1 ref" href="#41rcs" title='rcs' data-ref="41rcs" data-ref-filename="41rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> |= <a class="macro" href="rcs.h.html#42" title="0x1" data-ref="_M/VALID">VALID</a>;</td></tr>
<tr><th id="292">292</th><td>	    <b>if</b> (<a class="local col5 ref" href="#45inattic" title='inattic' data-ref="45inattic" data-ref-filename="45inattic">inattic</a>)</td></tr>
<tr><th id="293">293</th><td>		<a class="local col1 ref" href="#41rcs" title='rcs' data-ref="41rcs" data-ref-filename="41rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> |= <a class="macro" href="rcs.h.html#43" title="0x2" data-ref="_M/INATTIC">INATTIC</a>;</td></tr>
<tr><th id="294">294</th><td>	}</td></tr>
<tr><th id="295">295</th><td></td></tr>
<tr><th id="296">296</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col4 ref" href="#44rcsfile" title='rcsfile' data-ref="44rcsfile" data-ref-filename="44rcsfile">rcsfile</a>);</td></tr>
<tr><th id="297">297</th><td>	<a class="local col3 ref" href="#43retval" title='retval' data-ref="43retval" data-ref-filename="43retval">retval</a> = <a class="local col1 ref" href="#41rcs" title='rcs' data-ref="41rcs" data-ref-filename="41rcs">rcs</a>;</td></tr>
<tr><th id="298">298</th><td>    }</td></tr>
<tr><th id="299">299</th><td>    <b>else</b> <b>if</b> (!<a class="macro" href="../lib/system.h.html#139" title="(((*__errno())) == 2)" data-ref="_M/existence_error">existence_error</a> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>))</td></tr>
<tr><th id="300">300</th><td>    {</td></tr>
<tr><th id="301">301</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot open `%s'"</q>, <a class="local col4 ref" href="#44rcsfile" title='rcsfile' data-ref="44rcsfile" data-ref-filename="44rcsfile">rcsfile</a>);</td></tr>
<tr><th id="302">302</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col4 ref" href="#44rcsfile" title='rcsfile' data-ref="44rcsfile" data-ref-filename="44rcsfile">rcsfile</a>);</td></tr>
<tr><th id="303">303</th><td>    }</td></tr>
<tr><th id="304">304</th><td></td></tr>
<tr><th id="305">305</th><td>    <b>return</b> <a class="local col3 ref" href="#43retval" title='retval' data-ref="43retval" data-ref-filename="43retval">retval</a>;</td></tr>
<tr><th id="306">306</th><td>}</td></tr>
<tr><th id="307">307</th><td></td></tr>
<tr><th id="308">308</th><td></td></tr>
<tr><th id="309">309</th><td></td></tr>
<tr><th id="310">310</th><td><i>/*</i></td></tr>
<tr><th id="311">311</th><td><i> * Parse a specific rcsfile.</i></td></tr>
<tr><th id="312">312</th><td><i> */</i></td></tr>
<tr><th id="313">313</th><td><a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *</td></tr>
<tr><th id="314">314</th><td><dfn class="decl def fn" id="RCS_parsercsfile" title='RCS_parsercsfile' data-ref="RCS_parsercsfile" data-ref-filename="RCS_parsercsfile">RCS_parsercsfile</dfn> (<em>const</em> <em>char</em> *<dfn class="local col6 decl" id="46rcsfile" title='rcsfile' data-type='const char *' data-ref="46rcsfile" data-ref-filename="46rcsfile">rcsfile</dfn>)</td></tr>
<tr><th id="315">315</th><td>{</td></tr>
<tr><th id="316">316</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col7 decl" id="47fp" title='fp' data-type='FILE *' data-ref="47fp" data-ref-filename="47fp">fp</dfn>;</td></tr>
<tr><th id="317">317</th><td>    <a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col8 decl" id="48rcs" title='rcs' data-type='RCSNode *' data-ref="48rcs" data-ref-filename="48rcs">rcs</dfn>;</td></tr>
<tr><th id="318">318</th><td></td></tr>
<tr><th id="319">319</th><td>    <i>/* We're creating a new RCSNode, so there is no hope of finding it</i></td></tr>
<tr><th id="320">320</th><td><i>       in the cache.  */</i></td></tr>
<tr><th id="321">321</th><td>    <a class="tu ref fn" href="#rcsbuf_cache_close" title='rcsbuf_cache_close' data-use='c' data-ref="rcsbuf_cache_close" data-ref-filename="rcsbuf_cache_close">rcsbuf_cache_close</a> ();</td></tr>
<tr><th id="322">322</th><td></td></tr>
<tr><th id="323">323</th><td>    <i>/* open the rcsfile */</i></td></tr>
<tr><th id="324">324</th><td>    <b>if</b> ((<a class="local col7 ref" href="#47fp" title='fp' data-ref="47fp" data-ref-filename="47fp">fp</a> = <a class="macro" href="../lib/system.h.html#224" title="fopen" data-ref="_M/CVS_FOPEN">CVS_FOPEN</a> (<a class="local col6 ref" href="#46rcsfile" title='rcsfile' data-ref="46rcsfile" data-ref-filename="46rcsfile">rcsfile</a>, <a class="macro" href="../lib/system.h.html#337" title="(&quot;rb&quot;)" data-ref="_M/FOPEN_BINARY_READ">FOPEN_BINARY_READ</a>)) == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="325">325</th><td>    {</td></tr>
<tr><th id="326">326</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"Couldn't open rcs file `%s'"</q>, <a class="local col6 ref" href="#46rcsfile" title='rcsfile' data-ref="46rcsfile" data-ref-filename="46rcsfile">rcsfile</a>);</td></tr>
<tr><th id="327">327</th><td>	<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="328">328</th><td>    }</td></tr>
<tr><th id="329">329</th><td></td></tr>
<tr><th id="330">330</th><td>    <a class="local col8 ref" href="#48rcs" title='rcs' data-ref="48rcs" data-ref-filename="48rcs">rcs</a> = <a class="tu ref fn" href="#RCS_parsercsfile_i" title='RCS_parsercsfile_i' data-use='c' data-ref="RCS_parsercsfile_i" data-ref-filename="RCS_parsercsfile_i">RCS_parsercsfile_i</a> (<a class="local col7 ref" href="#47fp" title='fp' data-ref="47fp" data-ref-filename="47fp">fp</a>, <a class="local col6 ref" href="#46rcsfile" title='rcsfile' data-ref="46rcsfile" data-ref-filename="46rcsfile">rcsfile</a>);</td></tr>
<tr><th id="331">331</th><td></td></tr>
<tr><th id="332">332</th><td>    <b>return</b> <a class="local col8 ref" href="#48rcs" title='rcs' data-ref="48rcs" data-ref-filename="48rcs">rcs</a>;</td></tr>
<tr><th id="333">333</th><td>}</td></tr>
<tr><th id="334">334</th><td></td></tr>
<tr><th id="335">335</th><td></td></tr>
<tr><th id="336">336</th><td></td></tr>
<tr><th id="337">337</th><td><i  data-doc="RCS_parsercsfile_i">/*</i></td></tr>
<tr><th id="338">338</th><td><i  data-doc="RCS_parsercsfile_i"> */</i> </td></tr>
<tr><th id="339">339</th><td><em>static</em> <a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *</td></tr>
<tr><th id="340">340</th><td><dfn class="tu decl def fn" id="RCS_parsercsfile_i" title='RCS_parsercsfile_i' data-type='RCSNode * RCS_parsercsfile_i(FILE * fp, const char * rcsfile)' data-ref="RCS_parsercsfile_i" data-ref-filename="RCS_parsercsfile_i">RCS_parsercsfile_i</dfn> (<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col9 decl" id="49fp" title='fp' data-type='FILE *' data-ref="49fp" data-ref-filename="49fp">fp</dfn>, <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="50rcsfile" title='rcsfile' data-type='const char *' data-ref="50rcsfile" data-ref-filename="50rcsfile">rcsfile</dfn>)</td></tr>
<tr><th id="341">341</th><td>{</td></tr>
<tr><th id="342">342</th><td>    <a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col1 decl" id="51rdata" title='rdata' data-type='RCSNode *' data-ref="51rdata" data-ref-filename="51rdata">rdata</dfn>;</td></tr>
<tr><th id="343">343</th><td>    <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> <dfn class="local col2 decl" id="52rcsbuf" title='rcsbuf' data-type='struct rcsbuffer' data-ref="52rcsbuf" data-ref-filename="52rcsbuf">rcsbuf</dfn>;</td></tr>
<tr><th id="344">344</th><td>    <em>char</em> *<dfn class="local col3 decl" id="53key" title='key' data-type='char *' data-ref="53key" data-ref-filename="53key">key</dfn>, *<dfn class="local col4 decl" id="54value" title='value' data-type='char *' data-ref="54value" data-ref-filename="54value">value</dfn>;</td></tr>
<tr><th id="345">345</th><td></td></tr>
<tr><th id="346">346</th><td>    <i>/* make a node */</i></td></tr>
<tr><th id="347">347</th><td>    <a class="local col1 ref" href="#51rdata" title='rdata' data-ref="51rdata" data-ref-filename="51rdata">rdata</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<b>sizeof</b> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a>));</td></tr>
<tr><th id="348">348</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memset" title='memset' data-ref="memset" data-ref-filename="memset">memset</a> (<a class="local col1 ref" href="#51rdata" title='rdata' data-ref="51rdata" data-ref-filename="51rdata">rdata</a>, <var>0</var>, <b>sizeof</b> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a>));</td></tr>
<tr><th id="349">349</th><td>    <a class="local col1 ref" href="#51rdata" title='rdata' data-ref="51rdata" data-ref-filename="51rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::refcount" title='rcsnode::refcount' data-ref="rcsnode::refcount" data-ref-filename="rcsnode..refcount">refcount</a> = <var>1</var>;</td></tr>
<tr><th id="350">350</th><td>    <a class="local col1 ref" href="#51rdata" title='rdata' data-ref="51rdata" data-ref-filename="51rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col0 ref" href="#50rcsfile" title='rcsfile' data-ref="50rcsfile" data-ref-filename="50rcsfile">rcsfile</a>);</td></tr>
<tr><th id="351">351</th><td>    <a class="local col1 ref" href="#51rdata" title='rdata' data-ref="51rdata" data-ref-filename="51rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="ref fn" href="root.h.html#primary_root_inverse_translate" title='primary_root_inverse_translate' data-ref="primary_root_inverse_translate" data-ref-filename="primary_root_inverse_translate">primary_root_inverse_translate</a> (<a class="local col0 ref" href="#50rcsfile" title='rcsfile' data-ref="50rcsfile" data-ref-filename="50rcsfile">rcsfile</a>));</td></tr>
<tr><th id="352">352</th><td></td></tr>
<tr><th id="353">353</th><td>    <i>/* Process HEAD, BRANCH, and EXPAND keywords from the RCS header.</i></td></tr>
<tr><th id="354">354</th><td><i></i></td></tr>
<tr><th id="355">355</th><td><i>       Most cvs operations on the main branch don't need any more</i></td></tr>
<tr><th id="356">356</th><td><i>       information.  Those that do call RCS_reparsercsfile to parse</i></td></tr>
<tr><th id="357">357</th><td><i>       the rest of the header and the deltas.  */</i></td></tr>
<tr><th id="358">358</th><td></td></tr>
<tr><th id="359">359</th><td>    <a class="tu ref fn" href="#rcsbuf_open" title='rcsbuf_open' data-use='c' data-ref="rcsbuf_open" data-ref-filename="rcsbuf_open">rcsbuf_open</a> (&amp;<a class="local col2 ref" href="#52rcsbuf" title='rcsbuf' data-ref="52rcsbuf" data-ref-filename="52rcsbuf">rcsbuf</a>, <a class="local col9 ref" href="#49fp" title='fp' data-ref="49fp" data-ref-filename="49fp">fp</a>, <a class="local col0 ref" href="#50rcsfile" title='rcsfile' data-ref="50rcsfile" data-ref-filename="50rcsfile">rcsfile</a>, <var>0</var>);</td></tr>
<tr><th id="360">360</th><td></td></tr>
<tr><th id="361">361</th><td>    <b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (&amp;<a class="local col2 ref" href="#52rcsbuf" title='rcsbuf' data-ref="52rcsbuf" data-ref-filename="52rcsbuf">rcsbuf</a>, &amp;<a class="local col3 ref" href="#53key" title='key' data-ref="53key" data-ref-filename="53key">key</a>, &amp;<a class="local col4 ref" href="#54value" title='value' data-ref="54value" data-ref-filename="54value">value</a>))</td></tr>
<tr><th id="362">362</th><td>	<b>goto</b> <a class="lbl" href="#55l_error" data-ref="55l_error" data-ref-filename="55l_error">l_error</a>;</td></tr>
<tr><th id="363">363</th><td>    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;desc&quot;) &amp;&amp; strcmp ((key), (&quot;desc&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col3 ref" href="#53key" title='key' data-ref="53key" data-ref-filename="53key">key</a>, <a class="macro" href="rcs.h.html#27" title="&quot;desc&quot;" data-ref="_M/RCSDESC">RCSDESC</a>))</td></tr>
<tr><th id="364">364</th><td>	<b>goto</b> <a class="lbl" href="#55l_error" data-ref="55l_error" data-ref-filename="55l_error">l_error</a>;</td></tr>
<tr><th id="365">365</th><td></td></tr>
<tr><th id="366">366</th><td>    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(&quot;head&quot;) == *(char *)(key) &amp;&amp; strcmp ((&quot;head&quot;), (key)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="macro" href="rcs.h.html#23" title="&quot;head&quot;" data-ref="_M/RCSHEAD">RCSHEAD</a>, <a class="local col3 ref" href="#53key" title='key' data-ref="53key" data-ref-filename="53key">key</a>) &amp;&amp; <a class="local col4 ref" href="#54value" title='value' data-ref="54value" data-ref-filename="54value">value</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="367">367</th><td>	<a class="local col1 ref" href="#51rdata" title='rdata' data-ref="51rdata" data-ref-filename="51rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (&amp;<a class="local col2 ref" href="#52rcsbuf" title='rcsbuf' data-ref="52rcsbuf" data-ref-filename="52rcsbuf">rcsbuf</a>, <a class="local col4 ref" href="#54value" title='value' data-ref="54value" data-ref-filename="54value">value</a>, <var>0</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="368">368</th><td></td></tr>
<tr><th id="369">369</th><td>    <b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (&amp;<a class="local col2 ref" href="#52rcsbuf" title='rcsbuf' data-ref="52rcsbuf" data-ref-filename="52rcsbuf">rcsbuf</a>, &amp;<a class="local col3 ref" href="#53key" title='key' data-ref="53key" data-ref-filename="53key">key</a>, &amp;<a class="local col4 ref" href="#54value" title='value' data-ref="54value" data-ref-filename="54value">value</a>))</td></tr>
<tr><th id="370">370</th><td>	<b>goto</b> <a class="lbl" href="#55l_error" data-ref="55l_error" data-ref-filename="55l_error">l_error</a>;</td></tr>
<tr><th id="371">371</th><td>    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;desc&quot;) &amp;&amp; strcmp ((key), (&quot;desc&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col3 ref" href="#53key" title='key' data-ref="53key" data-ref-filename="53key">key</a>, <a class="macro" href="rcs.h.html#27" title="&quot;desc&quot;" data-ref="_M/RCSDESC">RCSDESC</a>))</td></tr>
<tr><th id="372">372</th><td>	<b>goto</b> <a class="lbl" href="#55l_error" data-ref="55l_error" data-ref-filename="55l_error">l_error</a>;</td></tr>
<tr><th id="373">373</th><td></td></tr>
<tr><th id="374">374</th><td>    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(&quot;branch&quot;) == *(char *)(key) &amp;&amp; strcmp ((&quot;branch&quot;), (key)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="macro" href="rcs.h.html#24" title="&quot;branch&quot;" data-ref="_M/RCSBRANCH">RCSBRANCH</a>, <a class="local col3 ref" href="#53key" title='key' data-ref="53key" data-ref-filename="53key">key</a>) &amp;&amp; <a class="local col4 ref" href="#54value" title='value' data-ref="54value" data-ref-filename="54value">value</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="375">375</th><td>    {</td></tr>
<tr><th id="376">376</th><td>	<em>char</em> *<dfn class="local col6 decl" id="56cp" title='cp' data-type='char *' data-ref="56cp" data-ref-filename="56cp">cp</dfn>;</td></tr>
<tr><th id="377">377</th><td></td></tr>
<tr><th id="378">378</th><td>	<a class="local col1 ref" href="#51rdata" title='rdata' data-ref="51rdata" data-ref-filename="51rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (&amp;<a class="local col2 ref" href="#52rcsbuf" title='rcsbuf' data-ref="52rcsbuf" data-ref-filename="52rcsbuf">rcsbuf</a>, <a class="local col4 ref" href="#54value" title='value' data-ref="54value" data-ref-filename="54value">value</a>, <var>0</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="379">379</th><td>	<b>if</b> ((<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col1 ref" href="#51rdata" title='rdata' data-ref="51rdata" data-ref-filename="51rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a>) &amp; <var>1</var>) != <var>0</var>)</td></tr>
<tr><th id="380">380</th><td>	{</td></tr>
<tr><th id="381">381</th><td>	    <i>/* turn it into a branch if it's a revision */</i></td></tr>
<tr><th id="382">382</th><td>	    <a class="local col6 ref" href="#56cp" title='cp' data-ref="56cp" data-ref-filename="56cp">cp</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col1 ref" href="#51rdata" title='rdata' data-ref="51rdata" data-ref-filename="51rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="383">383</th><td>	    *<a class="local col6 ref" href="#56cp" title='cp' data-ref="56cp" data-ref-filename="56cp">cp</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="384">384</th><td>	}</td></tr>
<tr><th id="385">385</th><td>    }</td></tr>
<tr><th id="386">386</th><td></td></tr>
<tr><th id="387">387</th><td>    <i>/* Look ahead for expand, stopping when we see desc or a revision</i></td></tr>
<tr><th id="388">388</th><td><i>       number.  */</i></td></tr>
<tr><th id="389">389</th><td>    <b>while</b> (<var>1</var>)</td></tr>
<tr><th id="390">390</th><td>    {</td></tr>
<tr><th id="391">391</th><td>	<em>char</em> *<dfn class="local col7 decl" id="57cp" title='cp' data-type='char *' data-ref="57cp" data-ref-filename="57cp">cp</dfn>;</td></tr>
<tr><th id="392">392</th><td></td></tr>
<tr><th id="393">393</th><td>	<b>if</b> (<a class="macro" href="#138" title="(*(char *)(&quot;expand&quot;) == *(char *)(key) &amp;&amp; strcmp ((&quot;expand&quot;), (key)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="macro" href="rcs.h.html#28" title="&quot;expand&quot;" data-ref="_M/RCSEXPAND">RCSEXPAND</a>, <a class="local col3 ref" href="#53key" title='key' data-ref="53key" data-ref-filename="53key">key</a>))</td></tr>
<tr><th id="394">394</th><td>	{</td></tr>
<tr><th id="395">395</th><td>	    <a class="local col1 ref" href="#51rdata" title='rdata' data-ref="51rdata" data-ref-filename="51rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (&amp;<a class="local col2 ref" href="#52rcsbuf" title='rcsbuf' data-ref="52rcsbuf" data-ref-filename="52rcsbuf">rcsbuf</a>, <a class="local col4 ref" href="#54value" title='value' data-ref="54value" data-ref-filename="54value">value</a>, <var>0</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="396">396</th><td>	    <b>break</b>;</td></tr>
<tr><th id="397">397</th><td>	}</td></tr>
<tr><th id="398">398</th><td></td></tr>
<tr><th id="399">399</th><td>	<b>for</b> (<a class="local col7 ref" href="#57cp" title='cp' data-ref="57cp" data-ref-filename="57cp">cp</a> = <a class="local col3 ref" href="#53key" title='key' data-ref="53key" data-ref-filename="53key">key</a>;</td></tr>
<tr><th id="400">400</th><td>	     (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char)*cp)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>)*<a class="local col7 ref" href="#57cp" title='cp' data-ref="57cp" data-ref-filename="57cp">cp</a>) || *<a class="local col7 ref" href="#57cp" title='cp' data-ref="57cp" data-ref-filename="57cp">cp</a> == <kbd>'.'</kbd>) &amp;&amp; *<a class="local col7 ref" href="#57cp" title='cp' data-ref="57cp" data-ref-filename="57cp">cp</a> != <kbd>'\0'</kbd>;</td></tr>
<tr><th id="401">401</th><td>	     <a class="local col7 ref" href="#57cp" title='cp' data-ref="57cp" data-ref-filename="57cp">cp</a>++)</td></tr>
<tr><th id="402">402</th><td>	    <i>/* do nothing */</i> ;</td></tr>
<tr><th id="403">403</th><td>	<b>if</b> (*<a class="local col7 ref" href="#57cp" title='cp' data-ref="57cp" data-ref-filename="57cp">cp</a> == <kbd>'\0'</kbd>)</td></tr>
<tr><th id="404">404</th><td>	    <b>break</b>;</td></tr>
<tr><th id="405">405</th><td></td></tr>
<tr><th id="406">406</th><td>	<b>if</b> (<a class="macro" href="#138" title="(*(char *)(&quot;desc&quot;) == *(char *)(key) &amp;&amp; strcmp ((&quot;desc&quot;), (key)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="macro" href="rcs.h.html#27" title="&quot;desc&quot;" data-ref="_M/RCSDESC">RCSDESC</a>, <a class="local col3 ref" href="#53key" title='key' data-ref="53key" data-ref-filename="53key">key</a>))</td></tr>
<tr><th id="407">407</th><td>	    <b>break</b>;</td></tr>
<tr><th id="408">408</th><td></td></tr>
<tr><th id="409">409</th><td>	<b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (&amp;<a class="local col2 ref" href="#52rcsbuf" title='rcsbuf' data-ref="52rcsbuf" data-ref-filename="52rcsbuf">rcsbuf</a>, &amp;<a class="local col3 ref" href="#53key" title='key' data-ref="53key" data-ref-filename="53key">key</a>, &amp;<a class="local col4 ref" href="#54value" title='value' data-ref="54value" data-ref-filename="54value">value</a>))</td></tr>
<tr><th id="410">410</th><td>	    <b>break</b>;</td></tr>
<tr><th id="411">411</th><td>    }</td></tr>
<tr><th id="412">412</th><td></td></tr>
<tr><th id="413">413</th><td>    <a class="local col1 ref" href="#51rdata" title='rdata' data-ref="51rdata" data-ref-filename="51rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> |= <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>;</td></tr>
<tr><th id="414">414</th><td></td></tr>
<tr><th id="415">415</th><td>    <a class="tu ref fn" href="#rcsbuf_cache" title='rcsbuf_cache' data-use='c' data-ref="rcsbuf_cache" data-ref-filename="rcsbuf_cache">rcsbuf_cache</a> (<a class="local col1 ref" href="#51rdata" title='rdata' data-ref="51rdata" data-ref-filename="51rdata">rdata</a>, &amp;<a class="local col2 ref" href="#52rcsbuf" title='rcsbuf' data-ref="52rcsbuf" data-ref-filename="52rcsbuf">rcsbuf</a>);</td></tr>
<tr><th id="416">416</th><td></td></tr>
<tr><th id="417">417</th><td>    <b>return</b> <a class="local col1 ref" href="#51rdata" title='rdata' data-ref="51rdata" data-ref-filename="51rdata">rdata</a>;</td></tr>
<tr><th id="418">418</th><td></td></tr>
<tr><th id="419">419</th><td><dfn class="lbl" id="55l_error" data-ref="55l_error" data-ref-filename="55l_error">l_error</dfn>:</td></tr>
<tr><th id="420">420</th><td>    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"`%s' does not appear to be a valid rcs file"</q>,</td></tr>
<tr><th id="421">421</th><td>	   <a class="local col0 ref" href="#50rcsfile" title='rcsfile' data-ref="50rcsfile" data-ref-filename="50rcsfile">rcsfile</a>);</td></tr>
<tr><th id="422">422</th><td>    <a class="tu ref fn" href="#rcsbuf_close" title='rcsbuf_close' data-use='c' data-ref="rcsbuf_close" data-ref-filename="rcsbuf_close">rcsbuf_close</a> (&amp;<a class="local col2 ref" href="#52rcsbuf" title='rcsbuf' data-ref="52rcsbuf" data-ref-filename="52rcsbuf">rcsbuf</a>);</td></tr>
<tr><th id="423">423</th><td>    <a class="ref fn" href="#freercsnode" title='freercsnode' data-ref="freercsnode" data-ref-filename="freercsnode">freercsnode</a> (&amp;<a class="local col1 ref" href="#51rdata" title='rdata' data-ref="51rdata" data-ref-filename="51rdata">rdata</a>);</td></tr>
<tr><th id="424">424</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fclose" title='fclose' data-ref="fclose" data-ref-filename="fclose">fclose</a> (<a class="local col9 ref" href="#49fp" title='fp' data-ref="49fp" data-ref-filename="49fp">fp</a>);</td></tr>
<tr><th id="425">425</th><td>    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="426">426</th><td>}</td></tr>
<tr><th id="427">427</th><td></td></tr>
<tr><th id="428">428</th><td></td></tr>
<tr><th id="429">429</th><td></td></tr>
<tr><th id="430">430</th><td><i>/* Do the real work of parsing an RCS file.</i></td></tr>
<tr><th id="431">431</th><td><i></i></td></tr>
<tr><th id="432">432</th><td><i>   On error, die with a fatal error; if it returns at all it was successful.</i></td></tr>
<tr><th id="433">433</th><td><i></i></td></tr>
<tr><th id="434">434</th><td><i>   If PFP is NULL, close the file when done.  Otherwise, leave it open</i></td></tr>
<tr><th id="435">435</th><td><i>   and store the FILE * in *PFP.  */</i></td></tr>
<tr><th id="436">436</th><td><em>void</em></td></tr>
<tr><th id="437">437</th><td><dfn class="decl def fn" id="RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col8 decl" id="58rdata" title='rdata' data-type='RCSNode *' data-ref="58rdata" data-ref-filename="58rdata">rdata</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> **<dfn class="local col9 decl" id="59pfp" title='pfp' data-type='FILE **' data-ref="59pfp" data-ref-filename="59pfp">pfp</dfn>, <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col0 decl" id="60rcsbufp" title='rcsbufp' data-type='struct rcsbuffer *' data-ref="60rcsbufp" data-ref-filename="60rcsbufp">rcsbufp</dfn>)</td></tr>
<tr><th id="438">438</th><td>{</td></tr>
<tr><th id="439">439</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col1 decl" id="61fp" title='fp' data-type='FILE *' data-ref="61fp" data-ref-filename="61fp">fp</dfn>;</td></tr>
<tr><th id="440">440</th><td>    <em>char</em> *<dfn class="local col2 decl" id="62rcsfile" title='rcsfile' data-type='char *' data-ref="62rcsfile" data-ref-filename="62rcsfile">rcsfile</dfn>;</td></tr>
<tr><th id="441">441</th><td>    <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> <dfn class="local col3 decl" id="63rcsbuf" title='rcsbuf' data-type='struct rcsbuffer' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</dfn>;</td></tr>
<tr><th id="442">442</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col4 decl" id="64q" title='q' data-type='Node *' data-ref="64q" data-ref-filename="64q">q</dfn>, *<dfn class="local col5 decl" id="65kv" title='kv' data-type='Node *' data-ref="65kv" data-ref-filename="65kv">kv</dfn>;</td></tr>
<tr><th id="443">443</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col6 decl" id="66vnode" title='vnode' data-type='RCSVers *' data-ref="66vnode" data-ref-filename="66vnode">vnode</dfn>;</td></tr>
<tr><th id="444">444</th><td>    <em>int</em> <dfn class="local col7 decl" id="67gotkey" title='gotkey' data-type='int' data-ref="67gotkey" data-ref-filename="67gotkey">gotkey</dfn>;</td></tr>
<tr><th id="445">445</th><td>    <em>char</em> *<dfn class="local col8 decl" id="68cp" title='cp' data-type='char *' data-ref="68cp" data-ref-filename="68cp">cp</dfn>;</td></tr>
<tr><th id="446">446</th><td>    <em>char</em> *<dfn class="local col9 decl" id="69key" title='key' data-type='char *' data-ref="69key" data-ref-filename="69key">key</dfn>, *<dfn class="local col0 decl" id="70value" title='value' data-type='char *' data-ref="70value" data-ref-filename="70value">value</dfn>;</td></tr>
<tr><th id="447">447</th><td></td></tr>
<tr><th id="448">448</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rdata != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 448, __func__, &quot;rdata != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="449">449</th><td>    <a class="local col2 ref" href="#62rcsfile" title='rcsfile' data-ref="62rcsfile" data-ref-filename="62rcsfile">rcsfile</a> = <a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>;</td></tr>
<tr><th id="450">450</th><td></td></tr>
<tr><th id="451">451</th><td>    <a class="tu ref fn" href="#rcsbuf_cache_open" title='rcsbuf_cache_open' data-use='c' data-ref="rcsbuf_cache_open" data-ref-filename="rcsbuf_cache_open">rcsbuf_cache_open</a> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>, <var>0</var>, &amp;<a class="local col1 ref" href="#61fp" title='fp' data-ref="61fp" data-ref-filename="61fp">fp</a>, &amp;<a class="local col3 ref" href="#63rcsbuf" title='rcsbuf' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</a>);</td></tr>
<tr><th id="452">452</th><td></td></tr>
<tr><th id="453">453</th><td>    <i>/* make a node */</i></td></tr>
<tr><th id="454">454</th><td>    <i>/* This probably shouldn't be done until later: if a file has an</i></td></tr>
<tr><th id="455">455</th><td><i>       empty revision tree (which is permissible), rdata-&gt;versions</i></td></tr>
<tr><th id="456">456</th><td><i>       should be NULL. -twp */</i></td></tr>
<tr><th id="457">457</th><td>    <a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a> = <a class="ref fn" href="hash.h.html#getlist" title='getlist' data-ref="getlist" data-ref-filename="getlist">getlist</a> ();</td></tr>
<tr><th id="458">458</th><td></td></tr>
<tr><th id="459">459</th><td>    <i>/*</i></td></tr>
<tr><th id="460">460</th><td><i>     * process all the special header information, break out when we get to</i></td></tr>
<tr><th id="461">461</th><td><i>     * the first revision delta</i></td></tr>
<tr><th id="462">462</th><td><i>     */</i></td></tr>
<tr><th id="463">463</th><td>    <a class="local col7 ref" href="#67gotkey" title='gotkey' data-ref="67gotkey" data-ref-filename="67gotkey">gotkey</a> = <var>0</var>;</td></tr>
<tr><th id="464">464</th><td>    <b>for</b> (;;)</td></tr>
<tr><th id="465">465</th><td>    {</td></tr>
<tr><th id="466">466</th><td>	<i>/* get the next key/value pair */</i></td></tr>
<tr><th id="467">467</th><td>	<b>if</b> (!<a class="local col7 ref" href="#67gotkey" title='gotkey' data-ref="67gotkey" data-ref-filename="67gotkey">gotkey</a>)</td></tr>
<tr><th id="468">468</th><td>	{</td></tr>
<tr><th id="469">469</th><td>	    <b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (&amp;<a class="local col3 ref" href="#63rcsbuf" title='rcsbuf' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</a>, &amp;<a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, &amp;<a class="local col0 ref" href="#70value" title='value' data-ref="70value" data-ref-filename="70value">value</a>))</td></tr>
<tr><th id="470">470</th><td>	    {</td></tr>
<tr><th id="471">471</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"`%s' does not appear to be a valid rcs file"</q>,</td></tr>
<tr><th id="472">472</th><td>		       <a class="local col2 ref" href="#62rcsfile" title='rcsfile' data-ref="62rcsfile" data-ref-filename="62rcsfile">rcsfile</a>);</td></tr>
<tr><th id="473">473</th><td>	    }</td></tr>
<tr><th id="474">474</th><td>	}</td></tr>
<tr><th id="475">475</th><td></td></tr>
<tr><th id="476">476</th><td>	<a class="local col7 ref" href="#67gotkey" title='gotkey' data-ref="67gotkey" data-ref-filename="67gotkey">gotkey</a> = <var>0</var>;</td></tr>
<tr><th id="477">477</th><td></td></tr>
<tr><th id="478">478</th><td>	<i>/* Skip head, branch and expand tags; we already have them. */</i></td></tr>
<tr><th id="479">479</th><td>	<b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;head&quot;) &amp;&amp; strcmp ((key), (&quot;head&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, <a class="macro" href="rcs.h.html#23" title="&quot;head&quot;" data-ref="_M/RCSHEAD">RCSHEAD</a>)</td></tr>
<tr><th id="480">480</th><td>	    || <a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;branch&quot;) &amp;&amp; strcmp ((key), (&quot;branch&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, <a class="macro" href="rcs.h.html#24" title="&quot;branch&quot;" data-ref="_M/RCSBRANCH">RCSBRANCH</a>)</td></tr>
<tr><th id="481">481</th><td>	    || <a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;expand&quot;) &amp;&amp; strcmp ((key), (&quot;expand&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, <a class="macro" href="rcs.h.html#28" title="&quot;expand&quot;" data-ref="_M/RCSEXPAND">RCSEXPAND</a>))</td></tr>
<tr><th id="482">482</th><td>	{</td></tr>
<tr><th id="483">483</th><td>	    <b>continue</b>;</td></tr>
<tr><th id="484">484</th><td>	}</td></tr>
<tr><th id="485">485</th><td></td></tr>
<tr><th id="486">486</th><td>	<b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;access&quot;) &amp;&amp; strcmp ((key), (&quot;access&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, <q>"access"</q>))</td></tr>
<tr><th id="487">487</th><td>	{</td></tr>
<tr><th id="488">488</th><td>	    <b>if</b> (<a class="local col0 ref" href="#70value" title='value' data-ref="70value" data-ref-filename="70value">value</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="489">489</th><td>	    {</td></tr>
<tr><th id="490">490</th><td>		<i>/* We pass the POLISH parameter as 1 because</i></td></tr>
<tr><th id="491">491</th><td><i>                   RCS_addaccess expects nothing but spaces.  FIXME:</i></td></tr>
<tr><th id="492">492</th><td><i>                   It would be easy and more efficient to change</i></td></tr>
<tr><th id="493">493</th><td><i>                   RCS_addaccess.  */</i></td></tr>
<tr><th id="494">494</th><td>		<b>if</b> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a>)</td></tr>
<tr><th id="495">495</th><td>		{</td></tr>
<tr><th id="496">496</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="497">497</th><td>		           <q>"Duplicate `access' keyword found in RCS file."</q>);</td></tr>
<tr><th id="498">498</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a>);</td></tr>
<tr><th id="499">499</th><td>		}</td></tr>
<tr><th id="500">500</th><td>		<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (&amp;<a class="local col3 ref" href="#63rcsbuf" title='rcsbuf' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#70value" title='value' data-ref="70value" data-ref-filename="70value">value</a>, <var>1</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="501">501</th><td>	    }</td></tr>
<tr><th id="502">502</th><td>	    <b>continue</b>;</td></tr>
<tr><th id="503">503</th><td>	}</td></tr>
<tr><th id="504">504</th><td></td></tr>
<tr><th id="505">505</th><td>	<i>/* We always save lock information, so that we can handle</i></td></tr>
<tr><th id="506">506</th><td><i>           -kkvl correctly when checking out a file. */</i></td></tr>
<tr><th id="507">507</th><td>	<b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;locks&quot;) &amp;&amp; strcmp ((key), (&quot;locks&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, <q>"locks"</q>))</td></tr>
<tr><th id="508">508</th><td>	{</td></tr>
<tr><th id="509">509</th><td>	    <b>if</b> (<a class="local col0 ref" href="#70value" title='value' data-ref="70value" data-ref-filename="70value">value</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="510">510</th><td>	    {</td></tr>
<tr><th id="511">511</th><td>		<b>if</b> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks_data" title='rcsnode::locks_data' data-ref="rcsnode::locks_data" data-ref-filename="rcsnode..locks_data">locks_data</a>)</td></tr>
<tr><th id="512">512</th><td>		{</td></tr>
<tr><th id="513">513</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="514">514</th><td>		           <q>"Duplicate `locks' keyword found in RCS file."</q>);</td></tr>
<tr><th id="515">515</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks_data" title='rcsnode::locks_data' data-ref="rcsnode::locks_data" data-ref-filename="rcsnode..locks_data">locks_data</a>);</td></tr>
<tr><th id="516">516</th><td>		}</td></tr>
<tr><th id="517">517</th><td>		<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks_data" title='rcsnode::locks_data' data-ref="rcsnode::locks_data" data-ref-filename="rcsnode..locks_data">locks_data</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (&amp;<a class="local col3 ref" href="#63rcsbuf" title='rcsbuf' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#70value" title='value' data-ref="70value" data-ref-filename="70value">value</a>, <var>0</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="518">518</th><td>	    }</td></tr>
<tr><th id="519">519</th><td>	    <b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (&amp;<a class="local col3 ref" href="#63rcsbuf" title='rcsbuf' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</a>, &amp;<a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, &amp;<a class="local col0 ref" href="#70value" title='value' data-ref="70value" data-ref-filename="70value">value</a>))</td></tr>
<tr><th id="520">520</th><td>	    {</td></tr>
<tr><th id="521">521</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"premature end of file reading %s"</q>, <a class="local col2 ref" href="#62rcsfile" title='rcsfile' data-ref="62rcsfile" data-ref-filename="62rcsfile">rcsfile</a>);</td></tr>
<tr><th id="522">522</th><td>	    }</td></tr>
<tr><th id="523">523</th><td>	    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;strict&quot;) &amp;&amp; strcmp ((key), (&quot;strict&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, <q>"strict"</q>) &amp;&amp; <a class="local col0 ref" href="#70value" title='value' data-ref="70value" data-ref-filename="70value">value</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="524">524</th><td>	    {</td></tr>
<tr><th id="525">525</th><td>		<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::strict_locks" title='rcsnode::strict_locks' data-ref="rcsnode::strict_locks" data-ref-filename="rcsnode..strict_locks">strict_locks</a> = <var>1</var>;</td></tr>
<tr><th id="526">526</th><td>	    }</td></tr>
<tr><th id="527">527</th><td>	    <b>else</b></td></tr>
<tr><th id="528">528</th><td>		<a class="local col7 ref" href="#67gotkey" title='gotkey' data-ref="67gotkey" data-ref-filename="67gotkey">gotkey</a> = <var>1</var>;</td></tr>
<tr><th id="529">529</th><td>	    <b>continue</b>;</td></tr>
<tr><th id="530">530</th><td>	}</td></tr>
<tr><th id="531">531</th><td></td></tr>
<tr><th id="532">532</th><td>	<b>if</b> (<a class="macro" href="#138" title="(*(char *)(&quot;symbols&quot;) == *(char *)(key) &amp;&amp; strcmp ((&quot;symbols&quot;), (key)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="macro" href="rcs.h.html#25" title="&quot;symbols&quot;" data-ref="_M/RCSSYMBOLS">RCSSYMBOLS</a>, <a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>))</td></tr>
<tr><th id="533">533</th><td>	{</td></tr>
<tr><th id="534">534</th><td>	    <b>if</b> (<a class="local col0 ref" href="#70value" title='value' data-ref="70value" data-ref-filename="70value">value</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="535">535</th><td>	    {</td></tr>
<tr><th id="536">536</th><td>		<b>if</b> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a>)</td></tr>
<tr><th id="537">537</th><td>		{</td></tr>
<tr><th id="538">538</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="539">539</th><td>		           <q>"Duplicate `%s' keyword found in RCS file."</q>,</td></tr>
<tr><th id="540">540</th><td>		           <a class="macro" href="rcs.h.html#25" title="&quot;symbols&quot;" data-ref="_M/RCSSYMBOLS">RCSSYMBOLS</a>);</td></tr>
<tr><th id="541">541</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a>);</td></tr>
<tr><th id="542">542</th><td>		}</td></tr>
<tr><th id="543">543</th><td>		<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (&amp;<a class="local col3 ref" href="#63rcsbuf" title='rcsbuf' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#70value" title='value' data-ref="70value" data-ref-filename="70value">value</a>, <var>0</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="544">544</th><td>	    }</td></tr>
<tr><th id="545">545</th><td>	    <b>continue</b>;</td></tr>
<tr><th id="546">546</th><td>	}</td></tr>
<tr><th id="547">547</th><td></td></tr>
<tr><th id="548">548</th><td>	<i>/*</i></td></tr>
<tr><th id="549">549</th><td><i>	 * check key for '.''s and digits (probably a rev) if it is a</i></td></tr>
<tr><th id="550">550</th><td><i>	 * revision or `desc', we are done with the headers and are down to the</i></td></tr>
<tr><th id="551">551</th><td><i>	 * revision deltas, so we break out of the loop</i></td></tr>
<tr><th id="552">552</th><td><i>	 */</i></td></tr>
<tr><th id="553">553</th><td>	<b>for</b> (<a class="local col8 ref" href="#68cp" title='cp' data-ref="68cp" data-ref-filename="68cp">cp</a> = <a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>;</td></tr>
<tr><th id="554">554</th><td>	     (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) *cp)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) *<a class="local col8 ref" href="#68cp" title='cp' data-ref="68cp" data-ref-filename="68cp">cp</a>) || *<a class="local col8 ref" href="#68cp" title='cp' data-ref="68cp" data-ref-filename="68cp">cp</a> == <kbd>'.'</kbd>) &amp;&amp; *<a class="local col8 ref" href="#68cp" title='cp' data-ref="68cp" data-ref-filename="68cp">cp</a> != <kbd>'\0'</kbd>;</td></tr>
<tr><th id="555">555</th><td>	     <a class="local col8 ref" href="#68cp" title='cp' data-ref="68cp" data-ref-filename="68cp">cp</a>++)</td></tr>
<tr><th id="556">556</th><td>	     <i>/* do nothing */</i> ;</td></tr>
<tr><th id="557">557</th><td>	<i>/* Note that when comparing with RCSDATE, we are not massaging</i></td></tr>
<tr><th id="558">558</th><td><i>           VALUE from the string found in the RCS file.  This is OK</i></td></tr>
<tr><th id="559">559</th><td><i>           since we know exactly what to expect.  */</i></td></tr>
<tr><th id="560">560</th><td>	<b>if</b> (*<a class="local col8 ref" href="#68cp" title='cp' data-ref="68cp" data-ref-filename="68cp">cp</a> == <kbd>'\0'</kbd> &amp;&amp; <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="macro" href="rcs.h.html#26" title="&quot;date&quot;" data-ref="_M/RCSDATE">RCSDATE</a>, <a class="local col0 ref" href="#70value" title='value' data-ref="70value" data-ref-filename="70value">value</a>, (<b>sizeof</b> <a class="macro" href="rcs.h.html#26" title="&quot;date&quot;" data-ref="_M/RCSDATE">RCSDATE</a>) - <var>1</var>) == <var>0</var>)</td></tr>
<tr><th id="561">561</th><td>	    <b>break</b>;</td></tr>
<tr><th id="562">562</th><td></td></tr>
<tr><th id="563">563</th><td>	<b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;desc&quot;) &amp;&amp; strcmp ((key), (&quot;desc&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, <a class="macro" href="rcs.h.html#27" title="&quot;desc&quot;" data-ref="_M/RCSDESC">RCSDESC</a>))</td></tr>
<tr><th id="564">564</th><td>	    <b>break</b>;</td></tr>
<tr><th id="565">565</th><td></td></tr>
<tr><th id="566">566</th><td>	<b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;comment&quot;) &amp;&amp; strcmp ((key), (&quot;comment&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, <q>"comment"</q>))</td></tr>
<tr><th id="567">567</th><td>	{</td></tr>
<tr><th id="568">568</th><td>	    <b>if</b> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::comment" title='rcsnode::comment' data-ref="rcsnode::comment" data-ref-filename="rcsnode..comment">comment</a>)</td></tr>
<tr><th id="569">569</th><td>	    {</td></tr>
<tr><th id="570">570</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="571">571</th><td>		       <q>"warning: duplicate key `%s' in RCS file `%s'"</q>,</td></tr>
<tr><th id="572">572</th><td>		       <a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, <a class="local col2 ref" href="#62rcsfile" title='rcsfile' data-ref="62rcsfile" data-ref-filename="62rcsfile">rcsfile</a>);</td></tr>
<tr><th id="573">573</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::comment" title='rcsnode::comment' data-ref="rcsnode::comment" data-ref-filename="rcsnode..comment">comment</a>);</td></tr>
<tr><th id="574">574</th><td>	    }</td></tr>
<tr><th id="575">575</th><td>	    <a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::comment" title='rcsnode::comment' data-ref="rcsnode::comment" data-ref-filename="rcsnode..comment">comment</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (&amp;<a class="local col3 ref" href="#63rcsbuf" title='rcsbuf' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#70value" title='value' data-ref="70value" data-ref-filename="70value">value</a>, <var>0</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="576">576</th><td>	    <b>continue</b>;</td></tr>
<tr><th id="577">577</th><td>	}</td></tr>
<tr><th id="578">578</th><td>	<b>if</b> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::other" title='rcsnode::other' data-ref="rcsnode::other" data-ref-filename="rcsnode..other">other</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="579">579</th><td>	    <a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::other" title='rcsnode::other' data-ref="rcsnode::other" data-ref-filename="rcsnode..other">other</a> = <a class="ref fn" href="hash.h.html#getlist" title='getlist' data-ref="getlist" data-ref-filename="getlist">getlist</a> ();</td></tr>
<tr><th id="580">580</th><td>	<a class="local col5 ref" href="#65kv" title='kv' data-ref="65kv" data-ref-filename="65kv">kv</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a> ();</td></tr>
<tr><th id="581">581</th><td>	<a class="local col5 ref" href="#65kv" title='kv' data-ref="65kv" data-ref-filename="65kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> = <a class="tu ref fn" href="#rcsbuf_valcmp" title='rcsbuf_valcmp' data-use='c' data-ref="rcsbuf_valcmp" data-ref-filename="rcsbuf_valcmp">rcsbuf_valcmp</a> (&amp;<a class="local col3 ref" href="#63rcsbuf" title='rcsbuf' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</a>) ? <a class="enum" href="hash.h.html#RCSCMPFLD" title='RCSCMPFLD' data-ref="RCSCMPFLD" data-ref-filename="RCSCMPFLD">RCSCMPFLD</a> : <a class="enum" href="hash.h.html#RCSFIELD" title='RCSFIELD' data-ref="RCSFIELD" data-ref-filename="RCSFIELD">RCSFIELD</a>;</td></tr>
<tr><th id="582">582</th><td>	<a class="local col5 ref" href="#65kv" title='kv' data-ref="65kv" data-ref-filename="65kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>);</td></tr>
<tr><th id="583">583</th><td>	<a class="local col5 ref" href="#65kv" title='kv' data-ref="65kv" data-ref-filename="65kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (&amp;<a class="local col3 ref" href="#63rcsbuf" title='rcsbuf' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#70value" title='value' data-ref="70value" data-ref-filename="70value">value</a>, <a class="local col5 ref" href="#65kv" title='kv' data-ref="65kv" data-ref-filename="65kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> == <a class="enum" href="hash.h.html#RCSFIELD" title='RCSFIELD' data-ref="RCSFIELD" data-ref-filename="RCSFIELD">RCSFIELD</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="584">584</th><td>	<b>if</b> (<a class="ref fn" href="hash.h.html#addnode" title='addnode' data-ref="addnode" data-ref-filename="addnode">addnode</a> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::other" title='rcsnode::other' data-ref="rcsnode::other" data-ref-filename="rcsnode..other">other</a>, <a class="local col5 ref" href="#65kv" title='kv' data-ref="65kv" data-ref-filename="65kv">kv</a>) != <var>0</var>)</td></tr>
<tr><th id="585">585</th><td>	{</td></tr>
<tr><th id="586">586</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"warning: duplicate key `%s' in RCS file `%s'"</q>,</td></tr>
<tr><th id="587">587</th><td>		   <a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, <a class="local col2 ref" href="#62rcsfile" title='rcsfile' data-ref="62rcsfile" data-ref-filename="62rcsfile">rcsfile</a>);</td></tr>
<tr><th id="588">588</th><td>	    <a class="ref fn" href="hash.h.html#freenode" title='freenode' data-ref="freenode" data-ref-filename="freenode">freenode</a> (<a class="local col5 ref" href="#65kv" title='kv' data-ref="65kv" data-ref-filename="65kv">kv</a>);</td></tr>
<tr><th id="589">589</th><td>	}</td></tr>
<tr><th id="590">590</th><td></td></tr>
<tr><th id="591">591</th><td>	<i>/* if we haven't grabbed it yet, we didn't want it */</i></td></tr>
<tr><th id="592">592</th><td>    }</td></tr>
<tr><th id="593">593</th><td></td></tr>
<tr><th id="594">594</th><td>    <i>/* We got out of the loop, so we have the first part of the first</i></td></tr>
<tr><th id="595">595</th><td><i>       revision delta in KEY (the revision) and VALUE (the date key</i></td></tr>
<tr><th id="596">596</th><td><i>       and its value).  This is what getdelta expects to receive.  */</i></td></tr>
<tr><th id="597">597</th><td></td></tr>
<tr><th id="598">598</th><td>    <b>while</b> ((<a class="local col6 ref" href="#66vnode" title='vnode' data-ref="66vnode" data-ref-filename="66vnode">vnode</a> = <a class="tu ref fn" href="#getdelta" title='getdelta' data-use='c' data-ref="getdelta" data-ref-filename="getdelta">getdelta</a> (&amp;<a class="local col3 ref" href="#63rcsbuf" title='rcsbuf' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</a>, <a class="local col2 ref" href="#62rcsfile" title='rcsfile' data-ref="62rcsfile" data-ref-filename="62rcsfile">rcsfile</a>, &amp;<a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, &amp;<a class="local col0 ref" href="#70value" title='value' data-ref="70value" data-ref-filename="70value">value</a>)) != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="599">599</th><td>    {</td></tr>
<tr><th id="600">600</th><td>	<i>/* get the node */</i></td></tr>
<tr><th id="601">601</th><td>	<a class="local col4 ref" href="#64q" title='q' data-ref="64q" data-ref-filename="64q">q</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a> ();</td></tr>
<tr><th id="602">602</th><td>	<a class="local col4 ref" href="#64q" title='q' data-ref="64q" data-ref-filename="64q">q</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> = <a class="enum" href="hash.h.html#RCSVERS" title='RCSVERS' data-ref="RCSVERS" data-ref-filename="RCSVERS">RCSVERS</a>;</td></tr>
<tr><th id="603">603</th><td>	<a class="local col4 ref" href="#64q" title='q' data-ref="64q" data-ref-filename="64q">q</a>-&gt;<a class="ref field" href="hash.h.html#node::delproc" title='node::delproc' data-ref="node::delproc" data-ref-filename="node..delproc">delproc</a> = <a class="tu ref fn" href="#rcsvers_delproc" title='rcsvers_delproc' data-use='r' data-ref="rcsvers_delproc" data-ref-filename="rcsvers_delproc">rcsvers_delproc</a>;</td></tr>
<tr><th id="604">604</th><td>	<a class="local col4 ref" href="#64q" title='q' data-ref="64q" data-ref-filename="64q">q</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="local col6 ref" href="#66vnode" title='vnode' data-ref="66vnode" data-ref-filename="66vnode">vnode</a>;</td></tr>
<tr><th id="605">605</th><td>	<a class="local col4 ref" href="#64q" title='q' data-ref="64q" data-ref-filename="64q">q</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="local col6 ref" href="#66vnode" title='vnode' data-ref="66vnode" data-ref-filename="66vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>;</td></tr>
<tr><th id="606">606</th><td></td></tr>
<tr><th id="607">607</th><td>	<i>/* add the nodes to the list */</i></td></tr>
<tr><th id="608">608</th><td>	<b>if</b> (<a class="ref fn" href="hash.h.html#addnode" title='addnode' data-ref="addnode" data-ref-filename="addnode">addnode</a> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col4 ref" href="#64q" title='q' data-ref="64q" data-ref-filename="64q">q</a>) != <var>0</var>)</td></tr>
<tr><th id="609">609</th><td>	{</td></tr>
<tr><th id="610">610</th><td><u>#<span data-ppcond="610">if</span> 0</u></td></tr>
<tr><th id="611">611</th><td>		purify_printf(<q>"WARNING: Adding duplicate version: %s (%s)\n"</q>,</td></tr>
<tr><th id="612">612</th><td>			 q-&gt;key, rcsfile);</td></tr>
<tr><th id="613">613</th><td>		freenode (q);</td></tr>
<tr><th id="614">614</th><td><u>#<span data-ppcond="610">endif</span></u></td></tr>
<tr><th id="615">615</th><td>	}</td></tr>
<tr><th id="616">616</th><td>    }</td></tr>
<tr><th id="617">617</th><td></td></tr>
<tr><th id="618">618</th><td>    <i>/* Here KEY and VALUE are whatever caused getdelta to return NULL.  */</i></td></tr>
<tr><th id="619">619</th><td></td></tr>
<tr><th id="620">620</th><td>    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;desc&quot;) &amp;&amp; strcmp ((key), (&quot;desc&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, <a class="macro" href="rcs.h.html#27" title="&quot;desc&quot;" data-ref="_M/RCSDESC">RCSDESC</a>))</td></tr>
<tr><th id="621">621</th><td>    {</td></tr>
<tr><th id="622">622</th><td>	<b>if</b> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::desc" title='rcsnode::desc' data-ref="rcsnode::desc" data-ref-filename="rcsnode..desc">desc</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="623">623</th><td>	{</td></tr>
<tr><th id="624">624</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="625">625</th><td>		   <q>"warning: duplicate key `%s' in RCS file `%s'"</q>,</td></tr>
<tr><th id="626">626</th><td>		   <a class="local col9 ref" href="#69key" title='key' data-ref="69key" data-ref-filename="69key">key</a>, <a class="local col2 ref" href="#62rcsfile" title='rcsfile' data-ref="62rcsfile" data-ref-filename="62rcsfile">rcsfile</a>);</td></tr>
<tr><th id="627">627</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::desc" title='rcsnode::desc' data-ref="rcsnode::desc" data-ref-filename="rcsnode..desc">desc</a>);</td></tr>
<tr><th id="628">628</th><td>	}</td></tr>
<tr><th id="629">629</th><td>	<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::desc" title='rcsnode::desc' data-ref="rcsnode::desc" data-ref-filename="rcsnode..desc">desc</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (&amp;<a class="local col3 ref" href="#63rcsbuf" title='rcsbuf' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#70value" title='value' data-ref="70value" data-ref-filename="70value">value</a>, <var>1</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="630">630</th><td>    }</td></tr>
<tr><th id="631">631</th><td></td></tr>
<tr><th id="632">632</th><td>    <a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::delta_pos" title='rcsnode::delta_pos' data-ref="rcsnode::delta_pos" data-ref-filename="rcsnode..delta_pos">delta_pos</a> = <a class="tu ref fn" href="#rcsbuf_ftello" title='rcsbuf_ftello' data-use='c' data-ref="rcsbuf_ftello" data-ref-filename="rcsbuf_ftello">rcsbuf_ftello</a> (&amp;<a class="local col3 ref" href="#63rcsbuf" title='rcsbuf' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</a>);</td></tr>
<tr><th id="633">633</th><td></td></tr>
<tr><th id="634">634</th><td>    <b>if</b> (<a class="local col9 ref" href="#59pfp" title='pfp' data-ref="59pfp" data-ref-filename="59pfp">pfp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="635">635</th><td>	<a class="tu ref fn" href="#rcsbuf_cache" title='rcsbuf_cache' data-use='c' data-ref="rcsbuf_cache" data-ref-filename="rcsbuf_cache">rcsbuf_cache</a> (<a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>, &amp;<a class="local col3 ref" href="#63rcsbuf" title='rcsbuf' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</a>);</td></tr>
<tr><th id="636">636</th><td>    <b>else</b></td></tr>
<tr><th id="637">637</th><td>    {</td></tr>
<tr><th id="638">638</th><td>	*<a class="local col9 ref" href="#59pfp" title='pfp' data-ref="59pfp" data-ref-filename="59pfp">pfp</a> = <a class="local col1 ref" href="#61fp" title='fp' data-ref="61fp" data-ref-filename="61fp">fp</a>;</td></tr>
<tr><th id="639">639</th><td>	*<a class="local col0 ref" href="#60rcsbufp" title='rcsbufp' data-ref="60rcsbufp" data-ref-filename="60rcsbufp">rcsbufp</a> = <a class="local col3 ref" href="#63rcsbuf" title='rcsbuf' data-ref="63rcsbuf" data-ref-filename="63rcsbuf">rcsbuf</a>;</td></tr>
<tr><th id="640">640</th><td>    }</td></tr>
<tr><th id="641">641</th><td>    <a class="local col8 ref" href="#58rdata" title='rdata' data-ref="58rdata" data-ref-filename="58rdata">rdata</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp;= ~<a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>;</td></tr>
<tr><th id="642">642</th><td>}</td></tr>
<tr><th id="643">643</th><td></td></tr>
<tr><th id="644">644</th><td></td></tr>
<tr><th id="645">645</th><td></td></tr>
<tr><th id="646">646</th><td><i>/* Move RCS into or out of the Attic, depending on TOATTIC.  If the</i></td></tr>
<tr><th id="647">647</th><td><i>   file is already in the desired place, return without doing</i></td></tr>
<tr><th id="648">648</th><td><i>   anything.  At some point may want to think about how this relates</i></td></tr>
<tr><th id="649">649</th><td><i>   to RCS_rewrite but that is a bit hairy (if one wants renames to be</i></td></tr>
<tr><th id="650">650</th><td><i>   atomic, or that kind of thing).  If there is an error, print a message</i></td></tr>
<tr><th id="651">651</th><td><i>   and return 1.  On success, return 0.  */</i></td></tr>
<tr><th id="652">652</th><td><em>int</em></td></tr>
<tr><th id="653">653</th><td><dfn class="decl def fn" id="RCS_setattic" title='RCS_setattic' data-ref="RCS_setattic" data-ref-filename="RCS_setattic">RCS_setattic</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col1 decl" id="71rcs" title='rcs' data-type='RCSNode *' data-ref="71rcs" data-ref-filename="71rcs">rcs</dfn>, <em>int</em> <dfn class="local col2 decl" id="72toattic" title='toattic' data-type='int' data-ref="72toattic" data-ref-filename="72toattic">toattic</dfn>)</td></tr>
<tr><th id="654">654</th><td>{</td></tr>
<tr><th id="655">655</th><td>    <em>char</em> *<dfn class="local col3 decl" id="73newpath" title='newpath' data-type='char *' data-ref="73newpath" data-ref-filename="73newpath">newpath</dfn>;</td></tr>
<tr><th id="656">656</th><td>    <em>const</em> <em>char</em> *<dfn class="local col4 decl" id="74p" title='p' data-type='const char *' data-ref="74p" data-ref-filename="74p">p</dfn>;</td></tr>
<tr><th id="657">657</th><td>    <em>char</em> *<dfn class="local col5 decl" id="75q" title='q' data-type='char *' data-ref="75q" data-ref-filename="75q">q</dfn>;</td></tr>
<tr><th id="658">658</th><td></td></tr>
<tr><th id="659">659</th><td>    <i>/* Some systems aren't going to let us rename an open file.  */</i></td></tr>
<tr><th id="660">660</th><td>    <a class="tu ref fn" href="#rcsbuf_cache_close" title='rcsbuf_cache_close' data-use='c' data-ref="rcsbuf_cache_close" data-ref-filename="rcsbuf_cache_close">rcsbuf_cache_close</a> ();</td></tr>
<tr><th id="661">661</th><td></td></tr>
<tr><th id="662">662</th><td>    <i>/* Could make the pathname computations in this file, and probably</i></td></tr>
<tr><th id="663">663</th><td><i>       in other parts of rcs.c too, easier if the REPOS and FILE</i></td></tr>
<tr><th id="664">664</th><td><i>       arguments to RCS_parse got stashed in the RCSNode.  */</i></td></tr>
<tr><th id="665">665</th><td></td></tr>
<tr><th id="666">666</th><td>    <b>if</b> (<a class="local col2 ref" href="#72toattic" title='toattic' data-ref="72toattic" data-ref-filename="72toattic">toattic</a>)</td></tr>
<tr><th id="667">667</th><td>    {</td></tr>
<tr><th id="668">668</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#171" title="__mode_t" data-ref="_M/mode_t">mode_t</a> <dfn class="local col6 decl" id="76omask" title='omask' data-type='__mode_t' data-ref="76omask" data-ref-filename="76omask">omask</dfn>;</td></tr>
<tr><th id="669">669</th><td></td></tr>
<tr><th id="670">670</th><td>	<b>if</b> (<a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#43" title="0x2" data-ref="_M/INATTIC">INATTIC</a>)</td></tr>
<tr><th id="671">671</th><td>	    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="672">672</th><td></td></tr>
<tr><th id="673">673</th><td>	<i>/* Example: rcs-&gt;path is "/foo/bar/baz,v".  */</i></td></tr>
<tr><th id="674">674</th><td>	<a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>) + <b>sizeof</b> <a class="macro" href="cvs.h.html#206" title="&quot;Attic&quot;" data-ref="_M/CVSATTIC">CVSATTIC</a> + <var>5</var>);</td></tr>
<tr><th id="675">675</th><td>	<a class="local col4 ref" href="#74p" title='p' data-ref="74p" data-ref-filename="74p">p</a> = <a class="ref fn" href="cvs.h.html#last_component" title='last_component' data-ref="last_component" data-ref-filename="last_component">last_component</a> (<a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="676">676</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncpy" title='strncpy' data-ref="strncpy" data-ref-filename="strncpy">strncpy</a> (<a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a>, <a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>, <a class="local col4 ref" href="#74p" title='p' data-ref="74p" data-ref-filename="74p">p</a> - <a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="677">677</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcpy" title='strcpy' data-ref="strcpy" data-ref-filename="strcpy">strcpy</a> (<a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a> + (<a class="local col4 ref" href="#74p" title='p' data-ref="74p" data-ref-filename="74p">p</a> - <a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>), <a class="macro" href="cvs.h.html#206" title="&quot;Attic&quot;" data-ref="_M/CVSATTIC">CVSATTIC</a>);</td></tr>
<tr><th id="678">678</th><td></td></tr>
<tr><th id="679">679</th><td>	<i>/* Create the Attic directory if it doesn't exist.  */</i></td></tr>
<tr><th id="680">680</th><td>	<a class="local col6 ref" href="#76omask" title='omask' data-ref="76omask" data-ref-filename="76omask">omask</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#umask" title='umask' data-ref="umask" data-ref-filename="umask">umask</a> (<a class="ref" href="cvs.h.html#cvsumask" title='cvsumask' data-ref="cvsumask" data-ref-filename="cvsumask">cvsumask</a>);</td></tr>
<tr><th id="681">681</th><td>	<b>if</b> (<a class="macro" href="../lib/system.h.html#232" title="mkdir" data-ref="_M/CVS_MKDIR">CVS_MKDIR</a> (<a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a>, <var>0777</var>) &lt; <var>0</var> &amp;&amp; <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a> != <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/errno.h.html#59" title="17" data-ref="_M/EEXIST">EEXIST</a>)</td></tr>
<tr><th id="682">682</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot make directory %s"</q>, <a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a>);</td></tr>
<tr><th id="683">683</th><td>	(<em>void</em>) <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#umask" title='umask' data-ref="umask" data-ref-filename="umask">umask</a> (<a class="local col6 ref" href="#76omask" title='omask' data-ref="76omask" data-ref-filename="76omask">omask</a>);</td></tr>
<tr><th id="684">684</th><td></td></tr>
<tr><th id="685">685</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcat" title='strcat' data-ref="strcat" data-ref-filename="strcat">strcat</a> (<a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a>, <q>"/"</q>);</td></tr>
<tr><th id="686">686</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcat" title='strcat' data-ref="strcat" data-ref-filename="strcat">strcat</a> (<a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a>, <a class="local col4 ref" href="#74p" title='p' data-ref="74p" data-ref-filename="74p">p</a>);</td></tr>
<tr><th id="687">687</th><td></td></tr>
<tr><th id="688">688</th><td>	<b>if</b> (<a class="macro" href="../lib/system.h.html#252" title="rename" data-ref="_M/CVS_RENAME">CVS_RENAME</a> (<a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>, <a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="689">689</th><td>	{</td></tr>
<tr><th id="690">690</th><td>	    <em>int</em> <dfn class="local col7 decl" id="77save_errno" title='save_errno' data-type='int' data-ref="77save_errno" data-ref-filename="77save_errno">save_errno</dfn> = <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>;</td></tr>
<tr><th id="691">691</th><td></td></tr>
<tr><th id="692">692</th><td>	    <i>/* The checks for isreadable look awfully fishy, but</i></td></tr>
<tr><th id="693">693</th><td><i>	       I'm going to leave them here for now until I</i></td></tr>
<tr><th id="694">694</th><td><i>	       can think harder about whether they take care of</i></td></tr>
<tr><th id="695">695</th><td><i>	       some cases which should be handled somehow.  */</i></td></tr>
<tr><th id="696">696</th><td></td></tr>
<tr><th id="697">697</th><td>	    <b>if</b> (<a class="ref fn" href="cvs.h.html#isreadable" title='isreadable' data-ref="isreadable" data-ref-filename="isreadable">isreadable</a> (<a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>) || !<a class="ref fn" href="cvs.h.html#isreadable" title='isreadable' data-ref="isreadable" data-ref-filename="isreadable">isreadable</a> (<a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a>))</td></tr>
<tr><th id="698">698</th><td>	    {</td></tr>
<tr><th id="699">699</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="local col7 ref" href="#77save_errno" title='save_errno' data-ref="77save_errno" data-ref-filename="77save_errno">save_errno</a>, <q>"cannot rename %s to %s"</q>,</td></tr>
<tr><th id="700">700</th><td>		       <a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>, <a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a>);</td></tr>
<tr><th id="701">701</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a>);</td></tr>
<tr><th id="702">702</th><td>		<b>return</b> <var>1</var>;</td></tr>
<tr><th id="703">703</th><td>	    }</td></tr>
<tr><th id="704">704</th><td>	}</td></tr>
<tr><th id="705">705</th><td>    }</td></tr>
<tr><th id="706">706</th><td>    <b>else</b></td></tr>
<tr><th id="707">707</th><td>    {</td></tr>
<tr><th id="708">708</th><td>	<b>if</b> (!(<a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#43" title="0x2" data-ref="_M/INATTIC">INATTIC</a>))</td></tr>
<tr><th id="709">709</th><td>	    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="710">710</th><td></td></tr>
<tr><th id="711">711</th><td>	<a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>));</td></tr>
<tr><th id="712">712</th><td></td></tr>
<tr><th id="713">713</th><td>	<i>/* Example: rcs-&gt;path is "/foo/bar/Attic/baz,v".  */</i></td></tr>
<tr><th id="714">714</th><td>	<a class="local col4 ref" href="#74p" title='p' data-ref="74p" data-ref-filename="74p">p</a> = <a class="ref fn" href="cvs.h.html#last_component" title='last_component' data-ref="last_component" data-ref-filename="last_component">last_component</a> (<a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="715">715</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncpy" title='strncpy' data-ref="strncpy" data-ref-filename="strncpy">strncpy</a> (<a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a>, <a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>, <a class="local col4 ref" href="#74p" title='p' data-ref="74p" data-ref-filename="74p">p</a> - <a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a> - <var>1</var>);</td></tr>
<tr><th id="716">716</th><td>	<a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a>[<a class="local col4 ref" href="#74p" title='p' data-ref="74p" data-ref-filename="74p">p</a> - <a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a> - <var>1</var>] = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="717">717</th><td>	<a class="local col5 ref" href="#75q" title='q' data-ref="75q" data-ref-filename="75q">q</a> = <a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a> + (<a class="local col4 ref" href="#74p" title='p' data-ref="74p" data-ref-filename="74p">p</a> - <a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a> - <var>1</var>) - (<b>sizeof</b> <a class="macro" href="cvs.h.html#206" title="&quot;Attic&quot;" data-ref="_M/CVSATTIC">CVSATTIC</a> - <var>1</var>);</td></tr>
<tr><th id="718">718</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((strncmp (q, &quot;Attic&quot;, sizeof &quot;Attic&quot; - 1) == 0) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 718, __func__, &quot;strncmp (q, CVSATTIC, sizeof CVSATTIC - 1) == 0&quot;))" data-ref="_M/assert">assert</a> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col5 ref" href="#75q" title='q' data-ref="75q" data-ref-filename="75q">q</a>, <a class="macro" href="cvs.h.html#206" title="&quot;Attic&quot;" data-ref="_M/CVSATTIC">CVSATTIC</a>, <b>sizeof</b> <a class="macro" href="cvs.h.html#206" title="&quot;Attic&quot;" data-ref="_M/CVSATTIC">CVSATTIC</a> - <var>1</var>) == <var>0</var>);</td></tr>
<tr><th id="719">719</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcpy" title='strcpy' data-ref="strcpy" data-ref-filename="strcpy">strcpy</a> (<a class="local col5 ref" href="#75q" title='q' data-ref="75q" data-ref-filename="75q">q</a>, <a class="local col4 ref" href="#74p" title='p' data-ref="74p" data-ref-filename="74p">p</a>);</td></tr>
<tr><th id="720">720</th><td></td></tr>
<tr><th id="721">721</th><td>	<b>if</b> (<a class="macro" href="../lib/system.h.html#252" title="rename" data-ref="_M/CVS_RENAME">CVS_RENAME</a> (<a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>, <a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="722">722</th><td>	{</td></tr>
<tr><th id="723">723</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"failed to move `%s' out of the attic"</q>,</td></tr>
<tr><th id="724">724</th><td>		   <a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="725">725</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a>);</td></tr>
<tr><th id="726">726</th><td>	    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="727">727</th><td>	}</td></tr>
<tr><th id="728">728</th><td>    }</td></tr>
<tr><th id="729">729</th><td></td></tr>
<tr><th id="730">730</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="731">731</th><td>    <a class="local col1 ref" href="#71rcs" title='rcs' data-ref="71rcs" data-ref-filename="71rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a> = <a class="local col3 ref" href="#73newpath" title='newpath' data-ref="73newpath" data-ref-filename="73newpath">newpath</a>;</td></tr>
<tr><th id="732">732</th><td></td></tr>
<tr><th id="733">733</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="734">734</th><td>}</td></tr>
<tr><th id="735">735</th><td></td></tr>
<tr><th id="736">736</th><td></td></tr>
<tr><th id="737">737</th><td></td></tr>
<tr><th id="738">738</th><td><i>/*</i></td></tr>
<tr><th id="739">739</th><td><i> * Fully parse the RCS file.  Store all keyword/value pairs, fetch the</i></td></tr>
<tr><th id="740">740</th><td><i> * log messages for each revision, and fetch add and delete counts for</i></td></tr>
<tr><th id="741">741</th><td><i> * each revision (we could fetch the entire text for each revision,</i></td></tr>
<tr><th id="742">742</th><td><i> * but the only caller, log_fileproc, doesn't need that information,</i></td></tr>
<tr><th id="743">743</th><td><i> * so we don't waste the memory required to store it).  The add and</i></td></tr>
<tr><th id="744">744</th><td><i> * delete counts are stored on the OTHER field of the RCSVERSNODE</i></td></tr>
<tr><th id="745">745</th><td><i> * structure, under the names ";add" and ";delete", so that we don't</i></td></tr>
<tr><th id="746">746</th><td><i> * waste the memory space of extra fields in RCSVERSNODE for code</i></td></tr>
<tr><th id="747">747</th><td><i> * which doesn't need this information.</i></td></tr>
<tr><th id="748">748</th><td><i> */</i></td></tr>
<tr><th id="749">749</th><td><em>void</em></td></tr>
<tr><th id="750">750</th><td><dfn class="decl def fn" id="RCS_fully_parse" title='RCS_fully_parse' data-ref="RCS_fully_parse" data-ref-filename="RCS_fully_parse">RCS_fully_parse</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col8 decl" id="78rcs" title='rcs' data-type='RCSNode *' data-ref="78rcs" data-ref-filename="78rcs">rcs</dfn>)</td></tr>
<tr><th id="751">751</th><td>{</td></tr>
<tr><th id="752">752</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col9 decl" id="79fp" title='fp' data-type='FILE *' data-ref="79fp" data-ref-filename="79fp">fp</dfn>;</td></tr>
<tr><th id="753">753</th><td>    <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> <dfn class="local col0 decl" id="80rcsbuf" title='rcsbuf' data-type='struct rcsbuffer' data-ref="80rcsbuf" data-ref-filename="80rcsbuf">rcsbuf</dfn>;</td></tr>
<tr><th id="754">754</th><td></td></tr>
<tr><th id="755">755</th><td>    <a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col8 ref" href="#78rcs" title='rcs' data-ref="78rcs" data-ref-filename="78rcs">rcs</a>, &amp;<a class="local col9 ref" href="#79fp" title='fp' data-ref="79fp" data-ref-filename="79fp">fp</a>, &amp;<a class="local col0 ref" href="#80rcsbuf" title='rcsbuf' data-ref="80rcsbuf" data-ref-filename="80rcsbuf">rcsbuf</a>);</td></tr>
<tr><th id="756">756</th><td></td></tr>
<tr><th id="757">757</th><td>    <b>while</b> (<var>1</var>)</td></tr>
<tr><th id="758">758</th><td>    {</td></tr>
<tr><th id="759">759</th><td>	<em>char</em> *<dfn class="local col1 decl" id="81key" title='key' data-type='char *' data-ref="81key" data-ref-filename="81key">key</dfn>, *<dfn class="local col2 decl" id="82value" title='value' data-type='char *' data-ref="82value" data-ref-filename="82value">value</dfn>;</td></tr>
<tr><th id="760">760</th><td>	<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col3 decl" id="83vers" title='vers' data-type='Node *' data-ref="83vers" data-ref-filename="83vers">vers</dfn>;</td></tr>
<tr><th id="761">761</th><td>	<a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col4 decl" id="84vnode" title='vnode' data-type='RCSVers *' data-ref="84vnode" data-ref-filename="84vnode">vnode</dfn>;</td></tr>
<tr><th id="762">762</th><td></td></tr>
<tr><th id="763">763</th><td>	<i>/* Rather than try to keep track of how much information we</i></td></tr>
<tr><th id="764">764</th><td><i>           have read, just read to the end of the file.  */</i></td></tr>
<tr><th id="765">765</th><td>	<b>if</b> (!<a class="tu ref fn" href="#rcsbuf_getrevnum" title='rcsbuf_getrevnum' data-use='c' data-ref="rcsbuf_getrevnum" data-ref-filename="rcsbuf_getrevnum">rcsbuf_getrevnum</a> (&amp;<a class="local col0 ref" href="#80rcsbuf" title='rcsbuf' data-ref="80rcsbuf" data-ref-filename="80rcsbuf">rcsbuf</a>, &amp;<a class="local col1 ref" href="#81key" title='key' data-ref="81key" data-ref-filename="81key">key</a>))</td></tr>
<tr><th id="766">766</th><td>	    <b>break</b>;</td></tr>
<tr><th id="767">767</th><td></td></tr>
<tr><th id="768">768</th><td>	<a class="local col3 ref" href="#83vers" title='vers' data-ref="83vers" data-ref-filename="83vers">vers</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col8 ref" href="#78rcs" title='rcs' data-ref="78rcs" data-ref-filename="78rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col1 ref" href="#81key" title='key' data-ref="81key" data-ref-filename="81key">key</a>);</td></tr>
<tr><th id="769">769</th><td>	<b>if</b> (<a class="local col3 ref" href="#83vers" title='vers' data-ref="83vers" data-ref-filename="83vers">vers</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="770">770</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>,</td></tr>
<tr><th id="771">771</th><td>		   <q>"mismatch in rcs file %s between deltas and deltatexts (%s)"</q>,</td></tr>
<tr><th id="772">772</th><td>		   <a class="local col8 ref" href="#78rcs" title='rcs' data-ref="78rcs" data-ref-filename="78rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col1 ref" href="#81key" title='key' data-ref="81key" data-ref-filename="81key">key</a>);</td></tr>
<tr><th id="773">773</th><td></td></tr>
<tr><th id="774">774</th><td>	<a class="local col4 ref" href="#84vnode" title='vnode' data-ref="84vnode" data-ref-filename="84vnode">vnode</a> = <a class="local col3 ref" href="#83vers" title='vers' data-ref="83vers" data-ref-filename="83vers">vers</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="775">775</th><td></td></tr>
<tr><th id="776">776</th><td>	<b>while</b> (<a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (&amp;<a class="local col0 ref" href="#80rcsbuf" title='rcsbuf' data-ref="80rcsbuf" data-ref-filename="80rcsbuf">rcsbuf</a>, &amp;<a class="local col1 ref" href="#81key" title='key' data-ref="81key" data-ref-filename="81key">key</a>, &amp;<a class="local col2 ref" href="#82value" title='value' data-ref="82value" data-ref-filename="82value">value</a>))</td></tr>
<tr><th id="777">777</th><td>	{</td></tr>
<tr><th id="778">778</th><td>	    <b>if</b> (!<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;text&quot;) &amp;&amp; strcmp ((key), (&quot;text&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col1 ref" href="#81key" title='key' data-ref="81key" data-ref-filename="81key">key</a>, <q>"text"</q>))</td></tr>
<tr><th id="779">779</th><td>	    {</td></tr>
<tr><th id="780">780</th><td>		<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col5 decl" id="85kv" title='kv' data-type='Node *' data-ref="85kv" data-ref-filename="85kv">kv</dfn>;</td></tr>
<tr><th id="781">781</th><td></td></tr>
<tr><th id="782">782</th><td>		<b>if</b> (<a class="local col4 ref" href="#84vnode" title='vnode' data-ref="84vnode" data-ref-filename="84vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other" title='rcsversnode::other' data-ref="rcsversnode::other" data-ref-filename="rcsversnode..other">other</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="783">783</th><td>		    <a class="local col4 ref" href="#84vnode" title='vnode' data-ref="84vnode" data-ref-filename="84vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other" title='rcsversnode::other' data-ref="rcsversnode::other" data-ref-filename="rcsversnode..other">other</a> = <a class="ref fn" href="hash.h.html#getlist" title='getlist' data-ref="getlist" data-ref-filename="getlist">getlist</a> ();</td></tr>
<tr><th id="784">784</th><td>		<a class="local col5 ref" href="#85kv" title='kv' data-ref="85kv" data-ref-filename="85kv">kv</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a> ();</td></tr>
<tr><th id="785">785</th><td>		<a class="local col5 ref" href="#85kv" title='kv' data-ref="85kv" data-ref-filename="85kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> = <a class="tu ref fn" href="#rcsbuf_valcmp" title='rcsbuf_valcmp' data-use='c' data-ref="rcsbuf_valcmp" data-ref-filename="rcsbuf_valcmp">rcsbuf_valcmp</a> (&amp;<a class="local col0 ref" href="#80rcsbuf" title='rcsbuf' data-ref="80rcsbuf" data-ref-filename="80rcsbuf">rcsbuf</a>) ? <a class="enum" href="hash.h.html#RCSCMPFLD" title='RCSCMPFLD' data-ref="RCSCMPFLD" data-ref-filename="RCSCMPFLD">RCSCMPFLD</a> : <a class="enum" href="hash.h.html#RCSFIELD" title='RCSFIELD' data-ref="RCSFIELD" data-ref-filename="RCSFIELD">RCSFIELD</a>;</td></tr>
<tr><th id="786">786</th><td>		<a class="local col5 ref" href="#85kv" title='kv' data-ref="85kv" data-ref-filename="85kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col1 ref" href="#81key" title='key' data-ref="81key" data-ref-filename="81key">key</a>);</td></tr>
<tr><th id="787">787</th><td>		<a class="local col5 ref" href="#85kv" title='kv' data-ref="85kv" data-ref-filename="85kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (&amp;<a class="local col0 ref" href="#80rcsbuf" title='rcsbuf' data-ref="80rcsbuf" data-ref-filename="80rcsbuf">rcsbuf</a>, <a class="local col2 ref" href="#82value" title='value' data-ref="82value" data-ref-filename="82value">value</a>, <a class="local col5 ref" href="#85kv" title='kv' data-ref="85kv" data-ref-filename="85kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> == <a class="enum" href="hash.h.html#RCSFIELD" title='RCSFIELD' data-ref="RCSFIELD" data-ref-filename="RCSFIELD">RCSFIELD</a>,</td></tr>
<tr><th id="788">788</th><td>					   <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="789">789</th><td>		<b>if</b> (<a class="ref fn" href="hash.h.html#addnode" title='addnode' data-ref="addnode" data-ref-filename="addnode">addnode</a> (<a class="local col4 ref" href="#84vnode" title='vnode' data-ref="84vnode" data-ref-filename="84vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other" title='rcsversnode::other' data-ref="rcsversnode::other" data-ref-filename="rcsversnode..other">other</a>, <a class="local col5 ref" href="#85kv" title='kv' data-ref="85kv" data-ref-filename="85kv">kv</a>) != <var>0</var>)</td></tr>
<tr><th id="790">790</th><td>		{</td></tr>
<tr><th id="791">791</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="792">792</th><td>			   <q>"\</q></td></tr>
<tr><th id="793">793</th><td><q>warning: duplicate key `%s' in version `%s' of RCS file `%s'"</q>,</td></tr>
<tr><th id="794">794</th><td>			   <a class="local col1 ref" href="#81key" title='key' data-ref="81key" data-ref-filename="81key">key</a>, <a class="local col4 ref" href="#84vnode" title='vnode' data-ref="84vnode" data-ref-filename="84vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <a class="local col8 ref" href="#78rcs" title='rcs' data-ref="78rcs" data-ref-filename="78rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="795">795</th><td>		    <a class="ref fn" href="hash.h.html#freenode" title='freenode' data-ref="freenode" data-ref-filename="freenode">freenode</a> (<a class="local col5 ref" href="#85kv" title='kv' data-ref="85kv" data-ref-filename="85kv">kv</a>);</td></tr>
<tr><th id="796">796</th><td>		}</td></tr>
<tr><th id="797">797</th><td></td></tr>
<tr><th id="798">798</th><td>		<b>continue</b>;</td></tr>
<tr><th id="799">799</th><td>	    }</td></tr>
<tr><th id="800">800</th><td></td></tr>
<tr><th id="801">801</th><td>	    <b>if</b> (!<a class="macro" href="#138" title="(*(char *)(vnode-&gt;version) == *(char *)(rcs-&gt;head) &amp;&amp; strcmp ((vnode-&gt;version), (rcs-&gt;head)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col4 ref" href="#84vnode" title='vnode' data-ref="84vnode" data-ref-filename="84vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <a class="local col8 ref" href="#78rcs" title='rcs' data-ref="78rcs" data-ref-filename="78rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>))</td></tr>
<tr><th id="802">802</th><td>	    {</td></tr>
<tr><th id="803">803</th><td>		<em>unsigned</em> <em>long</em> <dfn class="local col6 decl" id="86add" title='add' data-type='unsigned long' data-ref="86add" data-ref-filename="86add">add</dfn>, <dfn class="local col7 decl" id="87del" title='del' data-type='unsigned long' data-ref="87del" data-ref-filename="87del">del</dfn>;</td></tr>
<tr><th id="804">804</th><td>		<em>char</em> <dfn class="local col8 decl" id="88buf" title='buf' data-type='char [50]' data-ref="88buf" data-ref-filename="88buf">buf</dfn>[<var>50</var>];</td></tr>
<tr><th id="805">805</th><td>		<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col9 decl" id="89kv" title='kv' data-type='Node *' data-ref="89kv" data-ref-filename="89kv">kv</dfn>;</td></tr>
<tr><th id="806">806</th><td></td></tr>
<tr><th id="807">807</th><td>		<i>/* This is a change text.  Store the add and delete</i></td></tr>
<tr><th id="808">808</th><td><i>                   counts.  */</i></td></tr>
<tr><th id="809">809</th><td>		<a class="local col6 ref" href="#86add" title='add' data-ref="86add" data-ref-filename="86add">add</a> = <var>0</var>;</td></tr>
<tr><th id="810">810</th><td>		<a class="local col7 ref" href="#87del" title='del' data-ref="87del" data-ref-filename="87del">del</a> = <var>0</var>;</td></tr>
<tr><th id="811">811</th><td>		<b>if</b> (<a class="local col2 ref" href="#82value" title='value' data-ref="82value" data-ref-filename="82value">value</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="812">812</th><td>		{</td></tr>
<tr><th id="813">813</th><td>		    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col0 decl" id="90vallen" title='vallen' data-type='size_t' data-ref="90vallen" data-ref-filename="90vallen">vallen</dfn>;</td></tr>
<tr><th id="814">814</th><td>		    <em>const</em> <em>char</em> *<dfn class="local col1 decl" id="91cp" title='cp' data-type='const char *' data-ref="91cp" data-ref-filename="91cp">cp</dfn>;</td></tr>
<tr><th id="815">815</th><td></td></tr>
<tr><th id="816">816</th><td>		    <a class="tu ref fn" href="#rcsbuf_valpolish" title='rcsbuf_valpolish' data-use='c' data-ref="rcsbuf_valpolish" data-ref-filename="rcsbuf_valpolish">rcsbuf_valpolish</a> (&amp;<a class="local col0 ref" href="#80rcsbuf" title='rcsbuf' data-ref="80rcsbuf" data-ref-filename="80rcsbuf">rcsbuf</a>, <a class="local col2 ref" href="#82value" title='value' data-ref="82value" data-ref-filename="82value">value</a>, <var>0</var>, &amp;<a class="local col0 ref" href="#90vallen" title='vallen' data-ref="90vallen" data-ref-filename="90vallen">vallen</a>);</td></tr>
<tr><th id="817">817</th><td>		    <a class="local col1 ref" href="#91cp" title='cp' data-ref="91cp" data-ref-filename="91cp">cp</a> = <a class="local col2 ref" href="#82value" title='value' data-ref="82value" data-ref-filename="82value">value</a>;</td></tr>
<tr><th id="818">818</th><td>		    <b>while</b> (<a class="local col1 ref" href="#91cp" title='cp' data-ref="91cp" data-ref-filename="91cp">cp</a> &lt; <a class="local col2 ref" href="#82value" title='value' data-ref="82value" data-ref-filename="82value">value</a> + <a class="local col0 ref" href="#90vallen" title='vallen' data-ref="90vallen" data-ref-filename="90vallen">vallen</a>)</td></tr>
<tr><th id="819">819</th><td>		    {</td></tr>
<tr><th id="820">820</th><td>			<em>char</em> <dfn class="local col2 decl" id="92op" title='op' data-type='char' data-ref="92op" data-ref-filename="92op">op</dfn>;</td></tr>
<tr><th id="821">821</th><td>			<em>unsigned</em> <em>long</em> <dfn class="local col3 decl" id="93count" title='count' data-type='unsigned long' data-ref="93count" data-ref-filename="93count">count</dfn>;</td></tr>
<tr><th id="822">822</th><td></td></tr>
<tr><th id="823">823</th><td>			<a class="local col2 ref" href="#92op" title='op' data-ref="92op" data-ref-filename="92op">op</a> = *<a class="local col1 ref" href="#91cp" title='cp' data-ref="91cp" data-ref-filename="91cp">cp</a>++;</td></tr>
<tr><th id="824">824</th><td>			<b>if</b> (<a class="local col2 ref" href="#92op" title='op' data-ref="92op" data-ref-filename="92op">op</a> != <kbd>'a'</kbd> &amp;&amp; <a class="local col2 ref" href="#92op" title='op' data-ref="92op" data-ref-filename="92op">op</a>  != <kbd>'d'</kbd>)</td></tr>
<tr><th id="825">825</th><td>			    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"\</q></td></tr>
<tr><th id="826">826</th><td><q>unrecognized operation '\\x%x' in %s"</q>,</td></tr>
<tr><th id="827">827</th><td>				   <a class="local col2 ref" href="#92op" title='op' data-ref="92op" data-ref-filename="92op">op</a>, <a class="local col8 ref" href="#78rcs" title='rcs' data-ref="78rcs" data-ref-filename="78rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="828">828</th><td>			<a class="local col3 ref" href="#93count" title='count' data-ref="93count" data-ref-filename="93count">count</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#strtoul" title='strtoul' data-ref="strtoul" data-ref-filename="strtoul">strtoul</a> (<a class="local col1 ref" href="#91cp" title='cp' data-ref="91cp" data-ref-filename="91cp">cp</a>, (<em>char</em> **) &amp;<a class="local col1 ref" href="#91cp" title='cp' data-ref="91cp" data-ref-filename="91cp">cp</a>, <var>10</var>);</td></tr>
<tr><th id="829">829</th><td>			<b>if</b> (*<a class="local col1 ref" href="#91cp" title='cp' data-ref="91cp" data-ref-filename="91cp">cp</a>++ != <kbd>' '</kbd>)</td></tr>
<tr><th id="830">830</th><td>			    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"space expected in %s revision %s"</q>,</td></tr>
<tr><th id="831">831</th><td>				   <a class="local col8 ref" href="#78rcs" title='rcs' data-ref="78rcs" data-ref-filename="78rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col4 ref" href="#84vnode" title='vnode' data-ref="84vnode" data-ref-filename="84vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="832">832</th><td>			<a class="local col3 ref" href="#93count" title='count' data-ref="93count" data-ref-filename="93count">count</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#strtoul" title='strtoul' data-ref="strtoul" data-ref-filename="strtoul">strtoul</a> (<a class="local col1 ref" href="#91cp" title='cp' data-ref="91cp" data-ref-filename="91cp">cp</a>, (<em>char</em> **) &amp;<a class="local col1 ref" href="#91cp" title='cp' data-ref="91cp" data-ref-filename="91cp">cp</a>, <var>10</var>);</td></tr>
<tr><th id="833">833</th><td>			<b>if</b> (*<a class="local col1 ref" href="#91cp" title='cp' data-ref="91cp" data-ref-filename="91cp">cp</a>++ != <kbd>'\012'</kbd>)</td></tr>
<tr><th id="834">834</th><td>			    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"linefeed expected in %s revision %s"</q>,</td></tr>
<tr><th id="835">835</th><td>				   <a class="local col8 ref" href="#78rcs" title='rcs' data-ref="78rcs" data-ref-filename="78rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col4 ref" href="#84vnode" title='vnode' data-ref="84vnode" data-ref-filename="84vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="836">836</th><td></td></tr>
<tr><th id="837">837</th><td>			<b>if</b> (<a class="local col2 ref" href="#92op" title='op' data-ref="92op" data-ref-filename="92op">op</a> == <kbd>'d'</kbd>)</td></tr>
<tr><th id="838">838</th><td>			    <a class="local col7 ref" href="#87del" title='del' data-ref="87del" data-ref-filename="87del">del</a> += <a class="local col3 ref" href="#93count" title='count' data-ref="93count" data-ref-filename="93count">count</a>;</td></tr>
<tr><th id="839">839</th><td>			<b>else</b></td></tr>
<tr><th id="840">840</th><td>			{</td></tr>
<tr><th id="841">841</th><td>			    <a class="local col6 ref" href="#86add" title='add' data-ref="86add" data-ref-filename="86add">add</a> += <a class="local col3 ref" href="#93count" title='count' data-ref="93count" data-ref-filename="93count">count</a>;</td></tr>
<tr><th id="842">842</th><td>			    <b>while</b> (<a class="local col3 ref" href="#93count" title='count' data-ref="93count" data-ref-filename="93count">count</a> != <var>0</var>)</td></tr>
<tr><th id="843">843</th><td>			    {</td></tr>
<tr><th id="844">844</th><td>				<b>if</b> (*<a class="local col1 ref" href="#91cp" title='cp' data-ref="91cp" data-ref-filename="91cp">cp</a> == <kbd>'\012'</kbd>)</td></tr>
<tr><th id="845">845</th><td>				    --<a class="local col3 ref" href="#93count" title='count' data-ref="93count" data-ref-filename="93count">count</a>;</td></tr>
<tr><th id="846">846</th><td>				<b>else</b> <b>if</b> (<a class="local col1 ref" href="#91cp" title='cp' data-ref="91cp" data-ref-filename="91cp">cp</a> == <a class="local col2 ref" href="#82value" title='value' data-ref="82value" data-ref-filename="82value">value</a> + <a class="local col0 ref" href="#90vallen" title='vallen' data-ref="90vallen" data-ref-filename="90vallen">vallen</a>)</td></tr>
<tr><th id="847">847</th><td>				{</td></tr>
<tr><th id="848">848</th><td>				    <b>if</b> (<a class="local col3 ref" href="#93count" title='count' data-ref="93count" data-ref-filename="93count">count</a> != <var>1</var>)</td></tr>
<tr><th id="849">849</th><td>					<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"\</q></td></tr>
<tr><th id="850">850</th><td><q>premature end of value in %s revision %s"</q>,</td></tr>
<tr><th id="851">851</th><td>					       <a class="local col8 ref" href="#78rcs" title='rcs' data-ref="78rcs" data-ref-filename="78rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col4 ref" href="#84vnode" title='vnode' data-ref="84vnode" data-ref-filename="84vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="852">852</th><td>				    <b>else</b></td></tr>
<tr><th id="853">853</th><td>					<b>break</b>;</td></tr>
<tr><th id="854">854</th><td>				}</td></tr>
<tr><th id="855">855</th><td>				++<a class="local col1 ref" href="#91cp" title='cp' data-ref="91cp" data-ref-filename="91cp">cp</a>;</td></tr>
<tr><th id="856">856</th><td>			    }</td></tr>
<tr><th id="857">857</th><td>			}</td></tr>
<tr><th id="858">858</th><td>		    }</td></tr>
<tr><th id="859">859</th><td>		}</td></tr>
<tr><th id="860">860</th><td></td></tr>
<tr><th id="861">861</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sprintf" title='sprintf' data-ref="sprintf" data-ref-filename="sprintf">sprintf</a> (<a class="local col8 ref" href="#88buf" title='buf' data-ref="88buf" data-ref-filename="88buf">buf</a>, <q>"%lu"</q>, <a class="local col6 ref" href="#86add" title='add' data-ref="86add" data-ref-filename="86add">add</a>);</td></tr>
<tr><th id="862">862</th><td>		<a class="local col9 ref" href="#89kv" title='kv' data-ref="89kv" data-ref-filename="89kv">kv</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a> ();</td></tr>
<tr><th id="863">863</th><td>		<a class="local col9 ref" href="#89kv" title='kv' data-ref="89kv" data-ref-filename="89kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> = <a class="enum" href="hash.h.html#RCSFIELD" title='RCSFIELD' data-ref="RCSFIELD" data-ref-filename="RCSFIELD">RCSFIELD</a>;</td></tr>
<tr><th id="864">864</th><td>		<a class="local col9 ref" href="#89kv" title='kv' data-ref="89kv" data-ref-filename="89kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<q>";add"</q>);</td></tr>
<tr><th id="865">865</th><td>		<a class="local col9 ref" href="#89kv" title='kv' data-ref="89kv" data-ref-filename="89kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col8 ref" href="#88buf" title='buf' data-ref="88buf" data-ref-filename="88buf">buf</a>);</td></tr>
<tr><th id="866">866</th><td>		<b>if</b> (<a class="ref fn" href="hash.h.html#addnode" title='addnode' data-ref="addnode" data-ref-filename="addnode">addnode</a> (<a class="local col4 ref" href="#84vnode" title='vnode' data-ref="84vnode" data-ref-filename="84vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other" title='rcsversnode::other' data-ref="rcsversnode::other" data-ref-filename="rcsversnode..other">other</a>, <a class="local col9 ref" href="#89kv" title='kv' data-ref="89kv" data-ref-filename="89kv">kv</a>) != <var>0</var>)</td></tr>
<tr><th id="867">867</th><td>		{</td></tr>
<tr><th id="868">868</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="869">869</th><td>			   <q>"\</q></td></tr>
<tr><th id="870">870</th><td><q>warning: duplicate key `%s' in version `%s' of RCS file `%s'"</q>,</td></tr>
<tr><th id="871">871</th><td>			   <a class="local col1 ref" href="#81key" title='key' data-ref="81key" data-ref-filename="81key">key</a>, <a class="local col4 ref" href="#84vnode" title='vnode' data-ref="84vnode" data-ref-filename="84vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <a class="local col8 ref" href="#78rcs" title='rcs' data-ref="78rcs" data-ref-filename="78rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="872">872</th><td>		    <a class="ref fn" href="hash.h.html#freenode" title='freenode' data-ref="freenode" data-ref-filename="freenode">freenode</a> (<a class="local col9 ref" href="#89kv" title='kv' data-ref="89kv" data-ref-filename="89kv">kv</a>);</td></tr>
<tr><th id="873">873</th><td>		}</td></tr>
<tr><th id="874">874</th><td></td></tr>
<tr><th id="875">875</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sprintf" title='sprintf' data-ref="sprintf" data-ref-filename="sprintf">sprintf</a> (<a class="local col8 ref" href="#88buf" title='buf' data-ref="88buf" data-ref-filename="88buf">buf</a>, <q>"%lu"</q>, <a class="local col7 ref" href="#87del" title='del' data-ref="87del" data-ref-filename="87del">del</a>);</td></tr>
<tr><th id="876">876</th><td>		<a class="local col9 ref" href="#89kv" title='kv' data-ref="89kv" data-ref-filename="89kv">kv</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a> ();</td></tr>
<tr><th id="877">877</th><td>		<a class="local col9 ref" href="#89kv" title='kv' data-ref="89kv" data-ref-filename="89kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> = <a class="enum" href="hash.h.html#RCSFIELD" title='RCSFIELD' data-ref="RCSFIELD" data-ref-filename="RCSFIELD">RCSFIELD</a>;</td></tr>
<tr><th id="878">878</th><td>		<a class="local col9 ref" href="#89kv" title='kv' data-ref="89kv" data-ref-filename="89kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<q>";delete"</q>);</td></tr>
<tr><th id="879">879</th><td>		<a class="local col9 ref" href="#89kv" title='kv' data-ref="89kv" data-ref-filename="89kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col8 ref" href="#88buf" title='buf' data-ref="88buf" data-ref-filename="88buf">buf</a>);</td></tr>
<tr><th id="880">880</th><td>		<b>if</b> (<a class="ref fn" href="hash.h.html#addnode" title='addnode' data-ref="addnode" data-ref-filename="addnode">addnode</a> (<a class="local col4 ref" href="#84vnode" title='vnode' data-ref="84vnode" data-ref-filename="84vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other" title='rcsversnode::other' data-ref="rcsversnode::other" data-ref-filename="rcsversnode..other">other</a>, <a class="local col9 ref" href="#89kv" title='kv' data-ref="89kv" data-ref-filename="89kv">kv</a>) != <var>0</var>)</td></tr>
<tr><th id="881">881</th><td>		{</td></tr>
<tr><th id="882">882</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="883">883</th><td>			   <q>"\</q></td></tr>
<tr><th id="884">884</th><td><q>warning: duplicate key `%s' in version `%s' of RCS file `%s'"</q>,</td></tr>
<tr><th id="885">885</th><td>			   <a class="local col1 ref" href="#81key" title='key' data-ref="81key" data-ref-filename="81key">key</a>, <a class="local col4 ref" href="#84vnode" title='vnode' data-ref="84vnode" data-ref-filename="84vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <a class="local col8 ref" href="#78rcs" title='rcs' data-ref="78rcs" data-ref-filename="78rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="886">886</th><td>		    <a class="ref fn" href="hash.h.html#freenode" title='freenode' data-ref="freenode" data-ref-filename="freenode">freenode</a> (<a class="local col9 ref" href="#89kv" title='kv' data-ref="89kv" data-ref-filename="89kv">kv</a>);</td></tr>
<tr><th id="887">887</th><td>		}</td></tr>
<tr><th id="888">888</th><td>	    }</td></tr>
<tr><th id="889">889</th><td></td></tr>
<tr><th id="890">890</th><td>	    <i>/* We have found the "text" key which ends the data for</i></td></tr>
<tr><th id="891">891</th><td><i>               this revision.  Break out of the loop and go on to the</i></td></tr>
<tr><th id="892">892</th><td><i>               next revision.  */</i></td></tr>
<tr><th id="893">893</th><td>	    <b>break</b>;</td></tr>
<tr><th id="894">894</th><td>	}</td></tr>
<tr><th id="895">895</th><td>    }</td></tr>
<tr><th id="896">896</th><td></td></tr>
<tr><th id="897">897</th><td>    <a class="tu ref fn" href="#rcsbuf_cache" title='rcsbuf_cache' data-use='c' data-ref="rcsbuf_cache" data-ref-filename="rcsbuf_cache">rcsbuf_cache</a> (<a class="local col8 ref" href="#78rcs" title='rcs' data-ref="78rcs" data-ref-filename="78rcs">rcs</a>, &amp;<a class="local col0 ref" href="#80rcsbuf" title='rcsbuf' data-ref="80rcsbuf" data-ref-filename="80rcsbuf">rcsbuf</a>);</td></tr>
<tr><th id="898">898</th><td>}</td></tr>
<tr><th id="899">899</th><td></td></tr>
<tr><th id="900">900</th><td></td></tr>
<tr><th id="901">901</th><td></td></tr>
<tr><th id="902">902</th><td><i>/*</i></td></tr>
<tr><th id="903">903</th><td><i> * freercsnode - free up the info for an RCSNode</i></td></tr>
<tr><th id="904">904</th><td><i> */</i></td></tr>
<tr><th id="905">905</th><td><em>void</em></td></tr>
<tr><th id="906">906</th><td><dfn class="decl def fn" id="freercsnode" title='freercsnode' data-ref="freercsnode" data-ref-filename="freercsnode">freercsnode</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> **<dfn class="local col4 decl" id="94rnodep" title='rnodep' data-type='RCSNode **' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</dfn>)</td></tr>
<tr><th id="907">907</th><td>{</td></tr>
<tr><th id="908">908</th><td>    <b>if</b> (<a class="local col4 ref" href="#94rnodep" title='rnodep' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || *<a class="local col4 ref" href="#94rnodep" title='rnodep' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="909">909</th><td>	<b>return</b>;</td></tr>
<tr><th id="910">910</th><td></td></tr>
<tr><th id="911">911</th><td>    ((*<a class="local col4 ref" href="#94rnodep" title='rnodep' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</a>)-&gt;<a class="ref field" href="rcs.h.html#rcsnode::refcount" title='rcsnode::refcount' data-ref="rcsnode::refcount" data-ref-filename="rcsnode..refcount">refcount</a>)--;</td></tr>
<tr><th id="912">912</th><td>    <b>if</b> ((*<a class="local col4 ref" href="#94rnodep" title='rnodep' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</a>)-&gt;<a class="ref field" href="rcs.h.html#rcsnode::refcount" title='rcsnode::refcount' data-ref="rcsnode::refcount" data-ref-filename="rcsnode..refcount">refcount</a> != <var>0</var>)</td></tr>
<tr><th id="913">913</th><td>    {</td></tr>
<tr><th id="914">914</th><td>	*<a class="local col4 ref" href="#94rnodep" title='rnodep' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="915">915</th><td>	<b>return</b>;</td></tr>
<tr><th id="916">916</th><td>    }</td></tr>
<tr><th id="917">917</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> ((*<a class="local col4 ref" href="#94rnodep" title='rnodep' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</a>)-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="918">918</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> ((*<a class="local col4 ref" href="#94rnodep" title='rnodep' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</a>)-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="919">919</th><td>    <b>if</b> ((*<a class="local col4 ref" href="#94rnodep" title='rnodep' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</a>)-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="920">920</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> ((*<a class="local col4 ref" href="#94rnodep" title='rnodep' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</a>)-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>);</td></tr>
<tr><th id="921">921</th><td>    <b>if</b> ((*<a class="local col4 ref" href="#94rnodep" title='rnodep' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</a>)-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="922">922</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> ((*<a class="local col4 ref" href="#94rnodep" title='rnodep' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</a>)-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a>);</td></tr>
<tr><th id="923">923</th><td>    <a class="tu ref fn" href="#free_rcsnode_contents" title='free_rcsnode_contents' data-use='c' data-ref="free_rcsnode_contents" data-ref-filename="free_rcsnode_contents">free_rcsnode_contents</a> (*<a class="local col4 ref" href="#94rnodep" title='rnodep' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</a>);</td></tr>
<tr><th id="924">924</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (*<a class="local col4 ref" href="#94rnodep" title='rnodep' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</a>);</td></tr>
<tr><th id="925">925</th><td>    *<a class="local col4 ref" href="#94rnodep" title='rnodep' data-ref="94rnodep" data-ref-filename="94rnodep">rnodep</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="926">926</th><td>}</td></tr>
<tr><th id="927">927</th><td></td></tr>
<tr><th id="928">928</th><td></td></tr>
<tr><th id="929">929</th><td></td></tr>
<tr><th id="930">930</th><td><i  data-doc="free_rcsnode_contents">/*</i></td></tr>
<tr><th id="931">931</th><td><i  data-doc="free_rcsnode_contents"> * free_rcsnode_contents - free up the contents of an RCSNode without</i></td></tr>
<tr><th id="932">932</th><td><i  data-doc="free_rcsnode_contents"> * freeing the node itself, or the file name, or the head, or the</i></td></tr>
<tr><th id="933">933</th><td><i  data-doc="free_rcsnode_contents"> * path.  This returns the RCSNode to the state it is in immediately</i></td></tr>
<tr><th id="934">934</th><td><i  data-doc="free_rcsnode_contents"> * after a call to RCS_parse.</i></td></tr>
<tr><th id="935">935</th><td><i  data-doc="free_rcsnode_contents"> */</i></td></tr>
<tr><th id="936">936</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="937">937</th><td><dfn class="tu decl def fn" id="free_rcsnode_contents" title='free_rcsnode_contents' data-type='void free_rcsnode_contents(RCSNode * rnode)' data-ref="free_rcsnode_contents" data-ref-filename="free_rcsnode_contents">free_rcsnode_contents</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col5 decl" id="95rnode" title='rnode' data-type='RCSNode *' data-ref="95rnode" data-ref-filename="95rnode">rnode</dfn>)</td></tr>
<tr><th id="938">938</th><td>{</td></tr>
<tr><th id="939">939</th><td>    <a class="ref fn" href="hash.h.html#dellist" title='dellist' data-ref="dellist" data-ref-filename="dellist">dellist</a> (&amp;<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>);</td></tr>
<tr><th id="940">940</th><td>    <b>if</b> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols" title='rcsnode::symbols' data-ref="rcsnode::symbols" data-ref-filename="rcsnode..symbols">symbols</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="941">941</th><td>	<a class="ref fn" href="hash.h.html#dellist" title='dellist' data-ref="dellist" data-ref-filename="dellist">dellist</a> (&amp;<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols" title='rcsnode::symbols' data-ref="rcsnode::symbols" data-ref-filename="rcsnode..symbols">symbols</a>);</td></tr>
<tr><th id="942">942</th><td>    <b>if</b> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="943">943</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a>);</td></tr>
<tr><th id="944">944</th><td>    <b>if</b> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="945">945</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a>);</td></tr>
<tr><th id="946">946</th><td>    <b>if</b> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::other" title='rcsnode::other' data-ref="rcsnode::other" data-ref-filename="rcsnode..other">other</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="947">947</th><td>	<a class="ref fn" href="hash.h.html#dellist" title='dellist' data-ref="dellist" data-ref-filename="dellist">dellist</a> (&amp;<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::other" title='rcsnode::other' data-ref="rcsnode::other" data-ref-filename="rcsnode..other">other</a>);</td></tr>
<tr><th id="948">948</th><td>    <b>if</b> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="949">949</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a>);</td></tr>
<tr><th id="950">950</th><td>    <b>if</b> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks_data" title='rcsnode::locks_data' data-ref="rcsnode::locks_data" data-ref-filename="rcsnode..locks_data">locks_data</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="951">951</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks_data" title='rcsnode::locks_data' data-ref="rcsnode::locks_data" data-ref-filename="rcsnode..locks_data">locks_data</a>);</td></tr>
<tr><th id="952">952</th><td>    <b>if</b> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks" title='rcsnode::locks' data-ref="rcsnode::locks" data-ref-filename="rcsnode..locks">locks</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="953">953</th><td>	<a class="ref fn" href="hash.h.html#dellist" title='dellist' data-ref="dellist" data-ref-filename="dellist">dellist</a> (&amp;<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks" title='rcsnode::locks' data-ref="rcsnode::locks" data-ref-filename="rcsnode..locks">locks</a>);</td></tr>
<tr><th id="954">954</th><td>    <b>if</b> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::comment" title='rcsnode::comment' data-ref="rcsnode::comment" data-ref-filename="rcsnode..comment">comment</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="955">955</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::comment" title='rcsnode::comment' data-ref="rcsnode::comment" data-ref-filename="rcsnode..comment">comment</a>);</td></tr>
<tr><th id="956">956</th><td>    <b>if</b> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::desc" title='rcsnode::desc' data-ref="rcsnode::desc" data-ref-filename="rcsnode..desc">desc</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="957">957</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col5 ref" href="#95rnode" title='rnode' data-ref="95rnode" data-ref-filename="95rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::desc" title='rcsnode::desc' data-ref="rcsnode::desc" data-ref-filename="rcsnode..desc">desc</a>);</td></tr>
<tr><th id="958">958</th><td>}</td></tr>
<tr><th id="959">959</th><td></td></tr>
<tr><th id="960">960</th><td></td></tr>
<tr><th id="961">961</th><td></td></tr>
<tr><th id="962">962</th><td><i>/* free_rcsvers_contents -- free up the contents of an RCSVers node,</i></td></tr>
<tr><th id="963">963</th><td><i>   but also free the pointer to the node itself. */</i></td></tr>
<tr><th id="964">964</th><td><i  data-doc="free_rcsvers_contents">/* Note: The `hardlinks' list is *not* freed, since it is merely a</i></td></tr>
<tr><th id="965">965</th><td><i  data-doc="free_rcsvers_contents">   pointer into the `hardlist' structure (defined in hardlink.c), and</i></td></tr>
<tr><th id="966">966</th><td><i  data-doc="free_rcsvers_contents">   that structure is freed elsewhere in the program. */</i></td></tr>
<tr><th id="967">967</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="968">968</th><td><dfn class="tu decl def fn" id="free_rcsvers_contents" title='free_rcsvers_contents' data-type='void free_rcsvers_contents(RCSVers * rnode)' data-ref="free_rcsvers_contents" data-ref-filename="free_rcsvers_contents">free_rcsvers_contents</dfn> (<a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col6 decl" id="96rnode" title='rnode' data-type='RCSVers *' data-ref="96rnode" data-ref-filename="96rnode">rnode</dfn>)</td></tr>
<tr><th id="969">969</th><td>{</td></tr>
<tr><th id="970">970</th><td>    <b>if</b> (<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="971">971</th><td>	<a class="ref fn" href="hash.h.html#dellist" title='dellist' data-ref="dellist" data-ref-filename="dellist">dellist</a> (&amp;<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>);</td></tr>
<tr><th id="972">972</th><td>    <b>if</b> (<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="973">973</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>);</td></tr>
<tr><th id="974">974</th><td>    <b>if</b> (<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="975">975</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>);</td></tr>
<tr><th id="976">976</th><td>    <b>if</b> (<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::author" title='rcsversnode::author' data-ref="rcsversnode::author" data-ref-filename="rcsversnode..author">author</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="977">977</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::author" title='rcsversnode::author' data-ref="rcsversnode::author" data-ref-filename="rcsversnode..author">author</a>);</td></tr>
<tr><th id="978">978</th><td>    <b>if</b> (<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::state" title='rcsversnode::state' data-ref="rcsversnode::state" data-ref-filename="rcsversnode..state">state</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="979">979</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::state" title='rcsversnode::state' data-ref="rcsversnode::state" data-ref-filename="rcsversnode..state">state</a>);</td></tr>
<tr><th id="980">980</th><td>    <b>if</b> (<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other" title='rcsversnode::other' data-ref="rcsversnode::other" data-ref-filename="rcsversnode..other">other</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="981">981</th><td>	<a class="ref fn" href="hash.h.html#dellist" title='dellist' data-ref="dellist" data-ref-filename="dellist">dellist</a> (&amp;<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other" title='rcsversnode::other' data-ref="rcsversnode::other" data-ref-filename="rcsversnode..other">other</a>);</td></tr>
<tr><th id="982">982</th><td>    <b>if</b> (<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other_delta" title='rcsversnode::other_delta' data-ref="rcsversnode::other_delta" data-ref-filename="rcsversnode..other_delta">other_delta</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="983">983</th><td>	<a class="ref fn" href="hash.h.html#dellist" title='dellist' data-ref="dellist" data-ref-filename="dellist">dellist</a> (&amp;<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other_delta" title='rcsversnode::other_delta' data-ref="rcsversnode::other_delta" data-ref-filename="rcsversnode..other_delta">other_delta</a>);</td></tr>
<tr><th id="984">984</th><td>    <b>if</b> (<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="985">985</th><td>	<a class="tu ref fn" href="#freedeltatext" title='freedeltatext' data-use='c' data-ref="freedeltatext" data-ref-filename="freedeltatext">freedeltatext</a> (<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>);</td></tr>
<tr><th id="986">986</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col6 ref" href="#96rnode" title='rnode' data-ref="96rnode" data-ref-filename="96rnode">rnode</a>);</td></tr>
<tr><th id="987">987</th><td>}</td></tr>
<tr><th id="988">988</th><td></td></tr>
<tr><th id="989">989</th><td></td></tr>
<tr><th id="990">990</th><td></td></tr>
<tr><th id="991">991</th><td><i  data-doc="rcsvers_delproc">/*</i></td></tr>
<tr><th id="992">992</th><td><i  data-doc="rcsvers_delproc"> * rcsvers_delproc - free up an RCSVers type node</i></td></tr>
<tr><th id="993">993</th><td><i  data-doc="rcsvers_delproc"> */</i></td></tr>
<tr><th id="994">994</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="995">995</th><td><dfn class="tu decl def fn" id="rcsvers_delproc" title='rcsvers_delproc' data-type='void rcsvers_delproc(Node * p)' data-ref="rcsvers_delproc" data-ref-filename="rcsvers_delproc">rcsvers_delproc</dfn> (<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col7 decl" id="97p" title='p' data-type='Node *' data-ref="97p" data-ref-filename="97p">p</dfn>)</td></tr>
<tr><th id="996">996</th><td>{</td></tr>
<tr><th id="997">997</th><td>    <a class="tu ref fn" href="#free_rcsvers_contents" title='free_rcsvers_contents' data-use='c' data-ref="free_rcsvers_contents" data-ref-filename="free_rcsvers_contents">free_rcsvers_contents</a> (<a class="local col7 ref" href="#97p" title='p' data-ref="97p" data-ref-filename="97p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>);</td></tr>
<tr><th id="998">998</th><td>}</td></tr>
<tr><th id="999">999</th><td></td></tr>
<tr><th id="1000">1000</th><td></td></tr>
<tr><th id="1001">1001</th><td></td></tr>
<tr><th id="1002">1002</th><td><i>/* These functions retrieve keys and values from an RCS file using a</i></td></tr>
<tr><th id="1003">1003</th><td><i>   buffer.  We use this somewhat complex approach because it turns out</i></td></tr>
<tr><th id="1004">1004</th><td><i>   that for many common operations, CVS spends most of its time</i></td></tr>
<tr><th id="1005">1005</th><td><i>   reading keys, so it's worth doing some fairly hairy optimization.  */</i></td></tr>
<tr><th id="1006">1006</th><td></td></tr>
<tr><th id="1007">1007</th><td><i>/* The number of bytes we try to read each time we need more data.  */</i></td></tr>
<tr><th id="1008">1008</th><td></td></tr>
<tr><th id="1009">1009</th><td><u>#define <dfn class="macro" id="_M/RCSBUF_BUFSIZE" data-ref="_M/RCSBUF_BUFSIZE">RCSBUF_BUFSIZE</dfn> (8192)</u></td></tr>
<tr><th id="1010">1010</th><td></td></tr>
<tr><th id="1011">1011</th><td><i  data-doc="rcsbuf_buffer">/* The buffer we use to store data.  This grows as needed.  */</i></td></tr>
<tr><th id="1012">1012</th><td></td></tr>
<tr><th id="1013">1013</th><td><em>static</em> <em>char</em> *<dfn class="tu decl def" id="rcsbuf_buffer" title='rcsbuf_buffer' data-type='char *' data-ref="rcsbuf_buffer" data-ref-filename="rcsbuf_buffer">rcsbuf_buffer</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1014">1014</th><td><em>static</em> <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="tu decl def" id="rcsbuf_buffer_size" title='rcsbuf_buffer_size' data-type='size_t' data-ref="rcsbuf_buffer_size" data-ref-filename="rcsbuf_buffer_size">rcsbuf_buffer_size</dfn> = <var>0</var>;</td></tr>
<tr><th id="1015">1015</th><td></td></tr>
<tr><th id="1016">1016</th><td><i  data-doc="rcsbuf_inuse">/* Whether rcsbuf_buffer is in use.  This is used as a sanity check.  */</i></td></tr>
<tr><th id="1017">1017</th><td></td></tr>
<tr><th id="1018">1018</th><td><em>static</em> <em>int</em> <dfn class="tu decl def" id="rcsbuf_inuse" title='rcsbuf_inuse' data-type='int' data-ref="rcsbuf_inuse" data-ref-filename="rcsbuf_inuse">rcsbuf_inuse</dfn>;</td></tr>
<tr><th id="1019">1019</th><td></td></tr>
<tr><th id="1020">1020</th><td><i  data-doc="rcsbuf_open">/* Set up to start gathering keys and values from an RCS file.  This</i></td></tr>
<tr><th id="1021">1021</th><td><i  data-doc="rcsbuf_open">   initializes RCSBUF.  */</i></td></tr>
<tr><th id="1022">1022</th><td></td></tr>
<tr><th id="1023">1023</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1024">1024</th><td><dfn class="tu decl def fn" id="rcsbuf_open" title='rcsbuf_open' data-type='void rcsbuf_open(struct rcsbuffer * rcsbuf, FILE * fp, const char * filename, unsigned long pos)' data-ref="rcsbuf_open" data-ref-filename="rcsbuf_open">rcsbuf_open</dfn> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col8 decl" id="98rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="98rcsbuf" data-ref-filename="98rcsbuf">rcsbuf</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col9 decl" id="99fp" title='fp' data-type='FILE *' data-ref="99fp" data-ref-filename="99fp">fp</dfn>, <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="100filename" title='filename' data-type='const char *' data-ref="100filename" data-ref-filename="100filename">filename</dfn>,</td></tr>
<tr><th id="1025">1025</th><td>	     <em>long</em> <em>unsigned</em> <em>int</em> <dfn class="local col1 decl" id="101pos" title='pos' data-type='unsigned long' data-ref="101pos" data-ref-filename="101pos">pos</dfn>)</td></tr>
<tr><th id="1026">1026</th><td>{</td></tr>
<tr><th id="1027">1027</th><td>    <b>if</b> (<a class="tu ref" href="#rcsbuf_inuse" title='rcsbuf_inuse' data-use='r' data-ref="rcsbuf_inuse" data-ref-filename="rcsbuf_inuse">rcsbuf_inuse</a>)</td></tr>
<tr><th id="1028">1028</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"rcsbuf_open: internal error"</q>);</td></tr>
<tr><th id="1029">1029</th><td>    <a class="tu ref" href="#rcsbuf_inuse" title='rcsbuf_inuse' data-use='w' data-ref="rcsbuf_inuse" data-ref-filename="rcsbuf_inuse">rcsbuf_inuse</a> = <var>1</var>;</td></tr>
<tr><th id="1030">1030</th><td></td></tr>
<tr><th id="1031">1031</th><td><u>#<span data-ppcond="1031">ifdef</span> <a class="macro" href="../../include/config.h.html#498" data-ref="_M/HAVE_MMAP">HAVE_MMAP</a></u></td></tr>
<tr><th id="1032">1032</th><td>    {</td></tr>
<tr><th id="1033">1033</th><td>	<i>/* When we have mmap, it is much more efficient to let the system do the</i></td></tr>
<tr><th id="1034">1034</th><td><i>	 * buffering and caching for us</i></td></tr>
<tr><th id="1035">1035</th><td><i>	 */</i></td></tr>
<tr><th id="1036">1036</th><td>	<b>struct</b> <a class="type" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat" title='stat' data-ref="stat" data-ref-filename="stat">stat</a> <dfn class="local col2 decl" id="102fs" title='fs' data-type='struct stat' data-ref="102fs" data-ref-filename="102fs">fs</dfn>;</td></tr>
<tr><th id="1037">1037</th><td>	<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col3 decl" id="103mmap_off" title='mmap_off' data-type='size_t' data-ref="103mmap_off" data-ref-filename="103mmap_off">mmap_off</dfn> = <var>0</var>;</td></tr>
<tr><th id="1038">1038</th><td></td></tr>
<tr><th id="1039">1039</th><td>	<b>if</b> ( <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#__fstat50" title='fstat' data-ref="__fstat50" data-ref-filename="__fstat50">fstat</a> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#508" title="((fp)-&gt;_file == -1 ? -1 : (int)(unsigned short)(fp)-&gt;_file)" data-ref="_M/fileno">fileno</a>(<a class="local col9 ref" href="#99fp" title='fp' data-ref="99fp" data-ref-filename="99fp">fp</a>), &amp;<a class="local col2 ref" href="#102fs" title='fs' data-ref="102fs" data-ref-filename="102fs">fs</a>) &lt; <var>0</var> )</td></tr>
<tr><th id="1040">1040</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> ( <var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"Could not stat RCS archive %s for mapping"</q>, <a class="local col0 ref" href="#100filename" title='filename' data-ref="100filename" data-ref-filename="100filename">filename</a> );</td></tr>
<tr><th id="1041">1041</th><td></td></tr>
<tr><th id="1042">1042</th><td>	<b>if</b> (<a class="local col1 ref" href="#101pos" title='pos' data-ref="101pos" data-ref-filename="101pos">pos</a>)</td></tr>
<tr><th id="1043">1043</th><td>	{</td></tr>
<tr><th id="1044">1044</th><td>	    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col4 decl" id="104ps" title='ps' data-type='size_t' data-ref="104ps" data-ref-filename="104ps">ps</dfn> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/unistd.h.html#getpagesize" title='getpagesize' data-ref="getpagesize" data-ref-filename="getpagesize">getpagesize</a> ();</td></tr>
<tr><th id="1045">1045</th><td>	    <a class="local col3 ref" href="#103mmap_off" title='mmap_off' data-ref="103mmap_off" data-ref-filename="103mmap_off">mmap_off</a> = ( <a class="local col1 ref" href="#101pos" title='pos' data-ref="101pos" data-ref-filename="101pos">pos</a> / <a class="local col4 ref" href="#104ps" title='ps' data-ref="104ps" data-ref-filename="104ps">ps</a> ) * <a class="local col4 ref" href="#104ps" title='ps' data-ref="104ps" data-ref-filename="104ps">ps</a>;</td></tr>
<tr><th id="1046">1046</th><td>	}</td></tr>
<tr><th id="1047">1047</th><td></td></tr>
<tr><th id="1048">1048</th><td>	<i>/* Map private here since this particular buffer is read only */</i></td></tr>
<tr><th id="1049">1049</th><td>	<a class="tu ref" href="#rcsbuf_buffer" title='rcsbuf_buffer' data-use='w' data-ref="rcsbuf_buffer" data-ref-filename="rcsbuf_buffer">rcsbuf_buffer</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/mman.h.html#mmap" title='mmap' data-ref="mmap" data-ref-filename="mmap">mmap</a> ( <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <a class="local col2 ref" href="#102fs" title='fs' data-ref="102fs" data-ref-filename="102fs">fs</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat::st_size" title='stat::st_size' data-ref="stat::st_size" data-ref-filename="stat..st_size">st_size</a> - <a class="local col3 ref" href="#103mmap_off" title='mmap_off' data-ref="103mmap_off" data-ref-filename="103mmap_off">mmap_off</a>,</td></tr>
<tr><th id="1050">1050</th><td>				<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/mman.h.html#63" title="0x01" data-ref="_M/PROT_READ">PROT_READ</a> | <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/mman.h.html#64" title="0x02" data-ref="_M/PROT_WRITE">PROT_WRITE</a>,</td></tr>
<tr><th id="1051">1051</th><td>				<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/mman.h.html#82" title="0x0002" data-ref="_M/MAP_PRIVATE">MAP_PRIVATE</a>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#508" title="((fp)-&gt;_file == -1 ? -1 : (int)(unsigned short)(fp)-&gt;_file)" data-ref="_M/fileno">fileno</a>(<a class="local col9 ref" href="#99fp" title='fp' data-ref="99fp" data-ref-filename="99fp">fp</a>), <a class="local col3 ref" href="#103mmap_off" title='mmap_off' data-ref="103mmap_off" data-ref-filename="103mmap_off">mmap_off</a> );</td></tr>
<tr><th id="1052">1052</th><td>	<b>if</b> ( <a class="tu ref" href="#rcsbuf_buffer" title='rcsbuf_buffer' data-use='r' data-ref="rcsbuf_buffer" data-ref-filename="rcsbuf_buffer">rcsbuf_buffer</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || <a class="tu ref" href="#rcsbuf_buffer" title='rcsbuf_buffer' data-use='r' data-ref="rcsbuf_buffer" data-ref-filename="rcsbuf_buffer">rcsbuf_buffer</a> == <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/mman.h.html#167" title="((void *) -1)" data-ref="_M/MAP_FAILED">MAP_FAILED</a> )</td></tr>
<tr><th id="1053">1053</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> ( <var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"Could not map memory to RCS archive %s"</q>, <a class="local col0 ref" href="#100filename" title='filename' data-ref="100filename" data-ref-filename="100filename">filename</a> );</td></tr>
<tr><th id="1054">1054</th><td></td></tr>
<tr><th id="1055">1055</th><td>	<a class="tu ref" href="#rcsbuf_buffer_size" title='rcsbuf_buffer_size' data-use='w' data-ref="rcsbuf_buffer_size" data-ref-filename="rcsbuf_buffer_size">rcsbuf_buffer_size</a> = <a class="local col2 ref" href="#102fs" title='fs' data-ref="102fs" data-ref-filename="102fs">fs</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat::st_size" title='stat::st_size' data-ref="stat::st_size" data-ref-filename="stat..st_size">st_size</a> - <a class="local col3 ref" href="#103mmap_off" title='mmap_off' data-ref="103mmap_off" data-ref-filename="103mmap_off">mmap_off</a>;</td></tr>
<tr><th id="1056">1056</th><td>	<a class="local col8 ref" href="#98rcsbuf" title='rcsbuf' data-ref="98rcsbuf" data-ref-filename="98rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptr" title='rcsbuffer::ptr' data-ref="rcsbuffer::ptr" data-ref-filename="rcsbuffer..ptr">ptr</a> = <a class="tu ref" href="#rcsbuf_buffer" title='rcsbuf_buffer' data-use='r' data-ref="rcsbuf_buffer" data-ref-filename="rcsbuf_buffer">rcsbuf_buffer</a> + <a class="local col1 ref" href="#101pos" title='pos' data-ref="101pos" data-ref-filename="101pos">pos</a> - <a class="local col3 ref" href="#103mmap_off" title='mmap_off' data-ref="103mmap_off" data-ref-filename="103mmap_off">mmap_off</a>;</td></tr>
<tr><th id="1057">1057</th><td>	<a class="local col8 ref" href="#98rcsbuf" title='rcsbuf' data-ref="98rcsbuf" data-ref-filename="98rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a> = <a class="tu ref" href="#rcsbuf_buffer" title='rcsbuf_buffer' data-use='r' data-ref="rcsbuf_buffer" data-ref-filename="rcsbuf_buffer">rcsbuf_buffer</a> + <a class="local col2 ref" href="#102fs" title='fs' data-ref="102fs" data-ref-filename="102fs">fs</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat::st_size" title='stat::st_size' data-ref="stat::st_size" data-ref-filename="stat..st_size">st_size</a> - <a class="local col3 ref" href="#103mmap_off" title='mmap_off' data-ref="103mmap_off" data-ref-filename="103mmap_off">mmap_off</a>;</td></tr>
<tr><th id="1058">1058</th><td>	<a class="local col8 ref" href="#98rcsbuf" title='rcsbuf' data-ref="98rcsbuf" data-ref-filename="98rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::pos" title='rcsbuffer::pos' data-ref="rcsbuffer::pos" data-ref-filename="rcsbuffer..pos">pos</a> = <a class="local col3 ref" href="#103mmap_off" title='mmap_off' data-ref="103mmap_off" data-ref-filename="103mmap_off">mmap_off</a>;</td></tr>
<tr><th id="1059">1059</th><td>    }</td></tr>
<tr><th id="1060">1060</th><td><u>#<span data-ppcond="1031">else</span> /* !HAVE_MMAP */</u></td></tr>
<tr><th id="1061">1061</th><td>    <b>if</b> (rcsbuf_buffer_size &lt; RCSBUF_BUFSIZE)</td></tr>
<tr><th id="1062">1062</th><td>	expand_string (&amp;rcsbuf_buffer, &amp;rcsbuf_buffer_size, RCSBUF_BUFSIZE);</td></tr>
<tr><th id="1063">1063</th><td></td></tr>
<tr><th id="1064">1064</th><td>    rcsbuf-&gt;ptr = rcsbuf_buffer;</td></tr>
<tr><th id="1065">1065</th><td>    rcsbuf-&gt;ptrend = rcsbuf_buffer;</td></tr>
<tr><th id="1066">1066</th><td>    rcsbuf-&gt;pos = pos;</td></tr>
<tr><th id="1067">1067</th><td><u>#<span data-ppcond="1031">endif</span> /* HAVE_MMAP */</u></td></tr>
<tr><th id="1068">1068</th><td>    <a class="local col8 ref" href="#98rcsbuf" title='rcsbuf' data-ref="98rcsbuf" data-ref-filename="98rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::fp" title='rcsbuffer::fp' data-ref="rcsbuffer::fp" data-ref-filename="rcsbuffer..fp">fp</a> = <a class="local col9 ref" href="#99fp" title='fp' data-ref="99fp" data-ref-filename="99fp">fp</a>;</td></tr>
<tr><th id="1069">1069</th><td>    <a class="local col8 ref" href="#98rcsbuf" title='rcsbuf' data-ref="98rcsbuf" data-ref-filename="98rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::filename" title='rcsbuffer::filename' data-ref="rcsbuffer::filename" data-ref-filename="rcsbuffer..filename">filename</a> = <a class="local col0 ref" href="#100filename" title='filename' data-ref="100filename" data-ref-filename="100filename">filename</a>;</td></tr>
<tr><th id="1070">1070</th><td>    <a class="local col8 ref" href="#98rcsbuf" title='rcsbuf' data-ref="98rcsbuf" data-ref-filename="98rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::vlen" title='rcsbuffer::vlen' data-ref="rcsbuffer::vlen" data-ref-filename="rcsbuffer..vlen">vlen</a> = <var>0</var>;</td></tr>
<tr><th id="1071">1071</th><td>    <a class="local col8 ref" href="#98rcsbuf" title='rcsbuf' data-ref="98rcsbuf" data-ref-filename="98rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::at_string" title='rcsbuffer::at_string' data-ref="rcsbuffer::at_string" data-ref-filename="rcsbuffer..at_string">at_string</a> = <var>0</var>;</td></tr>
<tr><th id="1072">1072</th><td>    <a class="local col8 ref" href="#98rcsbuf" title='rcsbuf' data-ref="98rcsbuf" data-ref-filename="98rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::embedded_at" title='rcsbuffer::embedded_at' data-ref="rcsbuffer::embedded_at" data-ref-filename="rcsbuffer..embedded_at">embedded_at</a> = <var>0</var>;</td></tr>
<tr><th id="1073">1073</th><td>}</td></tr>
<tr><th id="1074">1074</th><td></td></tr>
<tr><th id="1075">1075</th><td></td></tr>
<tr><th id="1076">1076</th><td></td></tr>
<tr><th id="1077">1077</th><td><i  data-doc="rcsbuf_close">/* Stop gathering keys from an RCS file.  */</i></td></tr>
<tr><th id="1078">1078</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1079">1079</th><td><dfn class="tu decl def fn" id="rcsbuf_close" title='rcsbuf_close' data-type='void rcsbuf_close(struct rcsbuffer * rcsbuf)' data-ref="rcsbuf_close" data-ref-filename="rcsbuf_close">rcsbuf_close</dfn> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col5 decl" id="105rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="105rcsbuf" data-ref-filename="105rcsbuf">rcsbuf</dfn>)</td></tr>
<tr><th id="1080">1080</th><td>{</td></tr>
<tr><th id="1081">1081</th><td>    <b>if</b> (! <a class="tu ref" href="#rcsbuf_inuse" title='rcsbuf_inuse' data-use='r' data-ref="rcsbuf_inuse" data-ref-filename="rcsbuf_inuse">rcsbuf_inuse</a>)</td></tr>
<tr><th id="1082">1082</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"rcsbuf_close: internal error"</q>);</td></tr>
<tr><th id="1083">1083</th><td><u>#<span data-ppcond="1083">ifdef</span> <a class="macro" href="../../include/config.h.html#498" data-ref="_M/HAVE_MMAP">HAVE_MMAP</a></u></td></tr>
<tr><th id="1084">1084</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/mman.h.html#munmap" title='munmap' data-ref="munmap" data-ref-filename="munmap">munmap</a> ( <a class="tu ref" href="#rcsbuf_buffer" title='rcsbuf_buffer' data-use='r' data-ref="rcsbuf_buffer" data-ref-filename="rcsbuf_buffer">rcsbuf_buffer</a>, <a class="tu ref" href="#rcsbuf_buffer_size" title='rcsbuf_buffer_size' data-use='r' data-ref="rcsbuf_buffer_size" data-ref-filename="rcsbuf_buffer_size">rcsbuf_buffer_size</a> );</td></tr>
<tr><th id="1085">1085</th><td><u>#<span data-ppcond="1083">endif</span></u></td></tr>
<tr><th id="1086">1086</th><td>    <a class="tu ref" href="#rcsbuf_inuse" title='rcsbuf_inuse' data-use='w' data-ref="rcsbuf_inuse" data-ref-filename="rcsbuf_inuse">rcsbuf_inuse</a> = <var>0</var>;</td></tr>
<tr><th id="1087">1087</th><td>}</td></tr>
<tr><th id="1088">1088</th><td></td></tr>
<tr><th id="1089">1089</th><td></td></tr>
<tr><th id="1090">1090</th><td></td></tr>
<tr><th id="1091">1091</th><td><i>/* Read a key/value pair from an RCS file.  This sets *KEYP to point</i></td></tr>
<tr><th id="1092">1092</th><td><i>   to the key, and *VALUEP to point to the value.  A missing or empty</i></td></tr>
<tr><th id="1093">1093</th><td><i>   value is indicated by setting *VALUEP to NULL.</i></td></tr>
<tr><th id="1094">1094</th><td><i></i></td></tr>
<tr><th id="1095">1095</th><td><i>   This function returns 1 on success, or 0 on EOF.  If there is an</i></td></tr>
<tr><th id="1096">1096</th><td><i>   error reading the file, or an EOF in an unexpected location, it</i></td></tr>
<tr><th id="1097">1097</th><td><i>   gives a fatal error.</i></td></tr>
<tr><th id="1098">1098</th><td><i></i></td></tr>
<tr><th id="1099">1099</th><td><i>   This sets *KEYP and *VALUEP to point to storage managed by</i></td></tr>
<tr><th id="1100">1100</th><td><i>   rcsbuf_getkey.  Moreover, *VALUEP has not been massaged from the</i></td></tr>
<tr><th id="1101">1101</th><td><i>   RCS format: it may contain embedded whitespace and embedded '@'</i></td></tr>
<tr><th id="1102">1102</th><td><i>   characters.  Call rcsbuf_valcopy or rcsbuf_valpolish to do</i></td></tr>
<tr><th id="1103">1103</th><td><i>   appropriate massaging.  */</i></td></tr>
<tr><th id="1104">1104</th><td></td></tr>
<tr><th id="1105">1105</th><td><i  data-doc="rcsbuf_getkey">/* Note that the extreme hair in rcsbuf_getkey is because profiling</i></td></tr>
<tr><th id="1106">1106</th><td><i  data-doc="rcsbuf_getkey">   statistics show that it was worth it. */</i></td></tr>
<tr><th id="1107">1107</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="1108">1108</th><td><dfn class="tu decl def fn" id="rcsbuf_getkey" title='rcsbuf_getkey' data-type='int rcsbuf_getkey(struct rcsbuffer * rcsbuf, char ** keyp, char ** valp)' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</dfn> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col6 decl" id="106rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</dfn>, <em>char</em> **<dfn class="local col7 decl" id="107keyp" title='keyp' data-type='char **' data-ref="107keyp" data-ref-filename="107keyp">keyp</dfn>, <em>char</em> **<dfn class="local col8 decl" id="108valp" title='valp' data-type='char **' data-ref="108valp" data-ref-filename="108valp">valp</dfn>)</td></tr>
<tr><th id="1109">1109</th><td>{</td></tr>
<tr><th id="1110">1110</th><td>    <em>register</em> <em>const</em> <em>char</em> * <em>const</em> <dfn class="local col9 decl" id="109my_spacetab" title='my_spacetab' data-type='const char *const' data-ref="109my_spacetab" data-ref-filename="109my_spacetab">my_spacetab</dfn> = <a class="tu ref" href="#spacetab" title='spacetab' data-use='r' data-ref="spacetab" data-ref-filename="spacetab">spacetab</a>;</td></tr>
<tr><th id="1111">1111</th><td>    <em>register</em> <em>char</em> *<dfn class="local col0 decl" id="110ptr" title='ptr' data-type='char *' data-ref="110ptr" data-ref-filename="110ptr">ptr</dfn>, *<dfn class="local col1 decl" id="111ptrend" title='ptrend' data-type='char *' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</dfn>;</td></tr>
<tr><th id="1112">1112</th><td>    <em>char</em> <dfn class="local col2 decl" id="112c" title='c' data-type='char' data-ref="112c" data-ref-filename="112c">c</dfn>;</td></tr>
<tr><th id="1113">1113</th><td></td></tr>
<tr><th id="1114">1114</th><td><u>#define <dfn class="macro" id="_M/my_whitespace" data-ref="_M/my_whitespace">my_whitespace</dfn>(c)	(<a class="local col9 ref" href="#109my_spacetab" title='my_spacetab' data-ref="109my_spacetab" data-ref-filename="109my_spacetab">my_spacetab</a>[(unsigned char)c] != 0)</u></td></tr>
<tr><th id="1115">1115</th><td></td></tr>
<tr><th id="1116">1116</th><td>    <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::vlen" title='rcsbuffer::vlen' data-ref="rcsbuffer::vlen" data-ref-filename="rcsbuffer..vlen">vlen</a> = <var>0</var>;</td></tr>
<tr><th id="1117">1117</th><td>    <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::at_string" title='rcsbuffer::at_string' data-ref="rcsbuffer::at_string" data-ref-filename="rcsbuffer..at_string">at_string</a> = <var>0</var>;</td></tr>
<tr><th id="1118">1118</th><td>    <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::embedded_at" title='rcsbuffer::embedded_at' data-ref="rcsbuffer::embedded_at" data-ref-filename="rcsbuffer..embedded_at">embedded_at</a> = <var>0</var>;</td></tr>
<tr><th id="1119">1119</th><td></td></tr>
<tr><th id="1120">1120</th><td>    <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptr" title='rcsbuffer::ptr' data-ref="rcsbuffer::ptr" data-ref-filename="rcsbuffer..ptr">ptr</a>;</td></tr>
<tr><th id="1121">1121</th><td>    <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> = <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a>;</td></tr>
<tr><th id="1122">1122</th><td></td></tr>
<tr><th id="1123">1123</th><td>    <i>/* Sanity check.  */</i></td></tr>
<tr><th id="1124">1124</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((ptr &gt;= rcsbuf_buffer &amp;&amp; ptr &lt;= rcsbuf_buffer + rcsbuf_buffer_size) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 1124, __func__, &quot;ptr &gt;= rcsbuf_buffer &amp;&amp; ptr &lt;= rcsbuf_buffer + rcsbuf_buffer_size&quot;))" data-ref="_M/assert">assert</a> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> &gt;= <a class="tu ref" href="#rcsbuf_buffer" title='rcsbuf_buffer' data-use='r' data-ref="rcsbuf_buffer" data-ref-filename="rcsbuf_buffer">rcsbuf_buffer</a> &amp;&amp; <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> &lt;= <a class="tu ref" href="#rcsbuf_buffer" title='rcsbuf_buffer' data-use='r' data-ref="rcsbuf_buffer" data-ref-filename="rcsbuf_buffer">rcsbuf_buffer</a> + <a class="tu ref" href="#rcsbuf_buffer_size" title='rcsbuf_buffer_size' data-use='r' data-ref="rcsbuf_buffer_size" data-ref-filename="rcsbuf_buffer_size">rcsbuf_buffer_size</a>);</td></tr>
<tr><th id="1125">1125</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((ptrend &gt;= rcsbuf_buffer &amp;&amp; ptrend &lt;= rcsbuf_buffer + rcsbuf_buffer_size) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 1125, __func__, &quot;ptrend &gt;= rcsbuf_buffer &amp;&amp; ptrend &lt;= rcsbuf_buffer + rcsbuf_buffer_size&quot;))" data-ref="_M/assert">assert</a> (<a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> &gt;= <a class="tu ref" href="#rcsbuf_buffer" title='rcsbuf_buffer' data-use='r' data-ref="rcsbuf_buffer" data-ref-filename="rcsbuf_buffer">rcsbuf_buffer</a> &amp;&amp; <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> &lt;= <a class="tu ref" href="#rcsbuf_buffer" title='rcsbuf_buffer' data-use='r' data-ref="rcsbuf_buffer" data-ref-filename="rcsbuf_buffer">rcsbuf_buffer</a> + <a class="tu ref" href="#rcsbuf_buffer_size" title='rcsbuf_buffer_size' data-use='r' data-ref="rcsbuf_buffer_size" data-ref-filename="rcsbuf_buffer_size">rcsbuf_buffer_size</a>);</td></tr>
<tr><th id="1126">1126</th><td></td></tr>
<tr><th id="1127">1127</th><td><u>#<span data-ppcond="1127">ifndef</span> <a class="macro" href="../../include/config.h.html#498" data-ref="_M/HAVE_MMAP">HAVE_MMAP</a></u></td></tr>
<tr><th id="1128">1128</th><td>    <i>/* If the pointer is more than RCSBUF_BUFSIZE bytes into the</i></td></tr>
<tr><th id="1129">1129</th><td><i>       buffer, move back to the start of the buffer.  This keeps the</i></td></tr>
<tr><th id="1130">1130</th><td><i>       buffer from growing indefinitely.  */</i></td></tr>
<tr><th id="1131">1131</th><td>    <b>if</b> (ptr - rcsbuf_buffer &gt;= RCSBUF_BUFSIZE)</td></tr>
<tr><th id="1132">1132</th><td>    {</td></tr>
<tr><th id="1133">1133</th><td>	<em>int</em> len;</td></tr>
<tr><th id="1134">1134</th><td></td></tr>
<tr><th id="1135">1135</th><td>	len = ptrend - ptr;</td></tr>
<tr><th id="1136">1136</th><td></td></tr>
<tr><th id="1137">1137</th><td>	<i>/* Sanity check: we don't read more than RCSBUF_BUFSIZE bytes</i></td></tr>
<tr><th id="1138">1138</th><td><i>           at a time, so we can't have more bytes than that past PTR.  */</i></td></tr>
<tr><th id="1139">1139</th><td>	assert (len &lt;= RCSBUF_BUFSIZE);</td></tr>
<tr><th id="1140">1140</th><td></td></tr>
<tr><th id="1141">1141</th><td>	<i>/* Update the POS field, which holds the file offset of the</i></td></tr>
<tr><th id="1142">1142</th><td><i>           first byte in the RCSBUF_BUFFER buffer.  */</i></td></tr>
<tr><th id="1143">1143</th><td>	rcsbuf-&gt;pos += ptr - rcsbuf_buffer;</td></tr>
<tr><th id="1144">1144</th><td></td></tr>
<tr><th id="1145">1145</th><td>	memcpy (rcsbuf_buffer, ptr, len);</td></tr>
<tr><th id="1146">1146</th><td>	ptr = rcsbuf_buffer;</td></tr>
<tr><th id="1147">1147</th><td>	ptrend = ptr + len;</td></tr>
<tr><th id="1148">1148</th><td>	rcsbuf-&gt;ptrend = ptrend;</td></tr>
<tr><th id="1149">1149</th><td>    }</td></tr>
<tr><th id="1150">1150</th><td><u>#<span data-ppcond="1127">endif</span> /* HAVE_MMAP */</u></td></tr>
<tr><th id="1151">1151</th><td></td></tr>
<tr><th id="1152">1152</th><td>    <i>/* Skip leading whitespace.  */</i></td></tr>
<tr><th id="1153">1153</th><td></td></tr>
<tr><th id="1154">1154</th><td>    <b>while</b> (<var>1</var>)</td></tr>
<tr><th id="1155">1155</th><td>    {</td></tr>
<tr><th id="1156">1156</th><td>	<b>if</b> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> &gt;= <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a>)</td></tr>
<tr><th id="1157">1157</th><td>	{</td></tr>
<tr><th id="1158">1158</th><td>	    <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <a class="tu ref fn" href="#rcsbuf_fill" title='rcsbuf_fill' data-use='c' data-ref="rcsbuf_fill" data-ref-filename="rcsbuf_fill">rcsbuf_fill</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="1159">1159</th><td>	    <b>if</b> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1160">1160</th><td>		<b>return</b> <var>0</var>;</td></tr>
<tr><th id="1161">1161</th><td>	    <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> = <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a>;</td></tr>
<tr><th id="1162">1162</th><td>	}</td></tr>
<tr><th id="1163">1163</th><td></td></tr>
<tr><th id="1164">1164</th><td>	<a class="local col2 ref" href="#112c" title='c' data-ref="112c" data-ref-filename="112c">c</a> = *<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1165">1165</th><td>	<b>if</b> (! <a class="macro" href="#1114" title="(my_spacetab[(unsigned char)c] != 0)" data-ref="_M/my_whitespace">my_whitespace</a> (<a class="local col2 ref" href="#112c" title='c' data-ref="112c" data-ref-filename="112c">c</a>))</td></tr>
<tr><th id="1166">1166</th><td>	    <b>break</b>;</td></tr>
<tr><th id="1167">1167</th><td></td></tr>
<tr><th id="1168">1168</th><td>	++<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1169">1169</th><td>    }</td></tr>
<tr><th id="1170">1170</th><td></td></tr>
<tr><th id="1171">1171</th><td>    <i>/* We've found the start of the key.  */</i></td></tr>
<tr><th id="1172">1172</th><td></td></tr>
<tr><th id="1173">1173</th><td>    *<a class="local col7 ref" href="#107keyp" title='keyp' data-ref="107keyp" data-ref-filename="107keyp">keyp</a> = <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1174">1174</th><td></td></tr>
<tr><th id="1175">1175</th><td>    <b>if</b> (<a class="local col2 ref" href="#112c" title='c' data-ref="112c" data-ref-filename="112c">c</a> != <kbd>';'</kbd>)</td></tr>
<tr><th id="1176">1176</th><td>    {</td></tr>
<tr><th id="1177">1177</th><td>	<b>while</b> (<var>1</var>)</td></tr>
<tr><th id="1178">1178</th><td>	{</td></tr>
<tr><th id="1179">1179</th><td>	    ++<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1180">1180</th><td>	    <b>if</b> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> &gt;= <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a>)</td></tr>
<tr><th id="1181">1181</th><td>	    {</td></tr>
<tr><th id="1182">1182</th><td>		<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <a class="tu ref fn" href="#rcsbuf_fill" title='rcsbuf_fill' data-use='c' data-ref="rcsbuf_fill" data-ref-filename="rcsbuf_fill">rcsbuf_fill</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>, <a class="local col7 ref" href="#107keyp" title='keyp' data-ref="107keyp" data-ref-filename="107keyp">keyp</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="1183">1183</th><td>		<b>if</b> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1184">1184</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"EOF in key in RCS file %s"</q>,</td></tr>
<tr><th id="1185">1185</th><td>			   <a class="ref fn" href="root.h.html#primary_root_inverse_translate" title='primary_root_inverse_translate' data-ref="primary_root_inverse_translate" data-ref-filename="primary_root_inverse_translate">primary_root_inverse_translate</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::filename" title='rcsbuffer::filename' data-ref="rcsbuffer::filename" data-ref-filename="rcsbuffer..filename">filename</a>));</td></tr>
<tr><th id="1186">1186</th><td>		<a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> = <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a>;</td></tr>
<tr><th id="1187">1187</th><td>	    }</td></tr>
<tr><th id="1188">1188</th><td>	    <a class="local col2 ref" href="#112c" title='c' data-ref="112c" data-ref-filename="112c">c</a> = *<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1189">1189</th><td>	    <b>if</b> (<a class="local col2 ref" href="#112c" title='c' data-ref="112c" data-ref-filename="112c">c</a> == <kbd>';'</kbd> || <a class="macro" href="#1114" title="(my_spacetab[(unsigned char)c] != 0)" data-ref="_M/my_whitespace">my_whitespace</a> (<a class="local col2 ref" href="#112c" title='c' data-ref="112c" data-ref-filename="112c">c</a>))</td></tr>
<tr><th id="1190">1190</th><td>		<b>break</b>;</td></tr>
<tr><th id="1191">1191</th><td>	}</td></tr>
<tr><th id="1192">1192</th><td>    }</td></tr>
<tr><th id="1193">1193</th><td></td></tr>
<tr><th id="1194">1194</th><td>    <i>/* Here *KEYP points to the key in the buffer, C is the character</i></td></tr>
<tr><th id="1195">1195</th><td><i>       we found at the of the key, and PTR points to the location in</i></td></tr>
<tr><th id="1196">1196</th><td><i>       the buffer where we found C.  We must set *PTR to \0 in order</i></td></tr>
<tr><th id="1197">1197</th><td><i>       to terminate the key.  If the key ended with ';', then there is</i></td></tr>
<tr><th id="1198">1198</th><td><i>       no value.  */</i></td></tr>
<tr><th id="1199">1199</th><td></td></tr>
<tr><th id="1200">1200</th><td>    *<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="1201">1201</th><td>    ++<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1202">1202</th><td></td></tr>
<tr><th id="1203">1203</th><td>    <b>if</b> (<a class="local col2 ref" href="#112c" title='c' data-ref="112c" data-ref-filename="112c">c</a> == <kbd>';'</kbd>)</td></tr>
<tr><th id="1204">1204</th><td>    {</td></tr>
<tr><th id="1205">1205</th><td>	*<a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1206">1206</th><td>	<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptr" title='rcsbuffer::ptr' data-ref="rcsbuffer::ptr" data-ref-filename="rcsbuffer..ptr">ptr</a> = <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1207">1207</th><td>	<b>return</b> <var>1</var>;</td></tr>
<tr><th id="1208">1208</th><td>    }</td></tr>
<tr><th id="1209">1209</th><td></td></tr>
<tr><th id="1210">1210</th><td>    <i>/* C must be whitespace.  Skip whitespace between the key and the</i></td></tr>
<tr><th id="1211">1211</th><td><i>       value.  If we find ';' now, there is no value.  */</i></td></tr>
<tr><th id="1212">1212</th><td></td></tr>
<tr><th id="1213">1213</th><td>    <b>while</b> (<var>1</var>)</td></tr>
<tr><th id="1214">1214</th><td>    {</td></tr>
<tr><th id="1215">1215</th><td>	<b>if</b> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> &gt;= <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a>)</td></tr>
<tr><th id="1216">1216</th><td>	{</td></tr>
<tr><th id="1217">1217</th><td>	    <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <a class="tu ref fn" href="#rcsbuf_fill" title='rcsbuf_fill' data-use='c' data-ref="rcsbuf_fill" data-ref-filename="rcsbuf_fill">rcsbuf_fill</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>, <a class="local col7 ref" href="#107keyp" title='keyp' data-ref="107keyp" data-ref-filename="107keyp">keyp</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="1218">1218</th><td>	    <b>if</b> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1219">1219</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"EOF while looking for value in RCS file %s"</q>,</td></tr>
<tr><th id="1220">1220</th><td>		       <a class="ref fn" href="root.h.html#primary_root_inverse_translate" title='primary_root_inverse_translate' data-ref="primary_root_inverse_translate" data-ref-filename="primary_root_inverse_translate">primary_root_inverse_translate</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::filename" title='rcsbuffer::filename' data-ref="rcsbuffer::filename" data-ref-filename="rcsbuffer..filename">filename</a>));</td></tr>
<tr><th id="1221">1221</th><td>	    <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> = <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a>;</td></tr>
<tr><th id="1222">1222</th><td>	}</td></tr>
<tr><th id="1223">1223</th><td>	<a class="local col2 ref" href="#112c" title='c' data-ref="112c" data-ref-filename="112c">c</a> = *<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1224">1224</th><td>	<b>if</b> (<a class="local col2 ref" href="#112c" title='c' data-ref="112c" data-ref-filename="112c">c</a> == <kbd>';'</kbd>)</td></tr>
<tr><th id="1225">1225</th><td>	{</td></tr>
<tr><th id="1226">1226</th><td>	    *<a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1227">1227</th><td>	    <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptr" title='rcsbuffer::ptr' data-ref="rcsbuffer::ptr" data-ref-filename="rcsbuffer..ptr">ptr</a> = <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> + <var>1</var>;</td></tr>
<tr><th id="1228">1228</th><td>	    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="1229">1229</th><td>	}</td></tr>
<tr><th id="1230">1230</th><td>	<b>if</b> (! <a class="macro" href="#1114" title="(my_spacetab[(unsigned char)c] != 0)" data-ref="_M/my_whitespace">my_whitespace</a> (<a class="local col2 ref" href="#112c" title='c' data-ref="112c" data-ref-filename="112c">c</a>))</td></tr>
<tr><th id="1231">1231</th><td>	    <b>break</b>;</td></tr>
<tr><th id="1232">1232</th><td>	++<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1233">1233</th><td>    }</td></tr>
<tr><th id="1234">1234</th><td></td></tr>
<tr><th id="1235">1235</th><td>    <i>/* Now PTR points to the start of the value, and C is the first</i></td></tr>
<tr><th id="1236">1236</th><td><i>       character of the value.  */</i></td></tr>
<tr><th id="1237">1237</th><td></td></tr>
<tr><th id="1238">1238</th><td>    <b>if</b> (<a class="local col2 ref" href="#112c" title='c' data-ref="112c" data-ref-filename="112c">c</a> != <kbd>'@'</kbd>)</td></tr>
<tr><th id="1239">1239</th><td>	*<a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a> = <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1240">1240</th><td>    <b>else</b></td></tr>
<tr><th id="1241">1241</th><td>    {</td></tr>
<tr><th id="1242">1242</th><td>	<em>char</em> *<dfn class="local col3 decl" id="113pat" title='pat' data-type='char *' data-ref="113pat" data-ref-filename="113pat">pat</dfn>;</td></tr>
<tr><th id="1243">1243</th><td>	<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col4 decl" id="114vlen" title='vlen' data-type='size_t' data-ref="114vlen" data-ref-filename="114vlen">vlen</dfn>;</td></tr>
<tr><th id="1244">1244</th><td></td></tr>
<tr><th id="1245">1245</th><td>	<i>/* Optimize the common case of a value composed of a single</i></td></tr>
<tr><th id="1246">1246</th><td><i>	   '@' string.  */</i></td></tr>
<tr><th id="1247">1247</th><td></td></tr>
<tr><th id="1248">1248</th><td>	<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::at_string" title='rcsbuffer::at_string' data-ref="rcsbuffer::at_string" data-ref-filename="rcsbuffer..at_string">at_string</a> = <var>1</var>;</td></tr>
<tr><th id="1249">1249</th><td></td></tr>
<tr><th id="1250">1250</th><td>	++<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1251">1251</th><td></td></tr>
<tr><th id="1252">1252</th><td>	*<a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a> = <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1253">1253</th><td></td></tr>
<tr><th id="1254">1254</th><td>	<b>while</b> (<var>1</var>)</td></tr>
<tr><th id="1255">1255</th><td>	{</td></tr>
<tr><th id="1256">1256</th><td>	    <b>while</b> ((<a class="local col3 ref" href="#113pat" title='pat' data-ref="113pat" data-ref-filename="113pat">pat</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memchr" title='memchr' data-ref="memchr" data-ref-filename="memchr">memchr</a> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>, <kbd>'@'</kbd>, <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> - <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>)) == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1257">1257</th><td>	    {</td></tr>
<tr><th id="1258">1258</th><td>		<i>/* Note that we pass PTREND as the PTR value to</i></td></tr>
<tr><th id="1259">1259</th><td><i>                   rcsbuf_fill, so that we will wind up setting PTR to</i></td></tr>
<tr><th id="1260">1260</th><td><i>                   the location corresponding to the old PTREND, so</i></td></tr>
<tr><th id="1261">1261</th><td><i>                   that we don't search the same bytes again.  */</i></td></tr>
<tr><th id="1262">1262</th><td>		<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <a class="tu ref fn" href="#rcsbuf_fill" title='rcsbuf_fill' data-use='c' data-ref="rcsbuf_fill" data-ref-filename="rcsbuf_fill">rcsbuf_fill</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>, <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a>, <a class="local col7 ref" href="#107keyp" title='keyp' data-ref="107keyp" data-ref-filename="107keyp">keyp</a>, <a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a>);</td></tr>
<tr><th id="1263">1263</th><td>		<b>if</b> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1264">1264</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>,</td></tr>
<tr><th id="1265">1265</th><td>			   <q>"EOF while looking for end of string in RCS file %s"</q>,</td></tr>
<tr><th id="1266">1266</th><td>			   <a class="ref fn" href="root.h.html#primary_root_inverse_translate" title='primary_root_inverse_translate' data-ref="primary_root_inverse_translate" data-ref-filename="primary_root_inverse_translate">primary_root_inverse_translate</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::filename" title='rcsbuffer::filename' data-ref="rcsbuffer::filename" data-ref-filename="rcsbuffer..filename">filename</a>));</td></tr>
<tr><th id="1267">1267</th><td>		<a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> = <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a>;</td></tr>
<tr><th id="1268">1268</th><td>	    }</td></tr>
<tr><th id="1269">1269</th><td></td></tr>
<tr><th id="1270">1270</th><td>	    <i>/* Handle the special case of an '@' right at the end of</i></td></tr>
<tr><th id="1271">1271</th><td><i>               the known bytes.  */</i></td></tr>
<tr><th id="1272">1272</th><td>	    <b>if</b> (<a class="local col3 ref" href="#113pat" title='pat' data-ref="113pat" data-ref-filename="113pat">pat</a> + <var>1</var> &gt;= <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a>)</td></tr>
<tr><th id="1273">1273</th><td>	    {</td></tr>
<tr><th id="1274">1274</th><td>		<i>/* Note that we pass PAT, not PTR, here.  */</i></td></tr>
<tr><th id="1275">1275</th><td>		<a class="local col3 ref" href="#113pat" title='pat' data-ref="113pat" data-ref-filename="113pat">pat</a> = <a class="tu ref fn" href="#rcsbuf_fill" title='rcsbuf_fill' data-use='c' data-ref="rcsbuf_fill" data-ref-filename="rcsbuf_fill">rcsbuf_fill</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>, <a class="local col3 ref" href="#113pat" title='pat' data-ref="113pat" data-ref-filename="113pat">pat</a>, <a class="local col7 ref" href="#107keyp" title='keyp' data-ref="107keyp" data-ref-filename="107keyp">keyp</a>, <a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a>);</td></tr>
<tr><th id="1276">1276</th><td>		<b>if</b> (<a class="local col3 ref" href="#113pat" title='pat' data-ref="113pat" data-ref-filename="113pat">pat</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1277">1277</th><td>		{</td></tr>
<tr><th id="1278">1278</th><td>		    <i>/* EOF here is OK; it just means that the last</i></td></tr>
<tr><th id="1279">1279</th><td><i>		       character of the file was an '@' terminating a</i></td></tr>
<tr><th id="1280">1280</th><td><i>		       value for a key type which does not require a</i></td></tr>
<tr><th id="1281">1281</th><td><i>		       trailing ';'.  */</i></td></tr>
<tr><th id="1282">1282</th><td>		    <a class="local col3 ref" href="#113pat" title='pat' data-ref="113pat" data-ref-filename="113pat">pat</a> = <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a> - <var>1</var>;</td></tr>
<tr><th id="1283">1283</th><td></td></tr>
<tr><th id="1284">1284</th><td>		}</td></tr>
<tr><th id="1285">1285</th><td>		<a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> = <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a>;</td></tr>
<tr><th id="1286">1286</th><td></td></tr>
<tr><th id="1287">1287</th><td>		<i>/* Note that the value of PTR is bogus here.  This is</i></td></tr>
<tr><th id="1288">1288</th><td><i>		   OK, because we don't use it.  */</i></td></tr>
<tr><th id="1289">1289</th><td>	    }</td></tr>
<tr><th id="1290">1290</th><td></td></tr>
<tr><th id="1291">1291</th><td>	    <b>if</b> (<a class="local col3 ref" href="#113pat" title='pat' data-ref="113pat" data-ref-filename="113pat">pat</a> + <var>1</var> &gt;= <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> || <a class="local col3 ref" href="#113pat" title='pat' data-ref="113pat" data-ref-filename="113pat">pat</a>[<var>1</var>] != <kbd>'@'</kbd>)</td></tr>
<tr><th id="1292">1292</th><td>		<b>break</b>;</td></tr>
<tr><th id="1293">1293</th><td></td></tr>
<tr><th id="1294">1294</th><td>	    <i>/* We found an '@' pair in the string.  Keep looking.  */</i></td></tr>
<tr><th id="1295">1295</th><td>	    ++<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::embedded_at" title='rcsbuffer::embedded_at' data-ref="rcsbuffer::embedded_at" data-ref-filename="rcsbuffer..embedded_at">embedded_at</a>;</td></tr>
<tr><th id="1296">1296</th><td>	    <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <a class="local col3 ref" href="#113pat" title='pat' data-ref="113pat" data-ref-filename="113pat">pat</a> + <var>2</var>;</td></tr>
<tr><th id="1297">1297</th><td>	}</td></tr>
<tr><th id="1298">1298</th><td></td></tr>
<tr><th id="1299">1299</th><td>	<i>/* Here PAT points to the final '@' in the string.  */</i></td></tr>
<tr><th id="1300">1300</th><td></td></tr>
<tr><th id="1301">1301</th><td>	*<a class="local col3 ref" href="#113pat" title='pat' data-ref="113pat" data-ref-filename="113pat">pat</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="1302">1302</th><td></td></tr>
<tr><th id="1303">1303</th><td>	<a class="local col4 ref" href="#114vlen" title='vlen' data-ref="114vlen" data-ref-filename="114vlen">vlen</a> = <a class="local col3 ref" href="#113pat" title='pat' data-ref="113pat" data-ref-filename="113pat">pat</a> - *<a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a>;</td></tr>
<tr><th id="1304">1304</th><td>	<b>if</b> (<a class="local col4 ref" href="#114vlen" title='vlen' data-ref="114vlen" data-ref-filename="114vlen">vlen</a> == <var>0</var>)</td></tr>
<tr><th id="1305">1305</th><td>	    *<a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1306">1306</th><td>	<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::vlen" title='rcsbuffer::vlen' data-ref="rcsbuffer::vlen" data-ref-filename="rcsbuffer..vlen">vlen</a> = <a class="local col4 ref" href="#114vlen" title='vlen' data-ref="114vlen" data-ref-filename="114vlen">vlen</a>;</td></tr>
<tr><th id="1307">1307</th><td></td></tr>
<tr><th id="1308">1308</th><td>	<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <a class="local col3 ref" href="#113pat" title='pat' data-ref="113pat" data-ref-filename="113pat">pat</a> + <var>1</var>;</td></tr>
<tr><th id="1309">1309</th><td>    }</td></tr>
<tr><th id="1310">1310</th><td></td></tr>
<tr><th id="1311">1311</th><td>    <i>/* Certain keywords only have a '@' string.  If there is no '@'</i></td></tr>
<tr><th id="1312">1312</th><td><i>       string, then the old getrcskey function assumed that they had</i></td></tr>
<tr><th id="1313">1313</th><td><i>       no value, and we do the same.  */</i></td></tr>
<tr><th id="1314">1314</th><td></td></tr>
<tr><th id="1315">1315</th><td>    {</td></tr>
<tr><th id="1316">1316</th><td>	<em>char</em> *<dfn class="local col5 decl" id="115k" title='k' data-type='char *' data-ref="115k" data-ref-filename="115k">k</dfn>;</td></tr>
<tr><th id="1317">1317</th><td></td></tr>
<tr><th id="1318">1318</th><td>	<a class="local col5 ref" href="#115k" title='k' data-ref="115k" data-ref-filename="115k">k</a> = *<a class="local col7 ref" href="#107keyp" title='keyp' data-ref="107keyp" data-ref-filename="107keyp">keyp</a>;</td></tr>
<tr><th id="1319">1319</th><td>	<b>if</b> (<a class="macro" href="#138" title="(*(char *)(k) == *(char *)(&quot;desc&quot;) &amp;&amp; strcmp ((k), (&quot;desc&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col5 ref" href="#115k" title='k' data-ref="115k" data-ref-filename="115k">k</a>, <a class="macro" href="rcs.h.html#27" title="&quot;desc&quot;" data-ref="_M/RCSDESC">RCSDESC</a>)</td></tr>
<tr><th id="1320">1320</th><td>	    || <a class="macro" href="#138" title="(*(char *)(k) == *(char *)(&quot;text&quot;) &amp;&amp; strcmp ((k), (&quot;text&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col5 ref" href="#115k" title='k' data-ref="115k" data-ref-filename="115k">k</a>, <q>"text"</q>)</td></tr>
<tr><th id="1321">1321</th><td>	    || <a class="macro" href="#138" title="(*(char *)(k) == *(char *)(&quot;log&quot;) &amp;&amp; strcmp ((k), (&quot;log&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col5 ref" href="#115k" title='k' data-ref="115k" data-ref-filename="115k">k</a>, <q>"log"</q>))</td></tr>
<tr><th id="1322">1322</th><td>	{</td></tr>
<tr><th id="1323">1323</th><td>	    <b>if</b> (<a class="local col2 ref" href="#112c" title='c' data-ref="112c" data-ref-filename="112c">c</a> != <kbd>'@'</kbd>)</td></tr>
<tr><th id="1324">1324</th><td>		*<a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1325">1325</th><td>	    <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptr" title='rcsbuffer::ptr' data-ref="rcsbuffer::ptr" data-ref-filename="rcsbuffer..ptr">ptr</a> = <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1326">1326</th><td>	    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="1327">1327</th><td>	}</td></tr>
<tr><th id="1328">1328</th><td>    }</td></tr>
<tr><th id="1329">1329</th><td></td></tr>
<tr><th id="1330">1330</th><td>    <i>/* If we've already gathered a '@' string, try to skip whitespace</i></td></tr>
<tr><th id="1331">1331</th><td><i>       and find a ';'.  */</i></td></tr>
<tr><th id="1332">1332</th><td>    <b>if</b> (<a class="local col2 ref" href="#112c" title='c' data-ref="112c" data-ref-filename="112c">c</a> == <kbd>'@'</kbd>)</td></tr>
<tr><th id="1333">1333</th><td>    {</td></tr>
<tr><th id="1334">1334</th><td>	<b>while</b> (<var>1</var>)</td></tr>
<tr><th id="1335">1335</th><td>	{</td></tr>
<tr><th id="1336">1336</th><td>	    <em>char</em> <dfn class="local col6 decl" id="116n" title='n' data-type='char' data-ref="116n" data-ref-filename="116n">n</dfn>;</td></tr>
<tr><th id="1337">1337</th><td></td></tr>
<tr><th id="1338">1338</th><td>	    <b>if</b> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> &gt;= <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a>)</td></tr>
<tr><th id="1339">1339</th><td>	    {</td></tr>
<tr><th id="1340">1340</th><td>		<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <a class="tu ref fn" href="#rcsbuf_fill" title='rcsbuf_fill' data-use='c' data-ref="rcsbuf_fill" data-ref-filename="rcsbuf_fill">rcsbuf_fill</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>, <a class="local col7 ref" href="#107keyp" title='keyp' data-ref="107keyp" data-ref-filename="107keyp">keyp</a>, <a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a>);</td></tr>
<tr><th id="1341">1341</th><td>		<b>if</b> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1342">1342</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"EOF in value in RCS file %s"</q>,</td></tr>
<tr><th id="1343">1343</th><td>			   <a class="ref fn" href="root.h.html#primary_root_inverse_translate" title='primary_root_inverse_translate' data-ref="primary_root_inverse_translate" data-ref-filename="primary_root_inverse_translate">primary_root_inverse_translate</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::filename" title='rcsbuffer::filename' data-ref="rcsbuffer::filename" data-ref-filename="rcsbuffer..filename">filename</a>));</td></tr>
<tr><th id="1344">1344</th><td>		<a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> = <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a>;</td></tr>
<tr><th id="1345">1345</th><td>	    }</td></tr>
<tr><th id="1346">1346</th><td>	    <a class="local col6 ref" href="#116n" title='n' data-ref="116n" data-ref-filename="116n">n</a> = *<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1347">1347</th><td>	    <b>if</b> (<a class="local col6 ref" href="#116n" title='n' data-ref="116n" data-ref-filename="116n">n</a> == <kbd>';'</kbd>)</td></tr>
<tr><th id="1348">1348</th><td>	    {</td></tr>
<tr><th id="1349">1349</th><td>		<i>/* We're done.  We already set everything up for this</i></td></tr>
<tr><th id="1350">1350</th><td><i>                   case above.  */</i></td></tr>
<tr><th id="1351">1351</th><td>		<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptr" title='rcsbuffer::ptr' data-ref="rcsbuffer::ptr" data-ref-filename="rcsbuffer..ptr">ptr</a> = <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> + <var>1</var>;</td></tr>
<tr><th id="1352">1352</th><td>		<b>return</b> <var>1</var>;</td></tr>
<tr><th id="1353">1353</th><td>	    }</td></tr>
<tr><th id="1354">1354</th><td>	    <b>if</b> (! <a class="macro" href="#1114" title="(my_spacetab[(unsigned char)n] != 0)" data-ref="_M/my_whitespace">my_whitespace</a> (<a class="local col6 ref" href="#116n" title='n' data-ref="116n" data-ref-filename="116n">n</a>))</td></tr>
<tr><th id="1355">1355</th><td>		<b>break</b>;</td></tr>
<tr><th id="1356">1356</th><td>	    ++<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1357">1357</th><td>	}</td></tr>
<tr><th id="1358">1358</th><td></td></tr>
<tr><th id="1359">1359</th><td>	<i>/* The value extends past the '@' string.  We need to undo the</i></td></tr>
<tr><th id="1360">1360</th><td><i>           '@' stripping done in the default case above.  This</i></td></tr>
<tr><th id="1361">1361</th><td><i>           case never happens in a plain RCS file, but it can happen</i></td></tr>
<tr><th id="1362">1362</th><td><i>           if user defined phrases are used.  */</i></td></tr>
<tr><th id="1363">1363</th><td>	((*<a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a>)--)[<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::vlen" title='rcsbuffer::vlen' data-ref="rcsbuffer::vlen" data-ref-filename="rcsbuffer..vlen">vlen</a>++] = <kbd>'@'</kbd>;</td></tr>
<tr><th id="1364">1364</th><td>    }</td></tr>
<tr><th id="1365">1365</th><td></td></tr>
<tr><th id="1366">1366</th><td>    <i>/* Here we have a value which is not a simple '@' string.  We need</i></td></tr>
<tr><th id="1367">1367</th><td><i>       to gather up everything until the next ';', including any '@'</i></td></tr>
<tr><th id="1368">1368</th><td><i>       strings.  *VALP points to the start of the value.  If</i></td></tr>
<tr><th id="1369">1369</th><td><i>       RCSBUF-&gt;VLEN is not zero, then we have already read an '@'</i></td></tr>
<tr><th id="1370">1370</th><td><i>       string, and PTR points to the data following the '@' string.</i></td></tr>
<tr><th id="1371">1371</th><td><i>       Otherwise, PTR points to the start of the value.  */</i></td></tr>
<tr><th id="1372">1372</th><td></td></tr>
<tr><th id="1373">1373</th><td>    <b>while</b> (<var>1</var>)</td></tr>
<tr><th id="1374">1374</th><td>    {</td></tr>
<tr><th id="1375">1375</th><td>	<em>char</em> *<dfn class="local col7 decl" id="117start" title='start' data-type='char *' data-ref="117start" data-ref-filename="117start">start</dfn>, *<dfn class="local col8 decl" id="118psemi" title='psemi' data-type='char *' data-ref="118psemi" data-ref-filename="118psemi">psemi</dfn>, *<dfn class="local col9 decl" id="119pat" title='pat' data-type='char *' data-ref="119pat" data-ref-filename="119pat">pat</dfn>;</td></tr>
<tr><th id="1376">1376</th><td></td></tr>
<tr><th id="1377">1377</th><td>	<i>/* Find the ';' which must end the value.  */</i></td></tr>
<tr><th id="1378">1378</th><td>	<a class="local col7 ref" href="#117start" title='start' data-ref="117start" data-ref-filename="117start">start</a> = <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>;</td></tr>
<tr><th id="1379">1379</th><td>	<b>while</b> ((<a class="local col8 ref" href="#118psemi" title='psemi' data-ref="118psemi" data-ref-filename="118psemi">psemi</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memchr" title='memchr' data-ref="memchr" data-ref-filename="memchr">memchr</a> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>, <kbd>';'</kbd>, <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> - <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>)) == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1380">1380</th><td>	{</td></tr>
<tr><th id="1381">1381</th><td>	    <em>int</em> <dfn class="local col0 decl" id="120slen" title='slen' data-type='int' data-ref="120slen" data-ref-filename="120slen">slen</dfn>;</td></tr>
<tr><th id="1382">1382</th><td></td></tr>
<tr><th id="1383">1383</th><td>	    <i>/* Note that we pass PTREND as the PTR value to</i></td></tr>
<tr><th id="1384">1384</th><td><i>	       rcsbuf_fill, so that we will wind up setting PTR to the</i></td></tr>
<tr><th id="1385">1385</th><td><i>	       location corresponding to the old PTREND, so that we</i></td></tr>
<tr><th id="1386">1386</th><td><i>	       don't search the same bytes again.  */</i></td></tr>
<tr><th id="1387">1387</th><td>	    <a class="local col0 ref" href="#120slen" title='slen' data-ref="120slen" data-ref-filename="120slen">slen</a> = <a class="local col7 ref" href="#117start" title='start' data-ref="117start" data-ref-filename="117start">start</a> - *<a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a>;</td></tr>
<tr><th id="1388">1388</th><td>	    <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <a class="tu ref fn" href="#rcsbuf_fill" title='rcsbuf_fill' data-use='c' data-ref="rcsbuf_fill" data-ref-filename="rcsbuf_fill">rcsbuf_fill</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>, <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a>, <a class="local col7 ref" href="#107keyp" title='keyp' data-ref="107keyp" data-ref-filename="107keyp">keyp</a>, <a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a>);</td></tr>
<tr><th id="1389">1389</th><td>	    <b>if</b> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1390">1390</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"EOF in value in RCS file %s"</q>,</td></tr>
<tr><th id="1391">1391</th><td>		       <a class="ref fn" href="root.h.html#primary_root_inverse_translate" title='primary_root_inverse_translate' data-ref="primary_root_inverse_translate" data-ref-filename="primary_root_inverse_translate">primary_root_inverse_translate</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::filename" title='rcsbuffer::filename' data-ref="rcsbuffer::filename" data-ref-filename="rcsbuffer..filename">filename</a>));</td></tr>
<tr><th id="1392">1392</th><td>	    <a class="local col7 ref" href="#117start" title='start' data-ref="117start" data-ref-filename="117start">start</a> = *<a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a> + <a class="local col0 ref" href="#120slen" title='slen' data-ref="120slen" data-ref-filename="120slen">slen</a>;</td></tr>
<tr><th id="1393">1393</th><td>	    <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> = <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a>;</td></tr>
<tr><th id="1394">1394</th><td>	}</td></tr>
<tr><th id="1395">1395</th><td></td></tr>
<tr><th id="1396">1396</th><td>	<i>/* See if there are any '@' strings in the value.  */</i></td></tr>
<tr><th id="1397">1397</th><td>	<a class="local col9 ref" href="#119pat" title='pat' data-ref="119pat" data-ref-filename="119pat">pat</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memchr" title='memchr' data-ref="memchr" data-ref-filename="memchr">memchr</a> (<a class="local col7 ref" href="#117start" title='start' data-ref="117start" data-ref-filename="117start">start</a>, <kbd>'@'</kbd>, <a class="local col8 ref" href="#118psemi" title='psemi' data-ref="118psemi" data-ref-filename="118psemi">psemi</a> - <a class="local col7 ref" href="#117start" title='start' data-ref="117start" data-ref-filename="117start">start</a>);</td></tr>
<tr><th id="1398">1398</th><td></td></tr>
<tr><th id="1399">1399</th><td>	<b>if</b> (<a class="local col9 ref" href="#119pat" title='pat' data-ref="119pat" data-ref-filename="119pat">pat</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1400">1400</th><td>	{</td></tr>
<tr><th id="1401">1401</th><td>	    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col1 decl" id="121vlen" title='vlen' data-type='size_t' data-ref="121vlen" data-ref-filename="121vlen">vlen</dfn>;</td></tr>
<tr><th id="1402">1402</th><td></td></tr>
<tr><th id="1403">1403</th><td>	    <i>/* We're done with the value.  Trim any trailing</i></td></tr>
<tr><th id="1404">1404</th><td><i>               whitespace.  */</i></td></tr>
<tr><th id="1405">1405</th><td></td></tr>
<tr><th id="1406">1406</th><td>	    <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptr" title='rcsbuffer::ptr' data-ref="rcsbuffer::ptr" data-ref-filename="rcsbuffer..ptr">ptr</a> = <a class="local col8 ref" href="#118psemi" title='psemi' data-ref="118psemi" data-ref-filename="118psemi">psemi</a> + <var>1</var>;</td></tr>
<tr><th id="1407">1407</th><td></td></tr>
<tr><th id="1408">1408</th><td>	    <a class="local col7 ref" href="#117start" title='start' data-ref="117start" data-ref-filename="117start">start</a> = *<a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a>;</td></tr>
<tr><th id="1409">1409</th><td>	    <b>while</b> (<a class="local col8 ref" href="#118psemi" title='psemi' data-ref="118psemi" data-ref-filename="118psemi">psemi</a> &gt; <a class="local col7 ref" href="#117start" title='start' data-ref="117start" data-ref-filename="117start">start</a> &amp;&amp; <a class="macro" href="#1114" title="(my_spacetab[(unsigned char)psemi[-1]] != 0)" data-ref="_M/my_whitespace">my_whitespace</a> (<a class="local col8 ref" href="#118psemi" title='psemi' data-ref="118psemi" data-ref-filename="118psemi">psemi</a>[-<var>1</var>]))</td></tr>
<tr><th id="1410">1410</th><td>		--<a class="local col8 ref" href="#118psemi" title='psemi' data-ref="118psemi" data-ref-filename="118psemi">psemi</a>;</td></tr>
<tr><th id="1411">1411</th><td>	    *<a class="local col8 ref" href="#118psemi" title='psemi' data-ref="118psemi" data-ref-filename="118psemi">psemi</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="1412">1412</th><td></td></tr>
<tr><th id="1413">1413</th><td>	    <a class="local col1 ref" href="#121vlen" title='vlen' data-ref="121vlen" data-ref-filename="121vlen">vlen</a> = <a class="local col8 ref" href="#118psemi" title='psemi' data-ref="118psemi" data-ref-filename="118psemi">psemi</a> - <a class="local col7 ref" href="#117start" title='start' data-ref="117start" data-ref-filename="117start">start</a>;</td></tr>
<tr><th id="1414">1414</th><td>	    <b>if</b> (<a class="local col1 ref" href="#121vlen" title='vlen' data-ref="121vlen" data-ref-filename="121vlen">vlen</a> == <var>0</var>)</td></tr>
<tr><th id="1415">1415</th><td>		*<a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1416">1416</th><td>	    <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::vlen" title='rcsbuffer::vlen' data-ref="rcsbuffer::vlen" data-ref-filename="rcsbuffer..vlen">vlen</a> = <a class="local col1 ref" href="#121vlen" title='vlen' data-ref="121vlen" data-ref-filename="121vlen">vlen</a>;</td></tr>
<tr><th id="1417">1417</th><td></td></tr>
<tr><th id="1418">1418</th><td>	    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="1419">1419</th><td>	}</td></tr>
<tr><th id="1420">1420</th><td></td></tr>
<tr><th id="1421">1421</th><td>	<i>/* We found an '@' string in the value.  We set RCSBUF-&gt;AT_STRING</i></td></tr>
<tr><th id="1422">1422</th><td><i>	   and RCSBUF-&gt;EMBEDDED_AT to indicate that we won't be able to</i></td></tr>
<tr><th id="1423">1423</th><td><i>	   compress whitespace correctly for this type of value.</i></td></tr>
<tr><th id="1424">1424</th><td><i>	   Since this type of value never arises in a normal RCS file,</i></td></tr>
<tr><th id="1425">1425</th><td><i>	   this should not be a big deal.  It means that if anybody</i></td></tr>
<tr><th id="1426">1426</th><td><i>	   adds a phrase which can have both an '@' string and regular</i></td></tr>
<tr><th id="1427">1427</th><td><i>	   text, they will have to handle whitespace compression</i></td></tr>
<tr><th id="1428">1428</th><td><i>	   themselves.  */</i></td></tr>
<tr><th id="1429">1429</th><td></td></tr>
<tr><th id="1430">1430</th><td>	<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::at_string" title='rcsbuffer::at_string' data-ref="rcsbuffer::at_string" data-ref-filename="rcsbuffer..at_string">at_string</a> = <var>1</var>;</td></tr>
<tr><th id="1431">1431</th><td>	<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::embedded_at" title='rcsbuffer::embedded_at' data-ref="rcsbuffer::embedded_at" data-ref-filename="rcsbuffer..embedded_at">embedded_at</a> = -<var>1</var>;</td></tr>
<tr><th id="1432">1432</th><td></td></tr>
<tr><th id="1433">1433</th><td>	<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <a class="local col9 ref" href="#119pat" title='pat' data-ref="119pat" data-ref-filename="119pat">pat</a> + <var>1</var>;</td></tr>
<tr><th id="1434">1434</th><td></td></tr>
<tr><th id="1435">1435</th><td>	<b>while</b> (<var>1</var>)</td></tr>
<tr><th id="1436">1436</th><td>	{</td></tr>
<tr><th id="1437">1437</th><td>	    <b>while</b> ((<a class="local col9 ref" href="#119pat" title='pat' data-ref="119pat" data-ref-filename="119pat">pat</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memchr" title='memchr' data-ref="memchr" data-ref-filename="memchr">memchr</a> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>, <kbd>'@'</kbd>, <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> - <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>)) == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1438">1438</th><td>	    {</td></tr>
<tr><th id="1439">1439</th><td>		<i>/* Note that we pass PTREND as the PTR value to</i></td></tr>
<tr><th id="1440">1440</th><td><i>                   rcsbuff_fill, so that we will wind up setting PTR</i></td></tr>
<tr><th id="1441">1441</th><td><i>                   to the location corresponding to the old PTREND, so</i></td></tr>
<tr><th id="1442">1442</th><td><i>                   that we don't search the same bytes again.  */</i></td></tr>
<tr><th id="1443">1443</th><td>		<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <a class="tu ref fn" href="#rcsbuf_fill" title='rcsbuf_fill' data-use='c' data-ref="rcsbuf_fill" data-ref-filename="rcsbuf_fill">rcsbuf_fill</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>, <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a>, <a class="local col7 ref" href="#107keyp" title='keyp' data-ref="107keyp" data-ref-filename="107keyp">keyp</a>, <a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a>);</td></tr>
<tr><th id="1444">1444</th><td>		<b>if</b> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1445">1445</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>,</td></tr>
<tr><th id="1446">1446</th><td>			   <q>"EOF while looking for end of string in RCS file %s"</q>,</td></tr>
<tr><th id="1447">1447</th><td>			   <a class="ref fn" href="root.h.html#primary_root_inverse_translate" title='primary_root_inverse_translate' data-ref="primary_root_inverse_translate" data-ref-filename="primary_root_inverse_translate">primary_root_inverse_translate</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::filename" title='rcsbuffer::filename' data-ref="rcsbuffer::filename" data-ref-filename="rcsbuffer..filename">filename</a>));</td></tr>
<tr><th id="1448">1448</th><td>		<a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> = <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a>;</td></tr>
<tr><th id="1449">1449</th><td>	    }</td></tr>
<tr><th id="1450">1450</th><td></td></tr>
<tr><th id="1451">1451</th><td>	    <i>/* Handle the special case of an '@' right at the end of</i></td></tr>
<tr><th id="1452">1452</th><td><i>               the known bytes.  */</i></td></tr>
<tr><th id="1453">1453</th><td>	    <b>if</b> (<a class="local col9 ref" href="#119pat" title='pat' data-ref="119pat" data-ref-filename="119pat">pat</a> + <var>1</var> &gt;= <a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a>)</td></tr>
<tr><th id="1454">1454</th><td>	    {</td></tr>
<tr><th id="1455">1455</th><td>		<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <a class="tu ref fn" href="#rcsbuf_fill" title='rcsbuf_fill' data-use='c' data-ref="rcsbuf_fill" data-ref-filename="rcsbuf_fill">rcsbuf_fill</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a>, <a class="local col7 ref" href="#107keyp" title='keyp' data-ref="107keyp" data-ref-filename="107keyp">keyp</a>, <a class="local col8 ref" href="#108valp" title='valp' data-ref="108valp" data-ref-filename="108valp">valp</a>);</td></tr>
<tr><th id="1456">1456</th><td>		<b>if</b> (<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1457">1457</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"EOF in value in RCS file %s"</q>,</td></tr>
<tr><th id="1458">1458</th><td>			   <a class="ref fn" href="root.h.html#primary_root_inverse_translate" title='primary_root_inverse_translate' data-ref="primary_root_inverse_translate" data-ref-filename="primary_root_inverse_translate">primary_root_inverse_translate</a> (<a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::filename" title='rcsbuffer::filename' data-ref="rcsbuffer::filename" data-ref-filename="rcsbuffer..filename">filename</a>));</td></tr>
<tr><th id="1459">1459</th><td>		<a class="local col1 ref" href="#111ptrend" title='ptrend' data-ref="111ptrend" data-ref-filename="111ptrend">ptrend</a> = <a class="local col6 ref" href="#106rcsbuf" title='rcsbuf' data-ref="106rcsbuf" data-ref-filename="106rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a>;</td></tr>
<tr><th id="1460">1460</th><td>	    }</td></tr>
<tr><th id="1461">1461</th><td></td></tr>
<tr><th id="1462">1462</th><td>	    <b>if</b> (<a class="local col9 ref" href="#119pat" title='pat' data-ref="119pat" data-ref-filename="119pat">pat</a>[<var>1</var>] != <kbd>'@'</kbd>)</td></tr>
<tr><th id="1463">1463</th><td>		<b>break</b>;</td></tr>
<tr><th id="1464">1464</th><td></td></tr>
<tr><th id="1465">1465</th><td>	    <i>/* We found an '@' pair in the string.  Keep looking.  */</i></td></tr>
<tr><th id="1466">1466</th><td>	    <a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <a class="local col9 ref" href="#119pat" title='pat' data-ref="119pat" data-ref-filename="119pat">pat</a> + <var>2</var>;</td></tr>
<tr><th id="1467">1467</th><td>	}</td></tr>
<tr><th id="1468">1468</th><td></td></tr>
<tr><th id="1469">1469</th><td>	<i>/* Here PAT points to the final '@' in the string.  */</i></td></tr>
<tr><th id="1470">1470</th><td>	<a class="local col0 ref" href="#110ptr" title='ptr' data-ref="110ptr" data-ref-filename="110ptr">ptr</a> = <a class="local col9 ref" href="#119pat" title='pat' data-ref="119pat" data-ref-filename="119pat">pat</a> + <var>1</var>;</td></tr>
<tr><th id="1471">1471</th><td>    }</td></tr>
<tr><th id="1472">1472</th><td></td></tr>
<tr><th id="1473">1473</th><td><u>#undef <a class="macro" href="#1114" data-ref="_M/my_whitespace">my_whitespace</a></u></td></tr>
<tr><th id="1474">1474</th><td>}</td></tr>
<tr><th id="1475">1475</th><td></td></tr>
<tr><th id="1476">1476</th><td></td></tr>
<tr><th id="1477">1477</th><td></td></tr>
<tr><th id="1478">1478</th><td><i  data-doc="rcsbuf_getrevnum">/* Read an RCS revision number from an RCS file.  This sets *REVP to</i></td></tr>
<tr><th id="1479">1479</th><td><i  data-doc="rcsbuf_getrevnum">   point to the revision number; it will point to space that is</i></td></tr>
<tr><th id="1480">1480</th><td><i  data-doc="rcsbuf_getrevnum">   managed by the rcsbuf functions, and is only good until the next</i></td></tr>
<tr><th id="1481">1481</th><td><i  data-doc="rcsbuf_getrevnum">   call to rcsbuf_getkey or rcsbuf_getrevnum.</i></td></tr>
<tr><th id="1482">1482</th><td><i  data-doc="rcsbuf_getrevnum"></i></td></tr>
<tr><th id="1483">1483</th><td><i  data-doc="rcsbuf_getrevnum">   This function returns 1 on success, or 0 on EOF.  If there is an</i></td></tr>
<tr><th id="1484">1484</th><td><i  data-doc="rcsbuf_getrevnum">   error reading the file, or an EOF in an unexpected location, it</i></td></tr>
<tr><th id="1485">1485</th><td><i  data-doc="rcsbuf_getrevnum">   gives a fatal error.  */</i></td></tr>
<tr><th id="1486">1486</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="1487">1487</th><td><dfn class="tu decl def fn" id="rcsbuf_getrevnum" title='rcsbuf_getrevnum' data-type='int rcsbuf_getrevnum(struct rcsbuffer * rcsbuf, char ** revp)' data-ref="rcsbuf_getrevnum" data-ref-filename="rcsbuf_getrevnum">rcsbuf_getrevnum</dfn> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col2 decl" id="122rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="122rcsbuf" data-ref-filename="122rcsbuf">rcsbuf</dfn>, <em>char</em> **<dfn class="local col3 decl" id="123revp" title='revp' data-type='char **' data-ref="123revp" data-ref-filename="123revp">revp</dfn>)</td></tr>
<tr><th id="1488">1488</th><td>{</td></tr>
<tr><th id="1489">1489</th><td>    <em>char</em> *<dfn class="local col4 decl" id="124ptr" title='ptr' data-type='char *' data-ref="124ptr" data-ref-filename="124ptr">ptr</dfn>, *<dfn class="local col5 decl" id="125ptrend" title='ptrend' data-type='char *' data-ref="125ptrend" data-ref-filename="125ptrend">ptrend</dfn>;</td></tr>
<tr><th id="1490">1490</th><td>    <em>char</em> <dfn class="local col6 decl" id="126c" title='c' data-type='char' data-ref="126c" data-ref-filename="126c">c</dfn>;</td></tr>
<tr><th id="1491">1491</th><td></td></tr>
<tr><th id="1492">1492</th><td>    <a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a> = <a class="local col2 ref" href="#122rcsbuf" title='rcsbuf' data-ref="122rcsbuf" data-ref-filename="122rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptr" title='rcsbuffer::ptr' data-ref="rcsbuffer::ptr" data-ref-filename="rcsbuffer..ptr">ptr</a>;</td></tr>
<tr><th id="1493">1493</th><td>    <a class="local col5 ref" href="#125ptrend" title='ptrend' data-ref="125ptrend" data-ref-filename="125ptrend">ptrend</a> = <a class="local col2 ref" href="#122rcsbuf" title='rcsbuf' data-ref="122rcsbuf" data-ref-filename="122rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a>;</td></tr>
<tr><th id="1494">1494</th><td></td></tr>
<tr><th id="1495">1495</th><td>    *<a class="local col3 ref" href="#123revp" title='revp' data-ref="123revp" data-ref-filename="123revp">revp</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1496">1496</th><td></td></tr>
<tr><th id="1497">1497</th><td>    <i>/* Skip leading whitespace.  */</i></td></tr>
<tr><th id="1498">1498</th><td></td></tr>
<tr><th id="1499">1499</th><td>    <b>while</b> (<var>1</var>)</td></tr>
<tr><th id="1500">1500</th><td>    {</td></tr>
<tr><th id="1501">1501</th><td>	<b>if</b> (<a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a> &gt;= <a class="local col5 ref" href="#125ptrend" title='ptrend' data-ref="125ptrend" data-ref-filename="125ptrend">ptrend</a>)</td></tr>
<tr><th id="1502">1502</th><td>	{</td></tr>
<tr><th id="1503">1503</th><td>	    <a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a> = <a class="tu ref fn" href="#rcsbuf_fill" title='rcsbuf_fill' data-use='c' data-ref="rcsbuf_fill" data-ref-filename="rcsbuf_fill">rcsbuf_fill</a> (<a class="local col2 ref" href="#122rcsbuf" title='rcsbuf' data-ref="122rcsbuf" data-ref-filename="122rcsbuf">rcsbuf</a>, <a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="1504">1504</th><td>	    <b>if</b> (<a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1505">1505</th><td>		<b>return</b> <var>0</var>;</td></tr>
<tr><th id="1506">1506</th><td>	    <a class="local col5 ref" href="#125ptrend" title='ptrend' data-ref="125ptrend" data-ref-filename="125ptrend">ptrend</a> = <a class="local col2 ref" href="#122rcsbuf" title='rcsbuf' data-ref="122rcsbuf" data-ref-filename="122rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a>;</td></tr>
<tr><th id="1507">1507</th><td>	}</td></tr>
<tr><th id="1508">1508</th><td></td></tr>
<tr><th id="1509">1509</th><td>	<a class="local col6 ref" href="#126c" title='c' data-ref="126c" data-ref-filename="126c">c</a> = *<a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a>;</td></tr>
<tr><th id="1510">1510</th><td>	<b>if</b> (! <a class="macro" href="#169" title="(spacetab[(unsigned char)c] != 0)" data-ref="_M/whitespace">whitespace</a> (<a class="local col6 ref" href="#126c" title='c' data-ref="126c" data-ref-filename="126c">c</a>))</td></tr>
<tr><th id="1511">1511</th><td>	    <b>break</b>;</td></tr>
<tr><th id="1512">1512</th><td></td></tr>
<tr><th id="1513">1513</th><td>	++<a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a>;</td></tr>
<tr><th id="1514">1514</th><td>    }</td></tr>
<tr><th id="1515">1515</th><td></td></tr>
<tr><th id="1516">1516</th><td>    <b>if</b> (! <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) c)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) <a class="local col6 ref" href="#126c" title='c' data-ref="126c" data-ref-filename="126c">c</a>) &amp;&amp; <a class="local col6 ref" href="#126c" title='c' data-ref="126c" data-ref-filename="126c">c</a> != <kbd>'.'</kbd>)</td></tr>
<tr><th id="1517">1517</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>,</td></tr>
<tr><th id="1518">1518</th><td>	       <q>"\</q></td></tr>
<tr><th id="1519">1519</th><td><q>unexpected '\\x%x' reading revision number in RCS file %s"</q>,</td></tr>
<tr><th id="1520">1520</th><td>	       <a class="local col6 ref" href="#126c" title='c' data-ref="126c" data-ref-filename="126c">c</a>, <a class="ref fn" href="root.h.html#primary_root_inverse_translate" title='primary_root_inverse_translate' data-ref="primary_root_inverse_translate" data-ref-filename="primary_root_inverse_translate">primary_root_inverse_translate</a> (<a class="local col2 ref" href="#122rcsbuf" title='rcsbuf' data-ref="122rcsbuf" data-ref-filename="122rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::filename" title='rcsbuffer::filename' data-ref="rcsbuffer::filename" data-ref-filename="rcsbuffer..filename">filename</a>));</td></tr>
<tr><th id="1521">1521</th><td></td></tr>
<tr><th id="1522">1522</th><td>    *<a class="local col3 ref" href="#123revp" title='revp' data-ref="123revp" data-ref-filename="123revp">revp</a> = <a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a>;</td></tr>
<tr><th id="1523">1523</th><td></td></tr>
<tr><th id="1524">1524</th><td>    <b>do</b></td></tr>
<tr><th id="1525">1525</th><td>    {</td></tr>
<tr><th id="1526">1526</th><td>	++<a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a>;</td></tr>
<tr><th id="1527">1527</th><td>	<b>if</b> (<a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a> &gt;= <a class="local col5 ref" href="#125ptrend" title='ptrend' data-ref="125ptrend" data-ref-filename="125ptrend">ptrend</a>)</td></tr>
<tr><th id="1528">1528</th><td>	{</td></tr>
<tr><th id="1529">1529</th><td>	    <a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a> = <a class="tu ref fn" href="#rcsbuf_fill" title='rcsbuf_fill' data-use='c' data-ref="rcsbuf_fill" data-ref-filename="rcsbuf_fill">rcsbuf_fill</a> (<a class="local col2 ref" href="#122rcsbuf" title='rcsbuf' data-ref="122rcsbuf" data-ref-filename="122rcsbuf">rcsbuf</a>, <a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a>, <a class="local col3 ref" href="#123revp" title='revp' data-ref="123revp" data-ref-filename="123revp">revp</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="1530">1530</th><td>	    <b>if</b> (<a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1531">1531</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>,</td></tr>
<tr><th id="1532">1532</th><td>		       <q>"unexpected EOF reading revision number in RCS file %s"</q>,</td></tr>
<tr><th id="1533">1533</th><td>		       <a class="ref fn" href="root.h.html#primary_root_inverse_translate" title='primary_root_inverse_translate' data-ref="primary_root_inverse_translate" data-ref-filename="primary_root_inverse_translate">primary_root_inverse_translate</a> (<a class="local col2 ref" href="#122rcsbuf" title='rcsbuf' data-ref="122rcsbuf" data-ref-filename="122rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::filename" title='rcsbuffer::filename' data-ref="rcsbuffer::filename" data-ref-filename="rcsbuffer..filename">filename</a>));</td></tr>
<tr><th id="1534">1534</th><td>	    <a class="local col5 ref" href="#125ptrend" title='ptrend' data-ref="125ptrend" data-ref-filename="125ptrend">ptrend</a> = <a class="local col2 ref" href="#122rcsbuf" title='rcsbuf' data-ref="122rcsbuf" data-ref-filename="122rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a>;</td></tr>
<tr><th id="1535">1535</th><td>	}</td></tr>
<tr><th id="1536">1536</th><td></td></tr>
<tr><th id="1537">1537</th><td>	<a class="local col6 ref" href="#126c" title='c' data-ref="126c" data-ref-filename="126c">c</a> = *<a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a>;</td></tr>
<tr><th id="1538">1538</th><td>    }</td></tr>
<tr><th id="1539">1539</th><td>    <b>while</b> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) c)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) <a class="local col6 ref" href="#126c" title='c' data-ref="126c" data-ref-filename="126c">c</a>) || <a class="local col6 ref" href="#126c" title='c' data-ref="126c" data-ref-filename="126c">c</a> == <kbd>'.'</kbd>);</td></tr>
<tr><th id="1540">1540</th><td></td></tr>
<tr><th id="1541">1541</th><td>    <b>if</b> (! <a class="macro" href="#169" title="(spacetab[(unsigned char)c] != 0)" data-ref="_M/whitespace">whitespace</a> (<a class="local col6 ref" href="#126c" title='c' data-ref="126c" data-ref-filename="126c">c</a>))</td></tr>
<tr><th id="1542">1542</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"\</q></td></tr>
<tr><th id="1543">1543</th><td><q>unexpected '\\x%x' reading revision number in RCS file %s"</q>,</td></tr>
<tr><th id="1544">1544</th><td>	       <a class="local col6 ref" href="#126c" title='c' data-ref="126c" data-ref-filename="126c">c</a>, <a class="ref fn" href="root.h.html#primary_root_inverse_translate" title='primary_root_inverse_translate' data-ref="primary_root_inverse_translate" data-ref-filename="primary_root_inverse_translate">primary_root_inverse_translate</a> (<a class="local col2 ref" href="#122rcsbuf" title='rcsbuf' data-ref="122rcsbuf" data-ref-filename="122rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::filename" title='rcsbuffer::filename' data-ref="rcsbuffer::filename" data-ref-filename="rcsbuffer..filename">filename</a>));</td></tr>
<tr><th id="1545">1545</th><td></td></tr>
<tr><th id="1546">1546</th><td>    *<a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="1547">1547</th><td></td></tr>
<tr><th id="1548">1548</th><td>    <a class="local col2 ref" href="#122rcsbuf" title='rcsbuf' data-ref="122rcsbuf" data-ref-filename="122rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptr" title='rcsbuffer::ptr' data-ref="rcsbuffer::ptr" data-ref-filename="rcsbuffer..ptr">ptr</a> = <a class="local col4 ref" href="#124ptr" title='ptr' data-ref="124ptr" data-ref-filename="124ptr">ptr</a> + <var>1</var>;</td></tr>
<tr><th id="1549">1549</th><td></td></tr>
<tr><th id="1550">1550</th><td>    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="1551">1551</th><td>}</td></tr>
<tr><th id="1552">1552</th><td></td></tr>
<tr><th id="1553">1553</th><td></td></tr>
<tr><th id="1554">1554</th><td></td></tr>
<tr><th id="1555">1555</th><td><i  data-doc="rcsbuf_fill">/* Fill RCSBUF_BUFFER with bytes from the file associated with RCSBUF,</i></td></tr>
<tr><th id="1556">1556</th><td><i  data-doc="rcsbuf_fill">   updating PTR and the PTREND field.  If KEYP and *KEYP are not NULL,</i></td></tr>
<tr><th id="1557">1557</th><td><i  data-doc="rcsbuf_fill">   then *KEYP points into the buffer, and must be adjusted if the</i></td></tr>
<tr><th id="1558">1558</th><td><i  data-doc="rcsbuf_fill">   buffer is changed.  Likewise for VALP.  Returns the new value of</i></td></tr>
<tr><th id="1559">1559</th><td><i  data-doc="rcsbuf_fill">   PTR, or NULL on error.  */</i></td></tr>
<tr><th id="1560">1560</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="1561">1561</th><td><dfn class="tu decl def fn" id="rcsbuf_fill" title='rcsbuf_fill' data-type='char * rcsbuf_fill(struct rcsbuffer * rcsbuf, char * ptr, char ** keyp, char ** valp)' data-ref="rcsbuf_fill" data-ref-filename="rcsbuf_fill">rcsbuf_fill</dfn> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col7 decl" id="127rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="127rcsbuf" data-ref-filename="127rcsbuf">rcsbuf</dfn>, <em>char</em> *<dfn class="local col8 decl" id="128ptr" title='ptr' data-type='char *' data-ref="128ptr" data-ref-filename="128ptr">ptr</dfn>, <em>char</em> **<dfn class="local col9 decl" id="129keyp" title='keyp' data-type='char **' data-ref="129keyp" data-ref-filename="129keyp">keyp</dfn>, <em>char</em> **<dfn class="local col0 decl" id="130valp" title='valp' data-type='char **' data-ref="130valp" data-ref-filename="130valp">valp</dfn>)</td></tr>
<tr><th id="1562">1562</th><td>{</td></tr>
<tr><th id="1563">1563</th><td><u>#<span data-ppcond="1563">ifdef</span> <a class="macro" href="../../include/config.h.html#498" data-ref="_M/HAVE_MMAP">HAVE_MMAP</a></u></td></tr>
<tr><th id="1564">1564</th><td>    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1565">1565</th><td><u>#<span data-ppcond="1563">else</span> /* HAVE_MMAP */</u></td></tr>
<tr><th id="1566">1566</th><td>    <em>int</em> got;</td></tr>
<tr><th id="1567">1567</th><td></td></tr>
<tr><th id="1568">1568</th><td>    <b>if</b> (rcsbuf-&gt;ptrend - rcsbuf_buffer + RCSBUF_BUFSIZE &gt; rcsbuf_buffer_size)</td></tr>
<tr><th id="1569">1569</th><td>    {</td></tr>
<tr><th id="1570">1570</th><td>	<em>int</em> poff, peoff, koff, voff;</td></tr>
<tr><th id="1571">1571</th><td></td></tr>
<tr><th id="1572">1572</th><td>	poff = ptr - rcsbuf_buffer;</td></tr>
<tr><th id="1573">1573</th><td>	peoff = rcsbuf-&gt;ptrend - rcsbuf_buffer;</td></tr>
<tr><th id="1574">1574</th><td>	koff = keyp == NULL ? <var>0</var> : *keyp - rcsbuf_buffer;</td></tr>
<tr><th id="1575">1575</th><td>	voff = valp == NULL ? <var>0</var> : *valp - rcsbuf_buffer;</td></tr>
<tr><th id="1576">1576</th><td></td></tr>
<tr><th id="1577">1577</th><td>	expand_string (&amp;rcsbuf_buffer, &amp;rcsbuf_buffer_size,</td></tr>
<tr><th id="1578">1578</th><td>		       rcsbuf_buffer_size + RCSBUF_BUFSIZE);</td></tr>
<tr><th id="1579">1579</th><td></td></tr>
<tr><th id="1580">1580</th><td>	ptr = rcsbuf_buffer + poff;</td></tr>
<tr><th id="1581">1581</th><td>	rcsbuf-&gt;ptrend = rcsbuf_buffer + peoff;</td></tr>
<tr><th id="1582">1582</th><td>	<b>if</b> (keyp != NULL)</td></tr>
<tr><th id="1583">1583</th><td>	    *keyp = rcsbuf_buffer + koff;</td></tr>
<tr><th id="1584">1584</th><td>	<b>if</b> (valp != NULL)</td></tr>
<tr><th id="1585">1585</th><td>	    *valp = rcsbuf_buffer + voff;</td></tr>
<tr><th id="1586">1586</th><td>    }</td></tr>
<tr><th id="1587">1587</th><td></td></tr>
<tr><th id="1588">1588</th><td>    got = fread (rcsbuf-&gt;ptrend, <var>1</var>, RCSBUF_BUFSIZE, rcsbuf-&gt;fp);</td></tr>
<tr><th id="1589">1589</th><td>    <b>if</b> (got == <var>0</var>)</td></tr>
<tr><th id="1590">1590</th><td>    {</td></tr>
<tr><th id="1591">1591</th><td>	<b>if</b> (ferror (rcsbuf-&gt;fp))</td></tr>
<tr><th id="1592">1592</th><td>	    error (<var>1</var>, errno, <q>"cannot read %s"</q>, rcsbuf-&gt;filename);</td></tr>
<tr><th id="1593">1593</th><td>	<b>return</b> NULL;</td></tr>
<tr><th id="1594">1594</th><td>    }</td></tr>
<tr><th id="1595">1595</th><td></td></tr>
<tr><th id="1596">1596</th><td>    rcsbuf-&gt;ptrend += got;</td></tr>
<tr><th id="1597">1597</th><td></td></tr>
<tr><th id="1598">1598</th><td>    <b>return</b> ptr;</td></tr>
<tr><th id="1599">1599</th><td><u>#<span data-ppcond="1563">endif</span> /* HAVE_MMAP */</u></td></tr>
<tr><th id="1600">1600</th><td>}</td></tr>
<tr><th id="1601">1601</th><td></td></tr>
<tr><th id="1602">1602</th><td></td></tr>
<tr><th id="1603">1603</th><td></td></tr>
<tr><th id="1604">1604</th><td><i  data-doc="rcsbuf_valcmp">/* Test whether the last value returned by rcsbuf_getkey is a composite</i></td></tr>
<tr><th id="1605">1605</th><td><i  data-doc="rcsbuf_valcmp">   value or not. */</i></td></tr>
<tr><th id="1606">1606</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="1607">1607</th><td><dfn class="tu decl def fn" id="rcsbuf_valcmp" title='rcsbuf_valcmp' data-type='int rcsbuf_valcmp(struct rcsbuffer * rcsbuf)' data-ref="rcsbuf_valcmp" data-ref-filename="rcsbuf_valcmp">rcsbuf_valcmp</dfn> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col1 decl" id="131rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="131rcsbuf" data-ref-filename="131rcsbuf">rcsbuf</dfn>)</td></tr>
<tr><th id="1608">1608</th><td>{</td></tr>
<tr><th id="1609">1609</th><td>    <b>return</b> <a class="local col1 ref" href="#131rcsbuf" title='rcsbuf' data-ref="131rcsbuf" data-ref-filename="131rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::at_string" title='rcsbuffer::at_string' data-ref="rcsbuffer::at_string" data-ref-filename="rcsbuffer..at_string">at_string</a> &amp;&amp; <a class="local col1 ref" href="#131rcsbuf" title='rcsbuf' data-ref="131rcsbuf" data-ref-filename="131rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::embedded_at" title='rcsbuffer::embedded_at' data-ref="rcsbuffer::embedded_at" data-ref-filename="rcsbuffer..embedded_at">embedded_at</a> &lt; <var>0</var>;</td></tr>
<tr><th id="1610">1610</th><td>}</td></tr>
<tr><th id="1611">1611</th><td></td></tr>
<tr><th id="1612">1612</th><td></td></tr>
<tr><th id="1613">1613</th><td></td></tr>
<tr><th id="1614">1614</th><td><i  data-doc="rcsbuf_valcopy">/* Copy the value VAL returned by rcsbuf_getkey into a memory buffer,</i></td></tr>
<tr><th id="1615">1615</th><td><i  data-doc="rcsbuf_valcopy">   returning the memory buffer.  Polish the value like</i></td></tr>
<tr><th id="1616">1616</th><td><i  data-doc="rcsbuf_valcopy">   rcsbuf_valpolish, q.v.  */</i></td></tr>
<tr><th id="1617">1617</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="1618">1618</th><td><dfn class="tu decl def fn" id="rcsbuf_valcopy" title='rcsbuf_valcopy' data-type='char * rcsbuf_valcopy(struct rcsbuffer * rcsbuf, char * val, int polish, size_t * lenp)' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</dfn> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col2 decl" id="132rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="132rcsbuf" data-ref-filename="132rcsbuf">rcsbuf</dfn>, <em>char</em> *<dfn class="local col3 decl" id="133val" title='val' data-type='char *' data-ref="133val" data-ref-filename="133val">val</dfn>, <em>int</em> <dfn class="local col4 decl" id="134polish" title='polish' data-type='int' data-ref="134polish" data-ref-filename="134polish">polish</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> *<dfn class="local col5 decl" id="135lenp" title='lenp' data-type='size_t *' data-ref="135lenp" data-ref-filename="135lenp">lenp</dfn>)</td></tr>
<tr><th id="1619">1619</th><td>{</td></tr>
<tr><th id="1620">1620</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col6 decl" id="136vlen" title='vlen' data-type='size_t' data-ref="136vlen" data-ref-filename="136vlen">vlen</dfn>;</td></tr>
<tr><th id="1621">1621</th><td>    <em>int</em> <dfn class="local col7 decl" id="137embedded_at" title='embedded_at' data-type='int' data-ref="137embedded_at" data-ref-filename="137embedded_at">embedded_at</dfn>;</td></tr>
<tr><th id="1622">1622</th><td>    <em>char</em> *<dfn class="local col8 decl" id="138ret" title='ret' data-type='char *' data-ref="138ret" data-ref-filename="138ret">ret</dfn>;</td></tr>
<tr><th id="1623">1623</th><td></td></tr>
<tr><th id="1624">1624</th><td>    <b>if</b> (<a class="local col3 ref" href="#133val" title='val' data-ref="133val" data-ref-filename="133val">val</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1625">1625</th><td>    {</td></tr>
<tr><th id="1626">1626</th><td>	<b>if</b> (<a class="local col5 ref" href="#135lenp" title='lenp' data-ref="135lenp" data-ref-filename="135lenp">lenp</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1627">1627</th><td>	    *<a class="local col5 ref" href="#135lenp" title='lenp' data-ref="135lenp" data-ref-filename="135lenp">lenp</a> = <var>0</var>;</td></tr>
<tr><th id="1628">1628</th><td>	<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1629">1629</th><td>    }</td></tr>
<tr><th id="1630">1630</th><td></td></tr>
<tr><th id="1631">1631</th><td>    <a class="local col6 ref" href="#136vlen" title='vlen' data-ref="136vlen" data-ref-filename="136vlen">vlen</a> = <a class="local col2 ref" href="#132rcsbuf" title='rcsbuf' data-ref="132rcsbuf" data-ref-filename="132rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::vlen" title='rcsbuffer::vlen' data-ref="rcsbuffer::vlen" data-ref-filename="rcsbuffer..vlen">vlen</a>;</td></tr>
<tr><th id="1632">1632</th><td>    <a class="local col7 ref" href="#137embedded_at" title='embedded_at' data-ref="137embedded_at" data-ref-filename="137embedded_at">embedded_at</a> = <a class="local col2 ref" href="#132rcsbuf" title='rcsbuf' data-ref="132rcsbuf" data-ref-filename="132rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::embedded_at" title='rcsbuffer::embedded_at' data-ref="rcsbuffer::embedded_at" data-ref-filename="rcsbuffer..embedded_at">embedded_at</a> &lt; <var>0</var> ? <var>0</var> : <a class="local col2 ref" href="#132rcsbuf" title='rcsbuf' data-ref="132rcsbuf" data-ref-filename="132rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::embedded_at" title='rcsbuffer::embedded_at' data-ref="rcsbuffer::embedded_at" data-ref-filename="rcsbuffer..embedded_at">embedded_at</a>;</td></tr>
<tr><th id="1633">1633</th><td></td></tr>
<tr><th id="1634">1634</th><td>    <a class="local col8 ref" href="#138ret" title='ret' data-ref="138ret" data-ref-filename="138ret">ret</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="local col6 ref" href="#136vlen" title='vlen' data-ref="136vlen" data-ref-filename="136vlen">vlen</a> - <a class="local col7 ref" href="#137embedded_at" title='embedded_at' data-ref="137embedded_at" data-ref-filename="137embedded_at">embedded_at</a> + <var>1</var>);</td></tr>
<tr><th id="1635">1635</th><td></td></tr>
<tr><th id="1636">1636</th><td>    <b>if</b> (<a class="local col2 ref" href="#132rcsbuf" title='rcsbuf' data-ref="132rcsbuf" data-ref-filename="132rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::at_string" title='rcsbuffer::at_string' data-ref="rcsbuffer::at_string" data-ref-filename="rcsbuffer..at_string">at_string</a> ? <a class="local col7 ref" href="#137embedded_at" title='embedded_at' data-ref="137embedded_at" data-ref-filename="137embedded_at">embedded_at</a> == <var>0</var> : ! <a class="local col4 ref" href="#134polish" title='polish' data-ref="134polish" data-ref-filename="134polish">polish</a>)</td></tr>
<tr><th id="1637">1637</th><td>    {</td></tr>
<tr><th id="1638">1638</th><td>	<i>/* No special action to take.  */</i></td></tr>
<tr><th id="1639">1639</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col8 ref" href="#138ret" title='ret' data-ref="138ret" data-ref-filename="138ret">ret</a>, <a class="local col3 ref" href="#133val" title='val' data-ref="133val" data-ref-filename="133val">val</a>, <a class="local col6 ref" href="#136vlen" title='vlen' data-ref="136vlen" data-ref-filename="136vlen">vlen</a> + <var>1</var>);</td></tr>
<tr><th id="1640">1640</th><td>	<b>if</b> (<a class="local col5 ref" href="#135lenp" title='lenp' data-ref="135lenp" data-ref-filename="135lenp">lenp</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1641">1641</th><td>	    *<a class="local col5 ref" href="#135lenp" title='lenp' data-ref="135lenp" data-ref-filename="135lenp">lenp</a> = <a class="local col6 ref" href="#136vlen" title='vlen' data-ref="136vlen" data-ref-filename="136vlen">vlen</a>;</td></tr>
<tr><th id="1642">1642</th><td>	<b>return</b> <a class="local col8 ref" href="#138ret" title='ret' data-ref="138ret" data-ref-filename="138ret">ret</a>;</td></tr>
<tr><th id="1643">1643</th><td>    }</td></tr>
<tr><th id="1644">1644</th><td></td></tr>
<tr><th id="1645">1645</th><td>    <a class="tu ref fn" href="#rcsbuf_valpolish_internal" title='rcsbuf_valpolish_internal' data-use='c' data-ref="rcsbuf_valpolish_internal" data-ref-filename="rcsbuf_valpolish_internal">rcsbuf_valpolish_internal</a> (<a class="local col2 ref" href="#132rcsbuf" title='rcsbuf' data-ref="132rcsbuf" data-ref-filename="132rcsbuf">rcsbuf</a>, <a class="local col8 ref" href="#138ret" title='ret' data-ref="138ret" data-ref-filename="138ret">ret</a>, <a class="local col3 ref" href="#133val" title='val' data-ref="133val" data-ref-filename="133val">val</a>, <a class="local col5 ref" href="#135lenp" title='lenp' data-ref="135lenp" data-ref-filename="135lenp">lenp</a>);</td></tr>
<tr><th id="1646">1646</th><td>    <b>return</b> <a class="local col8 ref" href="#138ret" title='ret' data-ref="138ret" data-ref-filename="138ret">ret</a>;</td></tr>
<tr><th id="1647">1647</th><td>}</td></tr>
<tr><th id="1648">1648</th><td></td></tr>
<tr><th id="1649">1649</th><td></td></tr>
<tr><th id="1650">1650</th><td></td></tr>
<tr><th id="1651">1651</th><td><i  data-doc="rcsbuf_valpolish">/* Polish the value VAL returned by rcsbuf_getkey.  The POLISH</i></td></tr>
<tr><th id="1652">1652</th><td><i  data-doc="rcsbuf_valpolish">   parameter is non-zero if multiple embedded whitespace characters</i></td></tr>
<tr><th id="1653">1653</th><td><i  data-doc="rcsbuf_valpolish">   should be compressed into a single whitespace character.  Note that</i></td></tr>
<tr><th id="1654">1654</th><td><i  data-doc="rcsbuf_valpolish">   leading and trailing whitespace was already removed by</i></td></tr>
<tr><th id="1655">1655</th><td><i  data-doc="rcsbuf_valpolish">   rcsbuf_getkey.  Within an '@' string, pairs of '@' characters are</i></td></tr>
<tr><th id="1656">1656</th><td><i  data-doc="rcsbuf_valpolish">   compressed into a single '@' character regardless of the value of</i></td></tr>
<tr><th id="1657">1657</th><td><i  data-doc="rcsbuf_valpolish">   POLISH.  If LENP is not NULL, set *LENP to the length of the value.  */</i></td></tr>
<tr><th id="1658">1658</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1659">1659</th><td><dfn class="tu decl def fn" id="rcsbuf_valpolish" title='rcsbuf_valpolish' data-type='void rcsbuf_valpolish(struct rcsbuffer * rcsbuf, char * val, int polish, size_t * lenp)' data-ref="rcsbuf_valpolish" data-ref-filename="rcsbuf_valpolish">rcsbuf_valpolish</dfn> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col9 decl" id="139rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="139rcsbuf" data-ref-filename="139rcsbuf">rcsbuf</dfn>, <em>char</em> *<dfn class="local col0 decl" id="140val" title='val' data-type='char *' data-ref="140val" data-ref-filename="140val">val</dfn>, <em>int</em> <dfn class="local col1 decl" id="141polish" title='polish' data-type='int' data-ref="141polish" data-ref-filename="141polish">polish</dfn>,</td></tr>
<tr><th id="1660">1660</th><td>		  <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> *<dfn class="local col2 decl" id="142lenp" title='lenp' data-type='size_t *' data-ref="142lenp" data-ref-filename="142lenp">lenp</dfn>)</td></tr>
<tr><th id="1661">1661</th><td>{</td></tr>
<tr><th id="1662">1662</th><td>    <b>if</b> (<a class="local col0 ref" href="#140val" title='val' data-ref="140val" data-ref-filename="140val">val</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1663">1663</th><td>    {</td></tr>
<tr><th id="1664">1664</th><td>	<b>if</b> (<a class="local col2 ref" href="#142lenp" title='lenp' data-ref="142lenp" data-ref-filename="142lenp">lenp</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1665">1665</th><td>	    *<a class="local col2 ref" href="#142lenp" title='lenp' data-ref="142lenp" data-ref-filename="142lenp">lenp</a>= <var>0</var>;</td></tr>
<tr><th id="1666">1666</th><td>	<b>return</b>;</td></tr>
<tr><th id="1667">1667</th><td>    }</td></tr>
<tr><th id="1668">1668</th><td></td></tr>
<tr><th id="1669">1669</th><td>    <b>if</b> (<a class="local col9 ref" href="#139rcsbuf" title='rcsbuf' data-ref="139rcsbuf" data-ref-filename="139rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::at_string" title='rcsbuffer::at_string' data-ref="rcsbuffer::at_string" data-ref-filename="rcsbuffer..at_string">at_string</a> ? <a class="local col9 ref" href="#139rcsbuf" title='rcsbuf' data-ref="139rcsbuf" data-ref-filename="139rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::embedded_at" title='rcsbuffer::embedded_at' data-ref="rcsbuffer::embedded_at" data-ref-filename="rcsbuffer..embedded_at">embedded_at</a> == <var>0</var> : ! <a class="local col1 ref" href="#141polish" title='polish' data-ref="141polish" data-ref-filename="141polish">polish</a>)</td></tr>
<tr><th id="1670">1670</th><td>    {</td></tr>
<tr><th id="1671">1671</th><td>	<i>/* No special action to take.  */</i></td></tr>
<tr><th id="1672">1672</th><td>	<b>if</b> (<a class="local col2 ref" href="#142lenp" title='lenp' data-ref="142lenp" data-ref-filename="142lenp">lenp</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1673">1673</th><td>	    *<a class="local col2 ref" href="#142lenp" title='lenp' data-ref="142lenp" data-ref-filename="142lenp">lenp</a> = <a class="local col9 ref" href="#139rcsbuf" title='rcsbuf' data-ref="139rcsbuf" data-ref-filename="139rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::vlen" title='rcsbuffer::vlen' data-ref="rcsbuffer::vlen" data-ref-filename="rcsbuffer..vlen">vlen</a>;</td></tr>
<tr><th id="1674">1674</th><td>	<b>return</b>;</td></tr>
<tr><th id="1675">1675</th><td>    }</td></tr>
<tr><th id="1676">1676</th><td></td></tr>
<tr><th id="1677">1677</th><td>    <a class="tu ref fn" href="#rcsbuf_valpolish_internal" title='rcsbuf_valpolish_internal' data-use='c' data-ref="rcsbuf_valpolish_internal" data-ref-filename="rcsbuf_valpolish_internal">rcsbuf_valpolish_internal</a> (<a class="local col9 ref" href="#139rcsbuf" title='rcsbuf' data-ref="139rcsbuf" data-ref-filename="139rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#140val" title='val' data-ref="140val" data-ref-filename="140val">val</a>, <a class="local col0 ref" href="#140val" title='val' data-ref="140val" data-ref-filename="140val">val</a>, <a class="local col2 ref" href="#142lenp" title='lenp' data-ref="142lenp" data-ref-filename="142lenp">lenp</a>);</td></tr>
<tr><th id="1678">1678</th><td>}</td></tr>
<tr><th id="1679">1679</th><td></td></tr>
<tr><th id="1680">1680</th><td></td></tr>
<tr><th id="1681">1681</th><td></td></tr>
<tr><th id="1682">1682</th><td><i  data-doc="rcsbuf_valpolish_internal">/* Internal polishing routine, called from rcsbuf_valcopy and</i></td></tr>
<tr><th id="1683">1683</th><td><i  data-doc="rcsbuf_valpolish_internal">   rcsbuf_valpolish.  */</i></td></tr>
<tr><th id="1684">1684</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1685">1685</th><td><dfn class="tu decl def fn" id="rcsbuf_valpolish_internal" title='rcsbuf_valpolish_internal' data-type='void rcsbuf_valpolish_internal(struct rcsbuffer * rcsbuf, char * to, const char * from, size_t * lenp)' data-ref="rcsbuf_valpolish_internal" data-ref-filename="rcsbuf_valpolish_internal">rcsbuf_valpolish_internal</dfn> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col3 decl" id="143rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="143rcsbuf" data-ref-filename="143rcsbuf">rcsbuf</dfn>, <em>char</em> *<dfn class="local col4 decl" id="144to" title='to' data-type='char *' data-ref="144to" data-ref-filename="144to">to</dfn>,</td></tr>
<tr><th id="1686">1686</th><td>			   <em>const</em> <em>char</em> *<dfn class="local col5 decl" id="145from" title='from' data-type='const char *' data-ref="145from" data-ref-filename="145from">from</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> *<dfn class="local col6 decl" id="146lenp" title='lenp' data-type='size_t *' data-ref="146lenp" data-ref-filename="146lenp">lenp</dfn>)</td></tr>
<tr><th id="1687">1687</th><td>{</td></tr>
<tr><th id="1688">1688</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col7 decl" id="147len" title='len' data-type='size_t' data-ref="147len" data-ref-filename="147len">len</dfn>;</td></tr>
<tr><th id="1689">1689</th><td></td></tr>
<tr><th id="1690">1690</th><td>    <a class="local col7 ref" href="#147len" title='len' data-ref="147len" data-ref-filename="147len">len</a> = <a class="local col3 ref" href="#143rcsbuf" title='rcsbuf' data-ref="143rcsbuf" data-ref-filename="143rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::vlen" title='rcsbuffer::vlen' data-ref="rcsbuffer::vlen" data-ref-filename="rcsbuffer..vlen">vlen</a>;</td></tr>
<tr><th id="1691">1691</th><td></td></tr>
<tr><th id="1692">1692</th><td>    <b>if</b> (! <a class="local col3 ref" href="#143rcsbuf" title='rcsbuf' data-ref="143rcsbuf" data-ref-filename="143rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::at_string" title='rcsbuffer::at_string' data-ref="rcsbuffer::at_string" data-ref-filename="rcsbuffer..at_string">at_string</a>)</td></tr>
<tr><th id="1693">1693</th><td>    {</td></tr>
<tr><th id="1694">1694</th><td>	<em>char</em> *<dfn class="local col8 decl" id="148orig_to" title='orig_to' data-type='char *' data-ref="148orig_to" data-ref-filename="148orig_to">orig_to</dfn>;</td></tr>
<tr><th id="1695">1695</th><td>	<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col9 decl" id="149clen" title='clen' data-type='size_t' data-ref="149clen" data-ref-filename="149clen">clen</dfn>;</td></tr>
<tr><th id="1696">1696</th><td></td></tr>
<tr><th id="1697">1697</th><td>	<a class="local col8 ref" href="#148orig_to" title='orig_to' data-ref="148orig_to" data-ref-filename="148orig_to">orig_to</a> = <a class="local col4 ref" href="#144to" title='to' data-ref="144to" data-ref-filename="144to">to</a>;</td></tr>
<tr><th id="1698">1698</th><td></td></tr>
<tr><th id="1699">1699</th><td>	<b>for</b> (<a class="local col9 ref" href="#149clen" title='clen' data-ref="149clen" data-ref-filename="149clen">clen</a> = <a class="local col7 ref" href="#147len" title='len' data-ref="147len" data-ref-filename="147len">len</a>; <a class="local col9 ref" href="#149clen" title='clen' data-ref="149clen" data-ref-filename="149clen">clen</a> &gt; <var>0</var>; ++<a class="local col5 ref" href="#145from" title='from' data-ref="145from" data-ref-filename="145from">from</a>, --<a class="local col9 ref" href="#149clen" title='clen' data-ref="149clen" data-ref-filename="149clen">clen</a>)</td></tr>
<tr><th id="1700">1700</th><td>	{</td></tr>
<tr><th id="1701">1701</th><td>	    <em>char</em> <dfn class="local col0 decl" id="150c" title='c' data-type='char' data-ref="150c" data-ref-filename="150c">c</dfn>;</td></tr>
<tr><th id="1702">1702</th><td></td></tr>
<tr><th id="1703">1703</th><td>	    <a class="local col0 ref" href="#150c" title='c' data-ref="150c" data-ref-filename="150c">c</a> = *<a class="local col5 ref" href="#145from" title='from' data-ref="145from" data-ref-filename="145from">from</a>;</td></tr>
<tr><th id="1704">1704</th><td>	    <b>if</b> (<a class="macro" href="#169" title="(spacetab[(unsigned char)c] != 0)" data-ref="_M/whitespace">whitespace</a> (<a class="local col0 ref" href="#150c" title='c' data-ref="150c" data-ref-filename="150c">c</a>))</td></tr>
<tr><th id="1705">1705</th><td>	    {</td></tr>
<tr><th id="1706">1706</th><td>		<i>/* Note that we know that clen can not drop to zero</i></td></tr>
<tr><th id="1707">1707</th><td><i>                   while we have whitespace, because we know there is</i></td></tr>
<tr><th id="1708">1708</th><td><i>                   no trailing whitespace.  */</i></td></tr>
<tr><th id="1709">1709</th><td>		<b>while</b> (<a class="macro" href="#169" title="(spacetab[(unsigned char)from[1]] != 0)" data-ref="_M/whitespace">whitespace</a> (<a class="local col5 ref" href="#145from" title='from' data-ref="145from" data-ref-filename="145from">from</a>[<var>1</var>]))</td></tr>
<tr><th id="1710">1710</th><td>		{</td></tr>
<tr><th id="1711">1711</th><td>		    ++<a class="local col5 ref" href="#145from" title='from' data-ref="145from" data-ref-filename="145from">from</a>;</td></tr>
<tr><th id="1712">1712</th><td>		    --<a class="local col9 ref" href="#149clen" title='clen' data-ref="149clen" data-ref-filename="149clen">clen</a>;</td></tr>
<tr><th id="1713">1713</th><td>		}</td></tr>
<tr><th id="1714">1714</th><td>		<a class="local col0 ref" href="#150c" title='c' data-ref="150c" data-ref-filename="150c">c</a> = <kbd>' '</kbd>;</td></tr>
<tr><th id="1715">1715</th><td>	    }</td></tr>
<tr><th id="1716">1716</th><td>	    *<a class="local col4 ref" href="#144to" title='to' data-ref="144to" data-ref-filename="144to">to</a>++ = <a class="local col0 ref" href="#150c" title='c' data-ref="150c" data-ref-filename="150c">c</a>;</td></tr>
<tr><th id="1717">1717</th><td>	}</td></tr>
<tr><th id="1718">1718</th><td></td></tr>
<tr><th id="1719">1719</th><td>	*<a class="local col4 ref" href="#144to" title='to' data-ref="144to" data-ref-filename="144to">to</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="1720">1720</th><td></td></tr>
<tr><th id="1721">1721</th><td>	<b>if</b> (<a class="local col6 ref" href="#146lenp" title='lenp' data-ref="146lenp" data-ref-filename="146lenp">lenp</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1722">1722</th><td>	    *<a class="local col6 ref" href="#146lenp" title='lenp' data-ref="146lenp" data-ref-filename="146lenp">lenp</a> = <a class="local col4 ref" href="#144to" title='to' data-ref="144to" data-ref-filename="144to">to</a> - <a class="local col8 ref" href="#148orig_to" title='orig_to' data-ref="148orig_to" data-ref-filename="148orig_to">orig_to</a>;</td></tr>
<tr><th id="1723">1723</th><td>    }</td></tr>
<tr><th id="1724">1724</th><td>    <b>else</b></td></tr>
<tr><th id="1725">1725</th><td>    {</td></tr>
<tr><th id="1726">1726</th><td>	<em>const</em> <em>char</em> *<dfn class="local col1 decl" id="151orig_from" title='orig_from' data-type='const char *' data-ref="151orig_from" data-ref-filename="151orig_from">orig_from</dfn>;</td></tr>
<tr><th id="1727">1727</th><td>	<em>char</em> *<dfn class="local col2 decl" id="152orig_to" title='orig_to' data-type='char *' data-ref="152orig_to" data-ref-filename="152orig_to">orig_to</dfn>;</td></tr>
<tr><th id="1728">1728</th><td>	<em>int</em> <dfn class="local col3 decl" id="153embedded_at" title='embedded_at' data-type='int' data-ref="153embedded_at" data-ref-filename="153embedded_at">embedded_at</dfn>;</td></tr>
<tr><th id="1729">1729</th><td>	<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col4 decl" id="154clen" title='clen' data-type='size_t' data-ref="154clen" data-ref-filename="154clen">clen</dfn>;</td></tr>
<tr><th id="1730">1730</th><td></td></tr>
<tr><th id="1731">1731</th><td>	<a class="local col1 ref" href="#151orig_from" title='orig_from' data-ref="151orig_from" data-ref-filename="151orig_from">orig_from</a> = <a class="local col5 ref" href="#145from" title='from' data-ref="145from" data-ref-filename="145from">from</a>;</td></tr>
<tr><th id="1732">1732</th><td>	<a class="local col2 ref" href="#152orig_to" title='orig_to' data-ref="152orig_to" data-ref-filename="152orig_to">orig_to</a> = <a class="local col4 ref" href="#144to" title='to' data-ref="144to" data-ref-filename="144to">to</a>;</td></tr>
<tr><th id="1733">1733</th><td></td></tr>
<tr><th id="1734">1734</th><td>	<a class="local col3 ref" href="#153embedded_at" title='embedded_at' data-ref="153embedded_at" data-ref-filename="153embedded_at">embedded_at</a> = <a class="local col3 ref" href="#143rcsbuf" title='rcsbuf' data-ref="143rcsbuf" data-ref-filename="143rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::embedded_at" title='rcsbuffer::embedded_at' data-ref="rcsbuffer::embedded_at" data-ref-filename="rcsbuffer..embedded_at">embedded_at</a>;</td></tr>
<tr><th id="1735">1735</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((embedded_at &gt; 0) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 1735, __func__, &quot;embedded_at &gt; 0&quot;))" data-ref="_M/assert">assert</a> (<a class="local col3 ref" href="#153embedded_at" title='embedded_at' data-ref="153embedded_at" data-ref-filename="153embedded_at">embedded_at</a> &gt; <var>0</var>);</td></tr>
<tr><th id="1736">1736</th><td></td></tr>
<tr><th id="1737">1737</th><td>	<b>if</b> (<a class="local col6 ref" href="#146lenp" title='lenp' data-ref="146lenp" data-ref-filename="146lenp">lenp</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1738">1738</th><td>	    *<a class="local col6 ref" href="#146lenp" title='lenp' data-ref="146lenp" data-ref-filename="146lenp">lenp</a> = <a class="local col7 ref" href="#147len" title='len' data-ref="147len" data-ref-filename="147len">len</a> - <a class="local col3 ref" href="#153embedded_at" title='embedded_at' data-ref="153embedded_at" data-ref-filename="153embedded_at">embedded_at</a>;</td></tr>
<tr><th id="1739">1739</th><td></td></tr>
<tr><th id="1740">1740</th><td>	<b>for</b> (<a class="local col4 ref" href="#154clen" title='clen' data-ref="154clen" data-ref-filename="154clen">clen</a> = <a class="local col7 ref" href="#147len" title='len' data-ref="147len" data-ref-filename="147len">len</a>; <a class="local col4 ref" href="#154clen" title='clen' data-ref="154clen" data-ref-filename="154clen">clen</a> &gt; <var>0</var>; ++<a class="local col5 ref" href="#145from" title='from' data-ref="145from" data-ref-filename="145from">from</a>, --<a class="local col4 ref" href="#154clen" title='clen' data-ref="154clen" data-ref-filename="154clen">clen</a>)</td></tr>
<tr><th id="1741">1741</th><td>	{</td></tr>
<tr><th id="1742">1742</th><td>	    <em>char</em> <dfn class="local col5 decl" id="155c" title='c' data-type='char' data-ref="155c" data-ref-filename="155c">c</dfn>;</td></tr>
<tr><th id="1743">1743</th><td></td></tr>
<tr><th id="1744">1744</th><td>	    <a class="local col5 ref" href="#155c" title='c' data-ref="155c" data-ref-filename="155c">c</a> = *<a class="local col5 ref" href="#145from" title='from' data-ref="145from" data-ref-filename="145from">from</a>;</td></tr>
<tr><th id="1745">1745</th><td>	    *<a class="local col4 ref" href="#144to" title='to' data-ref="144to" data-ref-filename="144to">to</a>++ = <a class="local col5 ref" href="#155c" title='c' data-ref="155c" data-ref-filename="155c">c</a>;</td></tr>
<tr><th id="1746">1746</th><td>	    <b>if</b> (<a class="local col5 ref" href="#155c" title='c' data-ref="155c" data-ref-filename="155c">c</a> == <kbd>'@'</kbd>)</td></tr>
<tr><th id="1747">1747</th><td>	    {</td></tr>
<tr><th id="1748">1748</th><td>		++<a class="local col5 ref" href="#145from" title='from' data-ref="145from" data-ref-filename="145from">from</a>;</td></tr>
<tr><th id="1749">1749</th><td></td></tr>
<tr><th id="1750">1750</th><td>		<i>/* Sanity check.</i></td></tr>
<tr><th id="1751">1751</th><td><i>		 *</i></td></tr>
<tr><th id="1752">1752</th><td><i>		 * FIXME: I restored this to an abort from an assert based on</i></td></tr>
<tr><th id="1753">1753</th><td><i>		 * advice from Larry Jones that asserts should not be used to</i></td></tr>
<tr><th id="1754">1754</th><td><i>		 * confirm the validity of an RCS file...  This leaves two</i></td></tr>
<tr><th id="1755">1755</th><td><i>		 * issues here: 1) I am uncertain that the fact that we will</i></td></tr>
<tr><th id="1756">1756</th><td><i>		 * only find double '@'s hasn't already been confirmed; and:</i></td></tr>
<tr><th id="1757">1757</th><td><i>		 * 2) If this is the proper place to spot the error in the RCS</i></td></tr>
<tr><th id="1758">1758</th><td><i>		 * file, then we should print a much clearer error here for the</i></td></tr>
<tr><th id="1759">1759</th><td><i>		 * user!!!!!!!</i></td></tr>
<tr><th id="1760">1760</th><td><i>		 *</i></td></tr>
<tr><th id="1761">1761</th><td><i>		 *	- DRP</i></td></tr>
<tr><th id="1762">1762</th><td><i>		 */</i></td></tr>
<tr><th id="1763">1763</th><td>		<b>if</b> (*<a class="local col5 ref" href="#145from" title='from' data-ref="145from" data-ref-filename="145from">from</a> != <kbd>'@'</kbd> || <a class="local col4 ref" href="#154clen" title='clen' data-ref="154clen" data-ref-filename="154clen">clen</a> == <var>0</var>)</td></tr>
<tr><th id="1764">1764</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#abort" title='abort' data-ref="abort" data-ref-filename="abort">abort</a> ();</td></tr>
<tr><th id="1765">1765</th><td></td></tr>
<tr><th id="1766">1766</th><td>		--<a class="local col4 ref" href="#154clen" title='clen' data-ref="154clen" data-ref-filename="154clen">clen</a>;</td></tr>
<tr><th id="1767">1767</th><td></td></tr>
<tr><th id="1768">1768</th><td>		--<a class="local col3 ref" href="#153embedded_at" title='embedded_at' data-ref="153embedded_at" data-ref-filename="153embedded_at">embedded_at</a>;</td></tr>
<tr><th id="1769">1769</th><td>		<b>if</b> (<a class="local col3 ref" href="#153embedded_at" title='embedded_at' data-ref="153embedded_at" data-ref-filename="153embedded_at">embedded_at</a> == <var>0</var>)</td></tr>
<tr><th id="1770">1770</th><td>		{</td></tr>
<tr><th id="1771">1771</th><td>		    <i>/* We've found all the embedded '@' characters.</i></td></tr>
<tr><th id="1772">1772</th><td><i>                       We can just memcpy the rest of the buffer after</i></td></tr>
<tr><th id="1773">1773</th><td><i>                       this '@' character.  */</i></td></tr>
<tr><th id="1774">1774</th><td>		    <b>if</b> (<a class="local col2 ref" href="#152orig_to" title='orig_to' data-ref="152orig_to" data-ref-filename="152orig_to">orig_to</a> != <a class="local col1 ref" href="#151orig_from" title='orig_from' data-ref="151orig_from" data-ref-filename="151orig_from">orig_from</a>)</td></tr>
<tr><th id="1775">1775</th><td>			<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col4 ref" href="#144to" title='to' data-ref="144to" data-ref-filename="144to">to</a>, <a class="local col5 ref" href="#145from" title='from' data-ref="145from" data-ref-filename="145from">from</a> + <var>1</var>, <a class="local col4 ref" href="#154clen" title='clen' data-ref="154clen" data-ref-filename="154clen">clen</a> - <var>1</var>);</td></tr>
<tr><th id="1776">1776</th><td>		    <b>else</b></td></tr>
<tr><th id="1777">1777</th><td>			<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memmove" title='memmove' data-ref="memmove" data-ref-filename="memmove">memmove</a> (<a class="local col4 ref" href="#144to" title='to' data-ref="144to" data-ref-filename="144to">to</a>, <a class="local col5 ref" href="#145from" title='from' data-ref="145from" data-ref-filename="145from">from</a> + <var>1</var>, <a class="local col4 ref" href="#154clen" title='clen' data-ref="154clen" data-ref-filename="154clen">clen</a> - <var>1</var>);</td></tr>
<tr><th id="1778">1778</th><td>		    <a class="local col5 ref" href="#145from" title='from' data-ref="145from" data-ref-filename="145from">from</a> += <a class="local col4 ref" href="#154clen" title='clen' data-ref="154clen" data-ref-filename="154clen">clen</a>;</td></tr>
<tr><th id="1779">1779</th><td>		    <a class="local col4 ref" href="#144to" title='to' data-ref="144to" data-ref-filename="144to">to</a> += <a class="local col4 ref" href="#154clen" title='clen' data-ref="154clen" data-ref-filename="154clen">clen</a> - <var>1</var>;</td></tr>
<tr><th id="1780">1780</th><td>		    <b>break</b>;</td></tr>
<tr><th id="1781">1781</th><td>		}</td></tr>
<tr><th id="1782">1782</th><td>	    }</td></tr>
<tr><th id="1783">1783</th><td>	}</td></tr>
<tr><th id="1784">1784</th><td></td></tr>
<tr><th id="1785">1785</th><td>	<i>/* Sanity check.  */</i></td></tr>
<tr><th id="1786">1786</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((from == orig_from + len &amp;&amp; to == orig_to + (len - rcsbuf-&gt;embedded_at)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 1787, __func__, &quot;from == orig_from + len &amp;&amp; to == orig_to + (len - rcsbuf-&gt;embedded_at)&quot;))" data-ref="_M/assert">assert</a> (<a class="local col5 ref" href="#145from" title='from' data-ref="145from" data-ref-filename="145from">from</a> == <a class="local col1 ref" href="#151orig_from" title='orig_from' data-ref="151orig_from" data-ref-filename="151orig_from">orig_from</a> + <a class="local col7 ref" href="#147len" title='len' data-ref="147len" data-ref-filename="147len">len</a></td></tr>
<tr><th id="1787">1787</th><td>	    &amp;&amp; <a class="local col4 ref" href="#144to" title='to' data-ref="144to" data-ref-filename="144to">to</a> == <a class="local col2 ref" href="#152orig_to" title='orig_to' data-ref="152orig_to" data-ref-filename="152orig_to">orig_to</a> + (<a class="local col7 ref" href="#147len" title='len' data-ref="147len" data-ref-filename="147len">len</a> - <a class="local col3 ref" href="#143rcsbuf" title='rcsbuf' data-ref="143rcsbuf" data-ref-filename="143rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::embedded_at" title='rcsbuffer::embedded_at' data-ref="rcsbuffer::embedded_at" data-ref-filename="rcsbuffer..embedded_at">embedded_at</a>));</td></tr>
<tr><th id="1788">1788</th><td></td></tr>
<tr><th id="1789">1789</th><td>	*<a class="local col4 ref" href="#144to" title='to' data-ref="144to" data-ref-filename="144to">to</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="1790">1790</th><td>    }</td></tr>
<tr><th id="1791">1791</th><td>}</td></tr>
<tr><th id="1792">1792</th><td></td></tr>
<tr><th id="1793">1793</th><td></td></tr>
<tr><th id="1794">1794</th><td></td></tr>
<tr><th id="1795">1795</th><td><u>#<span data-ppcond="1795">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="1796">1796</th><td></td></tr>
<tr><th id="1797">1797</th><td><i>/* Copy the next word from the value VALP returned by rcsbuf_getkey into a</i></td></tr>
<tr><th id="1798">1798</th><td><i>   memory buffer, updating VALP and returning the memory buffer.  Return</i></td></tr>
<tr><th id="1799">1799</th><td><i>   NULL when there are no more words. */</i></td></tr>
<tr><th id="1800">1800</th><td></td></tr>
<tr><th id="1801">1801</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="1802">1802</th><td>rcsbuf_valword (<b>struct</b> rcsbuffer *rcsbuf, <em>char</em> **valp)</td></tr>
<tr><th id="1803">1803</th><td>{</td></tr>
<tr><th id="1804">1804</th><td>    <em>register</em> <em>const</em> <em>char</em> * <em>const</em> my_spacetab = spacetab;</td></tr>
<tr><th id="1805">1805</th><td>    <em>register</em> <em>char</em> *ptr, *pat;</td></tr>
<tr><th id="1806">1806</th><td>    <em>char</em> c;</td></tr>
<tr><th id="1807">1807</th><td></td></tr>
<tr><th id="1808">1808</th><td><u># define my_whitespace(c)	(my_spacetab[(unsigned char)c] != 0)</u></td></tr>
<tr><th id="1809">1809</th><td></td></tr>
<tr><th id="1810">1810</th><td>    <b>if</b> (*valp == NULL)</td></tr>
<tr><th id="1811">1811</th><td>	<b>return</b> NULL;</td></tr>
<tr><th id="1812">1812</th><td></td></tr>
<tr><th id="1813">1813</th><td>    <b>for</b> (ptr = *valp; my_whitespace (*ptr); ++ptr) ;</td></tr>
<tr><th id="1814">1814</th><td>    <b>if</b> (*ptr == <kbd>'\0'</kbd>)</td></tr>
<tr><th id="1815">1815</th><td>    {</td></tr>
<tr><th id="1816">1816</th><td>	assert (ptr - *valp == rcsbuf-&gt;vlen);</td></tr>
<tr><th id="1817">1817</th><td>	*valp = NULL;</td></tr>
<tr><th id="1818">1818</th><td>	rcsbuf-&gt;vlen = <var>0</var>;</td></tr>
<tr><th id="1819">1819</th><td>	<b>return</b> NULL;</td></tr>
<tr><th id="1820">1820</th><td>    }</td></tr>
<tr><th id="1821">1821</th><td></td></tr>
<tr><th id="1822">1822</th><td>    <i>/* PTR now points to the start of a value.  Find out whether it is</i></td></tr>
<tr><th id="1823">1823</th><td><i>       a num, an id, a string or a colon. */</i></td></tr>
<tr><th id="1824">1824</th><td>    c = *ptr;</td></tr>
<tr><th id="1825">1825</th><td>    <b>if</b> (c == <kbd>':'</kbd>)</td></tr>
<tr><th id="1826">1826</th><td>    {</td></tr>
<tr><th id="1827">1827</th><td>	rcsbuf-&gt;vlen -= ++ptr - *valp;</td></tr>
<tr><th id="1828">1828</th><td>	*valp = ptr;</td></tr>
<tr><th id="1829">1829</th><td>	<b>return</b> xstrdup (<q>":"</q>);</td></tr>
<tr><th id="1830">1830</th><td>    }</td></tr>
<tr><th id="1831">1831</th><td></td></tr>
<tr><th id="1832">1832</th><td>    <b>if</b> (c == <kbd>'@'</kbd>)</td></tr>
<tr><th id="1833">1833</th><td>    {</td></tr>
<tr><th id="1834">1834</th><td>	<em>int</em> embedded_at = <var>0</var>;</td></tr>
<tr><th id="1835">1835</th><td>	size_t vlen;</td></tr>
<tr><th id="1836">1836</th><td></td></tr>
<tr><th id="1837">1837</th><td>	pat = ++ptr;</td></tr>
<tr><th id="1838">1838</th><td>	<b>while</b> ((pat = strchr (pat, <kbd>'@'</kbd>)) != NULL)</td></tr>
<tr><th id="1839">1839</th><td>	{</td></tr>
<tr><th id="1840">1840</th><td>	    <b>if</b> (pat[<var>1</var>] != <kbd>'@'</kbd>)</td></tr>
<tr><th id="1841">1841</th><td>		<b>break</b>;</td></tr>
<tr><th id="1842">1842</th><td>	    ++embedded_at;</td></tr>
<tr><th id="1843">1843</th><td>	    pat += <var>2</var>;</td></tr>
<tr><th id="1844">1844</th><td>	}</td></tr>
<tr><th id="1845">1845</th><td></td></tr>
<tr><th id="1846">1846</th><td>	<i>/* Here PAT points to the final '@' in the string.  */</i></td></tr>
<tr><th id="1847">1847</th><td>	*pat++ = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="1848">1848</th><td>	assert (rcsbuf-&gt;at_string);</td></tr>
<tr><th id="1849">1849</th><td>	vlen = rcsbuf-&gt;vlen - (pat - *valp);</td></tr>
<tr><th id="1850">1850</th><td>	rcsbuf-&gt;vlen = pat - ptr - <var>1</var>;</td></tr>
<tr><th id="1851">1851</th><td>	rcsbuf-&gt;embedded_at = embedded_at;</td></tr>
<tr><th id="1852">1852</th><td>	ptr = rcsbuf_valcopy (rcsbuf, ptr, <var>0</var>, NULL);</td></tr>
<tr><th id="1853">1853</th><td>	*valp = pat;</td></tr>
<tr><th id="1854">1854</th><td>	rcsbuf-&gt;vlen = vlen;</td></tr>
<tr><th id="1855">1855</th><td>	<b>if</b> (strchr (pat, <kbd>'@'</kbd>) == NULL)</td></tr>
<tr><th id="1856">1856</th><td>	    rcsbuf-&gt;at_string = <var>0</var>;</td></tr>
<tr><th id="1857">1857</th><td>	<b>else</b></td></tr>
<tr><th id="1858">1858</th><td>	    rcsbuf-&gt;embedded_at = -<var>1</var>;</td></tr>
<tr><th id="1859">1859</th><td>	<b>return</b> ptr;</td></tr>
<tr><th id="1860">1860</th><td>    }</td></tr>
<tr><th id="1861">1861</th><td></td></tr>
<tr><th id="1862">1862</th><td>    <i>/* *PTR is neither `:', `;' nor `@', so it should be the start of a num</i></td></tr>
<tr><th id="1863">1863</th><td><i>       or an id.  Make sure it is not another special character. */</i></td></tr>
<tr><th id="1864">1864</th><td>    <b>if</b> (c == <kbd>'$'</kbd> || c == <kbd>'.'</kbd> || c == <kbd>','</kbd>)</td></tr>
<tr><th id="1865">1865</th><td>	error (<var>1</var>, <var>0</var>, <q>"invalid special character in RCS field in %s"</q>,</td></tr>
<tr><th id="1866">1866</th><td>	       primary_root_inverse_translate (rcsbuf-&gt;filename));</td></tr>
<tr><th id="1867">1867</th><td></td></tr>
<tr><th id="1868">1868</th><td>    pat = ptr;</td></tr>
<tr><th id="1869">1869</th><td>    <b>while</b> (<var>1</var>)</td></tr>
<tr><th id="1870">1870</th><td>    {</td></tr>
<tr><th id="1871">1871</th><td>	<i>/* Legitimate ID characters are digits, dots and any `graphic</i></td></tr>
<tr><th id="1872">1872</th><td><i>           printing character that is not a special.' This test ought</i></td></tr>
<tr><th id="1873">1873</th><td><i>	   to do the trick. */</i></td></tr>
<tr><th id="1874">1874</th><td>	c = *++pat;</td></tr>
<tr><th id="1875">1875</th><td>	<b>if</b> (!isprint ((<em>unsigned</em> <em>char</em>) c) ||</td></tr>
<tr><th id="1876">1876</th><td>	    c == <kbd>';'</kbd> || c == <kbd>'$'</kbd> || c == <kbd>','</kbd> || c == <kbd>'@'</kbd> || c == <kbd>':'</kbd>)</td></tr>
<tr><th id="1877">1877</th><td>	    <b>break</b>;</td></tr>
<tr><th id="1878">1878</th><td>    }</td></tr>
<tr><th id="1879">1879</th><td></td></tr>
<tr><th id="1880">1880</th><td>    <i>/* PAT points to the last non-id character in this word, and C is</i></td></tr>
<tr><th id="1881">1881</th><td><i>       the character in its memory cell.  Check to make sure that it</i></td></tr>
<tr><th id="1882">1882</th><td><i>       is a legitimate word delimiter -- whitespace or end. */</i></td></tr>
<tr><th id="1883">1883</th><td>    <b>if</b> (c != <kbd>'\0'</kbd> &amp;&amp; !my_whitespace (c))</td></tr>
<tr><th id="1884">1884</th><td>	error (<var>1</var>, <var>0</var>, <q>"invalid special character in RCS field in %s"</q>,</td></tr>
<tr><th id="1885">1885</th><td>	       primary_root_inverse_translate (rcsbuf-&gt;filename));</td></tr>
<tr><th id="1886">1886</th><td></td></tr>
<tr><th id="1887">1887</th><td>    *pat = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="1888">1888</th><td>    rcsbuf-&gt;vlen -= pat - *valp;</td></tr>
<tr><th id="1889">1889</th><td>    *valp = pat;</td></tr>
<tr><th id="1890">1890</th><td>    <b>return</b> xstrdup (ptr);</td></tr>
<tr><th id="1891">1891</th><td></td></tr>
<tr><th id="1892">1892</th><td><u># undef my_whitespace</u></td></tr>
<tr><th id="1893">1893</th><td>}</td></tr>
<tr><th id="1894">1894</th><td></td></tr>
<tr><th id="1895">1895</th><td><u>#<span data-ppcond="1795">endif</span> /* PRESERVE_PERMISSIONS_SUPPORT */</u></td></tr>
<tr><th id="1896">1896</th><td></td></tr>
<tr><th id="1897">1897</th><td></td></tr>
<tr><th id="1898">1898</th><td></td></tr>
<tr><th id="1899">1899</th><td><i  data-doc="rcsbuf_ftello">/* Return the current position of an rcsbuf.  */</i></td></tr>
<tr><th id="1900">1900</th><td><em>static</em> <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#178" title="__off_t" data-ref="_M/off_t">off_t</a></td></tr>
<tr><th id="1901">1901</th><td><dfn class="tu decl def fn" id="rcsbuf_ftello" title='rcsbuf_ftello' data-type='__off_t rcsbuf_ftello(struct rcsbuffer * rcsbuf)' data-ref="rcsbuf_ftello" data-ref-filename="rcsbuf_ftello">rcsbuf_ftello</dfn> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col6 decl" id="156rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="156rcsbuf" data-ref-filename="156rcsbuf">rcsbuf</dfn>)</td></tr>
<tr><th id="1902">1902</th><td>{</td></tr>
<tr><th id="1903">1903</th><td>    <b>return</b> <a class="local col6 ref" href="#156rcsbuf" title='rcsbuf' data-ref="156rcsbuf" data-ref-filename="156rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::pos" title='rcsbuffer::pos' data-ref="rcsbuffer::pos" data-ref-filename="rcsbuffer..pos">pos</a> + <a class="local col6 ref" href="#156rcsbuf" title='rcsbuf' data-ref="156rcsbuf" data-ref-filename="156rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptr" title='rcsbuffer::ptr' data-ref="rcsbuffer::ptr" data-ref-filename="rcsbuffer..ptr">ptr</a> - <a class="tu ref" href="#rcsbuf_buffer" title='rcsbuf_buffer' data-use='r' data-ref="rcsbuf_buffer" data-ref-filename="rcsbuf_buffer">rcsbuf_buffer</a>;</td></tr>
<tr><th id="1904">1904</th><td>}</td></tr>
<tr><th id="1905">1905</th><td></td></tr>
<tr><th id="1906">1906</th><td></td></tr>
<tr><th id="1907">1907</th><td></td></tr>
<tr><th id="1908">1908</th><td><i  data-doc="rcsbuf_get_buffered">/* Return a pointer to any data buffered for RCSBUF, along with the</i></td></tr>
<tr><th id="1909">1909</th><td><i  data-doc="rcsbuf_get_buffered">   length.  */</i></td></tr>
<tr><th id="1910">1910</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1911">1911</th><td><dfn class="tu decl def fn" id="rcsbuf_get_buffered" title='rcsbuf_get_buffered' data-type='void rcsbuf_get_buffered(struct rcsbuffer * rcsbuf, char ** datap, size_t * lenp)' data-ref="rcsbuf_get_buffered" data-ref-filename="rcsbuf_get_buffered">rcsbuf_get_buffered</dfn> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col7 decl" id="157rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="157rcsbuf" data-ref-filename="157rcsbuf">rcsbuf</dfn>, <em>char</em> **<dfn class="local col8 decl" id="158datap" title='datap' data-type='char **' data-ref="158datap" data-ref-filename="158datap">datap</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> *<dfn class="local col9 decl" id="159lenp" title='lenp' data-type='size_t *' data-ref="159lenp" data-ref-filename="159lenp">lenp</dfn>)</td></tr>
<tr><th id="1912">1912</th><td>{</td></tr>
<tr><th id="1913">1913</th><td>    *<a class="local col8 ref" href="#158datap" title='datap' data-ref="158datap" data-ref-filename="158datap">datap</a> = <a class="local col7 ref" href="#157rcsbuf" title='rcsbuf' data-ref="157rcsbuf" data-ref-filename="157rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptr" title='rcsbuffer::ptr' data-ref="rcsbuffer::ptr" data-ref-filename="rcsbuffer..ptr">ptr</a>;</td></tr>
<tr><th id="1914">1914</th><td>    *<a class="local col9 ref" href="#159lenp" title='lenp' data-ref="159lenp" data-ref-filename="159lenp">lenp</a> = <a class="local col7 ref" href="#157rcsbuf" title='rcsbuf' data-ref="157rcsbuf" data-ref-filename="157rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptrend" title='rcsbuffer::ptrend' data-ref="rcsbuffer::ptrend" data-ref-filename="rcsbuffer..ptrend">ptrend</a> - <a class="local col7 ref" href="#157rcsbuf" title='rcsbuf' data-ref="157rcsbuf" data-ref-filename="157rcsbuf">rcsbuf</a>-&gt;<a class="ref field" href="#rcsbuffer::ptr" title='rcsbuffer::ptr' data-ref="rcsbuffer::ptr" data-ref-filename="rcsbuffer..ptr">ptr</a>;</td></tr>
<tr><th id="1915">1915</th><td>}</td></tr>
<tr><th id="1916">1916</th><td></td></tr>
<tr><th id="1917">1917</th><td></td></tr>
<tr><th id="1918">1918</th><td></td></tr>
<tr><th id="1919">1919</th><td><i  data-doc="cached_rcs">/* CVS optimizes by quickly reading some header information from a</i></td></tr>
<tr><th id="1920">1920</th><td><i  data-doc="cached_rcs">   file.  If it decides it needs to do more with the file, it reopens</i></td></tr>
<tr><th id="1921">1921</th><td><i  data-doc="cached_rcs">   it.  We speed that up here by maintaining a cache of a single open</i></td></tr>
<tr><th id="1922">1922</th><td><i  data-doc="cached_rcs">   file, to save the time it takes to reopen the file in the common</i></td></tr>
<tr><th id="1923">1923</th><td><i  data-doc="cached_rcs">   case.  */</i></td></tr>
<tr><th id="1924">1924</th><td><em>static</em> <a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="tu decl def" id="cached_rcs" title='cached_rcs' data-type='RCSNode *' data-ref="cached_rcs" data-ref-filename="cached_rcs">cached_rcs</dfn>;</td></tr>
<tr><th id="1925">1925</th><td><em>static</em> <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> <dfn class="tu decl def" id="cached_rcsbuf" title='cached_rcsbuf' data-type='struct rcsbuffer' data-ref="cached_rcsbuf" data-ref-filename="cached_rcsbuf">cached_rcsbuf</dfn>;</td></tr>
<tr><th id="1926">1926</th><td></td></tr>
<tr><th id="1927">1927</th><td><i  data-doc="rcsbuf_cache">/* Cache RCS and RCSBUF.  This takes responsibility for closing</i></td></tr>
<tr><th id="1928">1928</th><td><i  data-doc="rcsbuf_cache">   RCSBUF-&gt;FP.  */</i></td></tr>
<tr><th id="1929">1929</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1930">1930</th><td><dfn class="tu decl def fn" id="rcsbuf_cache" title='rcsbuf_cache' data-type='void rcsbuf_cache(RCSNode * rcs, struct rcsbuffer * rcsbuf)' data-ref="rcsbuf_cache" data-ref-filename="rcsbuf_cache">rcsbuf_cache</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col0 decl" id="160rcs" title='rcs' data-type='RCSNode *' data-ref="160rcs" data-ref-filename="160rcs">rcs</dfn>, <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col1 decl" id="161rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="161rcsbuf" data-ref-filename="161rcsbuf">rcsbuf</dfn>)</td></tr>
<tr><th id="1931">1931</th><td>{</td></tr>
<tr><th id="1932">1932</th><td>    <b>if</b> (<a class="tu ref" href="#cached_rcs" title='cached_rcs' data-use='r' data-ref="cached_rcs" data-ref-filename="cached_rcs">cached_rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1933">1933</th><td>	<a class="tu ref fn" href="#rcsbuf_cache_close" title='rcsbuf_cache_close' data-use='c' data-ref="rcsbuf_cache_close" data-ref-filename="rcsbuf_cache_close">rcsbuf_cache_close</a> ();</td></tr>
<tr><th id="1934">1934</th><td>    <a class="tu ref" href="#cached_rcs" title='cached_rcs' data-use='w' data-ref="cached_rcs" data-ref-filename="cached_rcs">cached_rcs</a> = <a class="local col0 ref" href="#160rcs" title='rcs' data-ref="160rcs" data-ref-filename="160rcs">rcs</a>;</td></tr>
<tr><th id="1935">1935</th><td>    ++<a class="local col0 ref" href="#160rcs" title='rcs' data-ref="160rcs" data-ref-filename="160rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::refcount" title='rcsnode::refcount' data-ref="rcsnode::refcount" data-ref-filename="rcsnode..refcount">refcount</a>;</td></tr>
<tr><th id="1936">1936</th><td>    <a class="tu ref" href="#cached_rcsbuf" title='cached_rcsbuf' data-use='w' data-ref="cached_rcsbuf" data-ref-filename="cached_rcsbuf">cached_rcsbuf</a> = *<a class="local col1 ref" href="#161rcsbuf" title='rcsbuf' data-ref="161rcsbuf" data-ref-filename="161rcsbuf">rcsbuf</a>;</td></tr>
<tr><th id="1937">1937</th><td>}</td></tr>
<tr><th id="1938">1938</th><td></td></tr>
<tr><th id="1939">1939</th><td></td></tr>
<tr><th id="1940">1940</th><td></td></tr>
<tr><th id="1941">1941</th><td><i  data-doc="rcsbuf_cache_close">/* If there is anything in the cache, close it.  */</i></td></tr>
<tr><th id="1942">1942</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1943">1943</th><td><dfn class="tu decl def fn" id="rcsbuf_cache_close" title='rcsbuf_cache_close' data-type='void rcsbuf_cache_close()' data-ref="rcsbuf_cache_close" data-ref-filename="rcsbuf_cache_close">rcsbuf_cache_close</dfn> (<em>void</em>)</td></tr>
<tr><th id="1944">1944</th><td>{</td></tr>
<tr><th id="1945">1945</th><td>    <b>if</b> (<a class="tu ref" href="#cached_rcs" title='cached_rcs' data-use='r' data-ref="cached_rcs" data-ref-filename="cached_rcs">cached_rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1946">1946</th><td>    {</td></tr>
<tr><th id="1947">1947</th><td>	<a class="tu ref fn" href="#rcsbuf_close" title='rcsbuf_close' data-use='c' data-ref="rcsbuf_close" data-ref-filename="rcsbuf_close">rcsbuf_close</a> (&amp;<a class="tu ref" href="#cached_rcsbuf" title='cached_rcsbuf' data-use='a' data-ref="cached_rcsbuf" data-ref-filename="cached_rcsbuf">cached_rcsbuf</a>);</td></tr>
<tr><th id="1948">1948</th><td>	<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fclose" title='fclose' data-ref="fclose" data-ref-filename="fclose">fclose</a> (<a class="tu ref" href="#cached_rcsbuf" title='cached_rcsbuf' data-use='m' data-ref="cached_rcsbuf" data-ref-filename="cached_rcsbuf">cached_rcsbuf</a>.<a class="ref field" href="#rcsbuffer::fp" title='rcsbuffer::fp' data-ref="rcsbuffer::fp" data-ref-filename="rcsbuffer..fp">fp</a>) != <var>0</var>)</td></tr>
<tr><th id="1949">1949</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot close %s"</q>, <a class="tu ref" href="#cached_rcsbuf" title='cached_rcsbuf' data-use='m' data-ref="cached_rcsbuf" data-ref-filename="cached_rcsbuf">cached_rcsbuf</a>.<a class="ref field" href="#rcsbuffer::filename" title='rcsbuffer::filename' data-ref="rcsbuffer::filename" data-ref-filename="rcsbuffer..filename">filename</a>);</td></tr>
<tr><th id="1950">1950</th><td>	<a class="ref fn" href="#freercsnode" title='freercsnode' data-ref="freercsnode" data-ref-filename="freercsnode">freercsnode</a> (&amp;<a class="tu ref" href="#cached_rcs" title='cached_rcs' data-use='a' data-ref="cached_rcs" data-ref-filename="cached_rcs">cached_rcs</a>);</td></tr>
<tr><th id="1951">1951</th><td>	<a class="tu ref" href="#cached_rcs" title='cached_rcs' data-use='w' data-ref="cached_rcs" data-ref-filename="cached_rcs">cached_rcs</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1952">1952</th><td>    }</td></tr>
<tr><th id="1953">1953</th><td>}</td></tr>
<tr><th id="1954">1954</th><td></td></tr>
<tr><th id="1955">1955</th><td></td></tr>
<tr><th id="1956">1956</th><td></td></tr>
<tr><th id="1957">1957</th><td><i  data-doc="rcsbuf_cache_open">/* Open an rcsbuffer for RCS, getting it from the cache if possible.</i></td></tr>
<tr><th id="1958">1958</th><td><i  data-doc="rcsbuf_cache_open">   Set *FPP to the file, and *RCSBUFP to the rcsbuf.  The file should</i></td></tr>
<tr><th id="1959">1959</th><td><i  data-doc="rcsbuf_cache_open">   be put at position POS.  */</i></td></tr>
<tr><th id="1960">1960</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1961">1961</th><td><dfn class="tu decl def fn" id="rcsbuf_cache_open" title='rcsbuf_cache_open' data-type='void rcsbuf_cache_open(RCSNode * rcs, __off_t pos, FILE ** pfp, struct rcsbuffer * prcsbuf)' data-ref="rcsbuf_cache_open" data-ref-filename="rcsbuf_cache_open">rcsbuf_cache_open</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col2 decl" id="162rcs" title='rcs' data-type='RCSNode *' data-ref="162rcs" data-ref-filename="162rcs">rcs</dfn>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#178" title="__off_t" data-ref="_M/off_t">off_t</a> <dfn class="local col3 decl" id="163pos" title='pos' data-type='__off_t' data-ref="163pos" data-ref-filename="163pos">pos</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> **<dfn class="local col4 decl" id="164pfp" title='pfp' data-type='FILE **' data-ref="164pfp" data-ref-filename="164pfp">pfp</dfn>,</td></tr>
<tr><th id="1962">1962</th><td>		   <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col5 decl" id="165prcsbuf" title='prcsbuf' data-type='struct rcsbuffer *' data-ref="165prcsbuf" data-ref-filename="165prcsbuf">prcsbuf</dfn>)</td></tr>
<tr><th id="1963">1963</th><td>{</td></tr>
<tr><th id="1964">1964</th><td><u>#<span data-ppcond="1964">ifndef</span> <a class="macro" href="../../include/config.h.html#498" data-ref="_M/HAVE_MMAP">HAVE_MMAP</a></u></td></tr>
<tr><th id="1965">1965</th><td>    <b>if</b> (cached_rcs == rcs)</td></tr>
<tr><th id="1966">1966</th><td>    {</td></tr>
<tr><th id="1967">1967</th><td>	<b>if</b> (rcsbuf_ftello (&amp;cached_rcsbuf) != pos)</td></tr>
<tr><th id="1968">1968</th><td>	{</td></tr>
<tr><th id="1969">1969</th><td>	    <b>if</b> (fseeko (cached_rcsbuf.fp, pos, SEEK_SET) != <var>0</var>)</td></tr>
<tr><th id="1970">1970</th><td>		error (<var>1</var>, <var>0</var>, <q>"cannot fseeko RCS file %s"</q>,</td></tr>
<tr><th id="1971">1971</th><td>		       cached_rcsbuf.filename);</td></tr>
<tr><th id="1972">1972</th><td>	    cached_rcsbuf.ptr = rcsbuf_buffer;</td></tr>
<tr><th id="1973">1973</th><td>	    cached_rcsbuf.ptrend = rcsbuf_buffer;</td></tr>
<tr><th id="1974">1974</th><td>	    cached_rcsbuf.pos = pos;</td></tr>
<tr><th id="1975">1975</th><td>	}</td></tr>
<tr><th id="1976">1976</th><td>	*pfp = cached_rcsbuf.fp;</td></tr>
<tr><th id="1977">1977</th><td></td></tr>
<tr><th id="1978">1978</th><td>	<i>/* When RCS_parse opens a file using fopen_case, it frees the</i></td></tr>
<tr><th id="1979">1979</th><td><i>           filename which we cached in CACHED_RCSBUF and stores a new</i></td></tr>
<tr><th id="1980">1980</th><td><i>           file name in RCS-&gt;PATH.  We avoid problems here by always</i></td></tr>
<tr><th id="1981">1981</th><td><i>           copying the filename over.  FIXME: This is hackish.  */</i></td></tr>
<tr><th id="1982">1982</th><td>	cached_rcsbuf.filename = rcs-&gt;path;</td></tr>
<tr><th id="1983">1983</th><td></td></tr>
<tr><th id="1984">1984</th><td>	*prcsbuf = cached_rcsbuf;</td></tr>
<tr><th id="1985">1985</th><td></td></tr>
<tr><th id="1986">1986</th><td>	cached_rcs = NULL;</td></tr>
<tr><th id="1987">1987</th><td></td></tr>
<tr><th id="1988">1988</th><td>	<i>/* Removing RCS from the cache removes a reference to it.  */</i></td></tr>
<tr><th id="1989">1989</th><td>	--rcs-&gt;refcount;</td></tr>
<tr><th id="1990">1990</th><td>	<b>if</b> (rcs-&gt;refcount &lt;= <var>0</var>)</td></tr>
<tr><th id="1991">1991</th><td>	    error (<var>1</var>, <var>0</var>, <q>"rcsbuf_cache_open: internal error"</q>);</td></tr>
<tr><th id="1992">1992</th><td>    }</td></tr>
<tr><th id="1993">1993</th><td>    <b>else</b></td></tr>
<tr><th id="1994">1994</th><td>    {</td></tr>
<tr><th id="1995">1995</th><td><u>#<span data-ppcond="1964">endif</span> /* ifndef HAVE_MMAP */</u></td></tr>
<tr><th id="1996">1996</th><td>	<i>/* FIXME:  If these routines can be rewritten to not write to the</i></td></tr>
<tr><th id="1997">1997</th><td><i>	 * rcs file buffer, there would be a considerably larger memory savings</i></td></tr>
<tr><th id="1998">1998</th><td><i>	 * from using mmap since the shared file would never need be copied to</i></td></tr>
<tr><th id="1999">1999</th><td><i>	 * process memory.</i></td></tr>
<tr><th id="2000">2000</th><td><i>	 *</i></td></tr>
<tr><th id="2001">2001</th><td><i>	 * If this happens, cached mmapped buffers would be usable, but don't</i></td></tr>
<tr><th id="2002">2002</th><td><i>	 * forget to make sure rcs-&gt;pos &lt; pos here...</i></td></tr>
<tr><th id="2003">2003</th><td><i>	 */</i></td></tr>
<tr><th id="2004">2004</th><td>	<b>if</b> (<a class="tu ref" href="#cached_rcs" title='cached_rcs' data-use='r' data-ref="cached_rcs" data-ref-filename="cached_rcs">cached_rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2005">2005</th><td>	    <a class="tu ref fn" href="#rcsbuf_cache_close" title='rcsbuf_cache_close' data-use='c' data-ref="rcsbuf_cache_close" data-ref-filename="rcsbuf_cache_close">rcsbuf_cache_close</a> ();</td></tr>
<tr><th id="2006">2006</th><td></td></tr>
<tr><th id="2007">2007</th><td>	*<a class="local col4 ref" href="#164pfp" title='pfp' data-ref="164pfp" data-ref-filename="164pfp">pfp</a> = <a class="macro" href="../lib/system.h.html#224" title="fopen" data-ref="_M/CVS_FOPEN">CVS_FOPEN</a> (<a class="local col2 ref" href="#162rcs" title='rcs' data-ref="162rcs" data-ref-filename="162rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>, <a class="macro" href="../lib/system.h.html#337" title="(&quot;rb&quot;)" data-ref="_M/FOPEN_BINARY_READ">FOPEN_BINARY_READ</a>);</td></tr>
<tr><th id="2008">2008</th><td>	<b>if</b> (*<a class="local col4 ref" href="#164pfp" title='pfp' data-ref="164pfp" data-ref-filename="164pfp">pfp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2009">2009</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"unable to reopen `%s'"</q>, <a class="local col2 ref" href="#162rcs" title='rcs' data-ref="162rcs" data-ref-filename="162rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="2010">2010</th><td><u>#<span data-ppcond="2010">ifndef</span> <a class="macro" href="../../include/config.h.html#498" data-ref="_M/HAVE_MMAP">HAVE_MMAP</a></u></td></tr>
<tr><th id="2011">2011</th><td>	<b>if</b> (pos != <var>0</var>)</td></tr>
<tr><th id="2012">2012</th><td>	{</td></tr>
<tr><th id="2013">2013</th><td>	    <b>if</b> (fseeko (*pfp, pos, SEEK_SET) != <var>0</var>)</td></tr>
<tr><th id="2014">2014</th><td>		error (<var>1</var>, <var>0</var>, <q>"cannot fseeko RCS file %s"</q>, rcs-&gt;path);</td></tr>
<tr><th id="2015">2015</th><td>	}</td></tr>
<tr><th id="2016">2016</th><td><u>#<span data-ppcond="2010">endif</span> /* ifndef HAVE_MMAP */</u></td></tr>
<tr><th id="2017">2017</th><td>	<a class="tu ref fn" href="#rcsbuf_open" title='rcsbuf_open' data-use='c' data-ref="rcsbuf_open" data-ref-filename="rcsbuf_open">rcsbuf_open</a> (<a class="local col5 ref" href="#165prcsbuf" title='prcsbuf' data-ref="165prcsbuf" data-ref-filename="165prcsbuf">prcsbuf</a>, *<a class="local col4 ref" href="#164pfp" title='pfp' data-ref="164pfp" data-ref-filename="164pfp">pfp</a>, <a class="local col2 ref" href="#162rcs" title='rcs' data-ref="162rcs" data-ref-filename="162rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>, <a class="local col3 ref" href="#163pos" title='pos' data-ref="163pos" data-ref-filename="163pos">pos</a>);</td></tr>
<tr><th id="2018">2018</th><td><u>#<span data-ppcond="2018">ifndef</span> <a class="macro" href="../../include/config.h.html#498" data-ref="_M/HAVE_MMAP">HAVE_MMAP</a></u></td></tr>
<tr><th id="2019">2019</th><td>    }</td></tr>
<tr><th id="2020">2020</th><td><u>#<span data-ppcond="2018">endif</span> /* ifndef HAVE_MMAP */</u></td></tr>
<tr><th id="2021">2021</th><td>}</td></tr>
<tr><th id="2022">2022</th><td></td></tr>
<tr><th id="2023">2023</th><td></td></tr>
<tr><th id="2024">2024</th><td></td></tr>
<tr><th id="2025">2025</th><td><i  data-doc="do_symbols">/*</i></td></tr>
<tr><th id="2026">2026</th><td><i  data-doc="do_symbols"> * process the symbols list of the rcs file</i></td></tr>
<tr><th id="2027">2027</th><td><i  data-doc="do_symbols"> */</i></td></tr>
<tr><th id="2028">2028</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2029">2029</th><td><dfn class="tu decl def fn" id="do_symbols" title='do_symbols' data-type='void do_symbols(List * list, char * val)' data-ref="do_symbols" data-ref-filename="do_symbols">do_symbols</dfn> (<a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> *<dfn class="local col6 decl" id="166list" title='list' data-type='List *' data-ref="166list" data-ref-filename="166list">list</dfn>, <em>char</em> *<dfn class="local col7 decl" id="167val" title='val' data-type='char *' data-ref="167val" data-ref-filename="167val">val</dfn>)</td></tr>
<tr><th id="2030">2030</th><td>{</td></tr>
<tr><th id="2031">2031</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col8 decl" id="168p" title='p' data-type='Node *' data-ref="168p" data-ref-filename="168p">p</dfn>;</td></tr>
<tr><th id="2032">2032</th><td>    <em>char</em> *<dfn class="local col9 decl" id="169cp" title='cp' data-type='char *' data-ref="169cp" data-ref-filename="169cp">cp</dfn> = <a class="local col7 ref" href="#167val" title='val' data-ref="167val" data-ref-filename="167val">val</a>;</td></tr>
<tr><th id="2033">2033</th><td>    <em>char</em> *<dfn class="local col0 decl" id="170tag" title='tag' data-type='char *' data-ref="170tag" data-ref-filename="170tag">tag</dfn>, *<dfn class="local col1 decl" id="171rev" title='rev' data-type='char *' data-ref="171rev" data-ref-filename="171rev">rev</dfn>;</td></tr>
<tr><th id="2034">2034</th><td></td></tr>
<tr><th id="2035">2035</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((cp) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 2035, __func__, &quot;cp&quot;))" data-ref="_M/assert">assert</a> (<a class="local col9 ref" href="#169cp" title='cp' data-ref="169cp" data-ref-filename="169cp">cp</a>);</td></tr>
<tr><th id="2036">2036</th><td></td></tr>
<tr><th id="2037">2037</th><td>    <b>for</b> (;;)</td></tr>
<tr><th id="2038">2038</th><td>    {</td></tr>
<tr><th id="2039">2039</th><td>	<i>/* skip leading whitespace */</i></td></tr>
<tr><th id="2040">2040</th><td>	<b>while</b> (<a class="macro" href="#169" title="(spacetab[(unsigned char)*cp] != 0)" data-ref="_M/whitespace">whitespace</a> (*<a class="local col9 ref" href="#169cp" title='cp' data-ref="169cp" data-ref-filename="169cp">cp</a>))</td></tr>
<tr><th id="2041">2041</th><td>	    <a class="local col9 ref" href="#169cp" title='cp' data-ref="169cp" data-ref-filename="169cp">cp</a>++;</td></tr>
<tr><th id="2042">2042</th><td></td></tr>
<tr><th id="2043">2043</th><td>	<i>/* if we got to the end, we are done */</i></td></tr>
<tr><th id="2044">2044</th><td>	<b>if</b> (*<a class="local col9 ref" href="#169cp" title='cp' data-ref="169cp" data-ref-filename="169cp">cp</a> == <kbd>'\0'</kbd>)</td></tr>
<tr><th id="2045">2045</th><td>	    <b>break</b>;</td></tr>
<tr><th id="2046">2046</th><td></td></tr>
<tr><th id="2047">2047</th><td>	<i>/* split it up into tag and rev */</i></td></tr>
<tr><th id="2048">2048</th><td>	<a class="local col0 ref" href="#170tag" title='tag' data-ref="170tag" data-ref-filename="170tag">tag</a> = <a class="local col9 ref" href="#169cp" title='cp' data-ref="169cp" data-ref-filename="169cp">cp</a>;</td></tr>
<tr><th id="2049">2049</th><td>	<a class="local col9 ref" href="#169cp" title='cp' data-ref="169cp" data-ref-filename="169cp">cp</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strchr" title='strchr' data-ref="strchr" data-ref-filename="strchr">strchr</a> (<a class="local col9 ref" href="#169cp" title='cp' data-ref="169cp" data-ref-filename="169cp">cp</a>, <kbd>':'</kbd>);</td></tr>
<tr><th id="2050">2050</th><td>	*<a class="local col9 ref" href="#169cp" title='cp' data-ref="169cp" data-ref-filename="169cp">cp</a>++ = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="2051">2051</th><td>	<a class="local col1 ref" href="#171rev" title='rev' data-ref="171rev" data-ref-filename="171rev">rev</a> = <a class="local col9 ref" href="#169cp" title='cp' data-ref="169cp" data-ref-filename="169cp">cp</a>;</td></tr>
<tr><th id="2052">2052</th><td>	<b>while</b> (!<a class="macro" href="#169" title="(spacetab[(unsigned char)*cp] != 0)" data-ref="_M/whitespace">whitespace</a> (*<a class="local col9 ref" href="#169cp" title='cp' data-ref="169cp" data-ref-filename="169cp">cp</a>) &amp;&amp; *<a class="local col9 ref" href="#169cp" title='cp' data-ref="169cp" data-ref-filename="169cp">cp</a> != <kbd>'\0'</kbd>)</td></tr>
<tr><th id="2053">2053</th><td>	    <a class="local col9 ref" href="#169cp" title='cp' data-ref="169cp" data-ref-filename="169cp">cp</a>++;</td></tr>
<tr><th id="2054">2054</th><td>	<b>if</b> (*<a class="local col9 ref" href="#169cp" title='cp' data-ref="169cp" data-ref-filename="169cp">cp</a> != <kbd>'\0'</kbd>)</td></tr>
<tr><th id="2055">2055</th><td>	    *<a class="local col9 ref" href="#169cp" title='cp' data-ref="169cp" data-ref-filename="169cp">cp</a>++ = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="2056">2056</th><td></td></tr>
<tr><th id="2057">2057</th><td>	<i>/* make a new node and add it to the list */</i></td></tr>
<tr><th id="2058">2058</th><td>	<a class="local col8 ref" href="#168p" title='p' data-ref="168p" data-ref-filename="168p">p</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a> ();</td></tr>
<tr><th id="2059">2059</th><td>	<a class="local col8 ref" href="#168p" title='p' data-ref="168p" data-ref-filename="168p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col0 ref" href="#170tag" title='tag' data-ref="170tag" data-ref-filename="170tag">tag</a>);</td></tr>
<tr><th id="2060">2060</th><td>	<a class="local col8 ref" href="#168p" title='p' data-ref="168p" data-ref-filename="168p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col1 ref" href="#171rev" title='rev' data-ref="171rev" data-ref-filename="171rev">rev</a>);</td></tr>
<tr><th id="2061">2061</th><td>	(<em>void</em>) <a class="ref fn" href="hash.h.html#addnode" title='addnode' data-ref="addnode" data-ref-filename="addnode">addnode</a> (<a class="local col6 ref" href="#166list" title='list' data-ref="166list" data-ref-filename="166list">list</a>, <a class="local col8 ref" href="#168p" title='p' data-ref="168p" data-ref-filename="168p">p</a>);</td></tr>
<tr><th id="2062">2062</th><td>    }</td></tr>
<tr><th id="2063">2063</th><td>}</td></tr>
<tr><th id="2064">2064</th><td></td></tr>
<tr><th id="2065">2065</th><td></td></tr>
<tr><th id="2066">2066</th><td></td></tr>
<tr><th id="2067">2067</th><td><i  data-doc="do_locks">/*</i></td></tr>
<tr><th id="2068">2068</th><td><i  data-doc="do_locks"> * process the locks list of the rcs file</i></td></tr>
<tr><th id="2069">2069</th><td><i  data-doc="do_locks"> * Like do_symbols, but hash entries are keyed backwards: i.e.</i></td></tr>
<tr><th id="2070">2070</th><td><i  data-doc="do_locks"> * an entry like `user:rev' is keyed on REV rather than on USER.</i></td></tr>
<tr><th id="2071">2071</th><td><i  data-doc="do_locks"> */</i></td></tr>
<tr><th id="2072">2072</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2073">2073</th><td><dfn class="tu decl def fn" id="do_locks" title='do_locks' data-type='void do_locks(List * list, char * val)' data-ref="do_locks" data-ref-filename="do_locks">do_locks</dfn> (<a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> *<dfn class="local col2 decl" id="172list" title='list' data-type='List *' data-ref="172list" data-ref-filename="172list">list</dfn>, <em>char</em> *<dfn class="local col3 decl" id="173val" title='val' data-type='char *' data-ref="173val" data-ref-filename="173val">val</dfn>)</td></tr>
<tr><th id="2074">2074</th><td>{</td></tr>
<tr><th id="2075">2075</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col4 decl" id="174p" title='p' data-type='Node *' data-ref="174p" data-ref-filename="174p">p</dfn>;</td></tr>
<tr><th id="2076">2076</th><td>    <em>char</em> *<dfn class="local col5 decl" id="175cp" title='cp' data-type='char *' data-ref="175cp" data-ref-filename="175cp">cp</dfn> = <a class="local col3 ref" href="#173val" title='val' data-ref="173val" data-ref-filename="173val">val</a>;</td></tr>
<tr><th id="2077">2077</th><td>    <em>char</em> *<dfn class="local col6 decl" id="176user" title='user' data-type='char *' data-ref="176user" data-ref-filename="176user">user</dfn>, *<dfn class="local col7 decl" id="177rev" title='rev' data-type='char *' data-ref="177rev" data-ref-filename="177rev">rev</dfn>;</td></tr>
<tr><th id="2078">2078</th><td></td></tr>
<tr><th id="2079">2079</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((cp) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 2079, __func__, &quot;cp&quot;))" data-ref="_M/assert">assert</a> (<a class="local col5 ref" href="#175cp" title='cp' data-ref="175cp" data-ref-filename="175cp">cp</a>);</td></tr>
<tr><th id="2080">2080</th><td></td></tr>
<tr><th id="2081">2081</th><td>    <b>for</b> (;;)</td></tr>
<tr><th id="2082">2082</th><td>    {</td></tr>
<tr><th id="2083">2083</th><td>	<i>/* skip leading whitespace */</i></td></tr>
<tr><th id="2084">2084</th><td>	<b>while</b> (<a class="macro" href="#169" title="(spacetab[(unsigned char)*cp] != 0)" data-ref="_M/whitespace">whitespace</a> (*<a class="local col5 ref" href="#175cp" title='cp' data-ref="175cp" data-ref-filename="175cp">cp</a>))</td></tr>
<tr><th id="2085">2085</th><td>	    <a class="local col5 ref" href="#175cp" title='cp' data-ref="175cp" data-ref-filename="175cp">cp</a>++;</td></tr>
<tr><th id="2086">2086</th><td></td></tr>
<tr><th id="2087">2087</th><td>	<i>/* if we got to the end, we are done */</i></td></tr>
<tr><th id="2088">2088</th><td>	<b>if</b> (*<a class="local col5 ref" href="#175cp" title='cp' data-ref="175cp" data-ref-filename="175cp">cp</a> == <kbd>'\0'</kbd>)</td></tr>
<tr><th id="2089">2089</th><td>	    <b>break</b>;</td></tr>
<tr><th id="2090">2090</th><td></td></tr>
<tr><th id="2091">2091</th><td>	<i>/* split it up into user and rev */</i></td></tr>
<tr><th id="2092">2092</th><td>	<a class="local col6 ref" href="#176user" title='user' data-ref="176user" data-ref-filename="176user">user</a> = <a class="local col5 ref" href="#175cp" title='cp' data-ref="175cp" data-ref-filename="175cp">cp</a>;</td></tr>
<tr><th id="2093">2093</th><td>	<a class="local col5 ref" href="#175cp" title='cp' data-ref="175cp" data-ref-filename="175cp">cp</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strchr" title='strchr' data-ref="strchr" data-ref-filename="strchr">strchr</a> (<a class="local col5 ref" href="#175cp" title='cp' data-ref="175cp" data-ref-filename="175cp">cp</a>, <kbd>':'</kbd>);</td></tr>
<tr><th id="2094">2094</th><td>	*<a class="local col5 ref" href="#175cp" title='cp' data-ref="175cp" data-ref-filename="175cp">cp</a>++ = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="2095">2095</th><td>	<a class="local col7 ref" href="#177rev" title='rev' data-ref="177rev" data-ref-filename="177rev">rev</a> = <a class="local col5 ref" href="#175cp" title='cp' data-ref="175cp" data-ref-filename="175cp">cp</a>;</td></tr>
<tr><th id="2096">2096</th><td>	<b>while</b> (!<a class="macro" href="#169" title="(spacetab[(unsigned char)*cp] != 0)" data-ref="_M/whitespace">whitespace</a> (*<a class="local col5 ref" href="#175cp" title='cp' data-ref="175cp" data-ref-filename="175cp">cp</a>) &amp;&amp; *<a class="local col5 ref" href="#175cp" title='cp' data-ref="175cp" data-ref-filename="175cp">cp</a> != <kbd>'\0'</kbd>)</td></tr>
<tr><th id="2097">2097</th><td>	    <a class="local col5 ref" href="#175cp" title='cp' data-ref="175cp" data-ref-filename="175cp">cp</a>++;</td></tr>
<tr><th id="2098">2098</th><td>	<b>if</b> (*<a class="local col5 ref" href="#175cp" title='cp' data-ref="175cp" data-ref-filename="175cp">cp</a> != <kbd>'\0'</kbd>)</td></tr>
<tr><th id="2099">2099</th><td>	    *<a class="local col5 ref" href="#175cp" title='cp' data-ref="175cp" data-ref-filename="175cp">cp</a>++ = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="2100">2100</th><td></td></tr>
<tr><th id="2101">2101</th><td>	<i>/* make a new node and add it to the list */</i></td></tr>
<tr><th id="2102">2102</th><td>	<a class="local col4 ref" href="#174p" title='p' data-ref="174p" data-ref-filename="174p">p</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a> ();</td></tr>
<tr><th id="2103">2103</th><td>	<a class="local col4 ref" href="#174p" title='p' data-ref="174p" data-ref-filename="174p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col7 ref" href="#177rev" title='rev' data-ref="177rev" data-ref-filename="177rev">rev</a>);</td></tr>
<tr><th id="2104">2104</th><td>	<a class="local col4 ref" href="#174p" title='p' data-ref="174p" data-ref-filename="174p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col6 ref" href="#176user" title='user' data-ref="176user" data-ref-filename="176user">user</a>);</td></tr>
<tr><th id="2105">2105</th><td>	(<em>void</em>) <a class="ref fn" href="hash.h.html#addnode" title='addnode' data-ref="addnode" data-ref-filename="addnode">addnode</a> (<a class="local col2 ref" href="#172list" title='list' data-ref="172list" data-ref-filename="172list">list</a>, <a class="local col4 ref" href="#174p" title='p' data-ref="174p" data-ref-filename="174p">p</a>);</td></tr>
<tr><th id="2106">2106</th><td>    }</td></tr>
<tr><th id="2107">2107</th><td>}</td></tr>
<tr><th id="2108">2108</th><td></td></tr>
<tr><th id="2109">2109</th><td></td></tr>
<tr><th id="2110">2110</th><td></td></tr>
<tr><th id="2111">2111</th><td><i  data-doc="do_branches">/*</i></td></tr>
<tr><th id="2112">2112</th><td><i  data-doc="do_branches"> * process the branches list of a revision delta</i></td></tr>
<tr><th id="2113">2113</th><td><i  data-doc="do_branches"> */</i></td></tr>
<tr><th id="2114">2114</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2115">2115</th><td><dfn class="tu decl def fn" id="do_branches" title='do_branches' data-type='void do_branches(List * list, char * val)' data-ref="do_branches" data-ref-filename="do_branches">do_branches</dfn> (<a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> *<dfn class="local col8 decl" id="178list" title='list' data-type='List *' data-ref="178list" data-ref-filename="178list">list</dfn>, <em>char</em> *<dfn class="local col9 decl" id="179val" title='val' data-type='char *' data-ref="179val" data-ref-filename="179val">val</dfn>)</td></tr>
<tr><th id="2116">2116</th><td>{</td></tr>
<tr><th id="2117">2117</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col0 decl" id="180p" title='p' data-type='Node *' data-ref="180p" data-ref-filename="180p">p</dfn>;</td></tr>
<tr><th id="2118">2118</th><td>    <em>char</em> *<dfn class="local col1 decl" id="181cp" title='cp' data-type='char *' data-ref="181cp" data-ref-filename="181cp">cp</dfn> = <a class="local col9 ref" href="#179val" title='val' data-ref="179val" data-ref-filename="179val">val</a>;</td></tr>
<tr><th id="2119">2119</th><td>    <em>char</em> *<dfn class="local col2 decl" id="182branch" title='branch' data-type='char *' data-ref="182branch" data-ref-filename="182branch">branch</dfn>;</td></tr>
<tr><th id="2120">2120</th><td></td></tr>
<tr><th id="2121">2121</th><td>    <b>for</b> (;;)</td></tr>
<tr><th id="2122">2122</th><td>    {</td></tr>
<tr><th id="2123">2123</th><td>	<i>/* skip leading whitespace */</i></td></tr>
<tr><th id="2124">2124</th><td>	<b>while</b> (<a class="macro" href="#169" title="(spacetab[(unsigned char)*cp] != 0)" data-ref="_M/whitespace">whitespace</a> (*<a class="local col1 ref" href="#181cp" title='cp' data-ref="181cp" data-ref-filename="181cp">cp</a>))</td></tr>
<tr><th id="2125">2125</th><td>	    <a class="local col1 ref" href="#181cp" title='cp' data-ref="181cp" data-ref-filename="181cp">cp</a>++;</td></tr>
<tr><th id="2126">2126</th><td></td></tr>
<tr><th id="2127">2127</th><td>	<i>/* if we got to the end, we are done */</i></td></tr>
<tr><th id="2128">2128</th><td>	<b>if</b> (*<a class="local col1 ref" href="#181cp" title='cp' data-ref="181cp" data-ref-filename="181cp">cp</a> == <kbd>'\0'</kbd>)</td></tr>
<tr><th id="2129">2129</th><td>	    <b>break</b>;</td></tr>
<tr><th id="2130">2130</th><td></td></tr>
<tr><th id="2131">2131</th><td>	<i>/* find the end of this branch */</i></td></tr>
<tr><th id="2132">2132</th><td>	<a class="local col2 ref" href="#182branch" title='branch' data-ref="182branch" data-ref-filename="182branch">branch</a> = <a class="local col1 ref" href="#181cp" title='cp' data-ref="181cp" data-ref-filename="181cp">cp</a>;</td></tr>
<tr><th id="2133">2133</th><td>	<b>while</b> (!<a class="macro" href="#169" title="(spacetab[(unsigned char)*cp] != 0)" data-ref="_M/whitespace">whitespace</a> (*<a class="local col1 ref" href="#181cp" title='cp' data-ref="181cp" data-ref-filename="181cp">cp</a>) &amp;&amp; *<a class="local col1 ref" href="#181cp" title='cp' data-ref="181cp" data-ref-filename="181cp">cp</a> != <kbd>'\0'</kbd>)</td></tr>
<tr><th id="2134">2134</th><td>	    <a class="local col1 ref" href="#181cp" title='cp' data-ref="181cp" data-ref-filename="181cp">cp</a>++;</td></tr>
<tr><th id="2135">2135</th><td>	<b>if</b> (*<a class="local col1 ref" href="#181cp" title='cp' data-ref="181cp" data-ref-filename="181cp">cp</a> != <kbd>'\0'</kbd>)</td></tr>
<tr><th id="2136">2136</th><td>	    *<a class="local col1 ref" href="#181cp" title='cp' data-ref="181cp" data-ref-filename="181cp">cp</a>++ = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="2137">2137</th><td></td></tr>
<tr><th id="2138">2138</th><td>	<i>/* make a new node and add it to the list */</i></td></tr>
<tr><th id="2139">2139</th><td>	<a class="local col0 ref" href="#180p" title='p' data-ref="180p" data-ref-filename="180p">p</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a> ();</td></tr>
<tr><th id="2140">2140</th><td>	<a class="local col0 ref" href="#180p" title='p' data-ref="180p" data-ref-filename="180p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col2 ref" href="#182branch" title='branch' data-ref="182branch" data-ref-filename="182branch">branch</a>);</td></tr>
<tr><th id="2141">2141</th><td>	(<em>void</em>) <a class="ref fn" href="hash.h.html#addnode" title='addnode' data-ref="addnode" data-ref-filename="addnode">addnode</a> (<a class="local col8 ref" href="#178list" title='list' data-ref="178list" data-ref-filename="178list">list</a>, <a class="local col0 ref" href="#180p" title='p' data-ref="180p" data-ref-filename="180p">p</a>);</td></tr>
<tr><th id="2142">2142</th><td>    }</td></tr>
<tr><th id="2143">2143</th><td>}</td></tr>
<tr><th id="2144">2144</th><td></td></tr>
<tr><th id="2145">2145</th><td></td></tr>
<tr><th id="2146">2146</th><td></td></tr>
<tr><th id="2147">2147</th><td><i>/*</i></td></tr>
<tr><th id="2148">2148</th><td><i> * Version Number</i></td></tr>
<tr><th id="2149">2149</th><td><i> * </i></td></tr>
<tr><th id="2150">2150</th><td><i> * Returns the requested version number of the RCS file, satisfying tags and/or</i></td></tr>
<tr><th id="2151">2151</th><td><i> * dates, and walking branches, if necessary.</i></td></tr>
<tr><th id="2152">2152</th><td><i> * </i></td></tr>
<tr><th id="2153">2153</th><td><i> * The result is returned; null-string if error.</i></td></tr>
<tr><th id="2154">2154</th><td><i> */</i></td></tr>
<tr><th id="2155">2155</th><td><em>char</em> *</td></tr>
<tr><th id="2156">2156</th><td><dfn class="decl def fn" id="RCS_getversion" title='RCS_getversion' data-ref="RCS_getversion" data-ref-filename="RCS_getversion">RCS_getversion</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col3 decl" id="183rcs" title='rcs' data-type='RCSNode *' data-ref="183rcs" data-ref-filename="183rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col4 decl" id="184tag" title='tag' data-type='const char *' data-ref="184tag" data-ref-filename="184tag">tag</dfn>, <em>const</em> <em>char</em> *<dfn class="local col5 decl" id="185date" title='date' data-type='const char *' data-ref="185date" data-ref-filename="185date">date</dfn>,</td></tr>
<tr><th id="2157">2157</th><td>                <em>int</em> <dfn class="local col6 decl" id="186force_tag_match" title='force_tag_match' data-type='int' data-ref="186force_tag_match" data-ref-filename="186force_tag_match">force_tag_match</dfn>, <em>int</em> *<dfn class="local col7 decl" id="187simple_tag" title='simple_tag' data-type='int *' data-ref="187simple_tag" data-ref-filename="187simple_tag">simple_tag</dfn>)</td></tr>
<tr><th id="2158">2158</th><td>{</td></tr>
<tr><th id="2159">2159</th><td>    <b>if</b> (<a class="local col7 ref" href="#187simple_tag" title='simple_tag' data-ref="187simple_tag" data-ref-filename="187simple_tag">simple_tag</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2160">2160</th><td>	*<a class="local col7 ref" href="#187simple_tag" title='simple_tag' data-ref="187simple_tag" data-ref-filename="187simple_tag">simple_tag</a> = <var>0</var>;</td></tr>
<tr><th id="2161">2161</th><td></td></tr>
<tr><th id="2162">2162</th><td>    <i>/* make sure we have something to look at... */</i></td></tr>
<tr><th id="2163">2163</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 2163, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col3 ref" href="#183rcs" title='rcs' data-ref="183rcs" data-ref-filename="183rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="2164">2164</th><td></td></tr>
<tr><th id="2165">2165</th><td>    <b>if</b> (<a class="local col4 ref" href="#184tag" title='tag' data-ref="184tag" data-ref-filename="184tag">tag</a> &amp;&amp; <a class="local col5 ref" href="#185date" title='date' data-ref="185date" data-ref-filename="185date">date</a>)</td></tr>
<tr><th id="2166">2166</th><td>    {</td></tr>
<tr><th id="2167">2167</th><td>	<em>char</em> *<dfn class="local col8 decl" id="188branch" title='branch' data-type='char *' data-ref="188branch" data-ref-filename="188branch">branch</dfn>, *<dfn class="local col9 decl" id="189rev" title='rev' data-type='char *' data-ref="189rev" data-ref-filename="189rev">rev</dfn>;</td></tr>
<tr><th id="2168">2168</th><td></td></tr>
<tr><th id="2169">2169</th><td>	<b>if</b> (! <a class="ref fn" href="#RCS_nodeisbranch" title='RCS_nodeisbranch' data-ref="RCS_nodeisbranch" data-ref-filename="RCS_nodeisbranch">RCS_nodeisbranch</a> (<a class="local col3 ref" href="#183rcs" title='rcs' data-ref="183rcs" data-ref-filename="183rcs">rcs</a>, <a class="local col4 ref" href="#184tag" title='tag' data-ref="184tag" data-ref-filename="184tag">tag</a>))</td></tr>
<tr><th id="2170">2170</th><td>	{</td></tr>
<tr><th id="2171">2171</th><td>	    <i>/* We can't get a particular date if the tag is not a</i></td></tr>
<tr><th id="2172">2172</th><td><i>               branch.  */</i></td></tr>
<tr><th id="2173">2173</th><td>	    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2174">2174</th><td>	}</td></tr>
<tr><th id="2175">2175</th><td></td></tr>
<tr><th id="2176">2176</th><td>	<i>/* Work out the branch.  */</i></td></tr>
<tr><th id="2177">2177</th><td>	<b>if</b> (! <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) tag[0])] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) <a class="local col4 ref" href="#184tag" title='tag' data-ref="184tag" data-ref-filename="184tag">tag</a>[<var>0</var>]))</td></tr>
<tr><th id="2178">2178</th><td>	    <a class="local col8 ref" href="#188branch" title='branch' data-ref="188branch" data-ref-filename="188branch">branch</a> = <a class="ref fn" href="#RCS_whatbranch" title='RCS_whatbranch' data-ref="RCS_whatbranch" data-ref-filename="RCS_whatbranch">RCS_whatbranch</a> (<a class="local col3 ref" href="#183rcs" title='rcs' data-ref="183rcs" data-ref-filename="183rcs">rcs</a>, <a class="local col4 ref" href="#184tag" title='tag' data-ref="184tag" data-ref-filename="184tag">tag</a>);</td></tr>
<tr><th id="2179">2179</th><td>	<b>else</b></td></tr>
<tr><th id="2180">2180</th><td>	    <a class="local col8 ref" href="#188branch" title='branch' data-ref="188branch" data-ref-filename="188branch">branch</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col4 ref" href="#184tag" title='tag' data-ref="184tag" data-ref-filename="184tag">tag</a>);</td></tr>
<tr><th id="2181">2181</th><td></td></tr>
<tr><th id="2182">2182</th><td>	<i>/* Fetch the revision of branch as of date.  */</i></td></tr>
<tr><th id="2183">2183</th><td>	<a class="local col9 ref" href="#189rev" title='rev' data-ref="189rev" data-ref-filename="189rev">rev</a> = <a class="tu ref fn" href="#RCS_getdatebranch" title='RCS_getdatebranch' data-use='c' data-ref="RCS_getdatebranch" data-ref-filename="RCS_getdatebranch">RCS_getdatebranch</a> (<a class="local col3 ref" href="#183rcs" title='rcs' data-ref="183rcs" data-ref-filename="183rcs">rcs</a>, <a class="local col5 ref" href="#185date" title='date' data-ref="185date" data-ref-filename="185date">date</a>, <a class="local col8 ref" href="#188branch" title='branch' data-ref="188branch" data-ref-filename="188branch">branch</a>);</td></tr>
<tr><th id="2184">2184</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#188branch" title='branch' data-ref="188branch" data-ref-filename="188branch">branch</a>);</td></tr>
<tr><th id="2185">2185</th><td>	<b>return</b> <a class="local col9 ref" href="#189rev" title='rev' data-ref="189rev" data-ref-filename="189rev">rev</a>;</td></tr>
<tr><th id="2186">2186</th><td>    }</td></tr>
<tr><th id="2187">2187</th><td>    <b>else</b> <b>if</b> (<a class="local col4 ref" href="#184tag" title='tag' data-ref="184tag" data-ref-filename="184tag">tag</a>)</td></tr>
<tr><th id="2188">2188</th><td>	<b>return</b> <a class="ref fn" href="#RCS_gettag" title='RCS_gettag' data-ref="RCS_gettag" data-ref-filename="RCS_gettag">RCS_gettag</a> (<a class="local col3 ref" href="#183rcs" title='rcs' data-ref="183rcs" data-ref-filename="183rcs">rcs</a>, <a class="local col4 ref" href="#184tag" title='tag' data-ref="184tag" data-ref-filename="184tag">tag</a>, <a class="local col6 ref" href="#186force_tag_match" title='force_tag_match' data-ref="186force_tag_match" data-ref-filename="186force_tag_match">force_tag_match</a>, <a class="local col7 ref" href="#187simple_tag" title='simple_tag' data-ref="187simple_tag" data-ref-filename="187simple_tag">simple_tag</a>);</td></tr>
<tr><th id="2189">2189</th><td>    <b>else</b> <b>if</b> (<a class="local col5 ref" href="#185date" title='date' data-ref="185date" data-ref-filename="185date">date</a>)</td></tr>
<tr><th id="2190">2190</th><td>	<b>return</b> <a class="ref fn" href="#RCS_getdate" title='RCS_getdate' data-ref="RCS_getdate" data-ref-filename="RCS_getdate">RCS_getdate</a> (<a class="local col3 ref" href="#183rcs" title='rcs' data-ref="183rcs" data-ref-filename="183rcs">rcs</a>, <a class="local col5 ref" href="#185date" title='date' data-ref="185date" data-ref-filename="185date">date</a>, <a class="local col6 ref" href="#186force_tag_match" title='force_tag_match' data-ref="186force_tag_match" data-ref-filename="186force_tag_match">force_tag_match</a>);</td></tr>
<tr><th id="2191">2191</th><td>    <b>else</b></td></tr>
<tr><th id="2192">2192</th><td>	<b>return</b> <a class="ref fn" href="#RCS_head" title='RCS_head' data-ref="RCS_head" data-ref-filename="RCS_head">RCS_head</a> (<a class="local col3 ref" href="#183rcs" title='rcs' data-ref="183rcs" data-ref-filename="183rcs">rcs</a>);</td></tr>
<tr><th id="2193">2193</th><td></td></tr>
<tr><th id="2194">2194</th><td>}</td></tr>
<tr><th id="2195">2195</th><td></td></tr>
<tr><th id="2196">2196</th><td></td></tr>
<tr><th id="2197">2197</th><td></td></tr>
<tr><th id="2198">2198</th><td><i>/*</i></td></tr>
<tr><th id="2199">2199</th><td><i> * Get existing revision number corresponding to tag or revision.</i></td></tr>
<tr><th id="2200">2200</th><td><i> * Similar to RCS_gettag but less interpretation imposed.</i></td></tr>
<tr><th id="2201">2201</th><td><i> * For example:</i></td></tr>
<tr><th id="2202">2202</th><td><i> * -- If tag designates a magic branch, RCS_tag2rev</i></td></tr>
<tr><th id="2203">2203</th><td><i> *    returns the magic branch number.</i></td></tr>
<tr><th id="2204">2204</th><td><i> * -- If tag is a branch tag, returns the branch number, not</i></td></tr>
<tr><th id="2205">2205</th><td><i> *    the revision of the head of the branch.</i></td></tr>
<tr><th id="2206">2206</th><td><i> * If tag or revision is not valid or does not exist in file,</i></td></tr>
<tr><th id="2207">2207</th><td><i> * return NULL.</i></td></tr>
<tr><th id="2208">2208</th><td><i> */</i></td></tr>
<tr><th id="2209">2209</th><td><em>char</em> *</td></tr>
<tr><th id="2210">2210</th><td><dfn class="decl def fn" id="RCS_tag2rev" title='RCS_tag2rev' data-ref="RCS_tag2rev" data-ref-filename="RCS_tag2rev">RCS_tag2rev</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col0 decl" id="190rcs" title='rcs' data-type='RCSNode *' data-ref="190rcs" data-ref-filename="190rcs">rcs</dfn>, <em>char</em> *<dfn class="local col1 decl" id="191tag" title='tag' data-type='char *' data-ref="191tag" data-ref-filename="191tag">tag</dfn>)</td></tr>
<tr><th id="2211">2211</th><td>{</td></tr>
<tr><th id="2212">2212</th><td>    <em>char</em> *<dfn class="local col2 decl" id="192rev" title='rev' data-type='char *' data-ref="192rev" data-ref-filename="192rev">rev</dfn>, *<dfn class="local col3 decl" id="193pa" title='pa' data-type='char *' data-ref="193pa" data-ref-filename="193pa">pa</dfn>, *<dfn class="local col4 decl" id="194pb" title='pb' data-type='char *' data-ref="194pb" data-ref-filename="194pb">pb</dfn>;</td></tr>
<tr><th id="2213">2213</th><td>    <em>int</em> <dfn class="local col5 decl" id="195i" title='i' data-type='int' data-ref="195i" data-ref-filename="195i">i</dfn>;</td></tr>
<tr><th id="2214">2214</th><td></td></tr>
<tr><th id="2215">2215</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 2215, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col0 ref" href="#190rcs" title='rcs' data-ref="190rcs" data-ref-filename="190rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="2216">2216</th><td></td></tr>
<tr><th id="2217">2217</th><td>    <b>if</b> (<a class="local col0 ref" href="#190rcs" title='rcs' data-ref="190rcs" data-ref-filename="190rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="2218">2218</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col0 ref" href="#190rcs" title='rcs' data-ref="190rcs" data-ref-filename="190rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="2219">2219</th><td></td></tr>
<tr><th id="2220">2220</th><td>    <i>/* If a valid revision, try to look it up */</i></td></tr>
<tr><th id="2221">2221</th><td>    <b>if</b> ( <a class="ref fn" href="#RCS_valid_rev" title='RCS_valid_rev' data-ref="RCS_valid_rev" data-ref-filename="RCS_valid_rev">RCS_valid_rev</a> (<a class="local col1 ref" href="#191tag" title='tag' data-ref="191tag" data-ref-filename="191tag">tag</a>) )</td></tr>
<tr><th id="2222">2222</th><td>    {</td></tr>
<tr><th id="2223">2223</th><td>	<i>/* Make a copy so we can scribble on it */</i></td></tr>
<tr><th id="2224">2224</th><td>	<a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a> =  <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col1 ref" href="#191tag" title='tag' data-ref="191tag" data-ref-filename="191tag">tag</a>);</td></tr>
<tr><th id="2225">2225</th><td></td></tr>
<tr><th id="2226">2226</th><td>	<i>/* If revision exists, return the copy */</i></td></tr>
<tr><th id="2227">2227</th><td>	<b>if</b> (<a class="ref fn" href="#RCS_exist_rev" title='RCS_exist_rev' data-ref="RCS_exist_rev" data-ref-filename="RCS_exist_rev">RCS_exist_rev</a> (<a class="local col0 ref" href="#190rcs" title='rcs' data-ref="190rcs" data-ref-filename="190rcs">rcs</a>, <a class="local col1 ref" href="#191tag" title='tag' data-ref="191tag" data-ref-filename="191tag">tag</a>))</td></tr>
<tr><th id="2228">2228</th><td>	    <b>return</b> <a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a>;</td></tr>
<tr><th id="2229">2229</th><td></td></tr>
<tr><th id="2230">2230</th><td>	<i>/* Nope, none such. If tag is not a branch we're done. */</i> </td></tr>
<tr><th id="2231">2231</th><td>	<a class="local col5 ref" href="#195i" title='i' data-ref="195i" data-ref-filename="195i">i</a> = <a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a>);</td></tr>
<tr><th id="2232">2232</th><td>	<b>if</b> ((<a class="local col5 ref" href="#195i" title='i' data-ref="195i" data-ref-filename="195i">i</a> &amp; <var>1</var>) == <var>1</var> )</td></tr>
<tr><th id="2233">2233</th><td>	{</td></tr>
<tr><th id="2234">2234</th><td>	    <a class="local col3 ref" href="#193pa" title='pa' data-ref="193pa" data-ref-filename="193pa">pa</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="2235">2235</th><td>	    <b>if</b> (<a class="local col5 ref" href="#195i" title='i' data-ref="195i" data-ref-filename="195i">i</a> == <var>1</var> || *(<a class="local col3 ref" href="#193pa" title='pa' data-ref="193pa" data-ref-filename="193pa">pa</a>-<var>1</var>) != <a class="macro" href="rcs.h.html#184" title="0" data-ref="_M/RCS_MAGIC_BRANCH">RCS_MAGIC_BRANCH</a> || *(<a class="local col3 ref" href="#193pa" title='pa' data-ref="193pa" data-ref-filename="193pa">pa</a>-<var>2</var>) != <kbd>'.'</kbd>)</td></tr>
<tr><th id="2236">2236</th><td>	    {</td></tr>
<tr><th id="2237">2237</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a>);</td></tr>
<tr><th id="2238">2238</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"revision `%s' does not exist"</q>, <a class="local col1 ref" href="#191tag" title='tag' data-ref="191tag" data-ref-filename="191tag">tag</a>);</td></tr>
<tr><th id="2239">2239</th><td>	    }</td></tr>
<tr><th id="2240">2240</th><td>	}</td></tr>
<tr><th id="2241">2241</th><td></td></tr>
<tr><th id="2242">2242</th><td>	<i>/* Try for a real (that is, exists in the RCS deltas) branch</i></td></tr>
<tr><th id="2243">2243</th><td><i>	   (RCS_exist_rev just checks for real revisions and revisions</i></td></tr>
<tr><th id="2244">2244</th><td><i>	   which have tags pointing to them).  */</i></td></tr>
<tr><th id="2245">2245</th><td>	<a class="local col3 ref" href="#193pa" title='pa' data-ref="193pa" data-ref-filename="193pa">pa</a> = <a class="ref fn" href="#RCS_getbranch" title='RCS_getbranch' data-ref="RCS_getbranch" data-ref-filename="RCS_getbranch">RCS_getbranch</a> (<a class="local col0 ref" href="#190rcs" title='rcs' data-ref="190rcs" data-ref-filename="190rcs">rcs</a>, <a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a>, <var>1</var>);</td></tr>
<tr><th id="2246">2246</th><td>	<b>if</b> (<a class="local col3 ref" href="#193pa" title='pa' data-ref="193pa" data-ref-filename="193pa">pa</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2247">2247</th><td>	{</td></tr>
<tr><th id="2248">2248</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#193pa" title='pa' data-ref="193pa" data-ref-filename="193pa">pa</a>);</td></tr>
<tr><th id="2249">2249</th><td>	    <b>return</b> <a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a>;</td></tr>
<tr><th id="2250">2250</th><td>	}</td></tr>
<tr><th id="2251">2251</th><td></td></tr>
<tr><th id="2252">2252</th><td>       <i>/* Tag is branch, but does not exist, try corresponding </i></td></tr>
<tr><th id="2253">2253</th><td><i>	* magic branch tag.</i></td></tr>
<tr><th id="2254">2254</th><td><i>	*</i></td></tr>
<tr><th id="2255">2255</th><td><i>	* FIXME: assumes all magic branches are of       </i></td></tr>
<tr><th id="2256">2256</th><td><i>	* form "n.n.n ... .0.n".  I'll fix if somebody can</i></td></tr>
<tr><th id="2257">2257</th><td><i>	* send me a method to get a magic branch tag with</i></td></tr>
<tr><th id="2258">2258</th><td><i>	* the 0 in some other position -- &lt;dan@gasboy.com&gt;</i></td></tr>
<tr><th id="2259">2259</th><td><i>	*/</i> </td></tr>
<tr><th id="2260">2260</th><td>	<a class="local col3 ref" href="#193pa" title='pa' data-ref="193pa" data-ref-filename="193pa">pa</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="2261">2261</th><td>	<b>if</b> (!<a class="local col3 ref" href="#193pa" title='pa' data-ref="193pa" data-ref-filename="193pa">pa</a>)</td></tr>
<tr><th id="2262">2262</th><td>	    <i>/* This might happen, for instance, if an RCS file only contained</i></td></tr>
<tr><th id="2263">2263</th><td><i>	     * revisions 2.x and higher, and REV == "1".</i></td></tr>
<tr><th id="2264">2264</th><td><i>	     */</i></td></tr>
<tr><th id="2265">2265</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"revision `%s' does not exist"</q>, <a class="local col1 ref" href="#191tag" title='tag' data-ref="191tag" data-ref-filename="191tag">tag</a>);</td></tr>
<tr><th id="2266">2266</th><td></td></tr>
<tr><th id="2267">2267</th><td>	*<a class="local col3 ref" href="#193pa" title='pa' data-ref="193pa" data-ref-filename="193pa">pa</a>++ = <var>0</var>;</td></tr>
<tr><th id="2268">2268</th><td>	<a class="local col4 ref" href="#194pb" title='pb' data-ref="194pb" data-ref-filename="194pb">pb</a> = <a class="ref fn" href="subr.h.html#Xasprintf" title='Xasprintf' data-ref="Xasprintf" data-ref-filename="Xasprintf">Xasprintf</a> (<q>"%s.%d.%s"</q>, <a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a>, <a class="macro" href="rcs.h.html#184" title="0" data-ref="_M/RCS_MAGIC_BRANCH">RCS_MAGIC_BRANCH</a>, <a class="local col3 ref" href="#193pa" title='pa' data-ref="193pa" data-ref-filename="193pa">pa</a>);</td></tr>
<tr><th id="2269">2269</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a>);</td></tr>
<tr><th id="2270">2270</th><td>	<a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a> = <a class="local col4 ref" href="#194pb" title='pb' data-ref="194pb" data-ref-filename="194pb">pb</a>;</td></tr>
<tr><th id="2271">2271</th><td>	<b>if</b> (<a class="ref fn" href="#RCS_exist_rev" title='RCS_exist_rev' data-ref="RCS_exist_rev" data-ref-filename="RCS_exist_rev">RCS_exist_rev</a> (<a class="local col0 ref" href="#190rcs" title='rcs' data-ref="190rcs" data-ref-filename="190rcs">rcs</a>, <a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a>))</td></tr>
<tr><th id="2272">2272</th><td>	    <b>return</b> <a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a>;</td></tr>
<tr><th id="2273">2273</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"revision `%s' does not exist"</q>, <a class="local col1 ref" href="#191tag" title='tag' data-ref="191tag" data-ref-filename="191tag">tag</a>);</td></tr>
<tr><th id="2274">2274</th><td>    }</td></tr>
<tr><th id="2275">2275</th><td></td></tr>
<tr><th id="2276">2276</th><td></td></tr>
<tr><th id="2277">2277</th><td>    <a class="ref fn" href="#RCS_check_tag" title='RCS_check_tag' data-ref="RCS_check_tag" data-ref-filename="RCS_check_tag">RCS_check_tag</a> (<a class="local col1 ref" href="#191tag" title='tag' data-ref="191tag" data-ref-filename="191tag">tag</a>); <i>/* exit if not a valid tag */</i></td></tr>
<tr><th id="2278">2278</th><td></td></tr>
<tr><th id="2279">2279</th><td>    <i>/* If tag is "HEAD", special case to get head RCS revision */</i></td></tr>
<tr><th id="2280">2280</th><td>    <b>if</b> (<a class="local col1 ref" href="#191tag" title='tag' data-ref="191tag" data-ref-filename="191tag">tag</a> &amp;&amp; <a class="macro" href="#138" title="(*(char *)(tag) == *(char *)(&quot;HEAD&quot;) &amp;&amp; strcmp ((tag), (&quot;HEAD&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col1 ref" href="#191tag" title='tag' data-ref="191tag" data-ref-filename="191tag">tag</a>, <a class="macro" href="cvs.h.html#258" title="&quot;HEAD&quot;" data-ref="_M/TAG_HEAD">TAG_HEAD</a>))</td></tr>
<tr><th id="2281">2281</th><td>        <b>return</b> <a class="ref fn" href="#RCS_head" title='RCS_head' data-ref="RCS_head" data-ref-filename="RCS_head">RCS_head</a> (<a class="local col0 ref" href="#190rcs" title='rcs' data-ref="190rcs" data-ref-filename="190rcs">rcs</a>);</td></tr>
<tr><th id="2282">2282</th><td></td></tr>
<tr><th id="2283">2283</th><td>    <i>/* If valid tag let translate_symtag say yea or nay. */</i></td></tr>
<tr><th id="2284">2284</th><td>    <a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a> = <a class="tu ref fn" href="#translate_symtag" title='translate_symtag' data-use='c' data-ref="translate_symtag" data-ref-filename="translate_symtag">translate_symtag</a> (<a class="local col0 ref" href="#190rcs" title='rcs' data-ref="190rcs" data-ref-filename="190rcs">rcs</a>, <a class="local col1 ref" href="#191tag" title='tag' data-ref="191tag" data-ref-filename="191tag">tag</a>);</td></tr>
<tr><th id="2285">2285</th><td></td></tr>
<tr><th id="2286">2286</th><td>    <b>if</b> (<a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a>)</td></tr>
<tr><th id="2287">2287</th><td>        <b>return</b> <a class="local col2 ref" href="#192rev" title='rev' data-ref="192rev" data-ref-filename="192rev">rev</a>;</td></tr>
<tr><th id="2288">2288</th><td></td></tr>
<tr><th id="2289">2289</th><td>    <i>/* Trust the caller to print warnings. */</i></td></tr>
<tr><th id="2290">2290</th><td>    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2291">2291</th><td>}</td></tr>
<tr><th id="2292">2292</th><td></td></tr>
<tr><th id="2293">2293</th><td></td></tr>
<tr><th id="2294">2294</th><td></td></tr>
<tr><th id="2295">2295</th><td><i>/*</i></td></tr>
<tr><th id="2296">2296</th><td><i> * Find the revision for a specific tag.</i></td></tr>
<tr><th id="2297">2297</th><td><i> * If force_tag_match is set, return NULL if an exact match is not</i></td></tr>
<tr><th id="2298">2298</th><td><i> * possible otherwise return RCS_head ().  We are careful to look for</i></td></tr>
<tr><th id="2299">2299</th><td><i> * and handle "magic" revisions specially.</i></td></tr>
<tr><th id="2300">2300</th><td><i> * </i></td></tr>
<tr><th id="2301">2301</th><td><i> * If the matched tag is a branch tag, find the head of the branch.</i></td></tr>
<tr><th id="2302">2302</th><td><i> * </i></td></tr>
<tr><th id="2303">2303</th><td><i> * Returns pointer to newly malloc'd string, or NULL.</i></td></tr>
<tr><th id="2304">2304</th><td><i> */</i></td></tr>
<tr><th id="2305">2305</th><td><em>char</em> *</td></tr>
<tr><th id="2306">2306</th><td><dfn class="decl def fn" id="RCS_gettag" title='RCS_gettag' data-ref="RCS_gettag" data-ref-filename="RCS_gettag">RCS_gettag</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col6 decl" id="196rcs" title='rcs' data-type='RCSNode *' data-ref="196rcs" data-ref-filename="196rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col7 decl" id="197symtag" title='symtag' data-type='const char *' data-ref="197symtag" data-ref-filename="197symtag">symtag</dfn>, <em>int</em> <dfn class="local col8 decl" id="198force_tag_match" title='force_tag_match' data-type='int' data-ref="198force_tag_match" data-ref-filename="198force_tag_match">force_tag_match</dfn>,</td></tr>
<tr><th id="2307">2307</th><td>            <em>int</em> *<dfn class="local col9 decl" id="199simple_tag" title='simple_tag' data-type='int *' data-ref="199simple_tag" data-ref-filename="199simple_tag">simple_tag</dfn>)</td></tr>
<tr><th id="2308">2308</th><td>{</td></tr>
<tr><th id="2309">2309</th><td>    <em>char</em> *<dfn class="local col0 decl" id="200tag" title='tag' data-type='char *' data-ref="200tag" data-ref-filename="200tag">tag</dfn>;</td></tr>
<tr><th id="2310">2310</th><td></td></tr>
<tr><th id="2311">2311</th><td>    <b>if</b> (<a class="local col9 ref" href="#199simple_tag" title='simple_tag' data-ref="199simple_tag" data-ref-filename="199simple_tag">simple_tag</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2312">2312</th><td>	*<a class="local col9 ref" href="#199simple_tag" title='simple_tag' data-ref="199simple_tag" data-ref-filename="199simple_tag">simple_tag</a> = <var>0</var>;</td></tr>
<tr><th id="2313">2313</th><td></td></tr>
<tr><th id="2314">2314</th><td>    <i>/* make sure we have something to look at... */</i></td></tr>
<tr><th id="2315">2315</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 2315, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col6 ref" href="#196rcs" title='rcs' data-ref="196rcs" data-ref-filename="196rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="2316">2316</th><td></td></tr>
<tr><th id="2317">2317</th><td>    <i>/* XXX this is probably not necessary, --jtc */</i></td></tr>
<tr><th id="2318">2318</th><td>    <b>if</b> (<a class="local col6 ref" href="#196rcs" title='rcs' data-ref="196rcs" data-ref-filename="196rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>) </td></tr>
<tr><th id="2319">2319</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col6 ref" href="#196rcs" title='rcs' data-ref="196rcs" data-ref-filename="196rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="2320">2320</th><td></td></tr>
<tr><th id="2321">2321</th><td>    <i>/* If symtag is "HEAD", special case to get head RCS revision */</i></td></tr>
<tr><th id="2322">2322</th><td>    <b>if</b> (<a class="local col7 ref" href="#197symtag" title='symtag' data-ref="197symtag" data-ref-filename="197symtag">symtag</a> &amp;&amp; <a class="macro" href="#138" title="(*(char *)(symtag) == *(char *)(&quot;HEAD&quot;) &amp;&amp; strcmp ((symtag), (&quot;HEAD&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col7 ref" href="#197symtag" title='symtag' data-ref="197symtag" data-ref-filename="197symtag">symtag</a>, <a class="macro" href="cvs.h.html#258" title="&quot;HEAD&quot;" data-ref="_M/TAG_HEAD">TAG_HEAD</a>))</td></tr>
<tr><th id="2323">2323</th><td><u>#<span data-ppcond="2323">if</span> 0 /* This #if 0 is only in the Cygnus code.  Why?  Death support?  */</u></td></tr>
<tr><th id="2324">2324</th><td>	<b>if</b> (force_tag_match &amp;&amp; (rcs-&gt;flags &amp; VALID) &amp;&amp; (rcs-&gt;flags &amp; INATTIC))</td></tr>
<tr><th id="2325">2325</th><td>	    <b>return</b> NULL;	<i>/* head request for removed file */</i></td></tr>
<tr><th id="2326">2326</th><td>	<b>else</b></td></tr>
<tr><th id="2327">2327</th><td><u>#<span data-ppcond="2323">endif</span></u></td></tr>
<tr><th id="2328">2328</th><td>	    <b>return</b> <a class="ref fn" href="#RCS_head" title='RCS_head' data-ref="RCS_head" data-ref-filename="RCS_head">RCS_head</a> (<a class="local col6 ref" href="#196rcs" title='rcs' data-ref="196rcs" data-ref-filename="196rcs">rcs</a>);</td></tr>
<tr><th id="2329">2329</th><td></td></tr>
<tr><th id="2330">2330</th><td>    <b>if</b> (!<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) symtag[0])] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) <a class="local col7 ref" href="#197symtag" title='symtag' data-ref="197symtag" data-ref-filename="197symtag">symtag</a>[<var>0</var>]))</td></tr>
<tr><th id="2331">2331</th><td>    {</td></tr>
<tr><th id="2332">2332</th><td>	<em>char</em> *<dfn class="local col1 decl" id="201version" title='version' data-type='char *' data-ref="201version" data-ref-filename="201version">version</dfn>;</td></tr>
<tr><th id="2333">2333</th><td></td></tr>
<tr><th id="2334">2334</th><td>	<i>/* If we got a symbolic tag, resolve it to a numeric */</i></td></tr>
<tr><th id="2335">2335</th><td>	<a class="local col1 ref" href="#201version" title='version' data-ref="201version" data-ref-filename="201version">version</a> = <a class="tu ref fn" href="#translate_symtag" title='translate_symtag' data-use='c' data-ref="translate_symtag" data-ref-filename="translate_symtag">translate_symtag</a> (<a class="local col6 ref" href="#196rcs" title='rcs' data-ref="196rcs" data-ref-filename="196rcs">rcs</a>, <a class="local col7 ref" href="#197symtag" title='symtag' data-ref="197symtag" data-ref-filename="197symtag">symtag</a>);</td></tr>
<tr><th id="2336">2336</th><td>	<b>if</b> (<a class="local col1 ref" href="#201version" title='version' data-ref="201version" data-ref-filename="201version">version</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2337">2337</th><td>	{</td></tr>
<tr><th id="2338">2338</th><td>	    <em>int</em> <dfn class="local col2 decl" id="202dots" title='dots' data-type='int' data-ref="202dots" data-ref-filename="202dots">dots</dfn>;</td></tr>
<tr><th id="2339">2339</th><td>	    <em>char</em> *<dfn class="local col3 decl" id="203magic" title='magic' data-type='char *' data-ref="203magic" data-ref-filename="203magic">magic</dfn>, *<dfn class="local col4 decl" id="204branch" title='branch' data-type='char *' data-ref="204branch" data-ref-filename="204branch">branch</dfn>, *<dfn class="local col5 decl" id="205cp" title='cp' data-type='char *' data-ref="205cp" data-ref-filename="205cp">cp</dfn>;</td></tr>
<tr><th id="2340">2340</th><td></td></tr>
<tr><th id="2341">2341</th><td>	    <a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a> = <a class="local col1 ref" href="#201version" title='version' data-ref="201version" data-ref-filename="201version">version</a>;</td></tr>
<tr><th id="2342">2342</th><td></td></tr>
<tr><th id="2343">2343</th><td>	    <i>/*</i></td></tr>
<tr><th id="2344">2344</th><td><i>	     * If this is a magic revision, we turn it into either its</i></td></tr>
<tr><th id="2345">2345</th><td><i>	     * physical branch equivalent (if one exists) or into</i></td></tr>
<tr><th id="2346">2346</th><td><i>	     * its base revision, which we assume exists.</i></td></tr>
<tr><th id="2347">2347</th><td><i>	     */</i></td></tr>
<tr><th id="2348">2348</th><td>	    <a class="local col2 ref" href="#202dots" title='dots' data-ref="202dots" data-ref-filename="202dots">dots</a> = <a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>);</td></tr>
<tr><th id="2349">2349</th><td>	    <b>if</b> (<a class="local col2 ref" href="#202dots" title='dots' data-ref="202dots" data-ref-filename="202dots">dots</a> &gt; <var>2</var> &amp;&amp; (<a class="local col2 ref" href="#202dots" title='dots' data-ref="202dots" data-ref-filename="202dots">dots</a> &amp; <var>1</var>) != <var>0</var>)</td></tr>
<tr><th id="2350">2350</th><td>	    {</td></tr>
<tr><th id="2351">2351</th><td>		<a class="local col4 ref" href="#204branch" title='branch' data-ref="204branch" data-ref-filename="204branch">branch</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="2352">2352</th><td>		<a class="local col5 ref" href="#205cp" title='cp' data-ref="205cp" data-ref-filename="205cp">cp</a> = <a class="local col4 ref" href="#204branch" title='branch' data-ref="204branch" data-ref-filename="204branch">branch</a>++ - <var>1</var>;</td></tr>
<tr><th id="2353">2353</th><td>		<b>while</b> (*<a class="local col5 ref" href="#205cp" title='cp' data-ref="205cp" data-ref-filename="205cp">cp</a> != <kbd>'.'</kbd>)</td></tr>
<tr><th id="2354">2354</th><td>		    <a class="local col5 ref" href="#205cp" title='cp' data-ref="205cp" data-ref-filename="205cp">cp</a>--;</td></tr>
<tr><th id="2355">2355</th><td></td></tr>
<tr><th id="2356">2356</th><td>		<i>/* see if we have .magic-branch. (".0.") */</i></td></tr>
<tr><th id="2357">2357</th><td>		<a class="local col3 ref" href="#203magic" title='magic' data-ref="203magic" data-ref-filename="203magic">magic</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>) + <var>1</var>);</td></tr>
<tr><th id="2358">2358</th><td>		(<em>void</em>) <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sprintf" title='sprintf' data-ref="sprintf" data-ref-filename="sprintf">sprintf</a> (<a class="local col3 ref" href="#203magic" title='magic' data-ref="203magic" data-ref-filename="203magic">magic</a>, <q>".%d."</q>, <a class="macro" href="rcs.h.html#184" title="0" data-ref="_M/RCS_MAGIC_BRANCH">RCS_MAGIC_BRANCH</a>);</td></tr>
<tr><th id="2359">2359</th><td>		<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col3 ref" href="#203magic" title='magic' data-ref="203magic" data-ref-filename="203magic">magic</a>, <a class="local col5 ref" href="#205cp" title='cp' data-ref="205cp" data-ref-filename="205cp">cp</a>, <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col3 ref" href="#203magic" title='magic' data-ref="203magic" data-ref-filename="203magic">magic</a>)) == <var>0</var>)</td></tr>
<tr><th id="2360">2360</th><td>		{</td></tr>
<tr><th id="2361">2361</th><td>		    <i>/* it's magic.  See if the branch exists */</i></td></tr>
<tr><th id="2362">2362</th><td>		    *<a class="local col5 ref" href="#205cp" title='cp' data-ref="205cp" data-ref-filename="205cp">cp</a> = <kbd>'\0'</kbd>;		<i>/* turn it into a revision */</i></td></tr>
<tr><th id="2363">2363</th><td>		    (<em>void</em>) <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sprintf" title='sprintf' data-ref="sprintf" data-ref-filename="sprintf">sprintf</a> (<a class="local col3 ref" href="#203magic" title='magic' data-ref="203magic" data-ref-filename="203magic">magic</a>, <q>"%s.%s"</q>, <a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>, <a class="local col4 ref" href="#204branch" title='branch' data-ref="204branch" data-ref-filename="204branch">branch</a>);</td></tr>
<tr><th id="2364">2364</th><td>		    <a class="local col4 ref" href="#204branch" title='branch' data-ref="204branch" data-ref-filename="204branch">branch</a> = <a class="ref fn" href="#RCS_getbranch" title='RCS_getbranch' data-ref="RCS_getbranch" data-ref-filename="RCS_getbranch">RCS_getbranch</a> (<a class="local col6 ref" href="#196rcs" title='rcs' data-ref="196rcs" data-ref-filename="196rcs">rcs</a>, <a class="local col3 ref" href="#203magic" title='magic' data-ref="203magic" data-ref-filename="203magic">magic</a>, <var>1</var>);</td></tr>
<tr><th id="2365">2365</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#203magic" title='magic' data-ref="203magic" data-ref-filename="203magic">magic</a>);</td></tr>
<tr><th id="2366">2366</th><td>		    <b>if</b> (<a class="local col4 ref" href="#204branch" title='branch' data-ref="204branch" data-ref-filename="204branch">branch</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2367">2367</th><td>		    {</td></tr>
<tr><th id="2368">2368</th><td>			<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>);</td></tr>
<tr><th id="2369">2369</th><td>			<b>return</b> <a class="local col4 ref" href="#204branch" title='branch' data-ref="204branch" data-ref-filename="204branch">branch</a>;</td></tr>
<tr><th id="2370">2370</th><td>		    }</td></tr>
<tr><th id="2371">2371</th><td>		    <b>return</b> <a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>;</td></tr>
<tr><th id="2372">2372</th><td>		}</td></tr>
<tr><th id="2373">2373</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#203magic" title='magic' data-ref="203magic" data-ref-filename="203magic">magic</a>);</td></tr>
<tr><th id="2374">2374</th><td>	    }</td></tr>
<tr><th id="2375">2375</th><td>	}</td></tr>
<tr><th id="2376">2376</th><td>	<b>else</b></td></tr>
<tr><th id="2377">2377</th><td>	{</td></tr>
<tr><th id="2378">2378</th><td>	    <i>/* The tag wasn't there, so return the head or NULL */</i></td></tr>
<tr><th id="2379">2379</th><td>	    <b>if</b> (<a class="local col8 ref" href="#198force_tag_match" title='force_tag_match' data-ref="198force_tag_match" data-ref-filename="198force_tag_match">force_tag_match</a>)</td></tr>
<tr><th id="2380">2380</th><td>		<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2381">2381</th><td>	    <b>else</b></td></tr>
<tr><th id="2382">2382</th><td>		<b>return</b> <a class="ref fn" href="#RCS_head" title='RCS_head' data-ref="RCS_head" data-ref-filename="RCS_head">RCS_head</a> (<a class="local col6 ref" href="#196rcs" title='rcs' data-ref="196rcs" data-ref-filename="196rcs">rcs</a>);</td></tr>
<tr><th id="2383">2383</th><td>	}</td></tr>
<tr><th id="2384">2384</th><td>    }</td></tr>
<tr><th id="2385">2385</th><td>    <b>else</b></td></tr>
<tr><th id="2386">2386</th><td>	<a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col7 ref" href="#197symtag" title='symtag' data-ref="197symtag" data-ref-filename="197symtag">symtag</a>);</td></tr>
<tr><th id="2387">2387</th><td></td></tr>
<tr><th id="2388">2388</th><td>    <i>/* tag is always allocated and numeric now.  */</i></td></tr>
<tr><th id="2389">2389</th><td></td></tr>
<tr><th id="2390">2390</th><td>    <i>/*</i></td></tr>
<tr><th id="2391">2391</th><td><i>     * numeric tag processing:</i></td></tr>
<tr><th id="2392">2392</th><td><i>     *		1) revision number - just return it</i></td></tr>
<tr><th id="2393">2393</th><td><i>     *		2) branch number   - find head of branch</i></td></tr>
<tr><th id="2394">2394</th><td><i>     */</i></td></tr>
<tr><th id="2395">2395</th><td></td></tr>
<tr><th id="2396">2396</th><td>    <i>/* strip trailing dots */</i></td></tr>
<tr><th id="2397">2397</th><td>    <b>while</b> (<a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>[<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>) - <var>1</var>] == <kbd>'.'</kbd>)</td></tr>
<tr><th id="2398">2398</th><td>	<a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>[<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>) - <var>1</var>] = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="2399">2399</th><td></td></tr>
<tr><th id="2400">2400</th><td>    <b>if</b> ((<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>) &amp; <var>1</var>) == <var>0</var>)</td></tr>
<tr><th id="2401">2401</th><td>    {</td></tr>
<tr><th id="2402">2402</th><td>	<em>char</em> *<dfn class="local col6 decl" id="206branch" title='branch' data-type='char *' data-ref="206branch" data-ref-filename="206branch">branch</dfn>;</td></tr>
<tr><th id="2403">2403</th><td></td></tr>
<tr><th id="2404">2404</th><td>	<i>/* we have a branch tag, so we need to walk the branch */</i></td></tr>
<tr><th id="2405">2405</th><td>	<a class="local col6 ref" href="#206branch" title='branch' data-ref="206branch" data-ref-filename="206branch">branch</a> = <a class="ref fn" href="#RCS_getbranch" title='RCS_getbranch' data-ref="RCS_getbranch" data-ref-filename="RCS_getbranch">RCS_getbranch</a> (<a class="local col6 ref" href="#196rcs" title='rcs' data-ref="196rcs" data-ref-filename="196rcs">rcs</a>, <a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>, <a class="local col8 ref" href="#198force_tag_match" title='force_tag_match' data-ref="198force_tag_match" data-ref-filename="198force_tag_match">force_tag_match</a>);</td></tr>
<tr><th id="2406">2406</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>);</td></tr>
<tr><th id="2407">2407</th><td>	<b>return</b> <a class="local col6 ref" href="#206branch" title='branch' data-ref="206branch" data-ref-filename="206branch">branch</a>;</td></tr>
<tr><th id="2408">2408</th><td>    }</td></tr>
<tr><th id="2409">2409</th><td>    <b>else</b></td></tr>
<tr><th id="2410">2410</th><td>    {</td></tr>
<tr><th id="2411">2411</th><td>	<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col7 decl" id="207p" title='p' data-type='Node *' data-ref="207p" data-ref-filename="207p">p</dfn>;</td></tr>
<tr><th id="2412">2412</th><td></td></tr>
<tr><th id="2413">2413</th><td>	<i>/* we have a revision tag, so make sure it exists */</i></td></tr>
<tr><th id="2414">2414</th><td>	<a class="local col7 ref" href="#207p" title='p' data-ref="207p" data-ref-filename="207p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#196rcs" title='rcs' data-ref="196rcs" data-ref-filename="196rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>);</td></tr>
<tr><th id="2415">2415</th><td>	<b>if</b> (<a class="local col7 ref" href="#207p" title='p' data-ref="207p" data-ref-filename="207p">p</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2416">2416</th><td>	{</td></tr>
<tr><th id="2417">2417</th><td>	    <i>/* We have found a numeric revision for the revision tag.</i></td></tr>
<tr><th id="2418">2418</th><td><i>	       To support expanding the RCS keyword Name, if</i></td></tr>
<tr><th id="2419">2419</th><td><i>	       SIMPLE_TAG is not NULL, tell the the caller that this</i></td></tr>
<tr><th id="2420">2420</th><td><i>	       is a simple tag which co will recognize.  FIXME: Are</i></td></tr>
<tr><th id="2421">2421</th><td><i>	       there other cases in which we should set this?  In</i></td></tr>
<tr><th id="2422">2422</th><td><i>	       particular, what if we expand RCS keywords internally</i></td></tr>
<tr><th id="2423">2423</th><td><i>	       without calling co?  */</i></td></tr>
<tr><th id="2424">2424</th><td>	    <b>if</b> (<a class="local col9 ref" href="#199simple_tag" title='simple_tag' data-ref="199simple_tag" data-ref-filename="199simple_tag">simple_tag</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2425">2425</th><td>		*<a class="local col9 ref" href="#199simple_tag" title='simple_tag' data-ref="199simple_tag" data-ref-filename="199simple_tag">simple_tag</a> = <var>1</var>;</td></tr>
<tr><th id="2426">2426</th><td>	    <b>return</b> <a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>;</td></tr>
<tr><th id="2427">2427</th><td>	}</td></tr>
<tr><th id="2428">2428</th><td>	<b>else</b></td></tr>
<tr><th id="2429">2429</th><td>	{</td></tr>
<tr><th id="2430">2430</th><td>	    <i>/* The revision wasn't there, so return the head or NULL */</i></td></tr>
<tr><th id="2431">2431</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col0 ref" href="#200tag" title='tag' data-ref="200tag" data-ref-filename="200tag">tag</a>);</td></tr>
<tr><th id="2432">2432</th><td>	    <b>if</b> (<a class="local col8 ref" href="#198force_tag_match" title='force_tag_match' data-ref="198force_tag_match" data-ref-filename="198force_tag_match">force_tag_match</a>)</td></tr>
<tr><th id="2433">2433</th><td>		<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2434">2434</th><td>	    <b>else</b></td></tr>
<tr><th id="2435">2435</th><td>		<b>return</b> <a class="ref fn" href="#RCS_head" title='RCS_head' data-ref="RCS_head" data-ref-filename="RCS_head">RCS_head</a> (<a class="local col6 ref" href="#196rcs" title='rcs' data-ref="196rcs" data-ref-filename="196rcs">rcs</a>);</td></tr>
<tr><th id="2436">2436</th><td>	}</td></tr>
<tr><th id="2437">2437</th><td>    }</td></tr>
<tr><th id="2438">2438</th><td>}</td></tr>
<tr><th id="2439">2439</th><td></td></tr>
<tr><th id="2440">2440</th><td></td></tr>
<tr><th id="2441">2441</th><td></td></tr>
<tr><th id="2442">2442</th><td><i  data-doc="check_rev">/*</i></td></tr>
<tr><th id="2443">2443</th><td><i  data-doc="check_rev"> * Return a "magic" revision as a virtual branch off of REV for the RCS file.</i></td></tr>
<tr><th id="2444">2444</th><td><i  data-doc="check_rev"> * A "magic" revision is one which is unique in the RCS file.  By unique, I</i></td></tr>
<tr><th id="2445">2445</th><td><i  data-doc="check_rev"> * mean we return a revision which:</i></td></tr>
<tr><th id="2446">2446</th><td><i  data-doc="check_rev"> *	- has a branch of 0 (see rcs.h RCS_MAGIC_BRANCH)</i></td></tr>
<tr><th id="2447">2447</th><td><i  data-doc="check_rev"> *	- has a revision component which is not an existing branch off REV</i></td></tr>
<tr><th id="2448">2448</th><td><i  data-doc="check_rev"> *	- has a revision component which is not an existing magic revision</i></td></tr>
<tr><th id="2449">2449</th><td><i  data-doc="check_rev"> *	- is an even-numbered revision, to avoid conflicts with vendor branches</i></td></tr>
<tr><th id="2450">2450</th><td><i  data-doc="check_rev"> * The first point is what makes it "magic".</i></td></tr>
<tr><th id="2451">2451</th><td><i  data-doc="check_rev"> *</i></td></tr>
<tr><th id="2452">2452</th><td><i  data-doc="check_rev"> * As an example, if we pass in 1.37 as REV, we will look for an existing</i></td></tr>
<tr><th id="2453">2453</th><td><i  data-doc="check_rev"> * branch called 1.37.2.  If it did not exist, we would look for an</i></td></tr>
<tr><th id="2454">2454</th><td><i  data-doc="check_rev"> * existing symbolic tag with a numeric part equal to 1.37.0.2.  If that</i></td></tr>
<tr><th id="2455">2455</th><td><i  data-doc="check_rev"> * didn't exist, then we know that the 1.37.2 branch can be reserved by</i></td></tr>
<tr><th id="2456">2456</th><td><i  data-doc="check_rev"> * creating a symbolic tag with 1.37.0.2 as the numeric part.</i></td></tr>
<tr><th id="2457">2457</th><td><i  data-doc="check_rev"> *</i></td></tr>
<tr><th id="2458">2458</th><td><i  data-doc="check_rev"> * This allows us to fork development with very little overhead -- just a</i></td></tr>
<tr><th id="2459">2459</th><td><i  data-doc="check_rev"> * symbolic tag is used in the RCS file.  When a commit is done, a physical</i></td></tr>
<tr><th id="2460">2460</th><td><i  data-doc="check_rev"> * branch is dynamically created to hold the new revision.</i></td></tr>
<tr><th id="2461">2461</th><td><i  data-doc="check_rev"> *</i></td></tr>
<tr><th id="2462">2462</th><td><i  data-doc="check_rev"> * Note: We assume that REV is an RCS revision and not a branch number.</i></td></tr>
<tr><th id="2463">2463</th><td><i  data-doc="check_rev"> */</i></td></tr>
<tr><th id="2464">2464</th><td><em>static</em> <em>char</em> *<dfn class="tu decl def" id="check_rev" title='check_rev' data-type='char *' data-ref="check_rev" data-ref-filename="check_rev">check_rev</dfn>;</td></tr>
<tr><th id="2465">2465</th><td><em>char</em> *</td></tr>
<tr><th id="2466">2466</th><td><dfn class="decl def fn" id="RCS_magicrev" title='RCS_magicrev' data-ref="RCS_magicrev" data-ref-filename="RCS_magicrev">RCS_magicrev</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col8 decl" id="208rcs" title='rcs' data-type='RCSNode *' data-ref="208rcs" data-ref-filename="208rcs">rcs</dfn>, <em>char</em> *<dfn class="local col9 decl" id="209rev" title='rev' data-type='char *' data-ref="209rev" data-ref-filename="209rev">rev</dfn>)</td></tr>
<tr><th id="2467">2467</th><td>{</td></tr>
<tr><th id="2468">2468</th><td>    <em>int</em> <dfn class="local col0 decl" id="210rev_num" title='rev_num' data-type='int' data-ref="210rev_num" data-ref-filename="210rev_num">rev_num</dfn>;</td></tr>
<tr><th id="2469">2469</th><td>    <em>char</em> *<dfn class="local col1 decl" id="211xrev" title='xrev' data-type='char *' data-ref="211xrev" data-ref-filename="211xrev">xrev</dfn>, *<dfn class="local col2 decl" id="212test_branch" title='test_branch' data-type='char *' data-ref="212test_branch" data-ref-filename="212test_branch">test_branch</dfn>, *<dfn class="local col3 decl" id="213local_branch_num" title='local_branch_num' data-type='char *' data-ref="213local_branch_num" data-ref-filename="213local_branch_num">local_branch_num</dfn>;</td></tr>
<tr><th id="2470">2470</th><td></td></tr>
<tr><th id="2471">2471</th><td>    <a class="local col1 ref" href="#211xrev" title='xrev' data-ref="211xrev" data-ref-filename="211xrev">xrev</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col9 ref" href="#209rev" title='rev' data-ref="209rev" data-ref-filename="209rev">rev</a>) + <var>14</var>); <i>/* enough for .0.number */</i></td></tr>
<tr><th id="2472">2472</th><td>    <a class="tu ref" href="#check_rev" title='check_rev' data-use='w' data-ref="check_rev" data-ref-filename="check_rev">check_rev</a> = <a class="local col1 ref" href="#211xrev" title='xrev' data-ref="211xrev" data-ref-filename="211xrev">xrev</a>;</td></tr>
<tr><th id="2473">2473</th><td></td></tr>
<tr><th id="2474">2474</th><td>    <a class="local col3 ref" href="#213local_branch_num" title='local_branch_num' data-ref="213local_branch_num" data-ref-filename="213local_branch_num">local_branch_num</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#getenv" title='getenv' data-ref="getenv" data-ref-filename="getenv">getenv</a>(<q>"CVS_LOCAL_BRANCH_NUM"</q>);</td></tr>
<tr><th id="2475">2475</th><td>    <b>if</b> (<a class="local col3 ref" href="#213local_branch_num" title='local_branch_num' data-ref="213local_branch_num" data-ref-filename="213local_branch_num">local_branch_num</a>)</td></tr>
<tr><th id="2476">2476</th><td>    {</td></tr>
<tr><th id="2477">2477</th><td>      <a class="local col0 ref" href="#210rev_num" title='rev_num' data-ref="210rev_num" data-ref-filename="210rev_num">rev_num</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#atoi" title='atoi' data-ref="atoi" data-ref-filename="atoi">atoi</a>(<a class="local col3 ref" href="#213local_branch_num" title='local_branch_num' data-ref="213local_branch_num" data-ref-filename="213local_branch_num">local_branch_num</a>);</td></tr>
<tr><th id="2478">2478</th><td>      <b>if</b> (<a class="local col0 ref" href="#210rev_num" title='rev_num' data-ref="210rev_num" data-ref-filename="210rev_num">rev_num</a> &lt; <var>2</var>)</td></tr>
<tr><th id="2479">2479</th><td>	<a class="local col0 ref" href="#210rev_num" title='rev_num' data-ref="210rev_num" data-ref-filename="210rev_num">rev_num</a> = <var>2</var>;</td></tr>
<tr><th id="2480">2480</th><td>      <b>else</b></td></tr>
<tr><th id="2481">2481</th><td>	<a class="local col0 ref" href="#210rev_num" title='rev_num' data-ref="210rev_num" data-ref-filename="210rev_num">rev_num</a> &amp;= ~<var>1</var>;</td></tr>
<tr><th id="2482">2482</th><td>    }</td></tr>
<tr><th id="2483">2483</th><td>    <b>else</b></td></tr>
<tr><th id="2484">2484</th><td>      <a class="local col0 ref" href="#210rev_num" title='rev_num' data-ref="210rev_num" data-ref-filename="210rev_num">rev_num</a> = <var>2</var>;</td></tr>
<tr><th id="2485">2485</th><td></td></tr>
<tr><th id="2486">2486</th><td>    <i>/* only look at even numbered branches */</i></td></tr>
<tr><th id="2487">2487</th><td>    <b>for</b> ( ; ; <a class="local col0 ref" href="#210rev_num" title='rev_num' data-ref="210rev_num" data-ref-filename="210rev_num">rev_num</a> += <var>2</var>)</td></tr>
<tr><th id="2488">2488</th><td>    {</td></tr>
<tr><th id="2489">2489</th><td>	<i>/* see if the physical branch exists */</i></td></tr>
<tr><th id="2490">2490</th><td>	(<em>void</em>) <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sprintf" title='sprintf' data-ref="sprintf" data-ref-filename="sprintf">sprintf</a> (<a class="local col1 ref" href="#211xrev" title='xrev' data-ref="211xrev" data-ref-filename="211xrev">xrev</a>, <q>"%s.%d"</q>, <a class="local col9 ref" href="#209rev" title='rev' data-ref="209rev" data-ref-filename="209rev">rev</a>, <a class="local col0 ref" href="#210rev_num" title='rev_num' data-ref="210rev_num" data-ref-filename="210rev_num">rev_num</a>);</td></tr>
<tr><th id="2491">2491</th><td>	<a class="local col2 ref" href="#212test_branch" title='test_branch' data-ref="212test_branch" data-ref-filename="212test_branch">test_branch</a> = <a class="ref fn" href="#RCS_getbranch" title='RCS_getbranch' data-ref="RCS_getbranch" data-ref-filename="RCS_getbranch">RCS_getbranch</a> (<a class="local col8 ref" href="#208rcs" title='rcs' data-ref="208rcs" data-ref-filename="208rcs">rcs</a>, <a class="local col1 ref" href="#211xrev" title='xrev' data-ref="211xrev" data-ref-filename="211xrev">xrev</a>, <var>1</var>);</td></tr>
<tr><th id="2492">2492</th><td>	<b>if</b> (<a class="local col2 ref" href="#212test_branch" title='test_branch' data-ref="212test_branch" data-ref-filename="212test_branch">test_branch</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)	<i>/* it did, so keep looking */</i></td></tr>
<tr><th id="2493">2493</th><td>	{</td></tr>
<tr><th id="2494">2494</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#212test_branch" title='test_branch' data-ref="212test_branch" data-ref-filename="212test_branch">test_branch</a>);</td></tr>
<tr><th id="2495">2495</th><td>	    <b>continue</b>;</td></tr>
<tr><th id="2496">2496</th><td>	}</td></tr>
<tr><th id="2497">2497</th><td></td></tr>
<tr><th id="2498">2498</th><td>	<i>/* now, create a "magic" revision */</i></td></tr>
<tr><th id="2499">2499</th><td>	(<em>void</em>) <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sprintf" title='sprintf' data-ref="sprintf" data-ref-filename="sprintf">sprintf</a> (<a class="local col1 ref" href="#211xrev" title='xrev' data-ref="211xrev" data-ref-filename="211xrev">xrev</a>, <q>"%s.%d.%d"</q>, <a class="local col9 ref" href="#209rev" title='rev' data-ref="209rev" data-ref-filename="209rev">rev</a>, <a class="macro" href="rcs.h.html#184" title="0" data-ref="_M/RCS_MAGIC_BRANCH">RCS_MAGIC_BRANCH</a>, <a class="local col0 ref" href="#210rev_num" title='rev_num' data-ref="210rev_num" data-ref-filename="210rev_num">rev_num</a>);</td></tr>
<tr><th id="2500">2500</th><td></td></tr>
<tr><th id="2501">2501</th><td>	<i>/* walk the symbols list to see if a magic one already exists */</i></td></tr>
<tr><th id="2502">2502</th><td>	<b>if</b> (<a class="ref fn" href="hash.h.html#walklist" title='walklist' data-ref="walklist" data-ref-filename="walklist">walklist</a> (<a class="ref fn" href="#RCS_symbols" title='RCS_symbols' data-ref="RCS_symbols" data-ref-filename="RCS_symbols">RCS_symbols</a>(<a class="local col8 ref" href="#208rcs" title='rcs' data-ref="208rcs" data-ref-filename="208rcs">rcs</a>), <a class="tu ref fn" href="#checkmagic_proc" title='checkmagic_proc' data-use='r' data-ref="checkmagic_proc" data-ref-filename="checkmagic_proc">checkmagic_proc</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) != <var>0</var>)</td></tr>
<tr><th id="2503">2503</th><td>	    <b>continue</b>;</td></tr>
<tr><th id="2504">2504</th><td></td></tr>
<tr><th id="2505">2505</th><td>	<i>/* we found a free magic branch.  Claim it as ours */</i></td></tr>
<tr><th id="2506">2506</th><td>	<b>return</b> <a class="local col1 ref" href="#211xrev" title='xrev' data-ref="211xrev" data-ref-filename="211xrev">xrev</a>;</td></tr>
<tr><th id="2507">2507</th><td>    }</td></tr>
<tr><th id="2508">2508</th><td>}</td></tr>
<tr><th id="2509">2509</th><td></td></tr>
<tr><th id="2510">2510</th><td></td></tr>
<tr><th id="2511">2511</th><td></td></tr>
<tr><th id="2512">2512</th><td><i  data-doc="checkmagic_proc">/*</i></td></tr>
<tr><th id="2513">2513</th><td><i  data-doc="checkmagic_proc"> * walklist proc to look for a match in the symbols list.</i></td></tr>
<tr><th id="2514">2514</th><td><i  data-doc="checkmagic_proc"> * Returns 0 if the symbol does not match, 1 if it does.</i></td></tr>
<tr><th id="2515">2515</th><td><i  data-doc="checkmagic_proc"> */</i></td></tr>
<tr><th id="2516">2516</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="2517">2517</th><td><dfn class="tu decl def fn" id="checkmagic_proc" title='checkmagic_proc' data-type='int checkmagic_proc(Node * p, void * closure)' data-ref="checkmagic_proc" data-ref-filename="checkmagic_proc">checkmagic_proc</dfn> (<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col4 decl" id="214p" title='p' data-type='Node *' data-ref="214p" data-ref-filename="214p">p</dfn>, <em>void</em> *<dfn class="local col5 decl" id="215closure" title='closure' data-type='void *' data-ref="215closure" data-ref-filename="215closure">closure</dfn>)</td></tr>
<tr><th id="2518">2518</th><td>{</td></tr>
<tr><th id="2519">2519</th><td>    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(check_rev) == *(char *)(p-&gt;data) &amp;&amp; strcmp ((check_rev), (p-&gt;data)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="tu ref" href="#check_rev" title='check_rev' data-use='r' data-ref="check_rev" data-ref-filename="check_rev">check_rev</a>, <a class="local col4 ref" href="#214p" title='p' data-ref="214p" data-ref-filename="214p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>))</td></tr>
<tr><th id="2520">2520</th><td>	<b>return</b> <var>1</var>;</td></tr>
<tr><th id="2521">2521</th><td>    <b>else</b></td></tr>
<tr><th id="2522">2522</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="2523">2523</th><td>}</td></tr>
<tr><th id="2524">2524</th><td></td></tr>
<tr><th id="2525">2525</th><td></td></tr>
<tr><th id="2526">2526</th><td></td></tr>
<tr><th id="2527">2527</th><td><i>/*</i></td></tr>
<tr><th id="2528">2528</th><td><i> * Given an RCSNode, returns non-zero if the specified revision number </i></td></tr>
<tr><th id="2529">2529</th><td><i> * or symbolic tag resolves to a "branch" within the rcs file.</i></td></tr>
<tr><th id="2530">2530</th><td><i> *</i></td></tr>
<tr><th id="2531">2531</th><td><i> * FIXME: this is the same as RCS_nodeisbranch except for the special </i></td></tr>
<tr><th id="2532">2532</th><td><i> *        case for handling a null rcsnode.</i></td></tr>
<tr><th id="2533">2533</th><td><i> */</i></td></tr>
<tr><th id="2534">2534</th><td><em>int</em></td></tr>
<tr><th id="2535">2535</th><td><dfn class="decl def fn" id="RCS_isbranch" title='RCS_isbranch' data-ref="RCS_isbranch" data-ref-filename="RCS_isbranch">RCS_isbranch</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col6 decl" id="216rcs" title='rcs' data-type='RCSNode *' data-ref="216rcs" data-ref-filename="216rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col7 decl" id="217rev" title='rev' data-type='const char *' data-ref="217rev" data-ref-filename="217rev">rev</dfn>)</td></tr>
<tr><th id="2536">2536</th><td>{</td></tr>
<tr><th id="2537">2537</th><td>    <i>/* numeric revisions are easy -- even number of dots is a branch */</i></td></tr>
<tr><th id="2538">2538</th><td>    <b>if</b> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) *rev)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) *<a class="local col7 ref" href="#217rev" title='rev' data-ref="217rev" data-ref-filename="217rev">rev</a>))</td></tr>
<tr><th id="2539">2539</th><td>	<b>return</b> (<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col7 ref" href="#217rev" title='rev' data-ref="217rev" data-ref-filename="217rev">rev</a>) &amp; <var>1</var>) == <var>0</var>;</td></tr>
<tr><th id="2540">2540</th><td></td></tr>
<tr><th id="2541">2541</th><td>    <i>/* assume a revision if you can't find the RCS info */</i></td></tr>
<tr><th id="2542">2542</th><td>    <b>if</b> (<a class="local col6 ref" href="#216rcs" title='rcs' data-ref="216rcs" data-ref-filename="216rcs">rcs</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2543">2543</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="2544">2544</th><td></td></tr>
<tr><th id="2545">2545</th><td>    <i>/* now, look for a match in the symbols list */</i></td></tr>
<tr><th id="2546">2546</th><td>    <b>return</b> <a class="ref fn" href="#RCS_nodeisbranch" title='RCS_nodeisbranch' data-ref="RCS_nodeisbranch" data-ref-filename="RCS_nodeisbranch">RCS_nodeisbranch</a> (<a class="local col6 ref" href="#216rcs" title='rcs' data-ref="216rcs" data-ref-filename="216rcs">rcs</a>, <a class="local col7 ref" href="#217rev" title='rev' data-ref="217rev" data-ref-filename="217rev">rev</a>);</td></tr>
<tr><th id="2547">2547</th><td>}</td></tr>
<tr><th id="2548">2548</th><td></td></tr>
<tr><th id="2549">2549</th><td></td></tr>
<tr><th id="2550">2550</th><td></td></tr>
<tr><th id="2551">2551</th><td><i>/*</i></td></tr>
<tr><th id="2552">2552</th><td><i> * Given an RCSNode, returns non-zero if the specified revision number</i></td></tr>
<tr><th id="2553">2553</th><td><i> * or symbolic tag resolves to a "branch" within the rcs file.  We do</i></td></tr>
<tr><th id="2554">2554</th><td><i> * take into account any magic branches as well.</i></td></tr>
<tr><th id="2555">2555</th><td><i> */</i></td></tr>
<tr><th id="2556">2556</th><td><em>int</em></td></tr>
<tr><th id="2557">2557</th><td><dfn class="decl def fn" id="RCS_nodeisbranch" title='RCS_nodeisbranch' data-ref="RCS_nodeisbranch" data-ref-filename="RCS_nodeisbranch">RCS_nodeisbranch</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col8 decl" id="218rcs" title='rcs' data-type='RCSNode *' data-ref="218rcs" data-ref-filename="218rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col9 decl" id="219rev" title='rev' data-type='const char *' data-ref="219rev" data-ref-filename="219rev">rev</dfn>)</td></tr>
<tr><th id="2558">2558</th><td>{</td></tr>
<tr><th id="2559">2559</th><td>    <em>int</em> <dfn class="local col0 decl" id="220dots" title='dots' data-type='int' data-ref="220dots" data-ref-filename="220dots">dots</dfn>;</td></tr>
<tr><th id="2560">2560</th><td>    <em>char</em> *<dfn class="local col1 decl" id="221version" title='version' data-type='char *' data-ref="221version" data-ref-filename="221version">version</dfn>;</td></tr>
<tr><th id="2561">2561</th><td></td></tr>
<tr><th id="2562">2562</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 2562, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col8 ref" href="#218rcs" title='rcs' data-ref="218rcs" data-ref-filename="218rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="2563">2563</th><td></td></tr>
<tr><th id="2564">2564</th><td>    <i>/* numeric revisions are easy -- even number of dots is a branch */</i></td></tr>
<tr><th id="2565">2565</th><td>    <b>if</b> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) *rev)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) *<a class="local col9 ref" href="#219rev" title='rev' data-ref="219rev" data-ref-filename="219rev">rev</a>))</td></tr>
<tr><th id="2566">2566</th><td>	<b>return</b> (<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col9 ref" href="#219rev" title='rev' data-ref="219rev" data-ref-filename="219rev">rev</a>) &amp; <var>1</var>) == <var>0</var>;</td></tr>
<tr><th id="2567">2567</th><td></td></tr>
<tr><th id="2568">2568</th><td>    <a class="local col1 ref" href="#221version" title='version' data-ref="221version" data-ref-filename="221version">version</a> = <a class="tu ref fn" href="#translate_symtag" title='translate_symtag' data-use='c' data-ref="translate_symtag" data-ref-filename="translate_symtag">translate_symtag</a> (<a class="local col8 ref" href="#218rcs" title='rcs' data-ref="218rcs" data-ref-filename="218rcs">rcs</a>, <a class="local col9 ref" href="#219rev" title='rev' data-ref="219rev" data-ref-filename="219rev">rev</a>);</td></tr>
<tr><th id="2569">2569</th><td>    <b>if</b> (<a class="local col1 ref" href="#221version" title='version' data-ref="221version" data-ref-filename="221version">version</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2570">2570</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="2571">2571</th><td>    <a class="local col0 ref" href="#220dots" title='dots' data-ref="220dots" data-ref-filename="220dots">dots</a> = <a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col1 ref" href="#221version" title='version' data-ref="221version" data-ref-filename="221version">version</a>);</td></tr>
<tr><th id="2572">2572</th><td>    <b>if</b> ((<a class="local col0 ref" href="#220dots" title='dots' data-ref="220dots" data-ref-filename="220dots">dots</a> &amp; <var>1</var>) == <var>0</var>)</td></tr>
<tr><th id="2573">2573</th><td>    {</td></tr>
<tr><th id="2574">2574</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col1 ref" href="#221version" title='version' data-ref="221version" data-ref-filename="221version">version</a>);</td></tr>
<tr><th id="2575">2575</th><td>	<b>return</b> <var>1</var>;</td></tr>
<tr><th id="2576">2576</th><td>    }</td></tr>
<tr><th id="2577">2577</th><td></td></tr>
<tr><th id="2578">2578</th><td>    <i>/* got a symbolic tag match, but it's not a branch; see if it's magic */</i></td></tr>
<tr><th id="2579">2579</th><td>    <b>if</b> (<a class="local col0 ref" href="#220dots" title='dots' data-ref="220dots" data-ref-filename="220dots">dots</a> &gt; <var>2</var>)</td></tr>
<tr><th id="2580">2580</th><td>    {</td></tr>
<tr><th id="2581">2581</th><td>	<em>char</em> *<dfn class="local col2 decl" id="222magic" title='magic' data-type='char *' data-ref="222magic" data-ref-filename="222magic">magic</dfn>;</td></tr>
<tr><th id="2582">2582</th><td>	<em>char</em> *<dfn class="local col3 decl" id="223branch" title='branch' data-type='char *' data-ref="223branch" data-ref-filename="223branch">branch</dfn> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col1 ref" href="#221version" title='version' data-ref="221version" data-ref-filename="221version">version</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="2583">2583</th><td>	<em>char</em> *<dfn class="local col4 decl" id="224cp" title='cp' data-type='char *' data-ref="224cp" data-ref-filename="224cp">cp</dfn> = <a class="local col3 ref" href="#223branch" title='branch' data-ref="223branch" data-ref-filename="223branch">branch</a> - <var>1</var>;</td></tr>
<tr><th id="2584">2584</th><td>	<b>while</b> (*<a class="local col4 ref" href="#224cp" title='cp' data-ref="224cp" data-ref-filename="224cp">cp</a> != <kbd>'.'</kbd>)</td></tr>
<tr><th id="2585">2585</th><td>	    <a class="local col4 ref" href="#224cp" title='cp' data-ref="224cp" data-ref-filename="224cp">cp</a>--;</td></tr>
<tr><th id="2586">2586</th><td></td></tr>
<tr><th id="2587">2587</th><td>	<i>/* see if we have .magic-branch. (".0.") */</i></td></tr>
<tr><th id="2588">2588</th><td>	<a class="local col2 ref" href="#222magic" title='magic' data-ref="222magic" data-ref-filename="222magic">magic</a> = <a class="ref fn" href="subr.h.html#Xasprintf" title='Xasprintf' data-ref="Xasprintf" data-ref-filename="Xasprintf">Xasprintf</a> (<q>".%d."</q>, <a class="macro" href="rcs.h.html#184" title="0" data-ref="_M/RCS_MAGIC_BRANCH">RCS_MAGIC_BRANCH</a>);</td></tr>
<tr><th id="2589">2589</th><td>	<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col2 ref" href="#222magic" title='magic' data-ref="222magic" data-ref-filename="222magic">magic</a>, <a class="local col4 ref" href="#224cp" title='cp' data-ref="224cp" data-ref-filename="224cp">cp</a>, <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col2 ref" href="#222magic" title='magic' data-ref="222magic" data-ref-filename="222magic">magic</a>)) == <var>0</var>)</td></tr>
<tr><th id="2590">2590</th><td>	{</td></tr>
<tr><th id="2591">2591</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#222magic" title='magic' data-ref="222magic" data-ref-filename="222magic">magic</a>);</td></tr>
<tr><th id="2592">2592</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col1 ref" href="#221version" title='version' data-ref="221version" data-ref-filename="221version">version</a>);</td></tr>
<tr><th id="2593">2593</th><td>	    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="2594">2594</th><td>	}</td></tr>
<tr><th id="2595">2595</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#222magic" title='magic' data-ref="222magic" data-ref-filename="222magic">magic</a>);</td></tr>
<tr><th id="2596">2596</th><td>    }</td></tr>
<tr><th id="2597">2597</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col1 ref" href="#221version" title='version' data-ref="221version" data-ref-filename="221version">version</a>);</td></tr>
<tr><th id="2598">2598</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="2599">2599</th><td>}</td></tr>
<tr><th id="2600">2600</th><td></td></tr>
<tr><th id="2601">2601</th><td></td></tr>
<tr><th id="2602">2602</th><td></td></tr>
<tr><th id="2603">2603</th><td><i>/*</i></td></tr>
<tr><th id="2604">2604</th><td><i> * Returns a pointer to malloc'ed memory which contains the branch</i></td></tr>
<tr><th id="2605">2605</th><td><i> * for the specified *symbolic* tag.  Magic branches are handled correctly.</i></td></tr>
<tr><th id="2606">2606</th><td><i> */</i></td></tr>
<tr><th id="2607">2607</th><td><em>char</em> *</td></tr>
<tr><th id="2608">2608</th><td><dfn class="decl def fn" id="RCS_whatbranch" title='RCS_whatbranch' data-ref="RCS_whatbranch" data-ref-filename="RCS_whatbranch">RCS_whatbranch</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col5 decl" id="225rcs" title='rcs' data-type='RCSNode *' data-ref="225rcs" data-ref-filename="225rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col6 decl" id="226rev" title='rev' data-type='const char *' data-ref="226rev" data-ref-filename="226rev">rev</dfn>)</td></tr>
<tr><th id="2609">2609</th><td>{</td></tr>
<tr><th id="2610">2610</th><td>    <em>char</em> *<dfn class="local col7 decl" id="227version" title='version' data-type='char *' data-ref="227version" data-ref-filename="227version">version</dfn>;</td></tr>
<tr><th id="2611">2611</th><td>    <em>int</em> <dfn class="local col8 decl" id="228dots" title='dots' data-type='int' data-ref="228dots" data-ref-filename="228dots">dots</dfn>;</td></tr>
<tr><th id="2612">2612</th><td></td></tr>
<tr><th id="2613">2613</th><td>    <i>/* assume no branch if you can't find the RCS info */</i></td></tr>
<tr><th id="2614">2614</th><td>    <b>if</b> (<a class="local col5 ref" href="#225rcs" title='rcs' data-ref="225rcs" data-ref-filename="225rcs">rcs</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2615">2615</th><td>	<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2616">2616</th><td></td></tr>
<tr><th id="2617">2617</th><td>    <i>/* now, look for a match in the symbols list */</i></td></tr>
<tr><th id="2618">2618</th><td>    <a class="local col7 ref" href="#227version" title='version' data-ref="227version" data-ref-filename="227version">version</a> = <a class="tu ref fn" href="#translate_symtag" title='translate_symtag' data-use='c' data-ref="translate_symtag" data-ref-filename="translate_symtag">translate_symtag</a> (<a class="local col5 ref" href="#225rcs" title='rcs' data-ref="225rcs" data-ref-filename="225rcs">rcs</a>, <a class="local col6 ref" href="#226rev" title='rev' data-ref="226rev" data-ref-filename="226rev">rev</a>);</td></tr>
<tr><th id="2619">2619</th><td>    <b>if</b> (<a class="local col7 ref" href="#227version" title='version' data-ref="227version" data-ref-filename="227version">version</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2620">2620</th><td>	<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2621">2621</th><td>    <a class="local col8 ref" href="#228dots" title='dots' data-ref="228dots" data-ref-filename="228dots">dots</a> = <a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col7 ref" href="#227version" title='version' data-ref="227version" data-ref-filename="227version">version</a>);</td></tr>
<tr><th id="2622">2622</th><td>    <b>if</b> ((<a class="local col8 ref" href="#228dots" title='dots' data-ref="228dots" data-ref-filename="228dots">dots</a> &amp; <var>1</var>) == <var>0</var>)</td></tr>
<tr><th id="2623">2623</th><td>	<b>return</b> <a class="local col7 ref" href="#227version" title='version' data-ref="227version" data-ref-filename="227version">version</a>;</td></tr>
<tr><th id="2624">2624</th><td></td></tr>
<tr><th id="2625">2625</th><td>    <i>/* got a symbolic tag match, but it's not a branch; see if it's magic */</i></td></tr>
<tr><th id="2626">2626</th><td>    <b>if</b> (<a class="local col8 ref" href="#228dots" title='dots' data-ref="228dots" data-ref-filename="228dots">dots</a> &gt; <var>2</var>)</td></tr>
<tr><th id="2627">2627</th><td>    {</td></tr>
<tr><th id="2628">2628</th><td>	<em>char</em> *<dfn class="local col9 decl" id="229magic" title='magic' data-type='char *' data-ref="229magic" data-ref-filename="229magic">magic</dfn>;</td></tr>
<tr><th id="2629">2629</th><td>	<em>char</em> *<dfn class="local col0 decl" id="230branch" title='branch' data-type='char *' data-ref="230branch" data-ref-filename="230branch">branch</dfn> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col7 ref" href="#227version" title='version' data-ref="227version" data-ref-filename="227version">version</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="2630">2630</th><td>	<em>char</em> *<dfn class="local col1 decl" id="231cp" title='cp' data-type='char *' data-ref="231cp" data-ref-filename="231cp">cp</dfn> = <a class="local col0 ref" href="#230branch" title='branch' data-ref="230branch" data-ref-filename="230branch">branch</a>++ - <var>1</var>;</td></tr>
<tr><th id="2631">2631</th><td>	<b>while</b> (*<a class="local col1 ref" href="#231cp" title='cp' data-ref="231cp" data-ref-filename="231cp">cp</a> != <kbd>'.'</kbd>)</td></tr>
<tr><th id="2632">2632</th><td>	    <a class="local col1 ref" href="#231cp" title='cp' data-ref="231cp" data-ref-filename="231cp">cp</a>--;</td></tr>
<tr><th id="2633">2633</th><td></td></tr>
<tr><th id="2634">2634</th><td>	<i>/* see if we have .magic-branch. (".0.") */</i></td></tr>
<tr><th id="2635">2635</th><td>	<a class="local col9 ref" href="#229magic" title='magic' data-ref="229magic" data-ref-filename="229magic">magic</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col7 ref" href="#227version" title='version' data-ref="227version" data-ref-filename="227version">version</a>) + <var>1</var>);</td></tr>
<tr><th id="2636">2636</th><td>	(<em>void</em>) <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sprintf" title='sprintf' data-ref="sprintf" data-ref-filename="sprintf">sprintf</a> (<a class="local col9 ref" href="#229magic" title='magic' data-ref="229magic" data-ref-filename="229magic">magic</a>, <q>".%d."</q>, <a class="macro" href="rcs.h.html#184" title="0" data-ref="_M/RCS_MAGIC_BRANCH">RCS_MAGIC_BRANCH</a>);</td></tr>
<tr><th id="2637">2637</th><td>	<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col9 ref" href="#229magic" title='magic' data-ref="229magic" data-ref-filename="229magic">magic</a>, <a class="local col1 ref" href="#231cp" title='cp' data-ref="231cp" data-ref-filename="231cp">cp</a>, <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col9 ref" href="#229magic" title='magic' data-ref="229magic" data-ref-filename="229magic">magic</a>)) == <var>0</var>)</td></tr>
<tr><th id="2638">2638</th><td>	{</td></tr>
<tr><th id="2639">2639</th><td>	    <i>/* yep.  it's magic.  now, construct the real branch */</i></td></tr>
<tr><th id="2640">2640</th><td>	    *<a class="local col1 ref" href="#231cp" title='cp' data-ref="231cp" data-ref-filename="231cp">cp</a> = <kbd>'\0'</kbd>;			<i>/* turn it into a revision */</i></td></tr>
<tr><th id="2641">2641</th><td>	    (<em>void</em>) <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sprintf" title='sprintf' data-ref="sprintf" data-ref-filename="sprintf">sprintf</a> (<a class="local col9 ref" href="#229magic" title='magic' data-ref="229magic" data-ref-filename="229magic">magic</a>, <q>"%s.%s"</q>, <a class="local col7 ref" href="#227version" title='version' data-ref="227version" data-ref-filename="227version">version</a>, <a class="local col0 ref" href="#230branch" title='branch' data-ref="230branch" data-ref-filename="230branch">branch</a>);</td></tr>
<tr><th id="2642">2642</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col7 ref" href="#227version" title='version' data-ref="227version" data-ref-filename="227version">version</a>);</td></tr>
<tr><th id="2643">2643</th><td>	    <b>return</b> <a class="local col9 ref" href="#229magic" title='magic' data-ref="229magic" data-ref-filename="229magic">magic</a>;</td></tr>
<tr><th id="2644">2644</th><td>	}</td></tr>
<tr><th id="2645">2645</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col9 ref" href="#229magic" title='magic' data-ref="229magic" data-ref-filename="229magic">magic</a>);</td></tr>
<tr><th id="2646">2646</th><td>    }</td></tr>
<tr><th id="2647">2647</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col7 ref" href="#227version" title='version' data-ref="227version" data-ref-filename="227version">version</a>);</td></tr>
<tr><th id="2648">2648</th><td>    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2649">2649</th><td>}</td></tr>
<tr><th id="2650">2650</th><td></td></tr>
<tr><th id="2651">2651</th><td></td></tr>
<tr><th id="2652">2652</th><td></td></tr>
<tr><th id="2653">2653</th><td><i>/*</i></td></tr>
<tr><th id="2654">2654</th><td><i> * Get the head of the specified branch.  If the branch does not exist,</i></td></tr>
<tr><th id="2655">2655</th><td><i> * return NULL or RCS_head depending on force_tag_match.</i></td></tr>
<tr><th id="2656">2656</th><td><i> * Returns NULL or a newly malloc'd string.</i></td></tr>
<tr><th id="2657">2657</th><td><i> */</i></td></tr>
<tr><th id="2658">2658</th><td><em>char</em> *</td></tr>
<tr><th id="2659">2659</th><td><dfn class="decl def fn" id="RCS_getbranch" title='RCS_getbranch' data-ref="RCS_getbranch" data-ref-filename="RCS_getbranch">RCS_getbranch</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col2 decl" id="232rcs" title='rcs' data-type='RCSNode *' data-ref="232rcs" data-ref-filename="232rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col3 decl" id="233tag" title='tag' data-type='const char *' data-ref="233tag" data-ref-filename="233tag">tag</dfn>, <em>int</em> <dfn class="local col4 decl" id="234force_tag_match" title='force_tag_match' data-type='int' data-ref="234force_tag_match" data-ref-filename="234force_tag_match">force_tag_match</dfn>)</td></tr>
<tr><th id="2660">2660</th><td>{</td></tr>
<tr><th id="2661">2661</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col5 decl" id="235p" title='p' data-type='Node *' data-ref="235p" data-ref-filename="235p">p</dfn>, *<dfn class="local col6 decl" id="236head" title='head' data-type='Node *' data-ref="236head" data-ref-filename="236head">head</dfn>;</td></tr>
<tr><th id="2662">2662</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col7 decl" id="237vn" title='vn' data-type='RCSVers *' data-ref="237vn" data-ref-filename="237vn">vn</dfn>;</td></tr>
<tr><th id="2663">2663</th><td>    <em>char</em> *<dfn class="local col8 decl" id="238xtag" title='xtag' data-type='char *' data-ref="238xtag" data-ref-filename="238xtag">xtag</dfn>;</td></tr>
<tr><th id="2664">2664</th><td>    <em>char</em> *<dfn class="local col9 decl" id="239nextvers" title='nextvers' data-type='char *' data-ref="239nextvers" data-ref-filename="239nextvers">nextvers</dfn>;</td></tr>
<tr><th id="2665">2665</th><td>    <em>char</em> *<dfn class="local col0 decl" id="240cp" title='cp' data-type='char *' data-ref="240cp" data-ref-filename="240cp">cp</dfn>;</td></tr>
<tr><th id="2666">2666</th><td></td></tr>
<tr><th id="2667">2667</th><td>    <i>/* make sure we have something to look at... */</i></td></tr>
<tr><th id="2668">2668</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 2668, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col2 ref" href="#232rcs" title='rcs' data-ref="232rcs" data-ref-filename="232rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="2669">2669</th><td></td></tr>
<tr><th id="2670">2670</th><td>    <b>if</b> (<a class="local col2 ref" href="#232rcs" title='rcs' data-ref="232rcs" data-ref-filename="232rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="2671">2671</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col2 ref" href="#232rcs" title='rcs' data-ref="232rcs" data-ref-filename="232rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="2672">2672</th><td></td></tr>
<tr><th id="2673">2673</th><td>    <i>/* find out if the tag contains a dot, or is on the trunk */</i></td></tr>
<tr><th id="2674">2674</th><td>    <a class="local col0 ref" href="#240cp" title='cp' data-ref="240cp" data-ref-filename="240cp">cp</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col3 ref" href="#233tag" title='tag' data-ref="233tag" data-ref-filename="233tag">tag</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="2675">2675</th><td></td></tr>
<tr><th id="2676">2676</th><td>    <i>/* trunk processing is the special case */</i></td></tr>
<tr><th id="2677">2677</th><td>    <b>if</b> (<a class="local col0 ref" href="#240cp" title='cp' data-ref="240cp" data-ref-filename="240cp">cp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2678">2678</th><td>    {</td></tr>
<tr><th id="2679">2679</th><td>	<a class="local col8 ref" href="#238xtag" title='xtag' data-ref="238xtag" data-ref-filename="238xtag">xtag</a> = <a class="ref fn" href="subr.h.html#Xasprintf" title='Xasprintf' data-ref="Xasprintf" data-ref-filename="Xasprintf">Xasprintf</a> (<q>"%s."</q>, <a class="local col3 ref" href="#233tag" title='tag' data-ref="233tag" data-ref-filename="233tag">tag</a>);</td></tr>
<tr><th id="2680">2680</th><td>	<b>for</b> (<a class="local col0 ref" href="#240cp" title='cp' data-ref="240cp" data-ref-filename="240cp">cp</a> = <a class="local col2 ref" href="#232rcs" title='rcs' data-ref="232rcs" data-ref-filename="232rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>; <a class="local col0 ref" href="#240cp" title='cp' data-ref="240cp" data-ref-filename="240cp">cp</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;)</td></tr>
<tr><th id="2681">2681</th><td>	{</td></tr>
<tr><th id="2682">2682</th><td>	    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col8 ref" href="#238xtag" title='xtag' data-ref="238xtag" data-ref-filename="238xtag">xtag</a>, <a class="local col0 ref" href="#240cp" title='cp' data-ref="240cp" data-ref-filename="240cp">cp</a>, <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col8 ref" href="#238xtag" title='xtag' data-ref="238xtag" data-ref-filename="238xtag">xtag</a>)) == <var>0</var>)</td></tr>
<tr><th id="2683">2683</th><td>		<b>break</b>;</td></tr>
<tr><th id="2684">2684</th><td>	    <a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col2 ref" href="#232rcs" title='rcs' data-ref="232rcs" data-ref-filename="232rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col0 ref" href="#240cp" title='cp' data-ref="240cp" data-ref-filename="240cp">cp</a>);</td></tr>
<tr><th id="2685">2685</th><td>	    <b>if</b> (<a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2686">2686</th><td>	    {</td></tr>
<tr><th id="2687">2687</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#238xtag" title='xtag' data-ref="238xtag" data-ref-filename="238xtag">xtag</a>);</td></tr>
<tr><th id="2688">2688</th><td>		<b>if</b> (<a class="local col4 ref" href="#234force_tag_match" title='force_tag_match' data-ref="234force_tag_match" data-ref-filename="234force_tag_match">force_tag_match</a>)</td></tr>
<tr><th id="2689">2689</th><td>		    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2690">2690</th><td>		<b>else</b></td></tr>
<tr><th id="2691">2691</th><td>		    <b>return</b> <a class="ref fn" href="#RCS_head" title='RCS_head' data-ref="RCS_head" data-ref-filename="RCS_head">RCS_head</a> (<a class="local col2 ref" href="#232rcs" title='rcs' data-ref="232rcs" data-ref-filename="232rcs">rcs</a>);</td></tr>
<tr><th id="2692">2692</th><td>	    }</td></tr>
<tr><th id="2693">2693</th><td>	    <a class="local col7 ref" href="#237vn" title='vn' data-ref="237vn" data-ref-filename="237vn">vn</a> = <a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="2694">2694</th><td>	    <a class="local col0 ref" href="#240cp" title='cp' data-ref="240cp" data-ref-filename="240cp">cp</a> = <a class="local col7 ref" href="#237vn" title='vn' data-ref="237vn" data-ref-filename="237vn">vn</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>;</td></tr>
<tr><th id="2695">2695</th><td>	}</td></tr>
<tr><th id="2696">2696</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#238xtag" title='xtag' data-ref="238xtag" data-ref-filename="238xtag">xtag</a>);</td></tr>
<tr><th id="2697">2697</th><td>	<b>if</b> (<a class="local col0 ref" href="#240cp" title='cp' data-ref="240cp" data-ref-filename="240cp">cp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2698">2698</th><td>	{</td></tr>
<tr><th id="2699">2699</th><td>	    <b>if</b> (<a class="local col4 ref" href="#234force_tag_match" title='force_tag_match' data-ref="234force_tag_match" data-ref-filename="234force_tag_match">force_tag_match</a>)</td></tr>
<tr><th id="2700">2700</th><td>		<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2701">2701</th><td>	    <b>else</b></td></tr>
<tr><th id="2702">2702</th><td>		<b>return</b> <a class="ref fn" href="#RCS_head" title='RCS_head' data-ref="RCS_head" data-ref-filename="RCS_head">RCS_head</a> (<a class="local col2 ref" href="#232rcs" title='rcs' data-ref="232rcs" data-ref-filename="232rcs">rcs</a>);</td></tr>
<tr><th id="2703">2703</th><td>	}</td></tr>
<tr><th id="2704">2704</th><td>	<b>return</b> <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col0 ref" href="#240cp" title='cp' data-ref="240cp" data-ref-filename="240cp">cp</a>);</td></tr>
<tr><th id="2705">2705</th><td>    }</td></tr>
<tr><th id="2706">2706</th><td></td></tr>
<tr><th id="2707">2707</th><td>    <i>/* if it had a `.', terminate the string so we have the base revision */</i></td></tr>
<tr><th id="2708">2708</th><td>    *<a class="local col0 ref" href="#240cp" title='cp' data-ref="240cp" data-ref-filename="240cp">cp</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="2709">2709</th><td></td></tr>
<tr><th id="2710">2710</th><td>    <i>/* look up the revision this branch is based on */</i></td></tr>
<tr><th id="2711">2711</th><td>    <a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col2 ref" href="#232rcs" title='rcs' data-ref="232rcs" data-ref-filename="232rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col3 ref" href="#233tag" title='tag' data-ref="233tag" data-ref-filename="233tag">tag</a>);</td></tr>
<tr><th id="2712">2712</th><td></td></tr>
<tr><th id="2713">2713</th><td>    <i>/* put the . back so we have the branch again */</i></td></tr>
<tr><th id="2714">2714</th><td>    *<a class="local col0 ref" href="#240cp" title='cp' data-ref="240cp" data-ref-filename="240cp">cp</a> = <kbd>'.'</kbd>;</td></tr>
<tr><th id="2715">2715</th><td></td></tr>
<tr><th id="2716">2716</th><td>    <b>if</b> (<a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2717">2717</th><td>    {</td></tr>
<tr><th id="2718">2718</th><td>	<i>/* if the base revision didn't exist, return head or NULL */</i></td></tr>
<tr><th id="2719">2719</th><td>	<b>if</b> (<a class="local col4 ref" href="#234force_tag_match" title='force_tag_match' data-ref="234force_tag_match" data-ref-filename="234force_tag_match">force_tag_match</a>)</td></tr>
<tr><th id="2720">2720</th><td>	    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2721">2721</th><td>	<b>else</b></td></tr>
<tr><th id="2722">2722</th><td>	    <b>return</b> <a class="ref fn" href="#RCS_head" title='RCS_head' data-ref="RCS_head" data-ref-filename="RCS_head">RCS_head</a> (<a class="local col2 ref" href="#232rcs" title='rcs' data-ref="232rcs" data-ref-filename="232rcs">rcs</a>);</td></tr>
<tr><th id="2723">2723</th><td>    }</td></tr>
<tr><th id="2724">2724</th><td></td></tr>
<tr><th id="2725">2725</th><td>    <i>/* find the first element of the branch we are looking for */</i></td></tr>
<tr><th id="2726">2726</th><td>    <a class="local col7 ref" href="#237vn" title='vn' data-ref="237vn" data-ref-filename="237vn">vn</a> = <a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="2727">2727</th><td>    <b>if</b> (<a class="local col7 ref" href="#237vn" title='vn' data-ref="237vn" data-ref-filename="237vn">vn</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2728">2728</th><td>	<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2729">2729</th><td>    <a class="local col8 ref" href="#238xtag" title='xtag' data-ref="238xtag" data-ref-filename="238xtag">xtag</a> = <a class="ref fn" href="subr.h.html#Xasprintf" title='Xasprintf' data-ref="Xasprintf" data-ref-filename="Xasprintf">Xasprintf</a> (<q>"%s."</q>, <a class="local col3 ref" href="#233tag" title='tag' data-ref="233tag" data-ref-filename="233tag">tag</a>);</td></tr>
<tr><th id="2730">2730</th><td>    <a class="local col6 ref" href="#236head" title='head' data-ref="236head" data-ref-filename="236head">head</a> = <a class="local col7 ref" href="#237vn" title='vn' data-ref="237vn" data-ref-filename="237vn">vn</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>;</td></tr>
<tr><th id="2731">2731</th><td>    <b>for</b> (<a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a> = <a class="local col6 ref" href="#236head" title='head' data-ref="236head" data-ref-filename="236head">head</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>; <a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a> != <a class="local col6 ref" href="#236head" title='head' data-ref="236head" data-ref-filename="236head">head</a>; <a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a> = <a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>)</td></tr>
<tr><th id="2732">2732</th><td>	<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>, <a class="local col8 ref" href="#238xtag" title='xtag' data-ref="238xtag" data-ref-filename="238xtag">xtag</a>, <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col8 ref" href="#238xtag" title='xtag' data-ref="238xtag" data-ref-filename="238xtag">xtag</a>)) == <var>0</var>)</td></tr>
<tr><th id="2733">2733</th><td>	    <b>break</b>;</td></tr>
<tr><th id="2734">2734</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#238xtag" title='xtag' data-ref="238xtag" data-ref-filename="238xtag">xtag</a>);</td></tr>
<tr><th id="2735">2735</th><td></td></tr>
<tr><th id="2736">2736</th><td>    <b>if</b> (<a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a> == <a class="local col6 ref" href="#236head" title='head' data-ref="236head" data-ref-filename="236head">head</a>)</td></tr>
<tr><th id="2737">2737</th><td>    {</td></tr>
<tr><th id="2738">2738</th><td>	<i>/* we didn't find a match so return head or NULL */</i></td></tr>
<tr><th id="2739">2739</th><td>	<b>if</b> (<a class="local col4 ref" href="#234force_tag_match" title='force_tag_match' data-ref="234force_tag_match" data-ref-filename="234force_tag_match">force_tag_match</a>)</td></tr>
<tr><th id="2740">2740</th><td>	    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2741">2741</th><td>	<b>else</b></td></tr>
<tr><th id="2742">2742</th><td>	    <b>return</b> <a class="ref fn" href="#RCS_head" title='RCS_head' data-ref="RCS_head" data-ref-filename="RCS_head">RCS_head</a> (<a class="local col2 ref" href="#232rcs" title='rcs' data-ref="232rcs" data-ref-filename="232rcs">rcs</a>);</td></tr>
<tr><th id="2743">2743</th><td>    }</td></tr>
<tr><th id="2744">2744</th><td></td></tr>
<tr><th id="2745">2745</th><td>    <i>/* now walk the next pointers of the branch */</i></td></tr>
<tr><th id="2746">2746</th><td>    <a class="local col9 ref" href="#239nextvers" title='nextvers' data-ref="239nextvers" data-ref-filename="239nextvers">nextvers</a> = <a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>;</td></tr>
<tr><th id="2747">2747</th><td>    <b>do</b></td></tr>
<tr><th id="2748">2748</th><td>    {</td></tr>
<tr><th id="2749">2749</th><td>	<a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col2 ref" href="#232rcs" title='rcs' data-ref="232rcs" data-ref-filename="232rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col9 ref" href="#239nextvers" title='nextvers' data-ref="239nextvers" data-ref-filename="239nextvers">nextvers</a>);</td></tr>
<tr><th id="2750">2750</th><td>	<b>if</b> (<a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2751">2751</th><td>	{</td></tr>
<tr><th id="2752">2752</th><td>	    <i>/* a link in the chain is missing - return head or NULL */</i></td></tr>
<tr><th id="2753">2753</th><td>	    <b>if</b> (<a class="local col4 ref" href="#234force_tag_match" title='force_tag_match' data-ref="234force_tag_match" data-ref-filename="234force_tag_match">force_tag_match</a>)</td></tr>
<tr><th id="2754">2754</th><td>		<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2755">2755</th><td>	    <b>else</b></td></tr>
<tr><th id="2756">2756</th><td>		<b>return</b> <a class="ref fn" href="#RCS_head" title='RCS_head' data-ref="RCS_head" data-ref-filename="RCS_head">RCS_head</a> (<a class="local col2 ref" href="#232rcs" title='rcs' data-ref="232rcs" data-ref-filename="232rcs">rcs</a>);</td></tr>
<tr><th id="2757">2757</th><td>	}</td></tr>
<tr><th id="2758">2758</th><td>	<a class="local col7 ref" href="#237vn" title='vn' data-ref="237vn" data-ref-filename="237vn">vn</a> = <a class="local col5 ref" href="#235p" title='p' data-ref="235p" data-ref-filename="235p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="2759">2759</th><td>	<a class="local col9 ref" href="#239nextvers" title='nextvers' data-ref="239nextvers" data-ref-filename="239nextvers">nextvers</a> = <a class="local col7 ref" href="#237vn" title='vn' data-ref="237vn" data-ref-filename="237vn">vn</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>;</td></tr>
<tr><th id="2760">2760</th><td>    } <b>while</b> (<a class="local col9 ref" href="#239nextvers" title='nextvers' data-ref="239nextvers" data-ref-filename="239nextvers">nextvers</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="2761">2761</th><td></td></tr>
<tr><th id="2762">2762</th><td>    <i>/* we have the version in our hand, so go for it */</i></td></tr>
<tr><th id="2763">2763</th><td>    <b>return</b> <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col7 ref" href="#237vn" title='vn' data-ref="237vn" data-ref-filename="237vn">vn</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="2764">2764</th><td>}</td></tr>
<tr><th id="2765">2765</th><td></td></tr>
<tr><th id="2766">2766</th><td></td></tr>
<tr><th id="2767">2767</th><td></td></tr>
<tr><th id="2768">2768</th><td><i>/* Returns the head of the branch which REV is on.  REV can be a</i></td></tr>
<tr><th id="2769">2769</th><td><i>   branch tag or non-branch tag; symbolic or numeric.</i></td></tr>
<tr><th id="2770">2770</th><td><i></i></td></tr>
<tr><th id="2771">2771</th><td><i>   Returns a newly malloc'd string.  Returns NULL if a symbolic name</i></td></tr>
<tr><th id="2772">2772</th><td><i>   isn't found.  */</i></td></tr>
<tr><th id="2773">2773</th><td><em>char</em> *</td></tr>
<tr><th id="2774">2774</th><td><dfn class="decl def fn" id="RCS_branch_head" title='RCS_branch_head' data-ref="RCS_branch_head" data-ref-filename="RCS_branch_head">RCS_branch_head</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col1 decl" id="241rcs" title='rcs' data-type='RCSNode *' data-ref="241rcs" data-ref-filename="241rcs">rcs</dfn>, <em>char</em> *<dfn class="local col2 decl" id="242rev" title='rev' data-type='char *' data-ref="242rev" data-ref-filename="242rev">rev</dfn>)</td></tr>
<tr><th id="2775">2775</th><td>{</td></tr>
<tr><th id="2776">2776</th><td>    <em>char</em> *<dfn class="local col3 decl" id="243num" title='num' data-type='char *' data-ref="243num" data-ref-filename="243num">num</dfn>;</td></tr>
<tr><th id="2777">2777</th><td>    <em>char</em> *<dfn class="local col4 decl" id="244br" title='br' data-type='char *' data-ref="244br" data-ref-filename="244br">br</dfn>;</td></tr>
<tr><th id="2778">2778</th><td>    <em>char</em> *<dfn class="local col5 decl" id="245retval" title='retval' data-type='char *' data-ref="245retval" data-ref-filename="245retval">retval</dfn>;</td></tr>
<tr><th id="2779">2779</th><td></td></tr>
<tr><th id="2780">2780</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 2780, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col1 ref" href="#241rcs" title='rcs' data-ref="241rcs" data-ref-filename="241rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="2781">2781</th><td></td></tr>
<tr><th id="2782">2782</th><td>    <b>if</b> (<a class="ref fn" href="#RCS_nodeisbranch" title='RCS_nodeisbranch' data-ref="RCS_nodeisbranch" data-ref-filename="RCS_nodeisbranch">RCS_nodeisbranch</a> (<a class="local col1 ref" href="#241rcs" title='rcs' data-ref="241rcs" data-ref-filename="241rcs">rcs</a>, <a class="local col2 ref" href="#242rev" title='rev' data-ref="242rev" data-ref-filename="242rev">rev</a>))</td></tr>
<tr><th id="2783">2783</th><td>	<b>return</b> <a class="ref fn" href="#RCS_getbranch" title='RCS_getbranch' data-ref="RCS_getbranch" data-ref-filename="RCS_getbranch">RCS_getbranch</a> (<a class="local col1 ref" href="#241rcs" title='rcs' data-ref="241rcs" data-ref-filename="241rcs">rcs</a>, <a class="local col2 ref" href="#242rev" title='rev' data-ref="242rev" data-ref-filename="242rev">rev</a>, <var>1</var>);</td></tr>
<tr><th id="2784">2784</th><td></td></tr>
<tr><th id="2785">2785</th><td>    <b>if</b> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) *rev)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) *<a class="local col2 ref" href="#242rev" title='rev' data-ref="242rev" data-ref-filename="242rev">rev</a>))</td></tr>
<tr><th id="2786">2786</th><td>	<a class="local col3 ref" href="#243num" title='num' data-ref="243num" data-ref-filename="243num">num</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col2 ref" href="#242rev" title='rev' data-ref="242rev" data-ref-filename="242rev">rev</a>);</td></tr>
<tr><th id="2787">2787</th><td>    <b>else</b></td></tr>
<tr><th id="2788">2788</th><td>    {</td></tr>
<tr><th id="2789">2789</th><td>	<a class="local col3 ref" href="#243num" title='num' data-ref="243num" data-ref-filename="243num">num</a> = <a class="tu ref fn" href="#translate_symtag" title='translate_symtag' data-use='c' data-ref="translate_symtag" data-ref-filename="translate_symtag">translate_symtag</a> (<a class="local col1 ref" href="#241rcs" title='rcs' data-ref="241rcs" data-ref-filename="241rcs">rcs</a>, <a class="local col2 ref" href="#242rev" title='rev' data-ref="242rev" data-ref-filename="242rev">rev</a>);</td></tr>
<tr><th id="2790">2790</th><td>	<b>if</b> (<a class="local col3 ref" href="#243num" title='num' data-ref="243num" data-ref-filename="243num">num</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2791">2791</th><td>	    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2792">2792</th><td>    }</td></tr>
<tr><th id="2793">2793</th><td>    <a class="local col4 ref" href="#244br" title='br' data-ref="244br" data-ref-filename="244br">br</a> = <a class="tu ref fn" href="#truncate_revnum" title='truncate_revnum' data-use='c' data-ref="truncate_revnum" data-ref-filename="truncate_revnum">truncate_revnum</a> (<a class="local col3 ref" href="#243num" title='num' data-ref="243num" data-ref-filename="243num">num</a>);</td></tr>
<tr><th id="2794">2794</th><td>    <a class="local col5 ref" href="#245retval" title='retval' data-ref="245retval" data-ref-filename="245retval">retval</a> = <a class="ref fn" href="#RCS_getbranch" title='RCS_getbranch' data-ref="RCS_getbranch" data-ref-filename="RCS_getbranch">RCS_getbranch</a> (<a class="local col1 ref" href="#241rcs" title='rcs' data-ref="241rcs" data-ref-filename="241rcs">rcs</a>, <a class="local col4 ref" href="#244br" title='br' data-ref="244br" data-ref-filename="244br">br</a>, <var>1</var>);</td></tr>
<tr><th id="2795">2795</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col4 ref" href="#244br" title='br' data-ref="244br" data-ref-filename="244br">br</a>);</td></tr>
<tr><th id="2796">2796</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#243num" title='num' data-ref="243num" data-ref-filename="243num">num</a>);</td></tr>
<tr><th id="2797">2797</th><td>    <b>return</b> <a class="local col5 ref" href="#245retval" title='retval' data-ref="245retval" data-ref-filename="245retval">retval</a>;</td></tr>
<tr><th id="2798">2798</th><td>}</td></tr>
<tr><th id="2799">2799</th><td></td></tr>
<tr><th id="2800">2800</th><td></td></tr>
<tr><th id="2801">2801</th><td></td></tr>
<tr><th id="2802">2802</th><td><i  data-doc="RCS_getbranchpoint">/* Get the branch point for a particular branch, that is the first</i></td></tr>
<tr><th id="2803">2803</th><td><i  data-doc="RCS_getbranchpoint">   revision on that branch.  For example, RCS_getbranchpoint (rcs,</i></td></tr>
<tr><th id="2804">2804</th><td><i  data-doc="RCS_getbranchpoint">   "1.3.2") will normally return "1.3.2.1".  TARGET may be either a</i></td></tr>
<tr><th id="2805">2805</th><td><i  data-doc="RCS_getbranchpoint">   branch number or a revision number; if a revnum, find the</i></td></tr>
<tr><th id="2806">2806</th><td><i  data-doc="RCS_getbranchpoint">   branchpoint of the branch to which TARGET belongs.</i></td></tr>
<tr><th id="2807">2807</th><td><i  data-doc="RCS_getbranchpoint"></i></td></tr>
<tr><th id="2808">2808</th><td><i  data-doc="RCS_getbranchpoint">   Return RCS_head if TARGET is on the trunk or if the root node could</i></td></tr>
<tr><th id="2809">2809</th><td><i  data-doc="RCS_getbranchpoint">   not be found (this is sort of backwards from our behavior on a branch;</i></td></tr>
<tr><th id="2810">2810</th><td><i  data-doc="RCS_getbranchpoint">   the rationale is that the return value is a revision from which you</i></td></tr>
<tr><th id="2811">2811</th><td><i  data-doc="RCS_getbranchpoint">   can start walking the next fields and end up at TARGET).</i></td></tr>
<tr><th id="2812">2812</th><td><i  data-doc="RCS_getbranchpoint">   Return NULL on error.  */</i></td></tr>
<tr><th id="2813">2813</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="2814">2814</th><td><dfn class="tu decl def fn" id="RCS_getbranchpoint" title='RCS_getbranchpoint' data-type='char * RCS_getbranchpoint(RCSNode * rcs, char * target)' data-ref="RCS_getbranchpoint" data-ref-filename="RCS_getbranchpoint">RCS_getbranchpoint</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col6 decl" id="246rcs" title='rcs' data-type='RCSNode *' data-ref="246rcs" data-ref-filename="246rcs">rcs</dfn>, <em>char</em> *<dfn class="local col7 decl" id="247target" title='target' data-type='char *' data-ref="247target" data-ref-filename="247target">target</dfn>)</td></tr>
<tr><th id="2815">2815</th><td>{</td></tr>
<tr><th id="2816">2816</th><td>    <em>char</em> *<dfn class="local col8 decl" id="248branch" title='branch' data-type='char *' data-ref="248branch" data-ref-filename="248branch">branch</dfn>, *<dfn class="local col9 decl" id="249bp" title='bp' data-type='char *' data-ref="249bp" data-ref-filename="249bp">bp</dfn>;</td></tr>
<tr><th id="2817">2817</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col0 decl" id="250vp" title='vp' data-type='Node *' data-ref="250vp" data-ref-filename="250vp">vp</dfn>;</td></tr>
<tr><th id="2818">2818</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col1 decl" id="251rev" title='rev' data-type='RCSVers *' data-ref="251rev" data-ref-filename="251rev">rev</dfn>;</td></tr>
<tr><th id="2819">2819</th><td>    <em>int</em> <dfn class="local col2 decl" id="252dots" title='dots' data-type='int' data-ref="252dots" data-ref-filename="252dots">dots</dfn>, <dfn class="local col3 decl" id="253isrevnum" title='isrevnum' data-type='int' data-ref="253isrevnum" data-ref-filename="253isrevnum">isrevnum</dfn>, <dfn class="local col4 decl" id="254brlen" title='brlen' data-type='int' data-ref="254brlen" data-ref-filename="254brlen">brlen</dfn>;</td></tr>
<tr><th id="2820">2820</th><td></td></tr>
<tr><th id="2821">2821</th><td>    <a class="local col2 ref" href="#252dots" title='dots' data-ref="252dots" data-ref-filename="252dots">dots</a> = <a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col7 ref" href="#247target" title='target' data-ref="247target" data-ref-filename="247target">target</a>);</td></tr>
<tr><th id="2822">2822</th><td>    <a class="local col3 ref" href="#253isrevnum" title='isrevnum' data-ref="253isrevnum" data-ref-filename="253isrevnum">isrevnum</a> = <a class="local col2 ref" href="#252dots" title='dots' data-ref="252dots" data-ref-filename="252dots">dots</a> &amp; <var>1</var>;</td></tr>
<tr><th id="2823">2823</th><td></td></tr>
<tr><th id="2824">2824</th><td>    <b>if</b> (<a class="local col2 ref" href="#252dots" title='dots' data-ref="252dots" data-ref-filename="252dots">dots</a> == <var>1</var>)</td></tr>
<tr><th id="2825">2825</th><td>	<i>/* TARGET is a trunk revision; return rcs-&gt;head. */</i></td></tr>
<tr><th id="2826">2826</th><td>	<b>return</b> <a class="ref fn" href="#RCS_head" title='RCS_head' data-ref="RCS_head" data-ref-filename="RCS_head">RCS_head</a> (<a class="local col6 ref" href="#246rcs" title='rcs' data-ref="246rcs" data-ref-filename="246rcs">rcs</a>);</td></tr>
<tr><th id="2827">2827</th><td></td></tr>
<tr><th id="2828">2828</th><td>    <i>/* Get the revision number of the node at which TARGET's branch is</i></td></tr>
<tr><th id="2829">2829</th><td><i>       rooted.  If TARGET is a branch number, lop off the last field;</i></td></tr>
<tr><th id="2830">2830</th><td><i>       if it's a revision number, lop off the last *two* fields. */</i></td></tr>
<tr><th id="2831">2831</th><td>    <a class="local col8 ref" href="#248branch" title='branch' data-ref="248branch" data-ref-filename="248branch">branch</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col7 ref" href="#247target" title='target' data-ref="247target" data-ref-filename="247target">target</a>);</td></tr>
<tr><th id="2832">2832</th><td>    <a class="local col9 ref" href="#249bp" title='bp' data-ref="249bp" data-ref-filename="249bp">bp</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col8 ref" href="#248branch" title='branch' data-ref="248branch" data-ref-filename="248branch">branch</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="2833">2833</th><td>    <b>if</b> (<a class="local col9 ref" href="#249bp" title='bp' data-ref="249bp" data-ref-filename="249bp">bp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2834">2834</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"%s: confused revision number %s"</q>,</td></tr>
<tr><th id="2835">2835</th><td>	       <a class="local col6 ref" href="#246rcs" title='rcs' data-ref="246rcs" data-ref-filename="246rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col7 ref" href="#247target" title='target' data-ref="247target" data-ref-filename="247target">target</a>);</td></tr>
<tr><th id="2836">2836</th><td>    <b>if</b> (<a class="local col3 ref" href="#253isrevnum" title='isrevnum' data-ref="253isrevnum" data-ref-filename="253isrevnum">isrevnum</a>)</td></tr>
<tr><th id="2837">2837</th><td>	<b>while</b> (*--<a class="local col9 ref" href="#249bp" title='bp' data-ref="249bp" data-ref-filename="249bp">bp</a> != <kbd>'.'</kbd>)</td></tr>
<tr><th id="2838">2838</th><td>	    ;</td></tr>
<tr><th id="2839">2839</th><td>    *<a class="local col9 ref" href="#249bp" title='bp' data-ref="249bp" data-ref-filename="249bp">bp</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="2840">2840</th><td></td></tr>
<tr><th id="2841">2841</th><td>    <a class="local col0 ref" href="#250vp" title='vp' data-ref="250vp" data-ref-filename="250vp">vp</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#246rcs" title='rcs' data-ref="246rcs" data-ref-filename="246rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col8 ref" href="#248branch" title='branch' data-ref="248branch" data-ref-filename="248branch">branch</a>);</td></tr>
<tr><th id="2842">2842</th><td>    <b>if</b> (<a class="local col0 ref" href="#250vp" title='vp' data-ref="250vp" data-ref-filename="250vp">vp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2843">2843</th><td>    {	</td></tr>
<tr><th id="2844">2844</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: can't find branch point %s"</q>, <a class="local col6 ref" href="#246rcs" title='rcs' data-ref="246rcs" data-ref-filename="246rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col7 ref" href="#247target" title='target' data-ref="247target" data-ref-filename="247target">target</a>);</td></tr>
<tr><th id="2845">2845</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#248branch" title='branch' data-ref="248branch" data-ref-filename="248branch">branch</a>);</td></tr>
<tr><th id="2846">2846</th><td>	<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2847">2847</th><td>    }</td></tr>
<tr><th id="2848">2848</th><td>    <a class="local col1 ref" href="#251rev" title='rev' data-ref="251rev" data-ref-filename="251rev">rev</a> = <a class="local col0 ref" href="#250vp" title='vp' data-ref="250vp" data-ref-filename="250vp">vp</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="2849">2849</th><td></td></tr>
<tr><th id="2850">2850</th><td>    *<a class="local col9 ref" href="#249bp" title='bp' data-ref="249bp" data-ref-filename="249bp">bp</a>++ = <kbd>'.'</kbd>;</td></tr>
<tr><th id="2851">2851</th><td>    <b>while</b> (*<a class="local col9 ref" href="#249bp" title='bp' data-ref="249bp" data-ref-filename="249bp">bp</a> &amp;&amp; *<a class="local col9 ref" href="#249bp" title='bp' data-ref="249bp" data-ref-filename="249bp">bp</a> != <kbd>'.'</kbd>)</td></tr>
<tr><th id="2852">2852</th><td>	++<a class="local col9 ref" href="#249bp" title='bp' data-ref="249bp" data-ref-filename="249bp">bp</a>;</td></tr>
<tr><th id="2853">2853</th><td>    <a class="local col4 ref" href="#254brlen" title='brlen' data-ref="254brlen" data-ref-filename="254brlen">brlen</a> = <a class="local col9 ref" href="#249bp" title='bp' data-ref="249bp" data-ref-filename="249bp">bp</a> - <a class="local col8 ref" href="#248branch" title='branch' data-ref="248branch" data-ref-filename="248branch">branch</a>;</td></tr>
<tr><th id="2854">2854</th><td></td></tr>
<tr><th id="2855">2855</th><td>    <a class="local col0 ref" href="#250vp" title='vp' data-ref="250vp" data-ref-filename="250vp">vp</a> = <a class="local col1 ref" href="#251rev" title='rev' data-ref="251rev" data-ref-filename="251rev">rev</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>;</td></tr>
<tr><th id="2856">2856</th><td>    <b>while</b> (<a class="local col0 ref" href="#250vp" title='vp' data-ref="250vp" data-ref-filename="250vp">vp</a> != <a class="local col1 ref" href="#251rev" title='rev' data-ref="251rev" data-ref-filename="251rev">rev</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>)</td></tr>
<tr><th id="2857">2857</th><td>    {</td></tr>
<tr><th id="2858">2858</th><td>	<i>/* BRANCH may be a genuine branch number, e.g. `1.1.3', or</i></td></tr>
<tr><th id="2859">2859</th><td><i>	   maybe a full revision number, e.g. `1.1.3.6'.  We have</i></td></tr>
<tr><th id="2860">2860</th><td><i>	   found our branch point if the first BRANCHLEN characters</i></td></tr>
<tr><th id="2861">2861</th><td><i>	   of the revision number match, *and* if the following</i></td></tr>
<tr><th id="2862">2862</th><td><i>	   character is a dot. */</i></td></tr>
<tr><th id="2863">2863</th><td>	<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col0 ref" href="#250vp" title='vp' data-ref="250vp" data-ref-filename="250vp">vp</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>, <a class="local col8 ref" href="#248branch" title='branch' data-ref="248branch" data-ref-filename="248branch">branch</a>, <a class="local col4 ref" href="#254brlen" title='brlen' data-ref="254brlen" data-ref-filename="254brlen">brlen</a>) == <var>0</var> &amp;&amp; <a class="local col0 ref" href="#250vp" title='vp' data-ref="250vp" data-ref-filename="250vp">vp</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>[<a class="local col4 ref" href="#254brlen" title='brlen' data-ref="254brlen" data-ref-filename="254brlen">brlen</a>] == <kbd>'.'</kbd>)</td></tr>
<tr><th id="2864">2864</th><td>	    <b>break</b>;</td></tr>
<tr><th id="2865">2865</th><td>	<a class="local col0 ref" href="#250vp" title='vp' data-ref="250vp" data-ref-filename="250vp">vp</a> = <a class="local col0 ref" href="#250vp" title='vp' data-ref="250vp" data-ref-filename="250vp">vp</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>;</td></tr>
<tr><th id="2866">2866</th><td>    }</td></tr>
<tr><th id="2867">2867</th><td></td></tr>
<tr><th id="2868">2868</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#248branch" title='branch' data-ref="248branch" data-ref-filename="248branch">branch</a>);</td></tr>
<tr><th id="2869">2869</th><td>    <b>if</b> (<a class="local col0 ref" href="#250vp" title='vp' data-ref="250vp" data-ref-filename="250vp">vp</a> == <a class="local col1 ref" href="#251rev" title='rev' data-ref="251rev" data-ref-filename="251rev">rev</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>)</td></tr>
<tr><th id="2870">2870</th><td>    {</td></tr>
<tr><th id="2871">2871</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: can't find branch point %s"</q>, <a class="local col6 ref" href="#246rcs" title='rcs' data-ref="246rcs" data-ref-filename="246rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col7 ref" href="#247target" title='target' data-ref="247target" data-ref-filename="247target">target</a>);</td></tr>
<tr><th id="2872">2872</th><td>	<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2873">2873</th><td>    }</td></tr>
<tr><th id="2874">2874</th><td>    <b>else</b></td></tr>
<tr><th id="2875">2875</th><td>	<b>return</b> <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col0 ref" href="#250vp" title='vp' data-ref="250vp" data-ref-filename="250vp">vp</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>);</td></tr>
<tr><th id="2876">2876</th><td>}</td></tr>
<tr><th id="2877">2877</th><td></td></tr>
<tr><th id="2878">2878</th><td></td></tr>
<tr><th id="2879">2879</th><td></td></tr>
<tr><th id="2880">2880</th><td><i>/*</i></td></tr>
<tr><th id="2881">2881</th><td><i> * Get the head of the RCS file.  If branch is set, this is the head of the</i></td></tr>
<tr><th id="2882">2882</th><td><i> * branch, otherwise the real head.</i></td></tr>
<tr><th id="2883">2883</th><td><i> *</i></td></tr>
<tr><th id="2884">2884</th><td><i> * INPUTS</i></td></tr>
<tr><th id="2885">2885</th><td><i> *   rcs	The parsed rcs node information.</i></td></tr>
<tr><th id="2886">2886</th><td><i> *</i></td></tr>
<tr><th id="2887">2887</th><td><i> * RETURNS</i></td></tr>
<tr><th id="2888">2888</th><td><i> *   NULL when rcs-&gt;branch exists and cannot be found.</i></td></tr>
<tr><th id="2889">2889</th><td><i> *   A newly malloc'd string, otherwise.</i></td></tr>
<tr><th id="2890">2890</th><td><i> */</i></td></tr>
<tr><th id="2891">2891</th><td><em>char</em> *</td></tr>
<tr><th id="2892">2892</th><td><dfn class="decl def fn" id="RCS_head" title='RCS_head' data-ref="RCS_head" data-ref-filename="RCS_head">RCS_head</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col5 decl" id="255rcs" title='rcs' data-type='RCSNode *' data-ref="255rcs" data-ref-filename="255rcs">rcs</dfn>)</td></tr>
<tr><th id="2893">2893</th><td>{</td></tr>
<tr><th id="2894">2894</th><td>    <i>/* make sure we have something to look at... */</i></td></tr>
<tr><th id="2895">2895</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 2895, __func__, &quot;rcs&quot;))" data-ref="_M/assert">assert</a> (<a class="local col5 ref" href="#255rcs" title='rcs' data-ref="255rcs" data-ref-filename="255rcs">rcs</a>);</td></tr>
<tr><th id="2896">2896</th><td></td></tr>
<tr><th id="2897">2897</th><td>    <i>/*</i></td></tr>
<tr><th id="2898">2898</th><td><i>     * NOTE: we call getbranch with force_tag_match set to avoid any</i></td></tr>
<tr><th id="2899">2899</th><td><i>     * possibility of recursion</i></td></tr>
<tr><th id="2900">2900</th><td><i>     */</i></td></tr>
<tr><th id="2901">2901</th><td>    <b>if</b> (<a class="local col5 ref" href="#255rcs" title='rcs' data-ref="255rcs" data-ref-filename="255rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a>)</td></tr>
<tr><th id="2902">2902</th><td>	<b>return</b> <a class="ref fn" href="#RCS_getbranch" title='RCS_getbranch' data-ref="RCS_getbranch" data-ref-filename="RCS_getbranch">RCS_getbranch</a> (<a class="local col5 ref" href="#255rcs" title='rcs' data-ref="255rcs" data-ref-filename="255rcs">rcs</a>, <a class="local col5 ref" href="#255rcs" title='rcs' data-ref="255rcs" data-ref-filename="255rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a>, <var>1</var>);</td></tr>
<tr><th id="2903">2903</th><td>    <b>else</b></td></tr>
<tr><th id="2904">2904</th><td>	<b>return</b> <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col5 ref" href="#255rcs" title='rcs' data-ref="255rcs" data-ref-filename="255rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>);</td></tr>
<tr><th id="2905">2905</th><td>}</td></tr>
<tr><th id="2906">2906</th><td></td></tr>
<tr><th id="2907">2907</th><td></td></tr>
<tr><th id="2908">2908</th><td></td></tr>
<tr><th id="2909">2909</th><td><i>/*</i></td></tr>
<tr><th id="2910">2910</th><td><i> * Get the most recent revision, based on the supplied date, but use some</i></td></tr>
<tr><th id="2911">2911</th><td><i> * funky stuff and follow the vendor branch maybe</i></td></tr>
<tr><th id="2912">2912</th><td><i> */</i></td></tr>
<tr><th id="2913">2913</th><td><em>char</em> *</td></tr>
<tr><th id="2914">2914</th><td><dfn class="decl def fn" id="RCS_getdate" title='RCS_getdate' data-ref="RCS_getdate" data-ref-filename="RCS_getdate">RCS_getdate</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col6 decl" id="256rcs" title='rcs' data-type='RCSNode *' data-ref="256rcs" data-ref-filename="256rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col7 decl" id="257date" title='date' data-type='const char *' data-ref="257date" data-ref-filename="257date">date</dfn>, <em>int</em> <dfn class="local col8 decl" id="258force_tag_match" title='force_tag_match' data-type='int' data-ref="258force_tag_match" data-ref-filename="258force_tag_match">force_tag_match</dfn>)</td></tr>
<tr><th id="2915">2915</th><td>{</td></tr>
<tr><th id="2916">2916</th><td>    <em>char</em> *<dfn class="local col9 decl" id="259cur_rev" title='cur_rev' data-type='char *' data-ref="259cur_rev" data-ref-filename="259cur_rev">cur_rev</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2917">2917</th><td>    <em>char</em> *<dfn class="local col0 decl" id="260retval" title='retval' data-type='char *' data-ref="260retval" data-ref-filename="260retval">retval</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2918">2918</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col1 decl" id="261p" title='p' data-type='Node *' data-ref="261p" data-ref-filename="261p">p</dfn>;</td></tr>
<tr><th id="2919">2919</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col2 decl" id="262vers" title='vers' data-type='RCSVers *' data-ref="262vers" data-ref-filename="262vers">vers</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2920">2920</th><td></td></tr>
<tr><th id="2921">2921</th><td>    <i>/* make sure we have something to look at... */</i></td></tr>
<tr><th id="2922">2922</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 2922, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="2923">2923</th><td></td></tr>
<tr><th id="2924">2924</th><td>    <b>if</b> (<a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="2925">2925</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="2926">2926</th><td></td></tr>
<tr><th id="2927">2927</th><td>    <i>/* if the head is on a branch, try the branch first */</i></td></tr>
<tr><th id="2928">2928</th><td>    <b>if</b> (<a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2929">2929</th><td>    {</td></tr>
<tr><th id="2930">2930</th><td>	<a class="local col0 ref" href="#260retval" title='retval' data-ref="260retval" data-ref-filename="260retval">retval</a> = <a class="tu ref fn" href="#RCS_getdatebranch" title='RCS_getdatebranch' data-use='c' data-ref="RCS_getdatebranch" data-ref-filename="RCS_getdatebranch">RCS_getdatebranch</a> (<a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a>, <a class="local col7 ref" href="#257date" title='date' data-ref="257date" data-ref-filename="257date">date</a>, <a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a>);</td></tr>
<tr><th id="2931">2931</th><td>	<b>if</b> (<a class="local col0 ref" href="#260retval" title='retval' data-ref="260retval" data-ref-filename="260retval">retval</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2932">2932</th><td>	    <b>return</b> <a class="local col0 ref" href="#260retval" title='retval' data-ref="260retval" data-ref-filename="260retval">retval</a>;</td></tr>
<tr><th id="2933">2933</th><td>    }</td></tr>
<tr><th id="2934">2934</th><td></td></tr>
<tr><th id="2935">2935</th><td>    <i>/* otherwise if we have a trunk, try it */</i></td></tr>
<tr><th id="2936">2936</th><td>    <b>if</b> (<a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>)</td></tr>
<tr><th id="2937">2937</th><td>    {</td></tr>
<tr><th id="2938">2938</th><td>	<a class="local col1 ref" href="#261p" title='p' data-ref="261p" data-ref-filename="261p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>);</td></tr>
<tr><th id="2939">2939</th><td>	<b>if</b> (<a class="local col1 ref" href="#261p" title='p' data-ref="261p" data-ref-filename="261p">p</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2940">2940</th><td>	{</td></tr>
<tr><th id="2941">2941</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: head revision %s doesn't exist"</q>, <a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>,</td></tr>
<tr><th id="2942">2942</th><td>		   <a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>);</td></tr>
<tr><th id="2943">2943</th><td>	}</td></tr>
<tr><th id="2944">2944</th><td>	<b>while</b> (<a class="local col1 ref" href="#261p" title='p' data-ref="261p" data-ref-filename="261p">p</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2945">2945</th><td>	{</td></tr>
<tr><th id="2946">2946</th><td>	    <i>/* if the date of this one is before date, take it */</i></td></tr>
<tr><th id="2947">2947</th><td>	    <a class="local col2 ref" href="#262vers" title='vers' data-ref="262vers" data-ref-filename="262vers">vers</a> = <a class="local col1 ref" href="#261p" title='p' data-ref="261p" data-ref-filename="261p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="2948">2948</th><td>	    <b>if</b> (<a class="ref fn" href="#RCS_datecmp" title='RCS_datecmp' data-ref="RCS_datecmp" data-ref-filename="RCS_datecmp">RCS_datecmp</a> (<a class="local col2 ref" href="#262vers" title='vers' data-ref="262vers" data-ref-filename="262vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>, <a class="local col7 ref" href="#257date" title='date' data-ref="257date" data-ref-filename="257date">date</a>) &lt;= <var>0</var>)</td></tr>
<tr><th id="2949">2949</th><td>	    {</td></tr>
<tr><th id="2950">2950</th><td>		<a class="local col9 ref" href="#259cur_rev" title='cur_rev' data-ref="259cur_rev" data-ref-filename="259cur_rev">cur_rev</a> = <a class="local col2 ref" href="#262vers" title='vers' data-ref="262vers" data-ref-filename="262vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>;</td></tr>
<tr><th id="2951">2951</th><td>		<b>break</b>;</td></tr>
<tr><th id="2952">2952</th><td>	    }</td></tr>
<tr><th id="2953">2953</th><td></td></tr>
<tr><th id="2954">2954</th><td>	    <i>/* if there is a next version, find the node */</i></td></tr>
<tr><th id="2955">2955</th><td>	    <b>if</b> (<a class="local col2 ref" href="#262vers" title='vers' data-ref="262vers" data-ref-filename="262vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2956">2956</th><td>		<a class="local col1 ref" href="#261p" title='p' data-ref="261p" data-ref-filename="261p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col2 ref" href="#262vers" title='vers' data-ref="262vers" data-ref-filename="262vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>);</td></tr>
<tr><th id="2957">2957</th><td>	    <b>else</b></td></tr>
<tr><th id="2958">2958</th><td>		<a class="local col1 ref" href="#261p" title='p' data-ref="261p" data-ref-filename="261p">p</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="2959">2959</th><td>	}</td></tr>
<tr><th id="2960">2960</th><td>    }</td></tr>
<tr><th id="2961">2961</th><td>    <b>else</b></td></tr>
<tr><th id="2962">2962</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: no head revision"</q>, <a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="2963">2963</th><td></td></tr>
<tr><th id="2964">2964</th><td>    <i>/*</i></td></tr>
<tr><th id="2965">2965</th><td><i>     * at this point, either we have the revision we want, or we have the</i></td></tr>
<tr><th id="2966">2966</th><td><i>     * first revision on the trunk (1.1?) in our hands, or we've come up</i></td></tr>
<tr><th id="2967">2967</th><td><i>     * completely empty</i></td></tr>
<tr><th id="2968">2968</th><td><i>     */</i></td></tr>
<tr><th id="2969">2969</th><td></td></tr>
<tr><th id="2970">2970</th><td>    <i>/* if we found what we're looking for, and it's not 1.1 return it */</i></td></tr>
<tr><th id="2971">2971</th><td>    <b>if</b> (<a class="local col9 ref" href="#259cur_rev" title='cur_rev' data-ref="259cur_rev" data-ref-filename="259cur_rev">cur_rev</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="2972">2972</th><td>    {</td></tr>
<tr><th id="2973">2973</th><td>	<b>if</b> (! <a class="macro" href="#138" title="(*(char *)(cur_rev) == *(char *)(&quot;1.1&quot;) &amp;&amp; strcmp ((cur_rev), (&quot;1.1&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#259cur_rev" title='cur_rev' data-ref="259cur_rev" data-ref-filename="259cur_rev">cur_rev</a>, <q>"1.1"</q>))</td></tr>
<tr><th id="2974">2974</th><td>	    <b>return</b> <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col9 ref" href="#259cur_rev" title='cur_rev' data-ref="259cur_rev" data-ref-filename="259cur_rev">cur_rev</a>);</td></tr>
<tr><th id="2975">2975</th><td></td></tr>
<tr><th id="2976">2976</th><td>	<i>/* This is 1.1;  if the date of 1.1 is not the same as that for the</i></td></tr>
<tr><th id="2977">2977</th><td><i>	   1.1.1.1 version, then return 1.1.  This happens when the first</i></td></tr>
<tr><th id="2978">2978</th><td><i>	   version of a file is created by a regular cvs add and commit,</i></td></tr>
<tr><th id="2979">2979</th><td><i>	   and there is a subsequent cvs import of the same file.  */</i></td></tr>
<tr><th id="2980">2980</th><td>	<a class="local col1 ref" href="#261p" title='p' data-ref="261p" data-ref-filename="261p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <q>"1.1.1.1"</q>);</td></tr>
<tr><th id="2981">2981</th><td>	<b>if</b> (<a class="local col1 ref" href="#261p" title='p' data-ref="261p" data-ref-filename="261p">p</a>)</td></tr>
<tr><th id="2982">2982</th><td>	{</td></tr>
<tr><th id="2983">2983</th><td>	    <em>char</em> *<dfn class="local col3 decl" id="263date_1_1" title='date_1_1' data-type='char *' data-ref="263date_1_1" data-ref-filename="263date_1_1">date_1_1</dfn> = <a class="local col2 ref" href="#262vers" title='vers' data-ref="262vers" data-ref-filename="262vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>;</td></tr>
<tr><th id="2984">2984</th><td></td></tr>
<tr><th id="2985">2985</th><td>	    <a class="local col2 ref" href="#262vers" title='vers' data-ref="262vers" data-ref-filename="262vers">vers</a> = <a class="local col1 ref" href="#261p" title='p' data-ref="261p" data-ref-filename="261p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="2986">2986</th><td>	    <b>if</b> (<a class="ref fn" href="#RCS_datecmp" title='RCS_datecmp' data-ref="RCS_datecmp" data-ref-filename="RCS_datecmp">RCS_datecmp</a> (<a class="local col2 ref" href="#262vers" title='vers' data-ref="262vers" data-ref-filename="262vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>, <a class="local col3 ref" href="#263date_1_1" title='date_1_1' data-ref="263date_1_1" data-ref-filename="263date_1_1">date_1_1</a>) != <var>0</var>)</td></tr>
<tr><th id="2987">2987</th><td>		<b>return</b> <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<q>"1.1"</q>);</td></tr>
<tr><th id="2988">2988</th><td>	}</td></tr>
<tr><th id="2989">2989</th><td>    }</td></tr>
<tr><th id="2990">2990</th><td></td></tr>
<tr><th id="2991">2991</th><td>    <i>/* look on the vendor branch */</i></td></tr>
<tr><th id="2992">2992</th><td>    <a class="local col0 ref" href="#260retval" title='retval' data-ref="260retval" data-ref-filename="260retval">retval</a> = <a class="tu ref fn" href="#RCS_getdatebranch" title='RCS_getdatebranch' data-use='c' data-ref="RCS_getdatebranch" data-ref-filename="RCS_getdatebranch">RCS_getdatebranch</a> (<a class="local col6 ref" href="#256rcs" title='rcs' data-ref="256rcs" data-ref-filename="256rcs">rcs</a>, <a class="local col7 ref" href="#257date" title='date' data-ref="257date" data-ref-filename="257date">date</a>, <a class="macro" href="cvs.h.html#245" title="&quot;1.1.1&quot;" data-ref="_M/CVSBRANCH">CVSBRANCH</a>);</td></tr>
<tr><th id="2993">2993</th><td></td></tr>
<tr><th id="2994">2994</th><td>    <i>/*</i></td></tr>
<tr><th id="2995">2995</th><td><i>     * if we found a match, return it; otherwise, we return the first</i></td></tr>
<tr><th id="2996">2996</th><td><i>     * revision on the trunk or NULL depending on force_tag_match and the</i></td></tr>
<tr><th id="2997">2997</th><td><i>     * date of the first rev</i></td></tr>
<tr><th id="2998">2998</th><td><i>     */</i></td></tr>
<tr><th id="2999">2999</th><td>    <b>if</b> (<a class="local col0 ref" href="#260retval" title='retval' data-ref="260retval" data-ref-filename="260retval">retval</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3000">3000</th><td>	<b>return</b> <a class="local col0 ref" href="#260retval" title='retval' data-ref="260retval" data-ref-filename="260retval">retval</a>;</td></tr>
<tr><th id="3001">3001</th><td></td></tr>
<tr><th id="3002">3002</th><td>    <b>if</b> (<a class="local col2 ref" href="#262vers" title='vers' data-ref="262vers" data-ref-filename="262vers">vers</a> &amp;&amp; (!<a class="local col8 ref" href="#258force_tag_match" title='force_tag_match' data-ref="258force_tag_match" data-ref-filename="258force_tag_match">force_tag_match</a> || <a class="ref fn" href="#RCS_datecmp" title='RCS_datecmp' data-ref="RCS_datecmp" data-ref-filename="RCS_datecmp">RCS_datecmp</a> (<a class="local col2 ref" href="#262vers" title='vers' data-ref="262vers" data-ref-filename="262vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>, <a class="local col7 ref" href="#257date" title='date' data-ref="257date" data-ref-filename="257date">date</a>) &lt;= <var>0</var>))</td></tr>
<tr><th id="3003">3003</th><td>	<b>return</b> <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col2 ref" href="#262vers" title='vers' data-ref="262vers" data-ref-filename="262vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="3004">3004</th><td>    <b>else</b></td></tr>
<tr><th id="3005">3005</th><td>	<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3006">3006</th><td>}</td></tr>
<tr><th id="3007">3007</th><td></td></tr>
<tr><th id="3008">3008</th><td></td></tr>
<tr><th id="3009">3009</th><td></td></tr>
<tr><th id="3010">3010</th><td><i  data-doc="RCS_getdatebranch">/*</i></td></tr>
<tr><th id="3011">3011</th><td><i  data-doc="RCS_getdatebranch"> * Look up the last element on a branch that was put in before or on</i></td></tr>
<tr><th id="3012">3012</th><td><i  data-doc="RCS_getdatebranch"> * the specified date and time (return the rev or NULL)</i></td></tr>
<tr><th id="3013">3013</th><td><i  data-doc="RCS_getdatebranch"> */</i></td></tr>
<tr><th id="3014">3014</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="3015">3015</th><td><dfn class="tu decl def fn" id="RCS_getdatebranch" title='RCS_getdatebranch' data-type='char * RCS_getdatebranch(RCSNode * rcs, const char * date, const char * branch)' data-ref="RCS_getdatebranch" data-ref-filename="RCS_getdatebranch">RCS_getdatebranch</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col4 decl" id="264rcs" title='rcs' data-type='RCSNode *' data-ref="264rcs" data-ref-filename="264rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col5 decl" id="265date" title='date' data-type='const char *' data-ref="265date" data-ref-filename="265date">date</dfn>, <em>const</em> <em>char</em> *<dfn class="local col6 decl" id="266branch" title='branch' data-type='const char *' data-ref="266branch" data-ref-filename="266branch">branch</dfn>)</td></tr>
<tr><th id="3016">3016</th><td>{</td></tr>
<tr><th id="3017">3017</th><td>    <em>char</em> *<dfn class="local col7 decl" id="267cur_rev" title='cur_rev' data-type='char *' data-ref="267cur_rev" data-ref-filename="267cur_rev">cur_rev</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3018">3018</th><td>    <em>char</em> *<dfn class="local col8 decl" id="268cp" title='cp' data-type='char *' data-ref="268cp" data-ref-filename="268cp">cp</dfn>;</td></tr>
<tr><th id="3019">3019</th><td>    <em>char</em> *<dfn class="local col9 decl" id="269xbranch" title='xbranch' data-type='char *' data-ref="269xbranch" data-ref-filename="269xbranch">xbranch</dfn>, *<dfn class="local col0 decl" id="270xrev" title='xrev' data-type='char *' data-ref="270xrev" data-ref-filename="270xrev">xrev</dfn>;</td></tr>
<tr><th id="3020">3020</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col1 decl" id="271p" title='p' data-type='Node *' data-ref="271p" data-ref-filename="271p">p</dfn>;</td></tr>
<tr><th id="3021">3021</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col2 decl" id="272vers" title='vers' data-type='RCSVers *' data-ref="272vers" data-ref-filename="272vers">vers</dfn>;</td></tr>
<tr><th id="3022">3022</th><td></td></tr>
<tr><th id="3023">3023</th><td>    <i>/* look up the first revision on the branch */</i></td></tr>
<tr><th id="3024">3024</th><td>    <a class="local col0 ref" href="#270xrev" title='xrev' data-ref="270xrev" data-ref-filename="270xrev">xrev</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col6 ref" href="#266branch" title='branch' data-ref="266branch" data-ref-filename="266branch">branch</a>);</td></tr>
<tr><th id="3025">3025</th><td>    <a class="local col8 ref" href="#268cp" title='cp' data-ref="268cp" data-ref-filename="268cp">cp</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col0 ref" href="#270xrev" title='xrev' data-ref="270xrev" data-ref-filename="270xrev">xrev</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="3026">3026</th><td>    <b>if</b> (<a class="local col8 ref" href="#268cp" title='cp' data-ref="268cp" data-ref-filename="268cp">cp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3027">3027</th><td>    {</td></tr>
<tr><th id="3028">3028</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col0 ref" href="#270xrev" title='xrev' data-ref="270xrev" data-ref-filename="270xrev">xrev</a>);</td></tr>
<tr><th id="3029">3029</th><td>	<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3030">3030</th><td>    }</td></tr>
<tr><th id="3031">3031</th><td>    *<a class="local col8 ref" href="#268cp" title='cp' data-ref="268cp" data-ref-filename="268cp">cp</a> = <kbd>'\0'</kbd>;				<i>/* turn it into a revision */</i></td></tr>
<tr><th id="3032">3032</th><td></td></tr>
<tr><th id="3033">3033</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 3033, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col4 ref" href="#264rcs" title='rcs' data-ref="264rcs" data-ref-filename="264rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="3034">3034</th><td></td></tr>
<tr><th id="3035">3035</th><td>    <b>if</b> (<a class="local col4 ref" href="#264rcs" title='rcs' data-ref="264rcs" data-ref-filename="264rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="3036">3036</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col4 ref" href="#264rcs" title='rcs' data-ref="264rcs" data-ref-filename="264rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="3037">3037</th><td></td></tr>
<tr><th id="3038">3038</th><td>    <a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col4 ref" href="#264rcs" title='rcs' data-ref="264rcs" data-ref-filename="264rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col0 ref" href="#270xrev" title='xrev' data-ref="270xrev" data-ref-filename="270xrev">xrev</a>);</td></tr>
<tr><th id="3039">3039</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col0 ref" href="#270xrev" title='xrev' data-ref="270xrev" data-ref-filename="270xrev">xrev</a>);</td></tr>
<tr><th id="3040">3040</th><td>    <b>if</b> (<a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3041">3041</th><td>	<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3042">3042</th><td>    <a class="local col2 ref" href="#272vers" title='vers' data-ref="272vers" data-ref-filename="272vers">vers</a> = <a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="3043">3043</th><td></td></tr>
<tr><th id="3044">3044</th><td>    <i>/* Tentatively use this revision, if it is early enough.  */</i></td></tr>
<tr><th id="3045">3045</th><td>    <b>if</b> (<a class="ref fn" href="#RCS_datecmp" title='RCS_datecmp' data-ref="RCS_datecmp" data-ref-filename="RCS_datecmp">RCS_datecmp</a> (<a class="local col2 ref" href="#272vers" title='vers' data-ref="272vers" data-ref-filename="272vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>, <a class="local col5 ref" href="#265date" title='date' data-ref="265date" data-ref-filename="265date">date</a>) &lt;= <var>0</var>)</td></tr>
<tr><th id="3046">3046</th><td>	<a class="local col7 ref" href="#267cur_rev" title='cur_rev' data-ref="267cur_rev" data-ref-filename="267cur_rev">cur_rev</a> = <a class="local col2 ref" href="#272vers" title='vers' data-ref="272vers" data-ref-filename="272vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>;</td></tr>
<tr><th id="3047">3047</th><td></td></tr>
<tr><th id="3048">3048</th><td>    <i>/* If no branches list, return now.  This is what happens if the branch</i></td></tr>
<tr><th id="3049">3049</th><td><i>       is a (magic) branch with no revisions yet.  */</i></td></tr>
<tr><th id="3050">3050</th><td>    <b>if</b> (<a class="local col2 ref" href="#272vers" title='vers' data-ref="272vers" data-ref-filename="272vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3051">3051</th><td>	<b>return</b> <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col7 ref" href="#267cur_rev" title='cur_rev' data-ref="267cur_rev" data-ref-filename="267cur_rev">cur_rev</a>);</td></tr>
<tr><th id="3052">3052</th><td></td></tr>
<tr><th id="3053">3053</th><td>    <i>/* walk the branches list looking for the branch number */</i></td></tr>
<tr><th id="3054">3054</th><td>    <a class="local col9 ref" href="#269xbranch" title='xbranch' data-ref="269xbranch" data-ref-filename="269xbranch">xbranch</a> = <a class="ref fn" href="subr.h.html#Xasprintf" title='Xasprintf' data-ref="Xasprintf" data-ref-filename="Xasprintf">Xasprintf</a> (<q>"%s."</q>, <a class="local col6 ref" href="#266branch" title='branch' data-ref="266branch" data-ref-filename="266branch">branch</a>);</td></tr>
<tr><th id="3055">3055</th><td>    <b>for</b> (<a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a> = <a class="local col2 ref" href="#272vers" title='vers' data-ref="272vers" data-ref-filename="272vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>; <a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a> != <a class="local col2 ref" href="#272vers" title='vers' data-ref="272vers" data-ref-filename="272vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>; <a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a> = <a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>)</td></tr>
<tr><th id="3056">3056</th><td>	<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>, <a class="local col9 ref" href="#269xbranch" title='xbranch' data-ref="269xbranch" data-ref-filename="269xbranch">xbranch</a>, <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col9 ref" href="#269xbranch" title='xbranch' data-ref="269xbranch" data-ref-filename="269xbranch">xbranch</a>)) == <var>0</var>)</td></tr>
<tr><th id="3057">3057</th><td>	    <b>break</b>;</td></tr>
<tr><th id="3058">3058</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col9 ref" href="#269xbranch" title='xbranch' data-ref="269xbranch" data-ref-filename="269xbranch">xbranch</a>);</td></tr>
<tr><th id="3059">3059</th><td>    <b>if</b> (<a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a> == <a class="local col2 ref" href="#272vers" title='vers' data-ref="272vers" data-ref-filename="272vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>)</td></tr>
<tr><th id="3060">3060</th><td>    {</td></tr>
<tr><th id="3061">3061</th><td>	<i>/* This is what happens if the branch is a (magic) branch with</i></td></tr>
<tr><th id="3062">3062</th><td><i>	   no revisions yet.  Similar to the case where vers-&gt;branches ==</i></td></tr>
<tr><th id="3063">3063</th><td><i>	   NULL, except here there was a another branch off the same</i></td></tr>
<tr><th id="3064">3064</th><td><i>	   branchpoint.  */</i></td></tr>
<tr><th id="3065">3065</th><td>	<b>return</b> <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col7 ref" href="#267cur_rev" title='cur_rev' data-ref="267cur_rev" data-ref-filename="267cur_rev">cur_rev</a>);</td></tr>
<tr><th id="3066">3066</th><td>    }</td></tr>
<tr><th id="3067">3067</th><td></td></tr>
<tr><th id="3068">3068</th><td>    <a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col4 ref" href="#264rcs" title='rcs' data-ref="264rcs" data-ref-filename="264rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>);</td></tr>
<tr><th id="3069">3069</th><td></td></tr>
<tr><th id="3070">3070</th><td>    <i>/* walk the next pointers until you find the end, or the date is too late */</i></td></tr>
<tr><th id="3071">3071</th><td>    <b>while</b> (<a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3072">3072</th><td>    {</td></tr>
<tr><th id="3073">3073</th><td>	<a class="local col2 ref" href="#272vers" title='vers' data-ref="272vers" data-ref-filename="272vers">vers</a> = <a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="3074">3074</th><td>	<b>if</b> (<a class="ref fn" href="#RCS_datecmp" title='RCS_datecmp' data-ref="RCS_datecmp" data-ref-filename="RCS_datecmp">RCS_datecmp</a> (<a class="local col2 ref" href="#272vers" title='vers' data-ref="272vers" data-ref-filename="272vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>, <a class="local col5 ref" href="#265date" title='date' data-ref="265date" data-ref-filename="265date">date</a>) &lt;= <var>0</var>)</td></tr>
<tr><th id="3075">3075</th><td>	    <a class="local col7 ref" href="#267cur_rev" title='cur_rev' data-ref="267cur_rev" data-ref-filename="267cur_rev">cur_rev</a> = <a class="local col2 ref" href="#272vers" title='vers' data-ref="272vers" data-ref-filename="272vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>;</td></tr>
<tr><th id="3076">3076</th><td>	<b>else</b></td></tr>
<tr><th id="3077">3077</th><td>	    <b>break</b>;</td></tr>
<tr><th id="3078">3078</th><td></td></tr>
<tr><th id="3079">3079</th><td>	<i>/* if there is a next version, find the node */</i></td></tr>
<tr><th id="3080">3080</th><td>	<b>if</b> (<a class="local col2 ref" href="#272vers" title='vers' data-ref="272vers" data-ref-filename="272vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3081">3081</th><td>	    <a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col4 ref" href="#264rcs" title='rcs' data-ref="264rcs" data-ref-filename="264rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col2 ref" href="#272vers" title='vers' data-ref="272vers" data-ref-filename="272vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>);</td></tr>
<tr><th id="3082">3082</th><td>	<b>else</b></td></tr>
<tr><th id="3083">3083</th><td>	    <a class="local col1 ref" href="#271p" title='p' data-ref="271p" data-ref-filename="271p">p</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3084">3084</th><td>    }</td></tr>
<tr><th id="3085">3085</th><td></td></tr>
<tr><th id="3086">3086</th><td>    <i>/* Return whatever we found, which may be NULL.  */</i></td></tr>
<tr><th id="3087">3087</th><td>    <b>return</b> <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col7 ref" href="#267cur_rev" title='cur_rev' data-ref="267cur_rev" data-ref-filename="267cur_rev">cur_rev</a>);</td></tr>
<tr><th id="3088">3088</th><td>}</td></tr>
<tr><th id="3089">3089</th><td></td></tr>
<tr><th id="3090">3090</th><td></td></tr>
<tr><th id="3091">3091</th><td></td></tr>
<tr><th id="3092">3092</th><td><i>/*</i></td></tr>
<tr><th id="3093">3093</th><td><i> * Compare two dates in RCS format. Beware the change in format on January 1,</i></td></tr>
<tr><th id="3094">3094</th><td><i> * 2000, when years go from 2-digit to full format.</i></td></tr>
<tr><th id="3095">3095</th><td><i> */</i></td></tr>
<tr><th id="3096">3096</th><td><em>int</em></td></tr>
<tr><th id="3097">3097</th><td><dfn class="decl def fn" id="RCS_datecmp" title='RCS_datecmp' data-ref="RCS_datecmp" data-ref-filename="RCS_datecmp">RCS_datecmp</dfn> (<em>const</em> <em>char</em> *<dfn class="local col3 decl" id="273date1" title='date1' data-type='const char *' data-ref="273date1" data-ref-filename="273date1">date1</dfn>, <em>const</em> <em>char</em> *<dfn class="local col4 decl" id="274date2" title='date2' data-type='const char *' data-ref="274date2" data-ref-filename="274date2">date2</dfn>)</td></tr>
<tr><th id="3098">3098</th><td>{</td></tr>
<tr><th id="3099">3099</th><td>    <em>int</em> <dfn class="local col5 decl" id="275length_diff" title='length_diff' data-type='int' data-ref="275length_diff" data-ref-filename="275length_diff">length_diff</dfn> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col3 ref" href="#273date1" title='date1' data-ref="273date1" data-ref-filename="273date1">date1</a>) - <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col4 ref" href="#274date2" title='date2' data-ref="274date2" data-ref-filename="274date2">date2</a>);</td></tr>
<tr><th id="3100">3100</th><td></td></tr>
<tr><th id="3101">3101</th><td>    <b>return</b> <a class="local col5 ref" href="#275length_diff" title='length_diff' data-ref="275length_diff" data-ref-filename="275length_diff">length_diff</a> ? <a class="local col5 ref" href="#275length_diff" title='length_diff' data-ref="275length_diff" data-ref-filename="275length_diff">length_diff</a> : <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcmp" title='strcmp' data-ref="strcmp" data-ref-filename="strcmp">strcmp</a> (<a class="local col3 ref" href="#273date1" title='date1' data-ref="273date1" data-ref-filename="273date1">date1</a>, <a class="local col4 ref" href="#274date2" title='date2' data-ref="274date2" data-ref-filename="274date2">date2</a>);</td></tr>
<tr><th id="3102">3102</th><td>}</td></tr>
<tr><th id="3103">3103</th><td></td></tr>
<tr><th id="3104">3104</th><td></td></tr>
<tr><th id="3105">3105</th><td></td></tr>
<tr><th id="3106">3106</th><td><i>/* Look up revision REV in RCS and return the date specified for the</i></td></tr>
<tr><th id="3107">3107</th><td><i>   revision minus FUDGE seconds (FUDGE will generally be one, so that the</i></td></tr>
<tr><th id="3108">3108</th><td><i>   logically previous revision will be found later, or zero, if we want</i></td></tr>
<tr><th id="3109">3109</th><td><i>   the exact date).</i></td></tr>
<tr><th id="3110">3110</th><td><i></i></td></tr>
<tr><th id="3111">3111</th><td><i>   The return value is the date being returned as a time_t, or (time_t)-1</i></td></tr>
<tr><th id="3112">3112</th><td><i>   on error (previously was documented as zero on error; I haven't checked</i></td></tr>
<tr><th id="3113">3113</th><td><i>   the callers to make sure that they really check for (time_t)-1, but</i></td></tr>
<tr><th id="3114">3114</th><td><i>   the latter is what this function really returns).  If DATE is non-NULL,</i></td></tr>
<tr><th id="3115">3115</th><td><i>   then it must point to MAXDATELEN characters, and we store the same</i></td></tr>
<tr><th id="3116">3116</th><td><i>   return value there in DATEFORM format.  */</i></td></tr>
<tr><th id="3117">3117</th><td><a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#time_t" title='time_t' data-type='__int64_t' data-ref="time_t" data-ref-filename="time_t">time_t</a></td></tr>
<tr><th id="3118">3118</th><td><dfn class="decl def fn" id="RCS_getrevtime" title='RCS_getrevtime' data-ref="RCS_getrevtime" data-ref-filename="RCS_getrevtime">RCS_getrevtime</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col6 decl" id="276rcs" title='rcs' data-type='RCSNode *' data-ref="276rcs" data-ref-filename="276rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col7 decl" id="277rev" title='rev' data-type='const char *' data-ref="277rev" data-ref-filename="277rev">rev</dfn>, <em>char</em> *<dfn class="local col8 decl" id="278date" title='date' data-type='char *' data-ref="278date" data-ref-filename="278date">date</dfn>, <em>int</em> <dfn class="local col9 decl" id="279fudge" title='fudge' data-type='int' data-ref="279fudge" data-ref-filename="279fudge">fudge</dfn>)</td></tr>
<tr><th id="3119">3119</th><td>{</td></tr>
<tr><th id="3120">3120</th><td>    <em>char</em> *<dfn class="local col0 decl" id="280tdate" title='tdate' data-type='char *' data-ref="280tdate" data-ref-filename="280tdate">tdate</dfn>;</td></tr>
<tr><th id="3121">3121</th><td>    <b>struct</b> <a class="type" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm" title='tm' data-ref="tm" data-ref-filename="tm">tm</a> <dfn class="local col1 decl" id="281xtm" title='xtm' data-type='struct tm' data-ref="281xtm" data-ref-filename="281xtm">xtm</dfn>, *<dfn class="local col2 decl" id="282ftm" title='ftm' data-type='struct tm *' data-ref="282ftm" data-ref-filename="282ftm">ftm</dfn>;</td></tr>
<tr><th id="3122">3122</th><td>    <b>struct</b> <a class="type" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/timespec.h.html#timespec" title='timespec' data-ref="timespec" data-ref-filename="timespec">timespec</a> <dfn class="local col3 decl" id="283revdate" title='revdate' data-type='struct timespec' data-ref="283revdate" data-ref-filename="283revdate">revdate</dfn>;</td></tr>
<tr><th id="3123">3123</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col4 decl" id="284p" title='p' data-type='Node *' data-ref="284p" data-ref-filename="284p">p</dfn>;</td></tr>
<tr><th id="3124">3124</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col5 decl" id="285vers" title='vers' data-type='RCSVers *' data-ref="285vers" data-ref-filename="285vers">vers</dfn>;</td></tr>
<tr><th id="3125">3125</th><td></td></tr>
<tr><th id="3126">3126</th><td>    <i>/* make sure we have something to look at... */</i></td></tr>
<tr><th id="3127">3127</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 3127, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col6 ref" href="#276rcs" title='rcs' data-ref="276rcs" data-ref-filename="276rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="3128">3128</th><td></td></tr>
<tr><th id="3129">3129</th><td>    <b>if</b> (<a class="local col6 ref" href="#276rcs" title='rcs' data-ref="276rcs" data-ref-filename="276rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="3130">3130</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col6 ref" href="#276rcs" title='rcs' data-ref="276rcs" data-ref-filename="276rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="3131">3131</th><td></td></tr>
<tr><th id="3132">3132</th><td>    <i>/* look up the revision */</i></td></tr>
<tr><th id="3133">3133</th><td>    <a class="local col4 ref" href="#284p" title='p' data-ref="284p" data-ref-filename="284p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#276rcs" title='rcs' data-ref="276rcs" data-ref-filename="276rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col7 ref" href="#277rev" title='rev' data-ref="277rev" data-ref-filename="277rev">rev</a>);</td></tr>
<tr><th id="3134">3134</th><td>    <b>if</b> (<a class="local col4 ref" href="#284p" title='p' data-ref="284p" data-ref-filename="284p">p</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3135">3135</th><td>	<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="3136">3136</th><td>    <a class="local col5 ref" href="#285vers" title='vers' data-ref="285vers" data-ref-filename="285vers">vers</a> = <a class="local col4 ref" href="#284p" title='p' data-ref="284p" data-ref-filename="284p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="3137">3137</th><td></td></tr>
<tr><th id="3138">3138</th><td>    <i>/* split up the date */</i></td></tr>
<tr><th id="3139">3139</th><td>    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sscanf" title='sscanf' data-ref="sscanf" data-ref-filename="sscanf">sscanf</a> (<a class="local col5 ref" href="#285vers" title='vers' data-ref="285vers" data-ref-filename="285vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>, <a class="macro" href="rcs.h.html#37" title="&quot;%d.%d.%d.%d.%d.%d&quot;" data-ref="_M/SDATEFORM">SDATEFORM</a>, &amp;<a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_year" title='tm::tm_year' data-ref="tm::tm_year" data-ref-filename="tm..tm_year">tm_year</a>, &amp;<a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_mon" title='tm::tm_mon' data-ref="tm::tm_mon" data-ref-filename="tm..tm_mon">tm_mon</a>,</td></tr>
<tr><th id="3140">3140</th><td>		&amp;<a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_mday" title='tm::tm_mday' data-ref="tm::tm_mday" data-ref-filename="tm..tm_mday">tm_mday</a>, &amp;<a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_hour" title='tm::tm_hour' data-ref="tm::tm_hour" data-ref-filename="tm..tm_hour">tm_hour</a>, &amp;<a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_min" title='tm::tm_min' data-ref="tm::tm_min" data-ref-filename="tm..tm_min">tm_min</a>, &amp;<a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_sec" title='tm::tm_sec' data-ref="tm::tm_sec" data-ref-filename="tm..tm_sec">tm_sec</a>) != <var>6</var>)</td></tr>
<tr><th id="3141">3141</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"%s: invalid date for revision %s (%s)"</q>, <a class="local col6 ref" href="#276rcs" title='rcs' data-ref="276rcs" data-ref-filename="276rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>,</td></tr>
<tr><th id="3142">3142</th><td>	       <a class="local col7 ref" href="#277rev" title='rev' data-ref="277rev" data-ref-filename="277rev">rev</a>, <a class="local col5 ref" href="#285vers" title='vers' data-ref="285vers" data-ref-filename="285vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>);</td></tr>
<tr><th id="3143">3143</th><td></td></tr>
<tr><th id="3144">3144</th><td>    <i>/* If the year is from 1900 to 1999, RCS files contain only two</i></td></tr>
<tr><th id="3145">3145</th><td><i>       digits, and sscanf gives us a year from 0-99.  If the year is</i></td></tr>
<tr><th id="3146">3146</th><td><i>       2000+, RCS files contain all four digits and we subtract 1900,</i></td></tr>
<tr><th id="3147">3147</th><td><i>       because the tm_year field should contain years since 1900.  */</i></td></tr>
<tr><th id="3148">3148</th><td></td></tr>
<tr><th id="3149">3149</th><td>    <b>if</b> (<a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_year" title='tm::tm_year' data-ref="tm::tm_year" data-ref-filename="tm..tm_year">tm_year</a> &gt;= <var>100</var> &amp;&amp; <a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_year" title='tm::tm_year' data-ref="tm::tm_year" data-ref-filename="tm..tm_year">tm_year</a> &lt; <var>2000</var>)</td></tr>
<tr><th id="3150">3150</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: non-standard date format for revision %s (%s)"</q>,</td></tr>
<tr><th id="3151">3151</th><td>	       <a class="local col6 ref" href="#276rcs" title='rcs' data-ref="276rcs" data-ref-filename="276rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col7 ref" href="#277rev" title='rev' data-ref="277rev" data-ref-filename="277rev">rev</a>, <a class="local col5 ref" href="#285vers" title='vers' data-ref="285vers" data-ref-filename="285vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>);</td></tr>
<tr><th id="3152">3152</th><td>    <b>if</b> (<a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_year" title='tm::tm_year' data-ref="tm::tm_year" data-ref-filename="tm..tm_year">tm_year</a> &gt;= <var>1900</var>)</td></tr>
<tr><th id="3153">3153</th><td>	<a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_year" title='tm::tm_year' data-ref="tm::tm_year" data-ref-filename="tm..tm_year">tm_year</a> -= <var>1900</var>;</td></tr>
<tr><th id="3154">3154</th><td></td></tr>
<tr><th id="3155">3155</th><td>    <i>/* put the date in a form getdate can grok */</i></td></tr>
<tr><th id="3156">3156</th><td>    <a class="local col0 ref" href="#280tdate" title='tdate' data-ref="280tdate" data-ref-filename="280tdate">tdate</a> = <a class="ref fn" href="subr.h.html#Xasprintf" title='Xasprintf' data-ref="Xasprintf" data-ref-filename="Xasprintf">Xasprintf</a> (<q>"%d-%d-%d %d:%d:%d -0000"</q>,</td></tr>
<tr><th id="3157">3157</th><td>		       <a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_year" title='tm::tm_year' data-ref="tm::tm_year" data-ref-filename="tm..tm_year">tm_year</a> + <var>1900</var>, <a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_mon" title='tm::tm_mon' data-ref="tm::tm_mon" data-ref-filename="tm..tm_mon">tm_mon</a>, <a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_mday" title='tm::tm_mday' data-ref="tm::tm_mday" data-ref-filename="tm..tm_mday">tm_mday</a>,</td></tr>
<tr><th id="3158">3158</th><td>		       <a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_hour" title='tm::tm_hour' data-ref="tm::tm_hour" data-ref-filename="tm..tm_hour">tm_hour</a>, <a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_min" title='tm::tm_min' data-ref="tm::tm_min" data-ref-filename="tm..tm_min">tm_min</a>, <a class="local col1 ref" href="#281xtm" title='xtm' data-ref="281xtm" data-ref-filename="281xtm">xtm</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_sec" title='tm::tm_sec' data-ref="tm::tm_sec" data-ref-filename="tm..tm_sec">tm_sec</a>);</td></tr>
<tr><th id="3159">3159</th><td></td></tr>
<tr><th id="3160">3160</th><td>    <i>/* Turn it into seconds since the epoch.</i></td></tr>
<tr><th id="3161">3161</th><td><i>     *</i></td></tr>
<tr><th id="3162">3162</th><td><i>     * We use a struct timespec since that is what getdate requires, then</i></td></tr>
<tr><th id="3163">3163</th><td><i>     * truncate the nanoseconds.</i></td></tr>
<tr><th id="3164">3164</th><td><i>     */</i></td></tr>
<tr><th id="3165">3165</th><td>    <b>if</b> (!<a class="ref fn" href="../lib/getdate.h.html#get_date" title='get_date' data-ref="get_date" data-ref-filename="get_date">get_date</a> (&amp;<a class="local col3 ref" href="#283revdate" title='revdate' data-ref="283revdate" data-ref-filename="283revdate">revdate</a>, <a class="local col0 ref" href="#280tdate" title='tdate' data-ref="280tdate" data-ref-filename="280tdate">tdate</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>))</td></tr>
<tr><th id="3166">3166</th><td>    {</td></tr>
<tr><th id="3167">3167</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col0 ref" href="#280tdate" title='tdate' data-ref="280tdate" data-ref-filename="280tdate">tdate</a>);</td></tr>
<tr><th id="3168">3168</th><td>	<b>return</b> (<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#time_t" title='time_t' data-type='__int64_t' data-ref="time_t" data-ref-filename="time_t">time_t</a>)-<var>1</var>;</td></tr>
<tr><th id="3169">3169</th><td>    }</td></tr>
<tr><th id="3170">3170</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col0 ref" href="#280tdate" title='tdate' data-ref="280tdate" data-ref-filename="280tdate">tdate</a>);</td></tr>
<tr><th id="3171">3171</th><td></td></tr>
<tr><th id="3172">3172</th><td>    <a class="local col3 ref" href="#283revdate" title='revdate' data-ref="283revdate" data-ref-filename="283revdate">revdate</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/timespec.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec" data-ref-filename="timespec..tv_sec">tv_sec</a> -= <a class="local col9 ref" href="#279fudge" title='fudge' data-ref="279fudge" data-ref-filename="279fudge">fudge</a>;	<i>/* remove "fudge" seconds */</i></td></tr>
<tr><th id="3173">3173</th><td>    <b>if</b> (<a class="local col8 ref" href="#278date" title='date' data-ref="278date" data-ref-filename="278date">date</a>)</td></tr>
<tr><th id="3174">3174</th><td>    {</td></tr>
<tr><th id="3175">3175</th><td>	<i>/* Put an appropriate string into `date', if we were given one. */</i></td></tr>
<tr><th id="3176">3176</th><td>	<a class="local col2 ref" href="#282ftm" title='ftm' data-ref="282ftm" data-ref-filename="282ftm">ftm</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#__gmtime50" title='gmtime' data-ref="__gmtime50" data-ref-filename="__gmtime50">gmtime</a> (&amp;<a class="local col3 ref" href="#283revdate" title='revdate' data-ref="283revdate" data-ref-filename="283revdate">revdate</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/timespec.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec" data-ref-filename="timespec..tv_sec">tv_sec</a>);</td></tr>
<tr><th id="3177">3177</th><td>	(<em>void</em>) <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sprintf" title='sprintf' data-ref="sprintf" data-ref-filename="sprintf">sprintf</a> (<a class="local col8 ref" href="#278date" title='date' data-ref="278date" data-ref-filename="278date">date</a>, <a class="macro" href="rcs.h.html#36" title="&quot;%02d.%02d.%02d.%02d.%02d.%02d&quot;" data-ref="_M/DATEFORM">DATEFORM</a>,</td></tr>
<tr><th id="3178">3178</th><td>			<a class="local col2 ref" href="#282ftm" title='ftm' data-ref="282ftm" data-ref-filename="282ftm">ftm</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_year" title='tm::tm_year' data-ref="tm::tm_year" data-ref-filename="tm..tm_year">tm_year</a> + (<a class="local col2 ref" href="#282ftm" title='ftm' data-ref="282ftm" data-ref-filename="282ftm">ftm</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_year" title='tm::tm_year' data-ref="tm::tm_year" data-ref-filename="tm..tm_year">tm_year</a> &lt; <var>100</var> ? <var>0</var> : <var>1900</var>),</td></tr>
<tr><th id="3179">3179</th><td>			<a class="local col2 ref" href="#282ftm" title='ftm' data-ref="282ftm" data-ref-filename="282ftm">ftm</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_mon" title='tm::tm_mon' data-ref="tm::tm_mon" data-ref-filename="tm..tm_mon">tm_mon</a> + <var>1</var>, <a class="local col2 ref" href="#282ftm" title='ftm' data-ref="282ftm" data-ref-filename="282ftm">ftm</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_mday" title='tm::tm_mday' data-ref="tm::tm_mday" data-ref-filename="tm..tm_mday">tm_mday</a>, <a class="local col2 ref" href="#282ftm" title='ftm' data-ref="282ftm" data-ref-filename="282ftm">ftm</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_hour" title='tm::tm_hour' data-ref="tm::tm_hour" data-ref-filename="tm..tm_hour">tm_hour</a>,</td></tr>
<tr><th id="3180">3180</th><td>			<a class="local col2 ref" href="#282ftm" title='ftm' data-ref="282ftm" data-ref-filename="282ftm">ftm</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_min" title='tm::tm_min' data-ref="tm::tm_min" data-ref-filename="tm..tm_min">tm_min</a>, <a class="local col2 ref" href="#282ftm" title='ftm' data-ref="282ftm" data-ref-filename="282ftm">ftm</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_sec" title='tm::tm_sec' data-ref="tm::tm_sec" data-ref-filename="tm..tm_sec">tm_sec</a>);</td></tr>
<tr><th id="3181">3181</th><td>    }</td></tr>
<tr><th id="3182">3182</th><td></td></tr>
<tr><th id="3183">3183</th><td>    <b>return</b> <a class="local col3 ref" href="#283revdate" title='revdate' data-ref="283revdate" data-ref-filename="283revdate">revdate</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/timespec.h.html#timespec::tv_sec" title='timespec::tv_sec' data-ref="timespec::tv_sec" data-ref-filename="timespec..tv_sec">tv_sec</a>;</td></tr>
<tr><th id="3184">3184</th><td>}</td></tr>
<tr><th id="3185">3185</th><td></td></tr>
<tr><th id="3186">3186</th><td></td></tr>
<tr><th id="3187">3187</th><td></td></tr>
<tr><th id="3188">3188</th><td><a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> *</td></tr>
<tr><th id="3189">3189</th><td><dfn class="decl def fn" id="RCS_getlocks" title='RCS_getlocks' data-ref="RCS_getlocks" data-ref-filename="RCS_getlocks">RCS_getlocks</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col6 decl" id="286rcs" title='rcs' data-type='RCSNode *' data-ref="286rcs" data-ref-filename="286rcs">rcs</dfn>)</td></tr>
<tr><th id="3190">3190</th><td>{</td></tr>
<tr><th id="3191">3191</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 3191, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a>(<a class="local col6 ref" href="#286rcs" title='rcs' data-ref="286rcs" data-ref-filename="286rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="3192">3192</th><td></td></tr>
<tr><th id="3193">3193</th><td>    <b>if</b> (<a class="local col6 ref" href="#286rcs" title='rcs' data-ref="286rcs" data-ref-filename="286rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="3194">3194</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col6 ref" href="#286rcs" title='rcs' data-ref="286rcs" data-ref-filename="286rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="3195">3195</th><td></td></tr>
<tr><th id="3196">3196</th><td>    <b>if</b> (<a class="local col6 ref" href="#286rcs" title='rcs' data-ref="286rcs" data-ref-filename="286rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks_data" title='rcsnode::locks_data' data-ref="rcsnode::locks_data" data-ref-filename="rcsnode..locks_data">locks_data</a>) {</td></tr>
<tr><th id="3197">3197</th><td>	<a class="local col6 ref" href="#286rcs" title='rcs' data-ref="286rcs" data-ref-filename="286rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks" title='rcsnode::locks' data-ref="rcsnode::locks" data-ref-filename="rcsnode..locks">locks</a> = <a class="ref fn" href="hash.h.html#getlist" title='getlist' data-ref="getlist" data-ref-filename="getlist">getlist</a> ();</td></tr>
<tr><th id="3198">3198</th><td>	<a class="tu ref fn" href="#do_locks" title='do_locks' data-use='c' data-ref="do_locks" data-ref-filename="do_locks">do_locks</a> (<a class="local col6 ref" href="#286rcs" title='rcs' data-ref="286rcs" data-ref-filename="286rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks" title='rcsnode::locks' data-ref="rcsnode::locks" data-ref-filename="rcsnode..locks">locks</a>, <a class="local col6 ref" href="#286rcs" title='rcs' data-ref="286rcs" data-ref-filename="286rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks_data" title='rcsnode::locks_data' data-ref="rcsnode::locks_data" data-ref-filename="rcsnode..locks_data">locks_data</a>);</td></tr>
<tr><th id="3199">3199</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a>(<a class="local col6 ref" href="#286rcs" title='rcs' data-ref="286rcs" data-ref-filename="286rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks_data" title='rcsnode::locks_data' data-ref="rcsnode::locks_data" data-ref-filename="rcsnode..locks_data">locks_data</a>);</td></tr>
<tr><th id="3200">3200</th><td>	<a class="local col6 ref" href="#286rcs" title='rcs' data-ref="286rcs" data-ref-filename="286rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks_data" title='rcsnode::locks_data' data-ref="rcsnode::locks_data" data-ref-filename="rcsnode..locks_data">locks_data</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3201">3201</th><td>    }</td></tr>
<tr><th id="3202">3202</th><td></td></tr>
<tr><th id="3203">3203</th><td>    <b>return</b> <a class="local col6 ref" href="#286rcs" title='rcs' data-ref="286rcs" data-ref-filename="286rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks" title='rcsnode::locks' data-ref="rcsnode::locks" data-ref-filename="rcsnode..locks">locks</a>;</td></tr>
<tr><th id="3204">3204</th><td>}</td></tr>
<tr><th id="3205">3205</th><td></td></tr>
<tr><th id="3206">3206</th><td></td></tr>
<tr><th id="3207">3207</th><td></td></tr>
<tr><th id="3208">3208</th><td><a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> *</td></tr>
<tr><th id="3209">3209</th><td><dfn class="decl def fn" id="RCS_symbols" title='RCS_symbols' data-ref="RCS_symbols" data-ref-filename="RCS_symbols">RCS_symbols</dfn>(<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col7 decl" id="287rcs" title='rcs' data-type='RCSNode *' data-ref="287rcs" data-ref-filename="287rcs">rcs</dfn>)</td></tr>
<tr><th id="3210">3210</th><td>{</td></tr>
<tr><th id="3211">3211</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 3211, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a>(<a class="local col7 ref" href="#287rcs" title='rcs' data-ref="287rcs" data-ref-filename="287rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="3212">3212</th><td></td></tr>
<tr><th id="3213">3213</th><td>    <b>if</b> (<a class="local col7 ref" href="#287rcs" title='rcs' data-ref="287rcs" data-ref-filename="287rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="3214">3214</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col7 ref" href="#287rcs" title='rcs' data-ref="287rcs" data-ref-filename="287rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="3215">3215</th><td></td></tr>
<tr><th id="3216">3216</th><td>    <b>if</b> (<a class="local col7 ref" href="#287rcs" title='rcs' data-ref="287rcs" data-ref-filename="287rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a>) {</td></tr>
<tr><th id="3217">3217</th><td>	<a class="local col7 ref" href="#287rcs" title='rcs' data-ref="287rcs" data-ref-filename="287rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols" title='rcsnode::symbols' data-ref="rcsnode::symbols" data-ref-filename="rcsnode..symbols">symbols</a> = <a class="ref fn" href="hash.h.html#getlist" title='getlist' data-ref="getlist" data-ref-filename="getlist">getlist</a> ();</td></tr>
<tr><th id="3218">3218</th><td>	<a class="tu ref fn" href="#do_symbols" title='do_symbols' data-use='c' data-ref="do_symbols" data-ref-filename="do_symbols">do_symbols</a> (<a class="local col7 ref" href="#287rcs" title='rcs' data-ref="287rcs" data-ref-filename="287rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols" title='rcsnode::symbols' data-ref="rcsnode::symbols" data-ref-filename="rcsnode..symbols">symbols</a>, <a class="local col7 ref" href="#287rcs" title='rcs' data-ref="287rcs" data-ref-filename="287rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a>);</td></tr>
<tr><th id="3219">3219</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a>(<a class="local col7 ref" href="#287rcs" title='rcs' data-ref="287rcs" data-ref-filename="287rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a>);</td></tr>
<tr><th id="3220">3220</th><td>	<a class="local col7 ref" href="#287rcs" title='rcs' data-ref="287rcs" data-ref-filename="287rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3221">3221</th><td>    }</td></tr>
<tr><th id="3222">3222</th><td></td></tr>
<tr><th id="3223">3223</th><td>    <b>return</b> <a class="local col7 ref" href="#287rcs" title='rcs' data-ref="287rcs" data-ref-filename="287rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols" title='rcsnode::symbols' data-ref="rcsnode::symbols" data-ref-filename="rcsnode..symbols">symbols</a>;</td></tr>
<tr><th id="3224">3224</th><td>}</td></tr>
<tr><th id="3225">3225</th><td></td></tr>
<tr><th id="3226">3226</th><td></td></tr>
<tr><th id="3227">3227</th><td></td></tr>
<tr><th id="3228">3228</th><td><i  data-doc="translate_symtag">/*</i></td></tr>
<tr><th id="3229">3229</th><td><i  data-doc="translate_symtag"> * Return the version associated with a particular symbolic tag.</i></td></tr>
<tr><th id="3230">3230</th><td><i  data-doc="translate_symtag"> * Returns NULL or a newly malloc'd string.</i></td></tr>
<tr><th id="3231">3231</th><td><i  data-doc="translate_symtag"> */</i></td></tr>
<tr><th id="3232">3232</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="3233">3233</th><td><dfn class="tu decl def fn" id="translate_symtag" title='translate_symtag' data-type='char * translate_symtag(RCSNode * rcs, const char * tag)' data-ref="translate_symtag" data-ref-filename="translate_symtag">translate_symtag</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col8 decl" id="288rcs" title='rcs' data-type='RCSNode *' data-ref="288rcs" data-ref-filename="288rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col9 decl" id="289tag" title='tag' data-type='const char *' data-ref="289tag" data-ref-filename="289tag">tag</dfn>)</td></tr>
<tr><th id="3234">3234</th><td>{</td></tr>
<tr><th id="3235">3235</th><td>    <b>if</b> (<a class="local col8 ref" href="#288rcs" title='rcs' data-ref="288rcs" data-ref-filename="288rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="3236">3236</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col8 ref" href="#288rcs" title='rcs' data-ref="288rcs" data-ref-filename="288rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="3237">3237</th><td></td></tr>
<tr><th id="3238">3238</th><td>    <b>if</b> (<a class="local col8 ref" href="#288rcs" title='rcs' data-ref="288rcs" data-ref-filename="288rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols" title='rcsnode::symbols' data-ref="rcsnode::symbols" data-ref-filename="rcsnode..symbols">symbols</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3239">3239</th><td>    {</td></tr>
<tr><th id="3240">3240</th><td>	<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col0 decl" id="290p" title='p' data-type='Node *' data-ref="290p" data-ref-filename="290p">p</dfn>;</td></tr>
<tr><th id="3241">3241</th><td></td></tr>
<tr><th id="3242">3242</th><td>	<i>/* The symbols have already been converted into a list.  */</i></td></tr>
<tr><th id="3243">3243</th><td>	<a class="local col0 ref" href="#290p" title='p' data-ref="290p" data-ref-filename="290p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col8 ref" href="#288rcs" title='rcs' data-ref="288rcs" data-ref-filename="288rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols" title='rcsnode::symbols' data-ref="rcsnode::symbols" data-ref-filename="rcsnode..symbols">symbols</a>, <a class="local col9 ref" href="#289tag" title='tag' data-ref="289tag" data-ref-filename="289tag">tag</a>);</td></tr>
<tr><th id="3244">3244</th><td>	<b>if</b> (<a class="local col0 ref" href="#290p" title='p' data-ref="290p" data-ref-filename="290p">p</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3245">3245</th><td>	    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3246">3246</th><td></td></tr>
<tr><th id="3247">3247</th><td>	<b>return</b> <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col0 ref" href="#290p" title='p' data-ref="290p" data-ref-filename="290p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>);</td></tr>
<tr><th id="3248">3248</th><td>    }</td></tr>
<tr><th id="3249">3249</th><td></td></tr>
<tr><th id="3250">3250</th><td>    <b>if</b> (<a class="local col8 ref" href="#288rcs" title='rcs' data-ref="288rcs" data-ref-filename="288rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3251">3251</th><td>    {</td></tr>
<tr><th id="3252">3252</th><td>	<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col1 decl" id="291len" title='len' data-type='size_t' data-ref="291len" data-ref-filename="291len">len</dfn>;</td></tr>
<tr><th id="3253">3253</th><td>	<em>char</em> *<dfn class="local col2 decl" id="292cp" title='cp' data-type='char *' data-ref="292cp" data-ref-filename="292cp">cp</dfn>, *<dfn class="local col3 decl" id="293last" title='last' data-type='char *' data-ref="293last" data-ref-filename="293last">last</dfn>;</td></tr>
<tr><th id="3254">3254</th><td></td></tr>
<tr><th id="3255">3255</th><td>	<i>/* Look through the RCS symbols information.  This is like</i></td></tr>
<tr><th id="3256">3256</th><td><i>           do_symbols, but we don't add the information to a list.  In</i></td></tr>
<tr><th id="3257">3257</th><td><i>           most cases, we will only be called once for this file, so</i></td></tr>
<tr><th id="3258">3258</th><td><i>           generating the list is unnecessary overhead.  */</i></td></tr>
<tr><th id="3259">3259</th><td></td></tr>
<tr><th id="3260">3260</th><td>	<a class="local col1 ref" href="#291len" title='len' data-ref="291len" data-ref-filename="291len">len</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col9 ref" href="#289tag" title='tag' data-ref="289tag" data-ref-filename="289tag">tag</a>);</td></tr>
<tr><th id="3261">3261</th><td>	<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a> = <a class="local col8 ref" href="#288rcs" title='rcs' data-ref="288rcs" data-ref-filename="288rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a>;</td></tr>
<tr><th id="3262">3262</th><td>	<i>/* Keeping track of LAST below isn't strictly necessary, now that tags</i></td></tr>
<tr><th id="3263">3263</th><td><i>	 * should be parsed for validity before they are accepted, but tags</i></td></tr>
<tr><th id="3264">3264</th><td><i>	 * with spaces used to cause the code below to loop indefintely, so</i></td></tr>
<tr><th id="3265">3265</th><td><i>	 * I have corrected for that.  Now, in the event that I missed</i></td></tr>
<tr><th id="3266">3266</th><td><i>	 * something, the server cannot be hung.  -DRP</i></td></tr>
<tr><th id="3267">3267</th><td><i>	 */</i></td></tr>
<tr><th id="3268">3268</th><td>	<a class="local col3 ref" href="#293last" title='last' data-ref="293last" data-ref-filename="293last">last</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3269">3269</th><td>	<b>while</b> ((<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strchr" title='strchr' data-ref="strchr" data-ref-filename="strchr">strchr</a> (<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a>, <a class="local col9 ref" href="#289tag" title='tag' data-ref="289tag" data-ref-filename="289tag">tag</a>[<var>0</var>])) != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3270">3270</th><td>	{</td></tr>
<tr><th id="3271">3271</th><td>	    <b>if</b> (<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a> == <a class="local col3 ref" href="#293last" title='last' data-ref="293last" data-ref-filename="293last">last</a>) <b>break</b>;</td></tr>
<tr><th id="3272">3272</th><td>	    <b>if</b> ((<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a> == <a class="local col8 ref" href="#288rcs" title='rcs' data-ref="288rcs" data-ref-filename="288rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a> || <a class="macro" href="#169" title="(spacetab[(unsigned char)cp[-1]] != 0)" data-ref="_M/whitespace">whitespace</a> (<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a>[-<var>1</var>]))</td></tr>
<tr><th id="3273">3273</th><td>		&amp;&amp; <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a>, <a class="local col9 ref" href="#289tag" title='tag' data-ref="289tag" data-ref-filename="289tag">tag</a>, <a class="local col1 ref" href="#291len" title='len' data-ref="291len" data-ref-filename="291len">len</a>) == <var>0</var></td></tr>
<tr><th id="3274">3274</th><td>		&amp;&amp; <a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a>[<a class="local col1 ref" href="#291len" title='len' data-ref="291len" data-ref-filename="291len">len</a>] == <kbd>':'</kbd>)</td></tr>
<tr><th id="3275">3275</th><td>	    {</td></tr>
<tr><th id="3276">3276</th><td>		<em>char</em> *<dfn class="local col4 decl" id="294v" title='v' data-type='char *' data-ref="294v" data-ref-filename="294v">v</dfn>, *<dfn class="local col5 decl" id="295r" title='r' data-type='char *' data-ref="295r" data-ref-filename="295r">r</dfn>;</td></tr>
<tr><th id="3277">3277</th><td></td></tr>
<tr><th id="3278">3278</th><td>		<i>/* We found the tag.  Return the version number.  */</i></td></tr>
<tr><th id="3279">3279</th><td></td></tr>
<tr><th id="3280">3280</th><td>		<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a> += <a class="local col1 ref" href="#291len" title='len' data-ref="291len" data-ref-filename="291len">len</a> + <var>1</var>;</td></tr>
<tr><th id="3281">3281</th><td>		<a class="local col4 ref" href="#294v" title='v' data-ref="294v" data-ref-filename="294v">v</a> = <a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a>;</td></tr>
<tr><th id="3282">3282</th><td>		<b>while</b> (! <a class="macro" href="#169" title="(spacetab[(unsigned char)*cp] != 0)" data-ref="_M/whitespace">whitespace</a> (*<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a>) &amp;&amp; *<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a> != <kbd>'\0'</kbd>)</td></tr>
<tr><th id="3283">3283</th><td>		    ++<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a>;</td></tr>
<tr><th id="3284">3284</th><td>		<a class="local col5 ref" href="#295r" title='r' data-ref="295r" data-ref-filename="295r">r</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a> - <a class="local col4 ref" href="#294v" title='v' data-ref="294v" data-ref-filename="294v">v</a> + <var>1</var>);</td></tr>
<tr><th id="3285">3285</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncpy" title='strncpy' data-ref="strncpy" data-ref-filename="strncpy">strncpy</a> (<a class="local col5 ref" href="#295r" title='r' data-ref="295r" data-ref-filename="295r">r</a>, <a class="local col4 ref" href="#294v" title='v' data-ref="294v" data-ref-filename="294v">v</a>, <a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a> - <a class="local col4 ref" href="#294v" title='v' data-ref="294v" data-ref-filename="294v">v</a>);</td></tr>
<tr><th id="3286">3286</th><td>		<a class="local col5 ref" href="#295r" title='r' data-ref="295r" data-ref-filename="295r">r</a>[<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a> - <a class="local col4 ref" href="#294v" title='v' data-ref="294v" data-ref-filename="294v">v</a>] = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="3287">3287</th><td>		<b>return</b> <a class="local col5 ref" href="#295r" title='r' data-ref="295r" data-ref-filename="295r">r</a>;</td></tr>
<tr><th id="3288">3288</th><td>	    }</td></tr>
<tr><th id="3289">3289</th><td></td></tr>
<tr><th id="3290">3290</th><td>	    <b>while</b> (! <a class="macro" href="#169" title="(spacetab[(unsigned char)*cp] != 0)" data-ref="_M/whitespace">whitespace</a> (*<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a>) &amp;&amp; *<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a> != <kbd>'\0'</kbd>)</td></tr>
<tr><th id="3291">3291</th><td>		++<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a>;</td></tr>
<tr><th id="3292">3292</th><td>	    <b>if</b> (*<a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a> == <kbd>'\0'</kbd>)</td></tr>
<tr><th id="3293">3293</th><td>		<b>break</b>;</td></tr>
<tr><th id="3294">3294</th><td>	    <a class="local col3 ref" href="#293last" title='last' data-ref="293last" data-ref-filename="293last">last</a> = <a class="local col2 ref" href="#292cp" title='cp' data-ref="292cp" data-ref-filename="292cp">cp</a>;</td></tr>
<tr><th id="3295">3295</th><td>	}</td></tr>
<tr><th id="3296">3296</th><td>    }</td></tr>
<tr><th id="3297">3297</th><td></td></tr>
<tr><th id="3298">3298</th><td>    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3299">3299</th><td>}</td></tr>
<tr><th id="3300">3300</th><td></td></tr>
<tr><th id="3301">3301</th><td></td></tr>
<tr><th id="3302">3302</th><td></td></tr>
<tr><th id="3303">3303</th><td><i>/*</i></td></tr>
<tr><th id="3304">3304</th><td><i> * The argument ARG is the getopt remainder of the -k option specified on the</i></td></tr>
<tr><th id="3305">3305</th><td><i> * command line.  This function returns malloc'ed space that can be used</i></td></tr>
<tr><th id="3306">3306</th><td><i> * directly in calls to RCS V5, with the -k flag munged correctly.</i></td></tr>
<tr><th id="3307">3307</th><td><i> */</i></td></tr>
<tr><th id="3308">3308</th><td><em>char</em> *</td></tr>
<tr><th id="3309">3309</th><td><dfn class="decl def fn" id="RCS_check_kflag" title='RCS_check_kflag' data-ref="RCS_check_kflag" data-ref-filename="RCS_check_kflag">RCS_check_kflag</dfn> (<em>const</em> <em>char</em> *<dfn class="local col6 decl" id="296arg" title='arg' data-type='const char *' data-ref="296arg" data-ref-filename="296arg">arg</dfn>)</td></tr>
<tr><th id="3310">3310</th><td>{</td></tr>
<tr><th id="3311">3311</th><td>    <em>static</em> <em>const</em> <em>char</em> *<em>const</em>  <dfn class="local col7 decl" id="297keyword_usage" title='keyword_usage' data-type='const char *const [10]' data-ref="297keyword_usage" data-ref-filename="297keyword_usage">keyword_usage</dfn>[] =</td></tr>
<tr><th id="3312">3312</th><td>    {</td></tr>
<tr><th id="3313">3313</th><td>      <q>"%s %s: invalid RCS keyword expansion mode\n"</q>,</td></tr>
<tr><th id="3314">3314</th><td>      <q>"Valid expansion modes include:\n"</q>,</td></tr>
<tr><th id="3315">3315</th><td>      <q>"   -kkv\tGenerate keywords using the default form.\n"</q>,</td></tr>
<tr><th id="3316">3316</th><td>      <q>"   -kkvl\tLike -kkv, except locker's name inserted.\n"</q>,</td></tr>
<tr><th id="3317">3317</th><td>      <q>"   -kk\tGenerate only keyword names in keyword strings.\n"</q>,</td></tr>
<tr><th id="3318">3318</th><td>      <q>"   -kv\tGenerate only keyword values in keyword strings.\n"</q>,</td></tr>
<tr><th id="3319">3319</th><td>      <q>"   -ko\tGenerate the old keyword string (no changes from checked in file).\n"</q>,</td></tr>
<tr><th id="3320">3320</th><td>      <q>"   -kb\tGenerate binary file unmodified (merges not allowed) (RCS 5.7).\n"</q>,</td></tr>
<tr><th id="3321">3321</th><td>      <q>"(Specify the --help global option for a list of other help options)\n"</q>,</td></tr>
<tr><th id="3322">3322</th><td>      <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>,</td></tr>
<tr><th id="3323">3323</th><td>    };</td></tr>
<tr><th id="3324">3324</th><td>    <em>char</em> <em>const</em> *<em>const</em> *<dfn class="local col8 decl" id="298cpp" title='cpp' data-type='const char *const *' data-ref="298cpp" data-ref-filename="298cpp">cpp</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3325">3325</th><td></td></tr>
<tr><th id="3326">3326</th><td>    <b>if</b> (<a class="local col6 ref" href="#296arg" title='arg' data-ref="296arg" data-ref-filename="296arg">arg</a>)</td></tr>
<tr><th id="3327">3327</th><td>    {</td></tr>
<tr><th id="3328">3328</th><td>	<b>for</b> (<a class="local col8 ref" href="#298cpp" title='cpp' data-ref="298cpp" data-ref-filename="298cpp">cpp</a> = <a class="tu ref" href="#kflags" title='kflags' data-use='r' data-ref="kflags" data-ref-filename="kflags">kflags</a>; *<a class="local col8 ref" href="#298cpp" title='cpp' data-ref="298cpp" data-ref-filename="298cpp">cpp</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>; <a class="local col8 ref" href="#298cpp" title='cpp' data-ref="298cpp" data-ref-filename="298cpp">cpp</a>++)</td></tr>
<tr><th id="3329">3329</th><td>	{</td></tr>
<tr><th id="3330">3330</th><td>	    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(arg) == *(char *)(*cpp) &amp;&amp; strcmp ((arg), (*cpp)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col6 ref" href="#296arg" title='arg' data-ref="296arg" data-ref-filename="296arg">arg</a>, *<a class="local col8 ref" href="#298cpp" title='cpp' data-ref="298cpp" data-ref-filename="298cpp">cpp</a>))</td></tr>
<tr><th id="3331">3331</th><td>		<b>break</b>;</td></tr>
<tr><th id="3332">3332</th><td>	}</td></tr>
<tr><th id="3333">3333</th><td>    }</td></tr>
<tr><th id="3334">3334</th><td></td></tr>
<tr><th id="3335">3335</th><td>    <b>if</b> (<a class="local col6 ref" href="#296arg" title='arg' data-ref="296arg" data-ref-filename="296arg">arg</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || *<a class="local col8 ref" href="#298cpp" title='cpp' data-ref="298cpp" data-ref-filename="298cpp">cpp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3336">3336</th><td>    {</td></tr>
<tr><th id="3337">3337</th><td>	<a class="ref fn" href="cvs.h.html#usage" title='usage' data-ref="usage" data-ref-filename="usage">usage</a> (<a class="local col7 ref" href="#297keyword_usage" title='keyword_usage' data-ref="297keyword_usage" data-ref-filename="297keyword_usage">keyword_usage</a>);</td></tr>
<tr><th id="3338">3338</th><td>    }</td></tr>
<tr><th id="3339">3339</th><td></td></tr>
<tr><th id="3340">3340</th><td>    <b>return</b> <a class="ref fn" href="subr.h.html#Xasprintf" title='Xasprintf' data-ref="Xasprintf" data-ref-filename="Xasprintf">Xasprintf</a> (<q>"-k%s"</q>, *<a class="local col8 ref" href="#298cpp" title='cpp' data-ref="298cpp" data-ref-filename="298cpp">cpp</a>);</td></tr>
<tr><th id="3341">3341</th><td>}</td></tr>
<tr><th id="3342">3342</th><td></td></tr>
<tr><th id="3343">3343</th><td></td></tr>
<tr><th id="3344">3344</th><td></td></tr>
<tr><th id="3345">3345</th><td><i>/*</i></td></tr>
<tr><th id="3346">3346</th><td><i> * Do some consistency checks on the symbolic tag... These should equate</i></td></tr>
<tr><th id="3347">3347</th><td><i> * pretty close to what RCS checks, though I don't know for certain.</i></td></tr>
<tr><th id="3348">3348</th><td><i> */</i></td></tr>
<tr><th id="3349">3349</th><td><em>void</em></td></tr>
<tr><th id="3350">3350</th><td><dfn class="decl def fn" id="RCS_check_tag" title='RCS_check_tag' data-ref="RCS_check_tag" data-ref-filename="RCS_check_tag">RCS_check_tag</dfn> (<em>const</em> <em>char</em> *<dfn class="local col9 decl" id="299tag" title='tag' data-type='const char *' data-ref="299tag" data-ref-filename="299tag">tag</dfn>)</td></tr>
<tr><th id="3351">3351</th><td>{</td></tr>
<tr><th id="3352">3352</th><td>    <em>char</em> *<dfn class="local col0 decl" id="300invalid" title='invalid' data-type='char *' data-ref="300invalid" data-ref-filename="300invalid">invalid</dfn> = <q>"$,.:;@"</q>;		<i>/* invalid RCS tag characters */</i></td></tr>
<tr><th id="3353">3353</th><td>    <em>const</em> <em>char</em> *<dfn class="local col1 decl" id="301cp" title='cp' data-type='const char *' data-ref="301cp" data-ref-filename="301cp">cp</dfn>;</td></tr>
<tr><th id="3354">3354</th><td></td></tr>
<tr><th id="3355">3355</th><td>    <i>/*</i></td></tr>
<tr><th id="3356">3356</th><td><i>     * The first character must be an alphabetic letter. The remaining</i></td></tr>
<tr><th id="3357">3357</th><td><i>     * characters cannot be non-visible graphic characters, and must not be</i></td></tr>
<tr><th id="3358">3358</th><td><i>     * in the set of "invalid" RCS identifier characters.</i></td></tr>
<tr><th id="3359">3359</th><td><i>     */</i></td></tr>
<tr><th id="3360">3360</th><td>    <b>if</b> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#49" title="((int)((_ctype_tab_ + 1)[((unsigned char) *tag)] &amp; 0x0001))" data-ref="_M/isalpha">isalpha</a> ((<em>unsigned</em> <em>char</em>) *<a class="local col9 ref" href="#299tag" title='tag' data-ref="299tag" data-ref-filename="299tag">tag</a>))</td></tr>
<tr><th id="3361">3361</th><td>    {</td></tr>
<tr><th id="3362">3362</th><td>	<b>for</b> (<a class="local col1 ref" href="#301cp" title='cp' data-ref="301cp" data-ref-filename="301cp">cp</a> = <a class="local col9 ref" href="#299tag" title='tag' data-ref="299tag" data-ref-filename="299tag">tag</a>; *<a class="local col1 ref" href="#301cp" title='cp' data-ref="301cp" data-ref-filename="301cp">cp</a>; <a class="local col1 ref" href="#301cp" title='cp' data-ref="301cp" data-ref-filename="301cp">cp</a>++)</td></tr>
<tr><th id="3363">3363</th><td>	{</td></tr>
<tr><th id="3364">3364</th><td>	    <b>if</b> (!<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#52" title="((int)((_ctype_tab_ + 1)[((unsigned char) *cp)] &amp; 0x0008))" data-ref="_M/isgraph">isgraph</a> ((<em>unsigned</em> <em>char</em>) *<a class="local col1 ref" href="#301cp" title='cp' data-ref="301cp" data-ref-filename="301cp">cp</a>))</td></tr>
<tr><th id="3365">3365</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"tag `%s' has non-visible graphic characters"</q>,</td></tr>
<tr><th id="3366">3366</th><td>		       <a class="local col9 ref" href="#299tag" title='tag' data-ref="299tag" data-ref-filename="299tag">tag</a>);</td></tr>
<tr><th id="3367">3367</th><td>	    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strchr" title='strchr' data-ref="strchr" data-ref-filename="strchr">strchr</a> (<a class="local col0 ref" href="#300invalid" title='invalid' data-ref="300invalid" data-ref-filename="300invalid">invalid</a>, *<a class="local col1 ref" href="#301cp" title='cp' data-ref="301cp" data-ref-filename="301cp">cp</a>))</td></tr>
<tr><th id="3368">3368</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"tag `%s' must not contain the characters `%s'"</q>,</td></tr>
<tr><th id="3369">3369</th><td>		       <a class="local col9 ref" href="#299tag" title='tag' data-ref="299tag" data-ref-filename="299tag">tag</a>, <a class="local col0 ref" href="#300invalid" title='invalid' data-ref="300invalid" data-ref-filename="300invalid">invalid</a>);</td></tr>
<tr><th id="3370">3370</th><td>	}</td></tr>
<tr><th id="3371">3371</th><td>    }</td></tr>
<tr><th id="3372">3372</th><td>    <b>else</b></td></tr>
<tr><th id="3373">3373</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"tag `%s' must start with a letter"</q>, <a class="local col9 ref" href="#299tag" title='tag' data-ref="299tag" data-ref-filename="299tag">tag</a>);</td></tr>
<tr><th id="3374">3374</th><td>}</td></tr>
<tr><th id="3375">3375</th><td></td></tr>
<tr><th id="3376">3376</th><td></td></tr>
<tr><th id="3377">3377</th><td></td></tr>
<tr><th id="3378">3378</th><td><i>/*</i></td></tr>
<tr><th id="3379">3379</th><td><i> * TRUE if argument has valid syntax for an RCS revision or </i></td></tr>
<tr><th id="3380">3380</th><td><i> * branch number.  All characters must be digits or dots, first </i></td></tr>
<tr><th id="3381">3381</th><td><i> * and last characters must be digits, and no two consecutive </i></td></tr>
<tr><th id="3382">3382</th><td><i> * characters may be dots.</i></td></tr>
<tr><th id="3383">3383</th><td><i> *</i></td></tr>
<tr><th id="3384">3384</th><td><i> * Intended for classifying things, so this function doesn't </i></td></tr>
<tr><th id="3385">3385</th><td><i> * call error.</i></td></tr>
<tr><th id="3386">3386</th><td><i> */</i></td></tr>
<tr><th id="3387">3387</th><td><em>int</em> </td></tr>
<tr><th id="3388">3388</th><td><dfn class="decl def fn" id="RCS_valid_rev" title='RCS_valid_rev' data-ref="RCS_valid_rev" data-ref-filename="RCS_valid_rev">RCS_valid_rev</dfn> (<em>const</em> <em>char</em> *<dfn class="local col2 decl" id="302rev" title='rev' data-type='const char *' data-ref="302rev" data-ref-filename="302rev">rev</dfn>)</td></tr>
<tr><th id="3389">3389</th><td>{</td></tr>
<tr><th id="3390">3390</th><td>   <em>char</em> <dfn class="local col3 decl" id="303last" title='last' data-type='char' data-ref="303last" data-ref-filename="303last">last</dfn>, <dfn class="local col4 decl" id="304c" title='c' data-type='char' data-ref="304c" data-ref-filename="304c">c</dfn>;</td></tr>
<tr><th id="3391">3391</th><td>   <a class="local col3 ref" href="#303last" title='last' data-ref="303last" data-ref-filename="303last">last</a> = *<a class="local col2 ref" href="#302rev" title='rev' data-ref="302rev" data-ref-filename="302rev">rev</a>++;</td></tr>
<tr><th id="3392">3392</th><td>   <b>if</b> (!<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) last)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) <a class="local col3 ref" href="#303last" title='last' data-ref="303last" data-ref-filename="303last">last</a>))</td></tr>
<tr><th id="3393">3393</th><td>       <b>return</b> <var>0</var>;</td></tr>
<tr><th id="3394">3394</th><td>   <b>while</b> ((<a class="local col4 ref" href="#304c" title='c' data-ref="304c" data-ref-filename="304c">c</a> = *<a class="local col2 ref" href="#302rev" title='rev' data-ref="302rev" data-ref-filename="302rev">rev</a>++))   <i>/* Extra parens placate -Wall gcc option */</i></td></tr>
<tr><th id="3395">3395</th><td>   {</td></tr>
<tr><th id="3396">3396</th><td>       <b>if</b> (<a class="local col4 ref" href="#304c" title='c' data-ref="304c" data-ref-filename="304c">c</a> == <kbd>'.'</kbd>)</td></tr>
<tr><th id="3397">3397</th><td>       {</td></tr>
<tr><th id="3398">3398</th><td>           <b>if</b> (<a class="local col3 ref" href="#303last" title='last' data-ref="303last" data-ref-filename="303last">last</a> == <kbd>'.'</kbd>)</td></tr>
<tr><th id="3399">3399</th><td>               <b>return</b> <var>0</var>;</td></tr>
<tr><th id="3400">3400</th><td>           <b>continue</b>;</td></tr>
<tr><th id="3401">3401</th><td>       }</td></tr>
<tr><th id="3402">3402</th><td>       <a class="local col3 ref" href="#303last" title='last' data-ref="303last" data-ref-filename="303last">last</a> = <a class="local col4 ref" href="#304c" title='c' data-ref="304c" data-ref-filename="304c">c</a>;</td></tr>
<tr><th id="3403">3403</th><td>       <b>if</b> (!<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) c)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) <a class="local col4 ref" href="#304c" title='c' data-ref="304c" data-ref-filename="304c">c</a>))</td></tr>
<tr><th id="3404">3404</th><td>           <b>return</b> <var>0</var>;</td></tr>
<tr><th id="3405">3405</th><td>   }</td></tr>
<tr><th id="3406">3406</th><td>   <b>if</b> (!<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) last)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) <a class="local col3 ref" href="#303last" title='last' data-ref="303last" data-ref-filename="303last">last</a>))</td></tr>
<tr><th id="3407">3407</th><td>       <b>return</b> <var>0</var>;</td></tr>
<tr><th id="3408">3408</th><td>   <b>return</b> <var>1</var>;</td></tr>
<tr><th id="3409">3409</th><td>}</td></tr>
<tr><th id="3410">3410</th><td></td></tr>
<tr><th id="3411">3411</th><td></td></tr>
<tr><th id="3412">3412</th><td></td></tr>
<tr><th id="3413">3413</th><td><i>/*</i></td></tr>
<tr><th id="3414">3414</th><td><i> * Return true if RCS revision with TAG is a dead revision.</i></td></tr>
<tr><th id="3415">3415</th><td><i> */</i></td></tr>
<tr><th id="3416">3416</th><td><em>int</em></td></tr>
<tr><th id="3417">3417</th><td><dfn class="decl def fn" id="RCS_isdead" title='RCS_isdead' data-ref="RCS_isdead" data-ref-filename="RCS_isdead">RCS_isdead</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col5 decl" id="305rcs" title='rcs' data-type='RCSNode *' data-ref="305rcs" data-ref-filename="305rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col6 decl" id="306tag" title='tag' data-type='const char *' data-ref="306tag" data-ref-filename="306tag">tag</dfn>)</td></tr>
<tr><th id="3418">3418</th><td>{</td></tr>
<tr><th id="3419">3419</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col7 decl" id="307p" title='p' data-type='Node *' data-ref="307p" data-ref-filename="307p">p</dfn>;</td></tr>
<tr><th id="3420">3420</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col8 decl" id="308version" title='version' data-type='RCSVers *' data-ref="308version" data-ref-filename="308version">version</dfn>;</td></tr>
<tr><th id="3421">3421</th><td></td></tr>
<tr><th id="3422">3422</th><td>    <b>if</b> (<a class="local col5 ref" href="#305rcs" title='rcs' data-ref="305rcs" data-ref-filename="305rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="3423">3423</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col5 ref" href="#305rcs" title='rcs' data-ref="305rcs" data-ref-filename="305rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="3424">3424</th><td></td></tr>
<tr><th id="3425">3425</th><td>    <a class="local col7 ref" href="#307p" title='p' data-ref="307p" data-ref-filename="307p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col5 ref" href="#305rcs" title='rcs' data-ref="305rcs" data-ref-filename="305rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col6 ref" href="#306tag" title='tag' data-ref="306tag" data-ref-filename="306tag">tag</a>);</td></tr>
<tr><th id="3426">3426</th><td>    <b>if</b> (<a class="local col7 ref" href="#307p" title='p' data-ref="307p" data-ref-filename="307p">p</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3427">3427</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="3428">3428</th><td></td></tr>
<tr><th id="3429">3429</th><td>    <a class="local col8 ref" href="#308version" title='version' data-ref="308version" data-ref-filename="308version">version</a> = <a class="local col7 ref" href="#307p" title='p' data-ref="307p" data-ref-filename="307p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="3430">3430</th><td>    <b>return</b> <a class="local col8 ref" href="#308version" title='version' data-ref="308version" data-ref-filename="308version">version</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::dead" title='rcsversnode::dead' data-ref="rcsversnode::dead" data-ref-filename="rcsversnode..dead">dead</a>;</td></tr>
<tr><th id="3431">3431</th><td>}</td></tr>
<tr><th id="3432">3432</th><td></td></tr>
<tr><th id="3433">3433</th><td></td></tr>
<tr><th id="3434">3434</th><td></td></tr>
<tr><th id="3435">3435</th><td><i>/* Return the RCS keyword expansion mode.  For example "b" for binary.</i></td></tr>
<tr><th id="3436">3436</th><td><i>   Returns a pointer into storage which is allocated and freed along with</i></td></tr>
<tr><th id="3437">3437</th><td><i>   the rest of the RCS information; the caller should not modify this</i></td></tr>
<tr><th id="3438">3438</th><td><i>   storage.  Returns NULL if the RCS file does not specify a keyword</i></td></tr>
<tr><th id="3439">3439</th><td><i>   expansion mode; for all other errors, die with a fatal error.  */</i></td></tr>
<tr><th id="3440">3440</th><td><em>char</em> *</td></tr>
<tr><th id="3441">3441</th><td><dfn class="decl def fn" id="RCS_getexpand" title='RCS_getexpand' data-ref="RCS_getexpand" data-ref-filename="RCS_getexpand">RCS_getexpand</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col9 decl" id="309rcs" title='rcs' data-type='RCSNode *' data-ref="309rcs" data-ref-filename="309rcs">rcs</dfn>)</td></tr>
<tr><th id="3442">3442</th><td>{</td></tr>
<tr><th id="3443">3443</th><td>    <i>/* Since RCS_parsercsfile_i now reads expand, don't need to worry</i></td></tr>
<tr><th id="3444">3444</th><td><i>       about RCS_reparsercsfile.  */</i></td></tr>
<tr><th id="3445">3445</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 3445, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col9 ref" href="#309rcs" title='rcs' data-ref="309rcs" data-ref-filename="309rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="3446">3446</th><td>    <b>return</b> <a class="local col9 ref" href="#309rcs" title='rcs' data-ref="309rcs" data-ref-filename="309rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a>;</td></tr>
<tr><th id="3447">3447</th><td>}</td></tr>
<tr><th id="3448">3448</th><td></td></tr>
<tr><th id="3449">3449</th><td></td></tr>
<tr><th id="3450">3450</th><td></td></tr>
<tr><th id="3451">3451</th><td><i>/* Set keyword expansion mode to EXPAND.  For example "b" for binary.  */</i></td></tr>
<tr><th id="3452">3452</th><td><em>void</em></td></tr>
<tr><th id="3453">3453</th><td><dfn class="decl def fn" id="RCS_setexpand" title='RCS_setexpand' data-ref="RCS_setexpand" data-ref-filename="RCS_setexpand">RCS_setexpand</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col0 decl" id="310rcs" title='rcs' data-type='RCSNode *' data-ref="310rcs" data-ref-filename="310rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col1 decl" id="311expand" title='expand' data-type='const char *' data-ref="311expand" data-ref-filename="311expand">expand</dfn>)</td></tr>
<tr><th id="3454">3454</th><td>{</td></tr>
<tr><th id="3455">3455</th><td>    <i>/* Since RCS_parsercsfile_i now reads expand, don't need to worry</i></td></tr>
<tr><th id="3456">3456</th><td><i>       about RCS_reparsercsfile.  */</i></td></tr>
<tr><th id="3457">3457</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 3457, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col0 ref" href="#310rcs" title='rcs' data-ref="310rcs" data-ref-filename="310rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="3458">3458</th><td>    <b>if</b> (<a class="local col0 ref" href="#310rcs" title='rcs' data-ref="310rcs" data-ref-filename="310rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3459">3459</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col0 ref" href="#310rcs" title='rcs' data-ref="310rcs" data-ref-filename="310rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a>);</td></tr>
<tr><th id="3460">3460</th><td>    <a class="local col0 ref" href="#310rcs" title='rcs' data-ref="310rcs" data-ref-filename="310rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col1 ref" href="#311expand" title='expand' data-ref="311expand" data-ref-filename="311expand">expand</a>);</td></tr>
<tr><th id="3461">3461</th><td>}</td></tr>
<tr><th id="3462">3462</th><td></td></tr>
<tr><th id="3463">3463</th><td></td></tr>
<tr><th id="3464">3464</th><td></td></tr>
<tr><th id="3465">3465</th><td><i>/* RCS keywords, and a matching enum.  */</i></td></tr>
<tr><th id="3466">3466</th><td><b>enum</b> <dfn class="type def" id="keyword" title='keyword' data-ref="keyword" data-ref-filename="keyword">keyword</dfn></td></tr>
<tr><th id="3467">3467</th><td>{</td></tr>
<tr><th id="3468">3468</th><td>    <dfn class="enum" id="KEYWORD_AUTHOR" title='KEYWORD_AUTHOR' data-ref="KEYWORD_AUTHOR" data-ref-filename="KEYWORD_AUTHOR">KEYWORD_AUTHOR</dfn> = <var>0</var>,</td></tr>
<tr><th id="3469">3469</th><td>    <dfn class="enum" id="KEYWORD_DATE" title='KEYWORD_DATE' data-ref="KEYWORD_DATE" data-ref-filename="KEYWORD_DATE">KEYWORD_DATE</dfn>,</td></tr>
<tr><th id="3470">3470</th><td>    <dfn class="enum" id="KEYWORD_CVSHEADER" title='KEYWORD_CVSHEADER' data-ref="KEYWORD_CVSHEADER" data-ref-filename="KEYWORD_CVSHEADER">KEYWORD_CVSHEADER</dfn>,</td></tr>
<tr><th id="3471">3471</th><td>    <dfn class="enum" id="KEYWORD_HEADER" title='KEYWORD_HEADER' data-ref="KEYWORD_HEADER" data-ref-filename="KEYWORD_HEADER">KEYWORD_HEADER</dfn>,</td></tr>
<tr><th id="3472">3472</th><td>    <dfn class="enum" id="KEYWORD_ID" title='KEYWORD_ID' data-ref="KEYWORD_ID" data-ref-filename="KEYWORD_ID">KEYWORD_ID</dfn>,</td></tr>
<tr><th id="3473">3473</th><td>    <dfn class="enum" id="KEYWORD_LOCKER" title='KEYWORD_LOCKER' data-ref="KEYWORD_LOCKER" data-ref-filename="KEYWORD_LOCKER">KEYWORD_LOCKER</dfn>,</td></tr>
<tr><th id="3474">3474</th><td>    <dfn class="enum" id="KEYWORD_LOG" title='KEYWORD_LOG' data-ref="KEYWORD_LOG" data-ref-filename="KEYWORD_LOG">KEYWORD_LOG</dfn>,</td></tr>
<tr><th id="3475">3475</th><td>    <dfn class="enum" id="KEYWORD_NAME" title='KEYWORD_NAME' data-ref="KEYWORD_NAME" data-ref-filename="KEYWORD_NAME">KEYWORD_NAME</dfn>,</td></tr>
<tr><th id="3476">3476</th><td>    <dfn class="enum" id="KEYWORD_RCSFILE" title='KEYWORD_RCSFILE' data-ref="KEYWORD_RCSFILE" data-ref-filename="KEYWORD_RCSFILE">KEYWORD_RCSFILE</dfn>,</td></tr>
<tr><th id="3477">3477</th><td>    <dfn class="enum" id="KEYWORD_REVISION" title='KEYWORD_REVISION' data-ref="KEYWORD_REVISION" data-ref-filename="KEYWORD_REVISION">KEYWORD_REVISION</dfn>,</td></tr>
<tr><th id="3478">3478</th><td>    <dfn class="enum" id="KEYWORD_SOURCE" title='KEYWORD_SOURCE' data-ref="KEYWORD_SOURCE" data-ref-filename="KEYWORD_SOURCE">KEYWORD_SOURCE</dfn>,</td></tr>
<tr><th id="3479">3479</th><td>    <dfn class="enum" id="KEYWORD_STATE" title='KEYWORD_STATE' data-ref="KEYWORD_STATE" data-ref-filename="KEYWORD_STATE">KEYWORD_STATE</dfn>,</td></tr>
<tr><th id="3480">3480</th><td>    <dfn class="enum" id="KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</dfn></td></tr>
<tr><th id="3481">3481</th><td>};</td></tr>
<tr><th id="3482">3482</th><td><b>struct</b> <dfn class="type def" id="rcs_keyword" title='rcs_keyword' data-ref="rcs_keyword" data-ref-filename="rcs_keyword">rcs_keyword</dfn></td></tr>
<tr><th id="3483">3483</th><td>{</td></tr>
<tr><th id="3484">3484</th><td>    <em>const</em> <em>char</em> *<dfn class="tu decl field" id="rcs_keyword::string" title='rcs_keyword::string' data-type='const char *' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</dfn>;</td></tr>
<tr><th id="3485">3485</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="tu decl field" id="rcs_keyword::len" title='rcs_keyword::len' data-type='size_t' data-ref="rcs_keyword::len" data-ref-filename="rcs_keyword..len">len</dfn>;</td></tr>
<tr><th id="3486">3486</th><td>    <b>enum</b> <a class="type" href="#keyword" title='keyword' data-ref="keyword" data-ref-filename="keyword">keyword</a> <dfn class="tu decl field" id="rcs_keyword::expandto" title='rcs_keyword::expandto' data-type='enum keyword' data-ref="rcs_keyword::expandto" data-ref-filename="rcs_keyword..expandto">expandto</dfn>;</td></tr>
<tr><th id="3487">3487</th><td>    <span class="macro" title="_Bool" data-ref="_M/bool">bool</span> <dfn class="tu decl field" id="rcs_keyword::expandit" title='rcs_keyword::expandit' data-type='_Bool' data-ref="rcs_keyword::expandit" data-ref-filename="rcs_keyword..expandit">expandit</dfn>;</td></tr>
<tr><th id="3488">3488</th><td>};</td></tr>
<tr><th id="3489">3489</th><td></td></tr>
<tr><th id="3490">3490</th><td></td></tr>
<tr><th id="3491">3491</th><td></td></tr>
<tr><th id="3492">3492</th><td><em>static</em> <b>inline</b> <b>struct</b> <a class="type" href="#rcs_keyword" title='rcs_keyword' data-ref="rcs_keyword" data-ref-filename="rcs_keyword">rcs_keyword</a> *</td></tr>
<tr><th id="3493">3493</th><td><dfn class="tu decl def fn" id="new_keywords" title='new_keywords' data-type='struct rcs_keyword * new_keywords()' data-ref="new_keywords" data-ref-filename="new_keywords">new_keywords</dfn> (<em>void</em>)</td></tr>
<tr><th id="3494">3494</th><td>{</td></tr>
<tr><th id="3495">3495</th><td>    <b>struct</b> <a class="type" href="#rcs_keyword" title='rcs_keyword' data-ref="rcs_keyword" data-ref-filename="rcs_keyword">rcs_keyword</a> *<dfn class="local col2 decl" id="312new" title='new' data-type='struct rcs_keyword *' data-ref="312new" data-ref-filename="312new">new</dfn>;</td></tr>
<tr><th id="3496">3496</th><td>    <a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a> = <a class="ref fn" href="../lib/xalloc.h.html#xcalloc" title='xcalloc' data-ref="xcalloc" data-ref-filename="xcalloc">xcalloc</a> (<a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a> + <var>2</var>, <b>sizeof</b> (<b>struct</b> <a class="type" href="#rcs_keyword" title='rcs_keyword' data-ref="rcs_keyword" data-ref-filename="rcs_keyword">rcs_keyword</a>));</td></tr>
<tr><th id="3497">3497</th><td></td></tr>
<tr><th id="3498">3498</th><td><u>#define <dfn class="macro" id="_M/KEYWORD_INIT" data-ref="_M/KEYWORD_INIT">KEYWORD_INIT</dfn>(k, i, s) \</u></td></tr>
<tr><th id="3499">3499</th><td><u>	k[i].<a class="tu ref field" href="#rcs_keyword::string" title='rcs_keyword::string' data-use='w' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</a> = s; \</u></td></tr>
<tr><th id="3500">3500</th><td><u>	k[i].<a class="tu ref field" href="#rcs_keyword::len" title='rcs_keyword::len' data-use='w' data-ref="rcs_keyword::len" data-ref-filename="rcs_keyword..len">len</a> = sizeof s - 1; \</u></td></tr>
<tr><th id="3501">3501</th><td><u>	k[i].<a class="tu ref field" href="#rcs_keyword::expandto" title='rcs_keyword::expandto' data-use='w' data-ref="rcs_keyword::expandto" data-ref-filename="rcs_keyword..expandto">expandto</a> = i; \</u></td></tr>
<tr><th id="3502">3502</th><td><u>	k[i].<a class="tu ref field" href="#rcs_keyword::expandit" title='rcs_keyword::expandit' data-use='w' data-ref="rcs_keyword::expandit" data-ref-filename="rcs_keyword..expandit">expandit</a> = true</u></td></tr>
<tr><th id="3503">3503</th><td></td></tr>
<tr><th id="3504">3504</th><td>    <a class="macro" href="#3498" title="new[KEYWORD_AUTHOR].string = &quot;Author&quot;; new[KEYWORD_AUTHOR].len = sizeof &quot;Author&quot; - 1; new[KEYWORD_AUTHOR].expandto = KEYWORD_AUTHOR; new[KEYWORD_AUTHOR].expandit = 1" data-ref="_M/KEYWORD_INIT">KEYWORD_INIT</a> (<a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>, <a class="enum" href="#KEYWORD_AUTHOR" title='KEYWORD_AUTHOR' data-ref="KEYWORD_AUTHOR" data-ref-filename="KEYWORD_AUTHOR">KEYWORD_AUTHOR</a>, <q>"Author"</q>);</td></tr>
<tr><th id="3505">3505</th><td>    <a class="macro" href="#3498" title="new[KEYWORD_DATE].string = &quot;Date&quot;; new[KEYWORD_DATE].len = sizeof &quot;Date&quot; - 1; new[KEYWORD_DATE].expandto = KEYWORD_DATE; new[KEYWORD_DATE].expandit = 1" data-ref="_M/KEYWORD_INIT">KEYWORD_INIT</a> (<a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>, <a class="enum" href="#KEYWORD_DATE" title='KEYWORD_DATE' data-ref="KEYWORD_DATE" data-ref-filename="KEYWORD_DATE">KEYWORD_DATE</a>, <q>"Date"</q>);</td></tr>
<tr><th id="3506">3506</th><td>    <a class="macro" href="#3498" title="new[KEYWORD_CVSHEADER].string = &quot;CVSHeader&quot;; new[KEYWORD_CVSHEADER].len = sizeof &quot;CVSHeader&quot; - 1; new[KEYWORD_CVSHEADER].expandto = KEYWORD_CVSHEADER; new[KEYWORD_CVSHEADER].expandit = 1" data-ref="_M/KEYWORD_INIT">KEYWORD_INIT</a> (<a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>, <a class="enum" href="#KEYWORD_CVSHEADER" title='KEYWORD_CVSHEADER' data-ref="KEYWORD_CVSHEADER" data-ref-filename="KEYWORD_CVSHEADER">KEYWORD_CVSHEADER</a>, <q>"CVSHeader"</q>);</td></tr>
<tr><th id="3507">3507</th><td>    <a class="macro" href="#3498" title="new[KEYWORD_HEADER].string = &quot;Header&quot;; new[KEYWORD_HEADER].len = sizeof &quot;Header&quot; - 1; new[KEYWORD_HEADER].expandto = KEYWORD_HEADER; new[KEYWORD_HEADER].expandit = 1" data-ref="_M/KEYWORD_INIT">KEYWORD_INIT</a> (<a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>, <a class="enum" href="#KEYWORD_HEADER" title='KEYWORD_HEADER' data-ref="KEYWORD_HEADER" data-ref-filename="KEYWORD_HEADER">KEYWORD_HEADER</a>, <q>"Header"</q>);</td></tr>
<tr><th id="3508">3508</th><td>    <a class="macro" href="#3498" title="new[KEYWORD_ID].string = &quot;Id&quot;; new[KEYWORD_ID].len = sizeof &quot;Id&quot; - 1; new[KEYWORD_ID].expandto = KEYWORD_ID; new[KEYWORD_ID].expandit = 1" data-ref="_M/KEYWORD_INIT">KEYWORD_INIT</a> (<a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>, <a class="enum" href="#KEYWORD_ID" title='KEYWORD_ID' data-ref="KEYWORD_ID" data-ref-filename="KEYWORD_ID">KEYWORD_ID</a>, <q>"Id"</q>);</td></tr>
<tr><th id="3509">3509</th><td>    <a class="macro" href="#3498" title="new[KEYWORD_LOCKER].string = &quot;Locker&quot;; new[KEYWORD_LOCKER].len = sizeof &quot;Locker&quot; - 1; new[KEYWORD_LOCKER].expandto = KEYWORD_LOCKER; new[KEYWORD_LOCKER].expandit = 1" data-ref="_M/KEYWORD_INIT">KEYWORD_INIT</a> (<a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>, <a class="enum" href="#KEYWORD_LOCKER" title='KEYWORD_LOCKER' data-ref="KEYWORD_LOCKER" data-ref-filename="KEYWORD_LOCKER">KEYWORD_LOCKER</a>, <q>"Locker"</q>);</td></tr>
<tr><th id="3510">3510</th><td>    <a class="macro" href="#3498" title="new[KEYWORD_LOG].string = &quot;Log&quot;; new[KEYWORD_LOG].len = sizeof &quot;Log&quot; - 1; new[KEYWORD_LOG].expandto = KEYWORD_LOG; new[KEYWORD_LOG].expandit = 1" data-ref="_M/KEYWORD_INIT">KEYWORD_INIT</a> (<a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>, <a class="enum" href="#KEYWORD_LOG" title='KEYWORD_LOG' data-ref="KEYWORD_LOG" data-ref-filename="KEYWORD_LOG">KEYWORD_LOG</a>, <q>"Log"</q>);</td></tr>
<tr><th id="3511">3511</th><td>    <a class="macro" href="#3498" title="new[KEYWORD_NAME].string = &quot;Name&quot;; new[KEYWORD_NAME].len = sizeof &quot;Name&quot; - 1; new[KEYWORD_NAME].expandto = KEYWORD_NAME; new[KEYWORD_NAME].expandit = 1" data-ref="_M/KEYWORD_INIT">KEYWORD_INIT</a> (<a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>, <a class="enum" href="#KEYWORD_NAME" title='KEYWORD_NAME' data-ref="KEYWORD_NAME" data-ref-filename="KEYWORD_NAME">KEYWORD_NAME</a>, <q>"Name"</q>);</td></tr>
<tr><th id="3512">3512</th><td>    <a class="macro" href="#3498" title="new[KEYWORD_RCSFILE].string = &quot;RCSfile&quot;; new[KEYWORD_RCSFILE].len = sizeof &quot;RCSfile&quot; - 1; new[KEYWORD_RCSFILE].expandto = KEYWORD_RCSFILE; new[KEYWORD_RCSFILE].expandit = 1" data-ref="_M/KEYWORD_INIT">KEYWORD_INIT</a> (<a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>, <a class="enum" href="#KEYWORD_RCSFILE" title='KEYWORD_RCSFILE' data-ref="KEYWORD_RCSFILE" data-ref-filename="KEYWORD_RCSFILE">KEYWORD_RCSFILE</a>, <q>"RCSfile"</q>);</td></tr>
<tr><th id="3513">3513</th><td>    <a class="macro" href="#3498" title="new[KEYWORD_REVISION].string = &quot;Revision&quot;; new[KEYWORD_REVISION].len = sizeof &quot;Revision&quot; - 1; new[KEYWORD_REVISION].expandto = KEYWORD_REVISION; new[KEYWORD_REVISION].expandit = 1" data-ref="_M/KEYWORD_INIT">KEYWORD_INIT</a> (<a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>, <a class="enum" href="#KEYWORD_REVISION" title='KEYWORD_REVISION' data-ref="KEYWORD_REVISION" data-ref-filename="KEYWORD_REVISION">KEYWORD_REVISION</a>, <q>"Revision"</q>);</td></tr>
<tr><th id="3514">3514</th><td>    <a class="macro" href="#3498" title="new[KEYWORD_SOURCE].string = &quot;Source&quot;; new[KEYWORD_SOURCE].len = sizeof &quot;Source&quot; - 1; new[KEYWORD_SOURCE].expandto = KEYWORD_SOURCE; new[KEYWORD_SOURCE].expandit = 1" data-ref="_M/KEYWORD_INIT">KEYWORD_INIT</a> (<a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>, <a class="enum" href="#KEYWORD_SOURCE" title='KEYWORD_SOURCE' data-ref="KEYWORD_SOURCE" data-ref-filename="KEYWORD_SOURCE">KEYWORD_SOURCE</a>, <q>"Source"</q>);</td></tr>
<tr><th id="3515">3515</th><td>    <a class="macro" href="#3498" title="new[KEYWORD_STATE].string = &quot;State&quot;; new[KEYWORD_STATE].len = sizeof &quot;State&quot; - 1; new[KEYWORD_STATE].expandto = KEYWORD_STATE; new[KEYWORD_STATE].expandit = 1" data-ref="_M/KEYWORD_INIT">KEYWORD_INIT</a> (<a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>, <a class="enum" href="#KEYWORD_STATE" title='KEYWORD_STATE' data-ref="KEYWORD_STATE" data-ref-filename="KEYWORD_STATE">KEYWORD_STATE</a>, <q>"State"</q>);</td></tr>
<tr><th id="3516">3516</th><td>    <a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>[<a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a>].<a class="tu ref field" href="#rcs_keyword::string" title='rcs_keyword::string' data-use='w' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3517">3517</th><td>    <a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>[<a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a>].<a class="tu ref field" href="#rcs_keyword::len" title='rcs_keyword::len' data-use='w' data-ref="rcs_keyword::len" data-ref-filename="rcs_keyword..len">len</a> = <var>0</var>;</td></tr>
<tr><th id="3518">3518</th><td>    <a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>[<a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a>].<a class="tu ref field" href="#rcs_keyword::expandto" title='rcs_keyword::expandto' data-use='w' data-ref="rcs_keyword::expandto" data-ref-filename="rcs_keyword..expandto">expandto</a> = <a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a>;</td></tr>
<tr><th id="3519">3519</th><td>    <a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>[<a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a>].<a class="tu ref field" href="#rcs_keyword::expandit" title='rcs_keyword::expandit' data-use='w' data-ref="rcs_keyword::expandit" data-ref-filename="rcs_keyword..expandit">expandit</a> = <span class="macro" title="0" data-ref="_M/false">false</span>;</td></tr>
<tr><th id="3520">3520</th><td></td></tr>
<tr><th id="3521">3521</th><td>    <b>return</b> <a class="local col2 ref" href="#312new" title='new' data-ref="312new" data-ref-filename="312new">new</a>;</td></tr>
<tr><th id="3522">3522</th><td>}</td></tr>
<tr><th id="3523">3523</th><td></td></tr>
<tr><th id="3524">3524</th><td></td></tr>
<tr><th id="3525">3525</th><td></td></tr>
<tr><th id="3526">3526</th><td><em>void</em></td></tr>
<tr><th id="3527">3527</th><td><dfn class="decl def fn" id="free_keywords" title='free_keywords' data-ref="free_keywords" data-ref-filename="free_keywords">free_keywords</dfn> (<em>void</em> *<dfn class="local col3 decl" id="313keywords" title='keywords' data-type='void *' data-ref="313keywords" data-ref-filename="313keywords">keywords</dfn>)</td></tr>
<tr><th id="3528">3528</th><td>{</td></tr>
<tr><th id="3529">3529</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#313keywords" title='keywords' data-ref="313keywords" data-ref-filename="313keywords">keywords</a>);</td></tr>
<tr><th id="3530">3530</th><td>}</td></tr>
<tr><th id="3531">3531</th><td></td></tr>
<tr><th id="3532">3532</th><td></td></tr>
<tr><th id="3533">3533</th><td></td></tr>
<tr><th id="3534">3534</th><td><i  data-doc="printable_date">/* Convert an RCS date string into a readable string.  This is like</i></td></tr>
<tr><th id="3535">3535</th><td><i  data-doc="printable_date">   the RCS date2str function.  */</i></td></tr>
<tr><th id="3536">3536</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="3537">3537</th><td><dfn class="tu decl def fn" id="printable_date" title='printable_date' data-type='char * printable_date(const char * rcs_date)' data-ref="printable_date" data-ref-filename="printable_date">printable_date</dfn> (<em>const</em> <em>char</em> *<dfn class="local col4 decl" id="314rcs_date" title='rcs_date' data-type='const char *' data-ref="314rcs_date" data-ref-filename="314rcs_date">rcs_date</dfn>)</td></tr>
<tr><th id="3538">3538</th><td>{</td></tr>
<tr><th id="3539">3539</th><td>    <em>int</em> <dfn class="local col5 decl" id="315year" title='year' data-type='int' data-ref="315year" data-ref-filename="315year">year</dfn>, <dfn class="local col6 decl" id="316mon" title='mon' data-type='int' data-ref="316mon" data-ref-filename="316mon">mon</dfn>, <dfn class="local col7 decl" id="317mday" title='mday' data-type='int' data-ref="317mday" data-ref-filename="317mday">mday</dfn>, <dfn class="local col8 decl" id="318hour" title='hour' data-type='int' data-ref="318hour" data-ref-filename="318hour">hour</dfn>, <dfn class="local col9 decl" id="319min" title='min' data-type='int' data-ref="319min" data-ref-filename="319min">min</dfn>, <dfn class="local col0 decl" id="320sec" title='sec' data-type='int' data-ref="320sec" data-ref-filename="320sec">sec</dfn>;</td></tr>
<tr><th id="3540">3540</th><td>    <em>char</em> <dfn class="local col1 decl" id="321buf" title='buf' data-type='char [100]' data-ref="321buf" data-ref-filename="321buf">buf</dfn>[<var>100</var>];</td></tr>
<tr><th id="3541">3541</th><td></td></tr>
<tr><th id="3542">3542</th><td>    (<em>void</em>) <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sscanf" title='sscanf' data-ref="sscanf" data-ref-filename="sscanf">sscanf</a> (<a class="local col4 ref" href="#314rcs_date" title='rcs_date' data-ref="314rcs_date" data-ref-filename="314rcs_date">rcs_date</a>, <a class="macro" href="rcs.h.html#37" title="&quot;%d.%d.%d.%d.%d.%d&quot;" data-ref="_M/SDATEFORM">SDATEFORM</a>, &amp;<a class="local col5 ref" href="#315year" title='year' data-ref="315year" data-ref-filename="315year">year</a>, &amp;<a class="local col6 ref" href="#316mon" title='mon' data-ref="316mon" data-ref-filename="316mon">mon</a>, &amp;<a class="local col7 ref" href="#317mday" title='mday' data-ref="317mday" data-ref-filename="317mday">mday</a>, &amp;<a class="local col8 ref" href="#318hour" title='hour' data-ref="318hour" data-ref-filename="318hour">hour</a>, &amp;<a class="local col9 ref" href="#319min" title='min' data-ref="319min" data-ref-filename="319min">min</a>,</td></tr>
<tr><th id="3543">3543</th><td>		   &amp;<a class="local col0 ref" href="#320sec" title='sec' data-ref="320sec" data-ref-filename="320sec">sec</a>);</td></tr>
<tr><th id="3544">3544</th><td>    <b>if</b> (<a class="local col5 ref" href="#315year" title='year' data-ref="315year" data-ref-filename="315year">year</a> &lt; <var>1900</var>)</td></tr>
<tr><th id="3545">3545</th><td>	<a class="local col5 ref" href="#315year" title='year' data-ref="315year" data-ref-filename="315year">year</a> += <var>1900</var>;</td></tr>
<tr><th id="3546">3546</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sprintf" title='sprintf' data-ref="sprintf" data-ref-filename="sprintf">sprintf</a> (<a class="local col1 ref" href="#321buf" title='buf' data-ref="321buf" data-ref-filename="321buf">buf</a>, <q>"%04d/%02d/%02d %02d:%02d:%02d"</q>, <a class="local col5 ref" href="#315year" title='year' data-ref="315year" data-ref-filename="315year">year</a>, <a class="local col6 ref" href="#316mon" title='mon' data-ref="316mon" data-ref-filename="316mon">mon</a>, <a class="local col7 ref" href="#317mday" title='mday' data-ref="317mday" data-ref-filename="317mday">mday</a>,</td></tr>
<tr><th id="3547">3547</th><td>	     <a class="local col8 ref" href="#318hour" title='hour' data-ref="318hour" data-ref-filename="318hour">hour</a>, <a class="local col9 ref" href="#319min" title='min' data-ref="319min" data-ref-filename="319min">min</a>, <a class="local col0 ref" href="#320sec" title='sec' data-ref="320sec" data-ref-filename="320sec">sec</a>);</td></tr>
<tr><th id="3548">3548</th><td>    <b>return</b> <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col1 ref" href="#321buf" title='buf' data-ref="321buf" data-ref-filename="321buf">buf</a>);</td></tr>
<tr><th id="3549">3549</th><td>}</td></tr>
<tr><th id="3550">3550</th><td></td></tr>
<tr><th id="3551">3551</th><td></td></tr>
<tr><th id="3552">3552</th><td></td></tr>
<tr><th id="3553">3553</th><td><i  data-doc="escape_keyword_value">/* Escape the characters in a string so that it can be included in an</i></td></tr>
<tr><th id="3554">3554</th><td><i  data-doc="escape_keyword_value">   RCS value.  */</i></td></tr>
<tr><th id="3555">3555</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="3556">3556</th><td><dfn class="tu decl def fn" id="escape_keyword_value" title='escape_keyword_value' data-type='char * escape_keyword_value(const char * value, int * free_value)' data-ref="escape_keyword_value" data-ref-filename="escape_keyword_value">escape_keyword_value</dfn> (<em>const</em> <em>char</em> *<dfn class="local col2 decl" id="322value" title='value' data-type='const char *' data-ref="322value" data-ref-filename="322value">value</dfn>, <em>int</em> *<dfn class="local col3 decl" id="323free_value" title='free_value' data-type='int *' data-ref="323free_value" data-ref-filename="323free_value">free_value</dfn>)</td></tr>
<tr><th id="3557">3557</th><td>{</td></tr>
<tr><th id="3558">3558</th><td>    <em>char</em> *<dfn class="local col4 decl" id="324ret" title='ret' data-type='char *' data-ref="324ret" data-ref-filename="324ret">ret</dfn>, *<dfn class="local col5 decl" id="325t" title='t' data-type='char *' data-ref="325t" data-ref-filename="325t">t</dfn>;</td></tr>
<tr><th id="3559">3559</th><td>    <em>const</em> <em>char</em> *<dfn class="local col6 decl" id="326s" title='s' data-type='const char *' data-ref="326s" data-ref-filename="326s">s</dfn>;</td></tr>
<tr><th id="3560">3560</th><td></td></tr>
<tr><th id="3561">3561</th><td>    <b>for</b> (<a class="local col6 ref" href="#326s" title='s' data-ref="326s" data-ref-filename="326s">s</a> = <a class="local col2 ref" href="#322value" title='value' data-ref="322value" data-ref-filename="322value">value</a>; *<a class="local col6 ref" href="#326s" title='s' data-ref="326s" data-ref-filename="326s">s</a> != <kbd>'\0'</kbd>; <a class="local col6 ref" href="#326s" title='s' data-ref="326s" data-ref-filename="326s">s</a>++)</td></tr>
<tr><th id="3562">3562</th><td>    {</td></tr>
<tr><th id="3563">3563</th><td>	<em>char</em> <dfn class="local col7 decl" id="327c" title='c' data-type='char' data-ref="327c" data-ref-filename="327c">c</dfn>;</td></tr>
<tr><th id="3564">3564</th><td></td></tr>
<tr><th id="3565">3565</th><td>	<a class="local col7 ref" href="#327c" title='c' data-ref="327c" data-ref-filename="327c">c</a> = *<a class="local col6 ref" href="#326s" title='s' data-ref="326s" data-ref-filename="326s">s</a>;</td></tr>
<tr><th id="3566">3566</th><td>	<b>if</b> (<a class="local col7 ref" href="#327c" title='c' data-ref="327c" data-ref-filename="327c">c</a> == <kbd>'\t'</kbd></td></tr>
<tr><th id="3567">3567</th><td>	    || <a class="local col7 ref" href="#327c" title='c' data-ref="327c" data-ref-filename="327c">c</a> == <kbd>'\n'</kbd></td></tr>
<tr><th id="3568">3568</th><td>	    || <a class="local col7 ref" href="#327c" title='c' data-ref="327c" data-ref-filename="327c">c</a> == <kbd>'\\'</kbd></td></tr>
<tr><th id="3569">3569</th><td>	    || <a class="local col7 ref" href="#327c" title='c' data-ref="327c" data-ref-filename="327c">c</a> == <kbd>' '</kbd></td></tr>
<tr><th id="3570">3570</th><td>	    || <a class="local col7 ref" href="#327c" title='c' data-ref="327c" data-ref-filename="327c">c</a> == <kbd>'$'</kbd>)</td></tr>
<tr><th id="3571">3571</th><td>	{</td></tr>
<tr><th id="3572">3572</th><td>	    <b>break</b>;</td></tr>
<tr><th id="3573">3573</th><td>	}</td></tr>
<tr><th id="3574">3574</th><td>    }</td></tr>
<tr><th id="3575">3575</th><td></td></tr>
<tr><th id="3576">3576</th><td>    <b>if</b> (*<a class="local col6 ref" href="#326s" title='s' data-ref="326s" data-ref-filename="326s">s</a> == <kbd>'\0'</kbd>)</td></tr>
<tr><th id="3577">3577</th><td>    {</td></tr>
<tr><th id="3578">3578</th><td>	*<a class="local col3 ref" href="#323free_value" title='free_value' data-ref="323free_value" data-ref-filename="323free_value">free_value</a> = <var>0</var>;</td></tr>
<tr><th id="3579">3579</th><td>	<b>return</b> (<em>char</em> *) <a class="local col2 ref" href="#322value" title='value' data-ref="322value" data-ref-filename="322value">value</a>;</td></tr>
<tr><th id="3580">3580</th><td>    }</td></tr>
<tr><th id="3581">3581</th><td></td></tr>
<tr><th id="3582">3582</th><td>    <a class="local col4 ref" href="#324ret" title='ret' data-ref="324ret" data-ref-filename="324ret">ret</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col2 ref" href="#322value" title='value' data-ref="322value" data-ref-filename="322value">value</a>) * <var>4</var> + <var>1</var>);</td></tr>
<tr><th id="3583">3583</th><td>    *<a class="local col3 ref" href="#323free_value" title='free_value' data-ref="323free_value" data-ref-filename="323free_value">free_value</a> = <var>1</var>;</td></tr>
<tr><th id="3584">3584</th><td></td></tr>
<tr><th id="3585">3585</th><td>    <b>for</b> (<a class="local col6 ref" href="#326s" title='s' data-ref="326s" data-ref-filename="326s">s</a> = <a class="local col2 ref" href="#322value" title='value' data-ref="322value" data-ref-filename="322value">value</a>, <a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a> = <a class="local col4 ref" href="#324ret" title='ret' data-ref="324ret" data-ref-filename="324ret">ret</a>; *<a class="local col6 ref" href="#326s" title='s' data-ref="326s" data-ref-filename="326s">s</a> != <kbd>'\0'</kbd>; <a class="local col6 ref" href="#326s" title='s' data-ref="326s" data-ref-filename="326s">s</a>++, <a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a>++)</td></tr>
<tr><th id="3586">3586</th><td>    {</td></tr>
<tr><th id="3587">3587</th><td>	<b>switch</b> (*<a class="local col6 ref" href="#326s" title='s' data-ref="326s" data-ref-filename="326s">s</a>)</td></tr>
<tr><th id="3588">3588</th><td>	{</td></tr>
<tr><th id="3589">3589</th><td>	<b>default</b>:</td></tr>
<tr><th id="3590">3590</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a> = *<a class="local col6 ref" href="#326s" title='s' data-ref="326s" data-ref-filename="326s">s</a>;</td></tr>
<tr><th id="3591">3591</th><td>	    <b>break</b>;</td></tr>
<tr><th id="3592">3592</th><td>	<b>case</b> <kbd>'\t'</kbd>:</td></tr>
<tr><th id="3593">3593</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a>++ = <kbd>'\\'</kbd>;</td></tr>
<tr><th id="3594">3594</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a> = <kbd>'t'</kbd>;</td></tr>
<tr><th id="3595">3595</th><td>	    <b>break</b>;</td></tr>
<tr><th id="3596">3596</th><td>	<b>case</b> <kbd>'\n'</kbd>:</td></tr>
<tr><th id="3597">3597</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a>++ = <kbd>'\\'</kbd>;</td></tr>
<tr><th id="3598">3598</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a> = <kbd>'n'</kbd>;</td></tr>
<tr><th id="3599">3599</th><td>	    <b>break</b>;</td></tr>
<tr><th id="3600">3600</th><td>	<b>case</b> <kbd>'\\'</kbd>:</td></tr>
<tr><th id="3601">3601</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a>++ = <kbd>'\\'</kbd>;</td></tr>
<tr><th id="3602">3602</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a> = <kbd>'\\'</kbd>;</td></tr>
<tr><th id="3603">3603</th><td>	    <b>break</b>;</td></tr>
<tr><th id="3604">3604</th><td>	<b>case</b> <kbd>' '</kbd>:</td></tr>
<tr><th id="3605">3605</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a>++ = <kbd>'\\'</kbd>;</td></tr>
<tr><th id="3606">3606</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a>++ = <kbd>'0'</kbd>;</td></tr>
<tr><th id="3607">3607</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a>++ = <kbd>'4'</kbd>;</td></tr>
<tr><th id="3608">3608</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a> = <kbd>'0'</kbd>;</td></tr>
<tr><th id="3609">3609</th><td>	    <b>break</b>;</td></tr>
<tr><th id="3610">3610</th><td>	<b>case</b> <kbd>'$'</kbd>:</td></tr>
<tr><th id="3611">3611</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a>++ = <kbd>'\\'</kbd>;</td></tr>
<tr><th id="3612">3612</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a>++ = <kbd>'0'</kbd>;</td></tr>
<tr><th id="3613">3613</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a>++ = <kbd>'4'</kbd>;</td></tr>
<tr><th id="3614">3614</th><td>	    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a> = <kbd>'4'</kbd>;</td></tr>
<tr><th id="3615">3615</th><td>	    <b>break</b>;</td></tr>
<tr><th id="3616">3616</th><td>	}</td></tr>
<tr><th id="3617">3617</th><td>    }</td></tr>
<tr><th id="3618">3618</th><td></td></tr>
<tr><th id="3619">3619</th><td>    *<a class="local col5 ref" href="#325t" title='t' data-ref="325t" data-ref-filename="325t">t</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="3620">3620</th><td></td></tr>
<tr><th id="3621">3621</th><td>    <b>return</b> <a class="local col4 ref" href="#324ret" title='ret' data-ref="324ret" data-ref-filename="324ret">ret</a>;</td></tr>
<tr><th id="3622">3622</th><td>}</td></tr>
<tr><th id="3623">3623</th><td></td></tr>
<tr><th id="3624">3624</th><td></td></tr>
<tr><th id="3625">3625</th><td></td></tr>
<tr><th id="3626">3626</th><td><i  data-doc="expand_keywords">/* Expand RCS keywords in the memory buffer BUF of length LEN.  This</i></td></tr>
<tr><th id="3627">3627</th><td><i  data-doc="expand_keywords">   applies to file RCS and version VERS.  If NAME is not NULL, and is</i></td></tr>
<tr><th id="3628">3628</th><td><i  data-doc="expand_keywords">   not a numeric revision, then it is the symbolic tag used for the</i></td></tr>
<tr><th id="3629">3629</th><td><i  data-doc="expand_keywords">   checkout.  EXPAND indicates how to expand the keywords.  This</i></td></tr>
<tr><th id="3630">3630</th><td><i  data-doc="expand_keywords">   function sets *RETBUF and *RETLEN to the new buffer and length.</i></td></tr>
<tr><th id="3631">3631</th><td><i  data-doc="expand_keywords">   This function may modify the buffer BUF.  If BUF != *RETBUF, then</i></td></tr>
<tr><th id="3632">3632</th><td><i  data-doc="expand_keywords">   RETBUF is a newly allocated buffer.  */</i></td></tr>
<tr><th id="3633">3633</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="3634">3634</th><td><dfn class="tu decl def fn" id="expand_keywords" title='expand_keywords' data-type='void expand_keywords(RCSNode * rcs, RCSVers * ver, const char * name, const char * log, size_t loglen, enum kflag expand, char * buf, size_t len, char ** retbuf, size_t * retlen)' data-ref="expand_keywords" data-ref-filename="expand_keywords">expand_keywords</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col8 decl" id="328rcs" title='rcs' data-type='RCSNode *' data-ref="328rcs" data-ref-filename="328rcs">rcs</dfn>, <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col9 decl" id="329ver" title='ver' data-type='RCSVers *' data-ref="329ver" data-ref-filename="329ver">ver</dfn>, <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="330name" title='name' data-type='const char *' data-ref="330name" data-ref-filename="330name">name</dfn>, <em>const</em> <em>char</em> *<dfn class="local col1 decl" id="331log" title='log' data-type='const char *' data-ref="331log" data-ref-filename="331log">log</dfn>,</td></tr>
<tr><th id="3635">3635</th><td>		 <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col2 decl" id="332loglen" title='loglen' data-type='size_t' data-ref="332loglen" data-ref-filename="332loglen">loglen</dfn>, <b>enum</b> <a class="type" href="#kflag" title='kflag' data-ref="kflag" data-ref-filename="kflag">kflag</a> <dfn class="local col3 decl" id="333expand" title='expand' data-type='enum kflag' data-ref="333expand" data-ref-filename="333expand">expand</dfn>, <em>char</em> *<dfn class="local col4 decl" id="334buf" title='buf' data-type='char *' data-ref="334buf" data-ref-filename="334buf">buf</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col5 decl" id="335len" title='len' data-type='size_t' data-ref="335len" data-ref-filename="335len">len</dfn>,</td></tr>
<tr><th id="3636">3636</th><td>		 <em>char</em> **<dfn class="local col6 decl" id="336retbuf" title='retbuf' data-type='char **' data-ref="336retbuf" data-ref-filename="336retbuf">retbuf</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> *<dfn class="local col7 decl" id="337retlen" title='retlen' data-type='size_t *' data-ref="337retlen" data-ref-filename="337retlen">retlen</dfn>)</td></tr>
<tr><th id="3637">3637</th><td>{</td></tr>
<tr><th id="3638">3638</th><td>    <b>struct</b> <dfn class="local col8 type" id="338expand_buffer" title='expand_buffer' data-ref="338expand_buffer" data-ref-filename="338expand_buffer"><a class="local col8 type" href="#338expand_buffer" title='expand_buffer' data-ref="338expand_buffer" data-ref-filename="338expand_buffer">expand_buffer</a></dfn></td></tr>
<tr><th id="3639">3639</th><td>    {</td></tr>
<tr><th id="3640">3640</th><td>	<b>struct</b> <a class="local col8 type" href="#338expand_buffer" title='expand_buffer' data-ref="338expand_buffer" data-ref-filename="338expand_buffer">expand_buffer</a> *<dfn class="local col9 decl field" id="339next" title='next' data-type='struct expand_buffer *' data-ref="339next" data-ref-filename="339next">next</dfn>;</td></tr>
<tr><th id="3641">3641</th><td>	<em>char</em> *<dfn class="local col0 decl field" id="340data" title='data' data-type='char *' data-ref="340data" data-ref-filename="340data">data</dfn>;</td></tr>
<tr><th id="3642">3642</th><td>	<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col1 decl field" id="341len" title='len' data-type='size_t' data-ref="341len" data-ref-filename="341len">len</dfn>;</td></tr>
<tr><th id="3643">3643</th><td>	<em>int</em> <dfn class="local col2 decl field" id="342free_data" title='free_data' data-type='int' data-ref="342free_data" data-ref-filename="342free_data">free_data</dfn>;</td></tr>
<tr><th id="3644">3644</th><td>    } *<dfn class="local col3 decl" id="343ebufs" title='ebufs' data-type='struct expand_buffer *' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3645">3645</th><td>    <b>struct</b> <a class="local col8 type" href="#338expand_buffer" title='expand_buffer' data-ref="338expand_buffer" data-ref-filename="338expand_buffer">expand_buffer</a> *<dfn class="local col4 decl" id="344ebuf_last" title='ebuf_last' data-type='struct expand_buffer *' data-ref="344ebuf_last" data-ref-filename="344ebuf_last">ebuf_last</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3646">3646</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col5 decl" id="345ebuf_len" title='ebuf_len' data-type='size_t' data-ref="345ebuf_len" data-ref-filename="345ebuf_len">ebuf_len</dfn> = <var>0</var>;</td></tr>
<tr><th id="3647">3647</th><td>    <em>char</em> *<dfn class="local col6 decl" id="346locker" title='locker' data-type='char *' data-ref="346locker" data-ref-filename="346locker">locker</dfn>;</td></tr>
<tr><th id="3648">3648</th><td>    <em>char</em> *<dfn class="local col7 decl" id="347srch" title='srch' data-type='char *' data-ref="347srch" data-ref-filename="347srch">srch</dfn>, *<dfn class="local col8 decl" id="348srch_next" title='srch_next' data-type='char *' data-ref="348srch_next" data-ref-filename="348srch_next">srch_next</dfn>;</td></tr>
<tr><th id="3649">3649</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col9 decl" id="349srch_len" title='srch_len' data-type='size_t' data-ref="349srch_len" data-ref-filename="349srch_len">srch_len</dfn>;</td></tr>
<tr><th id="3650">3650</th><td>    <em>const</em> <b>struct</b> <a class="type" href="#rcs_keyword" title='rcs_keyword' data-ref="rcs_keyword" data-ref-filename="rcs_keyword">rcs_keyword</a> *<dfn class="local col0 decl" id="350keywords" title='keywords' data-type='const struct rcs_keyword *' data-ref="350keywords" data-ref-filename="350keywords">keywords</dfn>;</td></tr>
<tr><th id="3651">3651</th><td></td></tr>
<tr><th id="3652">3652</th><td>    <b>if</b> (!<a class="ref" href="cvs.h.html#config" title='config' data-ref="config" data-ref-filename="config">config</a> <i>/* For `cvs init', config may not be set.  */</i></td></tr>
<tr><th id="3653">3653</th><td>	||<a class="local col3 ref" href="#333expand" title='expand' data-ref="333expand" data-ref-filename="333expand">expand</a> == <a class="enum" href="#KFLAG_O" title='KFLAG_O' data-ref="KFLAG_O" data-ref-filename="KFLAG_O">KFLAG_O</a> || <a class="local col3 ref" href="#333expand" title='expand' data-ref="333expand" data-ref-filename="333expand">expand</a> == <a class="enum" href="#KFLAG_B" title='KFLAG_B' data-ref="KFLAG_B" data-ref-filename="KFLAG_B">KFLAG_B</a>)</td></tr>
<tr><th id="3654">3654</th><td>    {</td></tr>
<tr><th id="3655">3655</th><td>	*<a class="local col6 ref" href="#336retbuf" title='retbuf' data-ref="336retbuf" data-ref-filename="336retbuf">retbuf</a> = <a class="local col4 ref" href="#334buf" title='buf' data-ref="334buf" data-ref-filename="334buf">buf</a>;</td></tr>
<tr><th id="3656">3656</th><td>	*<a class="local col7 ref" href="#337retlen" title='retlen' data-ref="337retlen" data-ref-filename="337retlen">retlen</a> = <a class="local col5 ref" href="#335len" title='len' data-ref="335len" data-ref-filename="335len">len</a>;</td></tr>
<tr><th id="3657">3657</th><td>	<b>return</b>;</td></tr>
<tr><th id="3658">3658</th><td>    }</td></tr>
<tr><th id="3659">3659</th><td></td></tr>
<tr><th id="3660">3660</th><td>    <b>if</b> (!<a class="ref" href="cvs.h.html#config" title='config' data-ref="config" data-ref-filename="config">config</a>-&gt;<a class="ref field" href="parseinfo.h.html#config::keywords" title='config::keywords' data-ref="config::keywords" data-ref-filename="config..keywords">keywords</a>) <a class="ref" href="cvs.h.html#config" title='config' data-ref="config" data-ref-filename="config">config</a>-&gt;<a class="ref field" href="parseinfo.h.html#config::keywords" title='config::keywords' data-ref="config::keywords" data-ref-filename="config..keywords">keywords</a> = <a class="tu ref fn" href="#new_keywords" title='new_keywords' data-use='c' data-ref="new_keywords" data-ref-filename="new_keywords">new_keywords</a> ();</td></tr>
<tr><th id="3661">3661</th><td>    <a class="local col0 ref" href="#350keywords" title='keywords' data-ref="350keywords" data-ref-filename="350keywords">keywords</a> = <a class="ref" href="cvs.h.html#config" title='config' data-ref="config" data-ref-filename="config">config</a>-&gt;<a class="ref field" href="parseinfo.h.html#config::keywords" title='config::keywords' data-ref="config::keywords" data-ref-filename="config..keywords">keywords</a>;</td></tr>
<tr><th id="3662">3662</th><td></td></tr>
<tr><th id="3663">3663</th><td>    <i>/* If we are using -kkvl, dig out the locker information if any.  */</i></td></tr>
<tr><th id="3664">3664</th><td>    <a class="local col6 ref" href="#346locker" title='locker' data-ref="346locker" data-ref-filename="346locker">locker</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3665">3665</th><td>    <b>if</b> (<a class="local col3 ref" href="#333expand" title='expand' data-ref="333expand" data-ref-filename="333expand">expand</a> == <a class="enum" href="#KFLAG_KVL" title='KFLAG_KVL' data-ref="KFLAG_KVL" data-ref-filename="KFLAG_KVL">KFLAG_KVL</a>)</td></tr>
<tr><th id="3666">3666</th><td>    {</td></tr>
<tr><th id="3667">3667</th><td>	<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col1 decl" id="351lock" title='lock' data-type='Node *' data-ref="351lock" data-ref-filename="351lock">lock</dfn>;</td></tr>
<tr><th id="3668">3668</th><td>	<a class="local col1 ref" href="#351lock" title='lock' data-ref="351lock" data-ref-filename="351lock">lock</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="ref fn" href="#RCS_getlocks" title='RCS_getlocks' data-ref="RCS_getlocks" data-ref-filename="RCS_getlocks">RCS_getlocks</a>(<a class="local col8 ref" href="#328rcs" title='rcs' data-ref="328rcs" data-ref-filename="328rcs">rcs</a>), <a class="local col9 ref" href="#329ver" title='ver' data-ref="329ver" data-ref-filename="329ver">ver</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="3669">3669</th><td>	<b>if</b> (<a class="local col1 ref" href="#351lock" title='lock' data-ref="351lock" data-ref-filename="351lock">lock</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3670">3670</th><td>	    <a class="local col6 ref" href="#346locker" title='locker' data-ref="346locker" data-ref-filename="346locker">locker</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col1 ref" href="#351lock" title='lock' data-ref="351lock" data-ref-filename="351lock">lock</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>);</td></tr>
<tr><th id="3671">3671</th><td>    }</td></tr>
<tr><th id="3672">3672</th><td></td></tr>
<tr><th id="3673">3673</th><td>    <i>/* RCS keywords look like $STRING$ or $STRING: VALUE$.  */</i></td></tr>
<tr><th id="3674">3674</th><td>    <a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a> = <a class="local col4 ref" href="#334buf" title='buf' data-ref="334buf" data-ref-filename="334buf">buf</a>;</td></tr>
<tr><th id="3675">3675</th><td>    <a class="local col9 ref" href="#349srch_len" title='srch_len' data-ref="349srch_len" data-ref-filename="349srch_len">srch_len</a> = <a class="local col5 ref" href="#335len" title='len' data-ref="335len" data-ref-filename="335len">len</a>;</td></tr>
<tr><th id="3676">3676</th><td>    <b>while</b> ((<a class="local col8 ref" href="#348srch_next" title='srch_next' data-ref="348srch_next" data-ref-filename="348srch_next">srch_next</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memchr" title='memchr' data-ref="memchr" data-ref-filename="memchr">memchr</a> (<a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a>, <kbd>'$'</kbd>, <a class="local col9 ref" href="#349srch_len" title='srch_len' data-ref="349srch_len" data-ref-filename="349srch_len">srch_len</a>)) != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3677">3677</th><td>    {</td></tr>
<tr><th id="3678">3678</th><td>	<em>char</em> *<dfn class="local col2 decl" id="352s" title='s' data-type='char *' data-ref="352s" data-ref-filename="352s">s</dfn>, *<dfn class="local col3 decl" id="353send" title='send' data-type='char *' data-ref="353send" data-ref-filename="353send">send</dfn>;</td></tr>
<tr><th id="3679">3679</th><td>	<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col4 decl" id="354slen" title='slen' data-type='size_t' data-ref="354slen" data-ref-filename="354slen">slen</dfn>;</td></tr>
<tr><th id="3680">3680</th><td>	<em>const</em> <b>struct</b> <a class="type" href="#rcs_keyword" title='rcs_keyword' data-ref="rcs_keyword" data-ref-filename="rcs_keyword">rcs_keyword</a> *<dfn class="local col5 decl" id="355keyword" title='keyword' data-type='const struct rcs_keyword *' data-ref="355keyword" data-ref-filename="355keyword">keyword</dfn>;</td></tr>
<tr><th id="3681">3681</th><td>	<em>char</em> *<dfn class="local col6 decl" id="356value" title='value' data-type='char *' data-ref="356value" data-ref-filename="356value">value</dfn>;</td></tr>
<tr><th id="3682">3682</th><td>	<em>int</em> <dfn class="local col7 decl" id="357free_value" title='free_value' data-type='int' data-ref="357free_value" data-ref-filename="357free_value">free_value</dfn>;</td></tr>
<tr><th id="3683">3683</th><td>	<em>char</em> *<dfn class="local col8 decl" id="358sub" title='sub' data-type='char *' data-ref="358sub" data-ref-filename="358sub">sub</dfn>;</td></tr>
<tr><th id="3684">3684</th><td>	<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col9 decl" id="359sublen" title='sublen' data-type='size_t' data-ref="359sublen" data-ref-filename="359sublen">sublen</dfn>;</td></tr>
<tr><th id="3685">3685</th><td></td></tr>
<tr><th id="3686">3686</th><td>	<a class="local col9 ref" href="#349srch_len" title='srch_len' data-ref="349srch_len" data-ref-filename="349srch_len">srch_len</a> -= (<a class="local col8 ref" href="#348srch_next" title='srch_next' data-ref="348srch_next" data-ref-filename="348srch_next">srch_next</a> + <var>1</var>) - <a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a>;</td></tr>
<tr><th id="3687">3687</th><td>	<a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a> = <a class="local col8 ref" href="#348srch_next" title='srch_next' data-ref="348srch_next" data-ref-filename="348srch_next">srch_next</a> + <var>1</var>;</td></tr>
<tr><th id="3688">3688</th><td></td></tr>
<tr><th id="3689">3689</th><td>	<i>/* Look for the first non alphabetic character after the '$'.  */</i></td></tr>
<tr><th id="3690">3690</th><td>	<a class="local col3 ref" href="#353send" title='send' data-ref="353send" data-ref-filename="353send">send</a> = <a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a> + <a class="local col9 ref" href="#349srch_len" title='srch_len' data-ref="349srch_len" data-ref-filename="349srch_len">srch_len</a>;</td></tr>
<tr><th id="3691">3691</th><td>	<b>for</b> (<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> = <a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a>; <a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> &lt; <a class="local col3 ref" href="#353send" title='send' data-ref="353send" data-ref-filename="353send">send</a>; <a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a>++)</td></tr>
<tr><th id="3692">3692</th><td>	    <b>if</b> (! <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#49" title="((int)((_ctype_tab_ + 1)[((unsigned char) *s)] &amp; 0x0001))" data-ref="_M/isalpha">isalpha</a> ((<em>unsigned</em> <em>char</em>) *<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a>))</td></tr>
<tr><th id="3693">3693</th><td>		<b>break</b>;</td></tr>
<tr><th id="3694">3694</th><td></td></tr>
<tr><th id="3695">3695</th><td>	<i>/* If the first non alphabetic character is not '$' or ':',</i></td></tr>
<tr><th id="3696">3696</th><td><i>           then this is not an RCS keyword.  */</i></td></tr>
<tr><th id="3697">3697</th><td>	<b>if</b> (<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> == <a class="local col3 ref" href="#353send" title='send' data-ref="353send" data-ref-filename="353send">send</a> || (*<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> != <kbd>'$'</kbd> &amp;&amp; *<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> != <kbd>':'</kbd>))</td></tr>
<tr><th id="3698">3698</th><td>	    <b>continue</b>;</td></tr>
<tr><th id="3699">3699</th><td></td></tr>
<tr><th id="3700">3700</th><td>	<i>/* See if this is one of the keywords.  */</i></td></tr>
<tr><th id="3701">3701</th><td>	<a class="local col4 ref" href="#354slen" title='slen' data-ref="354slen" data-ref-filename="354slen">slen</a> = <a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> - <a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a>;</td></tr>
<tr><th id="3702">3702</th><td>	<b>for</b> (<a class="local col5 ref" href="#355keyword" title='keyword' data-ref="355keyword" data-ref-filename="355keyword">keyword</a> = <a class="local col0 ref" href="#350keywords" title='keywords' data-ref="350keywords" data-ref-filename="350keywords">keywords</a>; <a class="local col5 ref" href="#355keyword" title='keyword' data-ref="355keyword" data-ref-filename="355keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::string" title='rcs_keyword::string' data-use='r' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>; <a class="local col5 ref" href="#355keyword" title='keyword' data-ref="355keyword" data-ref-filename="355keyword">keyword</a>++)</td></tr>
<tr><th id="3703">3703</th><td>	{</td></tr>
<tr><th id="3704">3704</th><td>	    <b>if</b> (<a class="local col5 ref" href="#355keyword" title='keyword' data-ref="355keyword" data-ref-filename="355keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::expandit" title='rcs_keyword::expandit' data-use='r' data-ref="rcs_keyword::expandit" data-ref-filename="rcs_keyword..expandit">expandit</a></td></tr>
<tr><th id="3705">3705</th><td>		&amp;&amp; <a class="local col5 ref" href="#355keyword" title='keyword' data-ref="355keyword" data-ref-filename="355keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::len" title='rcs_keyword::len' data-use='r' data-ref="rcs_keyword::len" data-ref-filename="rcs_keyword..len">len</a> == <a class="local col4 ref" href="#354slen" title='slen' data-ref="354slen" data-ref-filename="354slen">slen</a></td></tr>
<tr><th id="3706">3706</th><td>		&amp;&amp; <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col5 ref" href="#355keyword" title='keyword' data-ref="355keyword" data-ref-filename="355keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::string" title='rcs_keyword::string' data-use='r' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</a>, <a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a>, <a class="local col4 ref" href="#354slen" title='slen' data-ref="354slen" data-ref-filename="354slen">slen</a>) == <var>0</var>)</td></tr>
<tr><th id="3707">3707</th><td>	    {</td></tr>
<tr><th id="3708">3708</th><td>		<b>break</b>;</td></tr>
<tr><th id="3709">3709</th><td>	    }</td></tr>
<tr><th id="3710">3710</th><td>	}</td></tr>
<tr><th id="3711">3711</th><td>	<b>if</b> (<a class="local col5 ref" href="#355keyword" title='keyword' data-ref="355keyword" data-ref-filename="355keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::string" title='rcs_keyword::string' data-use='r' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3712">3712</th><td>	    <b>continue</b>;</td></tr>
<tr><th id="3713">3713</th><td></td></tr>
<tr><th id="3714">3714</th><td>	<i>/* If the keyword ends with a ':', then the old value consists</i></td></tr>
<tr><th id="3715">3715</th><td><i>           of the characters up to the next '$'.  If there is no '$'</i></td></tr>
<tr><th id="3716">3716</th><td><i>           before the end of the line, though, then this wasn't an RCS</i></td></tr>
<tr><th id="3717">3717</th><td><i>           keyword after all.  */</i></td></tr>
<tr><th id="3718">3718</th><td>	<b>if</b> (*<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> == <kbd>':'</kbd>)</td></tr>
<tr><th id="3719">3719</th><td>	{</td></tr>
<tr><th id="3720">3720</th><td>	    <b>for</b> (; <a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> &lt; <a class="local col3 ref" href="#353send" title='send' data-ref="353send" data-ref-filename="353send">send</a>; <a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a>++)</td></tr>
<tr><th id="3721">3721</th><td>		<b>if</b> (*<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> == <kbd>'$'</kbd> || *<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> == <kbd>'\n'</kbd>)</td></tr>
<tr><th id="3722">3722</th><td>		    <b>break</b>;</td></tr>
<tr><th id="3723">3723</th><td>	    <b>if</b> (<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> == <a class="local col3 ref" href="#353send" title='send' data-ref="353send" data-ref-filename="353send">send</a> || *<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> != <kbd>'$'</kbd>)</td></tr>
<tr><th id="3724">3724</th><td>		<b>continue</b>;</td></tr>
<tr><th id="3725">3725</th><td>	}</td></tr>
<tr><th id="3726">3726</th><td></td></tr>
<tr><th id="3727">3727</th><td>	<i>/* At this point we must replace the string from SRCH to S</i></td></tr>
<tr><th id="3728">3728</th><td><i>           with the expansion of the keyword KW.  */</i></td></tr>
<tr><th id="3729">3729</th><td></td></tr>
<tr><th id="3730">3730</th><td>	<i>/* Get the value to use.  */</i></td></tr>
<tr><th id="3731">3731</th><td>	<a class="local col7 ref" href="#357free_value" title='free_value' data-ref="357free_value" data-ref-filename="357free_value">free_value</a> = <var>0</var>;</td></tr>
<tr><th id="3732">3732</th><td>	<b>if</b> (<a class="local col3 ref" href="#333expand" title='expand' data-ref="333expand" data-ref-filename="333expand">expand</a> == <a class="enum" href="#KFLAG_K" title='KFLAG_K' data-ref="KFLAG_K" data-ref-filename="KFLAG_K">KFLAG_K</a>)</td></tr>
<tr><th id="3733">3733</th><td>	    <a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3734">3734</th><td>	<b>else</b></td></tr>
<tr><th id="3735">3735</th><td>	{</td></tr>
<tr><th id="3736">3736</th><td>	    <b>switch</b> (<a class="local col5 ref" href="#355keyword" title='keyword' data-ref="355keyword" data-ref-filename="355keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::expandto" title='rcs_keyword::expandto' data-use='r' data-ref="rcs_keyword::expandto" data-ref-filename="rcs_keyword..expandto">expandto</a>)</td></tr>
<tr><th id="3737">3737</th><td>	    {</td></tr>
<tr><th id="3738">3738</th><td>	    <b>default</b>:</td></tr>
<tr><th id="3739">3739</th><td>		<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((!&quot;unreached&quot;) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 3739, __func__, &quot;!\&quot;unreached\&quot;&quot;))" data-ref="_M/assert">assert</a> (!<q>"unreached"</q>);</td></tr>
<tr><th id="3740">3740</th><td></td></tr>
<tr><th id="3741">3741</th><td>	    <b>case</b> <a class="enum" href="#KEYWORD_AUTHOR" title='KEYWORD_AUTHOR' data-ref="KEYWORD_AUTHOR" data-ref-filename="KEYWORD_AUTHOR">KEYWORD_AUTHOR</a>:</td></tr>
<tr><th id="3742">3742</th><td>		<a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a> = <a class="local col9 ref" href="#329ver" title='ver' data-ref="329ver" data-ref-filename="329ver">ver</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::author" title='rcsversnode::author' data-ref="rcsversnode::author" data-ref-filename="rcsversnode..author">author</a>;</td></tr>
<tr><th id="3743">3743</th><td>		<b>break</b>;</td></tr>
<tr><th id="3744">3744</th><td></td></tr>
<tr><th id="3745">3745</th><td>	    <b>case</b> <a class="enum" href="#KEYWORD_DATE" title='KEYWORD_DATE' data-ref="KEYWORD_DATE" data-ref-filename="KEYWORD_DATE">KEYWORD_DATE</a>:</td></tr>
<tr><th id="3746">3746</th><td>		<a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a> = <a class="tu ref fn" href="#printable_date" title='printable_date' data-use='c' data-ref="printable_date" data-ref-filename="printable_date">printable_date</a> (<a class="local col9 ref" href="#329ver" title='ver' data-ref="329ver" data-ref-filename="329ver">ver</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>);</td></tr>
<tr><th id="3747">3747</th><td>		<a class="local col7 ref" href="#357free_value" title='free_value' data-ref="357free_value" data-ref-filename="357free_value">free_value</a> = <var>1</var>;</td></tr>
<tr><th id="3748">3748</th><td>		<b>break</b>;</td></tr>
<tr><th id="3749">3749</th><td></td></tr>
<tr><th id="3750">3750</th><td>	    <b>case</b> <a class="enum" href="#KEYWORD_CVSHEADER" title='KEYWORD_CVSHEADER' data-ref="KEYWORD_CVSHEADER" data-ref-filename="KEYWORD_CVSHEADER">KEYWORD_CVSHEADER</a>:</td></tr>
<tr><th id="3751">3751</th><td>	    <b>case</b> <a class="enum" href="#KEYWORD_HEADER" title='KEYWORD_HEADER' data-ref="KEYWORD_HEADER" data-ref-filename="KEYWORD_HEADER">KEYWORD_HEADER</a>:</td></tr>
<tr><th id="3752">3752</th><td>	    <b>case</b> <a class="enum" href="#KEYWORD_ID" title='KEYWORD_ID' data-ref="KEYWORD_ID" data-ref-filename="KEYWORD_ID">KEYWORD_ID</a>:</td></tr>
<tr><th id="3753">3753</th><td>	    <b>case</b> <a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a>:</td></tr>
<tr><th id="3754">3754</th><td>		{</td></tr>
<tr><th id="3755">3755</th><td>		    <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="360path" title='path' data-type='const char *' data-ref="360path" data-ref-filename="360path">path</dfn>;</td></tr>
<tr><th id="3756">3756</th><td>		    <em>int</em> <dfn class="local col1 decl" id="361free_path" title='free_path' data-type='int' data-ref="361free_path" data-ref-filename="361free_path">free_path</dfn>;</td></tr>
<tr><th id="3757">3757</th><td>		    <em>char</em> *<dfn class="local col2 decl" id="362date" title='date' data-type='char *' data-ref="362date" data-ref-filename="362date">date</dfn>;</td></tr>
<tr><th id="3758">3758</th><td>		    <em>char</em> *<dfn class="local col3 decl" id="363old_path" title='old_path' data-type='char *' data-ref="363old_path" data-ref-filename="363old_path">old_path</dfn>;</td></tr>
<tr><th id="3759">3759</th><td></td></tr>
<tr><th id="3760">3760</th><td>		    <a class="local col3 ref" href="#363old_path" title='old_path' data-ref="363old_path" data-ref-filename="363old_path">old_path</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3761">3761</th><td>		    <b>if</b> (<a class="local col5 ref" href="#355keyword" title='keyword' data-ref="355keyword" data-ref-filename="355keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::expandto" title='rcs_keyword::expandto' data-use='r' data-ref="rcs_keyword::expandto" data-ref-filename="rcs_keyword..expandto">expandto</a> == <a class="enum" href="#KEYWORD_HEADER" title='KEYWORD_HEADER' data-ref="KEYWORD_HEADER" data-ref-filename="KEYWORD_HEADER">KEYWORD_HEADER</a>)</td></tr>
<tr><th id="3762">3762</th><td>			<a class="local col0 ref" href="#360path" title='path' data-ref="360path" data-ref-filename="360path">path</a> = <a class="local col8 ref" href="#328rcs" title='rcs' data-ref="328rcs" data-ref-filename="328rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>;</td></tr>
<tr><th id="3763">3763</th><td>		    <b>else</b> <b>if</b> (<a class="local col5 ref" href="#355keyword" title='keyword' data-ref="355keyword" data-ref-filename="355keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::expandto" title='rcs_keyword::expandto' data-use='r' data-ref="rcs_keyword::expandto" data-ref-filename="rcs_keyword..expandto">expandto</a> == <a class="enum" href="#KEYWORD_CVSHEADER" title='KEYWORD_CVSHEADER' data-ref="KEYWORD_CVSHEADER" data-ref-filename="KEYWORD_CVSHEADER">KEYWORD_CVSHEADER</a>)</td></tr>
<tr><th id="3764">3764</th><td>			<a class="local col0 ref" href="#360path" title='path' data-ref="360path" data-ref-filename="360path">path</a> = <a class="tu ref fn" href="#getfullCVSname" title='getfullCVSname' data-use='c' data-ref="getfullCVSname" data-ref-filename="getfullCVSname">getfullCVSname</a> (<a class="local col8 ref" href="#328rcs" title='rcs' data-ref="328rcs" data-ref-filename="328rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, &amp;<a class="local col3 ref" href="#363old_path" title='old_path' data-ref="363old_path" data-ref-filename="363old_path">old_path</a>);</td></tr>
<tr><th id="3765">3765</th><td>		    <b>else</b></td></tr>
<tr><th id="3766">3766</th><td>			<a class="local col0 ref" href="#360path" title='path' data-ref="360path" data-ref-filename="360path">path</a> = <a class="ref fn" href="cvs.h.html#last_component" title='last_component' data-ref="last_component" data-ref-filename="last_component">last_component</a> (<a class="local col8 ref" href="#328rcs" title='rcs' data-ref="328rcs" data-ref-filename="328rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="3767">3767</th><td>		    <a class="local col0 ref" href="#360path" title='path' data-ref="360path" data-ref-filename="360path">path</a> = <a class="tu ref fn" href="#escape_keyword_value" title='escape_keyword_value' data-use='c' data-ref="escape_keyword_value" data-ref-filename="escape_keyword_value">escape_keyword_value</a> (<a class="local col0 ref" href="#360path" title='path' data-ref="360path" data-ref-filename="360path">path</a>, &amp;<a class="local col1 ref" href="#361free_path" title='free_path' data-ref="361free_path" data-ref-filename="361free_path">free_path</a>);</td></tr>
<tr><th id="3768">3768</th><td>		    <a class="local col2 ref" href="#362date" title='date' data-ref="362date" data-ref-filename="362date">date</a> = <a class="tu ref fn" href="#printable_date" title='printable_date' data-use='c' data-ref="printable_date" data-ref-filename="printable_date">printable_date</a> (<a class="local col9 ref" href="#329ver" title='ver' data-ref="329ver" data-ref-filename="329ver">ver</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>);</td></tr>
<tr><th id="3769">3769</th><td>		    <a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a> = <a class="ref fn" href="subr.h.html#Xasprintf" title='Xasprintf' data-ref="Xasprintf" data-ref-filename="Xasprintf">Xasprintf</a> (<q>"%s %s %s %s %s%s%s"</q>,</td></tr>
<tr><th id="3770">3770</th><td>				       <a class="local col0 ref" href="#360path" title='path' data-ref="360path" data-ref-filename="360path">path</a>, <a class="local col9 ref" href="#329ver" title='ver' data-ref="329ver" data-ref-filename="329ver">ver</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <a class="local col2 ref" href="#362date" title='date' data-ref="362date" data-ref-filename="362date">date</a>, <a class="local col9 ref" href="#329ver" title='ver' data-ref="329ver" data-ref-filename="329ver">ver</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::author" title='rcsversnode::author' data-ref="rcsversnode::author" data-ref-filename="rcsversnode..author">author</a>,</td></tr>
<tr><th id="3771">3771</th><td>				       <a class="local col9 ref" href="#329ver" title='ver' data-ref="329ver" data-ref-filename="329ver">ver</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::state" title='rcsversnode::state' data-ref="rcsversnode::state" data-ref-filename="rcsversnode..state">state</a>,</td></tr>
<tr><th id="3772">3772</th><td>				       <a class="local col6 ref" href="#346locker" title='locker' data-ref="346locker" data-ref-filename="346locker">locker</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> ? <q>" "</q> : <q>""</q>,</td></tr>
<tr><th id="3773">3773</th><td>				       <a class="local col6 ref" href="#346locker" title='locker' data-ref="346locker" data-ref-filename="346locker">locker</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> ? <a class="local col6 ref" href="#346locker" title='locker' data-ref="346locker" data-ref-filename="346locker">locker</a> : <q>""</q>);</td></tr>
<tr><th id="3774">3774</th><td>		    <b>if</b> (<a class="local col1 ref" href="#361free_path" title='free_path' data-ref="361free_path" data-ref-filename="361free_path">free_path</a>)</td></tr>
<tr><th id="3775">3775</th><td>			<i>/* If free_path is set then we know we allocated path</i></td></tr>
<tr><th id="3776">3776</th><td><i>			 * and we can discard the const.</i></td></tr>
<tr><th id="3777">3777</th><td><i>			 */</i></td></tr>
<tr><th id="3778">3778</th><td>			<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> ((<em>char</em> *)<a class="local col0 ref" href="#360path" title='path' data-ref="360path" data-ref-filename="360path">path</a>);</td></tr>
<tr><th id="3779">3779</th><td>		    <b>if</b> (<a class="local col3 ref" href="#363old_path" title='old_path' data-ref="363old_path" data-ref-filename="363old_path">old_path</a>)</td></tr>
<tr><th id="3780">3780</th><td>			<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#363old_path" title='old_path' data-ref="363old_path" data-ref-filename="363old_path">old_path</a>);</td></tr>
<tr><th id="3781">3781</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#362date" title='date' data-ref="362date" data-ref-filename="362date">date</a>);</td></tr>
<tr><th id="3782">3782</th><td>		    <a class="local col7 ref" href="#357free_value" title='free_value' data-ref="357free_value" data-ref-filename="357free_value">free_value</a> = <var>1</var>;</td></tr>
<tr><th id="3783">3783</th><td>		}</td></tr>
<tr><th id="3784">3784</th><td>		<b>break</b>;</td></tr>
<tr><th id="3785">3785</th><td></td></tr>
<tr><th id="3786">3786</th><td>	    <b>case</b> <a class="enum" href="#KEYWORD_LOCKER" title='KEYWORD_LOCKER' data-ref="KEYWORD_LOCKER" data-ref-filename="KEYWORD_LOCKER">KEYWORD_LOCKER</a>:</td></tr>
<tr><th id="3787">3787</th><td>		<a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a> = <a class="local col6 ref" href="#346locker" title='locker' data-ref="346locker" data-ref-filename="346locker">locker</a>;</td></tr>
<tr><th id="3788">3788</th><td>		<b>break</b>;</td></tr>
<tr><th id="3789">3789</th><td></td></tr>
<tr><th id="3790">3790</th><td>	    <b>case</b> <a class="enum" href="#KEYWORD_LOG" title='KEYWORD_LOG' data-ref="KEYWORD_LOG" data-ref-filename="KEYWORD_LOG">KEYWORD_LOG</a>:</td></tr>
<tr><th id="3791">3791</th><td>	    <b>case</b> <a class="enum" href="#KEYWORD_RCSFILE" title='KEYWORD_RCSFILE' data-ref="KEYWORD_RCSFILE" data-ref-filename="KEYWORD_RCSFILE">KEYWORD_RCSFILE</a>:</td></tr>
<tr><th id="3792">3792</th><td>		<a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a> = <a class="tu ref fn" href="#escape_keyword_value" title='escape_keyword_value' data-use='c' data-ref="escape_keyword_value" data-ref-filename="escape_keyword_value">escape_keyword_value</a> (<a class="ref fn" href="cvs.h.html#last_component" title='last_component' data-ref="last_component" data-ref-filename="last_component">last_component</a> (<a class="local col8 ref" href="#328rcs" title='rcs' data-ref="328rcs" data-ref-filename="328rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>),</td></tr>
<tr><th id="3793">3793</th><td>					      &amp;<a class="local col7 ref" href="#357free_value" title='free_value' data-ref="357free_value" data-ref-filename="357free_value">free_value</a>);</td></tr>
<tr><th id="3794">3794</th><td>		<b>break</b>;</td></tr>
<tr><th id="3795">3795</th><td></td></tr>
<tr><th id="3796">3796</th><td>	    <b>case</b> <a class="enum" href="#KEYWORD_NAME" title='KEYWORD_NAME' data-ref="KEYWORD_NAME" data-ref-filename="KEYWORD_NAME">KEYWORD_NAME</a>:</td></tr>
<tr><th id="3797">3797</th><td>		<b>if</b> (<a class="local col0 ref" href="#330name" title='name' data-ref="330name" data-ref-filename="330name">name</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; ! <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) *name)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) *<a class="local col0 ref" href="#330name" title='name' data-ref="330name" data-ref-filename="330name">name</a>))</td></tr>
<tr><th id="3798">3798</th><td>		    <a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a> = (<em>char</em> *) <a class="local col0 ref" href="#330name" title='name' data-ref="330name" data-ref-filename="330name">name</a>;</td></tr>
<tr><th id="3799">3799</th><td>		<b>else</b></td></tr>
<tr><th id="3800">3800</th><td>		    <a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="3801">3801</th><td>		<b>break</b>;</td></tr>
<tr><th id="3802">3802</th><td></td></tr>
<tr><th id="3803">3803</th><td>	    <b>case</b> <a class="enum" href="#KEYWORD_REVISION" title='KEYWORD_REVISION' data-ref="KEYWORD_REVISION" data-ref-filename="KEYWORD_REVISION">KEYWORD_REVISION</a>:</td></tr>
<tr><th id="3804">3804</th><td>		<a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a> = <a class="local col9 ref" href="#329ver" title='ver' data-ref="329ver" data-ref-filename="329ver">ver</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>;</td></tr>
<tr><th id="3805">3805</th><td>		<b>break</b>;</td></tr>
<tr><th id="3806">3806</th><td></td></tr>
<tr><th id="3807">3807</th><td>	    <b>case</b> <a class="enum" href="#KEYWORD_SOURCE" title='KEYWORD_SOURCE' data-ref="KEYWORD_SOURCE" data-ref-filename="KEYWORD_SOURCE">KEYWORD_SOURCE</a>:</td></tr>
<tr><th id="3808">3808</th><td>		<a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a> = <a class="tu ref fn" href="#escape_keyword_value" title='escape_keyword_value' data-use='c' data-ref="escape_keyword_value" data-ref-filename="escape_keyword_value">escape_keyword_value</a> (<a class="local col8 ref" href="#328rcs" title='rcs' data-ref="328rcs" data-ref-filename="328rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, &amp;<a class="local col7 ref" href="#357free_value" title='free_value' data-ref="357free_value" data-ref-filename="357free_value">free_value</a>);</td></tr>
<tr><th id="3809">3809</th><td>		<b>break</b>;</td></tr>
<tr><th id="3810">3810</th><td></td></tr>
<tr><th id="3811">3811</th><td>	    <b>case</b> <a class="enum" href="#KEYWORD_STATE" title='KEYWORD_STATE' data-ref="KEYWORD_STATE" data-ref-filename="KEYWORD_STATE">KEYWORD_STATE</a>:</td></tr>
<tr><th id="3812">3812</th><td>		<a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a> = <a class="local col9 ref" href="#329ver" title='ver' data-ref="329ver" data-ref-filename="329ver">ver</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::state" title='rcsversnode::state' data-ref="rcsversnode::state" data-ref-filename="rcsversnode..state">state</a>;</td></tr>
<tr><th id="3813">3813</th><td>		<b>break</b>;</td></tr>
<tr><th id="3814">3814</th><td>	    }</td></tr>
<tr><th id="3815">3815</th><td>	}</td></tr>
<tr><th id="3816">3816</th><td></td></tr>
<tr><th id="3817">3817</th><td>	<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="local col5 ref" href="#355keyword" title='keyword' data-ref="355keyword" data-ref-filename="355keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::len" title='rcs_keyword::len' data-use='r' data-ref="rcs_keyword::len" data-ref-filename="rcs_keyword..len">len</a></td></tr>
<tr><th id="3818">3818</th><td>		       + (<a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> ? <var>0</var> : <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a>))</td></tr>
<tr><th id="3819">3819</th><td>		       + <var>10</var>);</td></tr>
<tr><th id="3820">3820</th><td>	<b>if</b> (<a class="local col3 ref" href="#333expand" title='expand' data-ref="333expand" data-ref-filename="333expand">expand</a> == <a class="enum" href="#KFLAG_V" title='KFLAG_V' data-ref="KFLAG_V" data-ref-filename="KFLAG_V">KFLAG_V</a>)</td></tr>
<tr><th id="3821">3821</th><td>	{</td></tr>
<tr><th id="3822">3822</th><td>	    <i>/* Decrement SRCH and increment S to remove the $</i></td></tr>
<tr><th id="3823">3823</th><td><i>               characters.  */</i></td></tr>
<tr><th id="3824">3824</th><td>	    --<a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a>;</td></tr>
<tr><th id="3825">3825</th><td>	    ++<a class="local col9 ref" href="#349srch_len" title='srch_len' data-ref="349srch_len" data-ref-filename="349srch_len">srch_len</a>;</td></tr>
<tr><th id="3826">3826</th><td>	    ++<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a>;</td></tr>
<tr><th id="3827">3827</th><td>	    <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a> = <var>0</var>;</td></tr>
<tr><th id="3828">3828</th><td>	}</td></tr>
<tr><th id="3829">3829</th><td>	<b>else</b></td></tr>
<tr><th id="3830">3830</th><td>	{</td></tr>
<tr><th id="3831">3831</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcpy" title='strcpy' data-ref="strcpy" data-ref-filename="strcpy">strcpy</a> (<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a>, <a class="local col5 ref" href="#355keyword" title='keyword' data-ref="355keyword" data-ref-filename="355keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::string" title='rcs_keyword::string' data-use='r' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</a>);</td></tr>
<tr><th id="3832">3832</th><td>	    <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col5 ref" href="#355keyword" title='keyword' data-ref="355keyword" data-ref-filename="355keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::string" title='rcs_keyword::string' data-use='r' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</a>);</td></tr>
<tr><th id="3833">3833</th><td>	    <b>if</b> (<a class="local col3 ref" href="#333expand" title='expand' data-ref="333expand" data-ref-filename="333expand">expand</a> != <a class="enum" href="#KFLAG_K" title='KFLAG_K' data-ref="KFLAG_K" data-ref-filename="KFLAG_K">KFLAG_K</a>)</td></tr>
<tr><th id="3834">3834</th><td>	    {</td></tr>
<tr><th id="3835">3835</th><td>		<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a>[<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>] = <kbd>':'</kbd>;</td></tr>
<tr><th id="3836">3836</th><td>		<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a>[<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a> + <var>1</var>] = <kbd>' '</kbd>;</td></tr>
<tr><th id="3837">3837</th><td>		<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a> += <var>2</var>;</td></tr>
<tr><th id="3838">3838</th><td>	    }</td></tr>
<tr><th id="3839">3839</th><td>	}</td></tr>
<tr><th id="3840">3840</th><td>	<b>if</b> (<a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3841">3841</th><td>	{</td></tr>
<tr><th id="3842">3842</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcpy" title='strcpy' data-ref="strcpy" data-ref-filename="strcpy">strcpy</a> (<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a> + <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>, <a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a>);</td></tr>
<tr><th id="3843">3843</th><td>	    <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a> += <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a>);</td></tr>
<tr><th id="3844">3844</th><td>	}</td></tr>
<tr><th id="3845">3845</th><td>	<b>if</b> (<a class="local col3 ref" href="#333expand" title='expand' data-ref="333expand" data-ref-filename="333expand">expand</a> != <a class="enum" href="#KFLAG_V" title='KFLAG_V' data-ref="KFLAG_V" data-ref-filename="KFLAG_V">KFLAG_V</a> &amp;&amp; <a class="local col3 ref" href="#333expand" title='expand' data-ref="333expand" data-ref-filename="333expand">expand</a> != <a class="enum" href="#KFLAG_K" title='KFLAG_K' data-ref="KFLAG_K" data-ref-filename="KFLAG_K">KFLAG_K</a>)</td></tr>
<tr><th id="3846">3846</th><td>	{</td></tr>
<tr><th id="3847">3847</th><td>	    <a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a>[<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>] = <kbd>' '</kbd>;</td></tr>
<tr><th id="3848">3848</th><td>	    ++<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>;</td></tr>
<tr><th id="3849">3849</th><td>	    <a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a>[<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>] = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="3850">3850</th><td>	}</td></tr>
<tr><th id="3851">3851</th><td></td></tr>
<tr><th id="3852">3852</th><td>	<b>if</b> (<a class="local col7 ref" href="#357free_value" title='free_value' data-ref="357free_value" data-ref-filename="357free_value">free_value</a>)</td></tr>
<tr><th id="3853">3853</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col6 ref" href="#356value" title='value' data-ref="356value" data-ref-filename="356value">value</a>);</td></tr>
<tr><th id="3854">3854</th><td></td></tr>
<tr><th id="3855">3855</th><td>	<i>/* The Log keyword requires special handling.  This behaviour</i></td></tr>
<tr><th id="3856">3856</th><td><i>           is taken from RCS 5.7.  The special log message is what RCS</i></td></tr>
<tr><th id="3857">3857</th><td><i>           uses for ci -k.  */</i></td></tr>
<tr><th id="3858">3858</th><td>	<b>if</b> (<a class="local col5 ref" href="#355keyword" title='keyword' data-ref="355keyword" data-ref-filename="355keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::expandto" title='rcs_keyword::expandto' data-use='r' data-ref="rcs_keyword::expandto" data-ref-filename="rcs_keyword..expandto">expandto</a> == <a class="enum" href="#KEYWORD_LOG" title='KEYWORD_LOG' data-ref="KEYWORD_LOG" data-ref-filename="KEYWORD_LOG">KEYWORD_LOG</a></td></tr>
<tr><th id="3859">3859</th><td>	    &amp;&amp; (<b>sizeof</b> <q>"checked in with -k by "</q> &lt;= <a class="local col2 ref" href="#332loglen" title='loglen' data-ref="332loglen" data-ref-filename="332loglen">loglen</a></td></tr>
<tr><th id="3860">3860</th><td>		|| <a class="local col1 ref" href="#331log" title='log' data-ref="331log" data-ref-filename="331log">log</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span></td></tr>
<tr><th id="3861">3861</th><td>		|| <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col1 ref" href="#331log" title='log' data-ref="331log" data-ref-filename="331log">log</a>, <q>"checked in with -k by "</q>,</td></tr>
<tr><th id="3862">3862</th><td>			    <b>sizeof</b> <q>"checked in with -k by "</q> - <var>1</var>) != <var>0</var>))</td></tr>
<tr><th id="3863">3863</th><td>	{</td></tr>
<tr><th id="3864">3864</th><td>	    <em>char</em> *<dfn class="local col4 decl" id="364start" title='start' data-type='char *' data-ref="364start" data-ref-filename="364start">start</dfn>;</td></tr>
<tr><th id="3865">3865</th><td>	    <em>char</em> *<dfn class="local col5 decl" id="365leader" title='leader' data-type='char *' data-ref="365leader" data-ref-filename="365leader">leader</dfn>;</td></tr>
<tr><th id="3866">3866</th><td>	    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col6 decl" id="366leader_len" title='leader_len' data-type='size_t' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</dfn>, <dfn class="local col7 decl" id="367leader_sp_len" title='leader_sp_len' data-type='size_t' data-ref="367leader_sp_len" data-ref-filename="367leader_sp_len">leader_sp_len</dfn>;</td></tr>
<tr><th id="3867">3867</th><td>	    <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="368logend" title='logend' data-type='const char *' data-ref="368logend" data-ref-filename="368logend">logend</dfn>;</td></tr>
<tr><th id="3868">3868</th><td>	    <em>const</em> <em>char</em> *<dfn class="local col9 decl" id="369snl" title='snl' data-type='const char *' data-ref="369snl" data-ref-filename="369snl">snl</dfn>;</td></tr>
<tr><th id="3869">3869</th><td>	    <em>int</em> <dfn class="local col0 decl" id="370cnl" title='cnl' data-type='int' data-ref="370cnl" data-ref-filename="370cnl">cnl</dfn>;</td></tr>
<tr><th id="3870">3870</th><td>	    <em>char</em> *<dfn class="local col1 decl" id="371date" title='date' data-type='char *' data-ref="371date" data-ref-filename="371date">date</dfn>;</td></tr>
<tr><th id="3871">3871</th><td>	    <em>const</em> <em>char</em> *<dfn class="local col2 decl" id="372sl" title='sl' data-type='const char *' data-ref="372sl" data-ref-filename="372sl">sl</dfn>;</td></tr>
<tr><th id="3872">3872</th><td></td></tr>
<tr><th id="3873">3873</th><td>	    <i>/* We are going to insert the trailing $ ourselves, before</i></td></tr>
<tr><th id="3874">3874</th><td><i>               the log message, so we must remove it from S, if we</i></td></tr>
<tr><th id="3875">3875</th><td><i>               haven't done so already.  */</i></td></tr>
<tr><th id="3876">3876</th><td>	    <b>if</b> (<a class="local col3 ref" href="#333expand" title='expand' data-ref="333expand" data-ref-filename="333expand">expand</a> != <a class="enum" href="#KFLAG_V" title='KFLAG_V' data-ref="KFLAG_V" data-ref-filename="KFLAG_V">KFLAG_V</a>)</td></tr>
<tr><th id="3877">3877</th><td>		++<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a>;</td></tr>
<tr><th id="3878">3878</th><td></td></tr>
<tr><th id="3879">3879</th><td>	    <i>/* CVS never has empty log messages, but old RCS files might.  */</i></td></tr>
<tr><th id="3880">3880</th><td>	    <b>if</b> (<a class="local col1 ref" href="#331log" title='log' data-ref="331log" data-ref-filename="331log">log</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="3881">3881</th><td>		<a class="local col1 ref" href="#331log" title='log' data-ref="331log" data-ref-filename="331log">log</a> = <q>""</q>;</td></tr>
<tr><th id="3882">3882</th><td></td></tr>
<tr><th id="3883">3883</th><td>	    <i>/* Find the start of the line.  */</i></td></tr>
<tr><th id="3884">3884</th><td>	    <a class="local col4 ref" href="#364start" title='start' data-ref="364start" data-ref-filename="364start">start</a> = <a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a>;</td></tr>
<tr><th id="3885">3885</th><td>	    <a class="local col6 ref" href="#366leader_len" title='leader_len' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</a> = <var>0</var>;</td></tr>
<tr><th id="3886">3886</th><td>	    <b>while</b> (<a class="local col4 ref" href="#364start" title='start' data-ref="364start" data-ref-filename="364start">start</a> &gt; <a class="local col4 ref" href="#334buf" title='buf' data-ref="334buf" data-ref-filename="334buf">buf</a> &amp;&amp; <a class="local col4 ref" href="#364start" title='start' data-ref="364start" data-ref-filename="364start">start</a>[-<var>1</var>] != <kbd>'\n'</kbd></td></tr>
<tr><th id="3887">3887</th><td>		   &amp;&amp; <a class="local col6 ref" href="#366leader_len" title='leader_len' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</a> &lt;= <a class="ref fn" href="../lib/xsize.h.html#xsum" title='xsum' data-ref="xsum" data-ref-filename="xsum">xsum</a> (<a class="ref" href="cvs.h.html#config" title='config' data-ref="config" data-ref-filename="config">config</a>-&gt;<a class="ref field" href="parseinfo.h.html#config::MaxCommentLeaderLength" title='config::MaxCommentLeaderLength' data-ref="config::MaxCommentLeaderLength" data-ref-filename="config..MaxCommentLeaderLength">MaxCommentLeaderLength</a>,</td></tr>
<tr><th id="3888">3888</th><td>					  <a class="local col3 ref" href="#333expand" title='expand' data-ref="333expand" data-ref-filename="333expand">expand</a> != <a class="enum" href="#KFLAG_V" title='KFLAG_V' data-ref="KFLAG_V" data-ref-filename="KFLAG_V">KFLAG_V</a> ? <var>1</var> : <var>0</var>))</td></tr>
<tr><th id="3889">3889</th><td>	    {</td></tr>
<tr><th id="3890">3890</th><td>		--<a class="local col4 ref" href="#364start" title='start' data-ref="364start" data-ref-filename="364start">start</a>;</td></tr>
<tr><th id="3891">3891</th><td>		++<a class="local col6 ref" href="#366leader_len" title='leader_len' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</a>;</td></tr>
<tr><th id="3892">3892</th><td>	    }</td></tr>
<tr><th id="3893">3893</th><td></td></tr>
<tr><th id="3894">3894</th><td>	    <b>if</b> (<a class="local col3 ref" href="#333expand" title='expand' data-ref="333expand" data-ref-filename="333expand">expand</a> != <a class="enum" href="#KFLAG_V" title='KFLAG_V' data-ref="KFLAG_V" data-ref-filename="KFLAG_V">KFLAG_V</a>)</td></tr>
<tr><th id="3895">3895</th><td>		<i>/* When automagically determined and !KFLAG_V, we wish to avoid</i></td></tr>
<tr><th id="3896">3896</th><td><i>		 * including the leading `$' of the Log keyword in our leader.</i></td></tr>
<tr><th id="3897">3897</th><td><i>		 */</i></td></tr>
<tr><th id="3898">3898</th><td>		--<a class="local col6 ref" href="#366leader_len" title='leader_len' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</a>;</td></tr>
<tr><th id="3899">3899</th><td></td></tr>
<tr><th id="3900">3900</th><td>	    <i>/* If the automagically determined leader exceeds the limit set in</i></td></tr>
<tr><th id="3901">3901</th><td><i>	     * CVSROOT/config, try to use a fallback.</i></td></tr>
<tr><th id="3902">3902</th><td><i>	     */</i></td></tr>
<tr><th id="3903">3903</th><td>	    <b>if</b> (<a class="local col6 ref" href="#366leader_len" title='leader_len' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</a> &gt; <a class="ref" href="cvs.h.html#config" title='config' data-ref="config" data-ref-filename="config">config</a>-&gt;<a class="ref field" href="parseinfo.h.html#config::MaxCommentLeaderLength" title='config::MaxCommentLeaderLength' data-ref="config::MaxCommentLeaderLength" data-ref-filename="config..MaxCommentLeaderLength">MaxCommentLeaderLength</a>)</td></tr>
<tr><th id="3904">3904</th><td>	    {</td></tr>
<tr><th id="3905">3905</th><td>		<b>if</b> (<a class="ref" href="cvs.h.html#config" title='config' data-ref="config" data-ref-filename="config">config</a>-&gt;<a class="ref field" href="parseinfo.h.html#config::UseArchiveCommentLeader" title='config::UseArchiveCommentLeader' data-ref="config::UseArchiveCommentLeader" data-ref-filename="config..UseArchiveCommentLeader">UseArchiveCommentLeader</a> &amp;&amp; <a class="local col8 ref" href="#328rcs" title='rcs' data-ref="328rcs" data-ref-filename="328rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::comment" title='rcsnode::comment' data-ref="rcsnode::comment" data-ref-filename="rcsnode..comment">comment</a>)</td></tr>
<tr><th id="3906">3906</th><td>		{</td></tr>
<tr><th id="3907">3907</th><td>		    <a class="local col5 ref" href="#365leader" title='leader' data-ref="365leader" data-ref-filename="365leader">leader</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col8 ref" href="#328rcs" title='rcs' data-ref="328rcs" data-ref-filename="328rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::comment" title='rcsnode::comment' data-ref="rcsnode::comment" data-ref-filename="rcsnode..comment">comment</a>);</td></tr>
<tr><th id="3908">3908</th><td>		    <a class="local col6 ref" href="#366leader_len" title='leader_len' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col8 ref" href="#328rcs" title='rcs' data-ref="328rcs" data-ref-filename="328rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::comment" title='rcsnode::comment' data-ref="rcsnode::comment" data-ref-filename="rcsnode..comment">comment</a>);</td></tr>
<tr><th id="3909">3909</th><td>		}</td></tr>
<tr><th id="3910">3910</th><td>		<b>else</b></td></tr>
<tr><th id="3911">3911</th><td>		{</td></tr>
<tr><th id="3912">3912</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="3913">3913</th><td><q>"Skipping `$"</q> <q>"Log$' keyword due to excessive comment leader."</q>);</td></tr>
<tr><th id="3914">3914</th><td>		    <b>continue</b>;</td></tr>
<tr><th id="3915">3915</th><td>		}</td></tr>
<tr><th id="3916">3916</th><td>	    }</td></tr>
<tr><th id="3917">3917</th><td>	    <b>else</b> <i>/* leader_len &lt;= config-&gt;MaxCommentLeaderLength */</i></td></tr>
<tr><th id="3918">3918</th><td>	    {</td></tr>
<tr><th id="3919">3919</th><td>		<i>/* Copy the start of the line to use as a comment leader.  */</i></td></tr>
<tr><th id="3920">3920</th><td>		<a class="local col5 ref" href="#365leader" title='leader' data-ref="365leader" data-ref-filename="365leader">leader</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="local col6 ref" href="#366leader_len" title='leader_len' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</a>);</td></tr>
<tr><th id="3921">3921</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col5 ref" href="#365leader" title='leader' data-ref="365leader" data-ref-filename="365leader">leader</a>, <a class="local col4 ref" href="#364start" title='start' data-ref="364start" data-ref-filename="364start">start</a>, <a class="local col6 ref" href="#366leader_len" title='leader_len' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</a>);</td></tr>
<tr><th id="3922">3922</th><td>	    }</td></tr>
<tr><th id="3923">3923</th><td></td></tr>
<tr><th id="3924">3924</th><td>	    <a class="local col7 ref" href="#367leader_sp_len" title='leader_sp_len' data-ref="367leader_sp_len" data-ref-filename="367leader_sp_len">leader_sp_len</a> = <a class="local col6 ref" href="#366leader_len" title='leader_len' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</a>;</td></tr>
<tr><th id="3925">3925</th><td>	    <b>while</b> (<a class="local col7 ref" href="#367leader_sp_len" title='leader_sp_len' data-ref="367leader_sp_len" data-ref-filename="367leader_sp_len">leader_sp_len</a> &gt; <var>0</var> &amp;&amp; <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#56" title="((int)((_ctype_tab_ + 1)[(leader[leader_sp_len - 1])] &amp; 0x0040))" data-ref="_M/isspace">isspace</a> (<a class="local col5 ref" href="#365leader" title='leader' data-ref="365leader" data-ref-filename="365leader">leader</a>[<a class="local col7 ref" href="#367leader_sp_len" title='leader_sp_len' data-ref="367leader_sp_len" data-ref-filename="367leader_sp_len">leader_sp_len</a> - <var>1</var>]))</td></tr>
<tr><th id="3926">3926</th><td>		--<a class="local col7 ref" href="#367leader_sp_len" title='leader_sp_len' data-ref="367leader_sp_len" data-ref-filename="367leader_sp_len">leader_sp_len</a>;</td></tr>
<tr><th id="3927">3927</th><td></td></tr>
<tr><th id="3928">3928</th><td>	    <i>/* RCS does some checking for an old style of Log here,</i></td></tr>
<tr><th id="3929">3929</th><td><i>	       but we don't bother.  RCS issues a warning if it</i></td></tr>
<tr><th id="3930">3930</th><td><i>	       changes anything.  */</i></td></tr>
<tr><th id="3931">3931</th><td></td></tr>
<tr><th id="3932">3932</th><td>	    <i>/* Count the number of newlines in the log message so that</i></td></tr>
<tr><th id="3933">3933</th><td><i>	       we know how many copies of the leader we will need.  */</i></td></tr>
<tr><th id="3934">3934</th><td>	    <a class="local col0 ref" href="#370cnl" title='cnl' data-ref="370cnl" data-ref-filename="370cnl">cnl</a> = <var>0</var>;</td></tr>
<tr><th id="3935">3935</th><td>	    <a class="local col8 ref" href="#368logend" title='logend' data-ref="368logend" data-ref-filename="368logend">logend</a> = <a class="local col1 ref" href="#331log" title='log' data-ref="331log" data-ref-filename="331log">log</a> + <a class="local col2 ref" href="#332loglen" title='loglen' data-ref="332loglen" data-ref-filename="332loglen">loglen</a>;</td></tr>
<tr><th id="3936">3936</th><td>	    <b>for</b> (<a class="local col9 ref" href="#369snl" title='snl' data-ref="369snl" data-ref-filename="369snl">snl</a> = <a class="local col1 ref" href="#331log" title='log' data-ref="331log" data-ref-filename="331log">log</a>; <a class="local col9 ref" href="#369snl" title='snl' data-ref="369snl" data-ref-filename="369snl">snl</a> &lt; <a class="local col8 ref" href="#368logend" title='logend' data-ref="368logend" data-ref-filename="368logend">logend</a>; <a class="local col9 ref" href="#369snl" title='snl' data-ref="369snl" data-ref-filename="369snl">snl</a>++)</td></tr>
<tr><th id="3937">3937</th><td>		<b>if</b> (*<a class="local col9 ref" href="#369snl" title='snl' data-ref="369snl" data-ref-filename="369snl">snl</a> == <kbd>'\n'</kbd>)</td></tr>
<tr><th id="3938">3938</th><td>		    ++<a class="local col0 ref" href="#370cnl" title='cnl' data-ref="370cnl" data-ref-filename="370cnl">cnl</a>;</td></tr>
<tr><th id="3939">3939</th><td></td></tr>
<tr><th id="3940">3940</th><td>	    <i>/* If the log message did not end in a newline, increment</i></td></tr>
<tr><th id="3941">3941</th><td><i>	     * the newline count so we have space for the extra leader.</i></td></tr>
<tr><th id="3942">3942</th><td><i>	     * Failure to do so results in a buffer overrun.</i></td></tr>
<tr><th id="3943">3943</th><td><i>	     */</i></td></tr>
<tr><th id="3944">3944</th><td>	    <b>if</b> (<a class="local col2 ref" href="#332loglen" title='loglen' data-ref="332loglen" data-ref-filename="332loglen">loglen</a> &amp;&amp; <a class="local col9 ref" href="#369snl" title='snl' data-ref="369snl" data-ref-filename="369snl">snl</a>[-<var>1</var>] != <kbd>'\n'</kbd>)</td></tr>
<tr><th id="3945">3945</th><td>		++<a class="local col0 ref" href="#370cnl" title='cnl' data-ref="370cnl" data-ref-filename="370cnl">cnl</a>;</td></tr>
<tr><th id="3946">3946</th><td></td></tr>
<tr><th id="3947">3947</th><td>	    <a class="local col1 ref" href="#371date" title='date' data-ref="371date" data-ref-filename="371date">date</a> = <a class="tu ref fn" href="#printable_date" title='printable_date' data-use='c' data-ref="printable_date" data-ref-filename="printable_date">printable_date</a> (<a class="local col9 ref" href="#329ver" title='ver' data-ref="329ver" data-ref-filename="329ver">ver</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>);</td></tr>
<tr><th id="3948">3948</th><td>	    <a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a> = <a class="ref fn" href="../lib/xalloc.h.html#xrealloc" title='xrealloc' data-ref="xrealloc" data-ref-filename="xrealloc">xrealloc</a> (<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a>,</td></tr>
<tr><th id="3949">3949</th><td>			    (<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a></td></tr>
<tr><th id="3950">3950</th><td>			     + <b>sizeof</b> <q>"Revision"</q></td></tr>
<tr><th id="3951">3951</th><td>			     + <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col9 ref" href="#329ver" title='ver' data-ref="329ver" data-ref-filename="329ver">ver</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>)</td></tr>
<tr><th id="3952">3952</th><td>			     + <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col1 ref" href="#371date" title='date' data-ref="371date" data-ref-filename="371date">date</a>)</td></tr>
<tr><th id="3953">3953</th><td>			     + <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col9 ref" href="#329ver" title='ver' data-ref="329ver" data-ref-filename="329ver">ver</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::author" title='rcsversnode::author' data-ref="rcsversnode::author" data-ref-filename="rcsversnode..author">author</a>)</td></tr>
<tr><th id="3954">3954</th><td>			     + <a class="local col2 ref" href="#332loglen" title='loglen' data-ref="332loglen" data-ref-filename="332loglen">loglen</a></td></tr>
<tr><th id="3955">3955</th><td>			       <i>/* Use CNL + 2 below:  One leader for each log</i></td></tr>
<tr><th id="3956">3956</th><td><i>				* line, plus the Revision/Author/Date line,</i></td></tr>
<tr><th id="3957">3957</th><td><i>				* plus a trailing blank line.</i></td></tr>
<tr><th id="3958">3958</th><td><i>				*/</i></td></tr>
<tr><th id="3959">3959</th><td>			     + (<a class="local col0 ref" href="#370cnl" title='cnl' data-ref="370cnl" data-ref-filename="370cnl">cnl</a> + <var>2</var>) * <a class="local col6 ref" href="#366leader_len" title='leader_len' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</a></td></tr>
<tr><th id="3960">3960</th><td>			     + <var>20</var>));</td></tr>
<tr><th id="3961">3961</th><td>	    <b>if</b> (<a class="local col3 ref" href="#333expand" title='expand' data-ref="333expand" data-ref-filename="333expand">expand</a> != <a class="enum" href="#KFLAG_V" title='KFLAG_V' data-ref="KFLAG_V" data-ref-filename="KFLAG_V">KFLAG_V</a>)</td></tr>
<tr><th id="3962">3962</th><td>	    {</td></tr>
<tr><th id="3963">3963</th><td>		<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a>[<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>] = <kbd>'$'</kbd>;</td></tr>
<tr><th id="3964">3964</th><td>		++<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>;</td></tr>
<tr><th id="3965">3965</th><td>	    }</td></tr>
<tr><th id="3966">3966</th><td>	    <a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a>[<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>] = <kbd>'\n'</kbd>;</td></tr>
<tr><th id="3967">3967</th><td>	    ++<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>;</td></tr>
<tr><th id="3968">3968</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a> + <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>, <a class="local col5 ref" href="#365leader" title='leader' data-ref="365leader" data-ref-filename="365leader">leader</a>, <a class="local col6 ref" href="#366leader_len" title='leader_len' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</a>);</td></tr>
<tr><th id="3969">3969</th><td>	    <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a> += <a class="local col6 ref" href="#366leader_len" title='leader_len' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</a>;</td></tr>
<tr><th id="3970">3970</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sprintf" title='sprintf' data-ref="sprintf" data-ref-filename="sprintf">sprintf</a> (<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a> + <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>, <q>"Revision %s  %s  %s\n"</q>,</td></tr>
<tr><th id="3971">3971</th><td>		     <a class="local col9 ref" href="#329ver" title='ver' data-ref="329ver" data-ref-filename="329ver">ver</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <a class="local col1 ref" href="#371date" title='date' data-ref="371date" data-ref-filename="371date">date</a>, <a class="local col9 ref" href="#329ver" title='ver' data-ref="329ver" data-ref-filename="329ver">ver</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::author" title='rcsversnode::author' data-ref="rcsversnode::author" data-ref-filename="rcsversnode..author">author</a>);</td></tr>
<tr><th id="3972">3972</th><td>	    <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a> += <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a> + <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>);</td></tr>
<tr><th id="3973">3973</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col1 ref" href="#371date" title='date' data-ref="371date" data-ref-filename="371date">date</a>);</td></tr>
<tr><th id="3974">3974</th><td></td></tr>
<tr><th id="3975">3975</th><td>	    <a class="local col2 ref" href="#372sl" title='sl' data-ref="372sl" data-ref-filename="372sl">sl</a> = <a class="local col1 ref" href="#331log" title='log' data-ref="331log" data-ref-filename="331log">log</a>;</td></tr>
<tr><th id="3976">3976</th><td>	    <b>while</b> (<a class="local col2 ref" href="#372sl" title='sl' data-ref="372sl" data-ref-filename="372sl">sl</a> &lt; <a class="local col8 ref" href="#368logend" title='logend' data-ref="368logend" data-ref-filename="368logend">logend</a>)</td></tr>
<tr><th id="3977">3977</th><td>	    {</td></tr>
<tr><th id="3978">3978</th><td>		<b>if</b> (*<a class="local col2 ref" href="#372sl" title='sl' data-ref="372sl" data-ref-filename="372sl">sl</a> == <kbd>'\n'</kbd>)</td></tr>
<tr><th id="3979">3979</th><td>		{</td></tr>
<tr><th id="3980">3980</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a> + <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>, <a class="local col5 ref" href="#365leader" title='leader' data-ref="365leader" data-ref-filename="365leader">leader</a>, <a class="local col7 ref" href="#367leader_sp_len" title='leader_sp_len' data-ref="367leader_sp_len" data-ref-filename="367leader_sp_len">leader_sp_len</a>);</td></tr>
<tr><th id="3981">3981</th><td>		    <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a> += <a class="local col7 ref" href="#367leader_sp_len" title='leader_sp_len' data-ref="367leader_sp_len" data-ref-filename="367leader_sp_len">leader_sp_len</a>;</td></tr>
<tr><th id="3982">3982</th><td>		    <a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a>[<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>] = <kbd>'\n'</kbd>;</td></tr>
<tr><th id="3983">3983</th><td>		    ++<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>;</td></tr>
<tr><th id="3984">3984</th><td>		    ++<a class="local col2 ref" href="#372sl" title='sl' data-ref="372sl" data-ref-filename="372sl">sl</a>;</td></tr>
<tr><th id="3985">3985</th><td>		}</td></tr>
<tr><th id="3986">3986</th><td>		<b>else</b></td></tr>
<tr><th id="3987">3987</th><td>		{</td></tr>
<tr><th id="3988">3988</th><td>		    <em>const</em> <em>char</em> *<dfn class="local col3 decl" id="373slnl" title='slnl' data-type='const char *' data-ref="373slnl" data-ref-filename="373slnl">slnl</dfn>;</td></tr>
<tr><th id="3989">3989</th><td></td></tr>
<tr><th id="3990">3990</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a> + <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>, <a class="local col5 ref" href="#365leader" title='leader' data-ref="365leader" data-ref-filename="365leader">leader</a>, <a class="local col6 ref" href="#366leader_len" title='leader_len' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</a>);</td></tr>
<tr><th id="3991">3991</th><td>		    <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a> += <a class="local col6 ref" href="#366leader_len" title='leader_len' data-ref="366leader_len" data-ref-filename="366leader_len">leader_len</a>;</td></tr>
<tr><th id="3992">3992</th><td>		    <b>for</b> (<a class="local col3 ref" href="#373slnl" title='slnl' data-ref="373slnl" data-ref-filename="373slnl">slnl</a> = <a class="local col2 ref" href="#372sl" title='sl' data-ref="372sl" data-ref-filename="372sl">sl</a>; <a class="local col3 ref" href="#373slnl" title='slnl' data-ref="373slnl" data-ref-filename="373slnl">slnl</a> &lt; <a class="local col8 ref" href="#368logend" title='logend' data-ref="368logend" data-ref-filename="368logend">logend</a> &amp;&amp; *<a class="local col3 ref" href="#373slnl" title='slnl' data-ref="373slnl" data-ref-filename="373slnl">slnl</a> != <kbd>'\n'</kbd>; ++<a class="local col3 ref" href="#373slnl" title='slnl' data-ref="373slnl" data-ref-filename="373slnl">slnl</a>)</td></tr>
<tr><th id="3993">3993</th><td>			;</td></tr>
<tr><th id="3994">3994</th><td>		    <b>if</b> (<a class="local col3 ref" href="#373slnl" title='slnl' data-ref="373slnl" data-ref-filename="373slnl">slnl</a> &lt; <a class="local col8 ref" href="#368logend" title='logend' data-ref="368logend" data-ref-filename="368logend">logend</a>)</td></tr>
<tr><th id="3995">3995</th><td>			++<a class="local col3 ref" href="#373slnl" title='slnl' data-ref="373slnl" data-ref-filename="373slnl">slnl</a>;</td></tr>
<tr><th id="3996">3996</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a> + <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>, <a class="local col2 ref" href="#372sl" title='sl' data-ref="372sl" data-ref-filename="372sl">sl</a>, <a class="local col3 ref" href="#373slnl" title='slnl' data-ref="373slnl" data-ref-filename="373slnl">slnl</a> - <a class="local col2 ref" href="#372sl" title='sl' data-ref="372sl" data-ref-filename="372sl">sl</a>);</td></tr>
<tr><th id="3997">3997</th><td>		    <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a> += <a class="local col3 ref" href="#373slnl" title='slnl' data-ref="373slnl" data-ref-filename="373slnl">slnl</a> - <a class="local col2 ref" href="#372sl" title='sl' data-ref="372sl" data-ref-filename="372sl">sl</a>;</td></tr>
<tr><th id="3998">3998</th><td>		    <b>if</b> (<a class="local col3 ref" href="#373slnl" title='slnl' data-ref="373slnl" data-ref-filename="373slnl">slnl</a> == <a class="local col8 ref" href="#368logend" title='logend' data-ref="368logend" data-ref-filename="368logend">logend</a> &amp;&amp; <a class="local col3 ref" href="#373slnl" title='slnl' data-ref="373slnl" data-ref-filename="373slnl">slnl</a>[-<var>1</var>] != <kbd>'\n'</kbd>)</td></tr>
<tr><th id="3999">3999</th><td>		    {</td></tr>
<tr><th id="4000">4000</th><td>			<i>/* There was no EOL at the end of the log message.  Add</i></td></tr>
<tr><th id="4001">4001</th><td><i>			 * one.</i></td></tr>
<tr><th id="4002">4002</th><td><i>			 */</i></td></tr>
<tr><th id="4003">4003</th><td>			<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a>[<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>] = <kbd>'\n'</kbd>;</td></tr>
<tr><th id="4004">4004</th><td>			++<a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>;</td></tr>
<tr><th id="4005">4005</th><td>		    }</td></tr>
<tr><th id="4006">4006</th><td>		    <a class="local col2 ref" href="#372sl" title='sl' data-ref="372sl" data-ref-filename="372sl">sl</a> = <a class="local col3 ref" href="#373slnl" title='slnl' data-ref="373slnl" data-ref-filename="373slnl">slnl</a>;</td></tr>
<tr><th id="4007">4007</th><td>		}</td></tr>
<tr><th id="4008">4008</th><td>	    }</td></tr>
<tr><th id="4009">4009</th><td></td></tr>
<tr><th id="4010">4010</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a> + <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>, <a class="local col5 ref" href="#365leader" title='leader' data-ref="365leader" data-ref-filename="365leader">leader</a>, <a class="local col7 ref" href="#367leader_sp_len" title='leader_sp_len' data-ref="367leader_sp_len" data-ref-filename="367leader_sp_len">leader_sp_len</a>);</td></tr>
<tr><th id="4011">4011</th><td>	    <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a> += <a class="local col7 ref" href="#367leader_sp_len" title='leader_sp_len' data-ref="367leader_sp_len" data-ref-filename="367leader_sp_len">leader_sp_len</a>;</td></tr>
<tr><th id="4012">4012</th><td></td></tr>
<tr><th id="4013">4013</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col5 ref" href="#365leader" title='leader' data-ref="365leader" data-ref-filename="365leader">leader</a>);</td></tr>
<tr><th id="4014">4014</th><td>	}</td></tr>
<tr><th id="4015">4015</th><td></td></tr>
<tr><th id="4016">4016</th><td>	<i>/* Now SUB contains a string which is to replace the string</i></td></tr>
<tr><th id="4017">4017</th><td><i>	   from SRCH to S.  SUBLEN is the length of SUB.  */</i></td></tr>
<tr><th id="4018">4018</th><td></td></tr>
<tr><th id="4019">4019</th><td>	<b>if</b> (<a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a> + <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a> == <a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a>)</td></tr>
<tr><th id="4020">4020</th><td>	{</td></tr>
<tr><th id="4021">4021</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a>, <a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a>, <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>);</td></tr>
<tr><th id="4022">4022</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a>);</td></tr>
<tr><th id="4023">4023</th><td>	}</td></tr>
<tr><th id="4024">4024</th><td>	<b>else</b></td></tr>
<tr><th id="4025">4025</th><td>	{</td></tr>
<tr><th id="4026">4026</th><td>	    <b>struct</b> <a class="local col8 type" href="#338expand_buffer" title='expand_buffer' data-ref="338expand_buffer" data-ref-filename="338expand_buffer">expand_buffer</a> *<dfn class="local col4 decl" id="374ebuf" title='ebuf' data-type='struct expand_buffer *' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</dfn>;</td></tr>
<tr><th id="4027">4027</th><td></td></tr>
<tr><th id="4028">4028</th><td>	    <i>/* We need to change the size of the buffer.  We build a</i></td></tr>
<tr><th id="4029">4029</th><td><i>               list of expand_buffer structures.  Each expand_buffer</i></td></tr>
<tr><th id="4030">4030</th><td><i>               structure represents a portion of the final output.  We</i></td></tr>
<tr><th id="4031">4031</th><td><i>               concatenate them back into a single buffer when we are</i></td></tr>
<tr><th id="4032">4032</th><td><i>               done.  This minimizes the number of potentially large</i></td></tr>
<tr><th id="4033">4033</th><td><i>               buffer copies we must do.  */</i></td></tr>
<tr><th id="4034">4034</th><td></td></tr>
<tr><th id="4035">4035</th><td>	    <b>if</b> (<a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4036">4036</th><td>	    {</td></tr>
<tr><th id="4037">4037</th><td>		<a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<b>sizeof</b> *<a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>);</td></tr>
<tr><th id="4038">4038</th><td>		<a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a>-&gt;<a class="local col9 ref field" href="#339next" title='next' data-ref="339next" data-ref-filename="339next">next</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4039">4039</th><td>		<a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a>-&gt;<a class="local col0 ref field" href="#340data" title='data' data-ref="340data" data-ref-filename="340data">data</a> = <a class="local col4 ref" href="#334buf" title='buf' data-ref="334buf" data-ref-filename="334buf">buf</a>;</td></tr>
<tr><th id="4040">4040</th><td>		<a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a>-&gt;<a class="local col2 ref field" href="#342free_data" title='free_data' data-ref="342free_data" data-ref-filename="342free_data">free_data</a> = <var>0</var>;</td></tr>
<tr><th id="4041">4041</th><td>		<a class="local col5 ref" href="#345ebuf_len" title='ebuf_len' data-ref="345ebuf_len" data-ref-filename="345ebuf_len">ebuf_len</a> = <a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a> - <a class="local col4 ref" href="#334buf" title='buf' data-ref="334buf" data-ref-filename="334buf">buf</a>;</td></tr>
<tr><th id="4042">4042</th><td>		<a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a>-&gt;<a class="local col1 ref field" href="#341len" title='len' data-ref="341len" data-ref-filename="341len">len</a> = <a class="local col5 ref" href="#345ebuf_len" title='ebuf_len' data-ref="345ebuf_len" data-ref-filename="345ebuf_len">ebuf_len</a>;</td></tr>
<tr><th id="4043">4043</th><td>		<a class="local col4 ref" href="#344ebuf_last" title='ebuf_last' data-ref="344ebuf_last" data-ref-filename="344ebuf_last">ebuf_last</a> = <a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a>;</td></tr>
<tr><th id="4044">4044</th><td>	    }</td></tr>
<tr><th id="4045">4045</th><td>	    <b>else</b></td></tr>
<tr><th id="4046">4046</th><td>	    {</td></tr>
<tr><th id="4047">4047</th><td>		<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((srch &gt;= ebuf_last-&gt;data) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 4047, __func__, &quot;srch &gt;= ebuf_last-&gt;data&quot;))" data-ref="_M/assert">assert</a> (<a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a> &gt;= <a class="local col4 ref" href="#344ebuf_last" title='ebuf_last' data-ref="344ebuf_last" data-ref-filename="344ebuf_last">ebuf_last</a>-&gt;<a class="local col0 ref field" href="#340data" title='data' data-ref="340data" data-ref-filename="340data">data</a>);</td></tr>
<tr><th id="4048">4048</th><td>		<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((srch &lt;= ebuf_last-&gt;data + ebuf_last-&gt;len) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 4048, __func__, &quot;srch &lt;= ebuf_last-&gt;data + ebuf_last-&gt;len&quot;))" data-ref="_M/assert">assert</a> (<a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a> &lt;= <a class="local col4 ref" href="#344ebuf_last" title='ebuf_last' data-ref="344ebuf_last" data-ref-filename="344ebuf_last">ebuf_last</a>-&gt;<a class="local col0 ref field" href="#340data" title='data' data-ref="340data" data-ref-filename="340data">data</a> + <a class="local col4 ref" href="#344ebuf_last" title='ebuf_last' data-ref="344ebuf_last" data-ref-filename="344ebuf_last">ebuf_last</a>-&gt;<a class="local col1 ref field" href="#341len" title='len' data-ref="341len" data-ref-filename="341len">len</a>);</td></tr>
<tr><th id="4049">4049</th><td>		<a class="local col5 ref" href="#345ebuf_len" title='ebuf_len' data-ref="345ebuf_len" data-ref-filename="345ebuf_len">ebuf_len</a> -= <a class="local col4 ref" href="#344ebuf_last" title='ebuf_last' data-ref="344ebuf_last" data-ref-filename="344ebuf_last">ebuf_last</a>-&gt;<a class="local col1 ref field" href="#341len" title='len' data-ref="341len" data-ref-filename="341len">len</a> - (<a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a> - <a class="local col4 ref" href="#344ebuf_last" title='ebuf_last' data-ref="344ebuf_last" data-ref-filename="344ebuf_last">ebuf_last</a>-&gt;<a class="local col0 ref field" href="#340data" title='data' data-ref="340data" data-ref-filename="340data">data</a>);</td></tr>
<tr><th id="4050">4050</th><td>		<a class="local col4 ref" href="#344ebuf_last" title='ebuf_last' data-ref="344ebuf_last" data-ref-filename="344ebuf_last">ebuf_last</a>-&gt;<a class="local col1 ref field" href="#341len" title='len' data-ref="341len" data-ref-filename="341len">len</a> = <a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a> - <a class="local col4 ref" href="#344ebuf_last" title='ebuf_last' data-ref="344ebuf_last" data-ref-filename="344ebuf_last">ebuf_last</a>-&gt;<a class="local col0 ref field" href="#340data" title='data' data-ref="340data" data-ref-filename="340data">data</a>;</td></tr>
<tr><th id="4051">4051</th><td>	    }</td></tr>
<tr><th id="4052">4052</th><td></td></tr>
<tr><th id="4053">4053</th><td>	    <a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<b>sizeof</b> *<a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>);</td></tr>
<tr><th id="4054">4054</th><td>	    <a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>-&gt;<a class="local col0 ref field" href="#340data" title='data' data-ref="340data" data-ref-filename="340data">data</a> = <a class="local col8 ref" href="#358sub" title='sub' data-ref="358sub" data-ref-filename="358sub">sub</a>;</td></tr>
<tr><th id="4055">4055</th><td>	    <a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>-&gt;<a class="local col1 ref field" href="#341len" title='len' data-ref="341len" data-ref-filename="341len">len</a> = <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>;</td></tr>
<tr><th id="4056">4056</th><td>	    <a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>-&gt;<a class="local col2 ref field" href="#342free_data" title='free_data' data-ref="342free_data" data-ref-filename="342free_data">free_data</a> = <var>1</var>;</td></tr>
<tr><th id="4057">4057</th><td>	    <a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>-&gt;<a class="local col9 ref field" href="#339next" title='next' data-ref="339next" data-ref-filename="339next">next</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4058">4058</th><td>	    <a class="local col4 ref" href="#344ebuf_last" title='ebuf_last' data-ref="344ebuf_last" data-ref-filename="344ebuf_last">ebuf_last</a>-&gt;<a class="local col9 ref field" href="#339next" title='next' data-ref="339next" data-ref-filename="339next">next</a> = <a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>;</td></tr>
<tr><th id="4059">4059</th><td>	    <a class="local col4 ref" href="#344ebuf_last" title='ebuf_last' data-ref="344ebuf_last" data-ref-filename="344ebuf_last">ebuf_last</a> = <a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>;</td></tr>
<tr><th id="4060">4060</th><td>	    <a class="local col5 ref" href="#345ebuf_len" title='ebuf_len' data-ref="345ebuf_len" data-ref-filename="345ebuf_len">ebuf_len</a> += <a class="local col9 ref" href="#359sublen" title='sublen' data-ref="359sublen" data-ref-filename="359sublen">sublen</a>;</td></tr>
<tr><th id="4061">4061</th><td></td></tr>
<tr><th id="4062">4062</th><td>	    <a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<b>sizeof</b> *<a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>);</td></tr>
<tr><th id="4063">4063</th><td>	    <a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>-&gt;<a class="local col0 ref field" href="#340data" title='data' data-ref="340data" data-ref-filename="340data">data</a> = <a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a>;</td></tr>
<tr><th id="4064">4064</th><td>	    <a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>-&gt;<a class="local col1 ref field" href="#341len" title='len' data-ref="341len" data-ref-filename="341len">len</a> = <a class="local col9 ref" href="#349srch_len" title='srch_len' data-ref="349srch_len" data-ref-filename="349srch_len">srch_len</a> - (<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> - <a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a>);</td></tr>
<tr><th id="4065">4065</th><td>	    <a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>-&gt;<a class="local col2 ref field" href="#342free_data" title='free_data' data-ref="342free_data" data-ref-filename="342free_data">free_data</a> = <var>0</var>;</td></tr>
<tr><th id="4066">4066</th><td>	    <a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>-&gt;<a class="local col9 ref field" href="#339next" title='next' data-ref="339next" data-ref-filename="339next">next</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4067">4067</th><td>	    <a class="local col4 ref" href="#344ebuf_last" title='ebuf_last' data-ref="344ebuf_last" data-ref-filename="344ebuf_last">ebuf_last</a>-&gt;<a class="local col9 ref field" href="#339next" title='next' data-ref="339next" data-ref-filename="339next">next</a> = <a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>;</td></tr>
<tr><th id="4068">4068</th><td>	    <a class="local col4 ref" href="#344ebuf_last" title='ebuf_last' data-ref="344ebuf_last" data-ref-filename="344ebuf_last">ebuf_last</a> = <a class="local col4 ref" href="#374ebuf" title='ebuf' data-ref="374ebuf" data-ref-filename="374ebuf">ebuf</a>;</td></tr>
<tr><th id="4069">4069</th><td>	    <a class="local col5 ref" href="#345ebuf_len" title='ebuf_len' data-ref="345ebuf_len" data-ref-filename="345ebuf_len">ebuf_len</a> += <a class="local col9 ref" href="#349srch_len" title='srch_len' data-ref="349srch_len" data-ref-filename="349srch_len">srch_len</a> - (<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> - <a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a>);</td></tr>
<tr><th id="4070">4070</th><td>	}</td></tr>
<tr><th id="4071">4071</th><td></td></tr>
<tr><th id="4072">4072</th><td>	<a class="local col9 ref" href="#349srch_len" title='srch_len' data-ref="349srch_len" data-ref-filename="349srch_len">srch_len</a> -= (<a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a> - <a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a>);</td></tr>
<tr><th id="4073">4073</th><td>	<a class="local col7 ref" href="#347srch" title='srch' data-ref="347srch" data-ref-filename="347srch">srch</a> = <a class="local col2 ref" href="#352s" title='s' data-ref="352s" data-ref-filename="352s">s</a>;</td></tr>
<tr><th id="4074">4074</th><td>    }</td></tr>
<tr><th id="4075">4075</th><td></td></tr>
<tr><th id="4076">4076</th><td>    <b>if</b> (<a class="local col6 ref" href="#346locker" title='locker' data-ref="346locker" data-ref-filename="346locker">locker</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4077">4077</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col6 ref" href="#346locker" title='locker' data-ref="346locker" data-ref-filename="346locker">locker</a>);</td></tr>
<tr><th id="4078">4078</th><td></td></tr>
<tr><th id="4079">4079</th><td>    <b>if</b> (<a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4080">4080</th><td>    {</td></tr>
<tr><th id="4081">4081</th><td>	*<a class="local col6 ref" href="#336retbuf" title='retbuf' data-ref="336retbuf" data-ref-filename="336retbuf">retbuf</a> = <a class="local col4 ref" href="#334buf" title='buf' data-ref="334buf" data-ref-filename="334buf">buf</a>;</td></tr>
<tr><th id="4082">4082</th><td>	*<a class="local col7 ref" href="#337retlen" title='retlen' data-ref="337retlen" data-ref-filename="337retlen">retlen</a> = <a class="local col5 ref" href="#335len" title='len' data-ref="335len" data-ref-filename="335len">len</a>;</td></tr>
<tr><th id="4083">4083</th><td>    }</td></tr>
<tr><th id="4084">4084</th><td>    <b>else</b></td></tr>
<tr><th id="4085">4085</th><td>    {</td></tr>
<tr><th id="4086">4086</th><td>	<em>char</em> *<dfn class="local col5 decl" id="375ret" title='ret' data-type='char *' data-ref="375ret" data-ref-filename="375ret">ret</dfn>;</td></tr>
<tr><th id="4087">4087</th><td></td></tr>
<tr><th id="4088">4088</th><td>	<a class="local col5 ref" href="#375ret" title='ret' data-ref="375ret" data-ref-filename="375ret">ret</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="local col5 ref" href="#345ebuf_len" title='ebuf_len' data-ref="345ebuf_len" data-ref-filename="345ebuf_len">ebuf_len</a>);</td></tr>
<tr><th id="4089">4089</th><td>	*<a class="local col6 ref" href="#336retbuf" title='retbuf' data-ref="336retbuf" data-ref-filename="336retbuf">retbuf</a> = <a class="local col5 ref" href="#375ret" title='ret' data-ref="375ret" data-ref-filename="375ret">ret</a>;</td></tr>
<tr><th id="4090">4090</th><td>	*<a class="local col7 ref" href="#337retlen" title='retlen' data-ref="337retlen" data-ref-filename="337retlen">retlen</a> = <a class="local col5 ref" href="#345ebuf_len" title='ebuf_len' data-ref="345ebuf_len" data-ref-filename="345ebuf_len">ebuf_len</a>;</td></tr>
<tr><th id="4091">4091</th><td>	<b>while</b> (<a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4092">4092</th><td>	{</td></tr>
<tr><th id="4093">4093</th><td>	    <b>struct</b> <a class="local col8 type" href="#338expand_buffer" title='expand_buffer' data-ref="338expand_buffer" data-ref-filename="338expand_buffer">expand_buffer</a> *<dfn class="local col6 decl" id="376next" title='next' data-type='struct expand_buffer *' data-ref="376next" data-ref-filename="376next">next</dfn>;</td></tr>
<tr><th id="4094">4094</th><td></td></tr>
<tr><th id="4095">4095</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col5 ref" href="#375ret" title='ret' data-ref="375ret" data-ref-filename="375ret">ret</a>, <a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a>-&gt;<a class="local col0 ref field" href="#340data" title='data' data-ref="340data" data-ref-filename="340data">data</a>, <a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a>-&gt;<a class="local col1 ref field" href="#341len" title='len' data-ref="341len" data-ref-filename="341len">len</a>);</td></tr>
<tr><th id="4096">4096</th><td>	    <a class="local col5 ref" href="#375ret" title='ret' data-ref="375ret" data-ref-filename="375ret">ret</a> += <a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a>-&gt;<a class="local col1 ref field" href="#341len" title='len' data-ref="341len" data-ref-filename="341len">len</a>;</td></tr>
<tr><th id="4097">4097</th><td>	    <b>if</b> (<a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a>-&gt;<a class="local col2 ref field" href="#342free_data" title='free_data' data-ref="342free_data" data-ref-filename="342free_data">free_data</a>)</td></tr>
<tr><th id="4098">4098</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a>-&gt;<a class="local col0 ref field" href="#340data" title='data' data-ref="340data" data-ref-filename="340data">data</a>);</td></tr>
<tr><th id="4099">4099</th><td>	    <a class="local col6 ref" href="#376next" title='next' data-ref="376next" data-ref-filename="376next">next</a> = <a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a>-&gt;<a class="local col9 ref field" href="#339next" title='next' data-ref="339next" data-ref-filename="339next">next</a>;</td></tr>
<tr><th id="4100">4100</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a>);</td></tr>
<tr><th id="4101">4101</th><td>	    <a class="local col3 ref" href="#343ebufs" title='ebufs' data-ref="343ebufs" data-ref-filename="343ebufs">ebufs</a> = <a class="local col6 ref" href="#376next" title='next' data-ref="376next" data-ref-filename="376next">next</a>;</td></tr>
<tr><th id="4102">4102</th><td>	}</td></tr>
<tr><th id="4103">4103</th><td>    }</td></tr>
<tr><th id="4104">4104</th><td>}</td></tr>
<tr><th id="4105">4105</th><td></td></tr>
<tr><th id="4106">4106</th><td></td></tr>
<tr><th id="4107">4107</th><td></td></tr>
<tr><th id="4108">4108</th><td><i>/* Check out a revision from an RCS file.</i></td></tr>
<tr><th id="4109">4109</th><td><i></i></td></tr>
<tr><th id="4110">4110</th><td><i>   If PFN is not NULL, then ignore WORKFILE and SOUT.  Call PFN zero</i></td></tr>
<tr><th id="4111">4111</th><td><i>   or more times with the contents of the file.  CALLERDAT is passed,</i></td></tr>
<tr><th id="4112">4112</th><td><i>   uninterpreted, to PFN.  (The current code will always call PFN</i></td></tr>
<tr><th id="4113">4113</th><td><i>   exactly once for a non empty file; however, the current code</i></td></tr>
<tr><th id="4114">4114</th><td><i>   assumes that it can hold the entire file contents in memory, which</i></td></tr>
<tr><th id="4115">4115</th><td><i>   is not a good assumption, and might change in the future).</i></td></tr>
<tr><th id="4116">4116</th><td><i></i></td></tr>
<tr><th id="4117">4117</th><td><i>   Otherwise, if WORKFILE is not NULL, check out the revision to</i></td></tr>
<tr><th id="4118">4118</th><td><i>   WORKFILE.  However, if WORKFILE is not NULL, and noexec is set,</i></td></tr>
<tr><th id="4119">4119</th><td><i>   then don't do anything.</i></td></tr>
<tr><th id="4120">4120</th><td><i></i></td></tr>
<tr><th id="4121">4121</th><td><i>   Otherwise, if WORKFILE is NULL, check out the revision to SOUT.  If</i></td></tr>
<tr><th id="4122">4122</th><td><i>   SOUT is RUN_TTY, then write the contents of the revision to</i></td></tr>
<tr><th id="4123">4123</th><td><i>   standard output.  When using SOUT, the output is generally a</i></td></tr>
<tr><th id="4124">4124</th><td><i>   temporary file; don't bother to get the file modes correct.  When</i></td></tr>
<tr><th id="4125">4125</th><td><i>   NOEXEC is set, WORKFILEs are not written but SOUTs are.</i></td></tr>
<tr><th id="4126">4126</th><td><i></i></td></tr>
<tr><th id="4127">4127</th><td><i>   REV is the numeric revision to check out.  It may be NULL, which</i></td></tr>
<tr><th id="4128">4128</th><td><i>   means to check out the head of the default branch.</i></td></tr>
<tr><th id="4129">4129</th><td><i></i></td></tr>
<tr><th id="4130">4130</th><td><i>   If NAMETAG is not NULL, and is not a numeric revision, then it is</i></td></tr>
<tr><th id="4131">4131</th><td><i>   the tag that should be used when expanding the RCS Name keyword.</i></td></tr>
<tr><th id="4132">4132</th><td><i></i></td></tr>
<tr><th id="4133">4133</th><td><i>   OPTIONS is a string such as "-kb" or "-kv" for keyword expansion</i></td></tr>
<tr><th id="4134">4134</th><td><i>   options.  It may be NULL to use the default expansion mode of the</i></td></tr>
<tr><th id="4135">4135</th><td><i>   file, typically "-kkv".</i></td></tr>
<tr><th id="4136">4136</th><td><i></i></td></tr>
<tr><th id="4137">4137</th><td><i>   On an error which prevented checking out the file, either print a</i></td></tr>
<tr><th id="4138">4138</th><td><i>   nonfatal error and return 1, or give a fatal error.  On success,</i></td></tr>
<tr><th id="4139">4139</th><td><i>   return 0.  */</i></td></tr>
<tr><th id="4140">4140</th><td></td></tr>
<tr><th id="4141">4141</th><td><i>/* This function mimics the behavior of `rcs co' almost exactly.  The</i></td></tr>
<tr><th id="4142">4142</th><td><i>   chief difference is in its support for preserving file ownership,</i></td></tr>
<tr><th id="4143">4143</th><td><i>   permissions, and special files across checkin and checkout -- see</i></td></tr>
<tr><th id="4144">4144</th><td><i>   comments in RCS_checkin for some issues about this. -twp */</i></td></tr>
<tr><th id="4145">4145</th><td><em>int</em></td></tr>
<tr><th id="4146">4146</th><td><dfn class="decl def fn" id="RCS_checkout" title='RCS_checkout' data-ref="RCS_checkout" data-ref-filename="RCS_checkout">RCS_checkout</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col7 decl" id="377rcs" title='rcs' data-type='RCSNode *' data-ref="377rcs" data-ref-filename="377rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="378workfile" title='workfile' data-type='const char *' data-ref="378workfile" data-ref-filename="378workfile">workfile</dfn>, <em>const</em> <em>char</em> *<dfn class="local col9 decl" id="379rev" title='rev' data-type='const char *' data-ref="379rev" data-ref-filename="379rev">rev</dfn>,</td></tr>
<tr><th id="4147">4147</th><td>              <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="380nametag" title='nametag' data-type='const char *' data-ref="380nametag" data-ref-filename="380nametag">nametag</dfn>, <em>const</em> <em>char</em> *<dfn class="local col1 decl" id="381options" title='options' data-type='const char *' data-ref="381options" data-ref-filename="381options">options</dfn>, <em>const</em> <em>char</em> *<dfn class="local col2 decl" id="382sout" title='sout' data-type='const char *' data-ref="382sout" data-ref-filename="382sout">sout</dfn>,</td></tr>
<tr><th id="4148">4148</th><td>              <a class="typedef" href="rcs.h.html#RCSCHECKOUTPROC" title='RCSCHECKOUTPROC' data-type='void (*)(void *, const char *, size_t)' data-ref="RCSCHECKOUTPROC" data-ref-filename="RCSCHECKOUTPROC">RCSCHECKOUTPROC</a> <dfn class="local col3 decl" id="383pfn" title='pfn' data-type='RCSCHECKOUTPROC' data-ref="383pfn" data-ref-filename="383pfn">pfn</dfn>, <em>void</em> *<dfn class="local col4 decl" id="384callerdat" title='callerdat' data-type='void *' data-ref="384callerdat" data-ref-filename="384callerdat">callerdat</dfn>)</td></tr>
<tr><th id="4149">4149</th><td>{</td></tr>
<tr><th id="4150">4150</th><td>    <em>int</em> <dfn class="local col5 decl" id="385free_rev" title='free_rev' data-type='int' data-ref="385free_rev" data-ref-filename="385free_rev">free_rev</dfn> = <var>0</var>;</td></tr>
<tr><th id="4151">4151</th><td>    <b>enum</b> <a class="type" href="#kflag" title='kflag' data-ref="kflag" data-ref-filename="kflag">kflag</a> <dfn class="local col6 decl" id="386expand" title='expand' data-type='enum kflag' data-ref="386expand" data-ref-filename="386expand">expand</dfn>;</td></tr>
<tr><th id="4152">4152</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col7 decl" id="387fp" title='fp' data-type='FILE *' data-ref="387fp" data-ref-filename="387fp">fp</dfn>,</td></tr>
<tr><th id="4153">4153</th><td>	 *<dfn class="local col8 decl" id="388ofp" title='ofp' data-type='FILE *' data-ref="388ofp" data-ref-filename="388ofp">ofp</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>; <i>/* Initialize since -Wall doesn't understand that</i></td></tr>
<tr><th id="4154">4154</th><td><i>		       * error (1, ...) does not return.</i></td></tr>
<tr><th id="4155">4155</th><td><i>		       */</i></td></tr>
<tr><th id="4156">4156</th><td>    <b>struct</b> <a class="type" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat" title='stat' data-ref="stat" data-ref-filename="stat">stat</a> <dfn class="local col9 decl" id="389sb" title='sb' data-type='struct stat' data-ref="389sb" data-ref-filename="389sb">sb</dfn>;</td></tr>
<tr><th id="4157">4157</th><td>    <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> <dfn class="local col0 decl" id="390rcsbuf" title='rcsbuf' data-type='struct rcsbuffer' data-ref="390rcsbuf" data-ref-filename="390rcsbuf">rcsbuf</dfn>;</td></tr>
<tr><th id="4158">4158</th><td>    <em>char</em> *<dfn class="local col1 decl" id="391key" title='key' data-type='char *' data-ref="391key" data-ref-filename="391key">key</dfn>;</td></tr>
<tr><th id="4159">4159</th><td>    <em>char</em> *<dfn class="local col2 decl" id="392value" title='value' data-type='char *' data-ref="392value" data-ref-filename="392value">value</dfn>;</td></tr>
<tr><th id="4160">4160</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col3 decl" id="393len" title='len' data-type='size_t' data-ref="393len" data-ref-filename="393len">len</dfn>;</td></tr>
<tr><th id="4161">4161</th><td>    <em>int</em> <dfn class="local col4 decl" id="394free_value" title='free_value' data-type='int' data-ref="394free_value" data-ref-filename="394free_value">free_value</dfn> = <var>0</var>;</td></tr>
<tr><th id="4162">4162</th><td>    <em>char</em> *<dfn class="local col5 decl" id="395log" title='log' data-type='char *' data-ref="395log" data-ref-filename="395log">log</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4163">4163</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col6 decl" id="396loglen" title='loglen' data-type='size_t' data-ref="396loglen" data-ref-filename="396loglen">loglen</dfn> = <var>0</var>;</td></tr>
<tr><th id="4164">4164</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col7 decl" id="397vp" title='vp' data-type='Node *' data-ref="397vp" data-ref-filename="397vp">vp</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4165">4165</th><td><u>#<span data-ppcond="4165">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="4166">4166</th><td>    uid_t rcs_owner = (uid_t) -<var>1</var>;</td></tr>
<tr><th id="4167">4167</th><td>    gid_t rcs_group = (gid_t) -<var>1</var>;</td></tr>
<tr><th id="4168">4168</th><td>    mode_t rcs_mode;</td></tr>
<tr><th id="4169">4169</th><td>    <em>int</em> change_rcs_owner_or_group = <var>0</var>;</td></tr>
<tr><th id="4170">4170</th><td>    <em>int</em> change_rcs_mode = <var>0</var>;</td></tr>
<tr><th id="4171">4171</th><td>    <em>int</em> special_file = <var>0</var>;</td></tr>
<tr><th id="4172">4172</th><td>    <em>unsigned</em> <em>long</em> devnum_long;</td></tr>
<tr><th id="4173">4173</th><td>    dev_t devnum = <var>0</var>;</td></tr>
<tr><th id="4174">4174</th><td><u>#<span data-ppcond="4165">endif</span></u></td></tr>
<tr><th id="4175">4175</th><td></td></tr>
<tr><th id="4176">4176</th><td>    <a class="macro" href="server.h.html#206" title="cvs_trace" data-ref="_M/TRACE">TRACE</a> (<a class="macro" href="server.h.html#217" title="1" data-ref="_M/TRACE_FUNCTION">TRACE_FUNCTION</a>, <q>"RCS_checkout (%s, %s, %s, %s, %s)"</q>,</td></tr>
<tr><th id="4177">4177</th><td>	   <a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>,</td></tr>
<tr><th id="4178">4178</th><td>	   <a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> ? <a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a> : <q>""</q>,</td></tr>
<tr><th id="4179">4179</th><td>	   <a class="local col0 ref" href="#380nametag" title='nametag' data-ref="380nametag" data-ref-filename="380nametag">nametag</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> ? <a class="local col0 ref" href="#380nametag" title='nametag' data-ref="380nametag" data-ref-filename="380nametag">nametag</a> : <q>""</q>,</td></tr>
<tr><th id="4180">4180</th><td>	   <a class="local col1 ref" href="#381options" title='options' data-ref="381options" data-ref-filename="381options">options</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> ? <a class="local col1 ref" href="#381options" title='options' data-ref="381options" data-ref-filename="381options">options</a> : <q>""</q>,</td></tr>
<tr><th id="4181">4181</th><td>	   (<a class="local col3 ref" href="#383pfn" title='pfn' data-ref="383pfn" data-ref-filename="383pfn">pfn</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> ? <q>"(function)"</q></td></tr>
<tr><th id="4182">4182</th><td>	    : (<a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> ? <a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a></td></tr>
<tr><th id="4183">4183</th><td>	       : (<a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a> != <a class="macro" href="cvs.h.html#705" title="(char *)0" data-ref="_M/RUN_TTY">RUN_TTY</a> ? <a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a></td></tr>
<tr><th id="4184">4184</th><td>		  : <q>"(stdout)"</q>))));</td></tr>
<tr><th id="4185">4185</th><td></td></tr>
<tr><th id="4186">4186</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rev == ((void*)0) || ((int)((_ctype_tab_ + 1)[((unsigned char) *rev)] &amp; 0x0004))) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 4186, __func__, &quot;rev == NULL || isdigit ((unsigned char) *rev)&quot;))" data-ref="_M/assert">assert</a> (<a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) *rev)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) *<a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a>));</td></tr>
<tr><th id="4187">4187</th><td></td></tr>
<tr><th id="4188">4188</th><td>    <b>if</b> (<a class="ref" href="cvs.h.html#noexec" title='noexec' data-ref="noexec" data-ref-filename="noexec">noexec</a> &amp;&amp; !<a class="ref" href="server.h.html#server_active" title='server_active' data-ref="server_active" data-ref-filename="server_active">server_active</a> &amp;&amp; <a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4189">4189</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="4190">4190</th><td></td></tr>
<tr><th id="4191">4191</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((sout == (char *)0 || workfile == ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 4191, __func__, &quot;sout == RUN_TTY || workfile == NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a> == <a class="macro" href="cvs.h.html#705" title="(char *)0" data-ref="_M/RUN_TTY">RUN_TTY</a> || <a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="4192">4192</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((pfn == ((void*)0) || (sout == (char *)0 &amp;&amp; workfile == ((void*)0))) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 4192, __func__, &quot;pfn == NULL || (sout == RUN_TTY &amp;&amp; workfile == NULL)&quot;))" data-ref="_M/assert">assert</a> (<a class="local col3 ref" href="#383pfn" title='pfn' data-ref="383pfn" data-ref-filename="383pfn">pfn</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || (<a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a> == <a class="macro" href="cvs.h.html#705" title="(char *)0" data-ref="_M/RUN_TTY">RUN_TTY</a> &amp;&amp; <a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>));</td></tr>
<tr><th id="4193">4193</th><td></td></tr>
<tr><th id="4194">4194</th><td>    <i>/* Some callers, such as Checkin or remove_file, will pass us a</i></td></tr>
<tr><th id="4195">4195</th><td><i>       branch.  */</i></td></tr>
<tr><th id="4196">4196</th><td>    <b>if</b> (<a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; (<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a>) &amp; <var>1</var>) == <var>0</var>)</td></tr>
<tr><th id="4197">4197</th><td>    {</td></tr>
<tr><th id="4198">4198</th><td>	<a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a> = <a class="ref fn" href="#RCS_getbranch" title='RCS_getbranch' data-ref="RCS_getbranch" data-ref-filename="RCS_getbranch">RCS_getbranch</a> (<a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>, <a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a>, <var>1</var>);</td></tr>
<tr><th id="4199">4199</th><td>	<b>if</b> (<a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4200">4200</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"internal error: bad branch tag in checkout"</q>);</td></tr>
<tr><th id="4201">4201</th><td>	<a class="local col5 ref" href="#385free_rev" title='free_rev' data-ref="385free_rev" data-ref-filename="385free_rev">free_rev</a> = <var>1</var>;</td></tr>
<tr><th id="4202">4202</th><td>    }</td></tr>
<tr><th id="4203">4203</th><td></td></tr>
<tr><th id="4204">4204</th><td>    <b>if</b> (<a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || <a class="macro" href="#138" title="(*(char *)(rev) == *(char *)(rcs-&gt;head) &amp;&amp; strcmp ((rev), (rcs-&gt;head)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a>, <a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>))</td></tr>
<tr><th id="4205">4205</th><td>    {</td></tr>
<tr><th id="4206">4206</th><td>	<em>int</em> <dfn class="local col8 decl" id="398gothead" title='gothead' data-type='int' data-ref="398gothead" data-ref-filename="398gothead">gothead</dfn>;</td></tr>
<tr><th id="4207">4207</th><td></td></tr>
<tr><th id="4208">4208</th><td>	<i>/* We want the head revision.  Try to read it directly.  */</i></td></tr>
<tr><th id="4209">4209</th><td></td></tr>
<tr><th id="4210">4210</th><td>	<b>if</b> (<a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="4211">4211</th><td>	    <a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>, &amp;<a class="local col7 ref" href="#387fp" title='fp' data-ref="387fp" data-ref-filename="387fp">fp</a>, &amp;<a class="local col0 ref" href="#390rcsbuf" title='rcsbuf' data-ref="390rcsbuf" data-ref-filename="390rcsbuf">rcsbuf</a>);</td></tr>
<tr><th id="4212">4212</th><td>	<b>else</b></td></tr>
<tr><th id="4213">4213</th><td>	    <a class="tu ref fn" href="#rcsbuf_cache_open" title='rcsbuf_cache_open' data-use='c' data-ref="rcsbuf_cache_open" data-ref-filename="rcsbuf_cache_open">rcsbuf_cache_open</a> (<a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>, <a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::delta_pos" title='rcsnode::delta_pos' data-ref="rcsnode::delta_pos" data-ref-filename="rcsnode..delta_pos">delta_pos</a>, &amp;<a class="local col7 ref" href="#387fp" title='fp' data-ref="387fp" data-ref-filename="387fp">fp</a>, &amp;<a class="local col0 ref" href="#390rcsbuf" title='rcsbuf' data-ref="390rcsbuf" data-ref-filename="390rcsbuf">rcsbuf</a>);</td></tr>
<tr><th id="4214">4214</th><td></td></tr>
<tr><th id="4215">4215</th><td>	<a class="local col8 ref" href="#398gothead" title='gothead' data-ref="398gothead" data-ref-filename="398gothead">gothead</a> = <var>0</var>;</td></tr>
<tr><th id="4216">4216</th><td>	<b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getrevnum" title='rcsbuf_getrevnum' data-use='c' data-ref="rcsbuf_getrevnum" data-ref-filename="rcsbuf_getrevnum">rcsbuf_getrevnum</a> (&amp;<a class="local col0 ref" href="#390rcsbuf" title='rcsbuf' data-ref="390rcsbuf" data-ref-filename="390rcsbuf">rcsbuf</a>, &amp;<a class="local col1 ref" href="#391key" title='key' data-ref="391key" data-ref-filename="391key">key</a>))</td></tr>
<tr><th id="4217">4217</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"unexpected EOF reading %s"</q>, <a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="4218">4218</th><td>	<b>while</b> (<a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (&amp;<a class="local col0 ref" href="#390rcsbuf" title='rcsbuf' data-ref="390rcsbuf" data-ref-filename="390rcsbuf">rcsbuf</a>, &amp;<a class="local col1 ref" href="#391key" title='key' data-ref="391key" data-ref-filename="391key">key</a>, &amp;<a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a>))</td></tr>
<tr><th id="4219">4219</th><td>	{</td></tr>
<tr><th id="4220">4220</th><td>	    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;log&quot;) &amp;&amp; strcmp ((key), (&quot;log&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col1 ref" href="#391key" title='key' data-ref="391key" data-ref-filename="391key">key</a>, <q>"log"</q>))</td></tr>
<tr><th id="4221">4221</th><td>	    {</td></tr>
<tr><th id="4222">4222</th><td>		<b>if</b> (<a class="local col5 ref" href="#395log" title='log' data-ref="395log" data-ref-filename="395log">log</a>)</td></tr>
<tr><th id="4223">4223</th><td>		{</td></tr>
<tr><th id="4224">4224</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="4225">4225</th><td><q>"Duplicate log keyword found for head revision in RCS file."</q>);</td></tr>
<tr><th id="4226">4226</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col5 ref" href="#395log" title='log' data-ref="395log" data-ref-filename="395log">log</a>);</td></tr>
<tr><th id="4227">4227</th><td>		}</td></tr>
<tr><th id="4228">4228</th><td>		<a class="local col5 ref" href="#395log" title='log' data-ref="395log" data-ref-filename="395log">log</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (&amp;<a class="local col0 ref" href="#390rcsbuf" title='rcsbuf' data-ref="390rcsbuf" data-ref-filename="390rcsbuf">rcsbuf</a>, <a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a>, <var>0</var>, &amp;<a class="local col6 ref" href="#396loglen" title='loglen' data-ref="396loglen" data-ref-filename="396loglen">loglen</a>);</td></tr>
<tr><th id="4229">4229</th><td>	    }</td></tr>
<tr><th id="4230">4230</th><td>	    <b>else</b> <b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;text&quot;) &amp;&amp; strcmp ((key), (&quot;text&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col1 ref" href="#391key" title='key' data-ref="391key" data-ref-filename="391key">key</a>, <q>"text"</q>))</td></tr>
<tr><th id="4231">4231</th><td>	    {</td></tr>
<tr><th id="4232">4232</th><td>		<a class="local col8 ref" href="#398gothead" title='gothead' data-ref="398gothead" data-ref-filename="398gothead">gothead</a> = <var>1</var>;</td></tr>
<tr><th id="4233">4233</th><td>		<b>break</b>;</td></tr>
<tr><th id="4234">4234</th><td>	    }</td></tr>
<tr><th id="4235">4235</th><td>	}</td></tr>
<tr><th id="4236">4236</th><td></td></tr>
<tr><th id="4237">4237</th><td>	<b>if</b> (! <a class="local col8 ref" href="#398gothead" title='gothead' data-ref="398gothead" data-ref-filename="398gothead">gothead</a>)</td></tr>
<tr><th id="4238">4238</th><td>	{</td></tr>
<tr><th id="4239">4239</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"internal error: cannot find head text"</q>);</td></tr>
<tr><th id="4240">4240</th><td>	    <b>if</b> (<a class="local col5 ref" href="#385free_rev" title='free_rev' data-ref="385free_rev" data-ref-filename="385free_rev">free_rev</a>)</td></tr>
<tr><th id="4241">4241</th><td>		<i>/* It's okay to discard the const when free_rev is set, because</i></td></tr>
<tr><th id="4242">4242</th><td><i>		 * we know we allocated it in this function.</i></td></tr>
<tr><th id="4243">4243</th><td><i>		 */</i></td></tr>
<tr><th id="4244">4244</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> ((<em>char</em> *)<a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a>);</td></tr>
<tr><th id="4245">4245</th><td>	    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="4246">4246</th><td>	}</td></tr>
<tr><th id="4247">4247</th><td></td></tr>
<tr><th id="4248">4248</th><td>	<a class="tu ref fn" href="#rcsbuf_valpolish" title='rcsbuf_valpolish' data-use='c' data-ref="rcsbuf_valpolish" data-ref-filename="rcsbuf_valpolish">rcsbuf_valpolish</a> (&amp;<a class="local col0 ref" href="#390rcsbuf" title='rcsbuf' data-ref="390rcsbuf" data-ref-filename="390rcsbuf">rcsbuf</a>, <a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a>, <var>0</var>, &amp;<a class="local col3 ref" href="#393len" title='len' data-ref="393len" data-ref-filename="393len">len</a>);</td></tr>
<tr><th id="4249">4249</th><td></td></tr>
<tr><th id="4250">4250</th><td>	<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#__fstat50" title='fstat' data-ref="__fstat50" data-ref-filename="__fstat50">fstat</a> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#508" title="((fp)-&gt;_file == -1 ? -1 : (int)(unsigned short)(fp)-&gt;_file)" data-ref="_M/fileno">fileno</a> (<a class="local col7 ref" href="#387fp" title='fp' data-ref="387fp" data-ref-filename="387fp">fp</a>), &amp;<a class="local col9 ref" href="#389sb" title='sb' data-ref="389sb" data-ref-filename="389sb">sb</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="4251">4251</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot fstat %s"</q>, <a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="4252">4252</th><td></td></tr>
<tr><th id="4253">4253</th><td>	<a class="tu ref fn" href="#rcsbuf_cache" title='rcsbuf_cache' data-use='c' data-ref="rcsbuf_cache" data-ref-filename="rcsbuf_cache">rcsbuf_cache</a> (<a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>, &amp;<a class="local col0 ref" href="#390rcsbuf" title='rcsbuf' data-ref="390rcsbuf" data-ref-filename="390rcsbuf">rcsbuf</a>);</td></tr>
<tr><th id="4254">4254</th><td>    }</td></tr>
<tr><th id="4255">4255</th><td>    <b>else</b></td></tr>
<tr><th id="4256">4256</th><td>    {</td></tr>
<tr><th id="4257">4257</th><td>	<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col9 decl" id="399rcsbufp" title='rcsbufp' data-type='struct rcsbuffer *' data-ref="399rcsbufp" data-ref-filename="399rcsbufp">rcsbufp</dfn>;</td></tr>
<tr><th id="4258">4258</th><td></td></tr>
<tr><th id="4259">4259</th><td>	<i>/* It isn't the head revision of the trunk.  We'll need to</i></td></tr>
<tr><th id="4260">4260</th><td><i>	   walk through the deltas.  */</i></td></tr>
<tr><th id="4261">4261</th><td></td></tr>
<tr><th id="4262">4262</th><td>	<a class="local col7 ref" href="#387fp" title='fp' data-ref="387fp" data-ref-filename="387fp">fp</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4263">4263</th><td>	<b>if</b> (<a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="4264">4264</th><td>	    <a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>, &amp;<a class="local col7 ref" href="#387fp" title='fp' data-ref="387fp" data-ref-filename="387fp">fp</a>, &amp;<a class="local col0 ref" href="#390rcsbuf" title='rcsbuf' data-ref="390rcsbuf" data-ref-filename="390rcsbuf">rcsbuf</a>);</td></tr>
<tr><th id="4265">4265</th><td></td></tr>
<tr><th id="4266">4266</th><td>	<b>if</b> (<a class="local col7 ref" href="#387fp" title='fp' data-ref="387fp" data-ref-filename="387fp">fp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4267">4267</th><td>	{</td></tr>
<tr><th id="4268">4268</th><td>	    <i>/* If RCS_deltas didn't close the file, we could use fstat</i></td></tr>
<tr><th id="4269">4269</th><td><i>	       here too.  Probably should change it thusly....  */</i></td></tr>
<tr><th id="4270">4270</th><td>	    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#__stat50" title='stat' data-ref="__stat50" data-ref-filename="__stat50">stat</a> (<a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>, &amp;<a class="local col9 ref" href="#389sb" title='sb' data-ref="389sb" data-ref-filename="389sb">sb</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="4271">4271</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot stat %s"</q>, <a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="4272">4272</th><td>	    <a class="local col9 ref" href="#399rcsbufp" title='rcsbufp' data-ref="399rcsbufp" data-ref-filename="399rcsbufp">rcsbufp</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4273">4273</th><td>	}</td></tr>
<tr><th id="4274">4274</th><td>	<b>else</b></td></tr>
<tr><th id="4275">4275</th><td>	{</td></tr>
<tr><th id="4276">4276</th><td>	    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#__fstat50" title='fstat' data-ref="__fstat50" data-ref-filename="__fstat50">fstat</a> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#508" title="((fp)-&gt;_file == -1 ? -1 : (int)(unsigned short)(fp)-&gt;_file)" data-ref="_M/fileno">fileno</a> (<a class="local col7 ref" href="#387fp" title='fp' data-ref="387fp" data-ref-filename="387fp">fp</a>), &amp;<a class="local col9 ref" href="#389sb" title='sb' data-ref="389sb" data-ref-filename="389sb">sb</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="4277">4277</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot fstat %s"</q>, <a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="4278">4278</th><td>	    <a class="local col9 ref" href="#399rcsbufp" title='rcsbufp' data-ref="399rcsbufp" data-ref-filename="399rcsbufp">rcsbufp</a> = &amp;<a class="local col0 ref" href="#390rcsbuf" title='rcsbuf' data-ref="390rcsbuf" data-ref-filename="390rcsbuf">rcsbuf</a>;</td></tr>
<tr><th id="4279">4279</th><td>	}</td></tr>
<tr><th id="4280">4280</th><td></td></tr>
<tr><th id="4281">4281</th><td>	<a class="ref fn" href="#RCS_deltas" title='RCS_deltas' data-ref="RCS_deltas" data-ref-filename="RCS_deltas">RCS_deltas</a> (<a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>, <a class="local col7 ref" href="#387fp" title='fp' data-ref="387fp" data-ref-filename="387fp">fp</a>, <a class="local col9 ref" href="#399rcsbufp" title='rcsbufp' data-ref="399rcsbufp" data-ref-filename="399rcsbufp">rcsbufp</a>, <a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a>, <a class="enum" href="rcs.h.html#RCS_FETCH" title='RCS_FETCH' data-ref="RCS_FETCH" data-ref-filename="RCS_FETCH">RCS_FETCH</a>, &amp;<a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a>, &amp;<a class="local col3 ref" href="#393len" title='len' data-ref="393len" data-ref-filename="393len">len</a>,</td></tr>
<tr><th id="4282">4282</th><td>		    &amp;<a class="local col5 ref" href="#395log" title='log' data-ref="395log" data-ref-filename="395log">log</a>, &amp;<a class="local col6 ref" href="#396loglen" title='loglen' data-ref="396loglen" data-ref-filename="396loglen">loglen</a>);</td></tr>
<tr><th id="4283">4283</th><td>	<a class="local col4 ref" href="#394free_value" title='free_value' data-ref="394free_value" data-ref-filename="394free_value">free_value</a> = <var>1</var>;</td></tr>
<tr><th id="4284">4284</th><td>    }</td></tr>
<tr><th id="4285">4285</th><td></td></tr>
<tr><th id="4286">4286</th><td>    <i>/* If OPTIONS is NULL or the empty string, then the old code would</i></td></tr>
<tr><th id="4287">4287</th><td><i>       invoke the RCS co program with no -k option, which means that</i></td></tr>
<tr><th id="4288">4288</th><td><i>       co would use the string we have stored in rcs-&gt;expand.  */</i></td></tr>
<tr><th id="4289">4289</th><td>    <b>if</b> ((<a class="local col1 ref" href="#381options" title='options' data-ref="381options" data-ref-filename="381options">options</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || <a class="local col1 ref" href="#381options" title='options' data-ref="381options" data-ref-filename="381options">options</a>[<var>0</var>] == <kbd>'\0'</kbd>) &amp;&amp; <a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4290">4290</th><td>	<a class="local col6 ref" href="#386expand" title='expand' data-ref="386expand" data-ref-filename="386expand">expand</a> = <a class="enum" href="#KFLAG_KV" title='KFLAG_KV' data-ref="KFLAG_KV" data-ref-filename="KFLAG_KV">KFLAG_KV</a>;</td></tr>
<tr><th id="4291">4291</th><td>    <b>else</b></td></tr>
<tr><th id="4292">4292</th><td>    {</td></tr>
<tr><th id="4293">4293</th><td>	<em>const</em> <em>char</em> *<dfn class="local col0 decl" id="400ouroptions" title='ouroptions' data-type='const char *' data-ref="400ouroptions" data-ref-filename="400ouroptions">ouroptions</dfn>;</td></tr>
<tr><th id="4294">4294</th><td>	<em>const</em> <em>char</em> * <em>const</em> *<dfn class="local col1 decl" id="401cpp" title='cpp' data-type='const char *const *' data-ref="401cpp" data-ref-filename="401cpp">cpp</dfn>;</td></tr>
<tr><th id="4295">4295</th><td></td></tr>
<tr><th id="4296">4296</th><td>	<b>if</b> (<a class="local col1 ref" href="#381options" title='options' data-ref="381options" data-ref-filename="381options">options</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="local col1 ref" href="#381options" title='options' data-ref="381options" data-ref-filename="381options">options</a>[<var>0</var>] != <kbd>'\0'</kbd>)</td></tr>
<tr><th id="4297">4297</th><td>	{</td></tr>
<tr><th id="4298">4298</th><td>	    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((options[0] == &apos;-&apos; &amp;&amp; options[1] == &apos;k&apos;) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 4298, __func__, &quot;options[0] == &apos;-&apos; &amp;&amp; options[1] == &apos;k&apos;&quot;))" data-ref="_M/assert">assert</a> (<a class="local col1 ref" href="#381options" title='options' data-ref="381options" data-ref-filename="381options">options</a>[<var>0</var>] == <kbd>'-'</kbd> &amp;&amp; <a class="local col1 ref" href="#381options" title='options' data-ref="381options" data-ref-filename="381options">options</a>[<var>1</var>] == <kbd>'k'</kbd>);</td></tr>
<tr><th id="4299">4299</th><td>	    <a class="local col0 ref" href="#400ouroptions" title='ouroptions' data-ref="400ouroptions" data-ref-filename="400ouroptions">ouroptions</a> = <a class="local col1 ref" href="#381options" title='options' data-ref="381options" data-ref-filename="381options">options</a> + <var>2</var>;</td></tr>
<tr><th id="4300">4300</th><td>	}</td></tr>
<tr><th id="4301">4301</th><td>	<b>else</b></td></tr>
<tr><th id="4302">4302</th><td>	    <a class="local col0 ref" href="#400ouroptions" title='ouroptions' data-ref="400ouroptions" data-ref-filename="400ouroptions">ouroptions</a> = <a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a>;</td></tr>
<tr><th id="4303">4303</th><td></td></tr>
<tr><th id="4304">4304</th><td>	<b>for</b> (<a class="local col1 ref" href="#401cpp" title='cpp' data-ref="401cpp" data-ref-filename="401cpp">cpp</a> = <a class="tu ref" href="#kflags" title='kflags' data-use='r' data-ref="kflags" data-ref-filename="kflags">kflags</a>; *<a class="local col1 ref" href="#401cpp" title='cpp' data-ref="401cpp" data-ref-filename="401cpp">cpp</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>; <a class="local col1 ref" href="#401cpp" title='cpp' data-ref="401cpp" data-ref-filename="401cpp">cpp</a>++)</td></tr>
<tr><th id="4305">4305</th><td>	    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(*cpp) == *(char *)(ouroptions) &amp;&amp; strcmp ((*cpp), (ouroptions)) == 0)" data-ref="_M/STREQ">STREQ</a> (*<a class="local col1 ref" href="#401cpp" title='cpp' data-ref="401cpp" data-ref-filename="401cpp">cpp</a>, <a class="local col0 ref" href="#400ouroptions" title='ouroptions' data-ref="400ouroptions" data-ref-filename="400ouroptions">ouroptions</a>))</td></tr>
<tr><th id="4306">4306</th><td>		<b>break</b>;</td></tr>
<tr><th id="4307">4307</th><td></td></tr>
<tr><th id="4308">4308</th><td>	<b>if</b> (*<a class="local col1 ref" href="#401cpp" title='cpp' data-ref="401cpp" data-ref-filename="401cpp">cpp</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4309">4309</th><td>	    <a class="local col6 ref" href="#386expand" title='expand' data-ref="386expand" data-ref-filename="386expand">expand</a> = (<b>enum</b> <a class="type" href="#kflag" title='kflag' data-ref="kflag" data-ref-filename="kflag">kflag</a>) (<a class="local col1 ref" href="#401cpp" title='cpp' data-ref="401cpp" data-ref-filename="401cpp">cpp</a> - <a class="tu ref" href="#kflags" title='kflags' data-use='r' data-ref="kflags" data-ref-filename="kflags">kflags</a>);</td></tr>
<tr><th id="4310">4310</th><td>	<b>else</b></td></tr>
<tr><th id="4311">4311</th><td>	{</td></tr>
<tr><th id="4312">4312</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="4313">4313</th><td>		   <q>"internal error: unsupported substitution string -k%s"</q>,</td></tr>
<tr><th id="4314">4314</th><td>		   <a class="local col0 ref" href="#400ouroptions" title='ouroptions' data-ref="400ouroptions" data-ref-filename="400ouroptions">ouroptions</a>);</td></tr>
<tr><th id="4315">4315</th><td>	    <a class="local col6 ref" href="#386expand" title='expand' data-ref="386expand" data-ref-filename="386expand">expand</a> = <a class="enum" href="#KFLAG_KV" title='KFLAG_KV' data-ref="KFLAG_KV" data-ref-filename="KFLAG_KV">KFLAG_KV</a>;</td></tr>
<tr><th id="4316">4316</th><td>	}</td></tr>
<tr><th id="4317">4317</th><td>    }</td></tr>
<tr><th id="4318">4318</th><td></td></tr>
<tr><th id="4319">4319</th><td><u>#<span data-ppcond="4319">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="4320">4320</th><td>    <i>/* Handle special files and permissions, if that is desired. */</i></td></tr>
<tr><th id="4321">4321</th><td>    <b>if</b> (preserve_perms)</td></tr>
<tr><th id="4322">4322</th><td>    {</td></tr>
<tr><th id="4323">4323</th><td>	RCSVers *vers;</td></tr>
<tr><th id="4324">4324</th><td>	Node *info;</td></tr>
<tr><th id="4325">4325</th><td></td></tr>
<tr><th id="4326">4326</th><td>	vp = findnode (rcs-&gt;versions, rev == NULL ? rcs-&gt;head : rev);</td></tr>
<tr><th id="4327">4327</th><td>	<b>if</b> (vp == NULL)</td></tr>
<tr><th id="4328">4328</th><td>	    error (<var>1</var>, <var>0</var>, <q>"internal error: no revision information for %s"</q>,</td></tr>
<tr><th id="4329">4329</th><td>		   rev == NULL ? rcs-&gt;head : rev);</td></tr>
<tr><th id="4330">4330</th><td>	vers = vp-&gt;data;</td></tr>
<tr><th id="4331">4331</th><td></td></tr>
<tr><th id="4332">4332</th><td>	<i>/* First we look for symlinks, which are simplest to handle. */</i></td></tr>
<tr><th id="4333">4333</th><td>	info = findnode (vers-&gt;other_delta, <q>"symlink"</q>);</td></tr>
<tr><th id="4334">4334</th><td>	<b>if</b> (info != NULL)</td></tr>
<tr><th id="4335">4335</th><td>	{</td></tr>
<tr><th id="4336">4336</th><td>	    <em>char</em> *dest;</td></tr>
<tr><th id="4337">4337</th><td></td></tr>
<tr><th id="4338">4338</th><td>	    <b>if</b> (pfn != NULL || (workfile == NULL &amp;&amp; sout == RUN_TTY))</td></tr>
<tr><th id="4339">4339</th><td>		error (<var>1</var>, <var>0</var>, <q>"symbolic link %s:%s cannot be piped"</q>,</td></tr>
<tr><th id="4340">4340</th><td>		       rcs-&gt;path, vers-&gt;version);</td></tr>
<tr><th id="4341">4341</th><td>	    <b>if</b> (workfile == NULL)</td></tr>
<tr><th id="4342">4342</th><td>		dest = sout;</td></tr>
<tr><th id="4343">4343</th><td>	    <b>else</b></td></tr>
<tr><th id="4344">4344</th><td>		dest = workfile;</td></tr>
<tr><th id="4345">4345</th><td></td></tr>
<tr><th id="4346">4346</th><td>	    <i>/* Remove `dest', just in case.  It's okay to get ENOENT here,</i></td></tr>
<tr><th id="4347">4347</th><td><i>	       since we just want the file not to be there.  (TODO: decide</i></td></tr>
<tr><th id="4348">4348</th><td><i>	       whether it should be considered an error for `dest' to exist</i></td></tr>
<tr><th id="4349">4349</th><td><i>	       at this point.  If so, the unlink call should be removed and</i></td></tr>
<tr><th id="4350">4350</th><td><i>	       `symlink' should signal the error. -twp) */</i></td></tr>
<tr><th id="4351">4351</th><td>	    <b>if</b> (CVS_UNLINK (dest) &lt; <var>0</var> &amp;&amp; !existence_error (errno))</td></tr>
<tr><th id="4352">4352</th><td>		error (<var>1</var>, errno, <q>"cannot remove %s"</q>, dest);</td></tr>
<tr><th id="4353">4353</th><td>	    <b>if</b> (symlink (info-&gt;data, dest) &lt; <var>0</var>)</td></tr>
<tr><th id="4354">4354</th><td>		error (<var>1</var>, errno, <q>"cannot create symbolic link from %s to %s"</q>,</td></tr>
<tr><th id="4355">4355</th><td>		       dest, (<em>char</em> *)info-&gt;data);</td></tr>
<tr><th id="4356">4356</th><td>	    <b>if</b> (free_value)</td></tr>
<tr><th id="4357">4357</th><td>		free (value);</td></tr>
<tr><th id="4358">4358</th><td>	    <b>if</b> (free_rev)</td></tr>
<tr><th id="4359">4359</th><td>		<i>/* It's okay to discard the const when free_rev is set, because</i></td></tr>
<tr><th id="4360">4360</th><td><i>		 * we know we allocated it in this function.</i></td></tr>
<tr><th id="4361">4361</th><td><i>		 */</i></td></tr>
<tr><th id="4362">4362</th><td>		free ((<em>char</em> *)rev);</td></tr>
<tr><th id="4363">4363</th><td>	    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="4364">4364</th><td>	}</td></tr>
<tr><th id="4365">4365</th><td></td></tr>
<tr><th id="4366">4366</th><td>	<i>/* Next, we look at this file's hardlinks field, and see whether</i></td></tr>
<tr><th id="4367">4367</th><td><i>	   it is linked to any other file that has been checked out.</i></td></tr>
<tr><th id="4368">4368</th><td><i>	   If so, we don't do anything else -- just link it to that file.</i></td></tr>
<tr><th id="4369">4369</th><td><i></i></td></tr>
<tr><th id="4370">4370</th><td><i>	   If we are checking out a file to a pipe or temporary storage,</i></td></tr>
<tr><th id="4371">4371</th><td><i>	   none of this should matter.  Hence the `workfile != NULL'</i></td></tr>
<tr><th id="4372">4372</th><td><i>	   wrapper around the whole thing. -twp */</i></td></tr>
<tr><th id="4373">4373</th><td></td></tr>
<tr><th id="4374">4374</th><td>	<b>if</b> (workfile != NULL)</td></tr>
<tr><th id="4375">4375</th><td>	{</td></tr>
<tr><th id="4376">4376</th><td>	    List *links = vers-&gt;hardlinks;</td></tr>
<tr><th id="4377">4377</th><td>	    <b>if</b> (links != NULL)</td></tr>
<tr><th id="4378">4378</th><td>	    {</td></tr>
<tr><th id="4379">4379</th><td>		Node *uptodate_link;</td></tr>
<tr><th id="4380">4380</th><td></td></tr>
<tr><th id="4381">4381</th><td>		<i>/* For each file in the hardlinks field, check to see</i></td></tr>
<tr><th id="4382">4382</th><td><i>		   if it exists, and if so, if it has been checked out</i></td></tr>
<tr><th id="4383">4383</th><td><i>		   this iteration.  When walklist returns, uptodate_link</i></td></tr>
<tr><th id="4384">4384</th><td><i>		   should point to a hardlist node representing a file</i></td></tr>
<tr><th id="4385">4385</th><td><i>		   in `links' which has recently been checked out, or</i></td></tr>
<tr><th id="4386">4386</th><td><i>		   NULL if no file in `links' has yet been checked out. */</i></td></tr>
<tr><th id="4387">4387</th><td></td></tr>
<tr><th id="4388">4388</th><td>		uptodate_link = NULL;</td></tr>
<tr><th id="4389">4389</th><td>		(<em>void</em>) walklist (links, find_checkedout_proc, &amp;uptodate_link);</td></tr>
<tr><th id="4390">4390</th><td>		dellist (&amp;links);</td></tr>
<tr><th id="4391">4391</th><td></td></tr>
<tr><th id="4392">4392</th><td>		<i>/* If we've found a file that `workfile' is supposed to be</i></td></tr>
<tr><th id="4393">4393</th><td><i>		   linked to, and it has been checked out since CVS was</i></td></tr>
<tr><th id="4394">4394</th><td><i>		   invoked, then simply link workfile to that file and return.</i></td></tr>
<tr><th id="4395">4395</th><td><i></i></td></tr>
<tr><th id="4396">4396</th><td><i>		   If one of these conditions is not met, then</i></td></tr>
<tr><th id="4397">4397</th><td><i>		   workfile is the first one in its hardlink group to</i></td></tr>
<tr><th id="4398">4398</th><td><i>		   be checked out, and we must continue with a full</i></td></tr>
<tr><th id="4399">4399</th><td><i>		   checkout. */</i></td></tr>
<tr><th id="4400">4400</th><td></td></tr>
<tr><th id="4401">4401</th><td>		<b>if</b> (uptodate_link != NULL)</td></tr>
<tr><th id="4402">4402</th><td>		{</td></tr>
<tr><th id="4403">4403</th><td>		    <b>struct</b> hardlink_info *hlinfo = uptodate_link-&gt;data;</td></tr>
<tr><th id="4404">4404</th><td></td></tr>
<tr><th id="4405">4405</th><td>		    <b>if</b> (link (uptodate_link-&gt;key, workfile) &lt; <var>0</var>)</td></tr>
<tr><th id="4406">4406</th><td>			error (<var>1</var>, errno, <q>"cannot link %s to %s"</q>,</td></tr>
<tr><th id="4407">4407</th><td>			       workfile, uptodate_link-&gt;key);</td></tr>
<tr><th id="4408">4408</th><td>		    hlinfo-&gt;checked_out = <var>1</var>;	<i>/* probably unnecessary */</i></td></tr>
<tr><th id="4409">4409</th><td>		    <b>if</b> (free_value)</td></tr>
<tr><th id="4410">4410</th><td>			free (value);</td></tr>
<tr><th id="4411">4411</th><td>		    <b>if</b> (free_rev)</td></tr>
<tr><th id="4412">4412</th><td>			<i>/* It's okay to discard the const when free_rev is set,</i></td></tr>
<tr><th id="4413">4413</th><td><i>			 * because we know we allocated it in this function.</i></td></tr>
<tr><th id="4414">4414</th><td><i>			 */</i></td></tr>
<tr><th id="4415">4415</th><td>			free ((<em>char</em> *)rev);</td></tr>
<tr><th id="4416">4416</th><td>		    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="4417">4417</th><td>		}</td></tr>
<tr><th id="4418">4418</th><td>	    }</td></tr>
<tr><th id="4419">4419</th><td>	}</td></tr>
<tr><th id="4420">4420</th><td></td></tr>
<tr><th id="4421">4421</th><td>	info = findnode (vers-&gt;other_delta, <q>"owner"</q>);</td></tr>
<tr><th id="4422">4422</th><td>	<b>if</b> (info != NULL)</td></tr>
<tr><th id="4423">4423</th><td>	{</td></tr>
<tr><th id="4424">4424</th><td>	    change_rcs_owner_or_group = <var>1</var>;</td></tr>
<tr><th id="4425">4425</th><td>	    rcs_owner = (uid_t) strtoul (info-&gt;data, NULL, <var>10</var>);</td></tr>
<tr><th id="4426">4426</th><td>	}</td></tr>
<tr><th id="4427">4427</th><td>	info = findnode (vers-&gt;other_delta, <q>"group"</q>);</td></tr>
<tr><th id="4428">4428</th><td>	<b>if</b> (info != NULL)</td></tr>
<tr><th id="4429">4429</th><td>	{</td></tr>
<tr><th id="4430">4430</th><td>	    change_rcs_owner_or_group = <var>1</var>;</td></tr>
<tr><th id="4431">4431</th><td>	    rcs_group = (gid_t) strtoul (info-&gt;data, NULL, <var>10</var>);</td></tr>
<tr><th id="4432">4432</th><td>	}</td></tr>
<tr><th id="4433">4433</th><td>	info = findnode (vers-&gt;other_delta, <q>"permissions"</q>);</td></tr>
<tr><th id="4434">4434</th><td>	<b>if</b> (info != NULL)</td></tr>
<tr><th id="4435">4435</th><td>	{</td></tr>
<tr><th id="4436">4436</th><td>	    change_rcs_mode = <var>1</var>;</td></tr>
<tr><th id="4437">4437</th><td>	    rcs_mode = (mode_t) strtoul (info-&gt;data, NULL, <var>8</var>);</td></tr>
<tr><th id="4438">4438</th><td>	}</td></tr>
<tr><th id="4439">4439</th><td>	info = findnode (vers-&gt;other_delta, <q>"special"</q>);</td></tr>
<tr><th id="4440">4440</th><td>	<b>if</b> (info != NULL)</td></tr>
<tr><th id="4441">4441</th><td>	{</td></tr>
<tr><th id="4442">4442</th><td>	    <i>/* If the size of `devtype' changes, fix the sscanf call also */</i></td></tr>
<tr><th id="4443">4443</th><td>	    <em>char</em> devtype[<var>16</var>];</td></tr>
<tr><th id="4444">4444</th><td></td></tr>
<tr><th id="4445">4445</th><td>	    <b>if</b> (sscanf (info-&gt;data, <q>"%15s %lu"</q>,</td></tr>
<tr><th id="4446">4446</th><td>			devtype, &amp;devnum_long) &lt; <var>2</var>)</td></tr>
<tr><th id="4447">4447</th><td>		error (<var>1</var>, <var>0</var>, <q>"%s:%s has bad `special' newphrase %s"</q>,</td></tr>
<tr><th id="4448">4448</th><td>		       workfile, vers-&gt;version, (<em>char</em> *)info-&gt;data);</td></tr>
<tr><th id="4449">4449</th><td>	    devnum = devnum_long;</td></tr>
<tr><th id="4450">4450</th><td>	    <b>if</b> (STREQ (devtype, <q>"character"</q>))</td></tr>
<tr><th id="4451">4451</th><td>		special_file = S_IFCHR;</td></tr>
<tr><th id="4452">4452</th><td>	    <b>else</b> <b>if</b> (STREQ (devtype, <q>"block"</q>))</td></tr>
<tr><th id="4453">4453</th><td>		special_file = S_IFBLK;</td></tr>
<tr><th id="4454">4454</th><td>	    <b>else</b></td></tr>
<tr><th id="4455">4455</th><td>		error (<var>0</var>, <var>0</var>, <q>"%s is a special file of unsupported type `%s'"</q>,</td></tr>
<tr><th id="4456">4456</th><td>		       workfile, (<em>char</em> *)info-&gt;data);</td></tr>
<tr><th id="4457">4457</th><td>	}</td></tr>
<tr><th id="4458">4458</th><td>    }</td></tr>
<tr><th id="4459">4459</th><td><u>#<span data-ppcond="4319">endif</span> /* PRESERVE_PERMISSIONS_SUPPORT */</u></td></tr>
<tr><th id="4460">4460</th><td></td></tr>
<tr><th id="4461">4461</th><td>    <b>if</b> (<a class="local col6 ref" href="#386expand" title='expand' data-ref="386expand" data-ref-filename="386expand">expand</a> != <a class="enum" href="#KFLAG_O" title='KFLAG_O' data-ref="KFLAG_O" data-ref-filename="KFLAG_O">KFLAG_O</a> &amp;&amp; <a class="local col6 ref" href="#386expand" title='expand' data-ref="386expand" data-ref-filename="386expand">expand</a> != <a class="enum" href="#KFLAG_B" title='KFLAG_B' data-ref="KFLAG_B" data-ref-filename="KFLAG_B">KFLAG_B</a>)</td></tr>
<tr><th id="4462">4462</th><td>    {</td></tr>
<tr><th id="4463">4463</th><td>	<em>char</em> *<dfn class="local col2 decl" id="402newvalue" title='newvalue' data-type='char *' data-ref="402newvalue" data-ref-filename="402newvalue">newvalue</dfn>;</td></tr>
<tr><th id="4464">4464</th><td></td></tr>
<tr><th id="4465">4465</th><td>	<i>/* Don't fetch the delta node again if we already have it. */</i></td></tr>
<tr><th id="4466">4466</th><td>	<b>if</b> (<a class="local col7 ref" href="#397vp" title='vp' data-ref="397vp" data-ref-filename="397vp">vp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4467">4467</th><td>	{</td></tr>
<tr><th id="4468">4468</th><td>	    <a class="local col7 ref" href="#397vp" title='vp' data-ref="397vp" data-ref-filename="397vp">vp</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> ? <a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a> : <a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a>);</td></tr>
<tr><th id="4469">4469</th><td>	    <b>if</b> (<a class="local col7 ref" href="#397vp" title='vp' data-ref="397vp" data-ref-filename="397vp">vp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4470">4470</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"internal error: no revision information for %s"</q>,</td></tr>
<tr><th id="4471">4471</th><td>		       <a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> ? <a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a> : <a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a>);</td></tr>
<tr><th id="4472">4472</th><td>	}</td></tr>
<tr><th id="4473">4473</th><td></td></tr>
<tr><th id="4474">4474</th><td>	<a class="tu ref fn" href="#expand_keywords" title='expand_keywords' data-use='c' data-ref="expand_keywords" data-ref-filename="expand_keywords">expand_keywords</a> (<a class="local col7 ref" href="#377rcs" title='rcs' data-ref="377rcs" data-ref-filename="377rcs">rcs</a>, <a class="local col7 ref" href="#397vp" title='vp' data-ref="397vp" data-ref-filename="397vp">vp</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>, <a class="local col0 ref" href="#380nametag" title='nametag' data-ref="380nametag" data-ref-filename="380nametag">nametag</a>, <a class="local col5 ref" href="#395log" title='log' data-ref="395log" data-ref-filename="395log">log</a>, <a class="local col6 ref" href="#396loglen" title='loglen' data-ref="396loglen" data-ref-filename="396loglen">loglen</a>,</td></tr>
<tr><th id="4475">4475</th><td>			 <a class="local col6 ref" href="#386expand" title='expand' data-ref="386expand" data-ref-filename="386expand">expand</a>, <a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a>, <a class="local col3 ref" href="#393len" title='len' data-ref="393len" data-ref-filename="393len">len</a>, &amp;<a class="local col2 ref" href="#402newvalue" title='newvalue' data-ref="402newvalue" data-ref-filename="402newvalue">newvalue</a>, &amp;<a class="local col3 ref" href="#393len" title='len' data-ref="393len" data-ref-filename="393len">len</a>);</td></tr>
<tr><th id="4476">4476</th><td></td></tr>
<tr><th id="4477">4477</th><td>	<b>if</b> (<a class="local col2 ref" href="#402newvalue" title='newvalue' data-ref="402newvalue" data-ref-filename="402newvalue">newvalue</a> != <a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a>)</td></tr>
<tr><th id="4478">4478</th><td>	{</td></tr>
<tr><th id="4479">4479</th><td>	    <b>if</b> (<a class="local col4 ref" href="#394free_value" title='free_value' data-ref="394free_value" data-ref-filename="394free_value">free_value</a>)</td></tr>
<tr><th id="4480">4480</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a>);</td></tr>
<tr><th id="4481">4481</th><td>	    <a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a> = <a class="local col2 ref" href="#402newvalue" title='newvalue' data-ref="402newvalue" data-ref-filename="402newvalue">newvalue</a>;</td></tr>
<tr><th id="4482">4482</th><td>	    <a class="local col4 ref" href="#394free_value" title='free_value' data-ref="394free_value" data-ref-filename="394free_value">free_value</a> = <var>1</var>;</td></tr>
<tr><th id="4483">4483</th><td>	}</td></tr>
<tr><th id="4484">4484</th><td>    }</td></tr>
<tr><th id="4485">4485</th><td></td></tr>
<tr><th id="4486">4486</th><td>    <b>if</b> (<a class="local col5 ref" href="#385free_rev" title='free_rev' data-ref="385free_rev" data-ref-filename="385free_rev">free_rev</a>)</td></tr>
<tr><th id="4487">4487</th><td>	<i>/* It's okay to discard the const when free_rev is set, because</i></td></tr>
<tr><th id="4488">4488</th><td><i>	 * we know we allocated it in this function.</i></td></tr>
<tr><th id="4489">4489</th><td><i>	 */</i></td></tr>
<tr><th id="4490">4490</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> ((<em>char</em> *)<a class="local col9 ref" href="#379rev" title='rev' data-ref="379rev" data-ref-filename="379rev">rev</a>);</td></tr>
<tr><th id="4491">4491</th><td></td></tr>
<tr><th id="4492">4492</th><td>    <b>if</b> (<a class="local col5 ref" href="#395log" title='log' data-ref="395log" data-ref-filename="395log">log</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4493">4493</th><td>    {</td></tr>
<tr><th id="4494">4494</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col5 ref" href="#395log" title='log' data-ref="395log" data-ref-filename="395log">log</a>);</td></tr>
<tr><th id="4495">4495</th><td>	<a class="local col5 ref" href="#395log" title='log' data-ref="395log" data-ref-filename="395log">log</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4496">4496</th><td>    }</td></tr>
<tr><th id="4497">4497</th><td></td></tr>
<tr><th id="4498">4498</th><td>    <b>if</b> (<a class="local col3 ref" href="#383pfn" title='pfn' data-ref="383pfn" data-ref-filename="383pfn">pfn</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4499">4499</th><td>    {</td></tr>
<tr><th id="4500">4500</th><td><u>#<span data-ppcond="4500">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="4501">4501</th><td>	<b>if</b> (special_file)</td></tr>
<tr><th id="4502">4502</th><td>	    error (<var>1</var>, <var>0</var>, <q>"special file %s cannot be piped to anything"</q>,</td></tr>
<tr><th id="4503">4503</th><td>		   rcs-&gt;path);</td></tr>
<tr><th id="4504">4504</th><td><u>#<span data-ppcond="4500">endif</span></u></td></tr>
<tr><th id="4505">4505</th><td>	<i>/* The PFN interface is very simple to implement right now, as</i></td></tr>
<tr><th id="4506">4506</th><td><i>           we always have the entire file in memory.  */</i></td></tr>
<tr><th id="4507">4507</th><td>	<b>if</b> (<a class="local col3 ref" href="#393len" title='len' data-ref="393len" data-ref-filename="393len">len</a> != <var>0</var>)</td></tr>
<tr><th id="4508">4508</th><td>	    <a class="local col3 ref" href="#383pfn" title='pfn' data-ref="383pfn" data-ref-filename="383pfn">pfn</a> (<a class="local col4 ref" href="#384callerdat" title='callerdat' data-ref="384callerdat" data-ref-filename="384callerdat">callerdat</a>, <a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a>, <a class="local col3 ref" href="#393len" title='len' data-ref="393len" data-ref-filename="393len">len</a>);</td></tr>
<tr><th id="4509">4509</th><td>    }</td></tr>
<tr><th id="4510">4510</th><td><u>#<span data-ppcond="4510">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="4511">4511</th><td>    <b>else</b> <b>if</b> (special_file)</td></tr>
<tr><th id="4512">4512</th><td>    {</td></tr>
<tr><th id="4513">4513</th><td><u># ifdef HAVE_MKNOD</u></td></tr>
<tr><th id="4514">4514</th><td>	<em>char</em> *dest;</td></tr>
<tr><th id="4515">4515</th><td></td></tr>
<tr><th id="4516">4516</th><td>	<i>/* Can send either to WORKFILE or to SOUT, as long as SOUT is</i></td></tr>
<tr><th id="4517">4517</th><td><i>	   not RUN_TTY. */</i></td></tr>
<tr><th id="4518">4518</th><td>	dest = workfile;</td></tr>
<tr><th id="4519">4519</th><td>	<b>if</b> (dest == NULL)</td></tr>
<tr><th id="4520">4520</th><td>	{</td></tr>
<tr><th id="4521">4521</th><td>	    <b>if</b> (sout == RUN_TTY)</td></tr>
<tr><th id="4522">4522</th><td>		error (<var>1</var>, <var>0</var>, <q>"special file %s cannot be written to stdout"</q>,</td></tr>
<tr><th id="4523">4523</th><td>		       rcs-&gt;path);</td></tr>
<tr><th id="4524">4524</th><td>	    dest = sout;</td></tr>
<tr><th id="4525">4525</th><td>	}</td></tr>
<tr><th id="4526">4526</th><td></td></tr>
<tr><th id="4527">4527</th><td>	<i>/* Unlink `dest', just in case.  It's okay if this provokes a</i></td></tr>
<tr><th id="4528">4528</th><td><i>	   ENOENT error. */</i></td></tr>
<tr><th id="4529">4529</th><td>	<b>if</b> (CVS_UNLINK (dest) &lt; <var>0</var> &amp;&amp; existence_error (errno))</td></tr>
<tr><th id="4530">4530</th><td>	    error (<var>1</var>, errno, <q>"cannot remove %s"</q>, dest);</td></tr>
<tr><th id="4531">4531</th><td>	<b>if</b> (mknod (dest, special_file, devnum) &lt; <var>0</var>)</td></tr>
<tr><th id="4532">4532</th><td>	    error (<var>1</var>, errno, <q>"could not create special file %s"</q>,</td></tr>
<tr><th id="4533">4533</th><td>		   dest);</td></tr>
<tr><th id="4534">4534</th><td><u># else</u></td></tr>
<tr><th id="4535">4535</th><td>	error (<var>1</var>, <var>0</var>,</td></tr>
<tr><th id="4536">4536</th><td><q>"cannot create %s: unable to create special files on this system"</q>,</td></tr>
<tr><th id="4537">4537</th><td>workfile);</td></tr>
<tr><th id="4538">4538</th><td><u># endif</u></td></tr>
<tr><th id="4539">4539</th><td>    }</td></tr>
<tr><th id="4540">4540</th><td><u>#<span data-ppcond="4510">endif</span></u></td></tr>
<tr><th id="4541">4541</th><td>    <b>else</b></td></tr>
<tr><th id="4542">4542</th><td>    {</td></tr>
<tr><th id="4543">4543</th><td>	<i>/* Not a special file: write to WORKFILE or SOUT. */</i></td></tr>
<tr><th id="4544">4544</th><td>	<b>if</b> (<a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4545">4545</th><td>	{</td></tr>
<tr><th id="4546">4546</th><td>	    <b>if</b> (<a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a> == <a class="macro" href="cvs.h.html#705" title="(char *)0" data-ref="_M/RUN_TTY">RUN_TTY</a>)</td></tr>
<tr><th id="4547">4547</th><td>		<a class="local col8 ref" href="#388ofp" title='ofp' data-ref="388ofp" data-ref-filename="388ofp">ofp</a> = <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#216" title="(&amp;__sF[1])" data-ref="_M/stdout">stdout</a>;</td></tr>
<tr><th id="4548">4548</th><td>	    <b>else</b></td></tr>
<tr><th id="4549">4549</th><td>	    {</td></tr>
<tr><th id="4550">4550</th><td>		<i>/* Symbolic links should be removed before replacement, so that</i></td></tr>
<tr><th id="4551">4551</th><td><i>		   `fopen' doesn't follow the link and open the wrong file. */</i></td></tr>
<tr><th id="4552">4552</th><td>		<b>if</b> (<a class="ref fn" href="cvs.h.html#islink" title='islink' data-ref="islink" data-ref-filename="islink">islink</a> (<a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>))</td></tr>
<tr><th id="4553">4553</th><td>		    <b>if</b> (<a class="ref fn" href="cvs.h.html#unlink_file" title='unlink_file' data-ref="unlink_file" data-ref-filename="unlink_file">unlink_file</a> (<a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="4554">4554</th><td>			<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot remove %s"</q>, <a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a>);</td></tr>
<tr><th id="4555">4555</th><td>		<a class="local col8 ref" href="#388ofp" title='ofp' data-ref="388ofp" data-ref-filename="388ofp">ofp</a> = <a class="macro" href="../lib/system.h.html#224" title="fopen" data-ref="_M/CVS_FOPEN">CVS_FOPEN</a> (<a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a>, <a class="local col6 ref" href="#386expand" title='expand' data-ref="386expand" data-ref-filename="386expand">expand</a> == <a class="enum" href="#KFLAG_B" title='KFLAG_B' data-ref="KFLAG_B" data-ref-filename="KFLAG_B">KFLAG_B</a> ? <q>"wb"</q> : <q>"w"</q>);</td></tr>
<tr><th id="4556">4556</th><td>		<b>if</b> (<a class="local col8 ref" href="#388ofp" title='ofp' data-ref="388ofp" data-ref-filename="388ofp">ofp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4557">4557</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot open %s"</q>, <a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a>);</td></tr>
<tr><th id="4558">4558</th><td>	    }</td></tr>
<tr><th id="4559">4559</th><td>	}</td></tr>
<tr><th id="4560">4560</th><td>	<b>else</b></td></tr>
<tr><th id="4561">4561</th><td>	{</td></tr>
<tr><th id="4562">4562</th><td>	    <i>/* Output is supposed to go to WORKFILE, so we should open that</i></td></tr>
<tr><th id="4563">4563</th><td><i>	       file.  Symbolic links should be removed first (see above). */</i></td></tr>
<tr><th id="4564">4564</th><td>	    <b>if</b> (<a class="ref fn" href="cvs.h.html#islink" title='islink' data-ref="islink" data-ref-filename="islink">islink</a> (<a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>))</td></tr>
<tr><th id="4565">4565</th><td>		<b>if</b> (<a class="ref fn" href="cvs.h.html#unlink_file" title='unlink_file' data-ref="unlink_file" data-ref-filename="unlink_file">unlink_file</a> (<a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="4566">4566</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot remove %s"</q>, <a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a>);</td></tr>
<tr><th id="4567">4567</th><td></td></tr>
<tr><th id="4568">4568</th><td>	    <a class="local col8 ref" href="#388ofp" title='ofp' data-ref="388ofp" data-ref-filename="388ofp">ofp</a> = <a class="macro" href="../lib/system.h.html#224" title="fopen" data-ref="_M/CVS_FOPEN">CVS_FOPEN</a> (<a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a>, <a class="local col6 ref" href="#386expand" title='expand' data-ref="386expand" data-ref-filename="386expand">expand</a> == <a class="enum" href="#KFLAG_B" title='KFLAG_B' data-ref="KFLAG_B" data-ref-filename="KFLAG_B">KFLAG_B</a> ? <q>"wb"</q> : <q>"w"</q>);</td></tr>
<tr><th id="4569">4569</th><td></td></tr>
<tr><th id="4570">4570</th><td>	    <i>/* If the open failed because the existing workfile was not</i></td></tr>
<tr><th id="4571">4571</th><td><i>	       writable, try to chmod the file and retry the open.  */</i></td></tr>
<tr><th id="4572">4572</th><td>	    <b>if</b> (<a class="local col8 ref" href="#388ofp" title='ofp' data-ref="388ofp" data-ref-filename="388ofp">ofp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a> == <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/errno.h.html#55" title="13" data-ref="_M/EACCES">EACCES</a></td></tr>
<tr><th id="4573">4573</th><td>		&amp;&amp; <a class="ref fn" href="cvs.h.html#isfile" title='isfile' data-ref="isfile" data-ref-filename="isfile">isfile</a> (<a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a>) &amp;&amp; !<a class="ref fn" href="cvs.h.html#iswritable" title='iswritable' data-ref="iswritable" data-ref-filename="iswritable">iswritable</a> (<a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a>))</td></tr>
<tr><th id="4574">4574</th><td>	    {</td></tr>
<tr><th id="4575">4575</th><td>		<a class="ref fn" href="cvs.h.html#xchmod" title='xchmod' data-ref="xchmod" data-ref-filename="xchmod">xchmod</a> (<a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a>, <var>1</var>);</td></tr>
<tr><th id="4576">4576</th><td>		<a class="local col8 ref" href="#388ofp" title='ofp' data-ref="388ofp" data-ref-filename="388ofp">ofp</a> = <a class="macro" href="../lib/system.h.html#224" title="fopen" data-ref="_M/CVS_FOPEN">CVS_FOPEN</a> (<a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a>, <a class="local col6 ref" href="#386expand" title='expand' data-ref="386expand" data-ref-filename="386expand">expand</a> == <a class="enum" href="#KFLAG_B" title='KFLAG_B' data-ref="KFLAG_B" data-ref-filename="KFLAG_B">KFLAG_B</a> ? <q>"wb"</q> : <q>"w"</q>);</td></tr>
<tr><th id="4577">4577</th><td>	    }</td></tr>
<tr><th id="4578">4578</th><td></td></tr>
<tr><th id="4579">4579</th><td>	    <b>if</b> (<a class="local col8 ref" href="#388ofp" title='ofp' data-ref="388ofp" data-ref-filename="388ofp">ofp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4580">4580</th><td>	    {</td></tr>
<tr><th id="4581">4581</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot open %s"</q>, <a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a>);</td></tr>
<tr><th id="4582">4582</th><td>		<b>if</b> (<a class="local col4 ref" href="#394free_value" title='free_value' data-ref="394free_value" data-ref-filename="394free_value">free_value</a>)</td></tr>
<tr><th id="4583">4583</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a>);</td></tr>
<tr><th id="4584">4584</th><td>		<b>return</b> <var>1</var>;</td></tr>
<tr><th id="4585">4585</th><td>	    }</td></tr>
<tr><th id="4586">4586</th><td>	}</td></tr>
<tr><th id="4587">4587</th><td></td></tr>
<tr><th id="4588">4588</th><td>	<b>if</b> (<a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a> == <a class="macro" href="cvs.h.html#705" title="(char *)0" data-ref="_M/RUN_TTY">RUN_TTY</a>)</td></tr>
<tr><th id="4589">4589</th><td>	{</td></tr>
<tr><th id="4590">4590</th><td>	    <b>if</b> (<a class="local col6 ref" href="#386expand" title='expand' data-ref="386expand" data-ref-filename="386expand">expand</a> == <a class="enum" href="#KFLAG_B" title='KFLAG_B' data-ref="KFLAG_B" data-ref-filename="KFLAG_B">KFLAG_B</a>)</td></tr>
<tr><th id="4591">4591</th><td>		<a class="ref fn" href="cvs.h.html#cvs_output_binary" title='cvs_output_binary' data-ref="cvs_output_binary" data-ref-filename="cvs_output_binary">cvs_output_binary</a> (<a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a>, <a class="local col3 ref" href="#393len" title='len' data-ref="393len" data-ref-filename="393len">len</a>);</td></tr>
<tr><th id="4592">4592</th><td>	    <b>else</b></td></tr>
<tr><th id="4593">4593</th><td>	    {</td></tr>
<tr><th id="4594">4594</th><td>		<i>/* cvs_output requires the caller to check for zero</i></td></tr>
<tr><th id="4595">4595</th><td><i>		   length.  */</i></td></tr>
<tr><th id="4596">4596</th><td>		<b>if</b> (<a class="local col3 ref" href="#393len" title='len' data-ref="393len" data-ref-filename="393len">len</a> &gt; <var>0</var>)</td></tr>
<tr><th id="4597">4597</th><td>		    <a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a>, <a class="local col3 ref" href="#393len" title='len' data-ref="393len" data-ref-filename="393len">len</a>);</td></tr>
<tr><th id="4598">4598</th><td>	    }</td></tr>
<tr><th id="4599">4599</th><td>	}</td></tr>
<tr><th id="4600">4600</th><td>	<b>else</b></td></tr>
<tr><th id="4601">4601</th><td>	{</td></tr>
<tr><th id="4602">4602</th><td>	    <i>/* NT 4.0 is said to have trouble writing 2099999 bytes</i></td></tr>
<tr><th id="4603">4603</th><td><i>	       (for example) in a single fwrite.  So break it down</i></td></tr>
<tr><th id="4604">4604</th><td><i>	       (there is no need to be writing that much at once</i></td></tr>
<tr><th id="4605">4605</th><td><i>	       anyway; it is possible that LARGEST_FWRITE should be</i></td></tr>
<tr><th id="4606">4606</th><td><i>	       somewhat larger for good performance, but for testing I</i></td></tr>
<tr><th id="4607">4607</th><td><i>	       want to start with a small value until/unless a bigger</i></td></tr>
<tr><th id="4608">4608</th><td><i>	       one proves useful).  */</i></td></tr>
<tr><th id="4609">4609</th><td><u>#define <dfn class="macro" id="_M/LARGEST_FWRITE" data-ref="_M/LARGEST_FWRITE">LARGEST_FWRITE</dfn> 8192</u></td></tr>
<tr><th id="4610">4610</th><td>	    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col3 decl" id="403nleft" title='nleft' data-type='size_t' data-ref="403nleft" data-ref-filename="403nleft">nleft</dfn> = <a class="local col3 ref" href="#393len" title='len' data-ref="393len" data-ref-filename="393len">len</a>;</td></tr>
<tr><th id="4611">4611</th><td>	    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col4 decl" id="404nstep" title='nstep' data-type='size_t' data-ref="404nstep" data-ref-filename="404nstep">nstep</dfn> = (<a class="local col3 ref" href="#393len" title='len' data-ref="393len" data-ref-filename="393len">len</a> &lt; <a class="macro" href="#4609" title="8192" data-ref="_M/LARGEST_FWRITE">LARGEST_FWRITE</a> ? <a class="local col3 ref" href="#393len" title='len' data-ref="393len" data-ref-filename="393len">len</a> : <a class="macro" href="#4609" title="8192" data-ref="_M/LARGEST_FWRITE">LARGEST_FWRITE</a>);</td></tr>
<tr><th id="4612">4612</th><td>	    <em>char</em> *<dfn class="local col5 decl" id="405p" title='p' data-type='char *' data-ref="405p" data-ref-filename="405p">p</dfn> = <a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a>;</td></tr>
<tr><th id="4613">4613</th><td></td></tr>
<tr><th id="4614">4614</th><td>	    <b>while</b> (<a class="local col3 ref" href="#403nleft" title='nleft' data-ref="403nleft" data-ref-filename="403nleft">nleft</a> &gt; <var>0</var>)</td></tr>
<tr><th id="4615">4615</th><td>	    {</td></tr>
<tr><th id="4616">4616</th><td>		<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fwrite" title='fwrite' data-ref="fwrite" data-ref-filename="fwrite">fwrite</a> (<a class="local col5 ref" href="#405p" title='p' data-ref="405p" data-ref-filename="405p">p</a>, <var>1</var>, <a class="local col4 ref" href="#404nstep" title='nstep' data-ref="404nstep" data-ref-filename="404nstep">nstep</a>, <a class="local col8 ref" href="#388ofp" title='ofp' data-ref="388ofp" data-ref-filename="388ofp">ofp</a>) != <a class="local col4 ref" href="#404nstep" title='nstep' data-ref="404nstep" data-ref-filename="404nstep">nstep</a>)</td></tr>
<tr><th id="4617">4617</th><td>		{</td></tr>
<tr><th id="4618">4618</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot write %s"</q>,</td></tr>
<tr><th id="4619">4619</th><td>			   (<a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span></td></tr>
<tr><th id="4620">4620</th><td>			    ? <a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a></td></tr>
<tr><th id="4621">4621</th><td>			    : (<a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a> != <a class="macro" href="cvs.h.html#705" title="(char *)0" data-ref="_M/RUN_TTY">RUN_TTY</a> ? <a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a> : <q>"stdout"</q>)));</td></tr>
<tr><th id="4622">4622</th><td>		    <b>if</b> (<a class="local col4 ref" href="#394free_value" title='free_value' data-ref="394free_value" data-ref-filename="394free_value">free_value</a>)</td></tr>
<tr><th id="4623">4623</th><td>			<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a>);</td></tr>
<tr><th id="4624">4624</th><td>		    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="4625">4625</th><td>		}</td></tr>
<tr><th id="4626">4626</th><td>		<a class="local col5 ref" href="#405p" title='p' data-ref="405p" data-ref-filename="405p">p</a> += <a class="local col4 ref" href="#404nstep" title='nstep' data-ref="404nstep" data-ref-filename="404nstep">nstep</a>;</td></tr>
<tr><th id="4627">4627</th><td>		<a class="local col3 ref" href="#403nleft" title='nleft' data-ref="403nleft" data-ref-filename="403nleft">nleft</a> -= <a class="local col4 ref" href="#404nstep" title='nstep' data-ref="404nstep" data-ref-filename="404nstep">nstep</a>;</td></tr>
<tr><th id="4628">4628</th><td>		<b>if</b> (<a class="local col3 ref" href="#403nleft" title='nleft' data-ref="403nleft" data-ref-filename="403nleft">nleft</a> &lt; <a class="local col4 ref" href="#404nstep" title='nstep' data-ref="404nstep" data-ref-filename="404nstep">nstep</a>)</td></tr>
<tr><th id="4629">4629</th><td>		    <a class="local col4 ref" href="#404nstep" title='nstep' data-ref="404nstep" data-ref-filename="404nstep">nstep</a> = <a class="local col3 ref" href="#403nleft" title='nleft' data-ref="403nleft" data-ref-filename="403nleft">nleft</a>;</td></tr>
<tr><th id="4630">4630</th><td>	    }</td></tr>
<tr><th id="4631">4631</th><td>	}</td></tr>
<tr><th id="4632">4632</th><td>    }</td></tr>
<tr><th id="4633">4633</th><td></td></tr>
<tr><th id="4634">4634</th><td>    <b>if</b> (<a class="local col4 ref" href="#394free_value" title='free_value' data-ref="394free_value" data-ref-filename="394free_value">free_value</a>)</td></tr>
<tr><th id="4635">4635</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#392value" title='value' data-ref="392value" data-ref-filename="392value">value</a>);</td></tr>
<tr><th id="4636">4636</th><td></td></tr>
<tr><th id="4637">4637</th><td>    <b>if</b> (<a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4638">4638</th><td>    {</td></tr>
<tr><th id="4639">4639</th><td>	<em>int</em> <dfn class="local col6 decl" id="406ret" title='ret' data-type='int' data-ref="406ret" data-ref-filename="406ret">ret</dfn>;</td></tr>
<tr><th id="4640">4640</th><td></td></tr>
<tr><th id="4641">4641</th><td><u>#<span data-ppcond="4641">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="4642">4642</th><td>	<b>if</b> (!special_file &amp;&amp; fclose (ofp) &lt; <var>0</var>)</td></tr>
<tr><th id="4643">4643</th><td>	{</td></tr>
<tr><th id="4644">4644</th><td>	    error (<var>0</var>, errno, <q>"cannot close %s"</q>, workfile);</td></tr>
<tr><th id="4645">4645</th><td>	    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="4646">4646</th><td>	}</td></tr>
<tr><th id="4647">4647</th><td></td></tr>
<tr><th id="4648">4648</th><td>	<b>if</b> (change_rcs_owner_or_group)</td></tr>
<tr><th id="4649">4649</th><td>	{</td></tr>
<tr><th id="4650">4650</th><td>	    <b>if</b> (chown (workfile, rcs_owner, rcs_group) &lt; <var>0</var>)</td></tr>
<tr><th id="4651">4651</th><td>		error (<var>0</var>, errno, <q>"could not change owner or group of %s"</q>,</td></tr>
<tr><th id="4652">4652</th><td>		       workfile);</td></tr>
<tr><th id="4653">4653</th><td>	}</td></tr>
<tr><th id="4654">4654</th><td></td></tr>
<tr><th id="4655">4655</th><td>	ret = chmod (workfile,</td></tr>
<tr><th id="4656">4656</th><td>		     change_rcs_mode</td></tr>
<tr><th id="4657">4657</th><td>		     ? rcs_mode</td></tr>
<tr><th id="4658">4658</th><td>		     : sb.st_mode &amp; ~(S_IWRITE | S_IWGRP | S_IWOTH));</td></tr>
<tr><th id="4659">4659</th><td><u>#<span data-ppcond="4641">else</span></u></td></tr>
<tr><th id="4660">4660</th><td>	<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fclose" title='fclose' data-ref="fclose" data-ref-filename="fclose">fclose</a> (<a class="local col8 ref" href="#388ofp" title='ofp' data-ref="388ofp" data-ref-filename="388ofp">ofp</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="4661">4661</th><td>	{</td></tr>
<tr><th id="4662">4662</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot close %s"</q>, <a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a>);</td></tr>
<tr><th id="4663">4663</th><td>	    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="4664">4664</th><td>	}</td></tr>
<tr><th id="4665">4665</th><td></td></tr>
<tr><th id="4666">4666</th><td>	<a class="local col6 ref" href="#406ret" title='ret' data-ref="406ret" data-ref-filename="406ret">ret</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#chmod" title='chmod' data-ref="chmod" data-ref-filename="chmod">chmod</a> (<a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a>,</td></tr>
<tr><th id="4667">4667</th><td>		     <a class="local col9 ref" href="#389sb" title='sb' data-ref="389sb" data-ref-filename="389sb">sb</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat::st_mode" title='stat::st_mode' data-ref="stat::st_mode" data-ref-filename="stat..st_mode">st_mode</a> &amp; ~(<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#124" title="0000200" data-ref="_M/S_IWRITE">S_IWRITE</a> | <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#130" title="0000020" data-ref="_M/S_IWGRP">S_IWGRP</a> | <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#135" title="0000002" data-ref="_M/S_IWOTH">S_IWOTH</a>));</td></tr>
<tr><th id="4668">4668</th><td><u>#<span data-ppcond="4641">endif</span></u></td></tr>
<tr><th id="4669">4669</th><td>	<b>if</b> (<a class="local col6 ref" href="#406ret" title='ret' data-ref="406ret" data-ref-filename="406ret">ret</a> &lt; <var>0</var>)</td></tr>
<tr><th id="4670">4670</th><td>	{</td></tr>
<tr><th id="4671">4671</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot change mode of file %s"</q>,</td></tr>
<tr><th id="4672">4672</th><td>		   <a class="local col8 ref" href="#378workfile" title='workfile' data-ref="378workfile" data-ref-filename="378workfile">workfile</a>);</td></tr>
<tr><th id="4673">4673</th><td>	}</td></tr>
<tr><th id="4674">4674</th><td>    }</td></tr>
<tr><th id="4675">4675</th><td>    <b>else</b> <b>if</b> (<a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a> != <a class="macro" href="cvs.h.html#705" title="(char *)0" data-ref="_M/RUN_TTY">RUN_TTY</a>)</td></tr>
<tr><th id="4676">4676</th><td>    {</td></tr>
<tr><th id="4677">4677</th><td>	<b>if</b> (</td></tr>
<tr><th id="4678">4678</th><td><u>#<span data-ppcond="4678">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="4679">4679</th><td>	    !special_file &amp;&amp;</td></tr>
<tr><th id="4680">4680</th><td><u>#<span data-ppcond="4678">endif</span></u></td></tr>
<tr><th id="4681">4681</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fclose" title='fclose' data-ref="fclose" data-ref-filename="fclose">fclose</a> (<a class="local col8 ref" href="#388ofp" title='ofp' data-ref="388ofp" data-ref-filename="388ofp">ofp</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="4682">4682</th><td>	{</td></tr>
<tr><th id="4683">4683</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot close %s"</q>, <a class="local col2 ref" href="#382sout" title='sout' data-ref="382sout" data-ref-filename="382sout">sout</a>);</td></tr>
<tr><th id="4684">4684</th><td>	    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="4685">4685</th><td>	}</td></tr>
<tr><th id="4686">4686</th><td>    }</td></tr>
<tr><th id="4687">4687</th><td></td></tr>
<tr><th id="4688">4688</th><td><u>#<span data-ppcond="4688">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="4689">4689</th><td>    <i>/* If we are in the business of preserving hardlinks, then</i></td></tr>
<tr><th id="4690">4690</th><td><i>       mark this file as having been checked out. */</i></td></tr>
<tr><th id="4691">4691</th><td>    <b>if</b> (preserve_perms &amp;&amp; workfile != NULL)</td></tr>
<tr><th id="4692">4692</th><td>	update_hardlink_info (workfile);</td></tr>
<tr><th id="4693">4693</th><td><u>#<span data-ppcond="4688">endif</span></u></td></tr>
<tr><th id="4694">4694</th><td></td></tr>
<tr><th id="4695">4695</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="4696">4696</th><td>}</td></tr>
<tr><th id="4697">4697</th><td></td></tr>
<tr><th id="4698">4698</th><td></td></tr>
<tr><th id="4699">4699</th><td></td></tr>
<tr><th id="4700">4700</th><td><i  data-doc="RCS_findlock_or_tip">/* Find the delta currently locked by the user.  From the `ci' man page:</i></td></tr>
<tr><th id="4701">4701</th><td><i  data-doc="RCS_findlock_or_tip"></i></td></tr>
<tr><th id="4702">4702</th><td><i  data-doc="RCS_findlock_or_tip">	"If rev is omitted, ci tries to  derive  the  new  revision</i></td></tr>
<tr><th id="4703">4703</th><td><i  data-doc="RCS_findlock_or_tip">	 number  from  the  caller's  last lock.  If the caller has</i></td></tr>
<tr><th id="4704">4704</th><td><i  data-doc="RCS_findlock_or_tip">	 locked the tip revision of a branch, the new  revision  is</i></td></tr>
<tr><th id="4705">4705</th><td><i  data-doc="RCS_findlock_or_tip">	 appended  to  that  branch.   The  new  revision number is</i></td></tr>
<tr><th id="4706">4706</th><td><i  data-doc="RCS_findlock_or_tip">	 obtained by incrementing the tip revision number.  If  the</i></td></tr>
<tr><th id="4707">4707</th><td><i  data-doc="RCS_findlock_or_tip">	 caller  locked a non-tip revision, a new branch is started</i></td></tr>
<tr><th id="4708">4708</th><td><i  data-doc="RCS_findlock_or_tip">	 at that revision by incrementing the highest branch number</i></td></tr>
<tr><th id="4709">4709</th><td><i  data-doc="RCS_findlock_or_tip">	 at  that  revision.   The default initial branch and level</i></td></tr>
<tr><th id="4710">4710</th><td><i  data-doc="RCS_findlock_or_tip">	 numbers are 1.</i></td></tr>
<tr><th id="4711">4711</th><td><i  data-doc="RCS_findlock_or_tip"></i></td></tr>
<tr><th id="4712">4712</th><td><i  data-doc="RCS_findlock_or_tip">	 If rev is omitted and the caller has no lock, but owns the</i></td></tr>
<tr><th id="4713">4713</th><td><i  data-doc="RCS_findlock_or_tip">	 file  and  locking is not set to strict, then the revision</i></td></tr>
<tr><th id="4714">4714</th><td><i  data-doc="RCS_findlock_or_tip">	 is appended to the default branch (normally the trunk; see</i></td></tr>
<tr><th id="4715">4715</th><td><i  data-doc="RCS_findlock_or_tip">	 the -b option of rcs(1))."</i></td></tr>
<tr><th id="4716">4716</th><td><i  data-doc="RCS_findlock_or_tip"></i></td></tr>
<tr><th id="4717">4717</th><td><i  data-doc="RCS_findlock_or_tip">   RCS_findlock_or_tip finds the unique revision locked by the caller</i></td></tr>
<tr><th id="4718">4718</th><td><i  data-doc="RCS_findlock_or_tip">   and returns its delta node.  If the caller has not locked any</i></td></tr>
<tr><th id="4719">4719</th><td><i  data-doc="RCS_findlock_or_tip">   revisions (and is permitted to commit to an unlocked delta, as</i></td></tr>
<tr><th id="4720">4720</th><td><i  data-doc="RCS_findlock_or_tip">   described above), return the tip of the default branch. */</i></td></tr>
<tr><th id="4721">4721</th><td><em>static</em> <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *</td></tr>
<tr><th id="4722">4722</th><td><dfn class="tu decl def fn" id="RCS_findlock_or_tip" title='RCS_findlock_or_tip' data-type='RCSVers * RCS_findlock_or_tip(RCSNode * rcs)' data-ref="RCS_findlock_or_tip" data-ref-filename="RCS_findlock_or_tip">RCS_findlock_or_tip</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col7 decl" id="407rcs" title='rcs' data-type='RCSNode *' data-ref="407rcs" data-ref-filename="407rcs">rcs</dfn>)</td></tr>
<tr><th id="4723">4723</th><td>{</td></tr>
<tr><th id="4724">4724</th><td>    <em>char</em> *<dfn class="local col8 decl" id="408user" title='user' data-type='char *' data-ref="408user" data-ref-filename="408user">user</dfn> = <a class="ref fn" href="subr.h.html#getcaller" title='getcaller' data-ref="getcaller" data-ref-filename="getcaller">getcaller</a>();</td></tr>
<tr><th id="4725">4725</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col9 decl" id="409lock" title='lock' data-type='Node *' data-ref="409lock" data-ref-filename="409lock">lock</dfn>, *<dfn class="local col0 decl" id="410p" title='p' data-type='Node *' data-ref="410p" data-ref-filename="410p">p</dfn>;</td></tr>
<tr><th id="4726">4726</th><td>    <a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> *<dfn class="local col1 decl" id="411locklist" title='locklist' data-type='List *' data-ref="411locklist" data-ref-filename="411locklist">locklist</dfn>;</td></tr>
<tr><th id="4727">4727</th><td></td></tr>
<tr><th id="4728">4728</th><td>    <i>/* Find unique delta locked by caller. This code is very similar</i></td></tr>
<tr><th id="4729">4729</th><td><i>       to the code in RCS_unlock -- perhaps it could be abstracted</i></td></tr>
<tr><th id="4730">4730</th><td><i>       into a RCS_findlock function. */</i></td></tr>
<tr><th id="4731">4731</th><td>    <a class="local col1 ref" href="#411locklist" title='locklist' data-ref="411locklist" data-ref-filename="411locklist">locklist</a> = <a class="ref fn" href="#RCS_getlocks" title='RCS_getlocks' data-ref="RCS_getlocks" data-ref-filename="RCS_getlocks">RCS_getlocks</a> (<a class="local col7 ref" href="#407rcs" title='rcs' data-ref="407rcs" data-ref-filename="407rcs">rcs</a>);</td></tr>
<tr><th id="4732">4732</th><td>    <a class="local col9 ref" href="#409lock" title='lock' data-ref="409lock" data-ref-filename="409lock">lock</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4733">4733</th><td>    <b>for</b> (<a class="local col0 ref" href="#410p" title='p' data-ref="410p" data-ref-filename="410p">p</a> = <a class="local col1 ref" href="#411locklist" title='locklist' data-ref="411locklist" data-ref-filename="411locklist">locklist</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>; <a class="local col0 ref" href="#410p" title='p' data-ref="410p" data-ref-filename="410p">p</a> != <a class="local col1 ref" href="#411locklist" title='locklist' data-ref="411locklist" data-ref-filename="411locklist">locklist</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>; <a class="local col0 ref" href="#410p" title='p' data-ref="410p" data-ref-filename="410p">p</a> = <a class="local col0 ref" href="#410p" title='p' data-ref="410p" data-ref-filename="410p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>)</td></tr>
<tr><th id="4734">4734</th><td>    {</td></tr>
<tr><th id="4735">4735</th><td>	<b>if</b> (<a class="macro" href="#138" title="(*(char *)(p-&gt;data) == *(char *)(user) &amp;&amp; strcmp ((p-&gt;data), (user)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col0 ref" href="#410p" title='p' data-ref="410p" data-ref-filename="410p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>, <a class="local col8 ref" href="#408user" title='user' data-ref="408user" data-ref-filename="408user">user</a>))</td></tr>
<tr><th id="4736">4736</th><td>	{</td></tr>
<tr><th id="4737">4737</th><td>	    <b>if</b> (<a class="local col9 ref" href="#409lock" title='lock' data-ref="409lock" data-ref-filename="409lock">lock</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4738">4738</th><td>	    {</td></tr>
<tr><th id="4739">4739</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"\</q></td></tr>
<tr><th id="4740">4740</th><td><q>%s: multiple revisions locked by %s; please specify one"</q>, <a class="local col7 ref" href="#407rcs" title='rcs' data-ref="407rcs" data-ref-filename="407rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col8 ref" href="#408user" title='user' data-ref="408user" data-ref-filename="408user">user</a>);</td></tr>
<tr><th id="4741">4741</th><td>		<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4742">4742</th><td>	    }</td></tr>
<tr><th id="4743">4743</th><td>	    <a class="local col9 ref" href="#409lock" title='lock' data-ref="409lock" data-ref-filename="409lock">lock</a> = <a class="local col0 ref" href="#410p" title='p' data-ref="410p" data-ref-filename="410p">p</a>;</td></tr>
<tr><th id="4744">4744</th><td>	}</td></tr>
<tr><th id="4745">4745</th><td>    }</td></tr>
<tr><th id="4746">4746</th><td></td></tr>
<tr><th id="4747">4747</th><td>    <b>if</b> (<a class="local col9 ref" href="#409lock" title='lock' data-ref="409lock" data-ref-filename="409lock">lock</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4748">4748</th><td>    {</td></tr>
<tr><th id="4749">4749</th><td>	<i>/* Found an old lock, but check that the revision still exists. */</i></td></tr>
<tr><th id="4750">4750</th><td>	<a class="local col0 ref" href="#410p" title='p' data-ref="410p" data-ref-filename="410p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col7 ref" href="#407rcs" title='rcs' data-ref="407rcs" data-ref-filename="407rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col9 ref" href="#409lock" title='lock' data-ref="409lock" data-ref-filename="409lock">lock</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>);</td></tr>
<tr><th id="4751">4751</th><td>	<b>if</b> (<a class="local col0 ref" href="#410p" title='p' data-ref="410p" data-ref-filename="410p">p</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4752">4752</th><td>	{</td></tr>
<tr><th id="4753">4753</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: can't unlock nonexistent revision %s"</q>,</td></tr>
<tr><th id="4754">4754</th><td>		   <a class="local col7 ref" href="#407rcs" title='rcs' data-ref="407rcs" data-ref-filename="407rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>,</td></tr>
<tr><th id="4755">4755</th><td>		   <a class="local col9 ref" href="#409lock" title='lock' data-ref="409lock" data-ref-filename="409lock">lock</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>);</td></tr>
<tr><th id="4756">4756</th><td>	    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4757">4757</th><td>	}</td></tr>
<tr><th id="4758">4758</th><td>	<b>return</b> <a class="local col0 ref" href="#410p" title='p' data-ref="410p" data-ref-filename="410p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="4759">4759</th><td>    }</td></tr>
<tr><th id="4760">4760</th><td></td></tr>
<tr><th id="4761">4761</th><td>    <i>/* No existing lock.  The RCS rule is that this is an error unless</i></td></tr>
<tr><th id="4762">4762</th><td><i>       locking is nonstrict AND the file is owned by the current</i></td></tr>
<tr><th id="4763">4763</th><td><i>       user.  Trying to determine the latter is a portability nightmare</i></td></tr>
<tr><th id="4764">4764</th><td><i>       in the face of NT, VMS, AFS, and other systems with non-unix-like</i></td></tr>
<tr><th id="4765">4765</th><td><i>       ideas of users and owners.  In the case of CVS, we should never get</i></td></tr>
<tr><th id="4766">4766</th><td><i>       here (as long as the traditional behavior of making sure to call</i></td></tr>
<tr><th id="4767">4767</th><td><i>       RCS_lock persists).  Anyway, we skip the RCS error checks</i></td></tr>
<tr><th id="4768">4768</th><td><i>       and just return the default branch or head.  The reasoning is that</i></td></tr>
<tr><th id="4769">4769</th><td><i>       those error checks are to make users lock before a checkin, and we do</i></td></tr>
<tr><th id="4770">4770</th><td><i>       that in other ways if at all anyway (e.g. rcslock.pl).  */</i></td></tr>
<tr><th id="4771">4771</th><td></td></tr>
<tr><th id="4772">4772</th><td>    <a class="local col0 ref" href="#410p" title='p' data-ref="410p" data-ref-filename="410p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col7 ref" href="#407rcs" title='rcs' data-ref="407rcs" data-ref-filename="407rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="ref fn" href="#RCS_getbranch" title='RCS_getbranch' data-ref="RCS_getbranch" data-ref-filename="RCS_getbranch">RCS_getbranch</a> (<a class="local col7 ref" href="#407rcs" title='rcs' data-ref="407rcs" data-ref-filename="407rcs">rcs</a>, <a class="local col7 ref" href="#407rcs" title='rcs' data-ref="407rcs" data-ref-filename="407rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a>, <var>0</var>));</td></tr>
<tr><th id="4773">4773</th><td>    <b>if</b> (!<a class="local col0 ref" href="#410p" title='p' data-ref="410p" data-ref-filename="410p">p</a>)</td></tr>
<tr><th id="4774">4774</th><td>    {</td></tr>
<tr><th id="4775">4775</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"RCS file `%s' does not contain its default revision."</q>,</td></tr>
<tr><th id="4776">4776</th><td>	       <a class="local col7 ref" href="#407rcs" title='rcs' data-ref="407rcs" data-ref-filename="407rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="4777">4777</th><td>	<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4778">4778</th><td>    }</td></tr>
<tr><th id="4779">4779</th><td></td></tr>
<tr><th id="4780">4780</th><td>    <b>return</b> <a class="local col0 ref" href="#410p" title='p' data-ref="410p" data-ref-filename="410p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="4781">4781</th><td>}</td></tr>
<tr><th id="4782">4782</th><td></td></tr>
<tr><th id="4783">4783</th><td></td></tr>
<tr><th id="4784">4784</th><td></td></tr>
<tr><th id="4785">4785</th><td><i  data-doc="truncate_revnum">/* Revision number string, R, must contain a `.'.</i></td></tr>
<tr><th id="4786">4786</th><td><i  data-doc="truncate_revnum">   Return a newly-malloc'd copy of the prefix of R up</i></td></tr>
<tr><th id="4787">4787</th><td><i  data-doc="truncate_revnum">   to but not including the final `.'.  */</i></td></tr>
<tr><th id="4788">4788</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="4789">4789</th><td><dfn class="tu decl def fn" id="truncate_revnum" title='truncate_revnum' data-type='char * truncate_revnum(const char * r)' data-ref="truncate_revnum" data-ref-filename="truncate_revnum">truncate_revnum</dfn> (<em>const</em> <em>char</em> *<dfn class="local col2 decl" id="412r" title='r' data-type='const char *' data-ref="412r" data-ref-filename="412r">r</dfn>)</td></tr>
<tr><th id="4790">4790</th><td>{</td></tr>
<tr><th id="4791">4791</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col3 decl" id="413len" title='len' data-type='size_t' data-ref="413len" data-ref-filename="413len">len</dfn>;</td></tr>
<tr><th id="4792">4792</th><td>    <em>char</em> *<dfn class="local col4 decl" id="414new_r" title='new_r' data-type='char *' data-ref="414new_r" data-ref-filename="414new_r">new_r</dfn>;</td></tr>
<tr><th id="4793">4793</th><td>    <em>char</em> *<dfn class="local col5 decl" id="415dot" title='dot' data-type='char *' data-ref="415dot" data-ref-filename="415dot">dot</dfn> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col2 ref" href="#412r" title='r' data-ref="412r" data-ref-filename="412r">r</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="4794">4794</th><td></td></tr>
<tr><th id="4795">4795</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((dot) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 4795, __func__, &quot;dot&quot;))" data-ref="_M/assert">assert</a> (<a class="local col5 ref" href="#415dot" title='dot' data-ref="415dot" data-ref-filename="415dot">dot</a>);</td></tr>
<tr><th id="4796">4796</th><td>    <a class="local col3 ref" href="#413len" title='len' data-ref="413len" data-ref-filename="413len">len</a> = <a class="local col5 ref" href="#415dot" title='dot' data-ref="415dot" data-ref-filename="415dot">dot</a> - <a class="local col2 ref" href="#412r" title='r' data-ref="412r" data-ref-filename="412r">r</a>;</td></tr>
<tr><th id="4797">4797</th><td>    <a class="local col4 ref" href="#414new_r" title='new_r' data-ref="414new_r" data-ref-filename="414new_r">new_r</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="local col3 ref" href="#413len" title='len' data-ref="413len" data-ref-filename="413len">len</a> + <var>1</var>);</td></tr>
<tr><th id="4798">4798</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col4 ref" href="#414new_r" title='new_r' data-ref="414new_r" data-ref-filename="414new_r">new_r</a>, <a class="local col2 ref" href="#412r" title='r' data-ref="412r" data-ref-filename="412r">r</a>, <a class="local col3 ref" href="#413len" title='len' data-ref="413len" data-ref-filename="413len">len</a>);</td></tr>
<tr><th id="4799">4799</th><td>    *(<a class="local col4 ref" href="#414new_r" title='new_r' data-ref="414new_r" data-ref-filename="414new_r">new_r</a> + <a class="local col3 ref" href="#413len" title='len' data-ref="413len" data-ref-filename="413len">len</a>) = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="4800">4800</th><td>    <b>return</b> <a class="local col4 ref" href="#414new_r" title='new_r' data-ref="414new_r" data-ref-filename="414new_r">new_r</a>;</td></tr>
<tr><th id="4801">4801</th><td>}</td></tr>
<tr><th id="4802">4802</th><td></td></tr>
<tr><th id="4803">4803</th><td></td></tr>
<tr><th id="4804">4804</th><td></td></tr>
<tr><th id="4805">4805</th><td><i  data-doc="truncate_revnum_in_place">/* Revision number string, R, must contain a `.'.</i></td></tr>
<tr><th id="4806">4806</th><td><i  data-doc="truncate_revnum_in_place">   R must be writable.  Replace the rightmost `.' in R with</i></td></tr>
<tr><th id="4807">4807</th><td><i  data-doc="truncate_revnum_in_place">   the NUL byte and return a pointer to that NUL byte.  */</i></td></tr>
<tr><th id="4808">4808</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="4809">4809</th><td><dfn class="tu decl def fn" id="truncate_revnum_in_place" title='truncate_revnum_in_place' data-type='char * truncate_revnum_in_place(char * r)' data-ref="truncate_revnum_in_place" data-ref-filename="truncate_revnum_in_place">truncate_revnum_in_place</dfn> (<em>char</em> *<dfn class="local col6 decl" id="416r" title='r' data-type='char *' data-ref="416r" data-ref-filename="416r">r</dfn>)</td></tr>
<tr><th id="4810">4810</th><td>{</td></tr>
<tr><th id="4811">4811</th><td>    <em>char</em> *<dfn class="local col7 decl" id="417dot" title='dot' data-type='char *' data-ref="417dot" data-ref-filename="417dot">dot</dfn> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col6 ref" href="#416r" title='r' data-ref="416r" data-ref-filename="416r">r</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="4812">4812</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((dot) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 4812, __func__, &quot;dot&quot;))" data-ref="_M/assert">assert</a> (<a class="local col7 ref" href="#417dot" title='dot' data-ref="417dot" data-ref-filename="417dot">dot</a>);</td></tr>
<tr><th id="4813">4813</th><td>    *<a class="local col7 ref" href="#417dot" title='dot' data-ref="417dot" data-ref-filename="417dot">dot</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="4814">4814</th><td>    <b>return</b> <a class="local col7 ref" href="#417dot" title='dot' data-ref="417dot" data-ref-filename="417dot">dot</a>;</td></tr>
<tr><th id="4815">4815</th><td>}</td></tr>
<tr><th id="4816">4816</th><td></td></tr>
<tr><th id="4817">4817</th><td></td></tr>
<tr><th id="4818">4818</th><td></td></tr>
<tr><th id="4819">4819</th><td><i  data-doc="compare_truncated_revnums">/* Revision number strings, R and S, must each contain a `.'.</i></td></tr>
<tr><th id="4820">4820</th><td><i  data-doc="compare_truncated_revnums">   R and S must be writable and must have the same number of dots.</i></td></tr>
<tr><th id="4821">4821</th><td><i  data-doc="compare_truncated_revnums">   Truncate R and S for the comparison, then restored them to their</i></td></tr>
<tr><th id="4822">4822</th><td><i  data-doc="compare_truncated_revnums">   original state.</i></td></tr>
<tr><th id="4823">4823</th><td><i  data-doc="compare_truncated_revnums">   Return the result (see compare_revnums) of comparing R and S</i></td></tr>
<tr><th id="4824">4824</th><td><i  data-doc="compare_truncated_revnums">   ignoring differences in any component after the rightmost `.'.  */</i></td></tr>
<tr><th id="4825">4825</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="4826">4826</th><td><dfn class="tu decl def fn" id="compare_truncated_revnums" title='compare_truncated_revnums' data-type='int compare_truncated_revnums(char * r, char * s)' data-ref="compare_truncated_revnums" data-ref-filename="compare_truncated_revnums">compare_truncated_revnums</dfn> (<em>char</em> *<dfn class="local col8 decl" id="418r" title='r' data-type='char *' data-ref="418r" data-ref-filename="418r">r</dfn>, <em>char</em> *<dfn class="local col9 decl" id="419s" title='s' data-type='char *' data-ref="419s" data-ref-filename="419s">s</dfn>)</td></tr>
<tr><th id="4827">4827</th><td>{</td></tr>
<tr><th id="4828">4828</th><td>    <em>char</em> *<dfn class="local col0 decl" id="420r_dot" title='r_dot' data-type='char *' data-ref="420r_dot" data-ref-filename="420r_dot">r_dot</dfn> = <a class="tu ref fn" href="#truncate_revnum_in_place" title='truncate_revnum_in_place' data-use='c' data-ref="truncate_revnum_in_place" data-ref-filename="truncate_revnum_in_place">truncate_revnum_in_place</a> (<a class="local col8 ref" href="#418r" title='r' data-ref="418r" data-ref-filename="418r">r</a>);</td></tr>
<tr><th id="4829">4829</th><td>    <em>char</em> *<dfn class="local col1 decl" id="421s_dot" title='s_dot' data-type='char *' data-ref="421s_dot" data-ref-filename="421s_dot">s_dot</dfn> = <a class="tu ref fn" href="#truncate_revnum_in_place" title='truncate_revnum_in_place' data-use='c' data-ref="truncate_revnum_in_place" data-ref-filename="truncate_revnum_in_place">truncate_revnum_in_place</a> (<a class="local col9 ref" href="#419s" title='s' data-ref="419s" data-ref-filename="419s">s</a>);</td></tr>
<tr><th id="4830">4830</th><td>    <em>int</em> <dfn class="local col2 decl" id="422cmp" title='cmp' data-type='int' data-ref="422cmp" data-ref-filename="422cmp">cmp</dfn>;</td></tr>
<tr><th id="4831">4831</th><td></td></tr>
<tr><th id="4832">4832</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((numdots (r) == numdots (s)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 4832, __func__, &quot;numdots (r) == numdots (s)&quot;))" data-ref="_M/assert">assert</a> (<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col8 ref" href="#418r" title='r' data-ref="418r" data-ref-filename="418r">r</a>) == <a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col9 ref" href="#419s" title='s' data-ref="419s" data-ref-filename="419s">s</a>));</td></tr>
<tr><th id="4833">4833</th><td></td></tr>
<tr><th id="4834">4834</th><td>    <a class="local col2 ref" href="#422cmp" title='cmp' data-ref="422cmp" data-ref-filename="422cmp">cmp</a> = <a class="ref fn" href="subr.h.html#compare_revnums" title='compare_revnums' data-ref="compare_revnums" data-ref-filename="compare_revnums">compare_revnums</a> (<a class="local col8 ref" href="#418r" title='r' data-ref="418r" data-ref-filename="418r">r</a>, <a class="local col9 ref" href="#419s" title='s' data-ref="419s" data-ref-filename="419s">s</a>);</td></tr>
<tr><th id="4835">4835</th><td></td></tr>
<tr><th id="4836">4836</th><td>    *<a class="local col0 ref" href="#420r_dot" title='r_dot' data-ref="420r_dot" data-ref-filename="420r_dot">r_dot</a> = <kbd>'.'</kbd>;</td></tr>
<tr><th id="4837">4837</th><td>    *<a class="local col1 ref" href="#421s_dot" title='s_dot' data-ref="421s_dot" data-ref-filename="421s_dot">s_dot</a> = <kbd>'.'</kbd>;</td></tr>
<tr><th id="4838">4838</th><td></td></tr>
<tr><th id="4839">4839</th><td>    <b>return</b> <a class="local col2 ref" href="#422cmp" title='cmp' data-ref="422cmp" data-ref-filename="422cmp">cmp</a>;</td></tr>
<tr><th id="4840">4840</th><td>}</td></tr>
<tr><th id="4841">4841</th><td></td></tr>
<tr><th id="4842">4842</th><td></td></tr>
<tr><th id="4843">4843</th><td></td></tr>
<tr><th id="4844">4844</th><td><i  data-doc="max_rev">/* Return a malloc'd copy of the string representing the highest branch</i></td></tr>
<tr><th id="4845">4845</th><td><i  data-doc="max_rev">   number on BRANCHNODE.  If there are no branches on BRANCHNODE, return NULL.</i></td></tr>
<tr><th id="4846">4846</th><td><i  data-doc="max_rev">   FIXME: isn't the max rev always the last one?</i></td></tr>
<tr><th id="4847">4847</th><td><i  data-doc="max_rev">   If so, we don't even need a loop.  */</i></td></tr>
<tr><th id="4848">4848</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="4849">4849</th><td><dfn class="tu decl def fn" id="max_rev" title='max_rev' data-type='char * max_rev(const RCSVers * branchnode)' data-ref="max_rev" data-ref-filename="max_rev">max_rev</dfn> (<em>const</em> <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col3 decl" id="423branchnode" title='branchnode' data-type='const RCSVers *' data-ref="423branchnode" data-ref-filename="423branchnode">branchnode</dfn>)</td></tr>
<tr><th id="4850">4850</th><td>{</td></tr>
<tr><th id="4851">4851</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col4 decl" id="424head" title='head' data-type='Node *' data-ref="424head" data-ref-filename="424head">head</dfn>;</td></tr>
<tr><th id="4852">4852</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col5 decl" id="425bp" title='bp' data-type='Node *' data-ref="425bp" data-ref-filename="425bp">bp</dfn>;</td></tr>
<tr><th id="4853">4853</th><td>    <em>char</em> *<dfn class="local col6 decl" id="426max" title='max' data-type='char *' data-ref="426max" data-ref-filename="426max">max</dfn>;</td></tr>
<tr><th id="4854">4854</th><td></td></tr>
<tr><th id="4855">4855</th><td>    <b>if</b> (<a class="local col3 ref" href="#423branchnode" title='branchnode' data-ref="423branchnode" data-ref-filename="423branchnode">branchnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4856">4856</th><td>    {</td></tr>
<tr><th id="4857">4857</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4858">4858</th><td>    }</td></tr>
<tr><th id="4859">4859</th><td></td></tr>
<tr><th id="4860">4860</th><td>    <a class="local col6 ref" href="#426max" title='max' data-ref="426max" data-ref-filename="426max">max</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4861">4861</th><td>    <a class="local col4 ref" href="#424head" title='head' data-ref="424head" data-ref-filename="424head">head</a> = <a class="local col3 ref" href="#423branchnode" title='branchnode' data-ref="423branchnode" data-ref-filename="423branchnode">branchnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>;</td></tr>
<tr><th id="4862">4862</th><td>    <b>for</b> (<a class="local col5 ref" href="#425bp" title='bp' data-ref="425bp" data-ref-filename="425bp">bp</a> = <a class="local col4 ref" href="#424head" title='head' data-ref="424head" data-ref-filename="424head">head</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>; <a class="local col5 ref" href="#425bp" title='bp' data-ref="425bp" data-ref-filename="425bp">bp</a> != <a class="local col4 ref" href="#424head" title='head' data-ref="424head" data-ref-filename="424head">head</a>; <a class="local col5 ref" href="#425bp" title='bp' data-ref="425bp" data-ref-filename="425bp">bp</a> = <a class="local col5 ref" href="#425bp" title='bp' data-ref="425bp" data-ref-filename="425bp">bp</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>)</td></tr>
<tr><th id="4863">4863</th><td>    {</td></tr>
<tr><th id="4864">4864</th><td>	<b>if</b> (<a class="local col6 ref" href="#426max" title='max' data-ref="426max" data-ref-filename="426max">max</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || <a class="tu ref fn" href="#compare_truncated_revnums" title='compare_truncated_revnums' data-use='c' data-ref="compare_truncated_revnums" data-ref-filename="compare_truncated_revnums">compare_truncated_revnums</a> (<a class="local col6 ref" href="#426max" title='max' data-ref="426max" data-ref-filename="426max">max</a>, <a class="local col5 ref" href="#425bp" title='bp' data-ref="425bp" data-ref-filename="425bp">bp</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="4865">4865</th><td>	{</td></tr>
<tr><th id="4866">4866</th><td>	    <a class="local col6 ref" href="#426max" title='max' data-ref="426max" data-ref-filename="426max">max</a> = <a class="local col5 ref" href="#425bp" title='bp' data-ref="425bp" data-ref-filename="425bp">bp</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>;</td></tr>
<tr><th id="4867">4867</th><td>	}</td></tr>
<tr><th id="4868">4868</th><td>    }</td></tr>
<tr><th id="4869">4869</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((max) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 4869, __func__, &quot;max&quot;))" data-ref="_M/assert">assert</a> (<a class="local col6 ref" href="#426max" title='max' data-ref="426max" data-ref-filename="426max">max</a>);</td></tr>
<tr><th id="4870">4870</th><td></td></tr>
<tr><th id="4871">4871</th><td>    <b>return</b> <a class="tu ref fn" href="#truncate_revnum" title='truncate_revnum' data-use='c' data-ref="truncate_revnum" data-ref-filename="truncate_revnum">truncate_revnum</a> (<a class="local col6 ref" href="#426max" title='max' data-ref="426max" data-ref-filename="426max">max</a>);</td></tr>
<tr><th id="4872">4872</th><td>}</td></tr>
<tr><th id="4873">4873</th><td></td></tr>
<tr><th id="4874">4874</th><td></td></tr>
<tr><th id="4875">4875</th><td></td></tr>
<tr><th id="4876">4876</th><td><i  data-doc="RCS_addbranch">/* Create BRANCH in RCS's delta tree.  BRANCH may be either a branch</i></td></tr>
<tr><th id="4877">4877</th><td><i  data-doc="RCS_addbranch">   number or a revision number.  In the former case, create the branch</i></td></tr>
<tr><th id="4878">4878</th><td><i  data-doc="RCS_addbranch">   with the specified number; in the latter case, create a new branch</i></td></tr>
<tr><th id="4879">4879</th><td><i  data-doc="RCS_addbranch">   rooted at node BRANCH with a higher branch number than any others.</i></td></tr>
<tr><th id="4880">4880</th><td><i  data-doc="RCS_addbranch">   Return the number of the tip node on the new branch. */</i></td></tr>
<tr><th id="4881">4881</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="4882">4882</th><td><dfn class="tu decl def fn" id="RCS_addbranch" title='RCS_addbranch' data-type='char * RCS_addbranch(RCSNode * rcs, const char * branch)' data-ref="RCS_addbranch" data-ref-filename="RCS_addbranch">RCS_addbranch</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col7 decl" id="427rcs" title='rcs' data-type='RCSNode *' data-ref="427rcs" data-ref-filename="427rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="428branch" title='branch' data-type='const char *' data-ref="428branch" data-ref-filename="428branch">branch</dfn>)</td></tr>
<tr><th id="4883">4883</th><td>{</td></tr>
<tr><th id="4884">4884</th><td>    <em>char</em> *<dfn class="local col9 decl" id="429branchpoint" title='branchpoint' data-type='char *' data-ref="429branchpoint" data-ref-filename="429branchpoint">branchpoint</dfn>, *<dfn class="local col0 decl" id="430newrevnum" title='newrevnum' data-type='char *' data-ref="430newrevnum" data-ref-filename="430newrevnum">newrevnum</dfn>;</td></tr>
<tr><th id="4885">4885</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col1 decl" id="431nodep" title='nodep' data-type='Node *' data-ref="431nodep" data-ref-filename="431nodep">nodep</dfn>, *<dfn class="local col2 decl" id="432bp" title='bp' data-type='Node *' data-ref="432bp" data-ref-filename="432bp">bp</dfn>;</td></tr>
<tr><th id="4886">4886</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col3 decl" id="433marker" title='marker' data-type='Node *' data-ref="433marker" data-ref-filename="433marker">marker</dfn>;</td></tr>
<tr><th id="4887">4887</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col4 decl" id="434branchnode" title='branchnode' data-type='RCSVers *' data-ref="434branchnode" data-ref-filename="434branchnode">branchnode</dfn>;</td></tr>
<tr><th id="4888">4888</th><td></td></tr>
<tr><th id="4889">4889</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((branch) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 4889, __func__, &quot;branch&quot;))" data-ref="_M/assert">assert</a> (<a class="local col8 ref" href="#428branch" title='branch' data-ref="428branch" data-ref-filename="428branch">branch</a>);</td></tr>
<tr><th id="4890">4890</th><td></td></tr>
<tr><th id="4891">4891</th><td>    <i>/* Append to end by default.  */</i></td></tr>
<tr><th id="4892">4892</th><td>    <a class="local col3 ref" href="#433marker" title='marker' data-ref="433marker" data-ref-filename="433marker">marker</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4893">4893</th><td></td></tr>
<tr><th id="4894">4894</th><td>    <a class="local col9 ref" href="#429branchpoint" title='branchpoint' data-ref="429branchpoint" data-ref-filename="429branchpoint">branchpoint</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col8 ref" href="#428branch" title='branch' data-ref="428branch" data-ref-filename="428branch">branch</a>);</td></tr>
<tr><th id="4895">4895</th><td>    <b>if</b> ((<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col9 ref" href="#429branchpoint" title='branchpoint' data-ref="429branchpoint" data-ref-filename="429branchpoint">branchpoint</a>) &amp; <var>1</var>) == <var>0</var>)</td></tr>
<tr><th id="4896">4896</th><td>    {</td></tr>
<tr><th id="4897">4897</th><td>	<a class="tu ref fn" href="#truncate_revnum_in_place" title='truncate_revnum_in_place' data-use='c' data-ref="truncate_revnum_in_place" data-ref-filename="truncate_revnum_in_place">truncate_revnum_in_place</a> (<a class="local col9 ref" href="#429branchpoint" title='branchpoint' data-ref="429branchpoint" data-ref-filename="429branchpoint">branchpoint</a>);</td></tr>
<tr><th id="4898">4898</th><td>    }</td></tr>
<tr><th id="4899">4899</th><td></td></tr>
<tr><th id="4900">4900</th><td>    <i>/* Find the branch rooted at BRANCHPOINT. */</i></td></tr>
<tr><th id="4901">4901</th><td>    <a class="local col1 ref" href="#431nodep" title='nodep' data-ref="431nodep" data-ref-filename="431nodep">nodep</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col7 ref" href="#427rcs" title='rcs' data-ref="427rcs" data-ref-filename="427rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col9 ref" href="#429branchpoint" title='branchpoint' data-ref="429branchpoint" data-ref-filename="429branchpoint">branchpoint</a>);</td></tr>
<tr><th id="4902">4902</th><td>    <b>if</b> (<a class="local col1 ref" href="#431nodep" title='nodep' data-ref="431nodep" data-ref-filename="431nodep">nodep</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4903">4903</th><td>    {</td></tr>
<tr><th id="4904">4904</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: can't find branch point %s"</q>, <a class="local col7 ref" href="#427rcs" title='rcs' data-ref="427rcs" data-ref-filename="427rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col9 ref" href="#429branchpoint" title='branchpoint' data-ref="429branchpoint" data-ref-filename="429branchpoint">branchpoint</a>);</td></tr>
<tr><th id="4905">4905</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col9 ref" href="#429branchpoint" title='branchpoint' data-ref="429branchpoint" data-ref-filename="429branchpoint">branchpoint</a>);</td></tr>
<tr><th id="4906">4906</th><td>	<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="4907">4907</th><td>    }</td></tr>
<tr><th id="4908">4908</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col9 ref" href="#429branchpoint" title='branchpoint' data-ref="429branchpoint" data-ref-filename="429branchpoint">branchpoint</a>);</td></tr>
<tr><th id="4909">4909</th><td>    <a class="local col4 ref" href="#434branchnode" title='branchnode' data-ref="434branchnode" data-ref-filename="434branchnode">branchnode</a> = <a class="local col1 ref" href="#431nodep" title='nodep' data-ref="431nodep" data-ref-filename="431nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="4910">4910</th><td></td></tr>
<tr><th id="4911">4911</th><td>    <i>/* If BRANCH was a full branch number, make sure it is higher than MAX. */</i></td></tr>
<tr><th id="4912">4912</th><td>    <b>if</b> ((<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col8 ref" href="#428branch" title='branch' data-ref="428branch" data-ref-filename="428branch">branch</a>) &amp; <var>1</var>) == <var>1</var>)</td></tr>
<tr><th id="4913">4913</th><td>    {</td></tr>
<tr><th id="4914">4914</th><td>	<b>if</b> (<a class="local col4 ref" href="#434branchnode" title='branchnode' data-ref="434branchnode" data-ref-filename="434branchnode">branchnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4915">4915</th><td>	{</td></tr>
<tr><th id="4916">4916</th><td>	    <i>/* We have to create the first branch on this node, which means</i></td></tr>
<tr><th id="4917">4917</th><td><i>	       appending ".2" to the revision number. */</i></td></tr>
<tr><th id="4918">4918</th><td>	    <a class="local col0 ref" href="#430newrevnum" title='newrevnum' data-ref="430newrevnum" data-ref-filename="430newrevnum">newrevnum</a> = <a class="ref fn" href="subr.h.html#Xasprintf" title='Xasprintf' data-ref="Xasprintf" data-ref-filename="Xasprintf">Xasprintf</a> (<q>"%s.2"</q>, <a class="local col8 ref" href="#428branch" title='branch' data-ref="428branch" data-ref-filename="428branch">branch</a>);</td></tr>
<tr><th id="4919">4919</th><td>	}</td></tr>
<tr><th id="4920">4920</th><td>	<b>else</b></td></tr>
<tr><th id="4921">4921</th><td>	{</td></tr>
<tr><th id="4922">4922</th><td>	    <em>char</em> *<dfn class="local col5 decl" id="435max" title='max' data-type='char *' data-ref="435max" data-ref-filename="435max">max</dfn> = <a class="tu ref fn" href="#max_rev" title='max_rev' data-use='c' data-ref="max_rev" data-ref-filename="max_rev">max_rev</a> (<a class="local col4 ref" href="#434branchnode" title='branchnode' data-ref="434branchnode" data-ref-filename="434branchnode">branchnode</a>);</td></tr>
<tr><th id="4923">4923</th><td>	    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((max) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 4923, __func__, &quot;max&quot;))" data-ref="_M/assert">assert</a> (<a class="local col5 ref" href="#435max" title='max' data-ref="435max" data-ref-filename="435max">max</a>);</td></tr>
<tr><th id="4924">4924</th><td>	    <a class="local col0 ref" href="#430newrevnum" title='newrevnum' data-ref="430newrevnum" data-ref-filename="430newrevnum">newrevnum</a> = <a class="ref fn" href="subr.h.html#increment_revnum" title='increment_revnum' data-ref="increment_revnum" data-ref-filename="increment_revnum">increment_revnum</a> (<a class="local col5 ref" href="#435max" title='max' data-ref="435max" data-ref-filename="435max">max</a>);</td></tr>
<tr><th id="4925">4925</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col5 ref" href="#435max" title='max' data-ref="435max" data-ref-filename="435max">max</a>);</td></tr>
<tr><th id="4926">4926</th><td>	}</td></tr>
<tr><th id="4927">4927</th><td>    }</td></tr>
<tr><th id="4928">4928</th><td>    <b>else</b></td></tr>
<tr><th id="4929">4929</th><td>    {</td></tr>
<tr><th id="4930">4930</th><td>	<a class="local col0 ref" href="#430newrevnum" title='newrevnum' data-ref="430newrevnum" data-ref-filename="430newrevnum">newrevnum</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col8 ref" href="#428branch" title='branch' data-ref="428branch" data-ref-filename="428branch">branch</a>);</td></tr>
<tr><th id="4931">4931</th><td></td></tr>
<tr><th id="4932">4932</th><td>	<b>if</b> (<a class="local col4 ref" href="#434branchnode" title='branchnode' data-ref="434branchnode" data-ref-filename="434branchnode">branchnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4933">4933</th><td>	{</td></tr>
<tr><th id="4934">4934</th><td>	    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col6 decl" id="436head" title='head' data-type='Node *' data-ref="436head" data-ref-filename="436head">head</dfn>;</td></tr>
<tr><th id="4935">4935</th><td>	    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col7 decl" id="437bp" title='bp' data-type='Node *' data-ref="437bp" data-ref-filename="437bp">bp</dfn>;</td></tr>
<tr><th id="4936">4936</th><td></td></tr>
<tr><th id="4937">4937</th><td>	    <i>/* Find the position of this new branch in the sorted list</i></td></tr>
<tr><th id="4938">4938</th><td><i>	       of branches.  */</i></td></tr>
<tr><th id="4939">4939</th><td>	    <a class="local col6 ref" href="#436head" title='head' data-ref="436head" data-ref-filename="436head">head</a> = <a class="local col4 ref" href="#434branchnode" title='branchnode' data-ref="434branchnode" data-ref-filename="434branchnode">branchnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>;</td></tr>
<tr><th id="4940">4940</th><td>	    <b>for</b> (<a class="local col7 ref" href="#437bp" title='bp' data-ref="437bp" data-ref-filename="437bp">bp</a> = <a class="local col6 ref" href="#436head" title='head' data-ref="436head" data-ref-filename="436head">head</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>; <a class="local col7 ref" href="#437bp" title='bp' data-ref="437bp" data-ref-filename="437bp">bp</a> != <a class="local col6 ref" href="#436head" title='head' data-ref="436head" data-ref-filename="436head">head</a>; <a class="local col7 ref" href="#437bp" title='bp' data-ref="437bp" data-ref-filename="437bp">bp</a> = <a class="local col7 ref" href="#437bp" title='bp' data-ref="437bp" data-ref-filename="437bp">bp</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>)</td></tr>
<tr><th id="4941">4941</th><td>	    {</td></tr>
<tr><th id="4942">4942</th><td>		<em>char</em> *<dfn class="local col8 decl" id="438dot" title='dot' data-type='char *' data-ref="438dot" data-ref-filename="438dot">dot</dfn>;</td></tr>
<tr><th id="4943">4943</th><td>		<em>int</em> <dfn class="local col9 decl" id="439found_pos" title='found_pos' data-type='int' data-ref="439found_pos" data-ref-filename="439found_pos">found_pos</dfn>;</td></tr>
<tr><th id="4944">4944</th><td></td></tr>
<tr><th id="4945">4945</th><td>		<i>/* The existing list must be sorted on increasing revnum.  */</i></td></tr>
<tr><th id="4946">4946</th><td>		<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((bp-&gt;next == head || compare_truncated_revnums (bp-&gt;key, bp-&gt;next-&gt;key) &lt; 0) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 4948, __func__, &quot;bp-&gt;next == head || compare_truncated_revnums (bp-&gt;key, bp-&gt;next-&gt;key) &lt; 0&quot;))" data-ref="_M/assert">assert</a> (<a class="local col7 ref" href="#437bp" title='bp' data-ref="437bp" data-ref-filename="437bp">bp</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a> == <a class="local col6 ref" href="#436head" title='head' data-ref="436head" data-ref-filename="436head">head</a></td></tr>
<tr><th id="4947">4947</th><td>			|| <a class="tu ref fn" href="#compare_truncated_revnums" title='compare_truncated_revnums' data-use='c' data-ref="compare_truncated_revnums" data-ref-filename="compare_truncated_revnums">compare_truncated_revnums</a> (<a class="local col7 ref" href="#437bp" title='bp' data-ref="437bp" data-ref-filename="437bp">bp</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>,</td></tr>
<tr><th id="4948">4948</th><td>						      <a class="local col7 ref" href="#437bp" title='bp' data-ref="437bp" data-ref-filename="437bp">bp</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>) &lt; <var>0</var>);</td></tr>
<tr><th id="4949">4949</th><td>		<a class="local col8 ref" href="#438dot" title='dot' data-ref="438dot" data-ref-filename="438dot">dot</a> = <a class="tu ref fn" href="#truncate_revnum_in_place" title='truncate_revnum_in_place' data-use='c' data-ref="truncate_revnum_in_place" data-ref-filename="truncate_revnum_in_place">truncate_revnum_in_place</a> (<a class="local col7 ref" href="#437bp" title='bp' data-ref="437bp" data-ref-filename="437bp">bp</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>);</td></tr>
<tr><th id="4950">4950</th><td>		<a class="local col9 ref" href="#439found_pos" title='found_pos' data-ref="439found_pos" data-ref-filename="439found_pos">found_pos</a> = (<a class="ref fn" href="subr.h.html#compare_revnums" title='compare_revnums' data-ref="compare_revnums" data-ref-filename="compare_revnums">compare_revnums</a> (<a class="local col8 ref" href="#428branch" title='branch' data-ref="428branch" data-ref-filename="428branch">branch</a>, <a class="local col7 ref" href="#437bp" title='bp' data-ref="437bp" data-ref-filename="437bp">bp</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>) &lt; <var>0</var>);</td></tr>
<tr><th id="4951">4951</th><td>		*<a class="local col8 ref" href="#438dot" title='dot' data-ref="438dot" data-ref-filename="438dot">dot</a> = <kbd>'.'</kbd>;</td></tr>
<tr><th id="4952">4952</th><td></td></tr>
<tr><th id="4953">4953</th><td>		<b>if</b> (<a class="local col9 ref" href="#439found_pos" title='found_pos' data-ref="439found_pos" data-ref-filename="439found_pos">found_pos</a>)</td></tr>
<tr><th id="4954">4954</th><td>		{</td></tr>
<tr><th id="4955">4955</th><td>		    <b>break</b>;</td></tr>
<tr><th id="4956">4956</th><td>		}</td></tr>
<tr><th id="4957">4957</th><td>	    }</td></tr>
<tr><th id="4958">4958</th><td>	    <a class="local col3 ref" href="#433marker" title='marker' data-ref="433marker" data-ref-filename="433marker">marker</a> = <a class="local col7 ref" href="#437bp" title='bp' data-ref="437bp" data-ref-filename="437bp">bp</a>;</td></tr>
<tr><th id="4959">4959</th><td>	}</td></tr>
<tr><th id="4960">4960</th><td>    }</td></tr>
<tr><th id="4961">4961</th><td></td></tr>
<tr><th id="4962">4962</th><td>    <a class="local col0 ref" href="#430newrevnum" title='newrevnum' data-ref="430newrevnum" data-ref-filename="430newrevnum">newrevnum</a> = <a class="ref fn" href="../lib/xalloc.h.html#xrealloc" title='xrealloc' data-ref="xrealloc" data-ref-filename="xrealloc">xrealloc</a> (<a class="local col0 ref" href="#430newrevnum" title='newrevnum' data-ref="430newrevnum" data-ref-filename="430newrevnum">newrevnum</a>, <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col0 ref" href="#430newrevnum" title='newrevnum' data-ref="430newrevnum" data-ref-filename="430newrevnum">newrevnum</a>) + <var>3</var>);</td></tr>
<tr><th id="4963">4963</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcat" title='strcat' data-ref="strcat" data-ref-filename="strcat">strcat</a> (<a class="local col0 ref" href="#430newrevnum" title='newrevnum' data-ref="430newrevnum" data-ref-filename="430newrevnum">newrevnum</a>, <q>".1"</q>);</td></tr>
<tr><th id="4964">4964</th><td></td></tr>
<tr><th id="4965">4965</th><td>    <i>/* Add this new revision number to BRANCHPOINT's branches list. */</i></td></tr>
<tr><th id="4966">4966</th><td>    <b>if</b> (<a class="local col4 ref" href="#434branchnode" title='branchnode' data-ref="434branchnode" data-ref-filename="434branchnode">branchnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4967">4967</th><td>	<a class="local col4 ref" href="#434branchnode" title='branchnode' data-ref="434branchnode" data-ref-filename="434branchnode">branchnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a> = <a class="ref fn" href="hash.h.html#getlist" title='getlist' data-ref="getlist" data-ref-filename="getlist">getlist</a>();</td></tr>
<tr><th id="4968">4968</th><td>    <a class="local col2 ref" href="#432bp" title='bp' data-ref="432bp" data-ref-filename="432bp">bp</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a>();</td></tr>
<tr><th id="4969">4969</th><td>    <a class="local col2 ref" href="#432bp" title='bp' data-ref="432bp" data-ref-filename="432bp">bp</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col0 ref" href="#430newrevnum" title='newrevnum' data-ref="430newrevnum" data-ref-filename="430newrevnum">newrevnum</a>);</td></tr>
<tr><th id="4970">4970</th><td></td></tr>
<tr><th id="4971">4971</th><td>    <i>/* Append to the end of the list by default, that is, just before</i></td></tr>
<tr><th id="4972">4972</th><td><i>       the header node, `list'.  */</i></td></tr>
<tr><th id="4973">4973</th><td>    <b>if</b> (<a class="local col3 ref" href="#433marker" title='marker' data-ref="433marker" data-ref-filename="433marker">marker</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="4974">4974</th><td>	<a class="local col3 ref" href="#433marker" title='marker' data-ref="433marker" data-ref-filename="433marker">marker</a> = <a class="local col4 ref" href="#434branchnode" title='branchnode' data-ref="434branchnode" data-ref-filename="434branchnode">branchnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>;</td></tr>
<tr><th id="4975">4975</th><td></td></tr>
<tr><th id="4976">4976</th><td>    {</td></tr>
<tr><th id="4977">4977</th><td>	<em>int</em> <dfn class="local col0 decl" id="440fail" title='fail' data-type='int' data-ref="440fail" data-ref-filename="440fail">fail</dfn>;</td></tr>
<tr><th id="4978">4978</th><td>	<a class="local col0 ref" href="#440fail" title='fail' data-ref="440fail" data-ref-filename="440fail">fail</a> = <a class="ref fn" href="hash.h.html#insert_before" title='insert_before' data-ref="insert_before" data-ref-filename="insert_before">insert_before</a> (<a class="local col4 ref" href="#434branchnode" title='branchnode' data-ref="434branchnode" data-ref-filename="434branchnode">branchnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>, <a class="local col3 ref" href="#433marker" title='marker' data-ref="433marker" data-ref-filename="433marker">marker</a>, <a class="local col2 ref" href="#432bp" title='bp' data-ref="432bp" data-ref-filename="432bp">bp</a>);</td></tr>
<tr><th id="4979">4979</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((!fail) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 4979, __func__, &quot;!fail&quot;))" data-ref="_M/assert">assert</a> (!<a class="local col0 ref" href="#440fail" title='fail' data-ref="440fail" data-ref-filename="440fail">fail</a>);</td></tr>
<tr><th id="4980">4980</th><td>    }</td></tr>
<tr><th id="4981">4981</th><td></td></tr>
<tr><th id="4982">4982</th><td>    <b>return</b> <a class="local col0 ref" href="#430newrevnum" title='newrevnum' data-ref="430newrevnum" data-ref-filename="430newrevnum">newrevnum</a>;</td></tr>
<tr><th id="4983">4983</th><td>}</td></tr>
<tr><th id="4984">4984</th><td></td></tr>
<tr><th id="4985">4985</th><td></td></tr>
<tr><th id="4986">4986</th><td></td></tr>
<tr><th id="4987">4987</th><td><i>/* Check in to RCSFILE with revision REV (which must be greater than</i></td></tr>
<tr><th id="4988">4988</th><td><i>   the largest revision) and message MESSAGE (which is checked for</i></td></tr>
<tr><th id="4989">4989</th><td><i>   validity).  If FLAGS &amp; RCS_FLAGS_DEAD, check in a dead revision.</i></td></tr>
<tr><th id="4990">4990</th><td><i>   If FLAGS &amp; RCS_FLAGS_QUIET, tell ci to be quiet.  If FLAGS &amp;</i></td></tr>
<tr><th id="4991">4991</th><td><i>   RCS_FLAGS_MODTIME, use the working file's modification time for the</i></td></tr>
<tr><th id="4992">4992</th><td><i>   checkin time.  WORKFILE is the working file to check in from, or</i></td></tr>
<tr><th id="4993">4993</th><td><i>   NULL to use the usual RCS rules for deriving it from the RCSFILE.</i></td></tr>
<tr><th id="4994">4994</th><td><i>   If FLAGS &amp; RCS_FLAGS_KEEPFILE, don't unlink the working file;</i></td></tr>
<tr><th id="4995">4995</th><td><i>   unlinking the working file is standard RCS behavior, but is rarely</i></td></tr>
<tr><th id="4996">4996</th><td><i>   appropriate for CVS.</i></td></tr>
<tr><th id="4997">4997</th><td><i></i></td></tr>
<tr><th id="4998">4998</th><td><i>   UPDATE_DIR is used to print the path for the file.  This argument is</i></td></tr>
<tr><th id="4999">4999</th><td><i>   unnecessary when FLAGS &amp; RCS_FLAGS_QUIET since the path won't be printed</i></td></tr>
<tr><th id="5000">5000</th><td><i>   anyhow.</i></td></tr>
<tr><th id="5001">5001</th><td><i></i></td></tr>
<tr><th id="5002">5002</th><td><i>   This function should almost exactly mimic the behavior of `rcs ci'.  The</i></td></tr>
<tr><th id="5003">5003</th><td><i>   principal point of difference is the support here for preserving file</i></td></tr>
<tr><th id="5004">5004</th><td><i>   ownership and permissions in the delta nodes.  This is not a clean</i></td></tr>
<tr><th id="5005">5005</th><td><i>   solution -- precisely because it diverges from RCS's behavior -- but</i></td></tr>
<tr><th id="5006">5006</th><td><i>   it doesn't seem feasible to do this anywhere else in the code. [-twp]</i></td></tr>
<tr><th id="5007">5007</th><td><i>   </i></td></tr>
<tr><th id="5008">5008</th><td><i>   Return value is -1 for error (and errno is set to indicate the</i></td></tr>
<tr><th id="5009">5009</th><td><i>   error), positive for error (and an error message has been printed),</i></td></tr>
<tr><th id="5010">5010</th><td><i>   or zero for success.  */</i></td></tr>
<tr><th id="5011">5011</th><td><em>int</em></td></tr>
<tr><th id="5012">5012</th><td><dfn class="decl def fn" id="RCS_checkin" title='RCS_checkin' data-ref="RCS_checkin" data-ref-filename="RCS_checkin">RCS_checkin</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col1 decl" id="441rcs" title='rcs' data-type='RCSNode *' data-ref="441rcs" data-ref-filename="441rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col2 decl" id="442update_dir" title='update_dir' data-type='const char *' data-ref="442update_dir" data-ref-filename="442update_dir">update_dir</dfn>, <em>const</em> <em>char</em> *<dfn class="local col3 decl" id="443workfile_in" title='workfile_in' data-type='const char *' data-ref="443workfile_in" data-ref-filename="443workfile_in">workfile_in</dfn>,</td></tr>
<tr><th id="5013">5013</th><td>	     <em>const</em> <em>char</em> *<dfn class="local col4 decl" id="444message" title='message' data-type='const char *' data-ref="444message" data-ref-filename="444message">message</dfn>, <em>const</em> <em>char</em> *<dfn class="local col5 decl" id="445rev" title='rev' data-type='const char *' data-ref="445rev" data-ref-filename="445rev">rev</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#time_t" title='time_t' data-type='__int64_t' data-ref="time_t" data-ref-filename="time_t">time_t</a> <dfn class="local col6 decl" id="446citime" title='citime' data-type='time_t' data-ref="446citime" data-ref-filename="446citime">citime</dfn>, <em>int</em> <dfn class="local col7 decl" id="447flags" title='flags' data-type='int' data-ref="447flags" data-ref-filename="447flags">flags</dfn>)</td></tr>
<tr><th id="5014">5014</th><td>{</td></tr>
<tr><th id="5015">5015</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col8 decl" id="448delta" title='delta' data-type='RCSVers *' data-ref="448delta" data-ref-filename="448delta">delta</dfn>, *<dfn class="local col9 decl" id="449commitpt" title='commitpt' data-type='RCSVers *' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</dfn>;</td></tr>
<tr><th id="5016">5016</th><td>    <a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a> *<dfn class="local col0 decl" id="450dtext" title='dtext' data-type='Deltatext *' data-ref="450dtext" data-ref-filename="450dtext">dtext</dfn>;</td></tr>
<tr><th id="5017">5017</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col1 decl" id="451nodep" title='nodep' data-type='Node *' data-ref="451nodep" data-ref-filename="451nodep">nodep</dfn>;</td></tr>
<tr><th id="5018">5018</th><td>    <em>char</em> *<dfn class="local col2 decl" id="452tmpfile" title='tmpfile' data-type='char *' data-ref="452tmpfile" data-ref-filename="452tmpfile">tmpfile</dfn>, *<dfn class="local col3 decl" id="453changefile" title='changefile' data-type='char *' data-ref="453changefile" data-ref-filename="453changefile">changefile</dfn>;</td></tr>
<tr><th id="5019">5019</th><td>    <em>int</em> <dfn class="local col4 decl" id="454dargc" title='dargc' data-type='int' data-ref="454dargc" data-ref-filename="454dargc">dargc</dfn> = <var>0</var>;</td></tr>
<tr><th id="5020">5020</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col5 decl" id="455darg_allocated" title='darg_allocated' data-type='size_t' data-ref="455darg_allocated" data-ref-filename="455darg_allocated">darg_allocated</dfn> = <var>0</var>;</td></tr>
<tr><th id="5021">5021</th><td>    <em>char</em> **<dfn class="local col6 decl" id="456dargv" title='dargv' data-type='char **' data-ref="456dargv" data-ref-filename="456dargv">dargv</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="5022">5022</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col7 decl" id="457bufsize" title='bufsize' data-type='size_t' data-ref="457bufsize" data-ref-filename="457bufsize">bufsize</dfn>;</td></tr>
<tr><th id="5023">5023</th><td>    <em>int</em> <dfn class="local col8 decl" id="458status" title='status' data-type='int' data-ref="458status" data-ref-filename="458status">status</dfn>, <dfn class="local col9 decl" id="459checkin_quiet" title='checkin_quiet' data-type='int' data-ref="459checkin_quiet" data-ref-filename="459checkin_quiet">checkin_quiet</dfn>;</td></tr>
<tr><th id="5024">5024</th><td>    <b>struct</b> <a class="type" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm" title='tm' data-ref="tm" data-ref-filename="tm">tm</a> *<dfn class="local col0 decl" id="460ftm" title='ftm' data-type='struct tm *' data-ref="460ftm" data-ref-filename="460ftm">ftm</dfn>;</td></tr>
<tr><th id="5025">5025</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#time_t" title='time_t' data-type='__int64_t' data-ref="time_t" data-ref-filename="time_t">time_t</a> <dfn class="local col1 decl" id="461modtime" title='modtime' data-type='time_t' data-ref="461modtime" data-ref-filename="461modtime">modtime</dfn>;</td></tr>
<tr><th id="5026">5026</th><td>    <em>int</em> <dfn class="local col2 decl" id="462adding_branch" title='adding_branch' data-type='int' data-ref="462adding_branch" data-ref-filename="462adding_branch">adding_branch</dfn> = <var>0</var>;</td></tr>
<tr><th id="5027">5027</th><td>    <em>char</em> *<dfn class="local col3 decl" id="463workfile" title='workfile' data-type='char *' data-ref="463workfile" data-ref-filename="463workfile">workfile</dfn> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col3 ref" href="#443workfile_in" title='workfile_in' data-ref="443workfile_in" data-ref-filename="443workfile_in">workfile_in</a>);</td></tr>
<tr><th id="5028">5028</th><td><u>#<span data-ppcond="5028">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="5029">5029</th><td>    <b>struct</b> stat sb;</td></tr>
<tr><th id="5030">5030</th><td><u>#<span data-ppcond="5028">endif</span></u></td></tr>
<tr><th id="5031">5031</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col4 decl" id="464np" title='np' data-type='Node *' data-ref="464np" data-ref-filename="464np">np</dfn>;</td></tr>
<tr><th id="5032">5032</th><td></td></tr>
<tr><th id="5033">5033</th><td>    <a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="5034">5034</th><td></td></tr>
<tr><th id="5035">5035</th><td>    <b>if</b> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="5036">5036</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="5037">5037</th><td></td></tr>
<tr><th id="5038">5038</th><td>    <i>/* Get basename of working file.  Is there a library function to</i></td></tr>
<tr><th id="5039">5039</th><td><i>       do this?  I couldn't find one. -twp */</i></td></tr>
<tr><th id="5040">5040</th><td>    <b>if</b> (<a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5041">5041</th><td>    {</td></tr>
<tr><th id="5042">5042</th><td>	<em>char</em> *<dfn class="local col5 decl" id="465p" title='p' data-type='char *' data-ref="465p" data-ref-filename="465p">p</dfn>;</td></tr>
<tr><th id="5043">5043</th><td>	<em>int</em> <dfn class="local col6 decl" id="466extlen" title='extlen' data-type='int' data-ref="466extlen" data-ref-filename="466extlen">extlen</dfn> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="macro" href="rcs.h.html#21" title="&quot;,v&quot;" data-ref="_M/RCSEXT">RCSEXT</a>);</td></tr>
<tr><th id="5044">5044</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs-&gt;path) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 5044, __func__, &quot;rcs-&gt;path&quot;))" data-ref="_M/assert">assert</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="5045">5045</th><td>	<a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="ref fn" href="cvs.h.html#last_component" title='last_component' data-ref="last_component" data-ref-filename="last_component">last_component</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>));</td></tr>
<tr><th id="5046">5046</th><td>	<a class="local col5 ref" href="#465p" title='p' data-ref="465p" data-ref-filename="465p">p</a> = <a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a> + (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>) - <a class="local col6 ref" href="#466extlen" title='extlen' data-ref="466extlen" data-ref-filename="466extlen">extlen</a>);</td></tr>
<tr><th id="5047">5047</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((strncmp (p, &quot;,v&quot;, extlen) == 0) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 5047, __func__, &quot;strncmp (p, RCSEXT, extlen) == 0&quot;))" data-ref="_M/assert">assert</a> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col5 ref" href="#465p" title='p' data-ref="465p" data-ref-filename="465p">p</a>, <a class="macro" href="rcs.h.html#21" title="&quot;,v&quot;" data-ref="_M/RCSEXT">RCSEXT</a>, <a class="local col6 ref" href="#466extlen" title='extlen' data-ref="466extlen" data-ref-filename="466extlen">extlen</a>) == <var>0</var>);</td></tr>
<tr><th id="5048">5048</th><td>	*<a class="local col5 ref" href="#465p" title='p' data-ref="465p" data-ref-filename="465p">p</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="5049">5049</th><td>    }</td></tr>
<tr><th id="5050">5050</th><td></td></tr>
<tr><th id="5051">5051</th><td>    <i>/* If the filename is a symbolic link, follow it and replace it</i></td></tr>
<tr><th id="5052">5052</th><td><i>       with the destination of the link.  We need to do this before</i></td></tr>
<tr><th id="5053">5053</th><td><i>       calling rcs_internal_lockfile, or else we won't put the lock in</i></td></tr>
<tr><th id="5054">5054</th><td><i>       the right place. */</i></td></tr>
<tr><th id="5055">5055</th><td>    <a class="ref fn" href="subr.h.html#resolve_symlink" title='resolve_symlink' data-ref="resolve_symlink" data-ref-filename="resolve_symlink">resolve_symlink</a> (&amp;(<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>));</td></tr>
<tr><th id="5056">5056</th><td></td></tr>
<tr><th id="5057">5057</th><td>    <a class="local col9 ref" href="#459checkin_quiet" title='checkin_quiet' data-ref="459checkin_quiet" data-ref-filename="459checkin_quiet">checkin_quiet</a> = <a class="local col7 ref" href="#447flags" title='flags' data-ref="447flags" data-ref-filename="447flags">flags</a> &amp; <a class="macro" href="cvs.h.html#439" title="4" data-ref="_M/RCS_FLAGS_QUIET">RCS_FLAGS_QUIET</a>;</td></tr>
<tr><th id="5058">5058</th><td>    <b>if</b> (!(<a class="local col9 ref" href="#459checkin_quiet" title='checkin_quiet' data-ref="459checkin_quiet" data-ref-filename="459checkin_quiet">checkin_quiet</a> || <a class="ref" href="cvs.h.html#really_quiet" title='really_quiet' data-ref="really_quiet" data-ref-filename="really_quiet">really_quiet</a>))</td></tr>
<tr><th id="5059">5059</th><td>    {</td></tr>
<tr><th id="5060">5060</th><td>	<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>, <var>0</var>);</td></tr>
<tr><th id="5061">5061</th><td>	<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"  &lt;--  "</q>, <var>7</var>);</td></tr>
<tr><th id="5062">5062</th><td>	<b>if</b> (<a class="local col2 ref" href="#442update_dir" title='update_dir' data-ref="442update_dir" data-ref-filename="442update_dir">update_dir</a> &amp;&amp; <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col2 ref" href="#442update_dir" title='update_dir' data-ref="442update_dir" data-ref-filename="442update_dir">update_dir</a>))</td></tr>
<tr><th id="5063">5063</th><td>	{</td></tr>
<tr><th id="5064">5064</th><td>	    <a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="local col2 ref" href="#442update_dir" title='update_dir' data-ref="442update_dir" data-ref-filename="442update_dir">update_dir</a>, <var>0</var>);</td></tr>
<tr><th id="5065">5065</th><td>	    <a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"/"</q>, <var>1</var>);</td></tr>
<tr><th id="5066">5066</th><td>	}</td></tr>
<tr><th id="5067">5067</th><td>	<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>, <var>0</var>);</td></tr>
<tr><th id="5068">5068</th><td>	<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"\n"</q>, <var>1</var>);</td></tr>
<tr><th id="5069">5069</th><td>    }</td></tr>
<tr><th id="5070">5070</th><td></td></tr>
<tr><th id="5071">5071</th><td>    <i>/* Create new delta node. */</i></td></tr>
<tr><th id="5072">5072</th><td>    <a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<b>sizeof</b> (<a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a>));</td></tr>
<tr><th id="5073">5073</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memset" title='memset' data-ref="memset" data-ref-filename="memset">memset</a> (<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>, <var>0</var>, <b>sizeof</b> (<a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a>));</td></tr>
<tr><th id="5074">5074</th><td>    <a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::author" title='rcsversnode::author' data-ref="rcsversnode::author" data-ref-filename="rcsversnode..author">author</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="ref fn" href="subr.h.html#getcaller" title='getcaller' data-ref="getcaller" data-ref-filename="getcaller">getcaller</a> ());</td></tr>
<tr><th id="5075">5075</th><td>    <b>if</b> (<a class="local col7 ref" href="#447flags" title='flags' data-ref="447flags" data-ref-filename="447flags">flags</a> &amp; <a class="macro" href="cvs.h.html#440" title="8" data-ref="_M/RCS_FLAGS_MODTIME">RCS_FLAGS_MODTIME</a>)</td></tr>
<tr><th id="5076">5076</th><td>    {</td></tr>
<tr><th id="5077">5077</th><td>	<b>struct</b> <a class="type" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat" title='stat' data-ref="stat" data-ref-filename="stat">stat</a> <dfn class="local col7 decl" id="467ws" title='ws' data-type='struct stat' data-ref="467ws" data-ref-filename="467ws">ws</dfn>;</td></tr>
<tr><th id="5078">5078</th><td>	<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#__stat50" title='stat' data-ref="__stat50" data-ref-filename="__stat50">stat</a> (<a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>, &amp;<a class="local col7 ref" href="#467ws" title='ws' data-ref="467ws" data-ref-filename="467ws">ws</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="5079">5079</th><td>	{</td></tr>
<tr><th id="5080">5080</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot stat %s"</q>, <a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>);</td></tr>
<tr><th id="5081">5081</th><td>	}</td></tr>
<tr><th id="5082">5082</th><td>	<a class="local col1 ref" href="#461modtime" title='modtime' data-ref="461modtime" data-ref-filename="461modtime">modtime</a> = <a class="local col7 ref" href="#467ws" title='ws' data-ref="467ws" data-ref-filename="467ws">ws</a>.<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#95" title="st_mtim.tv_sec" data-ref="_M/st_mtime">st_mtime</a>;</td></tr>
<tr><th id="5083">5083</th><td>    }</td></tr>
<tr><th id="5084">5084</th><td>    <b>else</b> <b>if</b> (<a class="local col7 ref" href="#447flags" title='flags' data-ref="447flags" data-ref-filename="447flags">flags</a> &amp; <a class="macro" href="cvs.h.html#442" title="32" data-ref="_M/RCS_FLAGS_USETIME">RCS_FLAGS_USETIME</a>)</td></tr>
<tr><th id="5085">5085</th><td>	<a class="local col1 ref" href="#461modtime" title='modtime' data-ref="461modtime" data-ref-filename="461modtime">modtime</a> = <a class="local col6 ref" href="#446citime" title='citime' data-ref="446citime" data-ref-filename="446citime">citime</a>;</td></tr>
<tr><th id="5086">5086</th><td>    <b>else</b></td></tr>
<tr><th id="5087">5087</th><td>	(<em>void</em>) <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#__time50" title='time' data-ref="__time50" data-ref-filename="__time50">time</a> (&amp;<a class="local col1 ref" href="#461modtime" title='modtime' data-ref="461modtime" data-ref-filename="461modtime">modtime</a>);</td></tr>
<tr><th id="5088">5088</th><td>    <a class="local col0 ref" href="#460ftm" title='ftm' data-ref="460ftm" data-ref-filename="460ftm">ftm</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#__gmtime50" title='gmtime' data-ref="__gmtime50" data-ref-filename="__gmtime50">gmtime</a> (&amp;<a class="local col1 ref" href="#461modtime" title='modtime' data-ref="461modtime" data-ref-filename="461modtime">modtime</a>);</td></tr>
<tr><th id="5089">5089</th><td>    <a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a> = <a class="ref fn" href="subr.h.html#Xasprintf" title='Xasprintf' data-ref="Xasprintf" data-ref-filename="Xasprintf">Xasprintf</a> (<a class="macro" href="rcs.h.html#36" title="&quot;%02d.%02d.%02d.%02d.%02d.%02d&quot;" data-ref="_M/DATEFORM">DATEFORM</a>,</td></tr>
<tr><th id="5090">5090</th><td>			     <a class="local col0 ref" href="#460ftm" title='ftm' data-ref="460ftm" data-ref-filename="460ftm">ftm</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_year" title='tm::tm_year' data-ref="tm::tm_year" data-ref-filename="tm..tm_year">tm_year</a> + (<a class="local col0 ref" href="#460ftm" title='ftm' data-ref="460ftm" data-ref-filename="460ftm">ftm</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_year" title='tm::tm_year' data-ref="tm::tm_year" data-ref-filename="tm..tm_year">tm_year</a> &lt; <var>100</var> ? <var>0</var> : <var>1900</var>),</td></tr>
<tr><th id="5091">5091</th><td>			     <a class="local col0 ref" href="#460ftm" title='ftm' data-ref="460ftm" data-ref-filename="460ftm">ftm</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_mon" title='tm::tm_mon' data-ref="tm::tm_mon" data-ref-filename="tm..tm_mon">tm_mon</a> + <var>1</var>, <a class="local col0 ref" href="#460ftm" title='ftm' data-ref="460ftm" data-ref-filename="460ftm">ftm</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_mday" title='tm::tm_mday' data-ref="tm::tm_mday" data-ref-filename="tm..tm_mday">tm_mday</a>, <a class="local col0 ref" href="#460ftm" title='ftm' data-ref="460ftm" data-ref-filename="460ftm">ftm</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_hour" title='tm::tm_hour' data-ref="tm::tm_hour" data-ref-filename="tm..tm_hour">tm_hour</a>,</td></tr>
<tr><th id="5092">5092</th><td>			     <a class="local col0 ref" href="#460ftm" title='ftm' data-ref="460ftm" data-ref-filename="460ftm">ftm</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_min" title='tm::tm_min' data-ref="tm::tm_min" data-ref-filename="tm..tm_min">tm_min</a>, <a class="local col0 ref" href="#460ftm" title='ftm' data-ref="460ftm" data-ref-filename="460ftm">ftm</a>-&gt;<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm::tm_sec" title='tm::tm_sec' data-ref="tm::tm_sec" data-ref-filename="tm..tm_sec">tm_sec</a>);</td></tr>
<tr><th id="5093">5093</th><td>    <b>if</b> (<a class="local col7 ref" href="#447flags" title='flags' data-ref="447flags" data-ref-filename="447flags">flags</a> &amp; <a class="macro" href="cvs.h.html#438" title="2" data-ref="_M/RCS_FLAGS_DEAD">RCS_FLAGS_DEAD</a>)</td></tr>
<tr><th id="5094">5094</th><td>    {</td></tr>
<tr><th id="5095">5095</th><td>	<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::state" title='rcsversnode::state' data-ref="rcsversnode::state" data-ref-filename="rcsversnode..state">state</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="macro" href="rcs.h.html#34" title="&quot;dead&quot;" data-ref="_M/RCSDEAD">RCSDEAD</a>);</td></tr>
<tr><th id="5096">5096</th><td>	<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::dead" title='rcsversnode::dead' data-ref="rcsversnode::dead" data-ref-filename="rcsversnode..dead">dead</a> = <var>1</var>;</td></tr>
<tr><th id="5097">5097</th><td>    }</td></tr>
<tr><th id="5098">5098</th><td>    <b>else</b></td></tr>
<tr><th id="5099">5099</th><td>	<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::state" title='rcsversnode::state' data-ref="rcsversnode::state" data-ref-filename="rcsversnode..state">state</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<q>"Exp"</q>);</td></tr>
<tr><th id="5100">5100</th><td></td></tr>
<tr><th id="5101">5101</th><td>    <a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other_delta" title='rcsversnode::other_delta' data-ref="rcsversnode::other_delta" data-ref-filename="rcsversnode..other_delta">other_delta</a> = <a class="ref fn" href="hash.h.html#getlist" title='getlist' data-ref="getlist" data-ref-filename="getlist">getlist</a>();</td></tr>
<tr><th id="5102">5102</th><td></td></tr>
<tr><th id="5103">5103</th><td>    <i>/* save the commit ID */</i></td></tr>
<tr><th id="5104">5104</th><td>    <a class="local col4 ref" href="#464np" title='np' data-ref="464np" data-ref-filename="464np">np</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a>();</td></tr>
<tr><th id="5105">5105</th><td>    <a class="local col4 ref" href="#464np" title='np' data-ref="464np" data-ref-filename="464np">np</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> = <a class="enum" href="hash.h.html#RCSFIELD" title='RCSFIELD' data-ref="RCSFIELD" data-ref-filename="RCSFIELD">RCSFIELD</a>;</td></tr>
<tr><th id="5106">5106</th><td>    <a class="local col4 ref" href="#464np" title='np' data-ref="464np" data-ref-filename="464np">np</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<q>"commitid"</q>);</td></tr>
<tr><th id="5107">5107</th><td>    <a class="local col4 ref" href="#464np" title='np' data-ref="464np" data-ref-filename="464np">np</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a>(<a class="ref" href="cvs.h.html#global_session_id" title='global_session_id' data-ref="global_session_id" data-ref-filename="global_session_id">global_session_id</a>);</td></tr>
<tr><th id="5108">5108</th><td>    <a class="ref fn" href="hash.h.html#addnode" title='addnode' data-ref="addnode" data-ref-filename="addnode">addnode</a> (<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other_delta" title='rcsversnode::other_delta' data-ref="rcsversnode::other_delta" data-ref-filename="rcsversnode..other_delta">other_delta</a>, <a class="local col4 ref" href="#464np" title='np' data-ref="464np" data-ref-filename="464np">np</a>);</td></tr>
<tr><th id="5109">5109</th><td></td></tr>
<tr><th id="5110">5110</th><td></td></tr>
<tr><th id="5111">5111</th><td><u>#<span data-ppcond="5111">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="5112">5112</th><td>    <i>/* If permissions should be preserved on this project, then</i></td></tr>
<tr><th id="5113">5113</th><td><i>       save the permission info. */</i></td></tr>
<tr><th id="5114">5114</th><td>    <b>if</b> (preserve_perms)</td></tr>
<tr><th id="5115">5115</th><td>    {</td></tr>
<tr><th id="5116">5116</th><td>	Node *np;</td></tr>
<tr><th id="5117">5117</th><td>	<em>char</em> buf[<var>64</var>];	<i>/* static buffer should be safe: see usage. -twp */</i></td></tr>
<tr><th id="5118">5118</th><td></td></tr>
<tr><th id="5119">5119</th><td>	delta-&gt;other_delta = getlist();</td></tr>
<tr><th id="5120">5120</th><td></td></tr>
<tr><th id="5121">5121</th><td>	<b>if</b> (lstat (workfile, &amp;sb) &lt; <var>0</var>)</td></tr>
<tr><th id="5122">5122</th><td>	    error (<var>1</var>, errno, <q>"cannot lstat %s"</q>, workfile);</td></tr>
<tr><th id="5123">5123</th><td></td></tr>
<tr><th id="5124">5124</th><td>	<b>if</b> (S_ISLNK (sb.st_mode))</td></tr>
<tr><th id="5125">5125</th><td>	{</td></tr>
<tr><th id="5126">5126</th><td>	    np = getnode();</td></tr>
<tr><th id="5127">5127</th><td>	    np-&gt;type = RCSFIELD;</td></tr>
<tr><th id="5128">5128</th><td>	    np-&gt;key = xstrdup (<q>"symlink"</q>);</td></tr>
<tr><th id="5129">5129</th><td>	    np-&gt;data = Xreadlink (workfile, sb.st_size);</td></tr>
<tr><th id="5130">5130</th><td>	    addnode (delta-&gt;other_delta, np);</td></tr>
<tr><th id="5131">5131</th><td>	}</td></tr>
<tr><th id="5132">5132</th><td>	<b>else</b></td></tr>
<tr><th id="5133">5133</th><td>	{</td></tr>
<tr><th id="5134">5134</th><td>	    (<em>void</em>) sprintf (buf, <q>"%u"</q>, sb.st_uid);</td></tr>
<tr><th id="5135">5135</th><td>	    np = getnode();</td></tr>
<tr><th id="5136">5136</th><td>	    np-&gt;type = RCSFIELD;</td></tr>
<tr><th id="5137">5137</th><td>	    np-&gt;key = xstrdup (<q>"owner"</q>);</td></tr>
<tr><th id="5138">5138</th><td>	    np-&gt;data = xstrdup (buf);</td></tr>
<tr><th id="5139">5139</th><td>	    addnode (delta-&gt;other_delta, np);</td></tr>
<tr><th id="5140">5140</th><td></td></tr>
<tr><th id="5141">5141</th><td>	    (<em>void</em>) sprintf (buf, <q>"%u"</q>, sb.st_gid);</td></tr>
<tr><th id="5142">5142</th><td>	    np = getnode();</td></tr>
<tr><th id="5143">5143</th><td>	    np-&gt;type = RCSFIELD;</td></tr>
<tr><th id="5144">5144</th><td>	    np-&gt;key = xstrdup (<q>"group"</q>);</td></tr>
<tr><th id="5145">5145</th><td>	    np-&gt;data = xstrdup (buf);</td></tr>
<tr><th id="5146">5146</th><td>	    addnode (delta-&gt;other_delta, np);</td></tr>
<tr><th id="5147">5147</th><td>	    </td></tr>
<tr><th id="5148">5148</th><td>	    (<em>void</em>) sprintf (buf, <q>"%o"</q>, sb.st_mode &amp; <var>07777</var>);</td></tr>
<tr><th id="5149">5149</th><td>	    np = getnode();</td></tr>
<tr><th id="5150">5150</th><td>	    np-&gt;type = RCSFIELD;</td></tr>
<tr><th id="5151">5151</th><td>	    np-&gt;key = xstrdup (<q>"permissions"</q>);</td></tr>
<tr><th id="5152">5152</th><td>	    np-&gt;data = xstrdup (buf);</td></tr>
<tr><th id="5153">5153</th><td>	    addnode (delta-&gt;other_delta, np);</td></tr>
<tr><th id="5154">5154</th><td></td></tr>
<tr><th id="5155">5155</th><td>	    <i>/* Save device number. */</i></td></tr>
<tr><th id="5156">5156</th><td>	    <b>switch</b> (sb.st_mode &amp; S_IFMT)</td></tr>
<tr><th id="5157">5157</th><td>	    {</td></tr>
<tr><th id="5158">5158</th><td>		<b>case</b> S_IFREG: <b>break</b>;</td></tr>
<tr><th id="5159">5159</th><td>		<b>case</b> S_IFCHR:</td></tr>
<tr><th id="5160">5160</th><td>		<b>case</b> S_IFBLK:</td></tr>
<tr><th id="5161">5161</th><td><u># ifdef HAVE_STRUCT_STAT_ST_RDEV</u></td></tr>
<tr><th id="5162">5162</th><td>		    np = getnode();</td></tr>
<tr><th id="5163">5163</th><td>		    np-&gt;type = RCSFIELD;</td></tr>
<tr><th id="5164">5164</th><td>		    np-&gt;key = xstrdup (<q>"special"</q>);</td></tr>
<tr><th id="5165">5165</th><td>		    sprintf (buf, <q>"%s %lu"</q>,</td></tr>
<tr><th id="5166">5166</th><td>			     ((sb.st_mode &amp; S_IFMT) == S_IFCHR</td></tr>
<tr><th id="5167">5167</th><td>			      ? <q>"character"</q> : <q>"block"</q>),</td></tr>
<tr><th id="5168">5168</th><td>			     (<em>unsigned</em> <em>long</em>) sb.st_rdev);</td></tr>
<tr><th id="5169">5169</th><td>		    np-&gt;data = xstrdup (buf);</td></tr>
<tr><th id="5170">5170</th><td>		    addnode (delta-&gt;other_delta, np);</td></tr>
<tr><th id="5171">5171</th><td><u># else</u></td></tr>
<tr><th id="5172">5172</th><td>		    error (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="5173">5173</th><td><q>"can't preserve %s: unable to save device files on this system"</q>,</td></tr>
<tr><th id="5174">5174</th><td>workfile);</td></tr>
<tr><th id="5175">5175</th><td><u># endif</u></td></tr>
<tr><th id="5176">5176</th><td>		    <b>break</b>;</td></tr>
<tr><th id="5177">5177</th><td></td></tr>
<tr><th id="5178">5178</th><td>		<b>default</b>:</td></tr>
<tr><th id="5179">5179</th><td>		    error (<var>0</var>, <var>0</var>, <q>"special file %s has unknown type"</q>, workfile);</td></tr>
<tr><th id="5180">5180</th><td>	    }</td></tr>
<tr><th id="5181">5181</th><td></td></tr>
<tr><th id="5182">5182</th><td>	    <i>/* Save hardlinks. */</i></td></tr>
<tr><th id="5183">5183</th><td>	    delta-&gt;hardlinks = list_linked_files_on_disk (workfile);</td></tr>
<tr><th id="5184">5184</th><td>	}</td></tr>
<tr><th id="5185">5185</th><td>    }</td></tr>
<tr><th id="5186">5186</th><td><u>#<span data-ppcond="5111">endif</span></u></td></tr>
<tr><th id="5187">5187</th><td></td></tr>
<tr><th id="5188">5188</th><td>    <i>/* Create a new deltatext node. */</i></td></tr>
<tr><th id="5189">5189</th><td>    <a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<b>sizeof</b> (<a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a>));</td></tr>
<tr><th id="5190">5190</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memset" title='memset' data-ref="memset" data-ref-filename="memset">memset</a> (<a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>, <var>0</var>, <b>sizeof</b> (<a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a>));</td></tr>
<tr><th id="5191">5191</th><td></td></tr>
<tr><th id="5192">5192</th><td>    <a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a> = <a class="ref fn" href="subr.h.html#make_message_rcsvalid" title='make_message_rcsvalid' data-ref="make_message_rcsvalid" data-ref-filename="make_message_rcsvalid">make_message_rcsvalid</a> (<a class="local col4 ref" href="#444message" title='message' data-ref="444message" data-ref-filename="444message">message</a>);</td></tr>
<tr><th id="5193">5193</th><td></td></tr>
<tr><th id="5194">5194</th><td>    <i>/* If the delta tree is empty, then there's nothing to link the</i></td></tr>
<tr><th id="5195">5195</th><td><i>       new delta into.  So make a new delta tree, snarf the working</i></td></tr>
<tr><th id="5196">5196</th><td><i>       file contents, and just write the new RCS file. */</i></td></tr>
<tr><th id="5197">5197</th><td>    <b>if</b> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5198">5198</th><td>    {</td></tr>
<tr><th id="5199">5199</th><td>	<em>char</em> *<dfn class="local col8 decl" id="468newrev" title='newrev' data-type='char *' data-ref="468newrev" data-ref-filename="468newrev">newrev</dfn>;</td></tr>
<tr><th id="5200">5200</th><td>	<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col9 decl" id="469fout" title='fout' data-type='FILE *' data-ref="469fout" data-ref-filename="469fout">fout</dfn>;</td></tr>
<tr><th id="5201">5201</th><td></td></tr>
<tr><th id="5202">5202</th><td>	<i>/* Figure out what the first revision number should be. */</i></td></tr>
<tr><th id="5203">5203</th><td>	<b>if</b> (<a class="local col5 ref" href="#445rev" title='rev' data-ref="445rev" data-ref-filename="445rev">rev</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || *<a class="local col5 ref" href="#445rev" title='rev' data-ref="445rev" data-ref-filename="445rev">rev</a> == <kbd>'\0'</kbd>)</td></tr>
<tr><th id="5204">5204</th><td>	    <a class="local col8 ref" href="#468newrev" title='newrev' data-ref="468newrev" data-ref-filename="468newrev">newrev</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<q>"1.1"</q>);</td></tr>
<tr><th id="5205">5205</th><td>	<b>else</b> <b>if</b> (<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col5 ref" href="#445rev" title='rev' data-ref="445rev" data-ref-filename="445rev">rev</a>) == <var>0</var>)</td></tr>
<tr><th id="5206">5206</th><td>	{</td></tr>
<tr><th id="5207">5207</th><td>	    <a class="local col8 ref" href="#468newrev" title='newrev' data-ref="468newrev" data-ref-filename="468newrev">newrev</a> = <a class="ref fn" href="subr.h.html#Xasprintf" title='Xasprintf' data-ref="Xasprintf" data-ref-filename="Xasprintf">Xasprintf</a> (<q>"%s.1"</q>, <a class="local col5 ref" href="#445rev" title='rev' data-ref="445rev" data-ref-filename="445rev">rev</a>);</td></tr>
<tr><th id="5208">5208</th><td>	}</td></tr>
<tr><th id="5209">5209</th><td>	<b>else</b></td></tr>
<tr><th id="5210">5210</th><td>	    <a class="local col8 ref" href="#468newrev" title='newrev' data-ref="468newrev" data-ref-filename="468newrev">newrev</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col5 ref" href="#445rev" title='rev' data-ref="445rev" data-ref-filename="445rev">rev</a>);</td></tr>
<tr><th id="5211">5211</th><td></td></tr>
<tr><th id="5212">5212</th><td>	<i>/* Don't need to xstrdup NEWREV because it's already dynamic, and</i></td></tr>
<tr><th id="5213">5213</th><td><i>	   not used for anything else.  (Don't need to free it, either.) */</i></td></tr>
<tr><th id="5214">5214</th><td>	<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a> = <a class="local col8 ref" href="#468newrev" title='newrev' data-ref="468newrev" data-ref-filename="468newrev">newrev</a>;</td></tr>
<tr><th id="5215">5215</th><td>	<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col8 ref" href="#468newrev" title='newrev' data-ref="468newrev" data-ref-filename="468newrev">newrev</a>);</td></tr>
<tr><th id="5216">5216</th><td>	<a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a>();</td></tr>
<tr><th id="5217">5217</th><td>	<a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> = <a class="enum" href="hash.h.html#RCSVERS" title='RCSVERS' data-ref="RCSVERS" data-ref-filename="RCSVERS">RCSVERS</a>;</td></tr>
<tr><th id="5218">5218</th><td>	<a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::delproc" title='node::delproc' data-ref="node::delproc" data-ref-filename="node..delproc">delproc</a> = <a class="tu ref fn" href="#rcsvers_delproc" title='rcsvers_delproc' data-use='r' data-ref="rcsvers_delproc" data-ref-filename="rcsvers_delproc">rcsvers_delproc</a>;</td></tr>
<tr><th id="5219">5219</th><td>	<a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>;</td></tr>
<tr><th id="5220">5220</th><td>	<a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>;</td></tr>
<tr><th id="5221">5221</th><td>	(<em>void</em>) <a class="ref fn" href="hash.h.html#addnode" title='addnode' data-ref="addnode" data-ref-filename="addnode">addnode</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>);</td></tr>
<tr><th id="5222">5222</th><td></td></tr>
<tr><th id="5223">5223</th><td>	<a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::version" title='deltatext::version' data-ref="deltatext::version" data-ref-filename="deltatext..version">version</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col8 ref" href="#468newrev" title='newrev' data-ref="468newrev" data-ref-filename="468newrev">newrev</a>);</td></tr>
<tr><th id="5224">5224</th><td>	<a class="local col7 ref" href="#457bufsize" title='bufsize' data-ref="457bufsize" data-ref-filename="457bufsize">bufsize</a> = <var>0</var>;</td></tr>
<tr><th id="5225">5225</th><td><u>#<span data-ppcond="5225">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="5226">5226</th><td>	<b>if</b> (preserve_perms &amp;&amp; !S_ISREG (sb.st_mode))</td></tr>
<tr><th id="5227">5227</th><td>	    <i>/* Pretend file is empty.  */</i></td></tr>
<tr><th id="5228">5228</th><td>	    bufsize = <var>0</var>;</td></tr>
<tr><th id="5229">5229</th><td>	<b>else</b></td></tr>
<tr><th id="5230">5230</th><td><u>#<span data-ppcond="5225">endif</span></u></td></tr>
<tr><th id="5231">5231</th><td>	<a class="ref fn" href="subr.h.html#get_file" title='get_file' data-ref="get_file" data-ref-filename="get_file">get_file</a> (<a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>, <a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>,</td></tr>
<tr><th id="5232">5232</th><td>		  <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="macro" href="#138" title="(*(char *)(rcs-&gt;expand) == *(char *)(&quot;b&quot;) &amp;&amp; strcmp ((rcs-&gt;expand), (&quot;b&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a>, <q>"b"</q>) ? <q>"rb"</q> : <q>"r"</q>,</td></tr>
<tr><th id="5233">5233</th><td>		  &amp;<a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a>, &amp;<a class="local col7 ref" href="#457bufsize" title='bufsize' data-ref="457bufsize" data-ref-filename="457bufsize">bufsize</a>, &amp;<a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::len" title='deltatext::len' data-ref="deltatext::len" data-ref-filename="deltatext..len">len</a>);</td></tr>
<tr><th id="5234">5234</th><td></td></tr>
<tr><th id="5235">5235</th><td>	<b>if</b> (!(<a class="local col9 ref" href="#459checkin_quiet" title='checkin_quiet' data-ref="459checkin_quiet" data-ref-filename="459checkin_quiet">checkin_quiet</a> || <a class="ref" href="cvs.h.html#really_quiet" title='really_quiet' data-ref="really_quiet" data-ref-filename="really_quiet">really_quiet</a>))</td></tr>
<tr><th id="5236">5236</th><td>	{</td></tr>
<tr><th id="5237">5237</th><td>	    <a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"initial revision: "</q>, <var>0</var>);</td></tr>
<tr><th id="5238">5238</th><td>	    <a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>, <var>0</var>);</td></tr>
<tr><th id="5239">5239</th><td>	    <a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"\n"</q>, <var>1</var>);</td></tr>
<tr><th id="5240">5240</th><td>	}</td></tr>
<tr><th id="5241">5241</th><td></td></tr>
<tr><th id="5242">5242</th><td>	<i>/* We are probably about to invalidate any cached file.  */</i></td></tr>
<tr><th id="5243">5243</th><td>	<a class="tu ref fn" href="#rcsbuf_cache_close" title='rcsbuf_cache_close' data-use='c' data-ref="rcsbuf_cache_close" data-ref-filename="rcsbuf_cache_close">rcsbuf_cache_close</a> ();</td></tr>
<tr><th id="5244">5244</th><td></td></tr>
<tr><th id="5245">5245</th><td>	<a class="local col9 ref" href="#469fout" title='fout' data-ref="469fout" data-ref-filename="469fout">fout</a> = <a class="tu ref fn" href="#rcs_internal_lockfile" title='rcs_internal_lockfile' data-use='c' data-ref="rcs_internal_lockfile" data-ref-filename="rcs_internal_lockfile">rcs_internal_lockfile</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="5246">5246</th><td>	<a class="tu ref fn" href="#RCS_putadmin" title='RCS_putadmin' data-use='c' data-ref="RCS_putadmin" data-ref-filename="RCS_putadmin">RCS_putadmin</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>, <a class="local col9 ref" href="#469fout" title='fout' data-ref="469fout" data-ref-filename="469fout">fout</a>);</td></tr>
<tr><th id="5247">5247</th><td>	<a class="tu ref fn" href="#RCS_putdtree" title='RCS_putdtree' data-use='c' data-ref="RCS_putdtree" data-ref-filename="RCS_putdtree">RCS_putdtree</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>, <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>, <a class="local col9 ref" href="#469fout" title='fout' data-ref="469fout" data-ref-filename="469fout">fout</a>);</td></tr>
<tr><th id="5248">5248</th><td>	<a class="tu ref fn" href="#RCS_putdesc" title='RCS_putdesc' data-use='c' data-ref="RCS_putdesc" data-ref-filename="RCS_putdesc">RCS_putdesc</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>, <a class="local col9 ref" href="#469fout" title='fout' data-ref="469fout" data-ref-filename="469fout">fout</a>);</td></tr>
<tr><th id="5249">5249</th><td>	<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::delta_pos" title='rcsnode::delta_pos' data-ref="rcsnode::delta_pos" data-ref-filename="rcsnode..delta_pos">delta_pos</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#ftello" title='ftello' data-ref="ftello" data-ref-filename="ftello">ftello</a> (<a class="local col9 ref" href="#469fout" title='fout' data-ref="469fout" data-ref-filename="469fout">fout</a>);</td></tr>
<tr><th id="5250">5250</th><td>	<b>if</b> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::delta_pos" title='rcsnode::delta_pos' data-ref="rcsnode::delta_pos" data-ref-filename="rcsnode..delta_pos">delta_pos</a> == -<var>1</var>)</td></tr>
<tr><th id="5251">5251</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot ftello for %s"</q>, <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="5252">5252</th><td>	<a class="tu ref fn" href="#putdeltatext" title='putdeltatext' data-use='c' data-ref="putdeltatext" data-ref-filename="putdeltatext">putdeltatext</a> (<a class="local col9 ref" href="#469fout" title='fout' data-ref="469fout" data-ref-filename="469fout">fout</a>, <a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>);</td></tr>
<tr><th id="5253">5253</th><td>	<a class="tu ref fn" href="#rcs_internal_unlockfile" title='rcs_internal_unlockfile' data-use='c' data-ref="rcs_internal_unlockfile" data-ref-filename="rcs_internal_unlockfile">rcs_internal_unlockfile</a> (<a class="local col9 ref" href="#469fout" title='fout' data-ref="469fout" data-ref-filename="469fout">fout</a>, <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="5254">5254</th><td></td></tr>
<tr><th id="5255">5255</th><td>	<b>if</b> ((<a class="local col7 ref" href="#447flags" title='flags' data-ref="447flags" data-ref-filename="447flags">flags</a> &amp; <a class="macro" href="cvs.h.html#441" title="16" data-ref="_M/RCS_FLAGS_KEEPFILE">RCS_FLAGS_KEEPFILE</a>) == <var>0</var>)</td></tr>
<tr><th id="5256">5256</th><td>	{</td></tr>
<tr><th id="5257">5257</th><td>	    <b>if</b> (<a class="ref fn" href="cvs.h.html#unlink_file" title='unlink_file' data-ref="unlink_file" data-ref-filename="unlink_file">unlink_file</a> (<a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="5258">5258</th><td>		<i>/* FIXME-update-dir: message does not include update_dir.  */</i></td></tr>
<tr><th id="5259">5259</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot remove %s"</q>, <a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>);</td></tr>
<tr><th id="5260">5260</th><td>	}</td></tr>
<tr><th id="5261">5261</th><td></td></tr>
<tr><th id="5262">5262</th><td>	<a class="local col8 ref" href="#458status" title='status' data-ref="458status" data-ref-filename="458status">status</a> = <var>0</var>;</td></tr>
<tr><th id="5263">5263</th><td>	<b>goto</b> <a class="lbl" href="#470checkin_done" data-ref="470checkin_done" data-ref-filename="470checkin_done">checkin_done</a>;</td></tr>
<tr><th id="5264">5264</th><td>    }</td></tr>
<tr><th id="5265">5265</th><td></td></tr>
<tr><th id="5266">5266</th><td>    <i>/* Derive a new revision number.  From the `ci' man page:</i></td></tr>
<tr><th id="5267">5267</th><td><i></i></td></tr>
<tr><th id="5268">5268</th><td><i>	 "If rev  is  a revision number, it must be higher than the</i></td></tr>
<tr><th id="5269">5269</th><td><i>	 latest one on the branch to which  rev  belongs,  or  must</i></td></tr>
<tr><th id="5270">5270</th><td><i>	 start a new branch.</i></td></tr>
<tr><th id="5271">5271</th><td><i></i></td></tr>
<tr><th id="5272">5272</th><td><i>	 If  rev is a branch rather than a revision number, the new</i></td></tr>
<tr><th id="5273">5273</th><td><i>	 revision is appended to that branch.  The level number  is</i></td></tr>
<tr><th id="5274">5274</th><td><i>	 obtained  by  incrementing the tip revision number of that</i></td></tr>
<tr><th id="5275">5275</th><td><i>	 branch.  If rev  indicates  a  non-existing  branch,  that</i></td></tr>
<tr><th id="5276">5276</th><td><i>	 branch  is  created  with  the  initial  revision numbered</i></td></tr>
<tr><th id="5277">5277</th><td><i>	 rev.1."</i></td></tr>
<tr><th id="5278">5278</th><td><i></i></td></tr>
<tr><th id="5279">5279</th><td><i>       RCS_findlock_or_tip handles the case where REV is omitted.</i></td></tr>
<tr><th id="5280">5280</th><td><i>       RCS 5.7 also permits REV to be "$" or to begin with a dot, but</i></td></tr>
<tr><th id="5281">5281</th><td><i>       we do not address those cases -- every routine that calls</i></td></tr>
<tr><th id="5282">5282</th><td><i>       RCS_checkin passes it a numeric revision. */</i></td></tr>
<tr><th id="5283">5283</th><td></td></tr>
<tr><th id="5284">5284</th><td>    <b>if</b> (<a class="local col5 ref" href="#445rev" title='rev' data-ref="445rev" data-ref-filename="445rev">rev</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || *<a class="local col5 ref" href="#445rev" title='rev' data-ref="445rev" data-ref-filename="445rev">rev</a> == <kbd>'\0'</kbd>)</td></tr>
<tr><th id="5285">5285</th><td>    {</td></tr>
<tr><th id="5286">5286</th><td>	<i>/* Figure out where the commit point is by looking for locks.</i></td></tr>
<tr><th id="5287">5287</th><td><i>	   If the commit point is at the tip of a branch (or is the</i></td></tr>
<tr><th id="5288">5288</th><td><i>	   head of the delta tree), then increment its revision number</i></td></tr>
<tr><th id="5289">5289</th><td><i>	   to obtain the new revnum.  Otherwise, start a new</i></td></tr>
<tr><th id="5290">5290</th><td><i>	   branch. */</i></td></tr>
<tr><th id="5291">5291</th><td>	<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a> = <a class="tu ref fn" href="#RCS_findlock_or_tip" title='RCS_findlock_or_tip' data-use='c' data-ref="RCS_findlock_or_tip" data-ref-filename="RCS_findlock_or_tip">RCS_findlock_or_tip</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>);</td></tr>
<tr><th id="5292">5292</th><td>	<b>if</b> (<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5293">5293</th><td>	{</td></tr>
<tr><th id="5294">5294</th><td>	    <a class="local col8 ref" href="#458status" title='status' data-ref="458status" data-ref-filename="458status">status</a> = <var>1</var>;</td></tr>
<tr><th id="5295">5295</th><td>	    <b>goto</b> <a class="lbl" href="#470checkin_done" data-ref="470checkin_done" data-ref-filename="470checkin_done">checkin_done</a>;</td></tr>
<tr><th id="5296">5296</th><td>	}</td></tr>
<tr><th id="5297">5297</th><td>	<b>else</b> <b>if</b> (<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span></td></tr>
<tr><th id="5298">5298</th><td>		 || <a class="macro" href="#138" title="(*(char *)(commitpt-&gt;version) == *(char *)(rcs-&gt;head) &amp;&amp; strcmp ((commitpt-&gt;version), (rcs-&gt;head)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>))</td></tr>
<tr><th id="5299">5299</th><td>	    <a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a> = <a class="ref fn" href="subr.h.html#increment_revnum" title='increment_revnum' data-ref="increment_revnum" data-ref-filename="increment_revnum">increment_revnum</a> (<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="5300">5300</th><td>	<b>else</b></td></tr>
<tr><th id="5301">5301</th><td>	    <a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a> = <a class="tu ref fn" href="#RCS_addbranch" title='RCS_addbranch' data-use='c' data-ref="RCS_addbranch" data-ref-filename="RCS_addbranch">RCS_addbranch</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>, <a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="5302">5302</th><td>    }</td></tr>
<tr><th id="5303">5303</th><td>    <b>else</b></td></tr>
<tr><th id="5304">5304</th><td>    {</td></tr>
<tr><th id="5305">5305</th><td>	<i>/* REV is either a revision number or a branch number.  Find the</i></td></tr>
<tr><th id="5306">5306</th><td><i>	   tip of the target branch. */</i></td></tr>
<tr><th id="5307">5307</th><td>	<em>char</em> *<dfn class="local col1 decl" id="471branch" title='branch' data-type='char *' data-ref="471branch" data-ref-filename="471branch">branch</dfn>, *<dfn class="local col2 decl" id="472tip" title='tip' data-type='char *' data-ref="472tip" data-ref-filename="472tip">tip</dfn>, *<dfn class="local col3 decl" id="473newrev" title='newrev' data-type='char *' data-ref="473newrev" data-ref-filename="473newrev">newrev</dfn>, *<dfn class="local col4 decl" id="474p" title='p' data-type='char *' data-ref="474p" data-ref-filename="474p">p</dfn>;</td></tr>
<tr><th id="5308">5308</th><td>	<em>int</em> <dfn class="local col5 decl" id="475dots" title='dots' data-type='int' data-ref="475dots" data-ref-filename="475dots">dots</dfn>, <dfn class="local col6 decl" id="476isrevnum" title='isrevnum' data-type='int' data-ref="476isrevnum" data-ref-filename="476isrevnum">isrevnum</dfn>;</td></tr>
<tr><th id="5309">5309</th><td></td></tr>
<tr><th id="5310">5310</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((((int)((_ctype_tab_ + 1)[((unsigned char) *rev)] &amp; 0x0004))) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 5310, __func__, &quot;isdigit ((unsigned char) *rev)&quot;))" data-ref="_M/assert">assert</a> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) *rev)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) *<a class="local col5 ref" href="#445rev" title='rev' data-ref="445rev" data-ref-filename="445rev">rev</a>));</td></tr>
<tr><th id="5311">5311</th><td></td></tr>
<tr><th id="5312">5312</th><td>	<a class="local col3 ref" href="#473newrev" title='newrev' data-ref="473newrev" data-ref-filename="473newrev">newrev</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col5 ref" href="#445rev" title='rev' data-ref="445rev" data-ref-filename="445rev">rev</a>);</td></tr>
<tr><th id="5313">5313</th><td>	<a class="local col5 ref" href="#475dots" title='dots' data-ref="475dots" data-ref-filename="475dots">dots</a> = <a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col3 ref" href="#473newrev" title='newrev' data-ref="473newrev" data-ref-filename="473newrev">newrev</a>);</td></tr>
<tr><th id="5314">5314</th><td>	<a class="local col6 ref" href="#476isrevnum" title='isrevnum' data-ref="476isrevnum" data-ref-filename="476isrevnum">isrevnum</a> = <a class="local col5 ref" href="#475dots" title='dots' data-ref="475dots" data-ref-filename="475dots">dots</a> &amp; <var>1</var>;</td></tr>
<tr><th id="5315">5315</th><td></td></tr>
<tr><th id="5316">5316</th><td>	<a class="local col1 ref" href="#471branch" title='branch' data-ref="471branch" data-ref-filename="471branch">branch</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col5 ref" href="#445rev" title='rev' data-ref="445rev" data-ref-filename="445rev">rev</a>);</td></tr>
<tr><th id="5317">5317</th><td>	<b>if</b> (<a class="local col6 ref" href="#476isrevnum" title='isrevnum' data-ref="476isrevnum" data-ref-filename="476isrevnum">isrevnum</a>)</td></tr>
<tr><th id="5318">5318</th><td>	{</td></tr>
<tr><th id="5319">5319</th><td>	    <a class="local col4 ref" href="#474p" title='p' data-ref="474p" data-ref-filename="474p">p</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col1 ref" href="#471branch" title='branch' data-ref="471branch" data-ref-filename="471branch">branch</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="5320">5320</th><td>	    *<a class="local col4 ref" href="#474p" title='p' data-ref="474p" data-ref-filename="474p">p</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="5321">5321</th><td>	}</td></tr>
<tr><th id="5322">5322</th><td></td></tr>
<tr><th id="5323">5323</th><td>	<i>/* Find the tip of the target branch.  If we got a one- or two-digit</i></td></tr>
<tr><th id="5324">5324</th><td><i>	   revision number, this will be the head of the tree.  Exception:</i></td></tr>
<tr><th id="5325">5325</th><td><i>	   if rev is a single-field revision equal to the branch number of</i></td></tr>
<tr><th id="5326">5326</th><td><i>	   the trunk (usually "1") then we want to treat it like an ordinary</i></td></tr>
<tr><th id="5327">5327</th><td><i>	   branch revision. */</i></td></tr>
<tr><th id="5328">5328</th><td>	<b>if</b> (<a class="local col5 ref" href="#475dots" title='dots' data-ref="475dots" data-ref-filename="475dots">dots</a> == <var>0</var>)</td></tr>
<tr><th id="5329">5329</th><td>	{</td></tr>
<tr><th id="5330">5330</th><td>	    <a class="local col2 ref" href="#472tip" title='tip' data-ref="472tip" data-ref-filename="472tip">tip</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>);</td></tr>
<tr><th id="5331">5331</th><td>	    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#atoi" title='atoi' data-ref="atoi" data-ref-filename="atoi">atoi</a> (<a class="local col2 ref" href="#472tip" title='tip' data-ref="472tip" data-ref-filename="472tip">tip</a>) != <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#atoi" title='atoi' data-ref="atoi" data-ref-filename="atoi">atoi</a> (<a class="local col1 ref" href="#471branch" title='branch' data-ref="471branch" data-ref-filename="471branch">branch</a>))</td></tr>
<tr><th id="5332">5332</th><td>	    {</td></tr>
<tr><th id="5333">5333</th><td>		<a class="local col3 ref" href="#473newrev" title='newrev' data-ref="473newrev" data-ref-filename="473newrev">newrev</a> = <a class="ref fn" href="../lib/xalloc.h.html#xrealloc" title='xrealloc' data-ref="xrealloc" data-ref-filename="xrealloc">xrealloc</a> (<a class="local col3 ref" href="#473newrev" title='newrev' data-ref="473newrev" data-ref-filename="473newrev">newrev</a>, <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col3 ref" href="#473newrev" title='newrev' data-ref="473newrev" data-ref-filename="473newrev">newrev</a>) + <var>3</var>);</td></tr>
<tr><th id="5334">5334</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcat" title='strcat' data-ref="strcat" data-ref-filename="strcat">strcat</a> (<a class="local col3 ref" href="#473newrev" title='newrev' data-ref="473newrev" data-ref-filename="473newrev">newrev</a>, <q>".1"</q>);</td></tr>
<tr><th id="5335">5335</th><td>		<a class="local col5 ref" href="#475dots" title='dots' data-ref="475dots" data-ref-filename="475dots">dots</a> = <a class="local col6 ref" href="#476isrevnum" title='isrevnum' data-ref="476isrevnum" data-ref-filename="476isrevnum">isrevnum</a> = <var>1</var>;</td></tr>
<tr><th id="5336">5336</th><td>	    }</td></tr>
<tr><th id="5337">5337</th><td>	}</td></tr>
<tr><th id="5338">5338</th><td>	<b>else</b> <b>if</b> (<a class="local col5 ref" href="#475dots" title='dots' data-ref="475dots" data-ref-filename="475dots">dots</a> == <var>1</var>)</td></tr>
<tr><th id="5339">5339</th><td>	    <a class="local col2 ref" href="#472tip" title='tip' data-ref="472tip" data-ref-filename="472tip">tip</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>);</td></tr>
<tr><th id="5340">5340</th><td>	<b>else</b></td></tr>
<tr><th id="5341">5341</th><td>	    <a class="local col2 ref" href="#472tip" title='tip' data-ref="472tip" data-ref-filename="472tip">tip</a> = <a class="ref fn" href="#RCS_getbranch" title='RCS_getbranch' data-ref="RCS_getbranch" data-ref-filename="RCS_getbranch">RCS_getbranch</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>, <a class="local col1 ref" href="#471branch" title='branch' data-ref="471branch" data-ref-filename="471branch">branch</a>, <var>1</var>);</td></tr>
<tr><th id="5342">5342</th><td></td></tr>
<tr><th id="5343">5343</th><td>	<i>/* If the branch does not exist, and we were supplied an exact</i></td></tr>
<tr><th id="5344">5344</th><td><i>	   revision number, signal an error.  Otherwise, if we were</i></td></tr>
<tr><th id="5345">5345</th><td><i>	   given only a branch number, create it and set COMMITPT to</i></td></tr>
<tr><th id="5346">5346</th><td><i>	   the branch point. */</i></td></tr>
<tr><th id="5347">5347</th><td>	<b>if</b> (<a class="local col2 ref" href="#472tip" title='tip' data-ref="472tip" data-ref-filename="472tip">tip</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5348">5348</th><td>	{</td></tr>
<tr><th id="5349">5349</th><td>	    <b>if</b> (<a class="local col6 ref" href="#476isrevnum" title='isrevnum' data-ref="476isrevnum" data-ref-filename="476isrevnum">isrevnum</a>)</td></tr>
<tr><th id="5350">5350</th><td>	    {</td></tr>
<tr><th id="5351">5351</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: can't find branch point %s"</q>,</td></tr>
<tr><th id="5352">5352</th><td>		       <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col1 ref" href="#471branch" title='branch' data-ref="471branch" data-ref-filename="471branch">branch</a>);</td></tr>
<tr><th id="5353">5353</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col1 ref" href="#471branch" title='branch' data-ref="471branch" data-ref-filename="471branch">branch</a>);</td></tr>
<tr><th id="5354">5354</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#473newrev" title='newrev' data-ref="473newrev" data-ref-filename="473newrev">newrev</a>);</td></tr>
<tr><th id="5355">5355</th><td>		<a class="local col8 ref" href="#458status" title='status' data-ref="458status" data-ref-filename="458status">status</a> = <var>1</var>;</td></tr>
<tr><th id="5356">5356</th><td>		<b>goto</b> <a class="lbl" href="#470checkin_done" data-ref="470checkin_done" data-ref-filename="470checkin_done">checkin_done</a>;</td></tr>
<tr><th id="5357">5357</th><td>	    }</td></tr>
<tr><th id="5358">5358</th><td>	    <a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a> = <a class="tu ref fn" href="#RCS_addbranch" title='RCS_addbranch' data-use='c' data-ref="RCS_addbranch" data-ref-filename="RCS_addbranch">RCS_addbranch</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>, <a class="local col1 ref" href="#471branch" title='branch' data-ref="471branch" data-ref-filename="471branch">branch</a>);</td></tr>
<tr><th id="5359">5359</th><td>	    <b>if</b> (!<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>)</td></tr>
<tr><th id="5360">5360</th><td>	    {</td></tr>
<tr><th id="5361">5361</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col1 ref" href="#471branch" title='branch' data-ref="471branch" data-ref-filename="471branch">branch</a>);</td></tr>
<tr><th id="5362">5362</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#473newrev" title='newrev' data-ref="473newrev" data-ref-filename="473newrev">newrev</a>);</td></tr>
<tr><th id="5363">5363</th><td>		<a class="local col8 ref" href="#458status" title='status' data-ref="458status" data-ref-filename="458status">status</a> = <var>1</var>;</td></tr>
<tr><th id="5364">5364</th><td>		<b>goto</b> <a class="lbl" href="#470checkin_done" data-ref="470checkin_done" data-ref-filename="470checkin_done">checkin_done</a>;</td></tr>
<tr><th id="5365">5365</th><td>	    }</td></tr>
<tr><th id="5366">5366</th><td>	    <a class="local col2 ref" href="#462adding_branch" title='adding_branch' data-ref="462adding_branch" data-ref-filename="462adding_branch">adding_branch</a> = <var>1</var>;</td></tr>
<tr><th id="5367">5367</th><td>	    <a class="local col4 ref" href="#474p" title='p' data-ref="474p" data-ref-filename="474p">p</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col1 ref" href="#471branch" title='branch' data-ref="471branch" data-ref-filename="471branch">branch</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="5368">5368</th><td>	    *<a class="local col4 ref" href="#474p" title='p' data-ref="474p" data-ref-filename="474p">p</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="5369">5369</th><td>	    <a class="local col2 ref" href="#472tip" title='tip' data-ref="472tip" data-ref-filename="472tip">tip</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col1 ref" href="#471branch" title='branch' data-ref="471branch" data-ref-filename="471branch">branch</a>);</td></tr>
<tr><th id="5370">5370</th><td>	}</td></tr>
<tr><th id="5371">5371</th><td>	<b>else</b></td></tr>
<tr><th id="5372">5372</th><td>	{</td></tr>
<tr><th id="5373">5373</th><td>	    <b>if</b> (<a class="local col6 ref" href="#476isrevnum" title='isrevnum' data-ref="476isrevnum" data-ref-filename="476isrevnum">isrevnum</a>)</td></tr>
<tr><th id="5374">5374</th><td>	    {</td></tr>
<tr><th id="5375">5375</th><td>		<i>/* NEWREV must be higher than TIP. */</i></td></tr>
<tr><th id="5376">5376</th><td>		<b>if</b> (<a class="ref fn" href="subr.h.html#compare_revnums" title='compare_revnums' data-ref="compare_revnums" data-ref-filename="compare_revnums">compare_revnums</a> (<a class="local col2 ref" href="#472tip" title='tip' data-ref="472tip" data-ref-filename="472tip">tip</a>, <a class="local col3 ref" href="#473newrev" title='newrev' data-ref="473newrev" data-ref-filename="473newrev">newrev</a>) &gt;= <var>0</var>)</td></tr>
<tr><th id="5377">5377</th><td>		{</td></tr>
<tr><th id="5378">5378</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="5379">5379</th><td>			   <q>"%s: revision %s too low; must be higher than %s"</q>,</td></tr>
<tr><th id="5380">5380</th><td>			   <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>,</td></tr>
<tr><th id="5381">5381</th><td>			   <a class="local col3 ref" href="#473newrev" title='newrev' data-ref="473newrev" data-ref-filename="473newrev">newrev</a>, <a class="local col2 ref" href="#472tip" title='tip' data-ref="472tip" data-ref-filename="472tip">tip</a>);</td></tr>
<tr><th id="5382">5382</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col1 ref" href="#471branch" title='branch' data-ref="471branch" data-ref-filename="471branch">branch</a>);</td></tr>
<tr><th id="5383">5383</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#473newrev" title='newrev' data-ref="473newrev" data-ref-filename="473newrev">newrev</a>);</td></tr>
<tr><th id="5384">5384</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#472tip" title='tip' data-ref="472tip" data-ref-filename="472tip">tip</a>);</td></tr>
<tr><th id="5385">5385</th><td>		    <a class="local col8 ref" href="#458status" title='status' data-ref="458status" data-ref-filename="458status">status</a> = <var>1</var>;</td></tr>
<tr><th id="5386">5386</th><td>		    <b>goto</b> <a class="lbl" href="#470checkin_done" data-ref="470checkin_done" data-ref-filename="470checkin_done">checkin_done</a>;</td></tr>
<tr><th id="5387">5387</th><td>		}</td></tr>
<tr><th id="5388">5388</th><td>		<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col3 ref" href="#473newrev" title='newrev' data-ref="473newrev" data-ref-filename="473newrev">newrev</a>);</td></tr>
<tr><th id="5389">5389</th><td>	    }</td></tr>
<tr><th id="5390">5390</th><td>	    <b>else</b></td></tr>
<tr><th id="5391">5391</th><td>		<i>/* Just increment the tip number to get the new revision. */</i></td></tr>
<tr><th id="5392">5392</th><td>		<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a> = <a class="ref fn" href="subr.h.html#increment_revnum" title='increment_revnum' data-ref="increment_revnum" data-ref-filename="increment_revnum">increment_revnum</a> (<a class="local col2 ref" href="#472tip" title='tip' data-ref="472tip" data-ref-filename="472tip">tip</a>);</td></tr>
<tr><th id="5393">5393</th><td>	}</td></tr>
<tr><th id="5394">5394</th><td></td></tr>
<tr><th id="5395">5395</th><td>	<a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col2 ref" href="#472tip" title='tip' data-ref="472tip" data-ref-filename="472tip">tip</a>);</td></tr>
<tr><th id="5396">5396</th><td>	<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a> = <a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="5397">5397</th><td></td></tr>
<tr><th id="5398">5398</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col1 ref" href="#471branch" title='branch' data-ref="471branch" data-ref-filename="471branch">branch</a>);</td></tr>
<tr><th id="5399">5399</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#473newrev" title='newrev' data-ref="473newrev" data-ref-filename="473newrev">newrev</a>);</td></tr>
<tr><th id="5400">5400</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#472tip" title='tip' data-ref="472tip" data-ref-filename="472tip">tip</a>);</td></tr>
<tr><th id="5401">5401</th><td>    }</td></tr>
<tr><th id="5402">5402</th><td></td></tr>
<tr><th id="5403">5403</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((delta-&gt;version != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 5403, __func__, &quot;delta-&gt;version != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="5404">5404</th><td></td></tr>
<tr><th id="5405">5405</th><td>    <i>/* If COMMITPT is locked by us, break the lock.  If it's locked</i></td></tr>
<tr><th id="5406">5406</th><td><i>       by someone else, signal an error. */</i></td></tr>
<tr><th id="5407">5407</th><td>    <a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="ref fn" href="#RCS_getlocks" title='RCS_getlocks' data-ref="RCS_getlocks" data-ref-filename="RCS_getlocks">RCS_getlocks</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>), <a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="5408">5408</th><td>    <b>if</b> (<a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5409">5409</th><td>    {</td></tr>
<tr><th id="5410">5410</th><td>	<b>if</b> (! <a class="macro" href="#138" title="(*(char *)(nodep-&gt;data) == *(char *)(delta-&gt;author) &amp;&amp; strcmp ((nodep-&gt;data), (delta-&gt;author)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>, <a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::author" title='rcsversnode::author' data-ref="rcsversnode::author" data-ref-filename="rcsversnode..author">author</a>))</td></tr>
<tr><th id="5411">5411</th><td>	{</td></tr>
<tr><th id="5412">5412</th><td>	    <i>/* If we are adding a branch, then leave the old lock around.</i></td></tr>
<tr><th id="5413">5413</th><td><i>	       That is sensible in the sense that when adding a branch,</i></td></tr>
<tr><th id="5414">5414</th><td><i>	       we don't need to use the lock to tell us where to check</i></td></tr>
<tr><th id="5415">5415</th><td><i>	       in.  It is fishy in the sense that if it is our own lock,</i></td></tr>
<tr><th id="5416">5416</th><td><i>	       we break it.  However, this is the RCS 5.7 behavior (at</i></td></tr>
<tr><th id="5417">5417</th><td><i>	       the end of addbranch in ci.c in RCS 5.7, it calls</i></td></tr>
<tr><th id="5418">5418</th><td><i>	       removelock only if it is our own lock, not someone</i></td></tr>
<tr><th id="5419">5419</th><td><i>	       else's).  */</i></td></tr>
<tr><th id="5420">5420</th><td></td></tr>
<tr><th id="5421">5421</th><td>	    <b>if</b> (!<a class="local col2 ref" href="#462adding_branch" title='adding_branch' data-ref="462adding_branch" data-ref-filename="462adding_branch">adding_branch</a>)</td></tr>
<tr><th id="5422">5422</th><td>	    {</td></tr>
<tr><th id="5423">5423</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: revision %s locked by %s"</q>,</td></tr>
<tr><th id="5424">5424</th><td>		       <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>,</td></tr>
<tr><th id="5425">5425</th><td>		       <a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>, (<em>char</em> *)<a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>);</td></tr>
<tr><th id="5426">5426</th><td>		<a class="local col8 ref" href="#458status" title='status' data-ref="458status" data-ref-filename="458status">status</a> = <var>1</var>;</td></tr>
<tr><th id="5427">5427</th><td>		<b>goto</b> <a class="lbl" href="#470checkin_done" data-ref="470checkin_done" data-ref-filename="470checkin_done">checkin_done</a>;</td></tr>
<tr><th id="5428">5428</th><td>	    }</td></tr>
<tr><th id="5429">5429</th><td>	}</td></tr>
<tr><th id="5430">5430</th><td>	<b>else</b></td></tr>
<tr><th id="5431">5431</th><td>	    <a class="ref fn" href="hash.h.html#delnode" title='delnode' data-ref="delnode" data-ref-filename="delnode">delnode</a> (<a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>);</td></tr>
<tr><th id="5432">5432</th><td>    }</td></tr>
<tr><th id="5433">5433</th><td></td></tr>
<tr><th id="5434">5434</th><td>    <a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::version" title='deltatext::version' data-ref="deltatext::version" data-ref-filename="deltatext..version">version</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="5435">5435</th><td></td></tr>
<tr><th id="5436">5436</th><td>    <i>/* Obtain the change text for the new delta.  If DELTA is to be the</i></td></tr>
<tr><th id="5437">5437</th><td><i>       new head of the tree, then its change text should be the contents</i></td></tr>
<tr><th id="5438">5438</th><td><i>       of the working file, and LEAFNODE's change text should be a diff.</i></td></tr>
<tr><th id="5439">5439</th><td><i>       Else, DELTA's change text should be a diff between LEAFNODE and</i></td></tr>
<tr><th id="5440">5440</th><td><i>       the working file. */</i></td></tr>
<tr><th id="5441">5441</th><td></td></tr>
<tr><th id="5442">5442</th><td>    <a class="local col2 ref" href="#452tmpfile" title='tmpfile' data-ref="452tmpfile" data-ref-filename="452tmpfile">tmpfile</a> = <a class="ref fn" href="cvs.h.html#cvs_temp_name" title='cvs_temp_name' data-ref="cvs_temp_name" data-ref-filename="cvs_temp_name">cvs_temp_name</a>();</td></tr>
<tr><th id="5443">5443</th><td>    <a class="local col8 ref" href="#458status" title='status' data-ref="458status" data-ref-filename="458status">status</a> = <a class="ref fn" href="#RCS_checkout" title='RCS_checkout' data-ref="RCS_checkout" data-ref-filename="RCS_checkout">RCS_checkout</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>,</td></tr>
<tr><th id="5444">5444</th><td>			   ((<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span></td></tr>
<tr><th id="5445">5445</th><td>			     &amp;&amp; <a class="macro" href="#138" title="(*(char *)(rcs-&gt;expand) == *(char *)(&quot;b&quot;) &amp;&amp; strcmp ((rcs-&gt;expand), (&quot;b&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a>, <q>"b"</q>))</td></tr>
<tr><th id="5446">5446</th><td>			    ? <q>"-kb"</q></td></tr>
<tr><th id="5447">5447</th><td>			    : <q>"-ko"</q>),</td></tr>
<tr><th id="5448">5448</th><td>			   <a class="local col2 ref" href="#452tmpfile" title='tmpfile' data-ref="452tmpfile" data-ref-filename="452tmpfile">tmpfile</a>,</td></tr>
<tr><th id="5449">5449</th><td>			   <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="5450">5450</th><td>    <b>if</b> (<a class="local col8 ref" href="#458status" title='status' data-ref="458status" data-ref-filename="458status">status</a> != <var>0</var>)</td></tr>
<tr><th id="5451">5451</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>,</td></tr>
<tr><th id="5452">5452</th><td>	       <q>"could not check out revision %s of `%s'"</q>,</td></tr>
<tr><th id="5453">5453</th><td>	       <a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="5454">5454</th><td></td></tr>
<tr><th id="5455">5455</th><td>    <a class="local col7 ref" href="#457bufsize" title='bufsize' data-ref="457bufsize" data-ref-filename="457bufsize">bufsize</a> = <var>0</var>;</td></tr>
<tr><th id="5456">5456</th><td>    <a class="local col3 ref" href="#453changefile" title='changefile' data-ref="453changefile" data-ref-filename="453changefile">changefile</a> = <a class="ref fn" href="cvs.h.html#cvs_temp_name" title='cvs_temp_name' data-ref="cvs_temp_name" data-ref-filename="cvs_temp_name">cvs_temp_name</a>();</td></tr>
<tr><th id="5457">5457</th><td></td></tr>
<tr><th id="5458">5458</th><td>    <i>/* Diff options should include --binary if the RCS file has -kb set</i></td></tr>
<tr><th id="5459">5459</th><td><i>       in its `expand' field. */</i></td></tr>
<tr><th id="5460">5460</th><td>    <a class="ref fn" href="cvs.h.html#run_add_arg_p" title='run_add_arg_p' data-ref="run_add_arg_p" data-ref-filename="run_add_arg_p">run_add_arg_p</a> (&amp;<a class="local col4 ref" href="#454dargc" title='dargc' data-ref="454dargc" data-ref-filename="454dargc">dargc</a>, &amp;<a class="local col5 ref" href="#455darg_allocated" title='darg_allocated' data-ref="455darg_allocated" data-ref-filename="455darg_allocated">darg_allocated</a>, &amp;<a class="local col6 ref" href="#456dargv" title='dargv' data-ref="456dargv" data-ref-filename="456dargv">dargv</a>, <q>"-a"</q>);</td></tr>
<tr><th id="5461">5461</th><td>    <a class="ref fn" href="cvs.h.html#run_add_arg_p" title='run_add_arg_p' data-ref="run_add_arg_p" data-ref-filename="run_add_arg_p">run_add_arg_p</a> (&amp;<a class="local col4 ref" href="#454dargc" title='dargc' data-ref="454dargc" data-ref-filename="454dargc">dargc</a>, &amp;<a class="local col5 ref" href="#455darg_allocated" title='darg_allocated' data-ref="455darg_allocated" data-ref-filename="455darg_allocated">darg_allocated</a>, &amp;<a class="local col6 ref" href="#456dargv" title='dargv' data-ref="456dargv" data-ref-filename="456dargv">dargv</a>, <q>"-n"</q>);</td></tr>
<tr><th id="5462">5462</th><td>    <b>if</b> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="macro" href="#138" title="(*(char *)(rcs-&gt;expand) == *(char *)(&quot;b&quot;) &amp;&amp; strcmp ((rcs-&gt;expand), (&quot;b&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a>, <q>"b"</q>))</td></tr>
<tr><th id="5463">5463</th><td>	<a class="ref fn" href="cvs.h.html#run_add_arg_p" title='run_add_arg_p' data-ref="run_add_arg_p" data-ref-filename="run_add_arg_p">run_add_arg_p</a> (&amp;<a class="local col4 ref" href="#454dargc" title='dargc' data-ref="454dargc" data-ref-filename="454dargc">dargc</a>, &amp;<a class="local col5 ref" href="#455darg_allocated" title='darg_allocated' data-ref="455darg_allocated" data-ref-filename="455darg_allocated">darg_allocated</a>, &amp;<a class="local col6 ref" href="#456dargv" title='dargv' data-ref="456dargv" data-ref-filename="456dargv">dargv</a>, <q>"--binary"</q>);</td></tr>
<tr><th id="5464">5464</th><td></td></tr>
<tr><th id="5465">5465</th><td>    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(commitpt-&gt;version) == *(char *)(rcs-&gt;head) &amp;&amp; strcmp ((commitpt-&gt;version), (rcs-&gt;head)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>) &amp;&amp;</td></tr>
<tr><th id="5466">5466</th><td>	<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>) == <var>1</var>)</td></tr>
<tr><th id="5467">5467</th><td>    {</td></tr>
<tr><th id="5468">5468</th><td>	<i>/* If this revision is being inserted on the trunk, the change text</i></td></tr>
<tr><th id="5469">5469</th><td><i>	   for the new delta should be the contents of the working file ... */</i></td></tr>
<tr><th id="5470">5470</th><td>	<a class="local col7 ref" href="#457bufsize" title='bufsize' data-ref="457bufsize" data-ref-filename="457bufsize">bufsize</a> = <var>0</var>;</td></tr>
<tr><th id="5471">5471</th><td><u>#<span data-ppcond="5471">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="5472">5472</th><td>	<b>if</b> (preserve_perms &amp;&amp; !S_ISREG (sb.st_mode))</td></tr>
<tr><th id="5473">5473</th><td>	    <i>/* Pretend file is empty.  */</i></td></tr>
<tr><th id="5474">5474</th><td>	    ;</td></tr>
<tr><th id="5475">5475</th><td>	<b>else</b></td></tr>
<tr><th id="5476">5476</th><td><u>#<span data-ppcond="5471">endif</span></u></td></tr>
<tr><th id="5477">5477</th><td>	<a class="ref fn" href="subr.h.html#get_file" title='get_file' data-ref="get_file" data-ref-filename="get_file">get_file</a> (<a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>, <a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>,</td></tr>
<tr><th id="5478">5478</th><td>		  <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="macro" href="#138" title="(*(char *)(rcs-&gt;expand) == *(char *)(&quot;b&quot;) &amp;&amp; strcmp ((rcs-&gt;expand), (&quot;b&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a>, <q>"b"</q>) ? <q>"rb"</q> : <q>"r"</q>,</td></tr>
<tr><th id="5479">5479</th><td>		  &amp;<a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a>, &amp;<a class="local col7 ref" href="#457bufsize" title='bufsize' data-ref="457bufsize" data-ref-filename="457bufsize">bufsize</a>, &amp;<a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::len" title='deltatext::len' data-ref="deltatext::len" data-ref-filename="deltatext..len">len</a>);</td></tr>
<tr><th id="5480">5480</th><td></td></tr>
<tr><th id="5481">5481</th><td>	<i>/* ... and the change text for the old delta should be a diff. */</i></td></tr>
<tr><th id="5482">5482</th><td>	<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<b>sizeof</b> (<a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a>));</td></tr>
<tr><th id="5483">5483</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memset" title='memset' data-ref="memset" data-ref-filename="memset">memset</a> (<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>, <var>0</var>, <b>sizeof</b> (<a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a>));</td></tr>
<tr><th id="5484">5484</th><td></td></tr>
<tr><th id="5485">5485</th><td>	<a class="local col7 ref" href="#457bufsize" title='bufsize' data-ref="457bufsize" data-ref-filename="457bufsize">bufsize</a> = <var>0</var>;</td></tr>
<tr><th id="5486">5486</th><td>	<b>switch</b> (<a class="ref fn" href="cvs.h.html#diff_exec" title='diff_exec' data-ref="diff_exec" data-ref-filename="diff_exec">diff_exec</a> (<a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>, <a class="local col2 ref" href="#452tmpfile" title='tmpfile' data-ref="452tmpfile" data-ref-filename="452tmpfile">tmpfile</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>,</td></tr>
<tr><th id="5487">5487</th><td>			   <a class="local col4 ref" href="#454dargc" title='dargc' data-ref="454dargc" data-ref-filename="454dargc">dargc</a>, <a class="local col6 ref" href="#456dargv" title='dargv' data-ref="456dargv" data-ref-filename="456dargv">dargv</a>, <a class="local col3 ref" href="#453changefile" title='changefile' data-ref="453changefile" data-ref-filename="453changefile">changefile</a>))</td></tr>
<tr><th id="5488">5488</th><td>	{</td></tr>
<tr><th id="5489">5489</th><td>	    <b>case</b> <var>0</var>:</td></tr>
<tr><th id="5490">5490</th><td>	    <b>case</b> <var>1</var>:</td></tr>
<tr><th id="5491">5491</th><td>		<b>break</b>;</td></tr>
<tr><th id="5492">5492</th><td>	    <b>case</b> -<var>1</var>:</td></tr>
<tr><th id="5493">5493</th><td>		<i>/* FIXME-update-dir: message does not include update_dir.  */</i></td></tr>
<tr><th id="5494">5494</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"error diffing %s"</q>, <a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>);</td></tr>
<tr><th id="5495">5495</th><td>		<b>break</b>;</td></tr>
<tr><th id="5496">5496</th><td>	    <b>default</b>:</td></tr>
<tr><th id="5497">5497</th><td>		<i>/* FIXME-update-dir: message does not include update_dir.  */</i></td></tr>
<tr><th id="5498">5498</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"error diffing %s"</q>, <a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>);</td></tr>
<tr><th id="5499">5499</th><td>		<b>break</b>;</td></tr>
<tr><th id="5500">5500</th><td>	}</td></tr>
<tr><th id="5501">5501</th><td></td></tr>
<tr><th id="5502">5502</th><td>	<i>/* OK, the text file case here is really dumb.  Logically</i></td></tr>
<tr><th id="5503">5503</th><td><i>	   speaking we want diff to read the files in text mode,</i></td></tr>
<tr><th id="5504">5504</th><td><i>	   convert them to the canonical form found in RCS files</i></td></tr>
<tr><th id="5505">5505</th><td><i>	   (which, we hope at least, is independent of OS--always</i></td></tr>
<tr><th id="5506">5506</th><td><i>	   bare linefeeds), and then work with change texts in that</i></td></tr>
<tr><th id="5507">5507</th><td><i>	   format.  However, diff_exec both generates change</i></td></tr>
<tr><th id="5508">5508</th><td><i>	   texts and produces output for user purposes (e.g. patch.c),</i></td></tr>
<tr><th id="5509">5509</th><td><i>	   and there is no way to distinguish between the two cases.</i></td></tr>
<tr><th id="5510">5510</th><td><i>	   So we actually implement the text file case by writing the</i></td></tr>
<tr><th id="5511">5511</th><td><i>	   change text as a text file, then reading it as a text file.</i></td></tr>
<tr><th id="5512">5512</th><td><i>	   This should cause no harm, but doesn't strike me as</i></td></tr>
<tr><th id="5513">5513</th><td><i>	   immensely clean.  */</i></td></tr>
<tr><th id="5514">5514</th><td>	<a class="ref fn" href="subr.h.html#get_file" title='get_file' data-ref="get_file" data-ref-filename="get_file">get_file</a> (<a class="local col3 ref" href="#453changefile" title='changefile' data-ref="453changefile" data-ref-filename="453changefile">changefile</a>, <a class="local col3 ref" href="#453changefile" title='changefile' data-ref="453changefile" data-ref-filename="453changefile">changefile</a>,</td></tr>
<tr><th id="5515">5515</th><td>		  <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="macro" href="#138" title="(*(char *)(rcs-&gt;expand) == *(char *)(&quot;b&quot;) &amp;&amp; strcmp ((rcs-&gt;expand), (&quot;b&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a>, <q>"b"</q>) ? <q>"rb"</q> : <q>"r"</q>,</td></tr>
<tr><th id="5516">5516</th><td>		  &amp;<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a>, &amp;<a class="local col7 ref" href="#457bufsize" title='bufsize' data-ref="457bufsize" data-ref-filename="457bufsize">bufsize</a>, &amp;<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::len" title='deltatext::len' data-ref="deltatext::len" data-ref-filename="deltatext..len">len</a>);</td></tr>
<tr><th id="5517">5517</th><td></td></tr>
<tr><th id="5518">5518</th><td>	<i>/* If COMMITPT-&gt;TEXT-&gt;TEXT is NULL, it means that CHANGEFILE</i></td></tr>
<tr><th id="5519">5519</th><td><i>	   was empty and that there are no differences between revisions.</i></td></tr>
<tr><th id="5520">5520</th><td><i>	   In that event, we want to force RCS_rewrite to write an empty</i></td></tr>
<tr><th id="5521">5521</th><td><i>	   string for COMMITPT's change text.  Leaving the change text</i></td></tr>
<tr><th id="5522">5522</th><td><i>	   field set NULL won't work, since that means "preserve the original</i></td></tr>
<tr><th id="5523">5523</th><td><i>	   change text for this delta." */</i></td></tr>
<tr><th id="5524">5524</th><td>	<b>if</b> (<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5525">5525</th><td>	{</td></tr>
<tr><th id="5526">5526</th><td>	    <a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<q>""</q>);</td></tr>
<tr><th id="5527">5527</th><td>	    <a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::len" title='deltatext::len' data-ref="deltatext::len" data-ref-filename="deltatext..len">len</a> = <var>0</var>;</td></tr>
<tr><th id="5528">5528</th><td>	}</td></tr>
<tr><th id="5529">5529</th><td>    }</td></tr>
<tr><th id="5530">5530</th><td>    <b>else</b></td></tr>
<tr><th id="5531">5531</th><td>    {</td></tr>
<tr><th id="5532">5532</th><td>	<i>/* This file is not being inserted at the head, but on a side</i></td></tr>
<tr><th id="5533">5533</th><td><i>	   branch somewhere.  Make a diff from the previous revision</i></td></tr>
<tr><th id="5534">5534</th><td><i>	   to the working file. */</i></td></tr>
<tr><th id="5535">5535</th><td>	<b>switch</b> (<a class="ref fn" href="cvs.h.html#diff_exec" title='diff_exec' data-ref="diff_exec" data-ref-filename="diff_exec">diff_exec</a> (<a class="local col2 ref" href="#452tmpfile" title='tmpfile' data-ref="452tmpfile" data-ref-filename="452tmpfile">tmpfile</a>, <a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>,</td></tr>
<tr><th id="5536">5536</th><td>			   <a class="local col4 ref" href="#454dargc" title='dargc' data-ref="454dargc" data-ref-filename="454dargc">dargc</a>, <a class="local col6 ref" href="#456dargv" title='dargv' data-ref="456dargv" data-ref-filename="456dargv">dargv</a>, <a class="local col3 ref" href="#453changefile" title='changefile' data-ref="453changefile" data-ref-filename="453changefile">changefile</a>))</td></tr>
<tr><th id="5537">5537</th><td>	{</td></tr>
<tr><th id="5538">5538</th><td>	    <b>case</b> <var>0</var>:</td></tr>
<tr><th id="5539">5539</th><td>	    <b>case</b> <var>1</var>:</td></tr>
<tr><th id="5540">5540</th><td>		<b>break</b>;</td></tr>
<tr><th id="5541">5541</th><td>	    <b>case</b> -<var>1</var>:</td></tr>
<tr><th id="5542">5542</th><td>		<i>/* FIXME-update-dir: message does not include update_dir.  */</i></td></tr>
<tr><th id="5543">5543</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"error diffing %s"</q>, <a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>);</td></tr>
<tr><th id="5544">5544</th><td>		<b>break</b>;</td></tr>
<tr><th id="5545">5545</th><td>	    <b>default</b>:</td></tr>
<tr><th id="5546">5546</th><td>		<i>/* FIXME-update-dir: message does not include update_dir.  */</i></td></tr>
<tr><th id="5547">5547</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"error diffing %s"</q>, <a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>);</td></tr>
<tr><th id="5548">5548</th><td>		<b>break</b>;</td></tr>
<tr><th id="5549">5549</th><td>	}</td></tr>
<tr><th id="5550">5550</th><td>	<i>/* See the comment above, at the other get_file invocation,</i></td></tr>
<tr><th id="5551">5551</th><td><i>	   regarding binary vs. text.  */</i></td></tr>
<tr><th id="5552">5552</th><td>	<a class="ref fn" href="subr.h.html#get_file" title='get_file' data-ref="get_file" data-ref-filename="get_file">get_file</a> (<a class="local col3 ref" href="#453changefile" title='changefile' data-ref="453changefile" data-ref-filename="453changefile">changefile</a>, <a class="local col3 ref" href="#453changefile" title='changefile' data-ref="453changefile" data-ref-filename="453changefile">changefile</a>, </td></tr>
<tr><th id="5553">5553</th><td>		  <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="macro" href="#138" title="(*(char *)(rcs-&gt;expand) == *(char *)(&quot;b&quot;) &amp;&amp; strcmp ((rcs-&gt;expand), (&quot;b&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a>, <q>"b"</q>) ? <q>"rb"</q> : <q>"r"</q>,</td></tr>
<tr><th id="5554">5554</th><td>		  &amp;<a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a>, &amp;<a class="local col7 ref" href="#457bufsize" title='bufsize' data-ref="457bufsize" data-ref-filename="457bufsize">bufsize</a>,</td></tr>
<tr><th id="5555">5555</th><td>		  &amp;<a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::len" title='deltatext::len' data-ref="deltatext::len" data-ref-filename="deltatext..len">len</a>);</td></tr>
<tr><th id="5556">5556</th><td>	<b>if</b> (<a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5557">5557</th><td>	{</td></tr>
<tr><th id="5558">5558</th><td>	    <a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<q>""</q>);</td></tr>
<tr><th id="5559">5559</th><td>	    <a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::len" title='deltatext::len' data-ref="deltatext::len" data-ref-filename="deltatext..len">len</a> = <var>0</var>;</td></tr>
<tr><th id="5560">5560</th><td>	}</td></tr>
<tr><th id="5561">5561</th><td>    }</td></tr>
<tr><th id="5562">5562</th><td></td></tr>
<tr><th id="5563">5563</th><td>    <a class="ref fn" href="cvs.h.html#run_arg_free_p" title='run_arg_free_p' data-ref="run_arg_free_p" data-ref-filename="run_arg_free_p">run_arg_free_p</a> (<a class="local col4 ref" href="#454dargc" title='dargc' data-ref="454dargc" data-ref-filename="454dargc">dargc</a>, <a class="local col6 ref" href="#456dargv" title='dargv' data-ref="456dargv" data-ref-filename="456dargv">dargv</a>);</td></tr>
<tr><th id="5564">5564</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col6 ref" href="#456dargv" title='dargv' data-ref="456dargv" data-ref-filename="456dargv">dargv</a>);</td></tr>
<tr><th id="5565">5565</th><td></td></tr>
<tr><th id="5566">5566</th><td>    <i>/* Update DELTA linkage.  It is important not to do this before</i></td></tr>
<tr><th id="5567">5567</th><td><i>       the very end of RCS_checkin; if an error arises that forces</i></td></tr>
<tr><th id="5568">5568</th><td><i>       us to abort checking in, we must not have malformed deltas</i></td></tr>
<tr><th id="5569">5569</th><td><i>       partially linked into the tree.</i></td></tr>
<tr><th id="5570">5570</th><td><i></i></td></tr>
<tr><th id="5571">5571</th><td><i>       If DELTA and COMMITPT are on different branches, do nothing --</i></td></tr>
<tr><th id="5572">5572</th><td><i>       DELTA is linked to the tree through COMMITPT-&gt;BRANCHES, and we</i></td></tr>
<tr><th id="5573">5573</th><td><i>       don't want to change `next' pointers.</i></td></tr>
<tr><th id="5574">5574</th><td><i></i></td></tr>
<tr><th id="5575">5575</th><td><i>       Otherwise, if the nodes are both on the trunk, link DELTA to</i></td></tr>
<tr><th id="5576">5576</th><td><i>       COMMITPT; otherwise, link COMMITPT to DELTA. */</i></td></tr>
<tr><th id="5577">5577</th><td></td></tr>
<tr><th id="5578">5578</th><td>    <b>if</b> (<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>) == <a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>))</td></tr>
<tr><th id="5579">5579</th><td>    {</td></tr>
<tr><th id="5580">5580</th><td>	<b>if</b> (<a class="macro" href="#138" title="(*(char *)(commitpt-&gt;version) == *(char *)(rcs-&gt;head) &amp;&amp; strcmp ((commitpt-&gt;version), (rcs-&gt;head)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>))</td></tr>
<tr><th id="5581">5581</th><td>	{</td></tr>
<tr><th id="5582">5582</th><td>	    <a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a> = <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>;</td></tr>
<tr><th id="5583">5583</th><td>	    <a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="5584">5584</th><td>	}</td></tr>
<tr><th id="5585">5585</th><td>	<b>else</b></td></tr>
<tr><th id="5586">5586</th><td>	    <a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="5587">5587</th><td>    }</td></tr>
<tr><th id="5588">5588</th><td></td></tr>
<tr><th id="5589">5589</th><td>    <i>/* Add DELTA to RCS-&gt;VERSIONS. */</i></td></tr>
<tr><th id="5590">5590</th><td>    <b>if</b> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5591">5591</th><td>	<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a> = <a class="ref fn" href="hash.h.html#getlist" title='getlist' data-ref="getlist" data-ref-filename="getlist">getlist</a>();</td></tr>
<tr><th id="5592">5592</th><td>    <a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a>();</td></tr>
<tr><th id="5593">5593</th><td>    <a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> = <a class="enum" href="hash.h.html#RCSVERS" title='RCSVERS' data-ref="RCSVERS" data-ref-filename="RCSVERS">RCSVERS</a>;</td></tr>
<tr><th id="5594">5594</th><td>    <a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::delproc" title='node::delproc' data-ref="node::delproc" data-ref-filename="node..delproc">delproc</a> = <a class="tu ref fn" href="#rcsvers_delproc" title='rcsvers_delproc' data-use='r' data-ref="rcsvers_delproc" data-ref-filename="rcsvers_delproc">rcsvers_delproc</a>;</td></tr>
<tr><th id="5595">5595</th><td>    <a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>;</td></tr>
<tr><th id="5596">5596</th><td>    <a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>;</td></tr>
<tr><th id="5597">5597</th><td>    (<em>void</em>) <a class="ref fn" href="hash.h.html#addnode" title='addnode' data-ref="addnode" data-ref-filename="addnode">addnode</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col1 ref" href="#451nodep" title='nodep' data-ref="451nodep" data-ref-filename="451nodep">nodep</a>);</td></tr>
<tr><th id="5598">5598</th><td>	</td></tr>
<tr><th id="5599">5599</th><td>    <i>/* Write the new RCS file, inserting the new delta at COMMITPT. */</i></td></tr>
<tr><th id="5600">5600</th><td>    <b>if</b> (!(<a class="local col9 ref" href="#459checkin_quiet" title='checkin_quiet' data-ref="459checkin_quiet" data-ref-filename="459checkin_quiet">checkin_quiet</a> || <a class="ref" href="cvs.h.html#really_quiet" title='really_quiet' data-ref="really_quiet" data-ref-filename="really_quiet">really_quiet</a>))</td></tr>
<tr><th id="5601">5601</th><td>    {</td></tr>
<tr><th id="5602">5602</th><td>	<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"new revision: "</q>, <var>14</var>);</td></tr>
<tr><th id="5603">5603</th><td>	<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <var>0</var>);</td></tr>
<tr><th id="5604">5604</th><td>	<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"; previous revision: "</q>, <var>21</var>);</td></tr>
<tr><th id="5605">5605</th><td>	<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <var>0</var>);</td></tr>
<tr><th id="5606">5606</th><td>	<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"\n"</q>, <var>1</var>);</td></tr>
<tr><th id="5607">5607</th><td>    }</td></tr>
<tr><th id="5608">5608</th><td></td></tr>
<tr><th id="5609">5609</th><td>    <a class="ref fn" href="#RCS_rewrite" title='RCS_rewrite' data-ref="RCS_rewrite" data-ref-filename="RCS_rewrite">RCS_rewrite</a> (<a class="local col1 ref" href="#441rcs" title='rcs' data-ref="441rcs" data-ref-filename="441rcs">rcs</a>, <a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>, <a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="5610">5610</th><td></td></tr>
<tr><th id="5611">5611</th><td>    <b>if</b> ((<a class="local col7 ref" href="#447flags" title='flags' data-ref="447flags" data-ref-filename="447flags">flags</a> &amp; <a class="macro" href="cvs.h.html#441" title="16" data-ref="_M/RCS_FLAGS_KEEPFILE">RCS_FLAGS_KEEPFILE</a>) == <var>0</var>)</td></tr>
<tr><th id="5612">5612</th><td>    {</td></tr>
<tr><th id="5613">5613</th><td>	<b>if</b> (<a class="ref fn" href="cvs.h.html#unlink_file" title='unlink_file' data-ref="unlink_file" data-ref-filename="unlink_file">unlink_file</a> (<a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="5614">5614</th><td>	    <i>/* FIXME-update-dir: message does not include update_dir.  */</i></td></tr>
<tr><th id="5615">5615</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot remove %s"</q>, <a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>);</td></tr>
<tr><th id="5616">5616</th><td>    }</td></tr>
<tr><th id="5617">5617</th><td>    <b>if</b> (<a class="ref fn" href="cvs.h.html#unlink_file" title='unlink_file' data-ref="unlink_file" data-ref-filename="unlink_file">unlink_file</a> (<a class="local col2 ref" href="#452tmpfile" title='tmpfile' data-ref="452tmpfile" data-ref-filename="452tmpfile">tmpfile</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="5618">5618</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot remove %s"</q>, <a class="local col2 ref" href="#452tmpfile" title='tmpfile' data-ref="452tmpfile" data-ref-filename="452tmpfile">tmpfile</a>);</td></tr>
<tr><th id="5619">5619</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#452tmpfile" title='tmpfile' data-ref="452tmpfile" data-ref-filename="452tmpfile">tmpfile</a>);</td></tr>
<tr><th id="5620">5620</th><td>    <b>if</b> (<a class="ref fn" href="cvs.h.html#unlink_file" title='unlink_file' data-ref="unlink_file" data-ref-filename="unlink_file">unlink_file</a> (<a class="local col3 ref" href="#453changefile" title='changefile' data-ref="453changefile" data-ref-filename="453changefile">changefile</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="5621">5621</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot remove %s"</q>, <a class="local col3 ref" href="#453changefile" title='changefile' data-ref="453changefile" data-ref-filename="453changefile">changefile</a>);</td></tr>
<tr><th id="5622">5622</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#453changefile" title='changefile' data-ref="453changefile" data-ref-filename="453changefile">changefile</a>);</td></tr>
<tr><th id="5623">5623</th><td></td></tr>
<tr><th id="5624">5624</th><td> <dfn class="lbl" id="470checkin_done" data-ref="470checkin_done" data-ref-filename="470checkin_done">checkin_done</dfn>:</td></tr>
<tr><th id="5625">5625</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#463workfile" title='workfile' data-ref="463workfile" data-ref-filename="463workfile">workfile</a>);</td></tr>
<tr><th id="5626">5626</th><td></td></tr>
<tr><th id="5627">5627</th><td>    <b>if</b> (<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5628">5628</th><td>    {</td></tr>
<tr><th id="5629">5629</th><td>	<a class="tu ref fn" href="#freedeltatext" title='freedeltatext' data-use='c' data-ref="freedeltatext" data-ref-filename="freedeltatext">freedeltatext</a> (<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>);</td></tr>
<tr><th id="5630">5630</th><td>	<a class="local col9 ref" href="#449commitpt" title='commitpt' data-ref="449commitpt" data-ref-filename="449commitpt">commitpt</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="5631">5631</th><td>    }</td></tr>
<tr><th id="5632">5632</th><td></td></tr>
<tr><th id="5633">5633</th><td>    <a class="tu ref fn" href="#freedeltatext" title='freedeltatext' data-use='c' data-ref="freedeltatext" data-ref-filename="freedeltatext">freedeltatext</a> (<a class="local col0 ref" href="#450dtext" title='dtext' data-ref="450dtext" data-ref-filename="450dtext">dtext</a>);</td></tr>
<tr><th id="5634">5634</th><td>    <b>if</b> (<a class="local col8 ref" href="#458status" title='status' data-ref="458status" data-ref-filename="458status">status</a> != <var>0</var>)</td></tr>
<tr><th id="5635">5635</th><td>    {</td></tr>
<tr><th id="5636">5636</th><td>	<i>/* If delta has not been added to a List, then freeing the Node key</i></td></tr>
<tr><th id="5637">5637</th><td><i>	 * won't free delta-&gt;version.</i></td></tr>
<tr><th id="5638">5638</th><td><i>	 */</i></td></tr>
<tr><th id="5639">5639</th><td>	<b>if</b> (<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>) <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="5640">5640</th><td>	<a class="tu ref fn" href="#free_rcsvers_contents" title='free_rcsvers_contents' data-use='c' data-ref="free_rcsvers_contents" data-ref-filename="free_rcsvers_contents">free_rcsvers_contents</a> (<a class="local col8 ref" href="#448delta" title='delta' data-ref="448delta" data-ref-filename="448delta">delta</a>);</td></tr>
<tr><th id="5641">5641</th><td>    }</td></tr>
<tr><th id="5642">5642</th><td></td></tr>
<tr><th id="5643">5643</th><td>    <b>return</b> <a class="local col8 ref" href="#458status" title='status' data-ref="458status" data-ref-filename="458status">status</a>;</td></tr>
<tr><th id="5644">5644</th><td>}</td></tr>
<tr><th id="5645">5645</th><td></td></tr>
<tr><th id="5646">5646</th><td></td></tr>
<tr><th id="5647">5647</th><td></td></tr>
<tr><th id="5648">5648</th><td><i>/* This structure is passed between RCS_cmp_file and cmp_file_buffer.  */</i></td></tr>
<tr><th id="5649">5649</th><td><b>struct</b> <dfn class="type def" id="cmp_file_data" title='cmp_file_data' data-ref="cmp_file_data" data-ref-filename="cmp_file_data">cmp_file_data</dfn></td></tr>
<tr><th id="5650">5650</th><td>{</td></tr>
<tr><th id="5651">5651</th><td>    <em>const</em> <em>char</em> *<dfn class="tu decl field" id="cmp_file_data::filename" title='cmp_file_data::filename' data-type='const char *' data-ref="cmp_file_data::filename" data-ref-filename="cmp_file_data..filename">filename</dfn>;</td></tr>
<tr><th id="5652">5652</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="tu decl field" id="cmp_file_data::fp" title='cmp_file_data::fp' data-type='FILE *' data-ref="cmp_file_data::fp" data-ref-filename="cmp_file_data..fp">fp</dfn>;</td></tr>
<tr><th id="5653">5653</th><td>    <em>int</em> <dfn class="tu decl field" id="cmp_file_data::different" title='cmp_file_data::different' data-type='int' data-ref="cmp_file_data::different" data-ref-filename="cmp_file_data..different">different</dfn>;</td></tr>
<tr><th id="5654">5654</th><td>};</td></tr>
<tr><th id="5655">5655</th><td></td></tr>
<tr><th id="5656">5656</th><td><i>/* Compare the contents of revision REV1 of RCS file RCS with the</i></td></tr>
<tr><th id="5657">5657</th><td><i>   contents of REV2 if given, otherwise, compare with the contents of</i></td></tr>
<tr><th id="5658">5658</th><td><i>   the file FILENAME.  OPTIONS is a string for the keyword</i></td></tr>
<tr><th id="5659">5659</th><td><i>   expansion options.  Return 0 if the contents of the revision are</i></td></tr>
<tr><th id="5660">5660</th><td><i>   the same as the contents of the file, 1 if they are different.  */</i></td></tr>
<tr><th id="5661">5661</th><td><em>int</em></td></tr>
<tr><th id="5662">5662</th><td><dfn class="decl def fn" id="RCS_cmp_file" title='RCS_cmp_file' data-ref="RCS_cmp_file" data-ref-filename="RCS_cmp_file">RCS_cmp_file</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col7 decl" id="477rcs" title='rcs' data-type='RCSNode *' data-ref="477rcs" data-ref-filename="477rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="478rev1" title='rev1' data-type='const char *' data-ref="478rev1" data-ref-filename="478rev1">rev1</dfn>, <em>char</em> **<dfn class="local col9 decl" id="479rev1_cache" title='rev1_cache' data-type='char **' data-ref="479rev1_cache" data-ref-filename="479rev1_cache">rev1_cache</dfn>,</td></tr>
<tr><th id="5663">5663</th><td>              <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="480rev2" title='rev2' data-type='const char *' data-ref="480rev2" data-ref-filename="480rev2">rev2</dfn>, <em>const</em> <em>char</em> *<dfn class="local col1 decl" id="481options" title='options' data-type='const char *' data-ref="481options" data-ref-filename="481options">options</dfn>, <em>const</em> <em>char</em> *<dfn class="local col2 decl" id="482filename" title='filename' data-type='const char *' data-ref="482filename" data-ref-filename="482filename">filename</dfn>)</td></tr>
<tr><th id="5664">5664</th><td>{</td></tr>
<tr><th id="5665">5665</th><td>    <em>int</em> <dfn class="local col3 decl" id="483binary" title='binary' data-type='int' data-ref="483binary" data-ref-filename="483binary">binary</dfn>;</td></tr>
<tr><th id="5666">5666</th><td></td></tr>
<tr><th id="5667">5667</th><td>    <a class="macro" href="server.h.html#206" title="cvs_trace" data-ref="_M/TRACE">TRACE</a> (<a class="macro" href="server.h.html#217" title="1" data-ref="_M/TRACE_FUNCTION">TRACE_FUNCTION</a>, <q>"RCS_cmp_file( %s, %s, %s, %s, %s )"</q>,</td></tr>
<tr><th id="5668">5668</th><td>           <a class="local col7 ref" href="#477rcs" title='rcs' data-ref="477rcs" data-ref-filename="477rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a> ? <a class="local col7 ref" href="#477rcs" title='rcs' data-ref="477rcs" data-ref-filename="477rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a> : <q>"(null)"</q>,</td></tr>
<tr><th id="5669">5669</th><td>	   <a class="local col8 ref" href="#478rev1" title='rev1' data-ref="478rev1" data-ref-filename="478rev1">rev1</a> ? <a class="local col8 ref" href="#478rev1" title='rev1' data-ref="478rev1" data-ref-filename="478rev1">rev1</a> : <q>"(null)"</q>, <a class="local col0 ref" href="#480rev2" title='rev2' data-ref="480rev2" data-ref-filename="480rev2">rev2</a> ? <a class="local col0 ref" href="#480rev2" title='rev2' data-ref="480rev2" data-ref-filename="480rev2">rev2</a> : <q>"(null)"</q>,</td></tr>
<tr><th id="5670">5670</th><td>	   <a class="local col1 ref" href="#481options" title='options' data-ref="481options" data-ref-filename="481options">options</a> ? <a class="local col1 ref" href="#481options" title='options' data-ref="481options" data-ref-filename="481options">options</a> : <q>"(null)"</q>, <a class="local col2 ref" href="#482filename" title='filename' data-ref="482filename" data-ref-filename="482filename">filename</a> ? <a class="local col2 ref" href="#482filename" title='filename' data-ref="482filename" data-ref-filename="482filename">filename</a> : <q>"(null)"</q>);</td></tr>
<tr><th id="5671">5671</th><td></td></tr>
<tr><th id="5672">5672</th><td>    <b>if</b> (<a class="local col1 ref" href="#481options" title='options' data-ref="481options" data-ref-filename="481options">options</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="local col1 ref" href="#481options" title='options' data-ref="481options" data-ref-filename="481options">options</a>[<var>0</var>] != <kbd>'\0'</kbd>)</td></tr>
<tr><th id="5673">5673</th><td>	<a class="local col3 ref" href="#483binary" title='binary' data-ref="483binary" data-ref-filename="483binary">binary</a> = <a class="macro" href="#138" title="(*(char *)(options) == *(char *)(&quot;-kb&quot;) &amp;&amp; strcmp ((options), (&quot;-kb&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col1 ref" href="#481options" title='options' data-ref="481options" data-ref-filename="481options">options</a>, <q>"-kb"</q>);</td></tr>
<tr><th id="5674">5674</th><td>    <b>else</b></td></tr>
<tr><th id="5675">5675</th><td>    {</td></tr>
<tr><th id="5676">5676</th><td>	<em>char</em> *<dfn class="local col4 decl" id="484expand" title='expand' data-type='char *' data-ref="484expand" data-ref-filename="484expand">expand</dfn>;</td></tr>
<tr><th id="5677">5677</th><td></td></tr>
<tr><th id="5678">5678</th><td>	<a class="local col4 ref" href="#484expand" title='expand' data-ref="484expand" data-ref-filename="484expand">expand</a> = <a class="ref fn" href="#RCS_getexpand" title='RCS_getexpand' data-ref="RCS_getexpand" data-ref-filename="RCS_getexpand">RCS_getexpand</a> (<a class="local col7 ref" href="#477rcs" title='rcs' data-ref="477rcs" data-ref-filename="477rcs">rcs</a>);</td></tr>
<tr><th id="5679">5679</th><td>	<b>if</b> (<a class="local col4 ref" href="#484expand" title='expand' data-ref="484expand" data-ref-filename="484expand">expand</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="macro" href="#138" title="(*(char *)(expand) == *(char *)(&quot;b&quot;) &amp;&amp; strcmp ((expand), (&quot;b&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col4 ref" href="#484expand" title='expand' data-ref="484expand" data-ref-filename="484expand">expand</a>, <q>"b"</q>))</td></tr>
<tr><th id="5680">5680</th><td>	    <a class="local col3 ref" href="#483binary" title='binary' data-ref="483binary" data-ref-filename="483binary">binary</a> = <var>1</var>;</td></tr>
<tr><th id="5681">5681</th><td>	<b>else</b></td></tr>
<tr><th id="5682">5682</th><td>	    <a class="local col3 ref" href="#483binary" title='binary' data-ref="483binary" data-ref-filename="483binary">binary</a> = <var>0</var>;</td></tr>
<tr><th id="5683">5683</th><td>    }</td></tr>
<tr><th id="5684">5684</th><td></td></tr>
<tr><th id="5685">5685</th><td><u>#<span data-ppcond="5685">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="5686">5686</th><td>    <i>/* If CVS is to deal properly with special files (when</i></td></tr>
<tr><th id="5687">5687</th><td><i>       PreservePermissions is on), the best way is to check out the</i></td></tr>
<tr><th id="5688">5688</th><td><i>       revision to a temporary file and call `xcmp' on the two disk</i></td></tr>
<tr><th id="5689">5689</th><td><i>       files.  xcmp needs to handle non-regular files properly anyway,</i></td></tr>
<tr><th id="5690">5690</th><td><i>       so calling it simplifies RCS_cmp_file.  We *could* just yank</i></td></tr>
<tr><th id="5691">5691</th><td><i>       the delta node out of the version tree and look for device</i></td></tr>
<tr><th id="5692">5692</th><td><i>       numbers, but writing to disk and calling xcmp is a better</i></td></tr>
<tr><th id="5693">5693</th><td><i>       abstraction (therefore probably more robust). -twp */</i></td></tr>
<tr><th id="5694">5694</th><td></td></tr>
<tr><th id="5695">5695</th><td>    <b>if</b> (preserve_perms)</td></tr>
<tr><th id="5696">5696</th><td>    {</td></tr>
<tr><th id="5697">5697</th><td>	<em>char</em> *tmp;</td></tr>
<tr><th id="5698">5698</th><td>	<em>int</em> retcode;</td></tr>
<tr><th id="5699">5699</th><td></td></tr>
<tr><th id="5700">5700</th><td>	tmp = cvs_temp_name();</td></tr>
<tr><th id="5701">5701</th><td>	retcode = RCS_checkout(rcs, NULL, rev, NULL, options, tmp, NULL, NULL);</td></tr>
<tr><th id="5702">5702</th><td>	<b>if</b> (retcode != <var>0</var>)</td></tr>
<tr><th id="5703">5703</th><td>	    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="5704">5704</th><td></td></tr>
<tr><th id="5705">5705</th><td>	retcode = xcmp (tmp, filename);</td></tr>
<tr><th id="5706">5706</th><td>	<b>if</b> (CVS_UNLINK (tmp) &lt; <var>0</var>)</td></tr>
<tr><th id="5707">5707</th><td>	    error (<var>0</var>, errno, <q>"cannot remove %s"</q>, tmp);</td></tr>
<tr><th id="5708">5708</th><td>	free (tmp);</td></tr>
<tr><th id="5709">5709</th><td>	<b>return</b> retcode;</td></tr>
<tr><th id="5710">5710</th><td>    }</td></tr>
<tr><th id="5711">5711</th><td>    <b>else</b></td></tr>
<tr><th id="5712">5712</th><td><u>#<span data-ppcond="5685">endif</span></u></td></tr>
<tr><th id="5713">5713</th><td>    {</td></tr>
<tr><th id="5714">5714</th><td>	<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col5 decl" id="485fp" title='fp' data-type='FILE *' data-ref="485fp" data-ref-filename="485fp">fp</dfn>;</td></tr>
<tr><th id="5715">5715</th><td>	<b>struct</b> <a class="type" href="#cmp_file_data" title='cmp_file_data' data-ref="cmp_file_data" data-ref-filename="cmp_file_data">cmp_file_data</a> <dfn class="local col6 decl" id="486data" title='data' data-type='struct cmp_file_data' data-ref="486data" data-ref-filename="486data">data</dfn>;</td></tr>
<tr><th id="5716">5716</th><td>	<em>const</em> <em>char</em> *<dfn class="local col7 decl" id="487use_file1" title='use_file1' data-type='const char *' data-ref="487use_file1" data-ref-filename="487use_file1">use_file1</dfn>;</td></tr>
<tr><th id="5717">5717</th><td>	<em>char</em> *<dfn class="local col8 decl" id="488tmpfile" title='tmpfile' data-type='char *' data-ref="488tmpfile" data-ref-filename="488tmpfile">tmpfile</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="5718">5718</th><td></td></tr>
<tr><th id="5719">5719</th><td>	<b>if</b> (<a class="local col0 ref" href="#480rev2" title='rev2' data-ref="480rev2" data-ref-filename="480rev2">rev2</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5720">5720</th><td>	{</td></tr>
<tr><th id="5721">5721</th><td>	    <i>/* Open &amp; cache rev1 */</i></td></tr>
<tr><th id="5722">5722</th><td>	    <a class="local col8 ref" href="#488tmpfile" title='tmpfile' data-ref="488tmpfile" data-ref-filename="488tmpfile">tmpfile</a> = <a class="ref fn" href="cvs.h.html#cvs_temp_name" title='cvs_temp_name' data-ref="cvs_temp_name" data-ref-filename="cvs_temp_name">cvs_temp_name</a>();</td></tr>
<tr><th id="5723">5723</th><td>	    <b>if</b> (<a class="ref fn" href="#RCS_checkout" title='RCS_checkout' data-ref="RCS_checkout" data-ref-filename="RCS_checkout">RCS_checkout</a> (<a class="local col7 ref" href="#477rcs" title='rcs' data-ref="477rcs" data-ref-filename="477rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <a class="local col8 ref" href="#478rev1" title='rev1' data-ref="478rev1" data-ref-filename="478rev1">rev1</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <a class="local col1 ref" href="#481options" title='options' data-ref="481options" data-ref-filename="481options">options</a>, <a class="local col8 ref" href="#488tmpfile" title='tmpfile' data-ref="488tmpfile" data-ref-filename="488tmpfile">tmpfile</a>,</td></tr>
<tr><th id="5724">5724</th><td>	                      <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>))</td></tr>
<tr><th id="5725">5725</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>,</td></tr>
<tr><th id="5726">5726</th><td>		       <q>"cannot check out revision %s of %s"</q>,</td></tr>
<tr><th id="5727">5727</th><td>		       <a class="local col8 ref" href="#478rev1" title='rev1' data-ref="478rev1" data-ref-filename="478rev1">rev1</a>, <a class="local col7 ref" href="#477rcs" title='rcs' data-ref="477rcs" data-ref-filename="477rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="5728">5728</th><td>	    <a class="local col7 ref" href="#487use_file1" title='use_file1' data-ref="487use_file1" data-ref-filename="487use_file1">use_file1</a> = <a class="local col8 ref" href="#488tmpfile" title='tmpfile' data-ref="488tmpfile" data-ref-filename="488tmpfile">tmpfile</a>;</td></tr>
<tr><th id="5729">5729</th><td>	    <b>if</b> (<a class="local col9 ref" href="#479rev1_cache" title='rev1_cache' data-ref="479rev1_cache" data-ref-filename="479rev1_cache">rev1_cache</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5730">5730</th><td>		*<a class="local col9 ref" href="#479rev1_cache" title='rev1_cache' data-ref="479rev1_cache" data-ref-filename="479rev1_cache">rev1_cache</a> = <a class="local col8 ref" href="#488tmpfile" title='tmpfile' data-ref="488tmpfile" data-ref-filename="488tmpfile">tmpfile</a>;</td></tr>
<tr><th id="5731">5731</th><td>	}</td></tr>
<tr><th id="5732">5732</th><td>	<b>else</b></td></tr>
<tr><th id="5733">5733</th><td>	    <a class="local col7 ref" href="#487use_file1" title='use_file1' data-ref="487use_file1" data-ref-filename="487use_file1">use_file1</a> = <a class="local col2 ref" href="#482filename" title='filename' data-ref="482filename" data-ref-filename="482filename">filename</a>;</td></tr>
<tr><th id="5734">5734</th><td></td></tr>
<tr><th id="5735">5735</th><td>        <a class="local col5 ref" href="#485fp" title='fp' data-ref="485fp" data-ref-filename="485fp">fp</a> = <a class="macro" href="../lib/system.h.html#224" title="fopen" data-ref="_M/CVS_FOPEN">CVS_FOPEN</a> (<a class="local col7 ref" href="#487use_file1" title='use_file1' data-ref="487use_file1" data-ref-filename="487use_file1">use_file1</a>, <a class="local col3 ref" href="#483binary" title='binary' data-ref="483binary" data-ref-filename="483binary">binary</a> ? <a class="macro" href="../lib/system.h.html#337" title="(&quot;rb&quot;)" data-ref="_M/FOPEN_BINARY_READ">FOPEN_BINARY_READ</a> : <q>"r"</q>);</td></tr>
<tr><th id="5736">5736</th><td>	<b>if</b> (<a class="local col5 ref" href="#485fp" title='fp' data-ref="485fp" data-ref-filename="485fp">fp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5737">5737</th><td>	    <i>/* FIXME-update-dir: should include update_dir in message.  */</i></td></tr>
<tr><th id="5738">5738</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot open file %s for comparing"</q>, <a class="local col7 ref" href="#487use_file1" title='use_file1' data-ref="487use_file1" data-ref-filename="487use_file1">use_file1</a>);</td></tr>
<tr><th id="5739">5739</th><td>	</td></tr>
<tr><th id="5740">5740</th><td>        <a class="local col6 ref" href="#486data" title='data' data-ref="486data" data-ref-filename="486data">data</a>.<a class="tu ref field" href="#cmp_file_data::filename" title='cmp_file_data::filename' data-use='w' data-ref="cmp_file_data::filename" data-ref-filename="cmp_file_data..filename">filename</a> = <a class="local col7 ref" href="#487use_file1" title='use_file1' data-ref="487use_file1" data-ref-filename="487use_file1">use_file1</a>;</td></tr>
<tr><th id="5741">5741</th><td>        <a class="local col6 ref" href="#486data" title='data' data-ref="486data" data-ref-filename="486data">data</a>.<a class="tu ref field" href="#cmp_file_data::fp" title='cmp_file_data::fp' data-use='w' data-ref="cmp_file_data::fp" data-ref-filename="cmp_file_data..fp">fp</a> = <a class="local col5 ref" href="#485fp" title='fp' data-ref="485fp" data-ref-filename="485fp">fp</a>;</td></tr>
<tr><th id="5742">5742</th><td>        <a class="local col6 ref" href="#486data" title='data' data-ref="486data" data-ref-filename="486data">data</a>.<a class="tu ref field" href="#cmp_file_data::different" title='cmp_file_data::different' data-use='w' data-ref="cmp_file_data::different" data-ref-filename="cmp_file_data..different">different</a> = <var>0</var>;</td></tr>
<tr><th id="5743">5743</th><td>	</td></tr>
<tr><th id="5744">5744</th><td>        <b>if</b> (<a class="ref fn" href="#RCS_checkout" title='RCS_checkout' data-ref="RCS_checkout" data-ref-filename="RCS_checkout">RCS_checkout</a> (<a class="local col7 ref" href="#477rcs" title='rcs' data-ref="477rcs" data-ref-filename="477rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <a class="local col0 ref" href="#480rev2" title='rev2' data-ref="480rev2" data-ref-filename="480rev2">rev2</a> ? <a class="local col0 ref" href="#480rev2" title='rev2' data-ref="480rev2" data-ref-filename="480rev2">rev2</a> : <a class="local col8 ref" href="#478rev1" title='rev1' data-ref="478rev1" data-ref-filename="478rev1">rev1</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <a class="local col1 ref" href="#481options" title='options' data-ref="481options" data-ref-filename="481options">options</a>,</td></tr>
<tr><th id="5745">5745</th><td>                          <a class="macro" href="cvs.h.html#705" title="(char *)0" data-ref="_M/RUN_TTY">RUN_TTY</a>, <a class="tu ref fn" href="#cmp_file_buffer" title='cmp_file_buffer' data-use='r' data-ref="cmp_file_buffer" data-ref-filename="cmp_file_buffer">cmp_file_buffer</a>, &amp;<a class="local col6 ref" href="#486data" title='data' data-ref="486data" data-ref-filename="486data">data</a> ))</td></tr>
<tr><th id="5746">5746</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>,</td></tr>
<tr><th id="5747">5747</th><td>		       <q>"cannot check out revision %s of %s"</q>,</td></tr>
<tr><th id="5748">5748</th><td>		       <a class="local col0 ref" href="#480rev2" title='rev2' data-ref="480rev2" data-ref-filename="480rev2">rev2</a> ? <a class="local col0 ref" href="#480rev2" title='rev2' data-ref="480rev2" data-ref-filename="480rev2">rev2</a> : <a class="local col8 ref" href="#478rev1" title='rev1' data-ref="478rev1" data-ref-filename="478rev1">rev1</a>, <a class="local col7 ref" href="#477rcs" title='rcs' data-ref="477rcs" data-ref-filename="477rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="5749">5749</th><td></td></tr>
<tr><th id="5750">5750</th><td>        <i>/* If we have not yet found a difference, make sure that we are at</i></td></tr>
<tr><th id="5751">5751</th><td><i>           the end of the file.  */</i></td></tr>
<tr><th id="5752">5752</th><td>        <b>if</b> (!<a class="local col6 ref" href="#486data" title='data' data-ref="486data" data-ref-filename="486data">data</a>.<a class="tu ref field" href="#cmp_file_data::different" title='cmp_file_data::different' data-use='r' data-ref="cmp_file_data::different" data-ref-filename="cmp_file_data..different">different</a>)</td></tr>
<tr><th id="5753">5753</th><td>        {</td></tr>
<tr><th id="5754">5754</th><td>	    <b>if</b> (<a class="macro" href="../lib/unlocked-io.h.html#102" title="(--(fp)-&gt;_r &lt; 0 ? __srget(fp) : (int)(*(fp)-&gt;_p++))" data-ref="_M/getc">getc</a> (<a class="local col5 ref" href="#485fp" title='fp' data-ref="485fp" data-ref-filename="485fp">fp</a>) != <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#183" title="(-1)" data-ref="_M/EOF">EOF</a>)</td></tr>
<tr><th id="5755">5755</th><td>		<a class="local col6 ref" href="#486data" title='data' data-ref="486data" data-ref-filename="486data">data</a>.<a class="tu ref field" href="#cmp_file_data::different" title='cmp_file_data::different' data-use='w' data-ref="cmp_file_data::different" data-ref-filename="cmp_file_data..different">different</a> = <var>1</var>;</td></tr>
<tr><th id="5756">5756</th><td>        }</td></tr>
<tr><th id="5757">5757</th><td>	</td></tr>
<tr><th id="5758">5758</th><td>        <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fclose" title='fclose' data-ref="fclose" data-ref-filename="fclose">fclose</a> (<a class="local col5 ref" href="#485fp" title='fp' data-ref="485fp" data-ref-filename="485fp">fp</a>);</td></tr>
<tr><th id="5759">5759</th><td>	<b>if</b> (<a class="local col9 ref" href="#479rev1_cache" title='rev1_cache' data-ref="479rev1_cache" data-ref-filename="479rev1_cache">rev1_cache</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="local col8 ref" href="#488tmpfile" title='tmpfile' data-ref="488tmpfile" data-ref-filename="488tmpfile">tmpfile</a>)</td></tr>
<tr><th id="5760">5760</th><td>	{</td></tr>
<tr><th id="5761">5761</th><td>	    <b>if</b> (<a class="macro" href="../lib/system.h.html#260" title="unlink" data-ref="_M/CVS_UNLINK">CVS_UNLINK</a> (<a class="local col8 ref" href="#488tmpfile" title='tmpfile' data-ref="488tmpfile" data-ref-filename="488tmpfile">tmpfile</a> ) &lt; <var>0</var>)</td></tr>
<tr><th id="5762">5762</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot remove %s"</q>, <a class="local col8 ref" href="#488tmpfile" title='tmpfile' data-ref="488tmpfile" data-ref-filename="488tmpfile">tmpfile</a>);</td></tr>
<tr><th id="5763">5763</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#488tmpfile" title='tmpfile' data-ref="488tmpfile" data-ref-filename="488tmpfile">tmpfile</a>);</td></tr>
<tr><th id="5764">5764</th><td>	}</td></tr>
<tr><th id="5765">5765</th><td></td></tr>
<tr><th id="5766">5766</th><td>        <b>return</b> <a class="local col6 ref" href="#486data" title='data' data-ref="486data" data-ref-filename="486data">data</a>.<a class="tu ref field" href="#cmp_file_data::different" title='cmp_file_data::different' data-use='r' data-ref="cmp_file_data::different" data-ref-filename="cmp_file_data..different">different</a>;</td></tr>
<tr><th id="5767">5767</th><td>    }</td></tr>
<tr><th id="5768">5768</th><td>}</td></tr>
<tr><th id="5769">5769</th><td></td></tr>
<tr><th id="5770">5770</th><td></td></tr>
<tr><th id="5771">5771</th><td></td></tr>
<tr><th id="5772">5772</th><td><i>/* This is a subroutine of RCS_cmp_file.  It is passed to</i></td></tr>
<tr><th id="5773">5773</th><td><i>   RCS_checkout.  */</i></td></tr>
<tr><th id="5774">5774</th><td><u>#define <dfn class="macro" id="_M/CMP_BUF_SIZE" data-ref="_M/CMP_BUF_SIZE">CMP_BUF_SIZE</dfn> (8 * 1024)</u></td></tr>
<tr><th id="5775">5775</th><td></td></tr>
<tr><th id="5776">5776</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="5777">5777</th><td><dfn class="tu decl def fn" id="cmp_file_buffer" title='cmp_file_buffer' data-type='void cmp_file_buffer(void * callerdat, const char * buffer, size_t len)' data-ref="cmp_file_buffer" data-ref-filename="cmp_file_buffer">cmp_file_buffer</dfn> (<em>void</em> *<dfn class="local col9 decl" id="489callerdat" title='callerdat' data-type='void *' data-ref="489callerdat" data-ref-filename="489callerdat">callerdat</dfn>, <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="490buffer" title='buffer' data-type='const char *' data-ref="490buffer" data-ref-filename="490buffer">buffer</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col1 decl" id="491len" title='len' data-type='size_t' data-ref="491len" data-ref-filename="491len">len</dfn>)</td></tr>
<tr><th id="5778">5778</th><td>{</td></tr>
<tr><th id="5779">5779</th><td>    <b>struct</b> <a class="type" href="#cmp_file_data" title='cmp_file_data' data-ref="cmp_file_data" data-ref-filename="cmp_file_data">cmp_file_data</a> *<dfn class="local col2 decl" id="492data" title='data' data-type='struct cmp_file_data *' data-ref="492data" data-ref-filename="492data">data</dfn> = <a class="local col9 ref" href="#489callerdat" title='callerdat' data-ref="489callerdat" data-ref-filename="489callerdat">callerdat</a>;</td></tr>
<tr><th id="5780">5780</th><td>    <em>char</em> *<dfn class="local col3 decl" id="493filebuf" title='filebuf' data-type='char *' data-ref="493filebuf" data-ref-filename="493filebuf">filebuf</dfn>;</td></tr>
<tr><th id="5781">5781</th><td></td></tr>
<tr><th id="5782">5782</th><td>    <i>/* If we've already found a difference, we don't need to check</i></td></tr>
<tr><th id="5783">5783</th><td><i>       further.  */</i></td></tr>
<tr><th id="5784">5784</th><td>    <b>if</b> (<a class="local col2 ref" href="#492data" title='data' data-ref="492data" data-ref-filename="492data">data</a>-&gt;<a class="tu ref field" href="#cmp_file_data::different" title='cmp_file_data::different' data-use='r' data-ref="cmp_file_data::different" data-ref-filename="cmp_file_data..different">different</a>)</td></tr>
<tr><th id="5785">5785</th><td>	<b>return</b>;</td></tr>
<tr><th id="5786">5786</th><td></td></tr>
<tr><th id="5787">5787</th><td>    <a class="local col3 ref" href="#493filebuf" title='filebuf' data-ref="493filebuf" data-ref-filename="493filebuf">filebuf</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="local col1 ref" href="#491len" title='len' data-ref="491len" data-ref-filename="491len">len</a> &gt; <a class="macro" href="#5774" title="(8 * 1024)" data-ref="_M/CMP_BUF_SIZE">CMP_BUF_SIZE</a> ? <a class="macro" href="#5774" title="(8 * 1024)" data-ref="_M/CMP_BUF_SIZE">CMP_BUF_SIZE</a> : <a class="local col1 ref" href="#491len" title='len' data-ref="491len" data-ref-filename="491len">len</a>);</td></tr>
<tr><th id="5788">5788</th><td></td></tr>
<tr><th id="5789">5789</th><td>    <b>while</b> (<a class="local col1 ref" href="#491len" title='len' data-ref="491len" data-ref-filename="491len">len</a> &gt; <var>0</var>)</td></tr>
<tr><th id="5790">5790</th><td>    {</td></tr>
<tr><th id="5791">5791</th><td>	<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col4 decl" id="494checklen" title='checklen' data-type='size_t' data-ref="494checklen" data-ref-filename="494checklen">checklen</dfn>;</td></tr>
<tr><th id="5792">5792</th><td></td></tr>
<tr><th id="5793">5793</th><td>	<a class="local col4 ref" href="#494checklen" title='checklen' data-ref="494checklen" data-ref-filename="494checklen">checklen</a> = <a class="local col1 ref" href="#491len" title='len' data-ref="491len" data-ref-filename="491len">len</a> &gt; <a class="macro" href="#5774" title="(8 * 1024)" data-ref="_M/CMP_BUF_SIZE">CMP_BUF_SIZE</a> ? <a class="macro" href="#5774" title="(8 * 1024)" data-ref="_M/CMP_BUF_SIZE">CMP_BUF_SIZE</a> : <a class="local col1 ref" href="#491len" title='len' data-ref="491len" data-ref-filename="491len">len</a>;</td></tr>
<tr><th id="5794">5794</th><td>	<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fread" title='fread' data-ref="fread" data-ref-filename="fread">fread</a> (<a class="local col3 ref" href="#493filebuf" title='filebuf' data-ref="493filebuf" data-ref-filename="493filebuf">filebuf</a>, <var>1</var>, <a class="local col4 ref" href="#494checklen" title='checklen' data-ref="494checklen" data-ref-filename="494checklen">checklen</a>, <a class="local col2 ref" href="#492data" title='data' data-ref="492data" data-ref-filename="492data">data</a>-&gt;<a class="tu ref field" href="#cmp_file_data::fp" title='cmp_file_data::fp' data-use='r' data-ref="cmp_file_data::fp" data-ref-filename="cmp_file_data..fp">fp</a>) != <a class="local col4 ref" href="#494checklen" title='checklen' data-ref="494checklen" data-ref-filename="494checklen">checklen</a>)</td></tr>
<tr><th id="5795">5795</th><td>	{</td></tr>
<tr><th id="5796">5796</th><td>	    <b>if</b> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#493" title="(((data-&gt;fp)-&gt;_flags &amp; 0x0040) != 0)" data-ref="_M/ferror">ferror</a> (<a class="local col2 ref" href="#492data" title='data' data-ref="492data" data-ref-filename="492data">data</a>-&gt;<a class="tu ref field" href="#cmp_file_data::fp" title='cmp_file_data::fp' data-use='r' data-ref="cmp_file_data::fp" data-ref-filename="cmp_file_data..fp">fp</a>))</td></tr>
<tr><th id="5797">5797</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot read file %s for comparing"</q>,</td></tr>
<tr><th id="5798">5798</th><td>		       <a class="local col2 ref" href="#492data" title='data' data-ref="492data" data-ref-filename="492data">data</a>-&gt;<a class="tu ref field" href="#cmp_file_data::filename" title='cmp_file_data::filename' data-use='r' data-ref="cmp_file_data::filename" data-ref-filename="cmp_file_data..filename">filename</a>);</td></tr>
<tr><th id="5799">5799</th><td>	    <a class="local col2 ref" href="#492data" title='data' data-ref="492data" data-ref-filename="492data">data</a>-&gt;<a class="tu ref field" href="#cmp_file_data::different" title='cmp_file_data::different' data-use='w' data-ref="cmp_file_data::different" data-ref-filename="cmp_file_data..different">different</a> = <var>1</var>;</td></tr>
<tr><th id="5800">5800</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#493filebuf" title='filebuf' data-ref="493filebuf" data-ref-filename="493filebuf">filebuf</a>);</td></tr>
<tr><th id="5801">5801</th><td>	    <b>return</b>;</td></tr>
<tr><th id="5802">5802</th><td>	}</td></tr>
<tr><th id="5803">5803</th><td></td></tr>
<tr><th id="5804">5804</th><td>	<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcmp" title='memcmp' data-ref="memcmp" data-ref-filename="memcmp">memcmp</a> (<a class="local col3 ref" href="#493filebuf" title='filebuf' data-ref="493filebuf" data-ref-filename="493filebuf">filebuf</a>, <a class="local col0 ref" href="#490buffer" title='buffer' data-ref="490buffer" data-ref-filename="490buffer">buffer</a>, <a class="local col4 ref" href="#494checklen" title='checklen' data-ref="494checklen" data-ref-filename="494checklen">checklen</a>) != <var>0</var>)</td></tr>
<tr><th id="5805">5805</th><td>	{</td></tr>
<tr><th id="5806">5806</th><td>	    <a class="local col2 ref" href="#492data" title='data' data-ref="492data" data-ref-filename="492data">data</a>-&gt;<a class="tu ref field" href="#cmp_file_data::different" title='cmp_file_data::different' data-use='w' data-ref="cmp_file_data::different" data-ref-filename="cmp_file_data..different">different</a> = <var>1</var>;</td></tr>
<tr><th id="5807">5807</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#493filebuf" title='filebuf' data-ref="493filebuf" data-ref-filename="493filebuf">filebuf</a>);</td></tr>
<tr><th id="5808">5808</th><td>	    <b>return</b>;</td></tr>
<tr><th id="5809">5809</th><td>	}</td></tr>
<tr><th id="5810">5810</th><td></td></tr>
<tr><th id="5811">5811</th><td>	<a class="local col0 ref" href="#490buffer" title='buffer' data-ref="490buffer" data-ref-filename="490buffer">buffer</a> += <a class="local col4 ref" href="#494checklen" title='checklen' data-ref="494checklen" data-ref-filename="494checklen">checklen</a>;</td></tr>
<tr><th id="5812">5812</th><td>	<a class="local col1 ref" href="#491len" title='len' data-ref="491len" data-ref-filename="491len">len</a> -= <a class="local col4 ref" href="#494checklen" title='checklen' data-ref="494checklen" data-ref-filename="494checklen">checklen</a>;</td></tr>
<tr><th id="5813">5813</th><td>    }</td></tr>
<tr><th id="5814">5814</th><td></td></tr>
<tr><th id="5815">5815</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#493filebuf" title='filebuf' data-ref="493filebuf" data-ref-filename="493filebuf">filebuf</a>);</td></tr>
<tr><th id="5816">5816</th><td>}</td></tr>
<tr><th id="5817">5817</th><td></td></tr>
<tr><th id="5818">5818</th><td></td></tr>
<tr><th id="5819">5819</th><td></td></tr>
<tr><th id="5820">5820</th><td><i>/* For RCS file RCS, make symbolic tag TAG point to revision REV.</i></td></tr>
<tr><th id="5821">5821</th><td><i>   This validates that TAG is OK for a user to use.  Return value is</i></td></tr>
<tr><th id="5822">5822</th><td><i>   -1 for error (and errno is set to indicate the error), positive for</i></td></tr>
<tr><th id="5823">5823</th><td><i>   error (and an error message has been printed), or zero for success.  */</i></td></tr>
<tr><th id="5824">5824</th><td><em>int</em></td></tr>
<tr><th id="5825">5825</th><td><dfn class="decl def fn" id="RCS_settag" title='RCS_settag' data-ref="RCS_settag" data-ref-filename="RCS_settag">RCS_settag</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col5 decl" id="495rcs" title='rcs' data-type='RCSNode *' data-ref="495rcs" data-ref-filename="495rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col6 decl" id="496tag" title='tag' data-type='const char *' data-ref="496tag" data-ref-filename="496tag">tag</dfn>, <em>const</em> <em>char</em> *<dfn class="local col7 decl" id="497rev" title='rev' data-type='const char *' data-ref="497rev" data-ref-filename="497rev">rev</dfn>)</td></tr>
<tr><th id="5826">5826</th><td>{</td></tr>
<tr><th id="5827">5827</th><td>    <a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> *<dfn class="local col8 decl" id="498symbols" title='symbols' data-type='List *' data-ref="498symbols" data-ref-filename="498symbols">symbols</dfn>;</td></tr>
<tr><th id="5828">5828</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col9 decl" id="499node" title='node' data-type='Node *' data-ref="499node" data-ref-filename="499node">node</dfn>;</td></tr>
<tr><th id="5829">5829</th><td></td></tr>
<tr><th id="5830">5830</th><td>    <b>if</b> (<a class="local col5 ref" href="#495rcs" title='rcs' data-ref="495rcs" data-ref-filename="495rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="5831">5831</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col5 ref" href="#495rcs" title='rcs' data-ref="495rcs" data-ref-filename="495rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="5832">5832</th><td></td></tr>
<tr><th id="5833">5833</th><td>    <i>/* FIXME: This check should be moved to RCS_check_tag.  There is no</i></td></tr>
<tr><th id="5834">5834</th><td><i>       reason for it to be here.  */</i></td></tr>
<tr><th id="5835">5835</th><td>    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(tag) == *(char *)(&quot;BASE&quot;) &amp;&amp; strcmp ((tag), (&quot;BASE&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col6 ref" href="#496tag" title='tag' data-ref="496tag" data-ref-filename="496tag">tag</a>, <a class="macro" href="cvs.h.html#259" title="&quot;BASE&quot;" data-ref="_M/TAG_BASE">TAG_BASE</a>)</td></tr>
<tr><th id="5836">5836</th><td>	|| <a class="macro" href="#138" title="(*(char *)(tag) == *(char *)(&quot;HEAD&quot;) &amp;&amp; strcmp ((tag), (&quot;HEAD&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col6 ref" href="#496tag" title='tag' data-ref="496tag" data-ref-filename="496tag">tag</a>, <a class="macro" href="cvs.h.html#258" title="&quot;HEAD&quot;" data-ref="_M/TAG_HEAD">TAG_HEAD</a>))</td></tr>
<tr><th id="5837">5837</th><td>    {</td></tr>
<tr><th id="5838">5838</th><td>	<i>/* Print the name of the tag might be considered redundant</i></td></tr>
<tr><th id="5839">5839</th><td><i>	   with the caller, which also prints it.  Perhaps this helps</i></td></tr>
<tr><th id="5840">5840</th><td><i>	   clarify why the tag name is considered reserved, I don't</i></td></tr>
<tr><th id="5841">5841</th><td><i>	   know.  */</i></td></tr>
<tr><th id="5842">5842</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"Attempt to add reserved tag name %s"</q>, <a class="local col6 ref" href="#496tag" title='tag' data-ref="496tag" data-ref-filename="496tag">tag</a>);</td></tr>
<tr><th id="5843">5843</th><td>	<b>return</b> <var>1</var>;</td></tr>
<tr><th id="5844">5844</th><td>    }</td></tr>
<tr><th id="5845">5845</th><td></td></tr>
<tr><th id="5846">5846</th><td>    <i>/* A revision number of NULL means use the head or default branch.</i></td></tr>
<tr><th id="5847">5847</th><td><i>       If rev is not NULL, it may be a symbolic tag or branch number;</i></td></tr>
<tr><th id="5848">5848</th><td><i>       expand it to the correct numeric revision or branch head. */</i></td></tr>
<tr><th id="5849">5849</th><td>    <b>if</b> (<a class="local col7 ref" href="#497rev" title='rev' data-ref="497rev" data-ref-filename="497rev">rev</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5850">5850</th><td>	<a class="local col7 ref" href="#497rev" title='rev' data-ref="497rev" data-ref-filename="497rev">rev</a> = <a class="local col5 ref" href="#495rcs" title='rcs' data-ref="495rcs" data-ref-filename="495rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a> ? <a class="local col5 ref" href="#495rcs" title='rcs' data-ref="495rcs" data-ref-filename="495rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a> : <a class="local col5 ref" href="#495rcs" title='rcs' data-ref="495rcs" data-ref-filename="495rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>;</td></tr>
<tr><th id="5851">5851</th><td></td></tr>
<tr><th id="5852">5852</th><td>    <i>/* At this point rcs-&gt;symbol_data may not have been parsed.</i></td></tr>
<tr><th id="5853">5853</th><td><i>       Calling RCS_symbols will force it to be parsed into a list</i></td></tr>
<tr><th id="5854">5854</th><td><i>       which we can easily manipulate.  */</i></td></tr>
<tr><th id="5855">5855</th><td>    <a class="local col8 ref" href="#498symbols" title='symbols' data-ref="498symbols" data-ref-filename="498symbols">symbols</a> = <a class="ref fn" href="#RCS_symbols" title='RCS_symbols' data-ref="RCS_symbols" data-ref-filename="RCS_symbols">RCS_symbols</a> (<a class="local col5 ref" href="#495rcs" title='rcs' data-ref="495rcs" data-ref-filename="495rcs">rcs</a>);</td></tr>
<tr><th id="5856">5856</th><td>    <b>if</b> (<a class="local col8 ref" href="#498symbols" title='symbols' data-ref="498symbols" data-ref-filename="498symbols">symbols</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5857">5857</th><td>    {</td></tr>
<tr><th id="5858">5858</th><td>	<a class="local col8 ref" href="#498symbols" title='symbols' data-ref="498symbols" data-ref-filename="498symbols">symbols</a> = <a class="ref fn" href="hash.h.html#getlist" title='getlist' data-ref="getlist" data-ref-filename="getlist">getlist</a> ();</td></tr>
<tr><th id="5859">5859</th><td>	<a class="local col5 ref" href="#495rcs" title='rcs' data-ref="495rcs" data-ref-filename="495rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols" title='rcsnode::symbols' data-ref="rcsnode::symbols" data-ref-filename="rcsnode..symbols">symbols</a> = <a class="local col8 ref" href="#498symbols" title='symbols' data-ref="498symbols" data-ref-filename="498symbols">symbols</a>;</td></tr>
<tr><th id="5860">5860</th><td>    }</td></tr>
<tr><th id="5861">5861</th><td>    <a class="local col9 ref" href="#499node" title='node' data-ref="499node" data-ref-filename="499node">node</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col8 ref" href="#498symbols" title='symbols' data-ref="498symbols" data-ref-filename="498symbols">symbols</a>, <a class="local col6 ref" href="#496tag" title='tag' data-ref="496tag" data-ref-filename="496tag">tag</a>);</td></tr>
<tr><th id="5862">5862</th><td>    <b>if</b> (<a class="local col9 ref" href="#499node" title='node' data-ref="499node" data-ref-filename="499node">node</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5863">5863</th><td>    {</td></tr>
<tr><th id="5864">5864</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col9 ref" href="#499node" title='node' data-ref="499node" data-ref-filename="499node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>);</td></tr>
<tr><th id="5865">5865</th><td>	<a class="local col9 ref" href="#499node" title='node' data-ref="499node" data-ref-filename="499node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col7 ref" href="#497rev" title='rev' data-ref="497rev" data-ref-filename="497rev">rev</a>);</td></tr>
<tr><th id="5866">5866</th><td>    }</td></tr>
<tr><th id="5867">5867</th><td>    <b>else</b></td></tr>
<tr><th id="5868">5868</th><td>    {</td></tr>
<tr><th id="5869">5869</th><td>	<a class="local col9 ref" href="#499node" title='node' data-ref="499node" data-ref-filename="499node">node</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a> ();</td></tr>
<tr><th id="5870">5870</th><td>	<a class="local col9 ref" href="#499node" title='node' data-ref="499node" data-ref-filename="499node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col6 ref" href="#496tag" title='tag' data-ref="496tag" data-ref-filename="496tag">tag</a>);</td></tr>
<tr><th id="5871">5871</th><td>	<a class="local col9 ref" href="#499node" title='node' data-ref="499node" data-ref-filename="499node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col7 ref" href="#497rev" title='rev' data-ref="497rev" data-ref-filename="497rev">rev</a>);</td></tr>
<tr><th id="5872">5872</th><td>	(<em>void</em>)<a class="ref fn" href="hash.h.html#addnode_at_front" title='addnode_at_front' data-ref="addnode_at_front" data-ref-filename="addnode_at_front">addnode_at_front</a> (<a class="local col8 ref" href="#498symbols" title='symbols' data-ref="498symbols" data-ref-filename="498symbols">symbols</a>, <a class="local col9 ref" href="#499node" title='node' data-ref="499node" data-ref-filename="499node">node</a>);</td></tr>
<tr><th id="5873">5873</th><td>    }</td></tr>
<tr><th id="5874">5874</th><td></td></tr>
<tr><th id="5875">5875</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="5876">5876</th><td>}</td></tr>
<tr><th id="5877">5877</th><td></td></tr>
<tr><th id="5878">5878</th><td></td></tr>
<tr><th id="5879">5879</th><td></td></tr>
<tr><th id="5880">5880</th><td><i>/* Delete the symbolic tag TAG from the RCS file RCS.  Return 0 if</i></td></tr>
<tr><th id="5881">5881</th><td><i>   the tag was found (and removed), or 1 if it was not present.  (In</i></td></tr>
<tr><th id="5882">5882</th><td><i>   either case, the tag will no longer be in RCS-&gt;SYMBOLS.) */</i></td></tr>
<tr><th id="5883">5883</th><td><em>int</em></td></tr>
<tr><th id="5884">5884</th><td><dfn class="decl def fn" id="RCS_deltag" title='RCS_deltag' data-ref="RCS_deltag" data-ref-filename="RCS_deltag">RCS_deltag</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col0 decl" id="500rcs" title='rcs' data-type='RCSNode *' data-ref="500rcs" data-ref-filename="500rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col1 decl" id="501tag" title='tag' data-type='const char *' data-ref="501tag" data-ref-filename="501tag">tag</dfn>)</td></tr>
<tr><th id="5885">5885</th><td>{</td></tr>
<tr><th id="5886">5886</th><td>    <a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> *<dfn class="local col2 decl" id="502symbols" title='symbols' data-type='List *' data-ref="502symbols" data-ref-filename="502symbols">symbols</dfn>;</td></tr>
<tr><th id="5887">5887</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col3 decl" id="503node" title='node' data-type='Node *' data-ref="503node" data-ref-filename="503node">node</dfn>;</td></tr>
<tr><th id="5888">5888</th><td>    <b>if</b> (<a class="local col0 ref" href="#500rcs" title='rcs' data-ref="500rcs" data-ref-filename="500rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="5889">5889</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col0 ref" href="#500rcs" title='rcs' data-ref="500rcs" data-ref-filename="500rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="5890">5890</th><td></td></tr>
<tr><th id="5891">5891</th><td>    <a class="local col2 ref" href="#502symbols" title='symbols' data-ref="502symbols" data-ref-filename="502symbols">symbols</a> = <a class="ref fn" href="#RCS_symbols" title='RCS_symbols' data-ref="RCS_symbols" data-ref-filename="RCS_symbols">RCS_symbols</a> (<a class="local col0 ref" href="#500rcs" title='rcs' data-ref="500rcs" data-ref-filename="500rcs">rcs</a>);</td></tr>
<tr><th id="5892">5892</th><td>    <b>if</b> (<a class="local col2 ref" href="#502symbols" title='symbols' data-ref="502symbols" data-ref-filename="502symbols">symbols</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5893">5893</th><td>	<b>return</b> <var>1</var>;</td></tr>
<tr><th id="5894">5894</th><td></td></tr>
<tr><th id="5895">5895</th><td>    <a class="local col3 ref" href="#503node" title='node' data-ref="503node" data-ref-filename="503node">node</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col2 ref" href="#502symbols" title='symbols' data-ref="502symbols" data-ref-filename="502symbols">symbols</a>, <a class="local col1 ref" href="#501tag" title='tag' data-ref="501tag" data-ref-filename="501tag">tag</a>);</td></tr>
<tr><th id="5896">5896</th><td>    <b>if</b> (<a class="local col3 ref" href="#503node" title='node' data-ref="503node" data-ref-filename="503node">node</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5897">5897</th><td>	<b>return</b> <var>1</var>;</td></tr>
<tr><th id="5898">5898</th><td></td></tr>
<tr><th id="5899">5899</th><td>    <a class="ref fn" href="hash.h.html#delnode" title='delnode' data-ref="delnode" data-ref-filename="delnode">delnode</a> (<a class="local col3 ref" href="#503node" title='node' data-ref="503node" data-ref-filename="503node">node</a>);</td></tr>
<tr><th id="5900">5900</th><td></td></tr>
<tr><th id="5901">5901</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="5902">5902</th><td>}</td></tr>
<tr><th id="5903">5903</th><td></td></tr>
<tr><th id="5904">5904</th><td></td></tr>
<tr><th id="5905">5905</th><td></td></tr>
<tr><th id="5906">5906</th><td><i>/* Set the default branch of RCS to REV.  */</i></td></tr>
<tr><th id="5907">5907</th><td><em>int</em></td></tr>
<tr><th id="5908">5908</th><td><dfn class="decl def fn" id="RCS_setbranch" title='RCS_setbranch' data-ref="RCS_setbranch" data-ref-filename="RCS_setbranch">RCS_setbranch</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col4 decl" id="504rcs" title='rcs' data-type='RCSNode *' data-ref="504rcs" data-ref-filename="504rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col5 decl" id="505rev" title='rev' data-type='const char *' data-ref="505rev" data-ref-filename="505rev">rev</dfn>)</td></tr>
<tr><th id="5909">5909</th><td>{</td></tr>
<tr><th id="5910">5910</th><td>    <b>if</b> (<a class="local col4 ref" href="#504rcs" title='rcs' data-ref="504rcs" data-ref-filename="504rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="5911">5911</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col4 ref" href="#504rcs" title='rcs' data-ref="504rcs" data-ref-filename="504rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="5912">5912</th><td></td></tr>
<tr><th id="5913">5913</th><td>    <b>if</b> (<a class="local col5 ref" href="#505rev" title='rev' data-ref="505rev" data-ref-filename="505rev">rev</a> &amp;&amp; ! *<a class="local col5 ref" href="#505rev" title='rev' data-ref="505rev" data-ref-filename="505rev">rev</a>)</td></tr>
<tr><th id="5914">5914</th><td>	<a class="local col5 ref" href="#505rev" title='rev' data-ref="505rev" data-ref-filename="505rev">rev</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="5915">5915</th><td></td></tr>
<tr><th id="5916">5916</th><td>    <b>if</b> (<a class="local col5 ref" href="#505rev" title='rev' data-ref="505rev" data-ref-filename="505rev">rev</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="local col4 ref" href="#504rcs" title='rcs' data-ref="504rcs" data-ref-filename="504rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5917">5917</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="5918">5918</th><td>    <b>if</b> (<a class="local col5 ref" href="#505rev" title='rev' data-ref="505rev" data-ref-filename="505rev">rev</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="local col4 ref" href="#504rcs" title='rcs' data-ref="504rcs" data-ref-filename="504rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="macro" href="#138" title="(*(char *)(rev) == *(char *)(rcs-&gt;branch) &amp;&amp; strcmp ((rev), (rcs-&gt;branch)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col5 ref" href="#505rev" title='rev' data-ref="505rev" data-ref-filename="505rev">rev</a>, <a class="local col4 ref" href="#504rcs" title='rcs' data-ref="504rcs" data-ref-filename="504rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a>))</td></tr>
<tr><th id="5919">5919</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="5920">5920</th><td></td></tr>
<tr><th id="5921">5921</th><td>    <b>if</b> (<a class="local col4 ref" href="#504rcs" title='rcs' data-ref="504rcs" data-ref-filename="504rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5922">5922</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col4 ref" href="#504rcs" title='rcs' data-ref="504rcs" data-ref-filename="504rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a>);</td></tr>
<tr><th id="5923">5923</th><td>    <a class="local col4 ref" href="#504rcs" title='rcs' data-ref="504rcs" data-ref-filename="504rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col5 ref" href="#505rev" title='rev' data-ref="505rev" data-ref-filename="505rev">rev</a>);</td></tr>
<tr><th id="5924">5924</th><td></td></tr>
<tr><th id="5925">5925</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="5926">5926</th><td>}</td></tr>
<tr><th id="5927">5927</th><td></td></tr>
<tr><th id="5928">5928</th><td></td></tr>
<tr><th id="5929">5929</th><td></td></tr>
<tr><th id="5930">5930</th><td><i>/* Lock revision REV.  LOCK_QUIET is 1 to suppress output.  FIXME:</i></td></tr>
<tr><th id="5931">5931</th><td><i>   Most of the callers only call us because RCS_checkin still tends to</i></td></tr>
<tr><th id="5932">5932</th><td><i>   like a lock (a relic of old behavior inherited from the RCS ci</i></td></tr>
<tr><th id="5933">5933</th><td><i>   program).  If we clean this up, only "cvs admin -l" will still need</i></td></tr>
<tr><th id="5934">5934</th><td><i>   to call RCS_lock.  */</i></td></tr>
<tr><th id="5935">5935</th><td></td></tr>
<tr><th id="5936">5936</th><td><i>/* FIXME-twp: if a lock owned by someone else is broken, should this</i></td></tr>
<tr><th id="5937">5937</th><td><i>   send mail to the lock owner?  Prompt user?  It seems like such an</i></td></tr>
<tr><th id="5938">5938</th><td><i>   obscure situation for CVS as almost not worth worrying much</i></td></tr>
<tr><th id="5939">5939</th><td><i>   about. */</i></td></tr>
<tr><th id="5940">5940</th><td><em>int</em></td></tr>
<tr><th id="5941">5941</th><td><dfn class="decl def fn" id="RCS_lock" title='RCS_lock' data-ref="RCS_lock" data-ref-filename="RCS_lock">RCS_lock</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col6 decl" id="506rcs" title='rcs' data-type='RCSNode *' data-ref="506rcs" data-ref-filename="506rcs">rcs</dfn>, <em>const</em> <em>char</em> *<dfn class="local col7 decl" id="507rev" title='rev' data-type='const char *' data-ref="507rev" data-ref-filename="507rev">rev</dfn>, <em>int</em> <dfn class="local col8 decl" id="508lock_quiet" title='lock_quiet' data-type='int' data-ref="508lock_quiet" data-ref-filename="508lock_quiet">lock_quiet</dfn>)</td></tr>
<tr><th id="5942">5942</th><td>{</td></tr>
<tr><th id="5943">5943</th><td>    <a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> *<dfn class="local col9 decl" id="509locks" title='locks' data-type='List *' data-ref="509locks" data-ref-filename="509locks">locks</dfn>;</td></tr>
<tr><th id="5944">5944</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col0 decl" id="510p" title='p' data-type='Node *' data-ref="510p" data-ref-filename="510p">p</dfn>;</td></tr>
<tr><th id="5945">5945</th><td>    <em>char</em> *<dfn class="local col1 decl" id="511user" title='user' data-type='char *' data-ref="511user" data-ref-filename="511user">user</dfn>;</td></tr>
<tr><th id="5946">5946</th><td>    <em>char</em> *<dfn class="local col2 decl" id="512xrev" title='xrev' data-type='char *' data-ref="512xrev" data-ref-filename="512xrev">xrev</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="5947">5947</th><td></td></tr>
<tr><th id="5948">5948</th><td>    <b>if</b> (<a class="local col6 ref" href="#506rcs" title='rcs' data-ref="506rcs" data-ref-filename="506rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="5949">5949</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col6 ref" href="#506rcs" title='rcs' data-ref="506rcs" data-ref-filename="506rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="5950">5950</th><td></td></tr>
<tr><th id="5951">5951</th><td>    <a class="local col9 ref" href="#509locks" title='locks' data-ref="509locks" data-ref-filename="509locks">locks</a> = <a class="ref fn" href="#RCS_getlocks" title='RCS_getlocks' data-ref="RCS_getlocks" data-ref-filename="RCS_getlocks">RCS_getlocks</a> (<a class="local col6 ref" href="#506rcs" title='rcs' data-ref="506rcs" data-ref-filename="506rcs">rcs</a>);</td></tr>
<tr><th id="5952">5952</th><td>    <b>if</b> (<a class="local col9 ref" href="#509locks" title='locks' data-ref="509locks" data-ref-filename="509locks">locks</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5953">5953</th><td>	<a class="local col9 ref" href="#509locks" title='locks' data-ref="509locks" data-ref-filename="509locks">locks</a> = <a class="local col6 ref" href="#506rcs" title='rcs' data-ref="506rcs" data-ref-filename="506rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks" title='rcsnode::locks' data-ref="rcsnode::locks" data-ref-filename="rcsnode..locks">locks</a> = <a class="ref fn" href="hash.h.html#getlist" title='getlist' data-ref="getlist" data-ref-filename="getlist">getlist</a>();</td></tr>
<tr><th id="5954">5954</th><td>    <a class="local col1 ref" href="#511user" title='user' data-ref="511user" data-ref-filename="511user">user</a> = <a class="ref fn" href="subr.h.html#getcaller" title='getcaller' data-ref="getcaller" data-ref-filename="getcaller">getcaller</a>();</td></tr>
<tr><th id="5955">5955</th><td></td></tr>
<tr><th id="5956">5956</th><td>    <i>/* A revision number of NULL means lock the head or default branch. */</i></td></tr>
<tr><th id="5957">5957</th><td>    <b>if</b> (<a class="local col7 ref" href="#507rev" title='rev' data-ref="507rev" data-ref-filename="507rev">rev</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5958">5958</th><td>	<a class="local col2 ref" href="#512xrev" title='xrev' data-ref="512xrev" data-ref-filename="512xrev">xrev</a> = <a class="ref fn" href="#RCS_head" title='RCS_head' data-ref="RCS_head" data-ref-filename="RCS_head">RCS_head</a> (<a class="local col6 ref" href="#506rcs" title='rcs' data-ref="506rcs" data-ref-filename="506rcs">rcs</a>);</td></tr>
<tr><th id="5959">5959</th><td>    <b>else</b></td></tr>
<tr><th id="5960">5960</th><td>	<a class="local col2 ref" href="#512xrev" title='xrev' data-ref="512xrev" data-ref-filename="512xrev">xrev</a> = <a class="ref fn" href="#RCS_gettag" title='RCS_gettag' data-ref="RCS_gettag" data-ref-filename="RCS_gettag">RCS_gettag</a> (<a class="local col6 ref" href="#506rcs" title='rcs' data-ref="506rcs" data-ref-filename="506rcs">rcs</a>, <a class="local col7 ref" href="#507rev" title='rev' data-ref="507rev" data-ref-filename="507rev">rev</a>, <var>1</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="5961">5961</th><td></td></tr>
<tr><th id="5962">5962</th><td>    <i>/* Make sure that the desired revision exists.  Technically,</i></td></tr>
<tr><th id="5963">5963</th><td><i>       we can update the locks list without even checking this,</i></td></tr>
<tr><th id="5964">5964</th><td><i>       but RCS 5.7 did this.  And it can't hurt. */</i></td></tr>
<tr><th id="5965">5965</th><td>    <b>if</b> (<a class="local col2 ref" href="#512xrev" title='xrev' data-ref="512xrev" data-ref-filename="512xrev">xrev</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#506rcs" title='rcs' data-ref="506rcs" data-ref-filename="506rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col2 ref" href="#512xrev" title='xrev' data-ref="512xrev" data-ref-filename="512xrev">xrev</a>) == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5966">5966</th><td>    {</td></tr>
<tr><th id="5967">5967</th><td>	<b>if</b> (!<a class="local col8 ref" href="#508lock_quiet" title='lock_quiet' data-ref="508lock_quiet" data-ref-filename="508lock_quiet">lock_quiet</a>)</td></tr>
<tr><th id="5968">5968</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: revision %s absent"</q>, <a class="local col6 ref" href="#506rcs" title='rcs' data-ref="506rcs" data-ref-filename="506rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col7 ref" href="#507rev" title='rev' data-ref="507rev" data-ref-filename="507rev">rev</a>);</td></tr>
<tr><th id="5969">5969</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#512xrev" title='xrev' data-ref="512xrev" data-ref-filename="512xrev">xrev</a>);</td></tr>
<tr><th id="5970">5970</th><td>	<b>return</b> <var>1</var>;</td></tr>
<tr><th id="5971">5971</th><td>    }</td></tr>
<tr><th id="5972">5972</th><td></td></tr>
<tr><th id="5973">5973</th><td>    <i>/* Is this rev already locked? */</i></td></tr>
<tr><th id="5974">5974</th><td>    <a class="local col0 ref" href="#510p" title='p' data-ref="510p" data-ref-filename="510p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col9 ref" href="#509locks" title='locks' data-ref="509locks" data-ref-filename="509locks">locks</a>, <a class="local col2 ref" href="#512xrev" title='xrev' data-ref="512xrev" data-ref-filename="512xrev">xrev</a>);</td></tr>
<tr><th id="5975">5975</th><td>    <b>if</b> (<a class="local col0 ref" href="#510p" title='p' data-ref="510p" data-ref-filename="510p">p</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="5976">5976</th><td>    {</td></tr>
<tr><th id="5977">5977</th><td>	<b>if</b> (<a class="macro" href="#138" title="(*(char *)(p-&gt;data) == *(char *)(user) &amp;&amp; strcmp ((p-&gt;data), (user)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col0 ref" href="#510p" title='p' data-ref="510p" data-ref-filename="510p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>, <a class="local col1 ref" href="#511user" title='user' data-ref="511user" data-ref-filename="511user">user</a>))</td></tr>
<tr><th id="5978">5978</th><td>	{</td></tr>
<tr><th id="5979">5979</th><td>	    <i>/* We already own the lock on this revision, so do nothing. */</i></td></tr>
<tr><th id="5980">5980</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#512xrev" title='xrev' data-ref="512xrev" data-ref-filename="512xrev">xrev</a>);</td></tr>
<tr><th id="5981">5981</th><td>	    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="5982">5982</th><td>	}</td></tr>
<tr><th id="5983">5983</th><td></td></tr>
<tr><th id="5984">5984</th><td><u>#<span data-ppcond="5984">if</span> 0</u></td></tr>
<tr><th id="5985">5985</th><td>	<i>/* Well, first of all, "rev" below should be "xrev" to avoid</i></td></tr>
<tr><th id="5986">5986</th><td><i>	   core dumps.  But more importantly, should we really be</i></td></tr>
<tr><th id="5987">5987</th><td><i>	   breaking the lock unconditionally?  What CVS 1.9 does (via</i></td></tr>
<tr><th id="5988">5988</th><td><i>	   RCS) is to prompt "Revision 1.1 is already locked by fred.</i></td></tr>
<tr><th id="5989">5989</th><td><i>	   Do you want to break the lock? [ny](n): ".  Well, we don't</i></td></tr>
<tr><th id="5990">5990</th><td><i>	   want to interact with the user (certainly not at the</i></td></tr>
<tr><th id="5991">5991</th><td><i>	   server/protocol level, and probably not in the command-line</i></td></tr>
<tr><th id="5992">5992</th><td><i>	   client), but isn't it more sensible to give an error and</i></td></tr>
<tr><th id="5993">5993</th><td><i>	   let the user run "cvs admin -u" if they want to break the</i></td></tr>
<tr><th id="5994">5994</th><td><i>	   lock?  */</i></td></tr>
<tr><th id="5995">5995</th><td></td></tr>
<tr><th id="5996">5996</th><td>	<i>/* Break the lock. */</i>	    </td></tr>
<tr><th id="5997">5997</th><td>	<b>if</b> (!lock_quiet)</td></tr>
<tr><th id="5998">5998</th><td>	{</td></tr>
<tr><th id="5999">5999</th><td>	    cvs_output (rev, <var>0</var>);</td></tr>
<tr><th id="6000">6000</th><td>	    cvs_output (<q>" unlocked\n"</q>, <var>0</var>);</td></tr>
<tr><th id="6001">6001</th><td>	}</td></tr>
<tr><th id="6002">6002</th><td>	delnode (p);</td></tr>
<tr><th id="6003">6003</th><td><u>#<span data-ppcond="5984">else</span></u></td></tr>
<tr><th id="6004">6004</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"Revision %s is already locked by %s"</q>,</td></tr>
<tr><th id="6005">6005</th><td>               <a class="local col2 ref" href="#512xrev" title='xrev' data-ref="512xrev" data-ref-filename="512xrev">xrev</a>, (<em>char</em> *)<a class="local col0 ref" href="#510p" title='p' data-ref="510p" data-ref-filename="510p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>);</td></tr>
<tr><th id="6006">6006</th><td><u>#<span data-ppcond="5984">endif</span></u></td></tr>
<tr><th id="6007">6007</th><td>    }</td></tr>
<tr><th id="6008">6008</th><td></td></tr>
<tr><th id="6009">6009</th><td>    <i>/* Create a new lock. */</i></td></tr>
<tr><th id="6010">6010</th><td>    <a class="local col0 ref" href="#510p" title='p' data-ref="510p" data-ref-filename="510p">p</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a>();</td></tr>
<tr><th id="6011">6011</th><td>    <a class="local col0 ref" href="#510p" title='p' data-ref="510p" data-ref-filename="510p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="local col2 ref" href="#512xrev" title='xrev' data-ref="512xrev" data-ref-filename="512xrev">xrev</a>;	<i>/* already xstrdupped */</i></td></tr>
<tr><th id="6012">6012</th><td>    <a class="local col0 ref" href="#510p" title='p' data-ref="510p" data-ref-filename="510p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="ref fn" href="subr.h.html#getcaller" title='getcaller' data-ref="getcaller" data-ref-filename="getcaller">getcaller</a>());</td></tr>
<tr><th id="6013">6013</th><td>    (<em>void</em>)<a class="ref fn" href="hash.h.html#addnode_at_front" title='addnode_at_front' data-ref="addnode_at_front" data-ref-filename="addnode_at_front">addnode_at_front</a> (<a class="local col9 ref" href="#509locks" title='locks' data-ref="509locks" data-ref-filename="509locks">locks</a>, <a class="local col0 ref" href="#510p" title='p' data-ref="510p" data-ref-filename="510p">p</a>);</td></tr>
<tr><th id="6014">6014</th><td></td></tr>
<tr><th id="6015">6015</th><td>    <b>if</b> (!<a class="local col8 ref" href="#508lock_quiet" title='lock_quiet' data-ref="508lock_quiet" data-ref-filename="508lock_quiet">lock_quiet</a>)</td></tr>
<tr><th id="6016">6016</th><td>    {</td></tr>
<tr><th id="6017">6017</th><td>	<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="local col2 ref" href="#512xrev" title='xrev' data-ref="512xrev" data-ref-filename="512xrev">xrev</a>, <var>0</var>);</td></tr>
<tr><th id="6018">6018</th><td>	<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>" locked\n"</q>, <var>0</var>);</td></tr>
<tr><th id="6019">6019</th><td>    }</td></tr>
<tr><th id="6020">6020</th><td></td></tr>
<tr><th id="6021">6021</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="6022">6022</th><td>}</td></tr>
<tr><th id="6023">6023</th><td></td></tr>
<tr><th id="6024">6024</th><td></td></tr>
<tr><th id="6025">6025</th><td></td></tr>
<tr><th id="6026">6026</th><td><i>/* Unlock revision REV.  UNLOCK_QUIET is 1 to suppress output.  FIXME:</i></td></tr>
<tr><th id="6027">6027</th><td><i>   Like RCS_lock, this can become a no-op if we do the checkin</i></td></tr>
<tr><th id="6028">6028</th><td><i>   ourselves.</i></td></tr>
<tr><th id="6029">6029</th><td><i></i></td></tr>
<tr><th id="6030">6030</th><td><i>   If REV is not null and is locked by someone else, break their</i></td></tr>
<tr><th id="6031">6031</th><td><i>   lock and notify them.  It is an open issue whether RCS_unlock</i></td></tr>
<tr><th id="6032">6032</th><td><i>   queries the user about whether or not to break the lock. */</i></td></tr>
<tr><th id="6033">6033</th><td><em>int</em></td></tr>
<tr><th id="6034">6034</th><td><dfn class="decl def fn" id="RCS_unlock" title='RCS_unlock' data-ref="RCS_unlock" data-ref-filename="RCS_unlock">RCS_unlock</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col3 decl" id="513rcs" title='rcs' data-type='RCSNode *' data-ref="513rcs" data-ref-filename="513rcs">rcs</dfn>, <em>char</em> *<dfn class="local col4 decl" id="514rev" title='rev' data-type='char *' data-ref="514rev" data-ref-filename="514rev">rev</dfn>, <em>int</em> <dfn class="local col5 decl" id="515unlock_quiet" title='unlock_quiet' data-type='int' data-ref="515unlock_quiet" data-ref-filename="515unlock_quiet">unlock_quiet</dfn>)</td></tr>
<tr><th id="6035">6035</th><td>{</td></tr>
<tr><th id="6036">6036</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col6 decl" id="516lock" title='lock' data-type='Node *' data-ref="516lock" data-ref-filename="516lock">lock</dfn>;</td></tr>
<tr><th id="6037">6037</th><td>    <a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> *<dfn class="local col7 decl" id="517locks" title='locks' data-type='List *' data-ref="517locks" data-ref-filename="517locks">locks</dfn>;</td></tr>
<tr><th id="6038">6038</th><td>    <em>char</em> *<dfn class="local col8 decl" id="518user" title='user' data-type='char *' data-ref="518user" data-ref-filename="518user">user</dfn>;</td></tr>
<tr><th id="6039">6039</th><td>    <em>char</em> *<dfn class="local col9 decl" id="519xrev" title='xrev' data-type='char *' data-ref="519xrev" data-ref-filename="519xrev">xrev</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6040">6040</th><td></td></tr>
<tr><th id="6041">6041</th><td>    <a class="local col8 ref" href="#518user" title='user' data-ref="518user" data-ref-filename="518user">user</a> = <a class="ref fn" href="subr.h.html#getcaller" title='getcaller' data-ref="getcaller" data-ref-filename="getcaller">getcaller</a>();</td></tr>
<tr><th id="6042">6042</th><td>    <b>if</b> (<a class="local col3 ref" href="#513rcs" title='rcs' data-ref="513rcs" data-ref-filename="513rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="6043">6043</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col3 ref" href="#513rcs" title='rcs' data-ref="513rcs" data-ref-filename="513rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6044">6044</th><td></td></tr>
<tr><th id="6045">6045</th><td>    <i>/* If rev is NULL, unlock the revision held by the caller; if more</i></td></tr>
<tr><th id="6046">6046</th><td><i>       than one, make the user specify the revision explicitly.  This</i></td></tr>
<tr><th id="6047">6047</th><td><i>       differs from RCS which unlocks the latest revision (first in</i></td></tr>
<tr><th id="6048">6048</th><td><i>       rcs-&gt;locks) held by the caller. */</i></td></tr>
<tr><th id="6049">6049</th><td>    <b>if</b> (<a class="local col4 ref" href="#514rev" title='rev' data-ref="514rev" data-ref-filename="514rev">rev</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6050">6050</th><td>    {</td></tr>
<tr><th id="6051">6051</th><td>	<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col0 decl" id="520p" title='p' data-type='Node *' data-ref="520p" data-ref-filename="520p">p</dfn>;</td></tr>
<tr><th id="6052">6052</th><td></td></tr>
<tr><th id="6053">6053</th><td>	<i>/* No-ops: attempts to unlock an empty tree or an unlocked file. */</i></td></tr>
<tr><th id="6054">6054</th><td>	<b>if</b> (<a class="local col3 ref" href="#513rcs" title='rcs' data-ref="513rcs" data-ref-filename="513rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6055">6055</th><td>	{</td></tr>
<tr><th id="6056">6056</th><td>	    <b>if</b> (!<a class="local col5 ref" href="#515unlock_quiet" title='unlock_quiet' data-ref="515unlock_quiet" data-ref-filename="515unlock_quiet">unlock_quiet</a>)</td></tr>
<tr><th id="6057">6057</th><td>		<a class="ref fn" href="cvs.h.html#cvs_outerr" title='cvs_outerr' data-ref="cvs_outerr" data-ref-filename="cvs_outerr">cvs_outerr</a> (<q>"can't unlock an empty tree\n"</q>, <var>0</var>);</td></tr>
<tr><th id="6058">6058</th><td>	    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="6059">6059</th><td>	}</td></tr>
<tr><th id="6060">6060</th><td></td></tr>
<tr><th id="6061">6061</th><td>	<a class="local col7 ref" href="#517locks" title='locks' data-ref="517locks" data-ref-filename="517locks">locks</a> = <a class="ref fn" href="#RCS_getlocks" title='RCS_getlocks' data-ref="RCS_getlocks" data-ref-filename="RCS_getlocks">RCS_getlocks</a> (<a class="local col3 ref" href="#513rcs" title='rcs' data-ref="513rcs" data-ref-filename="513rcs">rcs</a>);</td></tr>
<tr><th id="6062">6062</th><td>	<b>if</b> (<a class="local col7 ref" href="#517locks" title='locks' data-ref="517locks" data-ref-filename="517locks">locks</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6063">6063</th><td>	{</td></tr>
<tr><th id="6064">6064</th><td>	    <b>if</b> (!<a class="local col5 ref" href="#515unlock_quiet" title='unlock_quiet' data-ref="515unlock_quiet" data-ref-filename="515unlock_quiet">unlock_quiet</a>)</td></tr>
<tr><th id="6065">6065</th><td>		<a class="ref fn" href="cvs.h.html#cvs_outerr" title='cvs_outerr' data-ref="cvs_outerr" data-ref-filename="cvs_outerr">cvs_outerr</a> (<q>"No locks are set.\n"</q>, <var>0</var>);</td></tr>
<tr><th id="6066">6066</th><td>	    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="6067">6067</th><td>	}</td></tr>
<tr><th id="6068">6068</th><td></td></tr>
<tr><th id="6069">6069</th><td>	<a class="local col6 ref" href="#516lock" title='lock' data-ref="516lock" data-ref-filename="516lock">lock</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6070">6070</th><td>	<b>for</b> (<a class="local col0 ref" href="#520p" title='p' data-ref="520p" data-ref-filename="520p">p</a> = <a class="local col7 ref" href="#517locks" title='locks' data-ref="517locks" data-ref-filename="517locks">locks</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>; <a class="local col0 ref" href="#520p" title='p' data-ref="520p" data-ref-filename="520p">p</a> != <a class="local col7 ref" href="#517locks" title='locks' data-ref="517locks" data-ref-filename="517locks">locks</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>; <a class="local col0 ref" href="#520p" title='p' data-ref="520p" data-ref-filename="520p">p</a> = <a class="local col0 ref" href="#520p" title='p' data-ref="520p" data-ref-filename="520p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>)</td></tr>
<tr><th id="6071">6071</th><td>	{</td></tr>
<tr><th id="6072">6072</th><td>	    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(p-&gt;data) == *(char *)(user) &amp;&amp; strcmp ((p-&gt;data), (user)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col0 ref" href="#520p" title='p' data-ref="520p" data-ref-filename="520p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>, <a class="local col8 ref" href="#518user" title='user' data-ref="518user" data-ref-filename="518user">user</a>))</td></tr>
<tr><th id="6073">6073</th><td>	    {</td></tr>
<tr><th id="6074">6074</th><td>		<b>if</b> (<a class="local col6 ref" href="#516lock" title='lock' data-ref="516lock" data-ref-filename="516lock">lock</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6075">6075</th><td>		{</td></tr>
<tr><th id="6076">6076</th><td>		    <b>if</b> (!<a class="local col5 ref" href="#515unlock_quiet" title='unlock_quiet' data-ref="515unlock_quiet" data-ref-filename="515unlock_quiet">unlock_quiet</a>)</td></tr>
<tr><th id="6077">6077</th><td>			<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"\</q></td></tr>
<tr><th id="6078">6078</th><td><q>%s: multiple revisions locked by %s; please specify one"</q>, <a class="local col3 ref" href="#513rcs" title='rcs' data-ref="513rcs" data-ref-filename="513rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col8 ref" href="#518user" title='user' data-ref="518user" data-ref-filename="518user">user</a>);</td></tr>
<tr><th id="6079">6079</th><td>		    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="6080">6080</th><td>		}</td></tr>
<tr><th id="6081">6081</th><td>		<a class="local col6 ref" href="#516lock" title='lock' data-ref="516lock" data-ref-filename="516lock">lock</a> = <a class="local col0 ref" href="#520p" title='p' data-ref="520p" data-ref-filename="520p">p</a>;</td></tr>
<tr><th id="6082">6082</th><td>	    }</td></tr>
<tr><th id="6083">6083</th><td>	}</td></tr>
<tr><th id="6084">6084</th><td>	<b>if</b> (<a class="local col6 ref" href="#516lock" title='lock' data-ref="516lock" data-ref-filename="516lock">lock</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6085">6085</th><td>	{</td></tr>
<tr><th id="6086">6086</th><td>	    <b>if</b> (!<a class="local col5 ref" href="#515unlock_quiet" title='unlock_quiet' data-ref="515unlock_quiet" data-ref-filename="515unlock_quiet">unlock_quiet</a>)</td></tr>
<tr><th id="6087">6087</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"No locks are set for %s.\n"</q>, <a class="local col8 ref" href="#518user" title='user' data-ref="518user" data-ref-filename="518user">user</a>);</td></tr>
<tr><th id="6088">6088</th><td>	    <b>return</b> <var>0</var>;	<i>/* no lock found, ergo nothing to do */</i></td></tr>
<tr><th id="6089">6089</th><td>	}</td></tr>
<tr><th id="6090">6090</th><td>	<a class="local col9 ref" href="#519xrev" title='xrev' data-ref="519xrev" data-ref-filename="519xrev">xrev</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col6 ref" href="#516lock" title='lock' data-ref="516lock" data-ref-filename="516lock">lock</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>);</td></tr>
<tr><th id="6091">6091</th><td>    }</td></tr>
<tr><th id="6092">6092</th><td>    <b>else</b></td></tr>
<tr><th id="6093">6093</th><td>    {</td></tr>
<tr><th id="6094">6094</th><td>	<a class="local col9 ref" href="#519xrev" title='xrev' data-ref="519xrev" data-ref-filename="519xrev">xrev</a> = <a class="ref fn" href="#RCS_gettag" title='RCS_gettag' data-ref="RCS_gettag" data-ref-filename="RCS_gettag">RCS_gettag</a> (<a class="local col3 ref" href="#513rcs" title='rcs' data-ref="513rcs" data-ref-filename="513rcs">rcs</a>, <a class="local col4 ref" href="#514rev" title='rev' data-ref="514rev" data-ref-filename="514rev">rev</a>, <var>1</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6095">6095</th><td>	<b>if</b> (<a class="local col9 ref" href="#519xrev" title='xrev' data-ref="519xrev" data-ref-filename="519xrev">xrev</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6096">6096</th><td>	{</td></tr>
<tr><th id="6097">6097</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: revision %s absent"</q>, <a class="local col3 ref" href="#513rcs" title='rcs' data-ref="513rcs" data-ref-filename="513rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col4 ref" href="#514rev" title='rev' data-ref="514rev" data-ref-filename="514rev">rev</a>);</td></tr>
<tr><th id="6098">6098</th><td>	    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="6099">6099</th><td>	}</td></tr>
<tr><th id="6100">6100</th><td>    }</td></tr>
<tr><th id="6101">6101</th><td></td></tr>
<tr><th id="6102">6102</th><td>    <a class="local col6 ref" href="#516lock" title='lock' data-ref="516lock" data-ref-filename="516lock">lock</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="ref fn" href="#RCS_getlocks" title='RCS_getlocks' data-ref="RCS_getlocks" data-ref-filename="RCS_getlocks">RCS_getlocks</a> (<a class="local col3 ref" href="#513rcs" title='rcs' data-ref="513rcs" data-ref-filename="513rcs">rcs</a>), <a class="local col9 ref" href="#519xrev" title='xrev' data-ref="519xrev" data-ref-filename="519xrev">xrev</a>);</td></tr>
<tr><th id="6103">6103</th><td>    <b>if</b> (<a class="local col6 ref" href="#516lock" title='lock' data-ref="516lock" data-ref-filename="516lock">lock</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6104">6104</th><td>    {</td></tr>
<tr><th id="6105">6105</th><td>	<i>/* This revision isn't locked. */</i></td></tr>
<tr><th id="6106">6106</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col9 ref" href="#519xrev" title='xrev' data-ref="519xrev" data-ref-filename="519xrev">xrev</a>);</td></tr>
<tr><th id="6107">6107</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="6108">6108</th><td>    }</td></tr>
<tr><th id="6109">6109</th><td></td></tr>
<tr><th id="6110">6110</th><td>    <b>if</b> (! <a class="macro" href="#138" title="(*(char *)(lock-&gt;data) == *(char *)(user) &amp;&amp; strcmp ((lock-&gt;data), (user)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col6 ref" href="#516lock" title='lock' data-ref="516lock" data-ref-filename="516lock">lock</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>, <a class="local col8 ref" href="#518user" title='user' data-ref="518user" data-ref-filename="518user">user</a>))</td></tr>
<tr><th id="6111">6111</th><td>    {</td></tr>
<tr><th id="6112">6112</th><td>        <i>/* If the revision is locked by someone else, notify</i></td></tr>
<tr><th id="6113">6113</th><td><i>	   them.  Note that this shouldn't ever happen if RCS_unlock</i></td></tr>
<tr><th id="6114">6114</th><td><i>	   is called with a NULL revision, since that means "whatever</i></td></tr>
<tr><th id="6115">6115</th><td><i>	   revision is currently locked by the caller." */</i></td></tr>
<tr><th id="6116">6116</th><td>	<em>char</em> *<dfn class="local col1 decl" id="521repos" title='repos' data-type='char *' data-ref="521repos" data-ref-filename="521repos">repos</dfn>, *<dfn class="local col2 decl" id="522workfile" title='workfile' data-type='char *' data-ref="522workfile" data-ref-filename="522workfile">workfile</dfn>;</td></tr>
<tr><th id="6117">6117</th><td>	<b>if</b> (!<a class="local col5 ref" href="#515unlock_quiet" title='unlock_quiet' data-ref="515unlock_quiet" data-ref-filename="515unlock_quiet">unlock_quiet</a>)</td></tr>
<tr><th id="6118">6118</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"\</q></td></tr>
<tr><th id="6119">6119</th><td><q>%s: revision %s locked by %s; breaking lock"</q>, <a class="local col3 ref" href="#513rcs" title='rcs' data-ref="513rcs" data-ref-filename="513rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col9 ref" href="#519xrev" title='xrev' data-ref="519xrev" data-ref-filename="519xrev">xrev</a>,</td></tr>
<tr><th id="6120">6120</th><td>		   (<em>char</em> *)<a class="local col6 ref" href="#516lock" title='lock' data-ref="516lock" data-ref-filename="516lock">lock</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>);</td></tr>
<tr><th id="6121">6121</th><td>	<a class="local col1 ref" href="#521repos" title='repos' data-ref="521repos" data-ref-filename="521repos">repos</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col3 ref" href="#513rcs" title='rcs' data-ref="513rcs" data-ref-filename="513rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="6122">6122</th><td>	<a class="local col2 ref" href="#522workfile" title='workfile' data-ref="522workfile" data-ref-filename="522workfile">workfile</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col1 ref" href="#521repos" title='repos' data-ref="521repos" data-ref-filename="521repos">repos</a>, <kbd>'/'</kbd>);</td></tr>
<tr><th id="6123">6123</th><td>	*<a class="local col2 ref" href="#522workfile" title='workfile' data-ref="522workfile" data-ref-filename="522workfile">workfile</a>++ = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="6124">6124</th><td>	<a class="ref fn" href="edit.h.html#notify_do" title='notify_do' data-ref="notify_do" data-ref-filename="notify_do">notify_do</a> (<kbd>'C'</kbd>, <a class="local col2 ref" href="#522workfile" title='workfile' data-ref="522workfile" data-ref-filename="522workfile">workfile</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <a class="local col8 ref" href="#518user" title='user' data-ref="518user" data-ref-filename="518user">user</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <a class="local col1 ref" href="#521repos" title='repos' data-ref="521repos" data-ref-filename="521repos">repos</a>);</td></tr>
<tr><th id="6125">6125</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col1 ref" href="#521repos" title='repos' data-ref="521repos" data-ref-filename="521repos">repos</a>);</td></tr>
<tr><th id="6126">6126</th><td>    }</td></tr>
<tr><th id="6127">6127</th><td></td></tr>
<tr><th id="6128">6128</th><td>    <a class="ref fn" href="hash.h.html#delnode" title='delnode' data-ref="delnode" data-ref-filename="delnode">delnode</a> (<a class="local col6 ref" href="#516lock" title='lock' data-ref="516lock" data-ref-filename="516lock">lock</a>);</td></tr>
<tr><th id="6129">6129</th><td>    <b>if</b> (!<a class="local col5 ref" href="#515unlock_quiet" title='unlock_quiet' data-ref="515unlock_quiet" data-ref-filename="515unlock_quiet">unlock_quiet</a>)</td></tr>
<tr><th id="6130">6130</th><td>    {</td></tr>
<tr><th id="6131">6131</th><td>	<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="local col9 ref" href="#519xrev" title='xrev' data-ref="519xrev" data-ref-filename="519xrev">xrev</a>, <var>0</var>);</td></tr>
<tr><th id="6132">6132</th><td>	<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>" unlocked\n"</q>, <var>0</var>);</td></tr>
<tr><th id="6133">6133</th><td>    }</td></tr>
<tr><th id="6134">6134</th><td></td></tr>
<tr><th id="6135">6135</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col9 ref" href="#519xrev" title='xrev' data-ref="519xrev" data-ref-filename="519xrev">xrev</a>);</td></tr>
<tr><th id="6136">6136</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="6137">6137</th><td>}</td></tr>
<tr><th id="6138">6138</th><td></td></tr>
<tr><th id="6139">6139</th><td></td></tr>
<tr><th id="6140">6140</th><td></td></tr>
<tr><th id="6141">6141</th><td><i>/* Add USER to the access list of RCS.  Do nothing if already present.</i></td></tr>
<tr><th id="6142">6142</th><td><i>   FIXME-twp: check syntax of USER to make sure it's a valid id. */</i></td></tr>
<tr><th id="6143">6143</th><td></td></tr>
<tr><th id="6144">6144</th><td><em>void</em></td></tr>
<tr><th id="6145">6145</th><td><dfn class="decl def fn" id="RCS_addaccess" title='RCS_addaccess' data-ref="RCS_addaccess" data-ref-filename="RCS_addaccess">RCS_addaccess</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col3 decl" id="523rcs" title='rcs' data-type='RCSNode *' data-ref="523rcs" data-ref-filename="523rcs">rcs</dfn>, <em>char</em> *<dfn class="local col4 decl" id="524user" title='user' data-type='char *' data-ref="524user" data-ref-filename="524user">user</dfn>)</td></tr>
<tr><th id="6146">6146</th><td>{</td></tr>
<tr><th id="6147">6147</th><td>    <em>char</em> *<dfn class="local col5 decl" id="525access" title='access' data-type='char *' data-ref="525access" data-ref-filename="525access">access</dfn>, *<dfn class="local col6 decl" id="526a" title='a' data-type='char *' data-ref="526a" data-ref-filename="526a">a</dfn>;</td></tr>
<tr><th id="6148">6148</th><td></td></tr>
<tr><th id="6149">6149</th><td>    <b>if</b> (<a class="local col3 ref" href="#523rcs" title='rcs' data-ref="523rcs" data-ref-filename="523rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="6150">6150</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col3 ref" href="#523rcs" title='rcs' data-ref="523rcs" data-ref-filename="523rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6151">6151</th><td></td></tr>
<tr><th id="6152">6152</th><td>    <b>if</b> (<a class="local col3 ref" href="#523rcs" title='rcs' data-ref="523rcs" data-ref-filename="523rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6153">6153</th><td>	<a class="local col3 ref" href="#523rcs" title='rcs' data-ref="523rcs" data-ref-filename="523rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col4 ref" href="#524user" title='user' data-ref="524user" data-ref-filename="524user">user</a>);</td></tr>
<tr><th id="6154">6154</th><td>    <b>else</b></td></tr>
<tr><th id="6155">6155</th><td>    {</td></tr>
<tr><th id="6156">6156</th><td>	<a class="local col5 ref" href="#525access" title='access' data-ref="525access" data-ref-filename="525access">access</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col3 ref" href="#523rcs" title='rcs' data-ref="523rcs" data-ref-filename="523rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a>);</td></tr>
<tr><th id="6157">6157</th><td>	<b>for</b> (<a class="local col6 ref" href="#526a" title='a' data-ref="526a" data-ref-filename="526a">a</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strtok" title='strtok' data-ref="strtok" data-ref-filename="strtok">strtok</a> (<a class="local col5 ref" href="#525access" title='access' data-ref="525access" data-ref-filename="525access">access</a>, <q>" "</q>); <a class="local col6 ref" href="#526a" title='a' data-ref="526a" data-ref-filename="526a">a</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>; <a class="local col6 ref" href="#526a" title='a' data-ref="526a" data-ref-filename="526a">a</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strtok" title='strtok' data-ref="strtok" data-ref-filename="strtok">strtok</a> (<span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <q>" "</q>))</td></tr>
<tr><th id="6158">6158</th><td>	{</td></tr>
<tr><th id="6159">6159</th><td>	    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(a) == *(char *)(user) &amp;&amp; strcmp ((a), (user)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col6 ref" href="#526a" title='a' data-ref="526a" data-ref-filename="526a">a</a>, <a class="local col4 ref" href="#524user" title='user' data-ref="524user" data-ref-filename="524user">user</a>))</td></tr>
<tr><th id="6160">6160</th><td>	    {</td></tr>
<tr><th id="6161">6161</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col5 ref" href="#525access" title='access' data-ref="525access" data-ref-filename="525access">access</a>);</td></tr>
<tr><th id="6162">6162</th><td>		<b>return</b>;</td></tr>
<tr><th id="6163">6163</th><td>	    }</td></tr>
<tr><th id="6164">6164</th><td>	}</td></tr>
<tr><th id="6165">6165</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col5 ref" href="#525access" title='access' data-ref="525access" data-ref-filename="525access">access</a>);</td></tr>
<tr><th id="6166">6166</th><td>	<a class="local col3 ref" href="#523rcs" title='rcs' data-ref="523rcs" data-ref-filename="523rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a> = <a class="ref fn" href="../lib/xalloc.h.html#xrealloc" title='xrealloc' data-ref="xrealloc" data-ref-filename="xrealloc">xrealloc</a> (<a class="local col3 ref" href="#523rcs" title='rcs' data-ref="523rcs" data-ref-filename="523rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a>,</td></tr>
<tr><th id="6167">6167</th><td>				<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col3 ref" href="#523rcs" title='rcs' data-ref="523rcs" data-ref-filename="523rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a>) + <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col4 ref" href="#524user" title='user' data-ref="524user" data-ref-filename="524user">user</a>) + <var>2</var>);</td></tr>
<tr><th id="6168">6168</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcat" title='strcat' data-ref="strcat" data-ref-filename="strcat">strcat</a> (<a class="local col3 ref" href="#523rcs" title='rcs' data-ref="523rcs" data-ref-filename="523rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a>, <q>" "</q>);</td></tr>
<tr><th id="6169">6169</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcat" title='strcat' data-ref="strcat" data-ref-filename="strcat">strcat</a> (<a class="local col3 ref" href="#523rcs" title='rcs' data-ref="523rcs" data-ref-filename="523rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a>, <a class="local col4 ref" href="#524user" title='user' data-ref="524user" data-ref-filename="524user">user</a>);</td></tr>
<tr><th id="6170">6170</th><td>    }</td></tr>
<tr><th id="6171">6171</th><td>}</td></tr>
<tr><th id="6172">6172</th><td></td></tr>
<tr><th id="6173">6173</th><td></td></tr>
<tr><th id="6174">6174</th><td></td></tr>
<tr><th id="6175">6175</th><td><i>/* Remove USER from the access list of RCS. */</i></td></tr>
<tr><th id="6176">6176</th><td><em>void</em></td></tr>
<tr><th id="6177">6177</th><td><dfn class="decl def fn" id="RCS_delaccess" title='RCS_delaccess' data-ref="RCS_delaccess" data-ref-filename="RCS_delaccess">RCS_delaccess</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col7 decl" id="527rcs" title='rcs' data-type='RCSNode *' data-ref="527rcs" data-ref-filename="527rcs">rcs</dfn>, <em>char</em> *<dfn class="local col8 decl" id="528user" title='user' data-type='char *' data-ref="528user" data-ref-filename="528user">user</dfn>)</td></tr>
<tr><th id="6178">6178</th><td>{</td></tr>
<tr><th id="6179">6179</th><td>    <em>char</em> *<dfn class="local col9 decl" id="529p" title='p' data-type='char *' data-ref="529p" data-ref-filename="529p">p</dfn>, *<dfn class="local col0 decl" id="530s" title='s' data-type='char *' data-ref="530s" data-ref-filename="530s">s</dfn>;</td></tr>
<tr><th id="6180">6180</th><td>    <em>int</em> <dfn class="local col1 decl" id="531ulen" title='ulen' data-type='int' data-ref="531ulen" data-ref-filename="531ulen">ulen</dfn>;</td></tr>
<tr><th id="6181">6181</th><td></td></tr>
<tr><th id="6182">6182</th><td>    <b>if</b> (<a class="local col7 ref" href="#527rcs" title='rcs' data-ref="527rcs" data-ref-filename="527rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="6183">6183</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col7 ref" href="#527rcs" title='rcs' data-ref="527rcs" data-ref-filename="527rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6184">6184</th><td></td></tr>
<tr><th id="6185">6185</th><td>    <b>if</b> (<a class="local col7 ref" href="#527rcs" title='rcs' data-ref="527rcs" data-ref-filename="527rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6186">6186</th><td>	<b>return</b>;</td></tr>
<tr><th id="6187">6187</th><td></td></tr>
<tr><th id="6188">6188</th><td>    <b>if</b> (<a class="local col8 ref" href="#528user" title='user' data-ref="528user" data-ref-filename="528user">user</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6189">6189</th><td>    {</td></tr>
<tr><th id="6190">6190</th><td>        <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col7 ref" href="#527rcs" title='rcs' data-ref="527rcs" data-ref-filename="527rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a>);</td></tr>
<tr><th id="6191">6191</th><td>        <a class="local col7 ref" href="#527rcs" title='rcs' data-ref="527rcs" data-ref-filename="527rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6192">6192</th><td>        <b>return</b>;</td></tr>
<tr><th id="6193">6193</th><td>    }</td></tr>
<tr><th id="6194">6194</th><td></td></tr>
<tr><th id="6195">6195</th><td>    <a class="local col9 ref" href="#529p" title='p' data-ref="529p" data-ref-filename="529p">p</a> = <a class="local col7 ref" href="#527rcs" title='rcs' data-ref="527rcs" data-ref-filename="527rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a>;</td></tr>
<tr><th id="6196">6196</th><td>    <a class="local col1 ref" href="#531ulen" title='ulen' data-ref="531ulen" data-ref-filename="531ulen">ulen</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col8 ref" href="#528user" title='user' data-ref="528user" data-ref-filename="528user">user</a>);</td></tr>
<tr><th id="6197">6197</th><td>    <b>while</b> (<a class="local col9 ref" href="#529p" title='p' data-ref="529p" data-ref-filename="529p">p</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6198">6198</th><td>    {</td></tr>
<tr><th id="6199">6199</th><td>	<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col9 ref" href="#529p" title='p' data-ref="529p" data-ref-filename="529p">p</a>, <a class="local col8 ref" href="#528user" title='user' data-ref="528user" data-ref-filename="528user">user</a>, <a class="local col1 ref" href="#531ulen" title='ulen' data-ref="531ulen" data-ref-filename="531ulen">ulen</a>) == <var>0</var> &amp;&amp; (<a class="local col9 ref" href="#529p" title='p' data-ref="529p" data-ref-filename="529p">p</a>[<a class="local col1 ref" href="#531ulen" title='ulen' data-ref="531ulen" data-ref-filename="531ulen">ulen</a>] == <kbd>'\0'</kbd> || <a class="local col9 ref" href="#529p" title='p' data-ref="529p" data-ref-filename="529p">p</a>[<a class="local col1 ref" href="#531ulen" title='ulen' data-ref="531ulen" data-ref-filename="531ulen">ulen</a>] == <kbd>' '</kbd>))</td></tr>
<tr><th id="6200">6200</th><td>	    <b>break</b>;</td></tr>
<tr><th id="6201">6201</th><td>	<a class="local col9 ref" href="#529p" title='p' data-ref="529p" data-ref-filename="529p">p</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strchr" title='strchr' data-ref="strchr" data-ref-filename="strchr">strchr</a> (<a class="local col9 ref" href="#529p" title='p' data-ref="529p" data-ref-filename="529p">p</a>, <kbd>' '</kbd>);</td></tr>
<tr><th id="6202">6202</th><td>	<b>if</b> (<a class="local col9 ref" href="#529p" title='p' data-ref="529p" data-ref-filename="529p">p</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6203">6203</th><td>	    ++<a class="local col9 ref" href="#529p" title='p' data-ref="529p" data-ref-filename="529p">p</a>;</td></tr>
<tr><th id="6204">6204</th><td>    }</td></tr>
<tr><th id="6205">6205</th><td></td></tr>
<tr><th id="6206">6206</th><td>    <b>if</b> (<a class="local col9 ref" href="#529p" title='p' data-ref="529p" data-ref-filename="529p">p</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6207">6207</th><td>	<b>return</b>;</td></tr>
<tr><th id="6208">6208</th><td></td></tr>
<tr><th id="6209">6209</th><td>    <a class="local col0 ref" href="#530s" title='s' data-ref="530s" data-ref-filename="530s">s</a> = <a class="local col9 ref" href="#529p" title='p' data-ref="529p" data-ref-filename="529p">p</a> + <a class="local col1 ref" href="#531ulen" title='ulen' data-ref="531ulen" data-ref-filename="531ulen">ulen</a>;</td></tr>
<tr><th id="6210">6210</th><td>    <b>while</b> (*<a class="local col0 ref" href="#530s" title='s' data-ref="530s" data-ref-filename="530s">s</a> != <kbd>'\0'</kbd>)</td></tr>
<tr><th id="6211">6211</th><td>	*<a class="local col9 ref" href="#529p" title='p' data-ref="529p" data-ref-filename="529p">p</a>++ = *<a class="local col0 ref" href="#530s" title='s' data-ref="530s" data-ref-filename="530s">s</a>++;</td></tr>
<tr><th id="6212">6212</th><td>    *<a class="local col9 ref" href="#529p" title='p' data-ref="529p" data-ref-filename="529p">p</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="6213">6213</th><td>}</td></tr>
<tr><th id="6214">6214</th><td></td></tr>
<tr><th id="6215">6215</th><td></td></tr>
<tr><th id="6216">6216</th><td></td></tr>
<tr><th id="6217">6217</th><td><em>char</em> *</td></tr>
<tr><th id="6218">6218</th><td><dfn class="decl def fn" id="RCS_getaccess" title='RCS_getaccess' data-ref="RCS_getaccess" data-ref-filename="RCS_getaccess">RCS_getaccess</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col2 decl" id="532rcs" title='rcs' data-type='RCSNode *' data-ref="532rcs" data-ref-filename="532rcs">rcs</dfn>)</td></tr>
<tr><th id="6219">6219</th><td>{</td></tr>
<tr><th id="6220">6220</th><td>    <b>if</b> (<a class="local col2 ref" href="#532rcs" title='rcs' data-ref="532rcs" data-ref-filename="532rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="6221">6221</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col2 ref" href="#532rcs" title='rcs' data-ref="532rcs" data-ref-filename="532rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6222">6222</th><td></td></tr>
<tr><th id="6223">6223</th><td>    <b>return</b> <a class="local col2 ref" href="#532rcs" title='rcs' data-ref="532rcs" data-ref-filename="532rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a>;</td></tr>
<tr><th id="6224">6224</th><td>}</td></tr>
<tr><th id="6225">6225</th><td></td></tr>
<tr><th id="6226">6226</th><td></td></tr>
<tr><th id="6227">6227</th><td></td></tr>
<tr><th id="6228">6228</th><td><i  data-doc="findtag">/* Return a nonzero value if the revision specified by ARG is found.  */</i></td></tr>
<tr><th id="6229">6229</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="6230">6230</th><td><dfn class="tu decl def fn" id="findtag" title='findtag' data-type='int findtag(Node * node, void * arg)' data-ref="findtag" data-ref-filename="findtag">findtag</dfn> (<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col3 decl" id="533node" title='node' data-type='Node *' data-ref="533node" data-ref-filename="533node">node</dfn>, <em>void</em> *<dfn class="local col4 decl" id="534arg" title='arg' data-type='void *' data-ref="534arg" data-ref-filename="534arg">arg</dfn>)</td></tr>
<tr><th id="6231">6231</th><td>{</td></tr>
<tr><th id="6232">6232</th><td>    <em>char</em> *<dfn class="local col5 decl" id="535rev" title='rev' data-type='char *' data-ref="535rev" data-ref-filename="535rev">rev</dfn> = <a class="local col4 ref" href="#534arg" title='arg' data-ref="534arg" data-ref-filename="534arg">arg</a>;</td></tr>
<tr><th id="6233">6233</th><td></td></tr>
<tr><th id="6234">6234</th><td>    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(node-&gt;data) == *(char *)(rev) &amp;&amp; strcmp ((node-&gt;data), (rev)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col3 ref" href="#533node" title='node' data-ref="533node" data-ref-filename="533node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>, <a class="local col5 ref" href="#535rev" title='rev' data-ref="535rev" data-ref-filename="535rev">rev</a>))</td></tr>
<tr><th id="6235">6235</th><td>	<b>return</b> <var>1</var>;</td></tr>
<tr><th id="6236">6236</th><td>    <b>else</b></td></tr>
<tr><th id="6237">6237</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="6238">6238</th><td>}</td></tr>
<tr><th id="6239">6239</th><td></td></tr>
<tr><th id="6240">6240</th><td></td></tr>
<tr><th id="6241">6241</th><td></td></tr>
<tr><th id="6242">6242</th><td><i>/* Delete revisions between REV1 and REV2.  The changes between the two</i></td></tr>
<tr><th id="6243">6243</th><td><i>   revisions must be collapsed, and the result stored in the revision</i></td></tr>
<tr><th id="6244">6244</th><td><i>   immediately preceding the lower one.  Return 0 for successful completion,</i></td></tr>
<tr><th id="6245">6245</th><td><i>   1 otherwise.</i></td></tr>
<tr><th id="6246">6246</th><td><i></i></td></tr>
<tr><th id="6247">6247</th><td><i>   Solution: check out the revision preceding REV1 and the revision</i></td></tr>
<tr><th id="6248">6248</th><td><i>   following REV2.  Use call_diff to find aggregate diffs between</i></td></tr>
<tr><th id="6249">6249</th><td><i>   these two revisions, and replace the delta text for the latter one</i></td></tr>
<tr><th id="6250">6250</th><td><i>   with the new aggregate diff.  Alternatively, we could write a</i></td></tr>
<tr><th id="6251">6251</th><td><i>   function that takes two change texts and combines them to produce a</i></td></tr>
<tr><th id="6252">6252</th><td><i>   new change text, without checking out any revs or calling diff.  It</i></td></tr>
<tr><th id="6253">6253</th><td><i>   would be hairy, but so, so cool.</i></td></tr>
<tr><th id="6254">6254</th><td><i></i></td></tr>
<tr><th id="6255">6255</th><td><i>   If INCLUSIVE is set, then TAG1 and TAG2, if non-NULL, tell us to</i></td></tr>
<tr><th id="6256">6256</th><td><i>   delete that revision as well (cvs admin -o tag1:tag2).  If clear,</i></td></tr>
<tr><th id="6257">6257</th><td><i>   delete up to but not including that revision (cvs admin -o tag1::tag2).</i></td></tr>
<tr><th id="6258">6258</th><td><i>   This does not affect TAG1 or TAG2 being NULL; the meaning of the start</i></td></tr>
<tr><th id="6259">6259</th><td><i>   point in ::tag2 and :tag2 is the same and likewise for end points.  */</i></td></tr>
<tr><th id="6260">6260</th><td><em>int</em></td></tr>
<tr><th id="6261">6261</th><td><dfn class="decl def fn" id="RCS_delete_revs" title='RCS_delete_revs' data-ref="RCS_delete_revs" data-ref-filename="RCS_delete_revs">RCS_delete_revs</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col6 decl" id="536rcs" title='rcs' data-type='RCSNode *' data-ref="536rcs" data-ref-filename="536rcs">rcs</dfn>, <em>char</em> *<dfn class="local col7 decl" id="537tag1" title='tag1' data-type='char *' data-ref="537tag1" data-ref-filename="537tag1">tag1</dfn>, <em>char</em> *<dfn class="local col8 decl" id="538tag2" title='tag2' data-type='char *' data-ref="538tag2" data-ref-filename="538tag2">tag2</dfn>, <em>int</em> <dfn class="local col9 decl" id="539inclusive" title='inclusive' data-type='int' data-ref="539inclusive" data-ref-filename="539inclusive">inclusive</dfn>)</td></tr>
<tr><th id="6262">6262</th><td>{</td></tr>
<tr><th id="6263">6263</th><td>    <em>char</em> *<dfn class="local col0 decl" id="540next" title='next' data-type='char *' data-ref="540next" data-ref-filename="540next">next</dfn>;</td></tr>
<tr><th id="6264">6264</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col1 decl" id="541nodep" title='nodep' data-type='Node *' data-ref="541nodep" data-ref-filename="541nodep">nodep</dfn>;</td></tr>
<tr><th id="6265">6265</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col2 decl" id="542revp" title='revp' data-type='RCSVers *' data-ref="542revp" data-ref-filename="542revp">revp</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6266">6266</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col3 decl" id="543beforep" title='beforep' data-type='RCSVers *' data-ref="543beforep" data-ref-filename="543beforep">beforep</dfn>;</td></tr>
<tr><th id="6267">6267</th><td>    <em>int</em> <dfn class="local col4 decl" id="544status" title='status' data-type='int' data-ref="544status" data-ref-filename="544status">status</dfn>, <dfn class="local col5 decl" id="545found" title='found' data-type='int' data-ref="545found" data-ref-filename="545found">found</dfn>;</td></tr>
<tr><th id="6268">6268</th><td>    <em>int</em> <dfn class="local col6 decl" id="546save_noexec" title='save_noexec' data-type='int' data-ref="546save_noexec" data-ref-filename="546save_noexec">save_noexec</dfn>;</td></tr>
<tr><th id="6269">6269</th><td></td></tr>
<tr><th id="6270">6270</th><td>    <em>char</em> *<dfn class="local col7 decl" id="547branchpoint" title='branchpoint' data-type='char *' data-ref="547branchpoint" data-ref-filename="547branchpoint">branchpoint</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6271">6271</th><td>    <em>char</em> *<dfn class="local col8 decl" id="548rev1" title='rev1' data-type='char *' data-ref="548rev1" data-ref-filename="548rev1">rev1</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6272">6272</th><td>    <em>char</em> *<dfn class="local col9 decl" id="549rev2" title='rev2' data-type='char *' data-ref="549rev2" data-ref-filename="549rev2">rev2</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6273">6273</th><td>    <em>int</em> <dfn class="local col0 decl" id="550rev1_inclusive" title='rev1_inclusive' data-type='int' data-ref="550rev1_inclusive" data-ref-filename="550rev1_inclusive">rev1_inclusive</dfn> = <a class="local col9 ref" href="#539inclusive" title='inclusive' data-ref="539inclusive" data-ref-filename="539inclusive">inclusive</a>;</td></tr>
<tr><th id="6274">6274</th><td>    <em>int</em> <dfn class="local col1 decl" id="551rev2_inclusive" title='rev2_inclusive' data-type='int' data-ref="551rev2_inclusive" data-ref-filename="551rev2_inclusive">rev2_inclusive</dfn> = <a class="local col9 ref" href="#539inclusive" title='inclusive' data-ref="539inclusive" data-ref-filename="539inclusive">inclusive</a>;</td></tr>
<tr><th id="6275">6275</th><td>    <em>char</em> *<dfn class="local col2 decl" id="552before" title='before' data-type='char *' data-ref="552before" data-ref-filename="552before">before</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6276">6276</th><td>    <em>char</em> *<dfn class="local col3 decl" id="553after" title='after' data-type='char *' data-ref="553after" data-ref-filename="553after">after</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6277">6277</th><td>    <em>char</em> *<dfn class="local col4 decl" id="554beforefile" title='beforefile' data-type='char *' data-ref="554beforefile" data-ref-filename="554beforefile">beforefile</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6278">6278</th><td>    <em>char</em> *<dfn class="local col5 decl" id="555afterfile" title='afterfile' data-type='char *' data-ref="555afterfile" data-ref-filename="555afterfile">afterfile</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6279">6279</th><td>    <em>char</em> *<dfn class="local col6 decl" id="556outfile" title='outfile' data-type='char *' data-ref="556outfile" data-ref-filename="556outfile">outfile</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6280">6280</th><td></td></tr>
<tr><th id="6281">6281</th><td>    <b>if</b> (<a class="local col7 ref" href="#537tag1" title='tag1' data-ref="537tag1" data-ref-filename="537tag1">tag1</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="local col8 ref" href="#538tag2" title='tag2' data-ref="538tag2" data-ref-filename="538tag2">tag2</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6282">6282</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="6283">6283</th><td></td></tr>
<tr><th id="6284">6284</th><td>    <i>/* Assume error status until everything is finished. */</i></td></tr>
<tr><th id="6285">6285</th><td>    <a class="local col4 ref" href="#544status" title='status' data-ref="544status" data-ref-filename="544status">status</a> = <var>1</var>;</td></tr>
<tr><th id="6286">6286</th><td></td></tr>
<tr><th id="6287">6287</th><td>    <i>/* Make sure both revisions exist. */</i></td></tr>
<tr><th id="6288">6288</th><td>    <b>if</b> (<a class="local col7 ref" href="#537tag1" title='tag1' data-ref="537tag1" data-ref-filename="537tag1">tag1</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6289">6289</th><td>    {</td></tr>
<tr><th id="6290">6290</th><td>	<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> = <a class="ref fn" href="#RCS_gettag" title='RCS_gettag' data-ref="RCS_gettag" data-ref-filename="RCS_gettag">RCS_gettag</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>, <a class="local col7 ref" href="#537tag1" title='tag1' data-ref="537tag1" data-ref-filename="537tag1">tag1</a>, <var>1</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6291">6291</th><td>	<b>if</b> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || (<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>)) == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6292">6292</th><td>	{</td></tr>
<tr><th id="6293">6293</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: Revision %s doesn't exist."</q>, <a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col7 ref" href="#537tag1" title='tag1' data-ref="537tag1" data-ref-filename="537tag1">tag1</a>);</td></tr>
<tr><th id="6294">6294</th><td>	    <b>goto</b> <a class="lbl" href="#557delrev_done" data-ref="557delrev_done" data-ref-filename="557delrev_done">delrev_done</a>;</td></tr>
<tr><th id="6295">6295</th><td>	}</td></tr>
<tr><th id="6296">6296</th><td>    }</td></tr>
<tr><th id="6297">6297</th><td>    <b>if</b> (<a class="local col8 ref" href="#538tag2" title='tag2' data-ref="538tag2" data-ref-filename="538tag2">tag2</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6298">6298</th><td>    {</td></tr>
<tr><th id="6299">6299</th><td>	<a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> = <a class="ref fn" href="#RCS_gettag" title='RCS_gettag' data-ref="RCS_gettag" data-ref-filename="RCS_gettag">RCS_gettag</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>, <a class="local col8 ref" href="#538tag2" title='tag2' data-ref="538tag2" data-ref-filename="538tag2">tag2</a>, <var>1</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6300">6300</th><td>	<b>if</b> (<a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || (<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a>)) == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6301">6301</th><td>	{</td></tr>
<tr><th id="6302">6302</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: Revision %s doesn't exist."</q>, <a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col8 ref" href="#538tag2" title='tag2' data-ref="538tag2" data-ref-filename="538tag2">tag2</a>);</td></tr>
<tr><th id="6303">6303</th><td>	    <b>goto</b> <a class="lbl" href="#557delrev_done" data-ref="557delrev_done" data-ref-filename="557delrev_done">delrev_done</a>;</td></tr>
<tr><th id="6304">6304</th><td>	}</td></tr>
<tr><th id="6305">6305</th><td>    }</td></tr>
<tr><th id="6306">6306</th><td></td></tr>
<tr><th id="6307">6307</th><td>    <i>/* If rev1 is on the trunk and rev2 is NULL, rev2 should be</i></td></tr>
<tr><th id="6308">6308</th><td><i>       RCS-&gt;HEAD.  (*Not* RCS_head(rcs), which may return rcs-&gt;branch</i></td></tr>
<tr><th id="6309">6309</th><td><i>       instead.)  We need to check this special case early, in order</i></td></tr>
<tr><th id="6310">6310</th><td><i>       to make sure that rev1 and rev2 get ordered correctly. */</i></td></tr>
<tr><th id="6311">6311</th><td>    <b>if</b> (<a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>) == <var>1</var>)</td></tr>
<tr><th id="6312">6312</th><td>    {</td></tr>
<tr><th id="6313">6313</th><td>	<a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>);</td></tr>
<tr><th id="6314">6314</th><td>	<a class="local col1 ref" href="#551rev2_inclusive" title='rev2_inclusive' data-ref="551rev2_inclusive" data-ref-filename="551rev2_inclusive">rev2_inclusive</a> = <var>1</var>;</td></tr>
<tr><th id="6315">6315</th><td>    }</td></tr>
<tr><th id="6316">6316</th><td></td></tr>
<tr><th id="6317">6317</th><td>    <b>if</b> (<a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6318">6318</th><td>	<a class="local col1 ref" href="#551rev2_inclusive" title='rev2_inclusive' data-ref="551rev2_inclusive" data-ref-filename="551rev2_inclusive">rev2_inclusive</a> = <var>1</var>;</td></tr>
<tr><th id="6319">6319</th><td></td></tr>
<tr><th id="6320">6320</th><td>    <b>if</b> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6321">6321</th><td>    {</td></tr>
<tr><th id="6322">6322</th><td>	<i>/* A range consisting of a branch number means the latest revision</i></td></tr>
<tr><th id="6323">6323</th><td><i>	   on that branch. */</i></td></tr>
<tr><th id="6324">6324</th><td>	<b>if</b> (<a class="ref fn" href="#RCS_isbranch" title='RCS_isbranch' data-ref="RCS_isbranch" data-ref-filename="RCS_isbranch">RCS_isbranch</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>, <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>) &amp;&amp; <a class="macro" href="#138" title="(*(char *)(rev1) == *(char *)(rev2) &amp;&amp; strcmp ((rev1), (rev2)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>, <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a>))</td></tr>
<tr><th id="6325">6325</th><td>	{</td></tr>
<tr><th id="6326">6326</th><td>	    <em>char</em> *<dfn class="local col8 decl" id="558tmp" title='tmp' data-type='char *' data-ref="558tmp" data-ref-filename="558tmp">tmp</dfn> = <a class="ref fn" href="#RCS_getbranch" title='RCS_getbranch' data-ref="RCS_getbranch" data-ref-filename="RCS_getbranch">RCS_getbranch</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>, <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>, <var>0</var>);</td></tr>
<tr><th id="6327">6327</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>);</td></tr>
<tr><th id="6328">6328</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a>);</td></tr>
<tr><th id="6329">6329</th><td>	    <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> = <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> = <a class="local col8 ref" href="#558tmp" title='tmp' data-ref="558tmp" data-ref-filename="558tmp">tmp</a>;</td></tr>
<tr><th id="6330">6330</th><td>	}</td></tr>
<tr><th id="6331">6331</th><td>	<b>else</b></td></tr>
<tr><th id="6332">6332</th><td>	{</td></tr>
<tr><th id="6333">6333</th><td>	    <i>/* Make sure REV1 and REV2 are ordered correctly (in the</i></td></tr>
<tr><th id="6334">6334</th><td><i>	       same order as the next field).  For revisions on the</i></td></tr>
<tr><th id="6335">6335</th><td><i>	       trunk, REV1 should be higher than REV2; for branches,</i></td></tr>
<tr><th id="6336">6336</th><td><i>	       REV1 should be lower.  */</i></td></tr>
<tr><th id="6337">6337</th><td>	    <i>/* Shouldn't we just be giving an error in the case where</i></td></tr>
<tr><th id="6338">6338</th><td><i>	       the user specifies the revisions in the wrong order</i></td></tr>
<tr><th id="6339">6339</th><td><i>	       (that is, always swap on the trunk, never swap on a</i></td></tr>
<tr><th id="6340">6340</th><td><i>	       branch, in the non-error cases)?  It is not at all</i></td></tr>
<tr><th id="6341">6341</th><td><i>	       clear to me that users who specify -o 1.4:1.2 really</i></td></tr>
<tr><th id="6342">6342</th><td><i>	       meant to type -o 1.2:1.4, and the out of order usage</i></td></tr>
<tr><th id="6343">6343</th><td><i>	       has never been documented, either by cvs.texinfo or</i></td></tr>
<tr><th id="6344">6344</th><td><i>	       rcs(1).  */</i></td></tr>
<tr><th id="6345">6345</th><td>	    <em>char</em> *<dfn class="local col9 decl" id="559temp" title='temp' data-type='char *' data-ref="559temp" data-ref-filename="559temp">temp</dfn>;</td></tr>
<tr><th id="6346">6346</th><td>	    <em>int</em> <dfn class="local col0 decl" id="560temp_inclusive" title='temp_inclusive' data-type='int' data-ref="560temp_inclusive" data-ref-filename="560temp_inclusive">temp_inclusive</dfn>;</td></tr>
<tr><th id="6347">6347</th><td>	    <b>if</b> (<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>) == <var>1</var>)</td></tr>
<tr><th id="6348">6348</th><td>	    {</td></tr>
<tr><th id="6349">6349</th><td>		<b>if</b> (<a class="ref fn" href="subr.h.html#compare_revnums" title='compare_revnums' data-ref="compare_revnums" data-ref-filename="compare_revnums">compare_revnums</a> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>, <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a>) &lt;= <var>0</var>)</td></tr>
<tr><th id="6350">6350</th><td>		{</td></tr>
<tr><th id="6351">6351</th><td>		    <a class="local col9 ref" href="#559temp" title='temp' data-ref="559temp" data-ref-filename="559temp">temp</a> = <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a>;</td></tr>
<tr><th id="6352">6352</th><td>		    <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> = <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>;</td></tr>
<tr><th id="6353">6353</th><td>		    <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> = <a class="local col9 ref" href="#559temp" title='temp' data-ref="559temp" data-ref-filename="559temp">temp</a>;</td></tr>
<tr><th id="6354">6354</th><td></td></tr>
<tr><th id="6355">6355</th><td>		    <a class="local col0 ref" href="#560temp_inclusive" title='temp_inclusive' data-ref="560temp_inclusive" data-ref-filename="560temp_inclusive">temp_inclusive</a> = <a class="local col1 ref" href="#551rev2_inclusive" title='rev2_inclusive' data-ref="551rev2_inclusive" data-ref-filename="551rev2_inclusive">rev2_inclusive</a>;</td></tr>
<tr><th id="6356">6356</th><td>		    <a class="local col1 ref" href="#551rev2_inclusive" title='rev2_inclusive' data-ref="551rev2_inclusive" data-ref-filename="551rev2_inclusive">rev2_inclusive</a> = <a class="local col0 ref" href="#550rev1_inclusive" title='rev1_inclusive' data-ref="550rev1_inclusive" data-ref-filename="550rev1_inclusive">rev1_inclusive</a>;</td></tr>
<tr><th id="6357">6357</th><td>		    <a class="local col0 ref" href="#550rev1_inclusive" title='rev1_inclusive' data-ref="550rev1_inclusive" data-ref-filename="550rev1_inclusive">rev1_inclusive</a> = <a class="local col0 ref" href="#560temp_inclusive" title='temp_inclusive' data-ref="560temp_inclusive" data-ref-filename="560temp_inclusive">temp_inclusive</a>;</td></tr>
<tr><th id="6358">6358</th><td>		}</td></tr>
<tr><th id="6359">6359</th><td>	    }</td></tr>
<tr><th id="6360">6360</th><td>	    <b>else</b> <b>if</b> (<a class="ref fn" href="subr.h.html#compare_revnums" title='compare_revnums' data-ref="compare_revnums" data-ref-filename="compare_revnums">compare_revnums</a> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>, <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a>) &gt; <var>0</var>)</td></tr>
<tr><th id="6361">6361</th><td>	    {</td></tr>
<tr><th id="6362">6362</th><td>		<a class="local col9 ref" href="#559temp" title='temp' data-ref="559temp" data-ref-filename="559temp">temp</a> = <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a>;</td></tr>
<tr><th id="6363">6363</th><td>		<a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> = <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>;</td></tr>
<tr><th id="6364">6364</th><td>		<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> = <a class="local col9 ref" href="#559temp" title='temp' data-ref="559temp" data-ref-filename="559temp">temp</a>;</td></tr>
<tr><th id="6365">6365</th><td></td></tr>
<tr><th id="6366">6366</th><td>		<a class="local col0 ref" href="#560temp_inclusive" title='temp_inclusive' data-ref="560temp_inclusive" data-ref-filename="560temp_inclusive">temp_inclusive</a> = <a class="local col1 ref" href="#551rev2_inclusive" title='rev2_inclusive' data-ref="551rev2_inclusive" data-ref-filename="551rev2_inclusive">rev2_inclusive</a>;</td></tr>
<tr><th id="6367">6367</th><td>		<a class="local col1 ref" href="#551rev2_inclusive" title='rev2_inclusive' data-ref="551rev2_inclusive" data-ref-filename="551rev2_inclusive">rev2_inclusive</a> = <a class="local col0 ref" href="#550rev1_inclusive" title='rev1_inclusive' data-ref="550rev1_inclusive" data-ref-filename="550rev1_inclusive">rev1_inclusive</a>;</td></tr>
<tr><th id="6368">6368</th><td>		<a class="local col0 ref" href="#550rev1_inclusive" title='rev1_inclusive' data-ref="550rev1_inclusive" data-ref-filename="550rev1_inclusive">rev1_inclusive</a> = <a class="local col0 ref" href="#560temp_inclusive" title='temp_inclusive' data-ref="560temp_inclusive" data-ref-filename="560temp_inclusive">temp_inclusive</a>;</td></tr>
<tr><th id="6369">6369</th><td>	    }</td></tr>
<tr><th id="6370">6370</th><td>	}</td></tr>
<tr><th id="6371">6371</th><td>    }</td></tr>
<tr><th id="6372">6372</th><td></td></tr>
<tr><th id="6373">6373</th><td>    <i>/* Basically the same thing; make sure that the ordering is what we</i></td></tr>
<tr><th id="6374">6374</th><td><i>       need.  */</i></td></tr>
<tr><th id="6375">6375</th><td>    <b>if</b> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6376">6376</th><td>    {</td></tr>
<tr><th id="6377">6377</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rev2 != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 6377, __func__, &quot;rev2 != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6378">6378</th><td>	<b>if</b> (<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a>) == <var>1</var>)</td></tr>
<tr><th id="6379">6379</th><td>	{</td></tr>
<tr><th id="6380">6380</th><td>	    <i>/* Swap rev1 and rev2.  */</i></td></tr>
<tr><th id="6381">6381</th><td>	    <em>int</em> <dfn class="local col1 decl" id="561temp_inclusive" title='temp_inclusive' data-type='int' data-ref="561temp_inclusive" data-ref-filename="561temp_inclusive">temp_inclusive</dfn>;</td></tr>
<tr><th id="6382">6382</th><td></td></tr>
<tr><th id="6383">6383</th><td>	    <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> = <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a>;</td></tr>
<tr><th id="6384">6384</th><td>	    <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6385">6385</th><td></td></tr>
<tr><th id="6386">6386</th><td>	    <a class="local col1 ref" href="#561temp_inclusive" title='temp_inclusive' data-ref="561temp_inclusive" data-ref-filename="561temp_inclusive">temp_inclusive</a> = <a class="local col1 ref" href="#551rev2_inclusive" title='rev2_inclusive' data-ref="551rev2_inclusive" data-ref-filename="551rev2_inclusive">rev2_inclusive</a>;</td></tr>
<tr><th id="6387">6387</th><td>	    <a class="local col1 ref" href="#551rev2_inclusive" title='rev2_inclusive' data-ref="551rev2_inclusive" data-ref-filename="551rev2_inclusive">rev2_inclusive</a> = <a class="local col0 ref" href="#550rev1_inclusive" title='rev1_inclusive' data-ref="550rev1_inclusive" data-ref-filename="550rev1_inclusive">rev1_inclusive</a>;</td></tr>
<tr><th id="6388">6388</th><td>	    <a class="local col0 ref" href="#550rev1_inclusive" title='rev1_inclusive' data-ref="550rev1_inclusive" data-ref-filename="550rev1_inclusive">rev1_inclusive</a> = <a class="local col1 ref" href="#561temp_inclusive" title='temp_inclusive' data-ref="561temp_inclusive" data-ref-filename="561temp_inclusive">temp_inclusive</a>;</td></tr>
<tr><th id="6389">6389</th><td>	}</td></tr>
<tr><th id="6390">6390</th><td>    }</td></tr>
<tr><th id="6391">6391</th><td></td></tr>
<tr><th id="6392">6392</th><td>    <i>/* Put the revision number preceding the first one to delete into</i></td></tr>
<tr><th id="6393">6393</th><td><i>       BEFORE (where "preceding" means according to the next field).</i></td></tr>
<tr><th id="6394">6394</th><td><i>       If the first revision to delete is the first revision on its</i></td></tr>
<tr><th id="6395">6395</th><td><i>       branch (e.g. 1.3.2.1), BEFORE should be the node on the trunk</i></td></tr>
<tr><th id="6396">6396</th><td><i>       at which the branch is rooted.  If the first revision to delete</i></td></tr>
<tr><th id="6397">6397</th><td><i>       is the head revision of the trunk, set BEFORE to NULL.</i></td></tr>
<tr><th id="6398">6398</th><td><i></i></td></tr>
<tr><th id="6399">6399</th><td><i>       Note that because BEFORE may not be on the same branch as REV1,</i></td></tr>
<tr><th id="6400">6400</th><td><i>       it is not very handy for navigating the revision tree.  It's</i></td></tr>
<tr><th id="6401">6401</th><td><i>       most useful just for checking out the revision preceding REV1. */</i></td></tr>
<tr><th id="6402">6402</th><td>    <a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6403">6403</th><td>    <a class="local col7 ref" href="#547branchpoint" title='branchpoint' data-ref="547branchpoint" data-ref-filename="547branchpoint">branchpoint</a> = <a class="tu ref fn" href="#RCS_getbranchpoint" title='RCS_getbranchpoint' data-use='c' data-ref="RCS_getbranchpoint" data-ref-filename="RCS_getbranchpoint">RCS_getbranchpoint</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>, <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> ? <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> : <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a>);</td></tr>
<tr><th id="6404">6404</th><td>    <b>if</b> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6405">6405</th><td>    {</td></tr>
<tr><th id="6406">6406</th><td>	<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col7 ref" href="#547branchpoint" title='branchpoint' data-ref="547branchpoint" data-ref-filename="547branchpoint">branchpoint</a>);</td></tr>
<tr><th id="6407">6407</th><td>	<b>if</b> (<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col7 ref" href="#547branchpoint" title='branchpoint' data-ref="547branchpoint" data-ref-filename="547branchpoint">branchpoint</a>) &gt; <var>1</var>)</td></tr>
<tr><th id="6408">6408</th><td>	{</td></tr>
<tr><th id="6409">6409</th><td>	    <em>char</em> *<dfn class="local col2 decl" id="562bp" title='bp' data-type='char *' data-ref="562bp" data-ref-filename="562bp">bp</dfn>;</td></tr>
<tr><th id="6410">6410</th><td>	    <a class="local col2 ref" href="#562bp" title='bp' data-ref="562bp" data-ref-filename="562bp">bp</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col7 ref" href="#547branchpoint" title='branchpoint' data-ref="547branchpoint" data-ref-filename="547branchpoint">branchpoint</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="6411">6411</th><td>	    <b>while</b> (*--<a class="local col2 ref" href="#562bp" title='bp' data-ref="562bp" data-ref-filename="562bp">bp</a> != <kbd>'.'</kbd>)</td></tr>
<tr><th id="6412">6412</th><td>		;</td></tr>
<tr><th id="6413">6413</th><td>	    *<a class="local col2 ref" href="#562bp" title='bp' data-ref="562bp" data-ref-filename="562bp">bp</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="6414">6414</th><td>	    <i>/* Note that this is exclusive, always, because the inclusive</i></td></tr>
<tr><th id="6415">6415</th><td><i>	       flag doesn't affect the meaning when rev1 == NULL.  */</i></td></tr>
<tr><th id="6416">6416</th><td>	    <a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col7 ref" href="#547branchpoint" title='branchpoint' data-ref="547branchpoint" data-ref-filename="547branchpoint">branchpoint</a>);</td></tr>
<tr><th id="6417">6417</th><td>	    *<a class="local col2 ref" href="#562bp" title='bp' data-ref="562bp" data-ref-filename="562bp">bp</a> = <kbd>'.'</kbd>;</td></tr>
<tr><th id="6418">6418</th><td>	}</td></tr>
<tr><th id="6419">6419</th><td>    }</td></tr>
<tr><th id="6420">6420</th><td>    <b>else</b> <b>if</b> (! <a class="macro" href="#138" title="(*(char *)(rev1) == *(char *)(branchpoint) &amp;&amp; strcmp ((rev1), (branchpoint)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>, <a class="local col7 ref" href="#547branchpoint" title='branchpoint' data-ref="547branchpoint" data-ref-filename="547branchpoint">branchpoint</a>))</td></tr>
<tr><th id="6421">6421</th><td>    {</td></tr>
<tr><th id="6422">6422</th><td>	<i>/* Walk deltas from BRANCHPOINT on, looking for REV1. */</i></td></tr>
<tr><th id="6423">6423</th><td>	<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col7 ref" href="#547branchpoint" title='branchpoint' data-ref="547branchpoint" data-ref-filename="547branchpoint">branchpoint</a>);</td></tr>
<tr><th id="6424">6424</th><td>	<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a> = <a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="6425">6425</th><td>	<b>while</b> (<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; ! <a class="macro" href="#138" title="(*(char *)(revp-&gt;next) == *(char *)(rev1) &amp;&amp; strcmp ((revp-&gt;next), (rev1)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>, <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>))</td></tr>
<tr><th id="6426">6426</th><td>	{</td></tr>
<tr><th id="6427">6427</th><td>	    <a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a> = <a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="6428">6428</th><td>	    <a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>);</td></tr>
<tr><th id="6429">6429</th><td>	}</td></tr>
<tr><th id="6430">6430</th><td>	<b>if</b> (<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6431">6431</th><td>	{</td></tr>
<tr><th id="6432">6432</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: Revision %s doesn't exist."</q>, <a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>);</td></tr>
<tr><th id="6433">6433</th><td>	    <b>goto</b> <a class="lbl" href="#557delrev_done" data-ref="557delrev_done" data-ref-filename="557delrev_done">delrev_done</a>;</td></tr>
<tr><th id="6434">6434</th><td>	}</td></tr>
<tr><th id="6435">6435</th><td>	<b>if</b> (<a class="local col0 ref" href="#550rev1_inclusive" title='rev1_inclusive' data-ref="550rev1_inclusive" data-ref-filename="550rev1_inclusive">rev1_inclusive</a>)</td></tr>
<tr><th id="6436">6436</th><td>	    <a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="6437">6437</th><td>	<b>else</b></td></tr>
<tr><th id="6438">6438</th><td>	{</td></tr>
<tr><th id="6439">6439</th><td>	    <a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a> = <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>;</td></tr>
<tr><th id="6440">6440</th><td>	    <a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a>);</td></tr>
<tr><th id="6441">6441</th><td>	    <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (((<a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *)<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>)-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>);</td></tr>
<tr><th id="6442">6442</th><td>	}</td></tr>
<tr><th id="6443">6443</th><td>    }</td></tr>
<tr><th id="6444">6444</th><td>    <b>else</b> <b>if</b> (!<a class="local col0 ref" href="#550rev1_inclusive" title='rev1_inclusive' data-ref="550rev1_inclusive" data-ref-filename="550rev1_inclusive">rev1_inclusive</a>)</td></tr>
<tr><th id="6445">6445</th><td>    {</td></tr>
<tr><th id="6446">6446</th><td>	<a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a> = <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>;</td></tr>
<tr><th id="6447">6447</th><td>	<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a>);</td></tr>
<tr><th id="6448">6448</th><td>	<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (((<a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *)<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>)-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>);</td></tr>
<tr><th id="6449">6449</th><td>    }</td></tr>
<tr><th id="6450">6450</th><td>    <b>else</b> <b>if</b> (<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col7 ref" href="#547branchpoint" title='branchpoint' data-ref="547branchpoint" data-ref-filename="547branchpoint">branchpoint</a>) &gt; <var>1</var>)</td></tr>
<tr><th id="6451">6451</th><td>    {</td></tr>
<tr><th id="6452">6452</th><td>	<i>/* Example: rev1 is "1.3.2.1", branchpoint is "1.3.2.1".</i></td></tr>
<tr><th id="6453">6453</th><td><i>	   Set before to "1.3".  */</i></td></tr>
<tr><th id="6454">6454</th><td>	<em>char</em> *<dfn class="local col3 decl" id="563bp" title='bp' data-type='char *' data-ref="563bp" data-ref-filename="563bp">bp</dfn>;</td></tr>
<tr><th id="6455">6455</th><td>	<a class="local col3 ref" href="#563bp" title='bp' data-ref="563bp" data-ref-filename="563bp">bp</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a> (<a class="local col7 ref" href="#547branchpoint" title='branchpoint' data-ref="547branchpoint" data-ref-filename="547branchpoint">branchpoint</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="6456">6456</th><td>	<b>while</b> (*--<a class="local col3 ref" href="#563bp" title='bp' data-ref="563bp" data-ref-filename="563bp">bp</a> != <kbd>'.'</kbd>)</td></tr>
<tr><th id="6457">6457</th><td>	    ;</td></tr>
<tr><th id="6458">6458</th><td>	*<a class="local col3 ref" href="#563bp" title='bp' data-ref="563bp" data-ref-filename="563bp">bp</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="6459">6459</th><td>	<a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col7 ref" href="#547branchpoint" title='branchpoint' data-ref="547branchpoint" data-ref-filename="547branchpoint">branchpoint</a>);</td></tr>
<tr><th id="6460">6460</th><td>	*<a class="local col3 ref" href="#563bp" title='bp' data-ref="563bp" data-ref-filename="563bp">bp</a> = <kbd>'.'</kbd>;</td></tr>
<tr><th id="6461">6461</th><td>    }</td></tr>
<tr><th id="6462">6462</th><td></td></tr>
<tr><th id="6463">6463</th><td>    <i>/* If any revision between REV1 and REV2 is locked or is a branch point,</i></td></tr>
<tr><th id="6464">6464</th><td><i>       we can't delete that revision and must abort. */</i></td></tr>
<tr><th id="6465">6465</th><td>    <a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6466">6466</th><td>    <a class="local col0 ref" href="#540next" title='next' data-ref="540next" data-ref-filename="540next">next</a> = <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>;</td></tr>
<tr><th id="6467">6467</th><td>    <a class="local col5 ref" href="#545found" title='found' data-ref="545found" data-ref-filename="545found">found</a> = <var>0</var>;</td></tr>
<tr><th id="6468">6468</th><td>    <b>while</b> (!<a class="local col5 ref" href="#545found" title='found' data-ref="545found" data-ref-filename="545found">found</a> &amp;&amp; <a class="local col0 ref" href="#540next" title='next' data-ref="540next" data-ref-filename="540next">next</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6469">6469</th><td>    {</td></tr>
<tr><th id="6470">6470</th><td>	<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col0 ref" href="#540next" title='next' data-ref="540next" data-ref-filename="540next">next</a>);</td></tr>
<tr><th id="6471">6471</th><td>	<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a> = <a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="6472">6472</th><td></td></tr>
<tr><th id="6473">6473</th><td>	<b>if</b> (<a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6474">6474</th><td>	    <a class="local col5 ref" href="#545found" title='found' data-ref="545found" data-ref-filename="545found">found</a> = <a class="macro" href="#138" title="(*(char *)(revp-&gt;version) == *(char *)(rev2) &amp;&amp; strcmp ((revp-&gt;version), (rev2)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a>);</td></tr>
<tr><th id="6475">6475</th><td>	<a class="local col0 ref" href="#540next" title='next' data-ref="540next" data-ref-filename="540next">next</a> = <a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>;</td></tr>
<tr><th id="6476">6476</th><td></td></tr>
<tr><th id="6477">6477</th><td>	<b>if</b> ((!<a class="local col5 ref" href="#545found" title='found' data-ref="545found" data-ref-filename="545found">found</a> &amp;&amp; <a class="local col0 ref" href="#540next" title='next' data-ref="540next" data-ref-filename="540next">next</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) || <a class="local col1 ref" href="#551rev2_inclusive" title='rev2_inclusive' data-ref="551rev2_inclusive" data-ref-filename="551rev2_inclusive">rev2_inclusive</a> || <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6478">6478</th><td>	{</td></tr>
<tr><th id="6479">6479</th><td>	    <b>if</b> (<a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="ref fn" href="#RCS_getlocks" title='RCS_getlocks' data-ref="RCS_getlocks" data-ref-filename="RCS_getlocks">RCS_getlocks</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>), <a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>))</td></tr>
<tr><th id="6480">6480</th><td>	    {</td></tr>
<tr><th id="6481">6481</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: can't remove locked revision %s"</q>,</td></tr>
<tr><th id="6482">6482</th><td>		       <a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>,</td></tr>
<tr><th id="6483">6483</th><td>		       <a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="6484">6484</th><td>		<b>goto</b> <a class="lbl" href="#557delrev_done" data-ref="557delrev_done" data-ref-filename="557delrev_done">delrev_done</a>;</td></tr>
<tr><th id="6485">6485</th><td>	    }</td></tr>
<tr><th id="6486">6486</th><td>	    <b>if</b> (<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6487">6487</th><td>	    {</td></tr>
<tr><th id="6488">6488</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: can't remove branch point %s"</q>,</td></tr>
<tr><th id="6489">6489</th><td>		       <a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>,</td></tr>
<tr><th id="6490">6490</th><td>		       <a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="6491">6491</th><td>		<b>goto</b> <a class="lbl" href="#557delrev_done" data-ref="557delrev_done" data-ref-filename="557delrev_done">delrev_done</a>;</td></tr>
<tr><th id="6492">6492</th><td>	    }</td></tr>
<tr><th id="6493">6493</th><td></td></tr>
<tr><th id="6494">6494</th><td>	    <i>/* Doing this only for the :: syntax is for compatibility.</i></td></tr>
<tr><th id="6495">6495</th><td><i>	       See cvs.texinfo for somewhat more discussion.  */</i></td></tr>
<tr><th id="6496">6496</th><td>	    <b>if</b> (!<a class="local col9 ref" href="#539inclusive" title='inclusive' data-ref="539inclusive" data-ref-filename="539inclusive">inclusive</a></td></tr>
<tr><th id="6497">6497</th><td>		&amp;&amp; <a class="ref fn" href="hash.h.html#walklist" title='walklist' data-ref="walklist" data-ref-filename="walklist">walklist</a> (<a class="ref fn" href="#RCS_symbols" title='RCS_symbols' data-ref="RCS_symbols" data-ref-filename="RCS_symbols">RCS_symbols</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>), <a class="tu ref fn" href="#findtag" title='findtag' data-use='r' data-ref="findtag" data-ref-filename="findtag">findtag</a>, <a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>))</td></tr>
<tr><th id="6498">6498</th><td>	    {</td></tr>
<tr><th id="6499">6499</th><td>		<i>/* We don't print which file this happens to on the theory</i></td></tr>
<tr><th id="6500">6500</th><td><i>		   that the caller will print the name of the file in a</i></td></tr>
<tr><th id="6501">6501</th><td><i>		   more useful fashion (fullname not rcs-&gt;path).  */</i></td></tr>
<tr><th id="6502">6502</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"cannot remove revision %s because it has tags"</q>,</td></tr>
<tr><th id="6503">6503</th><td>		       <a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="6504">6504</th><td>		<b>goto</b> <a class="lbl" href="#557delrev_done" data-ref="557delrev_done" data-ref-filename="557delrev_done">delrev_done</a>;</td></tr>
<tr><th id="6505">6505</th><td>	    }</td></tr>
<tr><th id="6506">6506</th><td></td></tr>
<tr><th id="6507">6507</th><td>	    <i>/* It's misleading to print the `deleting revision' output</i></td></tr>
<tr><th id="6508">6508</th><td><i>	       here, since we may not actually delete these revisions.</i></td></tr>
<tr><th id="6509">6509</th><td><i>	       But that's how RCS does it.  Bleah.  Someday this should be</i></td></tr>
<tr><th id="6510">6510</th><td><i>	       moved to the point where the revs are actually marked for</i></td></tr>
<tr><th id="6511">6511</th><td><i>	       deletion. -twp */</i></td></tr>
<tr><th id="6512">6512</th><td>	    <a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"deleting revision "</q>, <var>0</var>);</td></tr>
<tr><th id="6513">6513</th><td>	    <a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>, <var>0</var>);</td></tr>
<tr><th id="6514">6514</th><td>	    <a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"\n"</q>, <var>1</var>);</td></tr>
<tr><th id="6515">6515</th><td>	}</td></tr>
<tr><th id="6516">6516</th><td>    }</td></tr>
<tr><th id="6517">6517</th><td></td></tr>
<tr><th id="6518">6518</th><td>    <b>if</b> (<a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6519">6519</th><td>	;</td></tr>
<tr><th id="6520">6520</th><td>    <b>else</b> <b>if</b> (<a class="local col5 ref" href="#545found" title='found' data-ref="545found" data-ref-filename="545found">found</a>)</td></tr>
<tr><th id="6521">6521</th><td>    {</td></tr>
<tr><th id="6522">6522</th><td>	<b>if</b> (<a class="local col1 ref" href="#551rev2_inclusive" title='rev2_inclusive' data-ref="551rev2_inclusive" data-ref-filename="551rev2_inclusive">rev2_inclusive</a>)</td></tr>
<tr><th id="6523">6523</th><td>	    <a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col0 ref" href="#540next" title='next' data-ref="540next" data-ref-filename="540next">next</a>);</td></tr>
<tr><th id="6524">6524</th><td>	<b>else</b></td></tr>
<tr><th id="6525">6525</th><td>	    <a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="6526">6526</th><td>    }</td></tr>
<tr><th id="6527">6527</th><td>    <b>else</b> <b>if</b> (!<a class="local col9 ref" href="#539inclusive" title='inclusive' data-ref="539inclusive" data-ref-filename="539inclusive">inclusive</a>)</td></tr>
<tr><th id="6528">6528</th><td>    {</td></tr>
<tr><th id="6529">6529</th><td>	<i>/* In the case of an empty range, for example 1.2::1.2 or</i></td></tr>
<tr><th id="6530">6530</th><td><i>	   1.2::1.3, we want to just do nothing.  */</i></td></tr>
<tr><th id="6531">6531</th><td>	<a class="local col4 ref" href="#544status" title='status' data-ref="544status" data-ref-filename="544status">status</a> = <var>0</var>;</td></tr>
<tr><th id="6532">6532</th><td>	<b>goto</b> <a class="lbl" href="#557delrev_done" data-ref="557delrev_done" data-ref-filename="557delrev_done">delrev_done</a>;</td></tr>
<tr><th id="6533">6533</th><td>    }</td></tr>
<tr><th id="6534">6534</th><td>    <b>else</b></td></tr>
<tr><th id="6535">6535</th><td>    {</td></tr>
<tr><th id="6536">6536</th><td>	<i>/* This looks fishy in the cases where tag1 == NULL or tag2 == NULL.</i></td></tr>
<tr><th id="6537">6537</th><td><i>	   Are those cases really impossible?  */</i></td></tr>
<tr><th id="6538">6538</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((tag1 != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 6538, __func__, &quot;tag1 != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col7 ref" href="#537tag1" title='tag1' data-ref="537tag1" data-ref-filename="537tag1">tag1</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6539">6539</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((tag2 != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 6539, __func__, &quot;tag2 != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col8 ref" href="#538tag2" title='tag2' data-ref="538tag2" data-ref-filename="538tag2">tag2</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6540">6540</th><td></td></tr>
<tr><th id="6541">6541</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: invalid revision range %s:%s"</q>, <a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>,</td></tr>
<tr><th id="6542">6542</th><td>	       <a class="local col7 ref" href="#537tag1" title='tag1' data-ref="537tag1" data-ref-filename="537tag1">tag1</a>, <a class="local col8 ref" href="#538tag2" title='tag2' data-ref="538tag2" data-ref-filename="538tag2">tag2</a>);</td></tr>
<tr><th id="6543">6543</th><td>	<b>goto</b> <a class="lbl" href="#557delrev_done" data-ref="557delrev_done" data-ref-filename="557delrev_done">delrev_done</a>;</td></tr>
<tr><th id="6544">6544</th><td>    }</td></tr>
<tr><th id="6545">6545</th><td></td></tr>
<tr><th id="6546">6546</th><td>    <b>if</b> (<a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6547">6547</th><td>    {</td></tr>
<tr><th id="6548">6548</th><td>	<i>/* The user is trying to delete all revisions.  While an</i></td></tr>
<tr><th id="6549">6549</th><td><i>	   RCS file without revisions makes sense to RCS (e.g. the</i></td></tr>
<tr><th id="6550">6550</th><td><i>	   state after "rcs -i"), CVS has never been able to cope with</i></td></tr>
<tr><th id="6551">6551</th><td><i>	   it.  So at least for now we just make this an error.</i></td></tr>
<tr><th id="6552">6552</th><td><i></i></td></tr>
<tr><th id="6553">6553</th><td><i>	   We don't include rcs-&gt;path in the message since "cvs admin"</i></td></tr>
<tr><th id="6554">6554</th><td><i>	   already printed "RCS file:" and the name.  */</i></td></tr>
<tr><th id="6555">6555</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"attempt to delete all revisions"</q>);</td></tr>
<tr><th id="6556">6556</th><td>    }</td></tr>
<tr><th id="6557">6557</th><td></td></tr>
<tr><th id="6558">6558</th><td>    <i>/* The conditionals at this point get really hairy.  Here is the</i></td></tr>
<tr><th id="6559">6559</th><td><i>       general idea:</i></td></tr>
<tr><th id="6560">6560</th><td><i></i></td></tr>
<tr><th id="6561">6561</th><td><i>       IF before != NULL and after == NULL</i></td></tr>
<tr><th id="6562">6562</th><td><i>         THEN don't check out any revisions, just delete them</i></td></tr>
<tr><th id="6563">6563</th><td><i>       IF before == NULL and after != NULL</i></td></tr>
<tr><th id="6564">6564</th><td><i>         THEN only check out after's revision, and use it for the new deltatext</i></td></tr>
<tr><th id="6565">6565</th><td><i>       ELSE</i></td></tr>
<tr><th id="6566">6566</th><td><i>         check out both revisions and diff -n them.  This could use</i></td></tr>
<tr><th id="6567">6567</th><td><i>	 RCS_exec_rcsdiff with some changes, like being able</i></td></tr>
<tr><th id="6568">6568</th><td><i>	 to suppress diagnostic messages and to direct output. */</i></td></tr>
<tr><th id="6569">6569</th><td></td></tr>
<tr><th id="6570">6570</th><td>    <b>if</b> (<a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6571">6571</th><td>    {</td></tr>
<tr><th id="6572">6572</th><td>	<em>char</em> *<dfn class="local col4 decl" id="564diffbuf" title='diffbuf' data-type='char *' data-ref="564diffbuf" data-ref-filename="564diffbuf">diffbuf</dfn>;</td></tr>
<tr><th id="6573">6573</th><td>	<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col5 decl" id="565bufsize" title='bufsize' data-type='size_t' data-ref="565bufsize" data-ref-filename="565bufsize">bufsize</dfn>, <dfn class="local col6 decl" id="566len" title='len' data-type='size_t' data-ref="566len" data-ref-filename="566len">len</dfn>;</td></tr>
<tr><th id="6574">6574</th><td></td></tr>
<tr><th id="6575">6575</th><td><u>#<span data-ppcond="6575">if</span> defined (<span class="macro" data-ref="_M/WOE32">WOE32</span>) &amp;&amp; !defined (<span class="macro" data-ref="_M/__CYGWIN32__">__CYGWIN32__</span>)</u></td></tr>
<tr><th id="6576">6576</th><td>	<i>/* FIXME: This is an awful kludge, but at least until I have</i></td></tr>
<tr><th id="6577">6577</th><td><i>	   time to work on it a little more and test it, I'd rather</i></td></tr>
<tr><th id="6578">6578</th><td><i>	   give a fatal error than corrupt the file.  I think that we</i></td></tr>
<tr><th id="6579">6579</th><td><i>	   need to use "-kb" and "--binary" and "rb" to get_file</i></td></tr>
<tr><th id="6580">6580</th><td><i>	   (probably can do it always, not just for binary files, if</i></td></tr>
<tr><th id="6581">6581</th><td><i>	   we are consistent between the RCS_checkout and the diff).  */</i></td></tr>
<tr><th id="6582">6582</th><td>	{</td></tr>
<tr><th id="6583">6583</th><td>	    <em>char</em> *expand = RCS_getexpand (rcs);</td></tr>
<tr><th id="6584">6584</th><td>	    <b>if</b> (expand != NULL &amp;&amp; STREQ (expand, <q>"b"</q>))</td></tr>
<tr><th id="6585">6585</th><td>		error (<var>1</var>, <var>0</var>,</td></tr>
<tr><th id="6586">6586</th><td>		   <q>"admin -o not implemented yet for binary on this system"</q>);</td></tr>
<tr><th id="6587">6587</th><td>	}</td></tr>
<tr><th id="6588">6588</th><td><u>#<span data-ppcond="6575">endif</span> /* WOE32 */</u></td></tr>
<tr><th id="6589">6589</th><td></td></tr>
<tr><th id="6590">6590</th><td>	<a class="local col5 ref" href="#555afterfile" title='afterfile' data-ref="555afterfile" data-ref-filename="555afterfile">afterfile</a> = <a class="ref fn" href="cvs.h.html#cvs_temp_name" title='cvs_temp_name' data-ref="cvs_temp_name" data-ref-filename="cvs_temp_name">cvs_temp_name</a>();</td></tr>
<tr><th id="6591">6591</th><td>	<a class="local col4 ref" href="#544status" title='status' data-ref="544status" data-ref-filename="544status">status</a> = <a class="ref fn" href="#RCS_checkout" title='RCS_checkout' data-ref="RCS_checkout" data-ref-filename="RCS_checkout">RCS_checkout</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <q>"-ko"</q>, <a class="local col5 ref" href="#555afterfile" title='afterfile' data-ref="555afterfile" data-ref-filename="555afterfile">afterfile</a>,</td></tr>
<tr><th id="6592">6592</th><td>			       <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6593">6593</th><td>	<b>if</b> (<a class="local col4 ref" href="#544status" title='status' data-ref="544status" data-ref-filename="544status">status</a> &gt; <var>0</var>)</td></tr>
<tr><th id="6594">6594</th><td>	    <b>goto</b> <a class="lbl" href="#557delrev_done" data-ref="557delrev_done" data-ref-filename="557delrev_done">delrev_done</a>;</td></tr>
<tr><th id="6595">6595</th><td></td></tr>
<tr><th id="6596">6596</th><td>	<b>if</b> (<a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6597">6597</th><td>	{</td></tr>
<tr><th id="6598">6598</th><td>	    <i>/* We are deleting revisions from the head of the tree,</i></td></tr>
<tr><th id="6599">6599</th><td><i>	       so must create a new head. */</i></td></tr>
<tr><th id="6600">6600</th><td>	    <a class="local col4 ref" href="#564diffbuf" title='diffbuf' data-ref="564diffbuf" data-ref-filename="564diffbuf">diffbuf</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6601">6601</th><td>	    <a class="local col5 ref" href="#565bufsize" title='bufsize' data-ref="565bufsize" data-ref-filename="565bufsize">bufsize</a> = <var>0</var>;</td></tr>
<tr><th id="6602">6602</th><td>	    <a class="ref fn" href="subr.h.html#get_file" title='get_file' data-ref="get_file" data-ref-filename="get_file">get_file</a> (<a class="local col5 ref" href="#555afterfile" title='afterfile' data-ref="555afterfile" data-ref-filename="555afterfile">afterfile</a>, <a class="local col5 ref" href="#555afterfile" title='afterfile' data-ref="555afterfile" data-ref-filename="555afterfile">afterfile</a>, <q>"r"</q>, &amp;<a class="local col4 ref" href="#564diffbuf" title='diffbuf' data-ref="564diffbuf" data-ref-filename="564diffbuf">diffbuf</a>, &amp;<a class="local col5 ref" href="#565bufsize" title='bufsize' data-ref="565bufsize" data-ref-filename="565bufsize">bufsize</a>, &amp;<a class="local col6 ref" href="#566len" title='len' data-ref="566len" data-ref-filename="566len">len</a>);</td></tr>
<tr><th id="6603">6603</th><td></td></tr>
<tr><th id="6604">6604</th><td>	    <a class="local col6 ref" href="#546save_noexec" title='save_noexec' data-ref="546save_noexec" data-ref-filename="546save_noexec">save_noexec</a> = <a class="ref" href="cvs.h.html#noexec" title='noexec' data-ref="noexec" data-ref-filename="noexec">noexec</a>;</td></tr>
<tr><th id="6605">6605</th><td>	    <a class="ref" href="cvs.h.html#noexec" title='noexec' data-ref="noexec" data-ref-filename="noexec">noexec</a> = <var>0</var>;</td></tr>
<tr><th id="6606">6606</th><td>	    <b>if</b> (<a class="ref fn" href="cvs.h.html#unlink_file" title='unlink_file' data-ref="unlink_file" data-ref-filename="unlink_file">unlink_file</a> (<a class="local col5 ref" href="#555afterfile" title='afterfile' data-ref="555afterfile" data-ref-filename="555afterfile">afterfile</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="6607">6607</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot remove %s"</q>, <a class="local col5 ref" href="#555afterfile" title='afterfile' data-ref="555afterfile" data-ref-filename="555afterfile">afterfile</a>);</td></tr>
<tr><th id="6608">6608</th><td>	    <a class="ref" href="cvs.h.html#noexec" title='noexec' data-ref="noexec" data-ref-filename="noexec">noexec</a> = <a class="local col6 ref" href="#546save_noexec" title='save_noexec' data-ref="546save_noexec" data-ref-filename="546save_noexec">save_noexec</a>;</td></tr>
<tr><th id="6609">6609</th><td></td></tr>
<tr><th id="6610">6610</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col5 ref" href="#555afterfile" title='afterfile' data-ref="555afterfile" data-ref-filename="555afterfile">afterfile</a>);</td></tr>
<tr><th id="6611">6611</th><td>	    <a class="local col5 ref" href="#555afterfile" title='afterfile' data-ref="555afterfile" data-ref-filename="555afterfile">afterfile</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6612">6612</th><td></td></tr>
<tr><th id="6613">6613</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>);</td></tr>
<tr><th id="6614">6614</th><td>	    <a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a>);</td></tr>
<tr><th id="6615">6615</th><td>	}</td></tr>
<tr><th id="6616">6616</th><td>	<b>else</b></td></tr>
<tr><th id="6617">6617</th><td>	{</td></tr>
<tr><th id="6618">6618</th><td>	    <em>int</em> <dfn class="local col7 decl" id="567dargc" title='dargc' data-type='int' data-ref="567dargc" data-ref-filename="567dargc">dargc</dfn> = <var>0</var>;</td></tr>
<tr><th id="6619">6619</th><td>	    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col8 decl" id="568darg_allocated" title='darg_allocated' data-type='size_t' data-ref="568darg_allocated" data-ref-filename="568darg_allocated">darg_allocated</dfn> = <var>0</var>;</td></tr>
<tr><th id="6620">6620</th><td>	    <em>char</em> **<dfn class="local col9 decl" id="569dargv" title='dargv' data-type='char **' data-ref="569dargv" data-ref-filename="569dargv">dargv</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6621">6621</th><td></td></tr>
<tr><th id="6622">6622</th><td>	    <a class="local col4 ref" href="#554beforefile" title='beforefile' data-ref="554beforefile" data-ref-filename="554beforefile">beforefile</a> = <a class="ref fn" href="cvs.h.html#cvs_temp_name" title='cvs_temp_name' data-ref="cvs_temp_name" data-ref-filename="cvs_temp_name">cvs_temp_name</a>();</td></tr>
<tr><th id="6623">6623</th><td>	    <a class="local col4 ref" href="#544status" title='status' data-ref="544status" data-ref-filename="544status">status</a> = <a class="ref fn" href="#RCS_checkout" title='RCS_checkout' data-ref="RCS_checkout" data-ref-filename="RCS_checkout">RCS_checkout</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <q>"-ko"</q>, <a class="local col4 ref" href="#554beforefile" title='beforefile' data-ref="554beforefile" data-ref-filename="554beforefile">beforefile</a>,</td></tr>
<tr><th id="6624">6624</th><td>				   <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6625">6625</th><td>	    <b>if</b> (<a class="local col4 ref" href="#544status" title='status' data-ref="544status" data-ref-filename="544status">status</a> &gt; <var>0</var>)</td></tr>
<tr><th id="6626">6626</th><td>		<b>goto</b> <a class="lbl" href="#557delrev_done" data-ref="557delrev_done" data-ref-filename="557delrev_done">delrev_done</a>;</td></tr>
<tr><th id="6627">6627</th><td></td></tr>
<tr><th id="6628">6628</th><td>	    <a class="local col6 ref" href="#556outfile" title='outfile' data-ref="556outfile" data-ref-filename="556outfile">outfile</a> = <a class="ref fn" href="cvs.h.html#cvs_temp_name" title='cvs_temp_name' data-ref="cvs_temp_name" data-ref-filename="cvs_temp_name">cvs_temp_name</a>();</td></tr>
<tr><th id="6629">6629</th><td>	    <a class="ref fn" href="cvs.h.html#run_add_arg_p" title='run_add_arg_p' data-ref="run_add_arg_p" data-ref-filename="run_add_arg_p">run_add_arg_p</a> (&amp;<a class="local col7 ref" href="#567dargc" title='dargc' data-ref="567dargc" data-ref-filename="567dargc">dargc</a>, &amp;<a class="local col8 ref" href="#568darg_allocated" title='darg_allocated' data-ref="568darg_allocated" data-ref-filename="568darg_allocated">darg_allocated</a>, &amp;<a class="local col9 ref" href="#569dargv" title='dargv' data-ref="569dargv" data-ref-filename="569dargv">dargv</a>, <q>"-a"</q>);</td></tr>
<tr><th id="6630">6630</th><td>	    <a class="ref fn" href="cvs.h.html#run_add_arg_p" title='run_add_arg_p' data-ref="run_add_arg_p" data-ref-filename="run_add_arg_p">run_add_arg_p</a> (&amp;<a class="local col7 ref" href="#567dargc" title='dargc' data-ref="567dargc" data-ref-filename="567dargc">dargc</a>, &amp;<a class="local col8 ref" href="#568darg_allocated" title='darg_allocated' data-ref="568darg_allocated" data-ref-filename="568darg_allocated">darg_allocated</a>, &amp;<a class="local col9 ref" href="#569dargv" title='dargv' data-ref="569dargv" data-ref-filename="569dargv">dargv</a>, <q>"-n"</q>);</td></tr>
<tr><th id="6631">6631</th><td>	    <a class="local col4 ref" href="#544status" title='status' data-ref="544status" data-ref-filename="544status">status</a> = <a class="ref fn" href="cvs.h.html#diff_exec" title='diff_exec' data-ref="diff_exec" data-ref-filename="diff_exec">diff_exec</a> (<a class="local col4 ref" href="#554beforefile" title='beforefile' data-ref="554beforefile" data-ref-filename="554beforefile">beforefile</a>, <a class="local col5 ref" href="#555afterfile" title='afterfile' data-ref="555afterfile" data-ref-filename="555afterfile">afterfile</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>,</td></tr>
<tr><th id="6632">6632</th><td>				<a class="local col7 ref" href="#567dargc" title='dargc' data-ref="567dargc" data-ref-filename="567dargc">dargc</a>, <a class="local col9 ref" href="#569dargv" title='dargv' data-ref="569dargv" data-ref-filename="569dargv">dargv</a>, <a class="local col6 ref" href="#556outfile" title='outfile' data-ref="556outfile" data-ref-filename="556outfile">outfile</a>);</td></tr>
<tr><th id="6633">6633</th><td>	    <a class="ref fn" href="cvs.h.html#run_arg_free_p" title='run_arg_free_p' data-ref="run_arg_free_p" data-ref-filename="run_arg_free_p">run_arg_free_p</a> (<a class="local col7 ref" href="#567dargc" title='dargc' data-ref="567dargc" data-ref-filename="567dargc">dargc</a>, <a class="local col9 ref" href="#569dargv" title='dargv' data-ref="569dargv" data-ref-filename="569dargv">dargv</a>);</td></tr>
<tr><th id="6634">6634</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col9 ref" href="#569dargv" title='dargv' data-ref="569dargv" data-ref-filename="569dargv">dargv</a>);</td></tr>
<tr><th id="6635">6635</th><td></td></tr>
<tr><th id="6636">6636</th><td>	    <b>if</b> (<a class="local col4 ref" href="#544status" title='status' data-ref="544status" data-ref-filename="544status">status</a> == <var>2</var>)</td></tr>
<tr><th id="6637">6637</th><td>	    {</td></tr>
<tr><th id="6638">6638</th><td>		<i>/* Not sure we need this message; will diff_exec already</i></td></tr>
<tr><th id="6639">6639</th><td><i>		   have printed an error?  */</i></td></tr>
<tr><th id="6640">6640</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"%s: could not diff"</q>, <a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="6641">6641</th><td>		<a class="local col4 ref" href="#544status" title='status' data-ref="544status" data-ref-filename="544status">status</a> = <var>1</var>;</td></tr>
<tr><th id="6642">6642</th><td>		<b>goto</b> <a class="lbl" href="#557delrev_done" data-ref="557delrev_done" data-ref-filename="557delrev_done">delrev_done</a>;</td></tr>
<tr><th id="6643">6643</th><td>	    }</td></tr>
<tr><th id="6644">6644</th><td></td></tr>
<tr><th id="6645">6645</th><td>	    <a class="local col4 ref" href="#564diffbuf" title='diffbuf' data-ref="564diffbuf" data-ref-filename="564diffbuf">diffbuf</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6646">6646</th><td>	    <a class="local col5 ref" href="#565bufsize" title='bufsize' data-ref="565bufsize" data-ref-filename="565bufsize">bufsize</a> = <var>0</var>;</td></tr>
<tr><th id="6647">6647</th><td>	    <a class="ref fn" href="subr.h.html#get_file" title='get_file' data-ref="get_file" data-ref-filename="get_file">get_file</a> (<a class="local col6 ref" href="#556outfile" title='outfile' data-ref="556outfile" data-ref-filename="556outfile">outfile</a>, <a class="local col6 ref" href="#556outfile" title='outfile' data-ref="556outfile" data-ref-filename="556outfile">outfile</a>, <q>"r"</q>, &amp;<a class="local col4 ref" href="#564diffbuf" title='diffbuf' data-ref="564diffbuf" data-ref-filename="564diffbuf">diffbuf</a>, &amp;<a class="local col5 ref" href="#565bufsize" title='bufsize' data-ref="565bufsize" data-ref-filename="565bufsize">bufsize</a>, &amp;<a class="local col6 ref" href="#566len" title='len' data-ref="566len" data-ref-filename="566len">len</a>);</td></tr>
<tr><th id="6648">6648</th><td>	}</td></tr>
<tr><th id="6649">6649</th><td></td></tr>
<tr><th id="6650">6650</th><td>	<i>/* Save the new change text in after's delta node. */</i></td></tr>
<tr><th id="6651">6651</th><td>	<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a>);</td></tr>
<tr><th id="6652">6652</th><td>	<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a> = <a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="6653">6653</th><td></td></tr>
<tr><th id="6654">6654</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((revp-&gt;text == ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 6654, __func__, &quot;revp-&gt;text == NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6655">6655</th><td></td></tr>
<tr><th id="6656">6656</th><td>	<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<b>sizeof</b> (<a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a>));</td></tr>
<tr><th id="6657">6657</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memset" title='memset' data-ref="memset" data-ref-filename="memset">memset</a> (<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>, <var>0</var>, <b>sizeof</b> (<a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a>));</td></tr>
<tr><th id="6658">6658</th><td>	<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::version" title='deltatext::version' data-ref="deltatext::version" data-ref-filename="deltatext..version">version</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>);</td></tr>
<tr><th id="6659">6659</th><td>	<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> = <a class="local col4 ref" href="#564diffbuf" title='diffbuf' data-ref="564diffbuf" data-ref-filename="564diffbuf">diffbuf</a>;</td></tr>
<tr><th id="6660">6660</th><td>	<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::len" title='deltatext::len' data-ref="deltatext::len" data-ref-filename="deltatext..len">len</a> = <a class="local col6 ref" href="#566len" title='len' data-ref="566len" data-ref-filename="566len">len</a>;</td></tr>
<tr><th id="6661">6661</th><td></td></tr>
<tr><th id="6662">6662</th><td>	<i>/* If DIFFBUF is NULL, it means that OUTFILE is empty and that</i></td></tr>
<tr><th id="6663">6663</th><td><i>	   there are no differences between the two revisions.  In that</i></td></tr>
<tr><th id="6664">6664</th><td><i>	   case, we want to force RCS_copydeltas to write an empty string</i></td></tr>
<tr><th id="6665">6665</th><td><i>	   for the new change text (leaving the text field set NULL</i></td></tr>
<tr><th id="6666">6666</th><td><i>	   means "preserve the original change text for this delta," so</i></td></tr>
<tr><th id="6667">6667</th><td><i>	   we don't want that). */</i></td></tr>
<tr><th id="6668">6668</th><td>	<b>if</b> (<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6669">6669</th><td>	    <a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<q>""</q>);</td></tr>
<tr><th id="6670">6670</th><td>    }</td></tr>
<tr><th id="6671">6671</th><td></td></tr>
<tr><th id="6672">6672</th><td>    <i>/* Walk through the revisions (again) to mark each one as</i></td></tr>
<tr><th id="6673">6673</th><td><i>       outdated.  (FIXME: would it be safe to use the `dead' field for</i></td></tr>
<tr><th id="6674">6674</th><td><i>       this?  Doubtful.) */</i></td></tr>
<tr><th id="6675">6675</th><td>    <b>for</b> (<a class="local col0 ref" href="#540next" title='next' data-ref="540next" data-ref-filename="540next">next</a> = <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>;</td></tr>
<tr><th id="6676">6676</th><td>	 <a class="local col0 ref" href="#540next" title='next' data-ref="540next" data-ref-filename="540next">next</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; (<a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || ! <a class="macro" href="#138" title="(*(char *)(next) == *(char *)(after) &amp;&amp; strcmp ((next), (after)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col0 ref" href="#540next" title='next' data-ref="540next" data-ref-filename="540next">next</a>, <a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a>));</td></tr>
<tr><th id="6677">6677</th><td>	 <a class="local col0 ref" href="#540next" title='next' data-ref="540next" data-ref-filename="540next">next</a> = <a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>)</td></tr>
<tr><th id="6678">6678</th><td>    {</td></tr>
<tr><th id="6679">6679</th><td>	<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col0 ref" href="#540next" title='next' data-ref="540next" data-ref-filename="540next">next</a>);</td></tr>
<tr><th id="6680">6680</th><td>	<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a> = <a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="6681">6681</th><td>	<a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::outdated" title='rcsversnode::outdated' data-ref="rcsversnode::outdated" data-ref-filename="rcsversnode..outdated">outdated</a> = <var>1</var>;</td></tr>
<tr><th id="6682">6682</th><td>    }</td></tr>
<tr><th id="6683">6683</th><td></td></tr>
<tr><th id="6684">6684</th><td>    <i>/* Update delta links.  If BEFORE == NULL, we're changing the</i></td></tr>
<tr><th id="6685">6685</th><td><i>       head of the tree and don't need to update any `next' links. */</i></td></tr>
<tr><th id="6686">6686</th><td>    <b>if</b> (<a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6687">6687</th><td>    {</td></tr>
<tr><th id="6688">6688</th><td>	<i>/* If REV1 is the first node on its branch, then BEFORE is its</i></td></tr>
<tr><th id="6689">6689</th><td><i>	   root node (on the trunk) and we have to update its branches</i></td></tr>
<tr><th id="6690">6690</th><td><i>	   list.  Otherwise, BEFORE is on the same branch as AFTER, and</i></td></tr>
<tr><th id="6691">6691</th><td><i>	   we can just change BEFORE's `next' field to point to AFTER.</i></td></tr>
<tr><th id="6692">6692</th><td><i>	   (This should be safe: since findnode manages its lists via</i></td></tr>
<tr><th id="6693">6693</th><td><i>	   the `hashnext' and `hashprev' fields, rather than `next' and</i></td></tr>
<tr><th id="6694">6694</th><td><i>	   `prev', mucking with `next' and `prev' should not corrupt the</i></td></tr>
<tr><th id="6695">6695</th><td><i>	   delta tree's internal structure.  Much. -twp) */</i></td></tr>
<tr><th id="6696">6696</th><td></td></tr>
<tr><th id="6697">6697</th><td>	<b>if</b> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6698">6698</th><td>	    <i>/* beforep's -&gt;next field already should be equal to after,</i></td></tr>
<tr><th id="6699">6699</th><td><i>	       which I think is always NULL in this case.  */</i></td></tr>
<tr><th id="6700">6700</th><td>	    ;</td></tr>
<tr><th id="6701">6701</th><td>	<b>else</b> <b>if</b> (<a class="macro" href="#138" title="(*(char *)(rev1) == *(char *)(branchpoint) &amp;&amp; strcmp ((rev1), (branchpoint)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>, <a class="local col7 ref" href="#547branchpoint" title='branchpoint' data-ref="547branchpoint" data-ref-filename="547branchpoint">branchpoint</a>))</td></tr>
<tr><th id="6702">6702</th><td>	{</td></tr>
<tr><th id="6703">6703</th><td>	    <a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a>);</td></tr>
<tr><th id="6704">6704</th><td>	    <a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a> = <a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="6705">6705</th><td>	    <a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> = <a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>;</td></tr>
<tr><th id="6706">6706</th><td>	    <b>while</b> (<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> != <a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a> &amp;&amp;</td></tr>
<tr><th id="6707">6707</th><td>		   ! <a class="macro" href="#138" title="(*(char *)(nodep-&gt;key) == *(char *)(rev1) &amp;&amp; strcmp ((nodep-&gt;key), (rev1)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>, <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>))</td></tr>
<tr><th id="6708">6708</th><td>		<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> = <a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>;</td></tr>
<tr><th id="6709">6709</th><td>	    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((nodep != revp-&gt;branches-&gt;list) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 6709, __func__, &quot;nodep != revp-&gt;branches-&gt;list&quot;))" data-ref="_M/assert">assert</a> (<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> != <a class="local col2 ref" href="#542revp" title='revp' data-ref="542revp" data-ref-filename="542revp">revp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>);</td></tr>
<tr><th id="6710">6710</th><td>	    <b>if</b> (<a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6711">6711</th><td>		<a class="ref fn" href="hash.h.html#delnode" title='delnode' data-ref="delnode" data-ref-filename="delnode">delnode</a> (<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a>);</td></tr>
<tr><th id="6712">6712</th><td>	    <b>else</b></td></tr>
<tr><th id="6713">6713</th><td>	    {</td></tr>
<tr><th id="6714">6714</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>);</td></tr>
<tr><th id="6715">6715</th><td>		<a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a>);</td></tr>
<tr><th id="6716">6716</th><td>	    }</td></tr>
<tr><th id="6717">6717</th><td>	}</td></tr>
<tr><th id="6718">6718</th><td>	<b>else</b></td></tr>
<tr><th id="6719">6719</th><td>	{</td></tr>
<tr><th id="6720">6720</th><td>	    <a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#536rcs" title='rcs' data-ref="536rcs" data-ref-filename="536rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a>);</td></tr>
<tr><th id="6721">6721</th><td>	    <a class="local col3 ref" href="#543beforep" title='beforep' data-ref="543beforep" data-ref-filename="543beforep">beforep</a> = <a class="local col1 ref" href="#541nodep" title='nodep' data-ref="541nodep" data-ref-filename="541nodep">nodep</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="6722">6722</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#543beforep" title='beforep' data-ref="543beforep" data-ref-filename="543beforep">beforep</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>);</td></tr>
<tr><th id="6723">6723</th><td>	    <a class="local col3 ref" href="#543beforep" title='beforep' data-ref="543beforep" data-ref-filename="543beforep">beforep</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a>);</td></tr>
<tr><th id="6724">6724</th><td>	}</td></tr>
<tr><th id="6725">6725</th><td>    }</td></tr>
<tr><th id="6726">6726</th><td></td></tr>
<tr><th id="6727">6727</th><td>    <a class="local col4 ref" href="#544status" title='status' data-ref="544status" data-ref-filename="544status">status</a> = <var>0</var>;</td></tr>
<tr><th id="6728">6728</th><td></td></tr>
<tr><th id="6729">6729</th><td> <dfn class="lbl" id="557delrev_done" data-ref="557delrev_done" data-ref-filename="557delrev_done">delrev_done</dfn>:</td></tr>
<tr><th id="6730">6730</th><td>    <b>if</b> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6731">6731</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>);</td></tr>
<tr><th id="6732">6732</th><td>    <b>if</b> (<a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> &amp;&amp; <a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a> != <a class="local col8 ref" href="#548rev1" title='rev1' data-ref="548rev1" data-ref-filename="548rev1">rev1</a>)</td></tr>
<tr><th id="6733">6733</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col9 ref" href="#549rev2" title='rev2' data-ref="549rev2" data-ref-filename="549rev2">rev2</a>);</td></tr>
<tr><th id="6734">6734</th><td>    <b>if</b> (<a class="local col7 ref" href="#547branchpoint" title='branchpoint' data-ref="547branchpoint" data-ref-filename="547branchpoint">branchpoint</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6735">6735</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col7 ref" href="#547branchpoint" title='branchpoint' data-ref="547branchpoint" data-ref-filename="547branchpoint">branchpoint</a>);</td></tr>
<tr><th id="6736">6736</th><td>    <b>if</b> (<a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6737">6737</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col2 ref" href="#552before" title='before' data-ref="552before" data-ref-filename="552before">before</a>);</td></tr>
<tr><th id="6738">6738</th><td>    <b>if</b> (<a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6739">6739</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#553after" title='after' data-ref="553after" data-ref-filename="553after">after</a>);</td></tr>
<tr><th id="6740">6740</th><td></td></tr>
<tr><th id="6741">6741</th><td>    <a class="local col6 ref" href="#546save_noexec" title='save_noexec' data-ref="546save_noexec" data-ref-filename="546save_noexec">save_noexec</a> = <a class="ref" href="cvs.h.html#noexec" title='noexec' data-ref="noexec" data-ref-filename="noexec">noexec</a>;</td></tr>
<tr><th id="6742">6742</th><td>    <a class="ref" href="cvs.h.html#noexec" title='noexec' data-ref="noexec" data-ref-filename="noexec">noexec</a> = <var>0</var>;</td></tr>
<tr><th id="6743">6743</th><td>    <b>if</b> (<a class="local col4 ref" href="#554beforefile" title='beforefile' data-ref="554beforefile" data-ref-filename="554beforefile">beforefile</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6744">6744</th><td>    {</td></tr>
<tr><th id="6745">6745</th><td>	<b>if</b> (<a class="ref fn" href="cvs.h.html#unlink_file" title='unlink_file' data-ref="unlink_file" data-ref-filename="unlink_file">unlink_file</a> (<a class="local col4 ref" href="#554beforefile" title='beforefile' data-ref="554beforefile" data-ref-filename="554beforefile">beforefile</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="6746">6746</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot remove %s"</q>, <a class="local col4 ref" href="#554beforefile" title='beforefile' data-ref="554beforefile" data-ref-filename="554beforefile">beforefile</a>);</td></tr>
<tr><th id="6747">6747</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col4 ref" href="#554beforefile" title='beforefile' data-ref="554beforefile" data-ref-filename="554beforefile">beforefile</a>);</td></tr>
<tr><th id="6748">6748</th><td>    }</td></tr>
<tr><th id="6749">6749</th><td>    <b>if</b> (<a class="local col5 ref" href="#555afterfile" title='afterfile' data-ref="555afterfile" data-ref-filename="555afterfile">afterfile</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6750">6750</th><td>    {</td></tr>
<tr><th id="6751">6751</th><td>	<b>if</b> (<a class="ref fn" href="cvs.h.html#unlink_file" title='unlink_file' data-ref="unlink_file" data-ref-filename="unlink_file">unlink_file</a> (<a class="local col5 ref" href="#555afterfile" title='afterfile' data-ref="555afterfile" data-ref-filename="555afterfile">afterfile</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="6752">6752</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot remove %s"</q>, <a class="local col5 ref" href="#555afterfile" title='afterfile' data-ref="555afterfile" data-ref-filename="555afterfile">afterfile</a>);</td></tr>
<tr><th id="6753">6753</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col5 ref" href="#555afterfile" title='afterfile' data-ref="555afterfile" data-ref-filename="555afterfile">afterfile</a>);</td></tr>
<tr><th id="6754">6754</th><td>    }</td></tr>
<tr><th id="6755">6755</th><td>    <b>if</b> (<a class="local col6 ref" href="#556outfile" title='outfile' data-ref="556outfile" data-ref-filename="556outfile">outfile</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="6756">6756</th><td>    {</td></tr>
<tr><th id="6757">6757</th><td>	<b>if</b> (<a class="ref fn" href="cvs.h.html#unlink_file" title='unlink_file' data-ref="unlink_file" data-ref-filename="unlink_file">unlink_file</a> (<a class="local col6 ref" href="#556outfile" title='outfile' data-ref="556outfile" data-ref-filename="556outfile">outfile</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="6758">6758</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot remove %s"</q>, <a class="local col6 ref" href="#556outfile" title='outfile' data-ref="556outfile" data-ref-filename="556outfile">outfile</a>);</td></tr>
<tr><th id="6759">6759</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col6 ref" href="#556outfile" title='outfile' data-ref="556outfile" data-ref-filename="556outfile">outfile</a>);</td></tr>
<tr><th id="6760">6760</th><td>    }</td></tr>
<tr><th id="6761">6761</th><td>    <a class="ref" href="cvs.h.html#noexec" title='noexec' data-ref="noexec" data-ref-filename="noexec">noexec</a> = <a class="local col6 ref" href="#546save_noexec" title='save_noexec' data-ref="546save_noexec" data-ref-filename="546save_noexec">save_noexec</a>;</td></tr>
<tr><th id="6762">6762</th><td></td></tr>
<tr><th id="6763">6763</th><td>    <b>return</b> <a class="local col4 ref" href="#544status" title='status' data-ref="544status" data-ref-filename="544status">status</a>;</td></tr>
<tr><th id="6764">6764</th><td>}</td></tr>
<tr><th id="6765">6765</th><td></td></tr>
<tr><th id="6766">6766</th><td></td></tr>
<tr><th id="6767">6767</th><td></td></tr>
<tr><th id="6768">6768</th><td><i>/*</i></td></tr>
<tr><th id="6769">6769</th><td><i> * TRUE if there exists a symbolic tag "tag" in file.</i></td></tr>
<tr><th id="6770">6770</th><td><i> */</i></td></tr>
<tr><th id="6771">6771</th><td><em>int</em> </td></tr>
<tr><th id="6772">6772</th><td><dfn class="decl def fn" id="RCS_exist_tag" title='RCS_exist_tag' data-ref="RCS_exist_tag" data-ref-filename="RCS_exist_tag">RCS_exist_tag</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col0 decl" id="570rcs" title='rcs' data-type='RCSNode *' data-ref="570rcs" data-ref-filename="570rcs">rcs</dfn>, <em>char</em> *<dfn class="local col1 decl" id="571tag" title='tag' data-type='char *' data-ref="571tag" data-ref-filename="571tag">tag</dfn>)</td></tr>
<tr><th id="6773">6773</th><td>{</td></tr>
<tr><th id="6774">6774</th><td></td></tr>
<tr><th id="6775">6775</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 6775, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col0 ref" href="#570rcs" title='rcs' data-ref="570rcs" data-ref-filename="570rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6776">6776</th><td></td></tr>
<tr><th id="6777">6777</th><td>    <b>if</b> (<a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="ref fn" href="#RCS_symbols" title='RCS_symbols' data-ref="RCS_symbols" data-ref-filename="RCS_symbols">RCS_symbols</a> (<a class="local col0 ref" href="#570rcs" title='rcs' data-ref="570rcs" data-ref-filename="570rcs">rcs</a>), <a class="local col1 ref" href="#571tag" title='tag' data-ref="571tag" data-ref-filename="571tag">tag</a>))</td></tr>
<tr><th id="6778">6778</th><td>    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="6779">6779</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="6780">6780</th><td></td></tr>
<tr><th id="6781">6781</th><td>}</td></tr>
<tr><th id="6782">6782</th><td></td></tr>
<tr><th id="6783">6783</th><td></td></tr>
<tr><th id="6784">6784</th><td></td></tr>
<tr><th id="6785">6785</th><td><i>/*</i></td></tr>
<tr><th id="6786">6786</th><td><i> * TRUE if RCS revision number "rev" exists.</i></td></tr>
<tr><th id="6787">6787</th><td><i> * This includes magic branch revisions, not found in rcs-&gt;versions, </i></td></tr>
<tr><th id="6788">6788</th><td><i> * but only in rcs-&gt;symbols, requiring a list walk to find them.</i></td></tr>
<tr><th id="6789">6789</th><td><i> * Take advantage of list walk callback function already used by </i></td></tr>
<tr><th id="6790">6790</th><td><i> * RCS_delete_revs, above.</i></td></tr>
<tr><th id="6791">6791</th><td><i> */</i></td></tr>
<tr><th id="6792">6792</th><td><em>int</em></td></tr>
<tr><th id="6793">6793</th><td><dfn class="decl def fn" id="RCS_exist_rev" title='RCS_exist_rev' data-ref="RCS_exist_rev" data-ref-filename="RCS_exist_rev">RCS_exist_rev</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col2 decl" id="572rcs" title='rcs' data-type='RCSNode *' data-ref="572rcs" data-ref-filename="572rcs">rcs</dfn>, <em>char</em> *<dfn class="local col3 decl" id="573rev" title='rev' data-type='char *' data-ref="573rev" data-ref-filename="573rev">rev</dfn>)</td></tr>
<tr><th id="6794">6794</th><td>{</td></tr>
<tr><th id="6795">6795</th><td></td></tr>
<tr><th id="6796">6796</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 6796, __func__, &quot;rcs != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col2 ref" href="#572rcs" title='rcs' data-ref="572rcs" data-ref-filename="572rcs">rcs</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6797">6797</th><td></td></tr>
<tr><th id="6798">6798</th><td>    <b>if</b> (<a class="local col2 ref" href="#572rcs" title='rcs' data-ref="572rcs" data-ref-filename="572rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> &amp; <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>)</td></tr>
<tr><th id="6799">6799</th><td>	<a class="ref fn" href="#RCS_reparsercsfile" title='RCS_reparsercsfile' data-ref="RCS_reparsercsfile" data-ref-filename="RCS_reparsercsfile">RCS_reparsercsfile</a> (<a class="local col2 ref" href="#572rcs" title='rcs' data-ref="572rcs" data-ref-filename="572rcs">rcs</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="6800">6800</th><td></td></tr>
<tr><th id="6801">6801</th><td>    <b>if</b> (<a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a>(<a class="local col2 ref" href="#572rcs" title='rcs' data-ref="572rcs" data-ref-filename="572rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col3 ref" href="#573rev" title='rev' data-ref="573rev" data-ref-filename="573rev">rev</a>) != <var>0</var>)</td></tr>
<tr><th id="6802">6802</th><td>	<b>return</b> <var>1</var>;</td></tr>
<tr><th id="6803">6803</th><td></td></tr>
<tr><th id="6804">6804</th><td>    <b>if</b> (<a class="ref fn" href="hash.h.html#walklist" title='walklist' data-ref="walklist" data-ref-filename="walklist">walklist</a> (<a class="ref fn" href="#RCS_symbols" title='RCS_symbols' data-ref="RCS_symbols" data-ref-filename="RCS_symbols">RCS_symbols</a>(<a class="local col2 ref" href="#572rcs" title='rcs' data-ref="572rcs" data-ref-filename="572rcs">rcs</a>), <a class="tu ref fn" href="#findtag" title='findtag' data-use='r' data-ref="findtag" data-ref-filename="findtag">findtag</a>, <a class="local col3 ref" href="#573rev" title='rev' data-ref="573rev" data-ref-filename="573rev">rev</a>) != <var>0</var>)</td></tr>
<tr><th id="6805">6805</th><td>	<b>return</b> <var>1</var>;</td></tr>
<tr><th id="6806">6806</th><td></td></tr>
<tr><th id="6807">6807</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="6808">6808</th><td></td></tr>
<tr><th id="6809">6809</th><td>}</td></tr>
<tr><th id="6810">6810</th><td></td></tr>
<tr><th id="6811">6811</th><td></td></tr>
<tr><th id="6812">6812</th><td></td></tr>
<tr><th id="6813">6813</th><td></td></tr>
<tr><th id="6814">6814</th><td><i>/* RCS_deltas and friends.  Processing of the deltas in RCS files.  */</i></td></tr>
<tr><th id="6815">6815</th><td><b>struct</b> <dfn class="type def" id="line" title='line' data-ref="line" data-ref-filename="line">line</dfn></td></tr>
<tr><th id="6816">6816</th><td>{</td></tr>
<tr><th id="6817">6817</th><td>    <i  data-doc="line::text">/* Text of this line.  Part of the same malloc'd block as the struct</i></td></tr>
<tr><th id="6818">6818</th><td><i  data-doc="line::text">       line itself (we probably should use the "struct hack" (char text[1])</i></td></tr>
<tr><th id="6819">6819</th><td><i  data-doc="line::text">       and save ourselves sizeof (char *) bytes).  Does not include \n;</i></td></tr>
<tr><th id="6820">6820</th><td><i  data-doc="line::text">       instead has_newline indicates the presence or absence of \n.  */</i></td></tr>
<tr><th id="6821">6821</th><td>    <em>char</em> *<dfn class="tu decl field" id="line::text" title='line::text' data-type='char *' data-ref="line::text" data-ref-filename="line..text">text</dfn>;</td></tr>
<tr><th id="6822">6822</th><td>    <i  data-doc="line::len">/* Length of this line, not counting \n if has_newline is true.  */</i></td></tr>
<tr><th id="6823">6823</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="tu decl field" id="line::len" title='line::len' data-type='size_t' data-ref="line::len" data-ref-filename="line..len">len</dfn>;</td></tr>
<tr><th id="6824">6824</th><td>    <i  data-doc="line::vers">/* Version in which it was introduced.  */</i></td></tr>
<tr><th id="6825">6825</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="tu decl field" id="line::vers" title='line::vers' data-type='RCSVers *' data-ref="line::vers" data-ref-filename="line..vers">vers</dfn>;</td></tr>
<tr><th id="6826">6826</th><td>    <i  data-doc="line::has_newline">/* Nonzero if this line ends with \n.  This will always be true</i></td></tr>
<tr><th id="6827">6827</th><td><i  data-doc="line::has_newline">       except possibly for the last line.  */</i></td></tr>
<tr><th id="6828">6828</th><td>    <em>int</em> <dfn class="tu decl field" id="line::has_newline" title='line::has_newline' data-type='int' data-ref="line::has_newline" data-ref-filename="line..has_newline">has_newline</dfn>;</td></tr>
<tr><th id="6829">6829</th><td>    <i  data-doc="line::refcount">/* Number of pointers to this struct line.  */</i></td></tr>
<tr><th id="6830">6830</th><td>    <em>int</em> <dfn class="tu decl field" id="line::refcount" title='line::refcount' data-type='int' data-ref="line::refcount" data-ref-filename="line..refcount">refcount</dfn>;</td></tr>
<tr><th id="6831">6831</th><td>};</td></tr>
<tr><th id="6832">6832</th><td></td></tr>
<tr><th id="6833">6833</th><td><b>struct</b> <dfn class="type def" id="linevector" title='linevector' data-ref="linevector" data-ref-filename="linevector">linevector</dfn></td></tr>
<tr><th id="6834">6834</th><td>{</td></tr>
<tr><th id="6835">6835</th><td>    <i  data-doc="linevector::nlines">/* How many lines in use for this linevector?  */</i></td></tr>
<tr><th id="6836">6836</th><td>    <em>unsigned</em> <em>int</em> <dfn class="tu decl field" id="linevector::nlines" title='linevector::nlines' data-type='unsigned int' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</dfn>;</td></tr>
<tr><th id="6837">6837</th><td>    <i  data-doc="linevector::lines_alloced">/* How many lines allocated for this linevector?  */</i></td></tr>
<tr><th id="6838">6838</th><td>    <em>unsigned</em> <em>int</em> <dfn class="tu decl field" id="linevector::lines_alloced" title='linevector::lines_alloced' data-type='unsigned int' data-ref="linevector::lines_alloced" data-ref-filename="linevector..lines_alloced">lines_alloced</dfn>;</td></tr>
<tr><th id="6839">6839</th><td>    <i  data-doc="linevector::vector">/* Pointer to array containing a pointer to each line.  */</i></td></tr>
<tr><th id="6840">6840</th><td>    <b>struct</b> <a class="type" href="#line" title='line' data-ref="line" data-ref-filename="line">line</a> **<dfn class="tu decl field" id="linevector::vector" title='linevector::vector' data-type='struct line **' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</dfn>;</td></tr>
<tr><th id="6841">6841</th><td>};</td></tr>
<tr><th id="6842">6842</th><td></td></tr>
<tr><th id="6843">6843</th><td></td></tr>
<tr><th id="6844">6844</th><td></td></tr>
<tr><th id="6845">6845</th><td><i  data-doc="linevector_init">/* Initialize *VEC to be a linevector with no lines.  */</i></td></tr>
<tr><th id="6846">6846</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="6847">6847</th><td><dfn class="tu decl def fn" id="linevector_init" title='linevector_init' data-type='void linevector_init(struct linevector * vec)' data-ref="linevector_init" data-ref-filename="linevector_init">linevector_init</dfn> (<b>struct</b> <a class="type" href="#linevector" title='linevector' data-ref="linevector" data-ref-filename="linevector">linevector</a> *<dfn class="local col4 decl" id="574vec" title='vec' data-type='struct linevector *' data-ref="574vec" data-ref-filename="574vec">vec</dfn>)</td></tr>
<tr><th id="6848">6848</th><td>{</td></tr>
<tr><th id="6849">6849</th><td>    <a class="local col4 ref" href="#574vec" title='vec' data-ref="574vec" data-ref-filename="574vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::lines_alloced" title='linevector::lines_alloced' data-use='w' data-ref="linevector::lines_alloced" data-ref-filename="linevector..lines_alloced">lines_alloced</a> = <var>0</var>;</td></tr>
<tr><th id="6850">6850</th><td>    <a class="local col4 ref" href="#574vec" title='vec' data-ref="574vec" data-ref-filename="574vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='w' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a> = <var>0</var>;</td></tr>
<tr><th id="6851">6851</th><td>    <a class="local col4 ref" href="#574vec" title='vec' data-ref="574vec" data-ref-filename="574vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='w' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="6852">6852</th><td>}</td></tr>
<tr><th id="6853">6853</th><td></td></tr>
<tr><th id="6854">6854</th><td></td></tr>
<tr><th id="6855">6855</th><td></td></tr>
<tr><th id="6856">6856</th><td><i  data-doc="linevector_add">/* Given some text TEXT, add each of its lines to VEC before line POS</i></td></tr>
<tr><th id="6857">6857</th><td><i  data-doc="linevector_add">   (where line 0 is the first line).  The last line in TEXT may or may</i></td></tr>
<tr><th id="6858">6858</th><td><i  data-doc="linevector_add">   not be \n terminated.</i></td></tr>
<tr><th id="6859">6859</th><td><i  data-doc="linevector_add">   Set the version for each of the new lines to VERS.  This</i></td></tr>
<tr><th id="6860">6860</th><td><i  data-doc="linevector_add">   function returns non-zero for success.  It returns zero if the line</i></td></tr>
<tr><th id="6861">6861</th><td><i  data-doc="linevector_add">   number is out of range.</i></td></tr>
<tr><th id="6862">6862</th><td><i  data-doc="linevector_add"></i></td></tr>
<tr><th id="6863">6863</th><td><i  data-doc="linevector_add">   Each of the lines in TEXT are copied to space which is managed with</i></td></tr>
<tr><th id="6864">6864</th><td><i  data-doc="linevector_add">   the linevector (and freed by linevector_free).  So the caller doesn't</i></td></tr>
<tr><th id="6865">6865</th><td><i  data-doc="linevector_add">   need to keep TEXT around after the call to this function.  */</i></td></tr>
<tr><th id="6866">6866</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="6867">6867</th><td><dfn class="tu decl def fn" id="linevector_add" title='linevector_add' data-type='int linevector_add(struct linevector * vec, const char * text, size_t len, RCSVers * vers, unsigned int pos)' data-ref="linevector_add" data-ref-filename="linevector_add">linevector_add</dfn> (<b>struct</b> <a class="type" href="#linevector" title='linevector' data-ref="linevector" data-ref-filename="linevector">linevector</a> *<dfn class="local col5 decl" id="575vec" title='vec' data-type='struct linevector *' data-ref="575vec" data-ref-filename="575vec">vec</dfn>, <em>const</em> <em>char</em> *<dfn class="local col6 decl" id="576text" title='text' data-type='const char *' data-ref="576text" data-ref-filename="576text">text</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col7 decl" id="577len" title='len' data-type='size_t' data-ref="577len" data-ref-filename="577len">len</dfn>,</td></tr>
<tr><th id="6868">6868</th><td>		<a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col8 decl" id="578vers" title='vers' data-type='RCSVers *' data-ref="578vers" data-ref-filename="578vers">vers</dfn>, <em>unsigned</em> <em>int</em> <dfn class="local col9 decl" id="579pos" title='pos' data-type='unsigned int' data-ref="579pos" data-ref-filename="579pos">pos</dfn>)</td></tr>
<tr><th id="6869">6869</th><td>{</td></tr>
<tr><th id="6870">6870</th><td>    <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="580textend" title='textend' data-type='const char *' data-ref="580textend" data-ref-filename="580textend">textend</dfn>;</td></tr>
<tr><th id="6871">6871</th><td>    <em>unsigned</em> <em>int</em> <dfn class="local col1 decl" id="581i" title='i' data-type='unsigned int' data-ref="581i" data-ref-filename="581i">i</dfn>;</td></tr>
<tr><th id="6872">6872</th><td>    <em>unsigned</em> <em>int</em> <dfn class="local col2 decl" id="582nnew" title='nnew' data-type='unsigned int' data-ref="582nnew" data-ref-filename="582nnew">nnew</dfn>;</td></tr>
<tr><th id="6873">6873</th><td>    <em>const</em> <em>char</em> *<dfn class="local col3 decl" id="583p" title='p' data-type='const char *' data-ref="583p" data-ref-filename="583p">p</dfn>;</td></tr>
<tr><th id="6874">6874</th><td>    <em>const</em> <em>char</em> *<dfn class="local col4 decl" id="584nextline_text" title='nextline_text' data-type='const char *' data-ref="584nextline_text" data-ref-filename="584nextline_text">nextline_text</dfn>;</td></tr>
<tr><th id="6875">6875</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col5 decl" id="585nextline_len" title='nextline_len' data-type='size_t' data-ref="585nextline_len" data-ref-filename="585nextline_len">nextline_len</dfn>;</td></tr>
<tr><th id="6876">6876</th><td>    <em>int</em> <dfn class="local col6 decl" id="586nextline_newline" title='nextline_newline' data-type='int' data-ref="586nextline_newline" data-ref-filename="586nextline_newline">nextline_newline</dfn>;</td></tr>
<tr><th id="6877">6877</th><td>    <b>struct</b> <a class="type" href="#line" title='line' data-ref="line" data-ref-filename="line">line</a> *<dfn class="local col7 decl" id="587q" title='q' data-type='struct line *' data-ref="587q" data-ref-filename="587q">q</dfn>;</td></tr>
<tr><th id="6878">6878</th><td></td></tr>
<tr><th id="6879">6879</th><td>    <b>if</b> (<a class="local col7 ref" href="#577len" title='len' data-ref="577len" data-ref-filename="577len">len</a> == <var>0</var>)</td></tr>
<tr><th id="6880">6880</th><td>	<b>return</b> <var>1</var>;</td></tr>
<tr><th id="6881">6881</th><td></td></tr>
<tr><th id="6882">6882</th><td>    <a class="local col0 ref" href="#580textend" title='textend' data-ref="580textend" data-ref-filename="580textend">textend</a> = <a class="local col6 ref" href="#576text" title='text' data-ref="576text" data-ref-filename="576text">text</a> + <a class="local col7 ref" href="#577len" title='len' data-ref="577len" data-ref-filename="577len">len</a>;</td></tr>
<tr><th id="6883">6883</th><td></td></tr>
<tr><th id="6884">6884</th><td>    <i>/* Count the number of lines we will need to add.  */</i></td></tr>
<tr><th id="6885">6885</th><td>    <a class="local col2 ref" href="#582nnew" title='nnew' data-ref="582nnew" data-ref-filename="582nnew">nnew</a> = <var>1</var>;</td></tr>
<tr><th id="6886">6886</th><td>    <b>for</b> (<a class="local col3 ref" href="#583p" title='p' data-ref="583p" data-ref-filename="583p">p</a> = <a class="local col6 ref" href="#576text" title='text' data-ref="576text" data-ref-filename="576text">text</a>; <a class="local col3 ref" href="#583p" title='p' data-ref="583p" data-ref-filename="583p">p</a> &lt; <a class="local col0 ref" href="#580textend" title='textend' data-ref="580textend" data-ref-filename="580textend">textend</a>; ++<a class="local col3 ref" href="#583p" title='p' data-ref="583p" data-ref-filename="583p">p</a>)</td></tr>
<tr><th id="6887">6887</th><td>	<b>if</b> (*<a class="local col3 ref" href="#583p" title='p' data-ref="583p" data-ref-filename="583p">p</a> == <kbd>'\n'</kbd> &amp;&amp; <a class="local col3 ref" href="#583p" title='p' data-ref="583p" data-ref-filename="583p">p</a> + <var>1</var> &lt; <a class="local col0 ref" href="#580textend" title='textend' data-ref="580textend" data-ref-filename="580textend">textend</a>)</td></tr>
<tr><th id="6888">6888</th><td>	    ++<a class="local col2 ref" href="#582nnew" title='nnew' data-ref="582nnew" data-ref-filename="582nnew">nnew</a>;</td></tr>
<tr><th id="6889">6889</th><td></td></tr>
<tr><th id="6890">6890</th><td>    <i>/* Expand VEC-&gt;VECTOR if needed.  */</i></td></tr>
<tr><th id="6891">6891</th><td>    <b>if</b> (<a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a> + <a class="local col2 ref" href="#582nnew" title='nnew' data-ref="582nnew" data-ref-filename="582nnew">nnew</a> &gt;= <a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::lines_alloced" title='linevector::lines_alloced' data-use='r' data-ref="linevector::lines_alloced" data-ref-filename="linevector..lines_alloced">lines_alloced</a>)</td></tr>
<tr><th id="6892">6892</th><td>    {</td></tr>
<tr><th id="6893">6893</th><td>	<b>if</b> (<a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::lines_alloced" title='linevector::lines_alloced' data-use='r' data-ref="linevector::lines_alloced" data-ref-filename="linevector..lines_alloced">lines_alloced</a> == <var>0</var>)</td></tr>
<tr><th id="6894">6894</th><td>	    <a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::lines_alloced" title='linevector::lines_alloced' data-use='w' data-ref="linevector::lines_alloced" data-ref-filename="linevector..lines_alloced">lines_alloced</a> = <var>10</var>;</td></tr>
<tr><th id="6895">6895</th><td>	<b>while</b> (<a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a> + <a class="local col2 ref" href="#582nnew" title='nnew' data-ref="582nnew" data-ref-filename="582nnew">nnew</a> &gt;= <a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::lines_alloced" title='linevector::lines_alloced' data-use='r' data-ref="linevector::lines_alloced" data-ref-filename="linevector..lines_alloced">lines_alloced</a>)</td></tr>
<tr><th id="6896">6896</th><td>	    <a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::lines_alloced" title='linevector::lines_alloced' data-use='w' data-ref="linevector::lines_alloced" data-ref-filename="linevector..lines_alloced">lines_alloced</a> *= <var>2</var>;</td></tr>
<tr><th id="6897">6897</th><td>	<a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='w' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a> = <a class="ref fn" href="../lib/xalloc.h.html#xnrealloc" title='xnrealloc' data-ref="xnrealloc" data-ref-filename="xnrealloc">xnrealloc</a> (<a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>,</td></tr>
<tr><th id="6898">6898</th><td>				 <a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::lines_alloced" title='linevector::lines_alloced' data-use='r' data-ref="linevector::lines_alloced" data-ref-filename="linevector..lines_alloced">lines_alloced</a>, <b>sizeof</b> (*<a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>));</td></tr>
<tr><th id="6899">6899</th><td>    }</td></tr>
<tr><th id="6900">6900</th><td></td></tr>
<tr><th id="6901">6901</th><td>    <i>/* Make room for the new lines in VEC-&gt;VECTOR.  */</i></td></tr>
<tr><th id="6902">6902</th><td>    <b>for</b> (<a class="local col1 ref" href="#581i" title='i' data-ref="581i" data-ref-filename="581i">i</a> = <a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a> + <a class="local col2 ref" href="#582nnew" title='nnew' data-ref="582nnew" data-ref-filename="582nnew">nnew</a> - <var>1</var>; <a class="local col1 ref" href="#581i" title='i' data-ref="581i" data-ref-filename="581i">i</a> &gt;= <a class="local col9 ref" href="#579pos" title='pos' data-ref="579pos" data-ref-filename="579pos">pos</a> + <a class="local col2 ref" href="#582nnew" title='nnew' data-ref="582nnew" data-ref-filename="582nnew">nnew</a>; --<a class="local col1 ref" href="#581i" title='i' data-ref="581i" data-ref-filename="581i">i</a>)</td></tr>
<tr><th id="6903">6903</th><td>	<a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col1 ref" href="#581i" title='i' data-ref="581i" data-ref-filename="581i">i</a>] = <a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col1 ref" href="#581i" title='i' data-ref="581i" data-ref-filename="581i">i</a> - <a class="local col2 ref" href="#582nnew" title='nnew' data-ref="582nnew" data-ref-filename="582nnew">nnew</a>];</td></tr>
<tr><th id="6904">6904</th><td></td></tr>
<tr><th id="6905">6905</th><td>    <b>if</b> (<a class="local col9 ref" href="#579pos" title='pos' data-ref="579pos" data-ref-filename="579pos">pos</a> &gt; <a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a>)</td></tr>
<tr><th id="6906">6906</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="6907">6907</th><td></td></tr>
<tr><th id="6908">6908</th><td>    <i>/* Actually add the lines, to VEC-&gt;VECTOR.  */</i></td></tr>
<tr><th id="6909">6909</th><td>    <a class="local col1 ref" href="#581i" title='i' data-ref="581i" data-ref-filename="581i">i</a> = <a class="local col9 ref" href="#579pos" title='pos' data-ref="579pos" data-ref-filename="579pos">pos</a>;</td></tr>
<tr><th id="6910">6910</th><td>    <a class="local col4 ref" href="#584nextline_text" title='nextline_text' data-ref="584nextline_text" data-ref-filename="584nextline_text">nextline_text</a> = <a class="local col6 ref" href="#576text" title='text' data-ref="576text" data-ref-filename="576text">text</a>;</td></tr>
<tr><th id="6911">6911</th><td>    <a class="local col6 ref" href="#586nextline_newline" title='nextline_newline' data-ref="586nextline_newline" data-ref-filename="586nextline_newline">nextline_newline</a> = <var>0</var>;</td></tr>
<tr><th id="6912">6912</th><td>    <b>for</b> (<a class="local col3 ref" href="#583p" title='p' data-ref="583p" data-ref-filename="583p">p</a> = <a class="local col6 ref" href="#576text" title='text' data-ref="576text" data-ref-filename="576text">text</a>; <a class="local col3 ref" href="#583p" title='p' data-ref="583p" data-ref-filename="583p">p</a> &lt; <a class="local col0 ref" href="#580textend" title='textend' data-ref="580textend" data-ref-filename="580textend">textend</a>; ++<a class="local col3 ref" href="#583p" title='p' data-ref="583p" data-ref-filename="583p">p</a>)</td></tr>
<tr><th id="6913">6913</th><td>	<b>if</b> (*<a class="local col3 ref" href="#583p" title='p' data-ref="583p" data-ref-filename="583p">p</a> == <kbd>'\n'</kbd>)</td></tr>
<tr><th id="6914">6914</th><td>	{</td></tr>
<tr><th id="6915">6915</th><td>	    <a class="local col6 ref" href="#586nextline_newline" title='nextline_newline' data-ref="586nextline_newline" data-ref-filename="586nextline_newline">nextline_newline</a> = <var>1</var>;</td></tr>
<tr><th id="6916">6916</th><td>	    <b>if</b> (<a class="local col3 ref" href="#583p" title='p' data-ref="583p" data-ref-filename="583p">p</a> + <var>1</var> == <a class="local col0 ref" href="#580textend" title='textend' data-ref="580textend" data-ref-filename="580textend">textend</a>)</td></tr>
<tr><th id="6917">6917</th><td>		<i>/* If there are no characters beyond the last newline, we</i></td></tr>
<tr><th id="6918">6918</th><td><i>		   don't consider it another line.  */</i></td></tr>
<tr><th id="6919">6919</th><td>		<b>break</b>;</td></tr>
<tr><th id="6920">6920</th><td>	    <a class="local col5 ref" href="#585nextline_len" title='nextline_len' data-ref="585nextline_len" data-ref-filename="585nextline_len">nextline_len</a> = <a class="local col3 ref" href="#583p" title='p' data-ref="583p" data-ref-filename="583p">p</a> - <a class="local col4 ref" href="#584nextline_text" title='nextline_text' data-ref="584nextline_text" data-ref-filename="584nextline_text">nextline_text</a>;</td></tr>
<tr><th id="6921">6921</th><td>	    <a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<b>sizeof</b> (<b>struct</b> <a class="type" href="#line" title='line' data-ref="line" data-ref-filename="line">line</a>) + <a class="local col5 ref" href="#585nextline_len" title='nextline_len' data-ref="585nextline_len" data-ref-filename="585nextline_len">nextline_len</a>);</td></tr>
<tr><th id="6922">6922</th><td>	    <a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a>-&gt;<a class="tu ref field" href="#line::vers" title='line::vers' data-use='w' data-ref="line::vers" data-ref-filename="line..vers">vers</a> = <a class="local col8 ref" href="#578vers" title='vers' data-ref="578vers" data-ref-filename="578vers">vers</a>;</td></tr>
<tr><th id="6923">6923</th><td>	    <a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a>-&gt;<a class="tu ref field" href="#line::text" title='line::text' data-use='w' data-ref="line::text" data-ref-filename="line..text">text</a> = (<em>char</em> *)<a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a> + <b>sizeof</b> (<b>struct</b> <a class="type" href="#line" title='line' data-ref="line" data-ref-filename="line">line</a>);</td></tr>
<tr><th id="6924">6924</th><td>	    <a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a>-&gt;<a class="tu ref field" href="#line::len" title='line::len' data-use='w' data-ref="line::len" data-ref-filename="line..len">len</a> = <a class="local col5 ref" href="#585nextline_len" title='nextline_len' data-ref="585nextline_len" data-ref-filename="585nextline_len">nextline_len</a>;</td></tr>
<tr><th id="6925">6925</th><td>	    <a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a>-&gt;<a class="tu ref field" href="#line::has_newline" title='line::has_newline' data-use='w' data-ref="line::has_newline" data-ref-filename="line..has_newline">has_newline</a> = <a class="local col6 ref" href="#586nextline_newline" title='nextline_newline' data-ref="586nextline_newline" data-ref-filename="586nextline_newline">nextline_newline</a>;</td></tr>
<tr><th id="6926">6926</th><td>	    <a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a>-&gt;<a class="tu ref field" href="#line::refcount" title='line::refcount' data-use='w' data-ref="line::refcount" data-ref-filename="line..refcount">refcount</a> = <var>1</var>;</td></tr>
<tr><th id="6927">6927</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a>-&gt;<a class="tu ref field" href="#line::text" title='line::text' data-use='r' data-ref="line::text" data-ref-filename="line..text">text</a>, <a class="local col4 ref" href="#584nextline_text" title='nextline_text' data-ref="584nextline_text" data-ref-filename="584nextline_text">nextline_text</a>, <a class="local col5 ref" href="#585nextline_len" title='nextline_len' data-ref="585nextline_len" data-ref-filename="585nextline_len">nextline_len</a>);</td></tr>
<tr><th id="6928">6928</th><td>	    <a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col1 ref" href="#581i" title='i' data-ref="581i" data-ref-filename="581i">i</a>++] = <a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a>;</td></tr>
<tr><th id="6929">6929</th><td></td></tr>
<tr><th id="6930">6930</th><td>	    <a class="local col4 ref" href="#584nextline_text" title='nextline_text' data-ref="584nextline_text" data-ref-filename="584nextline_text">nextline_text</a> = (<em>char</em> *)<a class="local col3 ref" href="#583p" title='p' data-ref="583p" data-ref-filename="583p">p</a> + <var>1</var>;</td></tr>
<tr><th id="6931">6931</th><td>	    <a class="local col6 ref" href="#586nextline_newline" title='nextline_newline' data-ref="586nextline_newline" data-ref-filename="586nextline_newline">nextline_newline</a> = <var>0</var>;</td></tr>
<tr><th id="6932">6932</th><td>	}</td></tr>
<tr><th id="6933">6933</th><td>    <a class="local col5 ref" href="#585nextline_len" title='nextline_len' data-ref="585nextline_len" data-ref-filename="585nextline_len">nextline_len</a> = <a class="local col3 ref" href="#583p" title='p' data-ref="583p" data-ref-filename="583p">p</a> - <a class="local col4 ref" href="#584nextline_text" title='nextline_text' data-ref="584nextline_text" data-ref-filename="584nextline_text">nextline_text</a>;</td></tr>
<tr><th id="6934">6934</th><td>    <a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<b>sizeof</b> (<b>struct</b> <a class="type" href="#line" title='line' data-ref="line" data-ref-filename="line">line</a>) + <a class="local col5 ref" href="#585nextline_len" title='nextline_len' data-ref="585nextline_len" data-ref-filename="585nextline_len">nextline_len</a>);</td></tr>
<tr><th id="6935">6935</th><td>    <a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a>-&gt;<a class="tu ref field" href="#line::vers" title='line::vers' data-use='w' data-ref="line::vers" data-ref-filename="line..vers">vers</a> = <a class="local col8 ref" href="#578vers" title='vers' data-ref="578vers" data-ref-filename="578vers">vers</a>;</td></tr>
<tr><th id="6936">6936</th><td>    <a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a>-&gt;<a class="tu ref field" href="#line::text" title='line::text' data-use='w' data-ref="line::text" data-ref-filename="line..text">text</a> = (<em>char</em> *)<a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a> + <b>sizeof</b> (<b>struct</b> <a class="type" href="#line" title='line' data-ref="line" data-ref-filename="line">line</a>);</td></tr>
<tr><th id="6937">6937</th><td>    <a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a>-&gt;<a class="tu ref field" href="#line::len" title='line::len' data-use='w' data-ref="line::len" data-ref-filename="line..len">len</a> = <a class="local col5 ref" href="#585nextline_len" title='nextline_len' data-ref="585nextline_len" data-ref-filename="585nextline_len">nextline_len</a>;</td></tr>
<tr><th id="6938">6938</th><td>    <a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a>-&gt;<a class="tu ref field" href="#line::has_newline" title='line::has_newline' data-use='w' data-ref="line::has_newline" data-ref-filename="line..has_newline">has_newline</a> = <a class="local col6 ref" href="#586nextline_newline" title='nextline_newline' data-ref="586nextline_newline" data-ref-filename="586nextline_newline">nextline_newline</a>;</td></tr>
<tr><th id="6939">6939</th><td>    <a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a>-&gt;<a class="tu ref field" href="#line::refcount" title='line::refcount' data-use='w' data-ref="line::refcount" data-ref-filename="line..refcount">refcount</a> = <var>1</var>;</td></tr>
<tr><th id="6940">6940</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a>-&gt;<a class="tu ref field" href="#line::text" title='line::text' data-use='r' data-ref="line::text" data-ref-filename="line..text">text</a>, <a class="local col4 ref" href="#584nextline_text" title='nextline_text' data-ref="584nextline_text" data-ref-filename="584nextline_text">nextline_text</a>, <a class="local col5 ref" href="#585nextline_len" title='nextline_len' data-ref="585nextline_len" data-ref-filename="585nextline_len">nextline_len</a>);</td></tr>
<tr><th id="6941">6941</th><td>    <a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col1 ref" href="#581i" title='i' data-ref="581i" data-ref-filename="581i">i</a>] = <a class="local col7 ref" href="#587q" title='q' data-ref="587q" data-ref-filename="587q">q</a>;</td></tr>
<tr><th id="6942">6942</th><td></td></tr>
<tr><th id="6943">6943</th><td>    <a class="local col5 ref" href="#575vec" title='vec' data-ref="575vec" data-ref-filename="575vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='w' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a> += <a class="local col2 ref" href="#582nnew" title='nnew' data-ref="582nnew" data-ref-filename="582nnew">nnew</a>;</td></tr>
<tr><th id="6944">6944</th><td></td></tr>
<tr><th id="6945">6945</th><td>    <b>return</b> <var>1</var>;</td></tr>
<tr><th id="6946">6946</th><td>}</td></tr>
<tr><th id="6947">6947</th><td></td></tr>
<tr><th id="6948">6948</th><td></td></tr>
<tr><th id="6949">6949</th><td></td></tr>
<tr><th id="6950">6950</th><td><i  data-doc="linevector_delete">/* Remove NLINES lines from VEC at position POS (where line 0 is the</i></td></tr>
<tr><th id="6951">6951</th><td><i  data-doc="linevector_delete">   first line).  */</i></td></tr>
<tr><th id="6952">6952</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="6953">6953</th><td><dfn class="tu decl def fn" id="linevector_delete" title='linevector_delete' data-type='void linevector_delete(struct linevector * vec, unsigned int pos, unsigned int nlines)' data-ref="linevector_delete" data-ref-filename="linevector_delete">linevector_delete</dfn> (<b>struct</b> <a class="type" href="#linevector" title='linevector' data-ref="linevector" data-ref-filename="linevector">linevector</a> *<dfn class="local col8 decl" id="588vec" title='vec' data-type='struct linevector *' data-ref="588vec" data-ref-filename="588vec">vec</dfn>, <em>unsigned</em> <em>int</em> <dfn class="local col9 decl" id="589pos" title='pos' data-type='unsigned int' data-ref="589pos" data-ref-filename="589pos">pos</dfn>,</td></tr>
<tr><th id="6954">6954</th><td>		   <em>unsigned</em> <em>int</em> <dfn class="local col0 decl" id="590nlines" title='nlines' data-type='unsigned int' data-ref="590nlines" data-ref-filename="590nlines">nlines</dfn>)</td></tr>
<tr><th id="6955">6955</th><td>{</td></tr>
<tr><th id="6956">6956</th><td>    <em>unsigned</em> <em>int</em> <dfn class="local col1 decl" id="591i" title='i' data-type='unsigned int' data-ref="591i" data-ref-filename="591i">i</dfn>;</td></tr>
<tr><th id="6957">6957</th><td>    <em>unsigned</em> <em>int</em> <dfn class="local col2 decl" id="592last" title='last' data-type='unsigned int' data-ref="592last" data-ref-filename="592last">last</dfn>;</td></tr>
<tr><th id="6958">6958</th><td></td></tr>
<tr><th id="6959">6959</th><td>    <a class="local col2 ref" href="#592last" title='last' data-ref="592last" data-ref-filename="592last">last</a> = <a class="local col8 ref" href="#588vec" title='vec' data-ref="588vec" data-ref-filename="588vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a> - <a class="local col0 ref" href="#590nlines" title='nlines' data-ref="590nlines" data-ref-filename="590nlines">nlines</a>;</td></tr>
<tr><th id="6960">6960</th><td>    <b>for</b> (<a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a> = <a class="local col9 ref" href="#589pos" title='pos' data-ref="589pos" data-ref-filename="589pos">pos</a>; <a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a> &lt; <a class="local col9 ref" href="#589pos" title='pos' data-ref="589pos" data-ref-filename="589pos">pos</a> + <a class="local col0 ref" href="#590nlines" title='nlines' data-ref="590nlines" data-ref-filename="590nlines">nlines</a>; ++<a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a>)</td></tr>
<tr><th id="6961">6961</th><td>    {</td></tr>
<tr><th id="6962">6962</th><td>	<b>if</b> (--<a class="local col8 ref" href="#588vec" title='vec' data-ref="588vec" data-ref-filename="588vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a>]-&gt;<a class="tu ref field" href="#line::refcount" title='line::refcount' data-use='w' data-ref="line::refcount" data-ref-filename="line..refcount">refcount</a> == <var>0</var>)</td></tr>
<tr><th id="6963">6963</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#588vec" title='vec' data-ref="588vec" data-ref-filename="588vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a>]);</td></tr>
<tr><th id="6964">6964</th><td>    }</td></tr>
<tr><th id="6965">6965</th><td>    <b>for</b> (<a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a> = <a class="local col9 ref" href="#589pos" title='pos' data-ref="589pos" data-ref-filename="589pos">pos</a>; <a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a> &lt; <a class="local col2 ref" href="#592last" title='last' data-ref="592last" data-ref-filename="592last">last</a>; ++<a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a>)</td></tr>
<tr><th id="6966">6966</th><td>	<a class="local col8 ref" href="#588vec" title='vec' data-ref="588vec" data-ref-filename="588vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a>] = <a class="local col8 ref" href="#588vec" title='vec' data-ref="588vec" data-ref-filename="588vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col1 ref" href="#591i" title='i' data-ref="591i" data-ref-filename="591i">i</a> + <a class="local col0 ref" href="#590nlines" title='nlines' data-ref="590nlines" data-ref-filename="590nlines">nlines</a>];</td></tr>
<tr><th id="6967">6967</th><td>    <a class="local col8 ref" href="#588vec" title='vec' data-ref="588vec" data-ref-filename="588vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='w' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a> -= <a class="local col0 ref" href="#590nlines" title='nlines' data-ref="590nlines" data-ref-filename="590nlines">nlines</a>;</td></tr>
<tr><th id="6968">6968</th><td>}</td></tr>
<tr><th id="6969">6969</th><td></td></tr>
<tr><th id="6970">6970</th><td></td></tr>
<tr><th id="6971">6971</th><td></td></tr>
<tr><th id="6972">6972</th><td><i  data-doc="linevector_copy">/* Copy FROM to TO, copying the vectors but not the lines pointed to.  */</i></td></tr>
<tr><th id="6973">6973</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="6974">6974</th><td><dfn class="tu decl def fn" id="linevector_copy" title='linevector_copy' data-type='void linevector_copy(struct linevector * to, struct linevector * from)' data-ref="linevector_copy" data-ref-filename="linevector_copy">linevector_copy</dfn> (<b>struct</b> <a class="type" href="#linevector" title='linevector' data-ref="linevector" data-ref-filename="linevector">linevector</a> *<dfn class="local col3 decl" id="593to" title='to' data-type='struct linevector *' data-ref="593to" data-ref-filename="593to">to</dfn>, <b>struct</b> <a class="type" href="#linevector" title='linevector' data-ref="linevector" data-ref-filename="linevector">linevector</a> *<dfn class="local col4 decl" id="594from" title='from' data-type='struct linevector *' data-ref="594from" data-ref-filename="594from">from</dfn>)</td></tr>
<tr><th id="6975">6975</th><td>{</td></tr>
<tr><th id="6976">6976</th><td>    <em>unsigned</em> <em>int</em> <dfn class="local col5 decl" id="595ln" title='ln' data-type='unsigned int' data-ref="595ln" data-ref-filename="595ln">ln</dfn>;</td></tr>
<tr><th id="6977">6977</th><td></td></tr>
<tr><th id="6978">6978</th><td>    <b>for</b> (<a class="local col5 ref" href="#595ln" title='ln' data-ref="595ln" data-ref-filename="595ln">ln</a> = <var>0</var>; <a class="local col5 ref" href="#595ln" title='ln' data-ref="595ln" data-ref-filename="595ln">ln</a> &lt; <a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a>; ++<a class="local col5 ref" href="#595ln" title='ln' data-ref="595ln" data-ref-filename="595ln">ln</a>)</td></tr>
<tr><th id="6979">6979</th><td>    {</td></tr>
<tr><th id="6980">6980</th><td>	<b>if</b> (--<a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col5 ref" href="#595ln" title='ln' data-ref="595ln" data-ref-filename="595ln">ln</a>]-&gt;<a class="tu ref field" href="#line::refcount" title='line::refcount' data-use='w' data-ref="line::refcount" data-ref-filename="line..refcount">refcount</a> == <var>0</var>)</td></tr>
<tr><th id="6981">6981</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col5 ref" href="#595ln" title='ln' data-ref="595ln" data-ref-filename="595ln">ln</a>]);</td></tr>
<tr><th id="6982">6982</th><td>    }</td></tr>
<tr><th id="6983">6983</th><td>    <b>if</b> (<a class="local col4 ref" href="#594from" title='from' data-ref="594from" data-ref-filename="594from">from</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a> &gt; <a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::lines_alloced" title='linevector::lines_alloced' data-use='r' data-ref="linevector::lines_alloced" data-ref-filename="linevector..lines_alloced">lines_alloced</a>)</td></tr>
<tr><th id="6984">6984</th><td>    {</td></tr>
<tr><th id="6985">6985</th><td>	<b>if</b> (<a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::lines_alloced" title='linevector::lines_alloced' data-use='r' data-ref="linevector::lines_alloced" data-ref-filename="linevector..lines_alloced">lines_alloced</a> == <var>0</var>)</td></tr>
<tr><th id="6986">6986</th><td>	    <a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::lines_alloced" title='linevector::lines_alloced' data-use='w' data-ref="linevector::lines_alloced" data-ref-filename="linevector..lines_alloced">lines_alloced</a> = <var>10</var>;</td></tr>
<tr><th id="6987">6987</th><td>	<b>while</b> (<a class="local col4 ref" href="#594from" title='from' data-ref="594from" data-ref-filename="594from">from</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a> &gt; <a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::lines_alloced" title='linevector::lines_alloced' data-use='r' data-ref="linevector::lines_alloced" data-ref-filename="linevector..lines_alloced">lines_alloced</a>)</td></tr>
<tr><th id="6988">6988</th><td>	    <a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::lines_alloced" title='linevector::lines_alloced' data-use='w' data-ref="linevector::lines_alloced" data-ref-filename="linevector..lines_alloced">lines_alloced</a> *= <var>2</var>;</td></tr>
<tr><th id="6989">6989</th><td>	<a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='w' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a> = <a class="ref fn" href="../lib/xalloc.h.html#xnrealloc" title='xnrealloc' data-ref="xnrealloc" data-ref-filename="xnrealloc">xnrealloc</a> (<a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>,</td></tr>
<tr><th id="6990">6990</th><td>				<a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::lines_alloced" title='linevector::lines_alloced' data-use='r' data-ref="linevector::lines_alloced" data-ref-filename="linevector..lines_alloced">lines_alloced</a>,</td></tr>
<tr><th id="6991">6991</th><td>				<b>sizeof</b> (*<a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>));</td></tr>
<tr><th id="6992">6992</th><td>    }</td></tr>
<tr><th id="6993">6993</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>, <a class="local col4 ref" href="#594from" title='from' data-ref="594from" data-ref-filename="594from">from</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>,</td></tr>
<tr><th id="6994">6994</th><td>	    <i>/* XXX: wrong int cast to avoid gcc warning */</i></td></tr>
<tr><th id="6995">6995</th><td>	    <a class="macro" href="../lib/xsize.h.html#98" title="(((int)from-&gt;nlines) &lt;= 18446744073709551615UL / (sizeof (*to-&gt;vector)) ? (size_t) ((int)from-&gt;nlines) * (sizeof (*to-&gt;vector)) : 18446744073709551615UL)" data-ref="_M/xtimes">xtimes</a> ((<em>int</em>)<a class="local col4 ref" href="#594from" title='from' data-ref="594from" data-ref-filename="594from">from</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a>, <b>sizeof</b> (*<a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>)));</td></tr>
<tr><th id="6996">6996</th><td>    <a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='w' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a> = <a class="local col4 ref" href="#594from" title='from' data-ref="594from" data-ref-filename="594from">from</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a>;</td></tr>
<tr><th id="6997">6997</th><td>    <b>for</b> (<a class="local col5 ref" href="#595ln" title='ln' data-ref="595ln" data-ref-filename="595ln">ln</a> = <var>0</var>; <a class="local col5 ref" href="#595ln" title='ln' data-ref="595ln" data-ref-filename="595ln">ln</a> &lt; <a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a>; ++<a class="local col5 ref" href="#595ln" title='ln' data-ref="595ln" data-ref-filename="595ln">ln</a>)</td></tr>
<tr><th id="6998">6998</th><td>	++<a class="local col3 ref" href="#593to" title='to' data-ref="593to" data-ref-filename="593to">to</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col5 ref" href="#595ln" title='ln' data-ref="595ln" data-ref-filename="595ln">ln</a>]-&gt;<a class="tu ref field" href="#line::refcount" title='line::refcount' data-use='w' data-ref="line::refcount" data-ref-filename="line..refcount">refcount</a>;</td></tr>
<tr><th id="6999">6999</th><td>}</td></tr>
<tr><th id="7000">7000</th><td></td></tr>
<tr><th id="7001">7001</th><td></td></tr>
<tr><th id="7002">7002</th><td></td></tr>
<tr><th id="7003">7003</th><td><i  data-doc="linevector_free">/* Free storage associated with linevector.  */</i></td></tr>
<tr><th id="7004">7004</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="7005">7005</th><td><dfn class="tu decl def fn" id="linevector_free" title='linevector_free' data-type='void linevector_free(struct linevector * vec)' data-ref="linevector_free" data-ref-filename="linevector_free">linevector_free</dfn> (<b>struct</b> <a class="type" href="#linevector" title='linevector' data-ref="linevector" data-ref-filename="linevector">linevector</a> *<dfn class="local col6 decl" id="596vec" title='vec' data-type='struct linevector *' data-ref="596vec" data-ref-filename="596vec">vec</dfn>)</td></tr>
<tr><th id="7006">7006</th><td>{</td></tr>
<tr><th id="7007">7007</th><td>    <em>unsigned</em> <em>int</em> <dfn class="local col7 decl" id="597ln" title='ln' data-type='unsigned int' data-ref="597ln" data-ref-filename="597ln">ln</dfn>;</td></tr>
<tr><th id="7008">7008</th><td></td></tr>
<tr><th id="7009">7009</th><td>    <b>if</b> (<a class="local col6 ref" href="#596vec" title='vec' data-ref="596vec" data-ref-filename="596vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7010">7010</th><td>    {</td></tr>
<tr><th id="7011">7011</th><td>	<b>for</b> (<a class="local col7 ref" href="#597ln" title='ln' data-ref="597ln" data-ref-filename="597ln">ln</a> = <var>0</var>; <a class="local col7 ref" href="#597ln" title='ln' data-ref="597ln" data-ref-filename="597ln">ln</a> &lt; <a class="local col6 ref" href="#596vec" title='vec' data-ref="596vec" data-ref-filename="596vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a>; ++<a class="local col7 ref" href="#597ln" title='ln' data-ref="597ln" data-ref-filename="597ln">ln</a>)</td></tr>
<tr><th id="7012">7012</th><td>	    <b>if</b> (--<a class="local col6 ref" href="#596vec" title='vec' data-ref="596vec" data-ref-filename="596vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col7 ref" href="#597ln" title='ln' data-ref="597ln" data-ref-filename="597ln">ln</a>]-&gt;<a class="tu ref field" href="#line::refcount" title='line::refcount' data-use='w' data-ref="line::refcount" data-ref-filename="line..refcount">refcount</a> == <var>0</var>)</td></tr>
<tr><th id="7013">7013</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col6 ref" href="#596vec" title='vec' data-ref="596vec" data-ref-filename="596vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col7 ref" href="#597ln" title='ln' data-ref="597ln" data-ref-filename="597ln">ln</a>]);</td></tr>
<tr><th id="7014">7014</th><td></td></tr>
<tr><th id="7015">7015</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col6 ref" href="#596vec" title='vec' data-ref="596vec" data-ref-filename="596vec">vec</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>);</td></tr>
<tr><th id="7016">7016</th><td>    }</td></tr>
<tr><th id="7017">7017</th><td>}</td></tr>
<tr><th id="7018">7018</th><td></td></tr>
<tr><th id="7019">7019</th><td></td></tr>
<tr><th id="7020">7020</th><td></td></tr>
<tr><th id="7021">7021</th><td><i  data-doc="month_printname">/* Given a textual string giving the month (1-12), terminated with any</i></td></tr>
<tr><th id="7022">7022</th><td><i  data-doc="month_printname">   character not recognized by atoi, return the 3 character name to</i></td></tr>
<tr><th id="7023">7023</th><td><i  data-doc="month_printname">   print it with.  I do not think it is a good idea to change these</i></td></tr>
<tr><th id="7024">7024</th><td><i  data-doc="month_printname">   strings based on the locale; they are standard abbreviations (for</i></td></tr>
<tr><th id="7025">7025</th><td><i  data-doc="month_printname">   example in rfc822 mail messages) which should be widely understood.</i></td></tr>
<tr><th id="7026">7026</th><td><i  data-doc="month_printname">   Returns a pointer into static readonly storage.  */</i></td></tr>
<tr><th id="7027">7027</th><td><em>static</em> <em>const</em> <em>char</em> *</td></tr>
<tr><th id="7028">7028</th><td><dfn class="tu decl def fn" id="month_printname" title='month_printname' data-type='const char * month_printname(const char * month)' data-ref="month_printname" data-ref-filename="month_printname">month_printname</dfn> (<em>const</em> <em>char</em> *<dfn class="local col8 decl" id="598month" title='month' data-type='const char *' data-ref="598month" data-ref-filename="598month">month</dfn>)</td></tr>
<tr><th id="7029">7029</th><td>{</td></tr>
<tr><th id="7030">7030</th><td>    <em>static</em> <em>const</em> <em>char</em> *<em>const</em> <dfn class="local col9 decl" id="599months" title='months' data-type='const char *const [12]' data-ref="599months" data-ref-filename="599months">months</dfn>[] =</td></tr>
<tr><th id="7031">7031</th><td>      {<q>"Jan"</q>, <q>"Feb"</q>, <q>"Mar"</q>, <q>"Apr"</q>, <q>"May"</q>, <q>"Jun"</q>,</td></tr>
<tr><th id="7032">7032</th><td>	 <q>"Jul"</q>, <q>"Aug"</q>, <q>"Sep"</q>, <q>"Oct"</q>, <q>"Nov"</q>, <q>"Dec"</q>};</td></tr>
<tr><th id="7033">7033</th><td>    <em>int</em> <dfn class="local col0 decl" id="600mnum" title='mnum' data-type='int' data-ref="600mnum" data-ref-filename="600mnum">mnum</dfn>;</td></tr>
<tr><th id="7034">7034</th><td></td></tr>
<tr><th id="7035">7035</th><td>    <a class="local col0 ref" href="#600mnum" title='mnum' data-ref="600mnum" data-ref-filename="600mnum">mnum</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#atoi" title='atoi' data-ref="atoi" data-ref-filename="atoi">atoi</a> (<a class="local col8 ref" href="#598month" title='month' data-ref="598month" data-ref-filename="598month">month</a>);</td></tr>
<tr><th id="7036">7036</th><td>    <b>if</b> (<a class="local col0 ref" href="#600mnum" title='mnum' data-ref="600mnum" data-ref-filename="600mnum">mnum</a> &lt; <var>1</var> || <a class="local col0 ref" href="#600mnum" title='mnum' data-ref="600mnum" data-ref-filename="600mnum">mnum</a> &gt; <var>12</var>)</td></tr>
<tr><th id="7037">7037</th><td>	<b>return</b> <q>"???"</q>;</td></tr>
<tr><th id="7038">7038</th><td>    <b>return</b> <a class="local col9 ref" href="#599months" title='months' data-ref="599months" data-ref-filename="599months">months</a>[<a class="local col0 ref" href="#600mnum" title='mnum' data-ref="600mnum" data-ref-filename="600mnum">mnum</a> - <var>1</var>];</td></tr>
<tr><th id="7039">7039</th><td>}</td></tr>
<tr><th id="7040">7040</th><td></td></tr>
<tr><th id="7041">7041</th><td></td></tr>
<tr><th id="7042">7042</th><td></td></tr>
<tr><th id="7043">7043</th><td><i  data-doc="apply_rcs_changes">/* Apply changes to the line vector LINES.  DIFFBUF is a buffer of</i></td></tr>
<tr><th id="7044">7044</th><td><i  data-doc="apply_rcs_changes">   length DIFFLEN holding the change text from an RCS file (the output</i></td></tr>
<tr><th id="7045">7045</th><td><i  data-doc="apply_rcs_changes">   of diff -n).  NAME is used in error messages.  The VERS field of</i></td></tr>
<tr><th id="7046">7046</th><td><i  data-doc="apply_rcs_changes">   any line added is set to ADDVERS.  The VERS field of any line</i></td></tr>
<tr><th id="7047">7047</th><td><i  data-doc="apply_rcs_changes">   deleted is set to DELVERS, unless DELVERS is NULL, in which case</i></td></tr>
<tr><th id="7048">7048</th><td><i  data-doc="apply_rcs_changes">   the VERS field of deleted lines is unchanged.  The function returns</i></td></tr>
<tr><th id="7049">7049</th><td><i  data-doc="apply_rcs_changes">   non-zero if the change text is applied successfully.  It returns</i></td></tr>
<tr><th id="7050">7050</th><td><i  data-doc="apply_rcs_changes">   zero if the change text does not appear to apply to LINES (e.g., a</i></td></tr>
<tr><th id="7051">7051</th><td><i  data-doc="apply_rcs_changes">   line number is invalid).  If the change text is improperly</i></td></tr>
<tr><th id="7052">7052</th><td><i  data-doc="apply_rcs_changes">   formatted (e.g., it is not the output of diff -n), the function</i></td></tr>
<tr><th id="7053">7053</th><td><i  data-doc="apply_rcs_changes">   calls error with a status of 1, causing the program to exit.  */</i></td></tr>
<tr><th id="7054">7054</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="7055">7055</th><td><dfn class="tu decl def fn" id="apply_rcs_changes" title='apply_rcs_changes' data-type='int apply_rcs_changes(struct linevector * lines, const char * diffbuf, size_t difflen, const char * name, RCSVers * addvers, RCSVers * delvers)' data-ref="apply_rcs_changes" data-ref-filename="apply_rcs_changes">apply_rcs_changes</dfn> (<b>struct</b> <a class="type" href="#linevector" title='linevector' data-ref="linevector" data-ref-filename="linevector">linevector</a> *<dfn class="local col1 decl" id="601lines" title='lines' data-type='struct linevector *' data-ref="601lines" data-ref-filename="601lines">lines</dfn>, <em>const</em> <em>char</em> *<dfn class="local col2 decl" id="602diffbuf" title='diffbuf' data-type='const char *' data-ref="602diffbuf" data-ref-filename="602diffbuf">diffbuf</dfn>,</td></tr>
<tr><th id="7056">7056</th><td>		   <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col3 decl" id="603difflen" title='difflen' data-type='size_t' data-ref="603difflen" data-ref-filename="603difflen">difflen</dfn>, <em>const</em> <em>char</em> *<dfn class="local col4 decl" id="604name" title='name' data-type='const char *' data-ref="604name" data-ref-filename="604name">name</dfn>, <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col5 decl" id="605addvers" title='addvers' data-type='RCSVers *' data-ref="605addvers" data-ref-filename="605addvers">addvers</dfn>,</td></tr>
<tr><th id="7057">7057</th><td>		   <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col6 decl" id="606delvers" title='delvers' data-type='RCSVers *' data-ref="606delvers" data-ref-filename="606delvers">delvers</dfn>)</td></tr>
<tr><th id="7058">7058</th><td>{</td></tr>
<tr><th id="7059">7059</th><td>    <em>const</em> <em>char</em> *<dfn class="local col7 decl" id="607p" title='p' data-type='const char *' data-ref="607p" data-ref-filename="607p">p</dfn>;</td></tr>
<tr><th id="7060">7060</th><td>    <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="608q" title='q' data-type='const char *' data-ref="608q" data-ref-filename="608q">q</dfn>;</td></tr>
<tr><th id="7061">7061</th><td>    <em>int</em> <dfn class="local col9 decl" id="609op" title='op' data-type='int' data-ref="609op" data-ref-filename="609op">op</dfn>;</td></tr>
<tr><th id="7062">7062</th><td>    <i>/* The RCS format throws us for a loop in that the deltafrags (if</i></td></tr>
<tr><th id="7063">7063</th><td><i>       we define a deltafrag as an add or a delete) need to be applied</i></td></tr>
<tr><th id="7064">7064</th><td><i>       in reverse order.  So we stick them into a linked list.  */</i></td></tr>
<tr><th id="7065">7065</th><td>    <b>struct</b> <dfn class="local col0 type" id="610deltafrag" title='deltafrag' data-ref="610deltafrag" data-ref-filename="610deltafrag">deltafrag</dfn> {</td></tr>
<tr><th id="7066">7066</th><td>	<b>enum</b> {<dfn class="local col1 enum" id="611FRAG_ADD" title='FRAG_ADD' data-type='0' data-ref="611FRAG_ADD" data-ref-filename="611FRAG_ADD">FRAG_ADD</dfn>, <dfn class="local col2 enum" id="612FRAG_DELETE" title='FRAG_DELETE' data-type='1' data-ref="612FRAG_DELETE" data-ref-filename="612FRAG_DELETE">FRAG_DELETE</dfn>} <dfn class="local col3 decl field" id="613type" title='type' data-type='enum (anonymous enum at /___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c:7066:2)' data-ref="613type" data-ref-filename="613type">type</dfn>;</td></tr>
<tr><th id="7067">7067</th><td>	<em>unsigned</em> <em>long</em> <dfn class="local col4 decl field" id="614pos" title='pos' data-type='unsigned long' data-ref="614pos" data-ref-filename="614pos">pos</dfn>;</td></tr>
<tr><th id="7068">7068</th><td>	<em>unsigned</em> <em>long</em> <dfn class="local col5 decl field" id="615nlines" title='nlines' data-type='unsigned long' data-ref="615nlines" data-ref-filename="615nlines">nlines</dfn>;</td></tr>
<tr><th id="7069">7069</th><td>	<em>const</em> <em>char</em> *<dfn class="local col6 decl field" id="616new_lines" title='new_lines' data-type='const char *' data-ref="616new_lines" data-ref-filename="616new_lines">new_lines</dfn>;</td></tr>
<tr><th id="7070">7070</th><td>	<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col7 decl field" id="617len" title='len' data-type='size_t' data-ref="617len" data-ref-filename="617len">len</dfn>;</td></tr>
<tr><th id="7071">7071</th><td>	<b>struct</b> <a class="local col0 type" href="#610deltafrag" title='deltafrag' data-ref="610deltafrag" data-ref-filename="610deltafrag">deltafrag</a> *<dfn class="local col8 decl field" id="618next" title='next' data-type='struct deltafrag *' data-ref="618next" data-ref-filename="618next">next</dfn>;</td></tr>
<tr><th id="7072">7072</th><td>    };</td></tr>
<tr><th id="7073">7073</th><td>    <b>struct</b> <a class="local col0 type" href="#610deltafrag" title='deltafrag' data-ref="610deltafrag" data-ref-filename="610deltafrag">deltafrag</a> *<dfn class="local col9 decl" id="619dfhead" title='dfhead' data-type='struct deltafrag *' data-ref="619dfhead" data-ref-filename="619dfhead">dfhead</dfn>;</td></tr>
<tr><th id="7074">7074</th><td>    <b>struct</b> <a class="local col0 type" href="#610deltafrag" title='deltafrag' data-ref="610deltafrag" data-ref-filename="610deltafrag">deltafrag</a> *<dfn class="local col0 decl" id="620df" title='df' data-type='struct deltafrag *' data-ref="620df" data-ref-filename="620df">df</dfn>;</td></tr>
<tr><th id="7075">7075</th><td>    <em>int</em> <dfn class="local col1 decl" id="621err" title='err' data-type='int' data-ref="621err" data-ref-filename="621err">err</dfn>;</td></tr>
<tr><th id="7076">7076</th><td></td></tr>
<tr><th id="7077">7077</th><td>    <a class="local col9 ref" href="#619dfhead" title='dfhead' data-ref="619dfhead" data-ref-filename="619dfhead">dfhead</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="7078">7078</th><td>    <b>for</b> (<a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a> = <a class="local col2 ref" href="#602diffbuf" title='diffbuf' data-ref="602diffbuf" data-ref-filename="602diffbuf">diffbuf</a>; <a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a> &lt; <a class="local col2 ref" href="#602diffbuf" title='diffbuf' data-ref="602diffbuf" data-ref-filename="602diffbuf">diffbuf</a> + <a class="local col3 ref" href="#603difflen" title='difflen' data-ref="603difflen" data-ref-filename="603difflen">difflen</a>; )</td></tr>
<tr><th id="7079">7079</th><td>    {</td></tr>
<tr><th id="7080">7080</th><td>	<a class="local col9 ref" href="#609op" title='op' data-ref="609op" data-ref-filename="609op">op</a> = *<a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a>++;</td></tr>
<tr><th id="7081">7081</th><td>	<b>if</b> (<a class="local col9 ref" href="#609op" title='op' data-ref="609op" data-ref-filename="609op">op</a> != <kbd>'a'</kbd> &amp;&amp; <a class="local col9 ref" href="#609op" title='op' data-ref="609op" data-ref-filename="609op">op</a> != <kbd>'d'</kbd>)</td></tr>
<tr><th id="7082">7082</th><td>	    <i>/* Can't just skip over the deltafrag, because the value</i></td></tr>
<tr><th id="7083">7083</th><td><i>	       of op determines the syntax.  */</i></td></tr>
<tr><th id="7084">7084</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"unrecognized operation '\\x%x' in %s"</q>,</td></tr>
<tr><th id="7085">7085</th><td>		   <a class="local col9 ref" href="#609op" title='op' data-ref="609op" data-ref-filename="609op">op</a>, <a class="local col4 ref" href="#604name" title='name' data-ref="604name" data-ref-filename="604name">name</a>);</td></tr>
<tr><th id="7086">7086</th><td>	<a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<b>sizeof</b> (<b>struct</b> <a class="local col0 type" href="#610deltafrag" title='deltafrag' data-ref="610deltafrag" data-ref-filename="610deltafrag">deltafrag</a>));</td></tr>
<tr><th id="7087">7087</th><td>	<a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col8 ref field" href="#618next" title='next' data-ref="618next" data-ref-filename="618next">next</a> = <a class="local col9 ref" href="#619dfhead" title='dfhead' data-ref="619dfhead" data-ref-filename="619dfhead">dfhead</a>;</td></tr>
<tr><th id="7088">7088</th><td>	<a class="local col9 ref" href="#619dfhead" title='dfhead' data-ref="619dfhead" data-ref-filename="619dfhead">dfhead</a> = <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>;</td></tr>
<tr><th id="7089">7089</th><td>	<a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col4 ref field" href="#614pos" title='pos' data-ref="614pos" data-ref-filename="614pos">pos</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#strtoul" title='strtoul' data-ref="strtoul" data-ref-filename="strtoul">strtoul</a> (<a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a>, (<em>char</em> **) &amp;<a class="local col8 ref" href="#608q" title='q' data-ref="608q" data-ref-filename="608q">q</a>, <var>10</var>);</td></tr>
<tr><th id="7090">7090</th><td></td></tr>
<tr><th id="7091">7091</th><td>	<b>if</b> (<a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a> == <a class="local col8 ref" href="#608q" title='q' data-ref="608q" data-ref-filename="608q">q</a>)</td></tr>
<tr><th id="7092">7092</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"number expected in %s"</q>, <a class="local col4 ref" href="#604name" title='name' data-ref="604name" data-ref-filename="604name">name</a>);</td></tr>
<tr><th id="7093">7093</th><td>	<a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a> = <a class="local col8 ref" href="#608q" title='q' data-ref="608q" data-ref-filename="608q">q</a>;</td></tr>
<tr><th id="7094">7094</th><td>	<b>if</b> (*<a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a>++ != <kbd>' '</kbd>)</td></tr>
<tr><th id="7095">7095</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"space expected in %s"</q>, <a class="local col4 ref" href="#604name" title='name' data-ref="604name" data-ref-filename="604name">name</a>);</td></tr>
<tr><th id="7096">7096</th><td>	<a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col5 ref field" href="#615nlines" title='nlines' data-ref="615nlines" data-ref-filename="615nlines">nlines</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#strtoul" title='strtoul' data-ref="strtoul" data-ref-filename="strtoul">strtoul</a> (<a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a>, (<em>char</em> **) &amp;<a class="local col8 ref" href="#608q" title='q' data-ref="608q" data-ref-filename="608q">q</a>, <var>10</var>);</td></tr>
<tr><th id="7097">7097</th><td>	<b>if</b> (<a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a> == <a class="local col8 ref" href="#608q" title='q' data-ref="608q" data-ref-filename="608q">q</a>)</td></tr>
<tr><th id="7098">7098</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"number expected in %s"</q>, <a class="local col4 ref" href="#604name" title='name' data-ref="604name" data-ref-filename="604name">name</a>);</td></tr>
<tr><th id="7099">7099</th><td>	<a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a> = <a class="local col8 ref" href="#608q" title='q' data-ref="608q" data-ref-filename="608q">q</a>;</td></tr>
<tr><th id="7100">7100</th><td>	<b>if</b> (*<a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a>++ != <kbd>'\012'</kbd>)</td></tr>
<tr><th id="7101">7101</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"linefeed expected in %s"</q>, <a class="local col4 ref" href="#604name" title='name' data-ref="604name" data-ref-filename="604name">name</a>);</td></tr>
<tr><th id="7102">7102</th><td></td></tr>
<tr><th id="7103">7103</th><td>	<b>if</b> (<a class="local col9 ref" href="#609op" title='op' data-ref="609op" data-ref-filename="609op">op</a> == <kbd>'a'</kbd>)</td></tr>
<tr><th id="7104">7104</th><td>	{</td></tr>
<tr><th id="7105">7105</th><td>	    <em>unsigned</em> <em>int</em> <dfn class="local col2 decl" id="622i" title='i' data-type='unsigned int' data-ref="622i" data-ref-filename="622i">i</dfn>;</td></tr>
<tr><th id="7106">7106</th><td></td></tr>
<tr><th id="7107">7107</th><td>	    <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col3 ref field" href="#613type" title='type' data-ref="613type" data-ref-filename="613type">type</a> = <a class="local col1 enum" href="#611FRAG_ADD" title='FRAG_ADD' data-ref="611FRAG_ADD" data-ref-filename="611FRAG_ADD">FRAG_ADD</a>;</td></tr>
<tr><th id="7108">7108</th><td>	    <a class="local col2 ref" href="#622i" title='i' data-ref="622i" data-ref-filename="622i">i</a> = <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col5 ref field" href="#615nlines" title='nlines' data-ref="615nlines" data-ref-filename="615nlines">nlines</a>;</td></tr>
<tr><th id="7109">7109</th><td>	    <i>/* The text we want is the number of lines specified, or</i></td></tr>
<tr><th id="7110">7110</th><td><i>	       until the end of the value, whichever comes first (it</i></td></tr>
<tr><th id="7111">7111</th><td><i>	       will be the former except in the case where we are</i></td></tr>
<tr><th id="7112">7112</th><td><i>	       adding a line which does not end in newline).  */</i></td></tr>
<tr><th id="7113">7113</th><td>	    <b>for</b> (<a class="local col8 ref" href="#608q" title='q' data-ref="608q" data-ref-filename="608q">q</a> = <a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a>; <a class="local col2 ref" href="#622i" title='i' data-ref="622i" data-ref-filename="622i">i</a> != <var>0</var>; ++<a class="local col8 ref" href="#608q" title='q' data-ref="608q" data-ref-filename="608q">q</a>)</td></tr>
<tr><th id="7114">7114</th><td>		<b>if</b> (*<a class="local col8 ref" href="#608q" title='q' data-ref="608q" data-ref-filename="608q">q</a> == <kbd>'\n'</kbd>)</td></tr>
<tr><th id="7115">7115</th><td>		    --<a class="local col2 ref" href="#622i" title='i' data-ref="622i" data-ref-filename="622i">i</a>;</td></tr>
<tr><th id="7116">7116</th><td>		<b>else</b> <b>if</b> (<a class="local col8 ref" href="#608q" title='q' data-ref="608q" data-ref-filename="608q">q</a> == <a class="local col2 ref" href="#602diffbuf" title='diffbuf' data-ref="602diffbuf" data-ref-filename="602diffbuf">diffbuf</a> + <a class="local col3 ref" href="#603difflen" title='difflen' data-ref="603difflen" data-ref-filename="603difflen">difflen</a>)</td></tr>
<tr><th id="7117">7117</th><td>		{</td></tr>
<tr><th id="7118">7118</th><td>		    <b>if</b> (<a class="local col2 ref" href="#622i" title='i' data-ref="622i" data-ref-filename="622i">i</a> != <var>1</var>)</td></tr>
<tr><th id="7119">7119</th><td>			<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"premature end of change in %s"</q>, <a class="local col4 ref" href="#604name" title='name' data-ref="604name" data-ref-filename="604name">name</a>);</td></tr>
<tr><th id="7120">7120</th><td>		    <b>else</b></td></tr>
<tr><th id="7121">7121</th><td>			<b>break</b>;</td></tr>
<tr><th id="7122">7122</th><td>		}</td></tr>
<tr><th id="7123">7123</th><td></td></tr>
<tr><th id="7124">7124</th><td>	    <i>/* Stash away a pointer to the text we are adding.  */</i></td></tr>
<tr><th id="7125">7125</th><td>	    <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col6 ref field" href="#616new_lines" title='new_lines' data-ref="616new_lines" data-ref-filename="616new_lines">new_lines</a> = <a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a>;</td></tr>
<tr><th id="7126">7126</th><td>	    <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col7 ref field" href="#617len" title='len' data-ref="617len" data-ref-filename="617len">len</a> = <a class="local col8 ref" href="#608q" title='q' data-ref="608q" data-ref-filename="608q">q</a> - <a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a>;</td></tr>
<tr><th id="7127">7127</th><td></td></tr>
<tr><th id="7128">7128</th><td>	    <a class="local col7 ref" href="#607p" title='p' data-ref="607p" data-ref-filename="607p">p</a> = <a class="local col8 ref" href="#608q" title='q' data-ref="608q" data-ref-filename="608q">q</a>;</td></tr>
<tr><th id="7129">7129</th><td>	}</td></tr>
<tr><th id="7130">7130</th><td>	<b>else</b></td></tr>
<tr><th id="7131">7131</th><td>	{</td></tr>
<tr><th id="7132">7132</th><td>	    <i>/* Correct for the fact that line numbers in RCS files</i></td></tr>
<tr><th id="7133">7133</th><td><i>	       start with 1.  */</i></td></tr>
<tr><th id="7134">7134</th><td>	    --<a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col4 ref field" href="#614pos" title='pos' data-ref="614pos" data-ref-filename="614pos">pos</a>;</td></tr>
<tr><th id="7135">7135</th><td></td></tr>
<tr><th id="7136">7136</th><td>	    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((op == &apos;d&apos;) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 7136, __func__, &quot;op == &apos;d&apos;&quot;))" data-ref="_M/assert">assert</a> (<a class="local col9 ref" href="#609op" title='op' data-ref="609op" data-ref-filename="609op">op</a> == <kbd>'d'</kbd>);</td></tr>
<tr><th id="7137">7137</th><td>	    <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col3 ref field" href="#613type" title='type' data-ref="613type" data-ref-filename="613type">type</a> = <a class="local col2 enum" href="#612FRAG_DELETE" title='FRAG_DELETE' data-ref="612FRAG_DELETE" data-ref-filename="612FRAG_DELETE">FRAG_DELETE</a>;</td></tr>
<tr><th id="7138">7138</th><td>	}</td></tr>
<tr><th id="7139">7139</th><td>    }</td></tr>
<tr><th id="7140">7140</th><td></td></tr>
<tr><th id="7141">7141</th><td>    <a class="local col1 ref" href="#621err" title='err' data-ref="621err" data-ref-filename="621err">err</a> = <var>0</var>;</td></tr>
<tr><th id="7142">7142</th><td>    <b>for</b> (<a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a> = <a class="local col9 ref" href="#619dfhead" title='dfhead' data-ref="619dfhead" data-ref-filename="619dfhead">dfhead</a>; <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;)</td></tr>
<tr><th id="7143">7143</th><td>    {</td></tr>
<tr><th id="7144">7144</th><td>	<em>unsigned</em> <em>int</em> <dfn class="local col3 decl" id="623ln" title='ln' data-type='unsigned int' data-ref="623ln" data-ref-filename="623ln">ln</dfn>;</td></tr>
<tr><th id="7145">7145</th><td></td></tr>
<tr><th id="7146">7146</th><td>	<i>/* Once an error is encountered, just free the rest of the list and</i></td></tr>
<tr><th id="7147">7147</th><td><i>	 * return.</i></td></tr>
<tr><th id="7148">7148</th><td><i>	 */</i></td></tr>
<tr><th id="7149">7149</th><td>	<b>if</b> (!<a class="local col1 ref" href="#621err" title='err' data-ref="621err" data-ref-filename="621err">err</a>)</td></tr>
<tr><th id="7150">7150</th><td>	    <b>switch</b> (<a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col3 ref field" href="#613type" title='type' data-ref="613type" data-ref-filename="613type">type</a>)</td></tr>
<tr><th id="7151">7151</th><td>	    {</td></tr>
<tr><th id="7152">7152</th><td>	    <b>case</b> <a class="local col1 enum" href="#611FRAG_ADD" title='FRAG_ADD' data-ref="611FRAG_ADD" data-ref-filename="611FRAG_ADD">FRAG_ADD</a>:</td></tr>
<tr><th id="7153">7153</th><td>		<b>if</b> (! <a class="tu ref fn" href="#linevector_add" title='linevector_add' data-use='c' data-ref="linevector_add" data-ref-filename="linevector_add">linevector_add</a> (<a class="local col1 ref" href="#601lines" title='lines' data-ref="601lines" data-ref-filename="601lines">lines</a>, <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col6 ref field" href="#616new_lines" title='new_lines' data-ref="616new_lines" data-ref-filename="616new_lines">new_lines</a>, <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col7 ref field" href="#617len" title='len' data-ref="617len" data-ref-filename="617len">len</a>, <a class="local col5 ref" href="#605addvers" title='addvers' data-ref="605addvers" data-ref-filename="605addvers">addvers</a>,</td></tr>
<tr><th id="7154">7154</th><td>				      <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col4 ref field" href="#614pos" title='pos' data-ref="614pos" data-ref-filename="614pos">pos</a>))</td></tr>
<tr><th id="7155">7155</th><td>		    <a class="local col1 ref" href="#621err" title='err' data-ref="621err" data-ref-filename="621err">err</a> = <var>1</var>;</td></tr>
<tr><th id="7156">7156</th><td>		<b>break</b>;</td></tr>
<tr><th id="7157">7157</th><td>	    <b>case</b> <a class="local col2 enum" href="#612FRAG_DELETE" title='FRAG_DELETE' data-ref="612FRAG_DELETE" data-ref-filename="612FRAG_DELETE">FRAG_DELETE</a>:</td></tr>
<tr><th id="7158">7158</th><td>		<b>if</b> (<a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col4 ref field" href="#614pos" title='pos' data-ref="614pos" data-ref-filename="614pos">pos</a> &gt; <a class="local col1 ref" href="#601lines" title='lines' data-ref="601lines" data-ref-filename="601lines">lines</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a></td></tr>
<tr><th id="7159">7159</th><td>		    || <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col4 ref field" href="#614pos" title='pos' data-ref="614pos" data-ref-filename="614pos">pos</a> + <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col5 ref field" href="#615nlines" title='nlines' data-ref="615nlines" data-ref-filename="615nlines">nlines</a> &gt; <a class="local col1 ref" href="#601lines" title='lines' data-ref="601lines" data-ref-filename="601lines">lines</a>-&gt;<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a>)</td></tr>
<tr><th id="7160">7160</th><td>		    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="7161">7161</th><td>		<b>if</b> (<a class="local col6 ref" href="#606delvers" title='delvers' data-ref="606delvers" data-ref-filename="606delvers">delvers</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7162">7162</th><td>		    <b>for</b> (<a class="local col3 ref" href="#623ln" title='ln' data-ref="623ln" data-ref-filename="623ln">ln</a> = <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col4 ref field" href="#614pos" title='pos' data-ref="614pos" data-ref-filename="614pos">pos</a>; <a class="local col3 ref" href="#623ln" title='ln' data-ref="623ln" data-ref-filename="623ln">ln</a> &lt; <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col4 ref field" href="#614pos" title='pos' data-ref="614pos" data-ref-filename="614pos">pos</a> + <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col5 ref field" href="#615nlines" title='nlines' data-ref="615nlines" data-ref-filename="615nlines">nlines</a>; ++<a class="local col3 ref" href="#623ln" title='ln' data-ref="623ln" data-ref-filename="623ln">ln</a>)</td></tr>
<tr><th id="7163">7163</th><td>			<a class="local col1 ref" href="#601lines" title='lines' data-ref="601lines" data-ref-filename="601lines">lines</a>-&gt;<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col3 ref" href="#623ln" title='ln' data-ref="623ln" data-ref-filename="623ln">ln</a>]-&gt;<a class="tu ref field" href="#line::vers" title='line::vers' data-use='w' data-ref="line::vers" data-ref-filename="line..vers">vers</a> = <a class="local col6 ref" href="#606delvers" title='delvers' data-ref="606delvers" data-ref-filename="606delvers">delvers</a>;</td></tr>
<tr><th id="7164">7164</th><td>		<a class="tu ref fn" href="#linevector_delete" title='linevector_delete' data-use='c' data-ref="linevector_delete" data-ref-filename="linevector_delete">linevector_delete</a> (<a class="local col1 ref" href="#601lines" title='lines' data-ref="601lines" data-ref-filename="601lines">lines</a>, <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col4 ref field" href="#614pos" title='pos' data-ref="614pos" data-ref-filename="614pos">pos</a>, <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col5 ref field" href="#615nlines" title='nlines' data-ref="615nlines" data-ref-filename="615nlines">nlines</a>);</td></tr>
<tr><th id="7165">7165</th><td>		<b>break</b>;</td></tr>
<tr><th id="7166">7166</th><td>	    }</td></tr>
<tr><th id="7167">7167</th><td></td></tr>
<tr><th id="7168">7168</th><td>	<a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a> = <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>-&gt;<a class="local col8 ref field" href="#618next" title='next' data-ref="618next" data-ref-filename="618next">next</a>;</td></tr>
<tr><th id="7169">7169</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col9 ref" href="#619dfhead" title='dfhead' data-ref="619dfhead" data-ref-filename="619dfhead">dfhead</a>);</td></tr>
<tr><th id="7170">7170</th><td>	<a class="local col9 ref" href="#619dfhead" title='dfhead' data-ref="619dfhead" data-ref-filename="619dfhead">dfhead</a> = <a class="local col0 ref" href="#620df" title='df' data-ref="620df" data-ref-filename="620df">df</a>;</td></tr>
<tr><th id="7171">7171</th><td>    }</td></tr>
<tr><th id="7172">7172</th><td></td></tr>
<tr><th id="7173">7173</th><td>    <b>return</b> !<a class="local col1 ref" href="#621err" title='err' data-ref="621err" data-ref-filename="621err">err</a>;</td></tr>
<tr><th id="7174">7174</th><td>}</td></tr>
<tr><th id="7175">7175</th><td></td></tr>
<tr><th id="7176">7176</th><td></td></tr>
<tr><th id="7177">7177</th><td></td></tr>
<tr><th id="7178">7178</th><td><i>/* Apply an RCS change text to a buffer.  The function name starts</i></td></tr>
<tr><th id="7179">7179</th><td><i>   with rcs rather than RCS because this does not take an RCSNode</i></td></tr>
<tr><th id="7180">7180</th><td><i>   argument.  NAME is used in error messages.  TEXTBUF is the text</i></td></tr>
<tr><th id="7181">7181</th><td><i>   buffer to change, and TEXTLEN is the size.  DIFFBUF and DIFFLEN are</i></td></tr>
<tr><th id="7182">7182</th><td><i>   the change buffer and size.  The new buffer is returned in *RETBUF</i></td></tr>
<tr><th id="7183">7183</th><td><i>   and *RETLEN.  The new buffer is allocated by xmalloc.</i></td></tr>
<tr><th id="7184">7184</th><td><i></i></td></tr>
<tr><th id="7185">7185</th><td><i>   Return 1 for success.  On failure, call error and return 0.  */</i></td></tr>
<tr><th id="7186">7186</th><td><em>int</em></td></tr>
<tr><th id="7187">7187</th><td><dfn class="decl def fn" id="rcs_change_text" title='rcs_change_text' data-ref="rcs_change_text" data-ref-filename="rcs_change_text">rcs_change_text</dfn> (<em>const</em> <em>char</em> *<dfn class="local col4 decl" id="624name" title='name' data-type='const char *' data-ref="624name" data-ref-filename="624name">name</dfn>, <em>char</em> *<dfn class="local col5 decl" id="625textbuf" title='textbuf' data-type='char *' data-ref="625textbuf" data-ref-filename="625textbuf">textbuf</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col6 decl" id="626textlen" title='textlen' data-type='size_t' data-ref="626textlen" data-ref-filename="626textlen">textlen</dfn>,</td></tr>
<tr><th id="7188">7188</th><td>		 <em>const</em> <em>char</em> *<dfn class="local col7 decl" id="627diffbuf" title='diffbuf' data-type='const char *' data-ref="627diffbuf" data-ref-filename="627diffbuf">diffbuf</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col8 decl" id="628difflen" title='difflen' data-type='size_t' data-ref="628difflen" data-ref-filename="628difflen">difflen</dfn>, <em>char</em> **<dfn class="local col9 decl" id="629retbuf" title='retbuf' data-type='char **' data-ref="629retbuf" data-ref-filename="629retbuf">retbuf</dfn>,</td></tr>
<tr><th id="7189">7189</th><td>		 <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> *<dfn class="local col0 decl" id="630retlen" title='retlen' data-type='size_t *' data-ref="630retlen" data-ref-filename="630retlen">retlen</dfn>)</td></tr>
<tr><th id="7190">7190</th><td>{</td></tr>
<tr><th id="7191">7191</th><td>    <b>struct</b> <a class="type" href="#linevector" title='linevector' data-ref="linevector" data-ref-filename="linevector">linevector</a> <dfn class="local col1 decl" id="631lines" title='lines' data-type='struct linevector' data-ref="631lines" data-ref-filename="631lines">lines</dfn>;</td></tr>
<tr><th id="7192">7192</th><td>    <em>int</em> <dfn class="local col2 decl" id="632ret" title='ret' data-type='int' data-ref="632ret" data-ref-filename="632ret">ret</dfn>;</td></tr>
<tr><th id="7193">7193</th><td></td></tr>
<tr><th id="7194">7194</th><td>    *<a class="local col9 ref" href="#629retbuf" title='retbuf' data-ref="629retbuf" data-ref-filename="629retbuf">retbuf</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="7195">7195</th><td>    *<a class="local col0 ref" href="#630retlen" title='retlen' data-ref="630retlen" data-ref-filename="630retlen">retlen</a> = <var>0</var>;</td></tr>
<tr><th id="7196">7196</th><td></td></tr>
<tr><th id="7197">7197</th><td>    <a class="tu ref fn" href="#linevector_init" title='linevector_init' data-use='c' data-ref="linevector_init" data-ref-filename="linevector_init">linevector_init</a> (&amp;<a class="local col1 ref" href="#631lines" title='lines' data-ref="631lines" data-ref-filename="631lines">lines</a>);</td></tr>
<tr><th id="7198">7198</th><td></td></tr>
<tr><th id="7199">7199</th><td>    <b>if</b> (! <a class="tu ref fn" href="#linevector_add" title='linevector_add' data-use='c' data-ref="linevector_add" data-ref-filename="linevector_add">linevector_add</a> (&amp;<a class="local col1 ref" href="#631lines" title='lines' data-ref="631lines" data-ref-filename="631lines">lines</a>, <a class="local col5 ref" href="#625textbuf" title='textbuf' data-ref="625textbuf" data-ref-filename="625textbuf">textbuf</a>, <a class="local col6 ref" href="#626textlen" title='textlen' data-ref="626textlen" data-ref-filename="626textlen">textlen</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <var>0</var>))</td></tr>
<tr><th id="7200">7200</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"cannot initialize line vector"</q>);</td></tr>
<tr><th id="7201">7201</th><td></td></tr>
<tr><th id="7202">7202</th><td>    <b>if</b> (! <a class="tu ref fn" href="#apply_rcs_changes" title='apply_rcs_changes' data-use='c' data-ref="apply_rcs_changes" data-ref-filename="apply_rcs_changes">apply_rcs_changes</a> (&amp;<a class="local col1 ref" href="#631lines" title='lines' data-ref="631lines" data-ref-filename="631lines">lines</a>, <a class="local col7 ref" href="#627diffbuf" title='diffbuf' data-ref="627diffbuf" data-ref-filename="627diffbuf">diffbuf</a>, <a class="local col8 ref" href="#628difflen" title='difflen' data-ref="628difflen" data-ref-filename="628difflen">difflen</a>, <a class="local col4 ref" href="#624name" title='name' data-ref="624name" data-ref-filename="624name">name</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>))</td></tr>
<tr><th id="7203">7203</th><td>    {</td></tr>
<tr><th id="7204">7204</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"invalid change text in %s"</q>, <a class="local col4 ref" href="#624name" title='name' data-ref="624name" data-ref-filename="624name">name</a>);</td></tr>
<tr><th id="7205">7205</th><td>	<a class="local col2 ref" href="#632ret" title='ret' data-ref="632ret" data-ref-filename="632ret">ret</a> = <var>0</var>;</td></tr>
<tr><th id="7206">7206</th><td>    }</td></tr>
<tr><th id="7207">7207</th><td>    <b>else</b></td></tr>
<tr><th id="7208">7208</th><td>    {</td></tr>
<tr><th id="7209">7209</th><td>	<em>char</em> *<dfn class="local col3 decl" id="633p" title='p' data-type='char *' data-ref="633p" data-ref-filename="633p">p</dfn>;</td></tr>
<tr><th id="7210">7210</th><td>	<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col4 decl" id="634n" title='n' data-type='size_t' data-ref="634n" data-ref-filename="634n">n</dfn>;</td></tr>
<tr><th id="7211">7211</th><td>	<em>unsigned</em> <em>int</em> <dfn class="local col5 decl" id="635ln" title='ln' data-type='unsigned int' data-ref="635ln" data-ref-filename="635ln">ln</dfn>;</td></tr>
<tr><th id="7212">7212</th><td></td></tr>
<tr><th id="7213">7213</th><td>	<a class="local col4 ref" href="#634n" title='n' data-ref="634n" data-ref-filename="634n">n</a> = <var>0</var>;</td></tr>
<tr><th id="7214">7214</th><td>	<b>for</b> (<a class="local col5 ref" href="#635ln" title='ln' data-ref="635ln" data-ref-filename="635ln">ln</a> = <var>0</var>; <a class="local col5 ref" href="#635ln" title='ln' data-ref="635ln" data-ref-filename="635ln">ln</a> &lt; <a class="local col1 ref" href="#631lines" title='lines' data-ref="631lines" data-ref-filename="631lines">lines</a>.<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a>; ++<a class="local col5 ref" href="#635ln" title='ln' data-ref="635ln" data-ref-filename="635ln">ln</a>)</td></tr>
<tr><th id="7215">7215</th><td>	    <i>/* 1 for \n */</i></td></tr>
<tr><th id="7216">7216</th><td>	    <a class="local col4 ref" href="#634n" title='n' data-ref="634n" data-ref-filename="634n">n</a> += <a class="local col1 ref" href="#631lines" title='lines' data-ref="631lines" data-ref-filename="631lines">lines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col5 ref" href="#635ln" title='ln' data-ref="635ln" data-ref-filename="635ln">ln</a>]-&gt;<a class="tu ref field" href="#line::len" title='line::len' data-use='r' data-ref="line::len" data-ref-filename="line..len">len</a> + <var>1</var>;</td></tr>
<tr><th id="7217">7217</th><td></td></tr>
<tr><th id="7218">7218</th><td>	<a class="local col3 ref" href="#633p" title='p' data-ref="633p" data-ref-filename="633p">p</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="local col4 ref" href="#634n" title='n' data-ref="634n" data-ref-filename="634n">n</a>);</td></tr>
<tr><th id="7219">7219</th><td>	*<a class="local col9 ref" href="#629retbuf" title='retbuf' data-ref="629retbuf" data-ref-filename="629retbuf">retbuf</a> = <a class="local col3 ref" href="#633p" title='p' data-ref="633p" data-ref-filename="633p">p</a>;</td></tr>
<tr><th id="7220">7220</th><td></td></tr>
<tr><th id="7221">7221</th><td>	<b>for</b> (<a class="local col5 ref" href="#635ln" title='ln' data-ref="635ln" data-ref-filename="635ln">ln</a> = <var>0</var>; <a class="local col5 ref" href="#635ln" title='ln' data-ref="635ln" data-ref-filename="635ln">ln</a> &lt; <a class="local col1 ref" href="#631lines" title='lines' data-ref="631lines" data-ref-filename="631lines">lines</a>.<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a>; ++<a class="local col5 ref" href="#635ln" title='ln' data-ref="635ln" data-ref-filename="635ln">ln</a>)</td></tr>
<tr><th id="7222">7222</th><td>	{</td></tr>
<tr><th id="7223">7223</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col3 ref" href="#633p" title='p' data-ref="633p" data-ref-filename="633p">p</a>, <a class="local col1 ref" href="#631lines" title='lines' data-ref="631lines" data-ref-filename="631lines">lines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col5 ref" href="#635ln" title='ln' data-ref="635ln" data-ref-filename="635ln">ln</a>]-&gt;<a class="tu ref field" href="#line::text" title='line::text' data-use='r' data-ref="line::text" data-ref-filename="line..text">text</a>, <a class="local col1 ref" href="#631lines" title='lines' data-ref="631lines" data-ref-filename="631lines">lines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col5 ref" href="#635ln" title='ln' data-ref="635ln" data-ref-filename="635ln">ln</a>]-&gt;<a class="tu ref field" href="#line::len" title='line::len' data-use='r' data-ref="line::len" data-ref-filename="line..len">len</a>);</td></tr>
<tr><th id="7224">7224</th><td>	    <a class="local col3 ref" href="#633p" title='p' data-ref="633p" data-ref-filename="633p">p</a> += <a class="local col1 ref" href="#631lines" title='lines' data-ref="631lines" data-ref-filename="631lines">lines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col5 ref" href="#635ln" title='ln' data-ref="635ln" data-ref-filename="635ln">ln</a>]-&gt;<a class="tu ref field" href="#line::len" title='line::len' data-use='r' data-ref="line::len" data-ref-filename="line..len">len</a>;</td></tr>
<tr><th id="7225">7225</th><td>	    <b>if</b> (<a class="local col1 ref" href="#631lines" title='lines' data-ref="631lines" data-ref-filename="631lines">lines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col5 ref" href="#635ln" title='ln' data-ref="635ln" data-ref-filename="635ln">ln</a>]-&gt;<a class="tu ref field" href="#line::has_newline" title='line::has_newline' data-use='r' data-ref="line::has_newline" data-ref-filename="line..has_newline">has_newline</a>)</td></tr>
<tr><th id="7226">7226</th><td>		*<a class="local col3 ref" href="#633p" title='p' data-ref="633p" data-ref-filename="633p">p</a>++ = <kbd>'\n'</kbd>;</td></tr>
<tr><th id="7227">7227</th><td>	}</td></tr>
<tr><th id="7228">7228</th><td></td></tr>
<tr><th id="7229">7229</th><td>	*<a class="local col0 ref" href="#630retlen" title='retlen' data-ref="630retlen" data-ref-filename="630retlen">retlen</a> = <a class="local col3 ref" href="#633p" title='p' data-ref="633p" data-ref-filename="633p">p</a> - *<a class="local col9 ref" href="#629retbuf" title='retbuf' data-ref="629retbuf" data-ref-filename="629retbuf">retbuf</a>;</td></tr>
<tr><th id="7230">7230</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((*retlen &lt;= n) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 7230, __func__, &quot;*retlen &lt;= n&quot;))" data-ref="_M/assert">assert</a> (*<a class="local col0 ref" href="#630retlen" title='retlen' data-ref="630retlen" data-ref-filename="630retlen">retlen</a> &lt;= <a class="local col4 ref" href="#634n" title='n' data-ref="634n" data-ref-filename="634n">n</a>);</td></tr>
<tr><th id="7231">7231</th><td></td></tr>
<tr><th id="7232">7232</th><td>	<a class="local col2 ref" href="#632ret" title='ret' data-ref="632ret" data-ref-filename="632ret">ret</a> = <var>1</var>;</td></tr>
<tr><th id="7233">7233</th><td>    }</td></tr>
<tr><th id="7234">7234</th><td></td></tr>
<tr><th id="7235">7235</th><td>    <a class="tu ref fn" href="#linevector_free" title='linevector_free' data-use='c' data-ref="linevector_free" data-ref-filename="linevector_free">linevector_free</a> (&amp;<a class="local col1 ref" href="#631lines" title='lines' data-ref="631lines" data-ref-filename="631lines">lines</a>);</td></tr>
<tr><th id="7236">7236</th><td></td></tr>
<tr><th id="7237">7237</th><td>    <b>return</b> <a class="local col2 ref" href="#632ret" title='ret' data-ref="632ret" data-ref-filename="632ret">ret</a>;</td></tr>
<tr><th id="7238">7238</th><td>}</td></tr>
<tr><th id="7239">7239</th><td></td></tr>
<tr><th id="7240">7240</th><td></td></tr>
<tr><th id="7241">7241</th><td></td></tr>
<tr><th id="7242">7242</th><td><i>/* Walk the deltas in RCS to get to revision VERSION.</i></td></tr>
<tr><th id="7243">7243</th><td><i></i></td></tr>
<tr><th id="7244">7244</th><td><i>   If OP is RCS_ANNOTATE, then write annotations using cvs_output.</i></td></tr>
<tr><th id="7245">7245</th><td><i></i></td></tr>
<tr><th id="7246">7246</th><td><i>   If OP is RCS_FETCH, then put the contents of VERSION into a</i></td></tr>
<tr><th id="7247">7247</th><td><i>   newly-malloc'd array and put a pointer to it in *TEXT.  Each line</i></td></tr>
<tr><th id="7248">7248</th><td><i>   is \n terminated; the caller is responsible for converting text</i></td></tr>
<tr><th id="7249">7249</th><td><i>   files if desired.  The total length is put in *LEN.</i></td></tr>
<tr><th id="7250">7250</th><td><i></i></td></tr>
<tr><th id="7251">7251</th><td><i>   If FP is non-NULL, it should be a file descriptor open to the file</i></td></tr>
<tr><th id="7252">7252</th><td><i>   RCS with file position pointing to the deltas.  We close the file</i></td></tr>
<tr><th id="7253">7253</th><td><i>   when we are done.</i></td></tr>
<tr><th id="7254">7254</th><td><i></i></td></tr>
<tr><th id="7255">7255</th><td><i>   If LOG is non-NULL, then *LOG is set to the log message of VERSION,</i></td></tr>
<tr><th id="7256">7256</th><td><i>   and *LOGLEN is set to the length of the log message.</i></td></tr>
<tr><th id="7257">7257</th><td><i></i></td></tr>
<tr><th id="7258">7258</th><td><i>   On error, give a fatal error.  */</i></td></tr>
<tr><th id="7259">7259</th><td><em>void</em></td></tr>
<tr><th id="7260">7260</th><td><dfn class="decl def fn" id="RCS_deltas" title='RCS_deltas' data-ref="RCS_deltas" data-ref-filename="RCS_deltas">RCS_deltas</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col6 decl" id="636rcs" title='rcs' data-type='RCSNode *' data-ref="636rcs" data-ref-filename="636rcs">rcs</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col7 decl" id="637fp" title='fp' data-type='FILE *' data-ref="637fp" data-ref-filename="637fp">fp</dfn>, <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col8 decl" id="638rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="638rcsbuf" data-ref-filename="638rcsbuf">rcsbuf</dfn>,</td></tr>
<tr><th id="7261">7261</th><td>            <em>const</em> <em>char</em> *<dfn class="local col9 decl" id="639version" title='version' data-type='const char *' data-ref="639version" data-ref-filename="639version">version</dfn>, <b>enum</b> <a class="type" href="rcs.h.html#rcs_delta_op" title='rcs_delta_op' data-ref="rcs_delta_op" data-ref-filename="rcs_delta_op">rcs_delta_op</a> <dfn class="local col0 decl" id="640op" title='op' data-type='enum rcs_delta_op' data-ref="640op" data-ref-filename="640op">op</dfn>, <em>char</em> **<dfn class="local col1 decl" id="641text" title='text' data-type='char **' data-ref="641text" data-ref-filename="641text">text</dfn>,</td></tr>
<tr><th id="7262">7262</th><td>            <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> *<dfn class="local col2 decl" id="642len" title='len' data-type='size_t *' data-ref="642len" data-ref-filename="642len">len</dfn>, <em>char</em> **<dfn class="local col3 decl" id="643log" title='log' data-type='char **' data-ref="643log" data-ref-filename="643log">log</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> *<dfn class="local col4 decl" id="644loglen" title='loglen' data-type='size_t *' data-ref="644loglen" data-ref-filename="644loglen">loglen</dfn>)</td></tr>
<tr><th id="7263">7263</th><td>{</td></tr>
<tr><th id="7264">7264</th><td>    <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> <dfn class="local col5 decl" id="645rcsbuf_local" title='rcsbuf_local' data-type='struct rcsbuffer' data-ref="645rcsbuf_local" data-ref-filename="645rcsbuf_local">rcsbuf_local</dfn>;</td></tr>
<tr><th id="7265">7265</th><td>    <em>char</em> *<dfn class="local col6 decl" id="646branchversion" title='branchversion' data-type='char *' data-ref="646branchversion" data-ref-filename="646branchversion">branchversion</dfn>;</td></tr>
<tr><th id="7266">7266</th><td>    <em>char</em> *<dfn class="local col7 decl" id="647cpversion" title='cpversion' data-type='char *' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</dfn>;</td></tr>
<tr><th id="7267">7267</th><td>    <em>char</em> *<dfn class="local col8 decl" id="648key" title='key' data-type='char *' data-ref="648key" data-ref-filename="648key">key</dfn>;</td></tr>
<tr><th id="7268">7268</th><td>    <em>char</em> *<dfn class="local col9 decl" id="649value" title='value' data-type='char *' data-ref="649value" data-ref-filename="649value">value</dfn>;</td></tr>
<tr><th id="7269">7269</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col0 decl" id="650vallen" title='vallen' data-type='size_t' data-ref="650vallen" data-ref-filename="650vallen">vallen</dfn>;</td></tr>
<tr><th id="7270">7270</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col1 decl" id="651vers" title='vers' data-type='RCSVers *' data-ref="651vers" data-ref-filename="651vers">vers</dfn>;</td></tr>
<tr><th id="7271">7271</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col2 decl" id="652prev_vers" title='prev_vers' data-type='RCSVers *' data-ref="652prev_vers" data-ref-filename="652prev_vers">prev_vers</dfn>;</td></tr>
<tr><th id="7272">7272</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col3 decl" id="653trunk_vers" title='trunk_vers' data-type='RCSVers *' data-ref="653trunk_vers" data-ref-filename="653trunk_vers">trunk_vers</dfn>;</td></tr>
<tr><th id="7273">7273</th><td>    <em>char</em> *<dfn class="local col4 decl" id="654next" title='next' data-type='char *' data-ref="654next" data-ref-filename="654next">next</dfn>;</td></tr>
<tr><th id="7274">7274</th><td>    <em>int</em> <dfn class="local col5 decl" id="655ishead" title='ishead' data-type='int' data-ref="655ishead" data-ref-filename="655ishead">ishead</dfn>, <dfn class="local col6 decl" id="656isnext" title='isnext' data-type='int' data-ref="656isnext" data-ref-filename="656isnext">isnext</dfn>, <dfn class="local col7 decl" id="657isversion" title='isversion' data-type='int' data-ref="657isversion" data-ref-filename="657isversion">isversion</dfn>, <dfn class="local col8 decl" id="658onbranch" title='onbranch' data-type='int' data-ref="658onbranch" data-ref-filename="658onbranch">onbranch</dfn>;</td></tr>
<tr><th id="7275">7275</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col9 decl" id="659node" title='node' data-type='Node *' data-ref="659node" data-ref-filename="659node">node</dfn>;</td></tr>
<tr><th id="7276">7276</th><td>    <b>struct</b> <a class="type" href="#linevector" title='linevector' data-ref="linevector" data-ref-filename="linevector">linevector</a> <dfn class="local col0 decl" id="660headlines" title='headlines' data-type='struct linevector' data-ref="660headlines" data-ref-filename="660headlines">headlines</dfn>;</td></tr>
<tr><th id="7277">7277</th><td>    <b>struct</b> <a class="type" href="#linevector" title='linevector' data-ref="linevector" data-ref-filename="linevector">linevector</a> <dfn class="local col1 decl" id="661curlines" title='curlines' data-type='struct linevector' data-ref="661curlines" data-ref-filename="661curlines">curlines</dfn>;</td></tr>
<tr><th id="7278">7278</th><td>    <b>struct</b> <a class="type" href="#linevector" title='linevector' data-ref="linevector" data-ref-filename="linevector">linevector</a> <dfn class="local col2 decl" id="662trunklines" title='trunklines' data-type='struct linevector' data-ref="662trunklines" data-ref-filename="662trunklines">trunklines</dfn>;</td></tr>
<tr><th id="7279">7279</th><td>    <em>int</em> <dfn class="local col3 decl" id="663foundhead" title='foundhead' data-type='int' data-ref="663foundhead" data-ref-filename="663foundhead">foundhead</dfn>;</td></tr>
<tr><th id="7280">7280</th><td></td></tr>
<tr><th id="7281">7281</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((version) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 7281, __func__, &quot;version&quot;))" data-ref="_M/assert">assert</a> (<a class="local col9 ref" href="#639version" title='version' data-ref="639version" data-ref-filename="639version">version</a>);</td></tr>
<tr><th id="7282">7282</th><td></td></tr>
<tr><th id="7283">7283</th><td>    <b>if</b> (<a class="local col7 ref" href="#637fp" title='fp' data-ref="637fp" data-ref-filename="637fp">fp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7284">7284</th><td>    {</td></tr>
<tr><th id="7285">7285</th><td>	<a class="tu ref fn" href="#rcsbuf_cache_open" title='rcsbuf_cache_open' data-use='c' data-ref="rcsbuf_cache_open" data-ref-filename="rcsbuf_cache_open">rcsbuf_cache_open</a> (<a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>, <a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::delta_pos" title='rcsnode::delta_pos' data-ref="rcsnode::delta_pos" data-ref-filename="rcsnode..delta_pos">delta_pos</a>, &amp;<a class="local col7 ref" href="#637fp" title='fp' data-ref="637fp" data-ref-filename="637fp">fp</a>, &amp;<a class="local col5 ref" href="#645rcsbuf_local" title='rcsbuf_local' data-ref="645rcsbuf_local" data-ref-filename="645rcsbuf_local">rcsbuf_local</a>);</td></tr>
<tr><th id="7286">7286</th><td>	<a class="local col8 ref" href="#638rcsbuf" title='rcsbuf' data-ref="638rcsbuf" data-ref-filename="638rcsbuf">rcsbuf</a> = &amp;<a class="local col5 ref" href="#645rcsbuf_local" title='rcsbuf_local' data-ref="645rcsbuf_local" data-ref-filename="645rcsbuf_local">rcsbuf_local</a>;</td></tr>
<tr><th id="7287">7287</th><td>    }</td></tr>
<tr><th id="7288">7288</th><td></td></tr>
<tr><th id="7289">7289</th><td>   <b>if</b> (<a class="local col3 ref" href="#643log" title='log' data-ref="643log" data-ref-filename="643log">log</a>) *<a class="local col3 ref" href="#643log" title='log' data-ref="643log" data-ref-filename="643log">log</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="7290">7290</th><td></td></tr>
<tr><th id="7291">7291</th><td>    <a class="local col5 ref" href="#655ishead" title='ishead' data-ref="655ishead" data-ref-filename="655ishead">ishead</a> = <var>1</var>;</td></tr>
<tr><th id="7292">7292</th><td>    <a class="local col1 ref" href="#651vers" title='vers' data-ref="651vers" data-ref-filename="651vers">vers</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="7293">7293</th><td>    <a class="local col2 ref" href="#652prev_vers" title='prev_vers' data-ref="652prev_vers" data-ref-filename="652prev_vers">prev_vers</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="7294">7294</th><td>    <a class="local col3 ref" href="#653trunk_vers" title='trunk_vers' data-ref="653trunk_vers" data-ref-filename="653trunk_vers">trunk_vers</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="7295">7295</th><td>    <a class="local col4 ref" href="#654next" title='next' data-ref="654next" data-ref-filename="654next">next</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="7296">7296</th><td>    <a class="local col8 ref" href="#658onbranch" title='onbranch' data-ref="658onbranch" data-ref-filename="658onbranch">onbranch</a> = <var>0</var>;</td></tr>
<tr><th id="7297">7297</th><td>    <a class="local col3 ref" href="#663foundhead" title='foundhead' data-ref="663foundhead" data-ref-filename="663foundhead">foundhead</a> = <var>0</var>;</td></tr>
<tr><th id="7298">7298</th><td></td></tr>
<tr><th id="7299">7299</th><td>    <a class="tu ref fn" href="#linevector_init" title='linevector_init' data-use='c' data-ref="linevector_init" data-ref-filename="linevector_init">linevector_init</a> (&amp;<a class="local col1 ref" href="#661curlines" title='curlines' data-ref="661curlines" data-ref-filename="661curlines">curlines</a>);</td></tr>
<tr><th id="7300">7300</th><td>    <a class="tu ref fn" href="#linevector_init" title='linevector_init' data-use='c' data-ref="linevector_init" data-ref-filename="linevector_init">linevector_init</a> (&amp;<a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>);</td></tr>
<tr><th id="7301">7301</th><td>    <a class="tu ref fn" href="#linevector_init" title='linevector_init' data-use='c' data-ref="linevector_init" data-ref-filename="linevector_init">linevector_init</a> (&amp;<a class="local col2 ref" href="#662trunklines" title='trunklines' data-ref="662trunklines" data-ref-filename="662trunklines">trunklines</a>);</td></tr>
<tr><th id="7302">7302</th><td></td></tr>
<tr><th id="7303">7303</th><td>    <i>/* We set BRANCHVERSION to the version we are currently looking</i></td></tr>
<tr><th id="7304">7304</th><td><i>       for.  Initially, this is the version on the trunk from which</i></td></tr>
<tr><th id="7305">7305</th><td><i>       VERSION branches off.  If VERSION is not a branch, then</i></td></tr>
<tr><th id="7306">7306</th><td><i>       BRANCHVERSION is just VERSION.  */</i></td></tr>
<tr><th id="7307">7307</th><td>    <a class="local col6 ref" href="#646branchversion" title='branchversion' data-ref="646branchversion" data-ref-filename="646branchversion">branchversion</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col9 ref" href="#639version" title='version' data-ref="639version" data-ref-filename="639version">version</a>);</td></tr>
<tr><th id="7308">7308</th><td>    <a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strchr" title='strchr' data-ref="strchr" data-ref-filename="strchr">strchr</a> (<a class="local col6 ref" href="#646branchversion" title='branchversion' data-ref="646branchversion" data-ref-filename="646branchversion">branchversion</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="7309">7309</th><td>    <b>if</b> (<a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7310">7310</th><td>        <a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strchr" title='strchr' data-ref="strchr" data-ref-filename="strchr">strchr</a> (<a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a> + <var>1</var>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="7311">7311</th><td>    <b>if</b> (<a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7312">7312</th><td>        *<a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="7313">7313</th><td></td></tr>
<tr><th id="7314">7314</th><td>    <b>do</b> {</td></tr>
<tr><th id="7315">7315</th><td>	<b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getrevnum" title='rcsbuf_getrevnum' data-use='c' data-ref="rcsbuf_getrevnum" data-ref-filename="rcsbuf_getrevnum">rcsbuf_getrevnum</a> (<a class="local col8 ref" href="#638rcsbuf" title='rcsbuf' data-ref="638rcsbuf" data-ref-filename="638rcsbuf">rcsbuf</a>, &amp;<a class="local col8 ref" href="#648key" title='key' data-ref="648key" data-ref-filename="648key">key</a>))</td></tr>
<tr><th id="7316">7316</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"unexpected EOF reading RCS file %s"</q>, <a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="7317">7317</th><td></td></tr>
<tr><th id="7318">7318</th><td>	<b>if</b> (<a class="local col4 ref" href="#654next" title='next' data-ref="654next" data-ref-filename="654next">next</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; ! <a class="macro" href="#138" title="(*(char *)(next) == *(char *)(key) &amp;&amp; strcmp ((next), (key)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col4 ref" href="#654next" title='next' data-ref="654next" data-ref-filename="654next">next</a>, <a class="local col8 ref" href="#648key" title='key' data-ref="648key" data-ref-filename="648key">key</a>))</td></tr>
<tr><th id="7319">7319</th><td>	{</td></tr>
<tr><th id="7320">7320</th><td>	    <i>/* This is not the next version we need.  It is a branch</i></td></tr>
<tr><th id="7321">7321</th><td><i>               version which we want to ignore.  */</i></td></tr>
<tr><th id="7322">7322</th><td>	    <a class="local col6 ref" href="#656isnext" title='isnext' data-ref="656isnext" data-ref-filename="656isnext">isnext</a> = <var>0</var>;</td></tr>
<tr><th id="7323">7323</th><td>	    <a class="local col7 ref" href="#657isversion" title='isversion' data-ref="657isversion" data-ref-filename="657isversion">isversion</a> = <var>0</var>;</td></tr>
<tr><th id="7324">7324</th><td>	}</td></tr>
<tr><th id="7325">7325</th><td>	<b>else</b></td></tr>
<tr><th id="7326">7326</th><td>	{</td></tr>
<tr><th id="7327">7327</th><td>	    <a class="local col6 ref" href="#656isnext" title='isnext' data-ref="656isnext" data-ref-filename="656isnext">isnext</a> = <var>1</var>;</td></tr>
<tr><th id="7328">7328</th><td></td></tr>
<tr><th id="7329">7329</th><td>	    <i>/* look up the revision */</i></td></tr>
<tr><th id="7330">7330</th><td>	    <a class="local col9 ref" href="#659node" title='node' data-ref="659node" data-ref-filename="659node">node</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col8 ref" href="#648key" title='key' data-ref="648key" data-ref-filename="648key">key</a>);</td></tr>
<tr><th id="7331">7331</th><td>	    <b>if</b> (<a class="local col9 ref" href="#659node" title='node' data-ref="659node" data-ref-filename="659node">node</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7332">7332</th><td>	        <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>,</td></tr>
<tr><th id="7333">7333</th><td>		       <q>"mismatch in rcs file %s between deltas and deltatexts (%s)"</q>,</td></tr>
<tr><th id="7334">7334</th><td>		       <a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col8 ref" href="#648key" title='key' data-ref="648key" data-ref-filename="648key">key</a>);</td></tr>
<tr><th id="7335">7335</th><td></td></tr>
<tr><th id="7336">7336</th><td>	    <i>/* Stash the previous version.  */</i></td></tr>
<tr><th id="7337">7337</th><td>	    <a class="local col2 ref" href="#652prev_vers" title='prev_vers' data-ref="652prev_vers" data-ref-filename="652prev_vers">prev_vers</a> = <a class="local col1 ref" href="#651vers" title='vers' data-ref="651vers" data-ref-filename="651vers">vers</a>;</td></tr>
<tr><th id="7338">7338</th><td></td></tr>
<tr><th id="7339">7339</th><td>	    <a class="local col1 ref" href="#651vers" title='vers' data-ref="651vers" data-ref-filename="651vers">vers</a> = <a class="local col9 ref" href="#659node" title='node' data-ref="659node" data-ref-filename="659node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="7340">7340</th><td>	    <a class="local col4 ref" href="#654next" title='next' data-ref="654next" data-ref-filename="654next">next</a> = <a class="local col1 ref" href="#651vers" title='vers' data-ref="651vers" data-ref-filename="651vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>;</td></tr>
<tr><th id="7341">7341</th><td></td></tr>
<tr><th id="7342">7342</th><td>	    <i>/* Compare key and trunkversion now, because key points to</i></td></tr>
<tr><th id="7343">7343</th><td><i>	       storage controlled by rcsbuf_getkey.  */</i></td></tr>
<tr><th id="7344">7344</th><td>	    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(branchversion) == *(char *)(key) &amp;&amp; strcmp ((branchversion), (key)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col6 ref" href="#646branchversion" title='branchversion' data-ref="646branchversion" data-ref-filename="646branchversion">branchversion</a>, <a class="local col8 ref" href="#648key" title='key' data-ref="648key" data-ref-filename="648key">key</a>))</td></tr>
<tr><th id="7345">7345</th><td>	        <a class="local col7 ref" href="#657isversion" title='isversion' data-ref="657isversion" data-ref-filename="657isversion">isversion</a> = <var>1</var>;</td></tr>
<tr><th id="7346">7346</th><td>	    <b>else</b></td></tr>
<tr><th id="7347">7347</th><td>	        <a class="local col7 ref" href="#657isversion" title='isversion' data-ref="657isversion" data-ref-filename="657isversion">isversion</a> = <var>0</var>;</td></tr>
<tr><th id="7348">7348</th><td>	}</td></tr>
<tr><th id="7349">7349</th><td></td></tr>
<tr><th id="7350">7350</th><td>	<b>while</b> (<var>1</var>)</td></tr>
<tr><th id="7351">7351</th><td>	{</td></tr>
<tr><th id="7352">7352</th><td>	    <b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (<a class="local col8 ref" href="#638rcsbuf" title='rcsbuf' data-ref="638rcsbuf" data-ref-filename="638rcsbuf">rcsbuf</a>, &amp;<a class="local col8 ref" href="#648key" title='key' data-ref="648key" data-ref-filename="648key">key</a>, &amp;<a class="local col9 ref" href="#649value" title='value' data-ref="649value" data-ref-filename="649value">value</a>))</td></tr>
<tr><th id="7353">7353</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"%s does not appear to be a valid rcs file"</q>,</td></tr>
<tr><th id="7354">7354</th><td>		       <a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="7355">7355</th><td></td></tr>
<tr><th id="7356">7356</th><td>	    <b>if</b> (<a class="local col3 ref" href="#643log" title='log' data-ref="643log" data-ref-filename="643log">log</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span></td></tr>
<tr><th id="7357">7357</th><td>		&amp;&amp; <a class="local col7 ref" href="#657isversion" title='isversion' data-ref="657isversion" data-ref-filename="657isversion">isversion</a></td></tr>
<tr><th id="7358">7358</th><td>		&amp;&amp; <a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;log&quot;) &amp;&amp; strcmp ((key), (&quot;log&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col8 ref" href="#648key" title='key' data-ref="648key" data-ref-filename="648key">key</a>, <q>"log"</q>)</td></tr>
<tr><th id="7359">7359</th><td>		&amp;&amp; <a class="macro" href="#138" title="(*(char *)(branchversion) == *(char *)(version) &amp;&amp; strcmp ((branchversion), (version)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col6 ref" href="#646branchversion" title='branchversion' data-ref="646branchversion" data-ref-filename="646branchversion">branchversion</a>, <a class="local col9 ref" href="#639version" title='version' data-ref="639version" data-ref-filename="639version">version</a>))</td></tr>
<tr><th id="7360">7360</th><td>	    {</td></tr>
<tr><th id="7361">7361</th><td>		<b>if</b> (*<a class="local col3 ref" href="#643log" title='log' data-ref="643log" data-ref-filename="643log">log</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7362">7362</th><td>		{</td></tr>
<tr><th id="7363">7363</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"Duplicate `log' keyword in RCS file (`%s')."</q>,</td></tr>
<tr><th id="7364">7364</th><td>		           <a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="7365">7365</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (*<a class="local col3 ref" href="#643log" title='log' data-ref="643log" data-ref-filename="643log">log</a>);</td></tr>
<tr><th id="7366">7366</th><td>		}</td></tr>
<tr><th id="7367">7367</th><td>		*<a class="local col3 ref" href="#643log" title='log' data-ref="643log" data-ref-filename="643log">log</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (<a class="local col8 ref" href="#638rcsbuf" title='rcsbuf' data-ref="638rcsbuf" data-ref-filename="638rcsbuf">rcsbuf</a>, <a class="local col9 ref" href="#649value" title='value' data-ref="649value" data-ref-filename="649value">value</a>, <var>0</var>, <a class="local col4 ref" href="#644loglen" title='loglen' data-ref="644loglen" data-ref-filename="644loglen">loglen</a>);</td></tr>
<tr><th id="7368">7368</th><td>	    }</td></tr>
<tr><th id="7369">7369</th><td></td></tr>
<tr><th id="7370">7370</th><td>	    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;text&quot;) &amp;&amp; strcmp ((key), (&quot;text&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col8 ref" href="#648key" title='key' data-ref="648key" data-ref-filename="648key">key</a>, <q>"text"</q>))</td></tr>
<tr><th id="7371">7371</th><td>	    {</td></tr>
<tr><th id="7372">7372</th><td>		<a class="tu ref fn" href="#rcsbuf_valpolish" title='rcsbuf_valpolish' data-use='c' data-ref="rcsbuf_valpolish" data-ref-filename="rcsbuf_valpolish">rcsbuf_valpolish</a> (<a class="local col8 ref" href="#638rcsbuf" title='rcsbuf' data-ref="638rcsbuf" data-ref-filename="638rcsbuf">rcsbuf</a>, <a class="local col9 ref" href="#649value" title='value' data-ref="649value" data-ref-filename="649value">value</a>, <var>0</var>, &amp;<a class="local col0 ref" href="#650vallen" title='vallen' data-ref="650vallen" data-ref-filename="650vallen">vallen</a>);</td></tr>
<tr><th id="7373">7373</th><td>		<b>if</b> (<a class="local col5 ref" href="#655ishead" title='ishead' data-ref="655ishead" data-ref-filename="655ishead">ishead</a>)</td></tr>
<tr><th id="7374">7374</th><td>		{</td></tr>
<tr><th id="7375">7375</th><td>		    <b>if</b> (! <a class="tu ref fn" href="#linevector_add" title='linevector_add' data-use='c' data-ref="linevector_add" data-ref-filename="linevector_add">linevector_add</a> (&amp;<a class="local col1 ref" href="#661curlines" title='curlines' data-ref="661curlines" data-ref-filename="661curlines">curlines</a>, <a class="local col9 ref" href="#649value" title='value' data-ref="649value" data-ref-filename="649value">value</a>, <a class="local col0 ref" href="#650vallen" title='vallen' data-ref="650vallen" data-ref-filename="650vallen">vallen</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <var>0</var>))</td></tr>
<tr><th id="7376">7376</th><td>			<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"invalid rcs file %s"</q>, <a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="7377">7377</th><td></td></tr>
<tr><th id="7378">7378</th><td>		    <a class="local col5 ref" href="#655ishead" title='ishead' data-ref="655ishead" data-ref-filename="655ishead">ishead</a> = <var>0</var>;</td></tr>
<tr><th id="7379">7379</th><td>		}</td></tr>
<tr><th id="7380">7380</th><td>		<b>else</b> <b>if</b> (<a class="local col6 ref" href="#656isnext" title='isnext' data-ref="656isnext" data-ref-filename="656isnext">isnext</a>)</td></tr>
<tr><th id="7381">7381</th><td>		{</td></tr>
<tr><th id="7382">7382</th><td>		    <b>if</b> (! <a class="tu ref fn" href="#apply_rcs_changes" title='apply_rcs_changes' data-use='c' data-ref="apply_rcs_changes" data-ref-filename="apply_rcs_changes">apply_rcs_changes</a> (&amp;<a class="local col1 ref" href="#661curlines" title='curlines' data-ref="661curlines" data-ref-filename="661curlines">curlines</a>, <a class="local col9 ref" href="#649value" title='value' data-ref="649value" data-ref-filename="649value">value</a>, <a class="local col0 ref" href="#650vallen" title='vallen' data-ref="650vallen" data-ref-filename="650vallen">vallen</a>,</td></tr>
<tr><th id="7383">7383</th><td>					     <a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>,</td></tr>
<tr><th id="7384">7384</th><td>					     <a class="local col8 ref" href="#658onbranch" title='onbranch' data-ref="658onbranch" data-ref-filename="658onbranch">onbranch</a> ? <a class="local col1 ref" href="#651vers" title='vers' data-ref="651vers" data-ref-filename="651vers">vers</a> : <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>,</td></tr>
<tr><th id="7385">7385</th><td>					     <a class="local col8 ref" href="#658onbranch" title='onbranch' data-ref="658onbranch" data-ref-filename="658onbranch">onbranch</a> ? <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> : <a class="local col2 ref" href="#652prev_vers" title='prev_vers' data-ref="652prev_vers" data-ref-filename="652prev_vers">prev_vers</a>))</td></tr>
<tr><th id="7386">7386</th><td>			<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"invalid change text in %s"</q>, <a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="7387">7387</th><td>		}</td></tr>
<tr><th id="7388">7388</th><td>		<b>break</b>;</td></tr>
<tr><th id="7389">7389</th><td>	    }</td></tr>
<tr><th id="7390">7390</th><td>	}</td></tr>
<tr><th id="7391">7391</th><td></td></tr>
<tr><th id="7392">7392</th><td>	<b>if</b> (<a class="local col7 ref" href="#657isversion" title='isversion' data-ref="657isversion" data-ref-filename="657isversion">isversion</a>)</td></tr>
<tr><th id="7393">7393</th><td>	{</td></tr>
<tr><th id="7394">7394</th><td>	    <i>/* This is either the version we want, or it is the</i></td></tr>
<tr><th id="7395">7395</th><td><i>               branchpoint to the version we want.  */</i></td></tr>
<tr><th id="7396">7396</th><td>	    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(branchversion) == *(char *)(version) &amp;&amp; strcmp ((branchversion), (version)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col6 ref" href="#646branchversion" title='branchversion' data-ref="646branchversion" data-ref-filename="646branchversion">branchversion</a>, <a class="local col9 ref" href="#639version" title='version' data-ref="639version" data-ref-filename="639version">version</a>))</td></tr>
<tr><th id="7397">7397</th><td>	    {</td></tr>
<tr><th id="7398">7398</th><td>	        <i>/* This is the version we want.  */</i></td></tr>
<tr><th id="7399">7399</th><td>		<a class="tu ref fn" href="#linevector_copy" title='linevector_copy' data-use='c' data-ref="linevector_copy" data-ref-filename="linevector_copy">linevector_copy</a> (&amp;<a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>, &amp;<a class="local col1 ref" href="#661curlines" title='curlines' data-ref="661curlines" data-ref-filename="661curlines">curlines</a>);</td></tr>
<tr><th id="7400">7400</th><td>		<a class="local col3 ref" href="#663foundhead" title='foundhead' data-ref="663foundhead" data-ref-filename="663foundhead">foundhead</a> = <var>1</var>;</td></tr>
<tr><th id="7401">7401</th><td>		<b>if</b> (<a class="local col8 ref" href="#658onbranch" title='onbranch' data-ref="658onbranch" data-ref-filename="658onbranch">onbranch</a>)</td></tr>
<tr><th id="7402">7402</th><td>		{</td></tr>
<tr><th id="7403">7403</th><td>		    <i>/* We have found this version by tracking up a</i></td></tr>
<tr><th id="7404">7404</th><td><i>                       branch.  Restore back to the lines we saved</i></td></tr>
<tr><th id="7405">7405</th><td><i>                       when we left the trunk, and continue tracking</i></td></tr>
<tr><th id="7406">7406</th><td><i>                       down the trunk.  */</i></td></tr>
<tr><th id="7407">7407</th><td>		    <a class="local col8 ref" href="#658onbranch" title='onbranch' data-ref="658onbranch" data-ref-filename="658onbranch">onbranch</a> = <var>0</var>;</td></tr>
<tr><th id="7408">7408</th><td>		    <a class="local col1 ref" href="#651vers" title='vers' data-ref="651vers" data-ref-filename="651vers">vers</a> = <a class="local col3 ref" href="#653trunk_vers" title='trunk_vers' data-ref="653trunk_vers" data-ref-filename="653trunk_vers">trunk_vers</a>;</td></tr>
<tr><th id="7409">7409</th><td>		    <a class="local col4 ref" href="#654next" title='next' data-ref="654next" data-ref-filename="654next">next</a> = <a class="local col1 ref" href="#651vers" title='vers' data-ref="651vers" data-ref-filename="651vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>;</td></tr>
<tr><th id="7410">7410</th><td>		    <a class="tu ref fn" href="#linevector_copy" title='linevector_copy' data-use='c' data-ref="linevector_copy" data-ref-filename="linevector_copy">linevector_copy</a> (&amp;<a class="local col1 ref" href="#661curlines" title='curlines' data-ref="661curlines" data-ref-filename="661curlines">curlines</a>, &amp;<a class="local col2 ref" href="#662trunklines" title='trunklines' data-ref="662trunklines" data-ref-filename="662trunklines">trunklines</a>);</td></tr>
<tr><th id="7411">7411</th><td>		}</td></tr>
<tr><th id="7412">7412</th><td>	    }</td></tr>
<tr><th id="7413">7413</th><td>	    <b>else</b></td></tr>
<tr><th id="7414">7414</th><td>	    {</td></tr>
<tr><th id="7415">7415</th><td>	        <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col4 decl" id="664p" title='p' data-type='Node *' data-ref="664p" data-ref-filename="664p">p</dfn>;</td></tr>
<tr><th id="7416">7416</th><td></td></tr>
<tr><th id="7417">7417</th><td>	        <i>/* We need to look up the branch.  */</i></td></tr>
<tr><th id="7418">7418</th><td>	        <a class="local col8 ref" href="#658onbranch" title='onbranch' data-ref="658onbranch" data-ref-filename="658onbranch">onbranch</a> = <var>1</var>;</td></tr>
<tr><th id="7419">7419</th><td></td></tr>
<tr><th id="7420">7420</th><td>		<b>if</b> (<a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col6 ref" href="#646branchversion" title='branchversion' data-ref="646branchversion" data-ref-filename="646branchversion">branchversion</a>) &lt; <var>2</var>)</td></tr>
<tr><th id="7421">7421</th><td>		{</td></tr>
<tr><th id="7422">7422</th><td>		    <em>unsigned</em> <em>int</em> <dfn class="local col5 decl" id="665ln" title='ln' data-type='unsigned int' data-ref="665ln" data-ref-filename="665ln">ln</dfn>;</td></tr>
<tr><th id="7423">7423</th><td></td></tr>
<tr><th id="7424">7424</th><td>		    <i>/* We are leaving the trunk; save the current</i></td></tr>
<tr><th id="7425">7425</th><td><i>                       lines so that we can restore them when we</i></td></tr>
<tr><th id="7426">7426</th><td><i>                       continue tracking down the trunk.  */</i></td></tr>
<tr><th id="7427">7427</th><td>		    <a class="local col3 ref" href="#653trunk_vers" title='trunk_vers' data-ref="653trunk_vers" data-ref-filename="653trunk_vers">trunk_vers</a> = <a class="local col1 ref" href="#651vers" title='vers' data-ref="651vers" data-ref-filename="651vers">vers</a>;</td></tr>
<tr><th id="7428">7428</th><td>		    <a class="tu ref fn" href="#linevector_copy" title='linevector_copy' data-use='c' data-ref="linevector_copy" data-ref-filename="linevector_copy">linevector_copy</a> (&amp;<a class="local col2 ref" href="#662trunklines" title='trunklines' data-ref="662trunklines" data-ref-filename="662trunklines">trunklines</a>, &amp;<a class="local col1 ref" href="#661curlines" title='curlines' data-ref="661curlines" data-ref-filename="661curlines">curlines</a>);</td></tr>
<tr><th id="7429">7429</th><td></td></tr>
<tr><th id="7430">7430</th><td>		    <i>/* Reset the version information we have</i></td></tr>
<tr><th id="7431">7431</th><td><i>                       accumulated so far.  It only applies to the</i></td></tr>
<tr><th id="7432">7432</th><td><i>                       changes from the head to this version.  */</i></td></tr>
<tr><th id="7433">7433</th><td>		    <b>for</b> (<a class="local col5 ref" href="#665ln" title='ln' data-ref="665ln" data-ref-filename="665ln">ln</a> = <var>0</var>; <a class="local col5 ref" href="#665ln" title='ln' data-ref="665ln" data-ref-filename="665ln">ln</a> &lt; <a class="local col1 ref" href="#661curlines" title='curlines' data-ref="661curlines" data-ref-filename="661curlines">curlines</a>.<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a>; ++<a class="local col5 ref" href="#665ln" title='ln' data-ref="665ln" data-ref-filename="665ln">ln</a>)</td></tr>
<tr><th id="7434">7434</th><td>		        <a class="local col1 ref" href="#661curlines" title='curlines' data-ref="661curlines" data-ref-filename="661curlines">curlines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col5 ref" href="#665ln" title='ln' data-ref="665ln" data-ref-filename="665ln">ln</a>]-&gt;<a class="tu ref field" href="#line::vers" title='line::vers' data-use='w' data-ref="line::vers" data-ref-filename="line..vers">vers</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="7435">7435</th><td>		}</td></tr>
<tr><th id="7436">7436</th><td></td></tr>
<tr><th id="7437">7437</th><td>		<i>/* The next version we want is the entry on</i></td></tr>
<tr><th id="7438">7438</th><td><i>                   VERS-&gt;branches which matches this branch.  For</i></td></tr>
<tr><th id="7439">7439</th><td><i>                   example, suppose VERSION is 1.21.4.3 and</i></td></tr>
<tr><th id="7440">7440</th><td><i>                   BRANCHVERSION was 1.21.  Then we look for an entry</i></td></tr>
<tr><th id="7441">7441</th><td><i>                   starting with "1.21.4" and we'll put it (probably</i></td></tr>
<tr><th id="7442">7442</th><td><i>                   1.21.4.1) in NEXT.  We'll advance BRANCHVERSION by</i></td></tr>
<tr><th id="7443">7443</th><td><i>                   two dots (in this example, to 1.21.4.3).  */</i></td></tr>
<tr><th id="7444">7444</th><td></td></tr>
<tr><th id="7445">7445</th><td>		<b>if</b> (<a class="local col1 ref" href="#651vers" title='vers' data-ref="651vers" data-ref-filename="651vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7446">7446</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"missing expected branches in %s"</q>,</td></tr>
<tr><th id="7447">7447</th><td>			   <a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="7448">7448</th><td>		<b>if</b> (!<a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a>)</td></tr>
<tr><th id="7449">7449</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"Invalid revision number in `%s'."</q>,</td></tr>
<tr><th id="7450">7450</th><td>		           <a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="7451">7451</th><td>		*<a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a> = <kbd>'.'</kbd>;</td></tr>
<tr><th id="7452">7452</th><td>		++<a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a>;</td></tr>
<tr><th id="7453">7453</th><td>		<a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strchr" title='strchr' data-ref="strchr" data-ref-filename="strchr">strchr</a> (<a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="7454">7454</th><td>		<b>if</b> (<a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7455">7455</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"version number confusion in %s"</q>,</td></tr>
<tr><th id="7456">7456</th><td>			   <a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="7457">7457</th><td>		<b>for</b> (<a class="local col4 ref" href="#664p" title='p' data-ref="664p" data-ref-filename="664p">p</a> = <a class="local col1 ref" href="#651vers" title='vers' data-ref="651vers" data-ref-filename="651vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>;</td></tr>
<tr><th id="7458">7458</th><td>		     <a class="local col4 ref" href="#664p" title='p' data-ref="664p" data-ref-filename="664p">p</a> != <a class="local col1 ref" href="#651vers" title='vers' data-ref="651vers" data-ref-filename="651vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>;</td></tr>
<tr><th id="7459">7459</th><td>		     <a class="local col4 ref" href="#664p" title='p' data-ref="664p" data-ref-filename="664p">p</a> = <a class="local col4 ref" href="#664p" title='p' data-ref="664p" data-ref-filename="664p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>)</td></tr>
<tr><th id="7460">7460</th><td>		    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col4 ref" href="#664p" title='p' data-ref="664p" data-ref-filename="664p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>, <a class="local col6 ref" href="#646branchversion" title='branchversion' data-ref="646branchversion" data-ref-filename="646branchversion">branchversion</a>,</td></tr>
<tr><th id="7461">7461</th><td>				 <a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a> - <a class="local col6 ref" href="#646branchversion" title='branchversion' data-ref="646branchversion" data-ref-filename="646branchversion">branchversion</a>) == <var>0</var>)</td></tr>
<tr><th id="7462">7462</th><td>			<b>break</b>;</td></tr>
<tr><th id="7463">7463</th><td>		<b>if</b> (<a class="local col4 ref" href="#664p" title='p' data-ref="664p" data-ref-filename="664p">p</a> == <a class="local col1 ref" href="#651vers" title='vers' data-ref="651vers" data-ref-filename="651vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>)</td></tr>
<tr><th id="7464">7464</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"missing expected branch in %s"</q>,</td></tr>
<tr><th id="7465">7465</th><td>			   <a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="7466">7466</th><td></td></tr>
<tr><th id="7467">7467</th><td>		<a class="local col4 ref" href="#654next" title='next' data-ref="654next" data-ref-filename="654next">next</a> = <a class="local col4 ref" href="#664p" title='p' data-ref="664p" data-ref-filename="664p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>;</td></tr>
<tr><th id="7468">7468</th><td></td></tr>
<tr><th id="7469">7469</th><td>		<a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strchr" title='strchr' data-ref="strchr" data-ref-filename="strchr">strchr</a> (<a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a> + <var>1</var>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="7470">7470</th><td>		<b>if</b> (<a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7471">7471</th><td>		    *<a class="local col7 ref" href="#647cpversion" title='cpversion' data-ref="647cpversion" data-ref-filename="647cpversion">cpversion</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="7472">7472</th><td>	    }</td></tr>
<tr><th id="7473">7473</th><td>	}</td></tr>
<tr><th id="7474">7474</th><td>	<b>if</b> (<a class="local col0 ref" href="#640op" title='op' data-ref="640op" data-ref-filename="640op">op</a> == <a class="enum" href="rcs.h.html#RCS_FETCH" title='RCS_FETCH' data-ref="RCS_FETCH" data-ref-filename="RCS_FETCH">RCS_FETCH</a> &amp;&amp; <a class="local col3 ref" href="#663foundhead" title='foundhead' data-ref="663foundhead" data-ref-filename="663foundhead">foundhead</a>)</td></tr>
<tr><th id="7475">7475</th><td>	    <b>break</b>;</td></tr>
<tr><th id="7476">7476</th><td>    } <b>while</b> (<a class="local col4 ref" href="#654next" title='next' data-ref="654next" data-ref-filename="654next">next</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="7477">7477</th><td></td></tr>
<tr><th id="7478">7478</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col6 ref" href="#646branchversion" title='branchversion' data-ref="646branchversion" data-ref-filename="646branchversion">branchversion</a>);</td></tr>
<tr><th id="7479">7479</th><td></td></tr>
<tr><th id="7480">7480</th><td>    <a class="tu ref fn" href="#rcsbuf_cache" title='rcsbuf_cache' data-use='c' data-ref="rcsbuf_cache" data-ref-filename="rcsbuf_cache">rcsbuf_cache</a> (<a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>, <a class="local col8 ref" href="#638rcsbuf" title='rcsbuf' data-ref="638rcsbuf" data-ref-filename="638rcsbuf">rcsbuf</a>);</td></tr>
<tr><th id="7481">7481</th><td></td></tr>
<tr><th id="7482">7482</th><td>    <b>if</b> (! <a class="local col3 ref" href="#663foundhead" title='foundhead' data-ref="663foundhead" data-ref-filename="663foundhead">foundhead</a>)</td></tr>
<tr><th id="7483">7483</th><td>        <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"could not find desired version %s in %s"</q>,</td></tr>
<tr><th id="7484">7484</th><td>	       <a class="local col9 ref" href="#639version" title='version' data-ref="639version" data-ref-filename="639version">version</a>, <a class="local col6 ref" href="#636rcs" title='rcs' data-ref="636rcs" data-ref-filename="636rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="7485">7485</th><td></td></tr>
<tr><th id="7486">7486</th><td>    <i>/* Now print out or return the data we have just computed.  */</i></td></tr>
<tr><th id="7487">7487</th><td>    <b>switch</b> (<a class="local col0 ref" href="#640op" title='op' data-ref="640op" data-ref-filename="640op">op</a>)</td></tr>
<tr><th id="7488">7488</th><td>    {</td></tr>
<tr><th id="7489">7489</th><td>	<b>case</b> <a class="enum" href="rcs.h.html#RCS_ANNOTATE" title='RCS_ANNOTATE' data-ref="RCS_ANNOTATE" data-ref-filename="RCS_ANNOTATE">RCS_ANNOTATE</a>:</td></tr>
<tr><th id="7490">7490</th><td>	    {</td></tr>
<tr><th id="7491">7491</th><td>		<em>unsigned</em> <em>int</em> <dfn class="local col6 decl" id="666ln" title='ln' data-type='unsigned int' data-ref="666ln" data-ref-filename="666ln">ln</dfn>;</td></tr>
<tr><th id="7492">7492</th><td></td></tr>
<tr><th id="7493">7493</th><td>		<b>for</b> (<a class="local col6 ref" href="#666ln" title='ln' data-ref="666ln" data-ref-filename="666ln">ln</a> = <var>0</var>; <a class="local col6 ref" href="#666ln" title='ln' data-ref="666ln" data-ref-filename="666ln">ln</a> &lt; <a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>.<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a>; ++<a class="local col6 ref" href="#666ln" title='ln' data-ref="666ln" data-ref-filename="666ln">ln</a>)</td></tr>
<tr><th id="7494">7494</th><td>		{</td></tr>
<tr><th id="7495">7495</th><td>		    <em>char</em> *<dfn class="local col7 decl" id="667buf" title='buf' data-type='char *' data-ref="667buf" data-ref-filename="667buf">buf</dfn>;</td></tr>
<tr><th id="7496">7496</th><td>		    <i>/* Period which separates year from month in date.  */</i></td></tr>
<tr><th id="7497">7497</th><td>		    <em>char</em> *<dfn class="local col8 decl" id="668ym" title='ym' data-type='char *' data-ref="668ym" data-ref-filename="668ym">ym</dfn>;</td></tr>
<tr><th id="7498">7498</th><td>		    <i>/* Period which separates month from day in date.  */</i></td></tr>
<tr><th id="7499">7499</th><td>		    <em>char</em> *<dfn class="local col9 decl" id="669md" title='md' data-type='char *' data-ref="669md" data-ref-filename="669md">md</dfn>;</td></tr>
<tr><th id="7500">7500</th><td>		    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col0 decl" id="670prvers" title='prvers' data-type='RCSVers *' data-ref="670prvers" data-ref-filename="670prvers">prvers</dfn>;</td></tr>
<tr><th id="7501">7501</th><td></td></tr>
<tr><th id="7502">7502</th><td>		    <a class="local col0 ref" href="#670prvers" title='prvers' data-ref="670prvers" data-ref-filename="670prvers">prvers</a> = <a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col6 ref" href="#666ln" title='ln' data-ref="666ln" data-ref-filename="666ln">ln</a>]-&gt;<a class="tu ref field" href="#line::vers" title='line::vers' data-use='r' data-ref="line::vers" data-ref-filename="line..vers">vers</a>;</td></tr>
<tr><th id="7503">7503</th><td>		    <b>if</b> (<a class="local col0 ref" href="#670prvers" title='prvers' data-ref="670prvers" data-ref-filename="670prvers">prvers</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7504">7504</th><td>			<a class="local col0 ref" href="#670prvers" title='prvers' data-ref="670prvers" data-ref-filename="670prvers">prvers</a> = <a class="local col1 ref" href="#651vers" title='vers' data-ref="651vers" data-ref-filename="651vers">vers</a>;</td></tr>
<tr><th id="7505">7505</th><td></td></tr>
<tr><th id="7506">7506</th><td>		    <a class="local col7 ref" href="#667buf" title='buf' data-ref="667buf" data-ref-filename="667buf">buf</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col0 ref" href="#670prvers" title='prvers' data-ref="670prvers" data-ref-filename="670prvers">prvers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>) + <var>24</var>);</td></tr>
<tr><th id="7507">7507</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#sprintf" title='sprintf' data-ref="sprintf" data-ref-filename="sprintf">sprintf</a> (<a class="local col7 ref" href="#667buf" title='buf' data-ref="667buf" data-ref-filename="667buf">buf</a>, <q>"%-12s (%-8.8s "</q>,</td></tr>
<tr><th id="7508">7508</th><td>			     <a class="local col0 ref" href="#670prvers" title='prvers' data-ref="670prvers" data-ref-filename="670prvers">prvers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>,</td></tr>
<tr><th id="7509">7509</th><td>			     <a class="local col0 ref" href="#670prvers" title='prvers' data-ref="670prvers" data-ref-filename="670prvers">prvers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::author" title='rcsversnode::author' data-ref="rcsversnode::author" data-ref-filename="rcsversnode..author">author</a>);</td></tr>
<tr><th id="7510">7510</th><td>		    <a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="local col7 ref" href="#667buf" title='buf' data-ref="667buf" data-ref-filename="667buf">buf</a>, <var>0</var>);</td></tr>
<tr><th id="7511">7511</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col7 ref" href="#667buf" title='buf' data-ref="667buf" data-ref-filename="667buf">buf</a>);</td></tr>
<tr><th id="7512">7512</th><td></td></tr>
<tr><th id="7513">7513</th><td>		    <i>/* Now output the date.  */</i></td></tr>
<tr><th id="7514">7514</th><td>		    <a class="local col8 ref" href="#668ym" title='ym' data-ref="668ym" data-ref-filename="668ym">ym</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strchr" title='strchr' data-ref="strchr" data-ref-filename="strchr">strchr</a> (<a class="local col0 ref" href="#670prvers" title='prvers' data-ref="670prvers" data-ref-filename="670prvers">prvers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="7515">7515</th><td>		    <b>if</b> (<a class="local col8 ref" href="#668ym" title='ym' data-ref="668ym" data-ref-filename="668ym">ym</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7516">7516</th><td>		    {</td></tr>
<tr><th id="7517">7517</th><td>			<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"??"</q>, <var>0</var>);</td></tr>
<tr><th id="7518">7518</th><td>			<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"-???"</q>, <var>0</var>);</td></tr>
<tr><th id="7519">7519</th><td>			<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"-??"</q>, <var>0</var>);</td></tr>
<tr><th id="7520">7520</th><td>		    }</td></tr>
<tr><th id="7521">7521</th><td>		    <b>else</b></td></tr>
<tr><th id="7522">7522</th><td>		    {</td></tr>
<tr><th id="7523">7523</th><td>			<a class="local col9 ref" href="#669md" title='md' data-ref="669md" data-ref-filename="669md">md</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strchr" title='strchr' data-ref="strchr" data-ref-filename="strchr">strchr</a> (<a class="local col8 ref" href="#668ym" title='ym' data-ref="668ym" data-ref-filename="668ym">ym</a> + <var>1</var>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="7524">7524</th><td>			<b>if</b> (<a class="local col9 ref" href="#669md" title='md' data-ref="669md" data-ref-filename="669md">md</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7525">7525</th><td>			    <a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"??"</q>, <var>0</var>);</td></tr>
<tr><th id="7526">7526</th><td>			<b>else</b></td></tr>
<tr><th id="7527">7527</th><td>			    <a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="local col9 ref" href="#669md" title='md' data-ref="669md" data-ref-filename="669md">md</a> + <var>1</var>, <var>2</var>);</td></tr>
<tr><th id="7528">7528</th><td></td></tr>
<tr><th id="7529">7529</th><td>			<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"-"</q>, <var>1</var>);</td></tr>
<tr><th id="7530">7530</th><td>			<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="tu ref fn" href="#month_printname" title='month_printname' data-use='c' data-ref="month_printname" data-ref-filename="month_printname">month_printname</a> (<a class="local col8 ref" href="#668ym" title='ym' data-ref="668ym" data-ref-filename="668ym">ym</a> + <var>1</var>), <var>0</var>);</td></tr>
<tr><th id="7531">7531</th><td>			<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"-"</q>, <var>1</var>);</td></tr>
<tr><th id="7532">7532</th><td>			<i>/* Only output the last two digits of the year.  Our output</i></td></tr>
<tr><th id="7533">7533</th><td><i>			   lines are long enough as it is without printing the</i></td></tr>
<tr><th id="7534">7534</th><td><i>			   century.  */</i></td></tr>
<tr><th id="7535">7535</th><td>			<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="local col8 ref" href="#668ym" title='ym' data-ref="668ym" data-ref-filename="668ym">ym</a> - <var>2</var>, <var>2</var>);</td></tr>
<tr><th id="7536">7536</th><td>		    }</td></tr>
<tr><th id="7537">7537</th><td>		    <a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"): "</q>, <var>0</var>);</td></tr>
<tr><th id="7538">7538</th><td>		    <b>if</b> (<a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col6 ref" href="#666ln" title='ln' data-ref="666ln" data-ref-filename="666ln">ln</a>]-&gt;<a class="tu ref field" href="#line::len" title='line::len' data-use='r' data-ref="line::len" data-ref-filename="line..len">len</a> != <var>0</var>)</td></tr>
<tr><th id="7539">7539</th><td>			<a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col6 ref" href="#666ln" title='ln' data-ref="666ln" data-ref-filename="666ln">ln</a>]-&gt;<a class="tu ref field" href="#line::text" title='line::text' data-use='r' data-ref="line::text" data-ref-filename="line..text">text</a>,</td></tr>
<tr><th id="7540">7540</th><td>				    <a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col6 ref" href="#666ln" title='ln' data-ref="666ln" data-ref-filename="666ln">ln</a>]-&gt;<a class="tu ref field" href="#line::len" title='line::len' data-use='r' data-ref="line::len" data-ref-filename="line..len">len</a>);</td></tr>
<tr><th id="7541">7541</th><td>		    <a class="ref fn" href="cvs.h.html#cvs_output" title='cvs_output' data-ref="cvs_output" data-ref-filename="cvs_output">cvs_output</a> (<q>"\n"</q>, <var>1</var>);</td></tr>
<tr><th id="7542">7542</th><td>		}</td></tr>
<tr><th id="7543">7543</th><td>	    }</td></tr>
<tr><th id="7544">7544</th><td>	    <b>break</b>;</td></tr>
<tr><th id="7545">7545</th><td>	<b>case</b> <a class="enum" href="rcs.h.html#RCS_FETCH" title='RCS_FETCH' data-ref="RCS_FETCH" data-ref-filename="RCS_FETCH">RCS_FETCH</a>:</td></tr>
<tr><th id="7546">7546</th><td>	    {</td></tr>
<tr><th id="7547">7547</th><td>		<em>char</em> *<dfn class="local col1 decl" id="671p" title='p' data-type='char *' data-ref="671p" data-ref-filename="671p">p</dfn>;</td></tr>
<tr><th id="7548">7548</th><td>		<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col2 decl" id="672n" title='n' data-type='size_t' data-ref="672n" data-ref-filename="672n">n</dfn>;</td></tr>
<tr><th id="7549">7549</th><td>		<em>unsigned</em> <em>int</em> <dfn class="local col3 decl" id="673ln" title='ln' data-type='unsigned int' data-ref="673ln" data-ref-filename="673ln">ln</dfn>;</td></tr>
<tr><th id="7550">7550</th><td></td></tr>
<tr><th id="7551">7551</th><td>		<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((text != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 7551, __func__, &quot;text != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col1 ref" href="#641text" title='text' data-ref="641text" data-ref-filename="641text">text</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="7552">7552</th><td>		<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((len != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 7552, __func__, &quot;len != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="local col2 ref" href="#642len" title='len' data-ref="642len" data-ref-filename="642len">len</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="7553">7553</th><td></td></tr>
<tr><th id="7554">7554</th><td>		<a class="local col2 ref" href="#672n" title='n' data-ref="672n" data-ref-filename="672n">n</a> = <var>0</var>;</td></tr>
<tr><th id="7555">7555</th><td>		<b>for</b> (<a class="local col3 ref" href="#673ln" title='ln' data-ref="673ln" data-ref-filename="673ln">ln</a> = <var>0</var>; <a class="local col3 ref" href="#673ln" title='ln' data-ref="673ln" data-ref-filename="673ln">ln</a> &lt; <a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>.<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a>; ++<a class="local col3 ref" href="#673ln" title='ln' data-ref="673ln" data-ref-filename="673ln">ln</a>)</td></tr>
<tr><th id="7556">7556</th><td>		    <i>/* 1 for \n */</i></td></tr>
<tr><th id="7557">7557</th><td>		    <a class="local col2 ref" href="#672n" title='n' data-ref="672n" data-ref-filename="672n">n</a> += <a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col3 ref" href="#673ln" title='ln' data-ref="673ln" data-ref-filename="673ln">ln</a>]-&gt;<a class="tu ref field" href="#line::len" title='line::len' data-use='r' data-ref="line::len" data-ref-filename="line..len">len</a> + <var>1</var>;</td></tr>
<tr><th id="7558">7558</th><td>		<a class="local col1 ref" href="#671p" title='p' data-ref="671p" data-ref-filename="671p">p</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="local col2 ref" href="#672n" title='n' data-ref="672n" data-ref-filename="672n">n</a>);</td></tr>
<tr><th id="7559">7559</th><td>		*<a class="local col1 ref" href="#641text" title='text' data-ref="641text" data-ref-filename="641text">text</a> = <a class="local col1 ref" href="#671p" title='p' data-ref="671p" data-ref-filename="671p">p</a>;</td></tr>
<tr><th id="7560">7560</th><td>		<b>for</b> (<a class="local col3 ref" href="#673ln" title='ln' data-ref="673ln" data-ref-filename="673ln">ln</a> = <var>0</var>; <a class="local col3 ref" href="#673ln" title='ln' data-ref="673ln" data-ref-filename="673ln">ln</a> &lt; <a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>.<a class="tu ref field" href="#linevector::nlines" title='linevector::nlines' data-use='r' data-ref="linevector::nlines" data-ref-filename="linevector..nlines">nlines</a>; ++<a class="local col3 ref" href="#673ln" title='ln' data-ref="673ln" data-ref-filename="673ln">ln</a>)</td></tr>
<tr><th id="7561">7561</th><td>		{</td></tr>
<tr><th id="7562">7562</th><td>		    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a> (<a class="local col1 ref" href="#671p" title='p' data-ref="671p" data-ref-filename="671p">p</a>, <a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col3 ref" href="#673ln" title='ln' data-ref="673ln" data-ref-filename="673ln">ln</a>]-&gt;<a class="tu ref field" href="#line::text" title='line::text' data-use='r' data-ref="line::text" data-ref-filename="line..text">text</a>,</td></tr>
<tr><th id="7563">7563</th><td>			    <a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col3 ref" href="#673ln" title='ln' data-ref="673ln" data-ref-filename="673ln">ln</a>]-&gt;<a class="tu ref field" href="#line::len" title='line::len' data-use='r' data-ref="line::len" data-ref-filename="line..len">len</a>);</td></tr>
<tr><th id="7564">7564</th><td>		    <a class="local col1 ref" href="#671p" title='p' data-ref="671p" data-ref-filename="671p">p</a> += <a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col3 ref" href="#673ln" title='ln' data-ref="673ln" data-ref-filename="673ln">ln</a>]-&gt;<a class="tu ref field" href="#line::len" title='line::len' data-use='r' data-ref="line::len" data-ref-filename="line..len">len</a>;</td></tr>
<tr><th id="7565">7565</th><td>		    <b>if</b> (<a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>.<a class="tu ref field" href="#linevector::vector" title='linevector::vector' data-use='r' data-ref="linevector::vector" data-ref-filename="linevector..vector">vector</a>[<a class="local col3 ref" href="#673ln" title='ln' data-ref="673ln" data-ref-filename="673ln">ln</a>]-&gt;<a class="tu ref field" href="#line::has_newline" title='line::has_newline' data-use='r' data-ref="line::has_newline" data-ref-filename="line..has_newline">has_newline</a>)</td></tr>
<tr><th id="7566">7566</th><td>			*<a class="local col1 ref" href="#671p" title='p' data-ref="671p" data-ref-filename="671p">p</a>++ = <kbd>'\n'</kbd>;</td></tr>
<tr><th id="7567">7567</th><td>		}</td></tr>
<tr><th id="7568">7568</th><td>		*<a class="local col2 ref" href="#642len" title='len' data-ref="642len" data-ref-filename="642len">len</a> = <a class="local col1 ref" href="#671p" title='p' data-ref="671p" data-ref-filename="671p">p</a> - *<a class="local col1 ref" href="#641text" title='text' data-ref="641text" data-ref-filename="641text">text</a>;</td></tr>
<tr><th id="7569">7569</th><td>		<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((*len &lt;= n) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 7569, __func__, &quot;*len &lt;= n&quot;))" data-ref="_M/assert">assert</a> (*<a class="local col2 ref" href="#642len" title='len' data-ref="642len" data-ref-filename="642len">len</a> &lt;= <a class="local col2 ref" href="#672n" title='n' data-ref="672n" data-ref-filename="672n">n</a>);</td></tr>
<tr><th id="7570">7570</th><td>	    }</td></tr>
<tr><th id="7571">7571</th><td>	    <b>break</b>;</td></tr>
<tr><th id="7572">7572</th><td>    }</td></tr>
<tr><th id="7573">7573</th><td></td></tr>
<tr><th id="7574">7574</th><td>    <a class="tu ref fn" href="#linevector_free" title='linevector_free' data-use='c' data-ref="linevector_free" data-ref-filename="linevector_free">linevector_free</a> (&amp;<a class="local col1 ref" href="#661curlines" title='curlines' data-ref="661curlines" data-ref-filename="661curlines">curlines</a>);</td></tr>
<tr><th id="7575">7575</th><td>    <a class="tu ref fn" href="#linevector_free" title='linevector_free' data-use='c' data-ref="linevector_free" data-ref-filename="linevector_free">linevector_free</a> (&amp;<a class="local col0 ref" href="#660headlines" title='headlines' data-ref="660headlines" data-ref-filename="660headlines">headlines</a>);</td></tr>
<tr><th id="7576">7576</th><td>    <a class="tu ref fn" href="#linevector_free" title='linevector_free' data-use='c' data-ref="linevector_free" data-ref-filename="linevector_free">linevector_free</a> (&amp;<a class="local col2 ref" href="#662trunklines" title='trunklines' data-ref="662trunklines" data-ref-filename="662trunklines">trunklines</a>);</td></tr>
<tr><th id="7577">7577</th><td></td></tr>
<tr><th id="7578">7578</th><td>    <b>return</b>;</td></tr>
<tr><th id="7579">7579</th><td>}</td></tr>
<tr><th id="7580">7580</th><td></td></tr>
<tr><th id="7581">7581</th><td></td></tr>
<tr><th id="7582">7582</th><td></td></tr>
<tr><th id="7583">7583</th><td><i  data-doc="getdelta">/* Read the information for a single delta from the RCS buffer RCSBUF,</i></td></tr>
<tr><th id="7584">7584</th><td><i  data-doc="getdelta">   whose name is RCSFILE.  *KEYP and *VALP are either NULL, or the</i></td></tr>
<tr><th id="7585">7585</th><td><i  data-doc="getdelta">   first key/value pair to read, as set by rcsbuf_getkey. Return NULL</i></td></tr>
<tr><th id="7586">7586</th><td><i  data-doc="getdelta">   if there are no more deltas.  Store the key/value pair which</i></td></tr>
<tr><th id="7587">7587</th><td><i  data-doc="getdelta">   terminated the read in *KEYP and *VALP.  */</i></td></tr>
<tr><th id="7588">7588</th><td><em>static</em> <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *</td></tr>
<tr><th id="7589">7589</th><td><dfn class="tu decl def fn" id="getdelta" title='getdelta' data-type='RCSVers * getdelta(struct rcsbuffer * rcsbuf, char * rcsfile, char ** keyp, char ** valp)' data-ref="getdelta" data-ref-filename="getdelta">getdelta</dfn> (<b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col4 decl" id="674rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="674rcsbuf" data-ref-filename="674rcsbuf">rcsbuf</dfn>, <em>char</em> *<dfn class="local col5 decl" id="675rcsfile" title='rcsfile' data-type='char *' data-ref="675rcsfile" data-ref-filename="675rcsfile">rcsfile</dfn>, <em>char</em> **<dfn class="local col6 decl" id="676keyp" title='keyp' data-type='char **' data-ref="676keyp" data-ref-filename="676keyp">keyp</dfn>, <em>char</em> **<dfn class="local col7 decl" id="677valp" title='valp' data-type='char **' data-ref="677valp" data-ref-filename="677valp">valp</dfn>)</td></tr>
<tr><th id="7590">7590</th><td>{</td></tr>
<tr><th id="7591">7591</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col8 decl" id="678vnode" title='vnode' data-type='RCSVers *' data-ref="678vnode" data-ref-filename="678vnode">vnode</dfn>;</td></tr>
<tr><th id="7592">7592</th><td>    <em>char</em> *<dfn class="local col9 decl" id="679key" title='key' data-type='char *' data-ref="679key" data-ref-filename="679key">key</dfn>, *<dfn class="local col0 decl" id="680value" title='value' data-type='char *' data-ref="680value" data-ref-filename="680value">value</dfn>, *<dfn class="local col1 decl" id="681cp" title='cp' data-type='char *' data-ref="681cp" data-ref-filename="681cp">cp</dfn>;</td></tr>
<tr><th id="7593">7593</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col2 decl" id="682kv" title='kv' data-type='Node *' data-ref="682kv" data-ref-filename="682kv">kv</dfn>;</td></tr>
<tr><th id="7594">7594</th><td></td></tr>
<tr><th id="7595">7595</th><td>    <i>/* Get revision number if it wasn't passed in. This uses</i></td></tr>
<tr><th id="7596">7596</th><td><i>       rcsbuf_getkey because it doesn't croak when encountering</i></td></tr>
<tr><th id="7597">7597</th><td><i>       unexpected input.  As a result, we have to play unholy games</i></td></tr>
<tr><th id="7598">7598</th><td><i>       with `key' and `value'. */</i></td></tr>
<tr><th id="7599">7599</th><td>    <b>if</b> (*<a class="local col6 ref" href="#676keyp" title='keyp' data-ref="676keyp" data-ref-filename="676keyp">keyp</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7600">7600</th><td>    {</td></tr>
<tr><th id="7601">7601</th><td>	<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a> = *<a class="local col6 ref" href="#676keyp" title='keyp' data-ref="676keyp" data-ref-filename="676keyp">keyp</a>;</td></tr>
<tr><th id="7602">7602</th><td>	<a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a> = *<a class="local col7 ref" href="#677valp" title='valp' data-ref="677valp" data-ref-filename="677valp">valp</a>;</td></tr>
<tr><th id="7603">7603</th><td>    }</td></tr>
<tr><th id="7604">7604</th><td>    <b>else</b></td></tr>
<tr><th id="7605">7605</th><td>    {</td></tr>
<tr><th id="7606">7606</th><td>	<b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (<a class="local col4 ref" href="#674rcsbuf" title='rcsbuf' data-ref="674rcsbuf" data-ref-filename="674rcsbuf">rcsbuf</a>, &amp;<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>, &amp;<a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>))</td></tr>
<tr><th id="7607">7607</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"%s: unexpected EOF"</q>, <a class="local col5 ref" href="#675rcsfile" title='rcsfile' data-ref="675rcsfile" data-ref-filename="675rcsfile">rcsfile</a>);</td></tr>
<tr><th id="7608">7608</th><td>    }</td></tr>
<tr><th id="7609">7609</th><td></td></tr>
<tr><th id="7610">7610</th><td>    <i>/* Make sure that it is a revision number and not a cabbage </i></td></tr>
<tr><th id="7611">7611</th><td><i>       or something. */</i></td></tr>
<tr><th id="7612">7612</th><td>    <b>for</b> (<a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a> = <a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>;</td></tr>
<tr><th id="7613">7613</th><td>	 (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) *cp)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) *<a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a>) || *<a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a> == <kbd>'.'</kbd>) &amp;&amp; *<a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a> != <kbd>'\0'</kbd>;</td></tr>
<tr><th id="7614">7614</th><td>	 <a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a>++)</td></tr>
<tr><th id="7615">7615</th><td>	<i>/* do nothing */</i> ;</td></tr>
<tr><th id="7616">7616</th><td>    <i>/* Note that when comparing with RCSDATE, we are not massaging</i></td></tr>
<tr><th id="7617">7617</th><td><i>       VALUE from the string found in the RCS file.  This is OK since</i></td></tr>
<tr><th id="7618">7618</th><td><i>       we know exactly what to expect.  */</i></td></tr>
<tr><th id="7619">7619</th><td>    <b>if</b> (*<a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a> != <kbd>'\0'</kbd> || <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="macro" href="rcs.h.html#26" title="&quot;date&quot;" data-ref="_M/RCSDATE">RCSDATE</a>, <a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>, (<b>sizeof</b> <a class="macro" href="rcs.h.html#26" title="&quot;date&quot;" data-ref="_M/RCSDATE">RCSDATE</a>) - <var>1</var>) != <var>0</var>)</td></tr>
<tr><th id="7620">7620</th><td>    {</td></tr>
<tr><th id="7621">7621</th><td>	*<a class="local col6 ref" href="#676keyp" title='keyp' data-ref="676keyp" data-ref-filename="676keyp">keyp</a> = <a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>;</td></tr>
<tr><th id="7622">7622</th><td>	*<a class="local col7 ref" href="#677valp" title='valp' data-ref="677valp" data-ref-filename="677valp">valp</a> = <a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>;</td></tr>
<tr><th id="7623">7623</th><td>	<b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="7624">7624</th><td>    }</td></tr>
<tr><th id="7625">7625</th><td></td></tr>
<tr><th id="7626">7626</th><td>    <a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<b>sizeof</b> (<a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a>));</td></tr>
<tr><th id="7627">7627</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#memset" title='memset' data-ref="memset" data-ref-filename="memset">memset</a> (<a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>, <var>0</var>, <b>sizeof</b> (<a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a>));</td></tr>
<tr><th id="7628">7628</th><td></td></tr>
<tr><th id="7629">7629</th><td>    <a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>);</td></tr>
<tr><th id="7630">7630</th><td></td></tr>
<tr><th id="7631">7631</th><td>    <i>/* Grab the value of the date from value.  Note that we are not</i></td></tr>
<tr><th id="7632">7632</th><td><i>       massaging VALUE from the string found in the RCS file.  */</i></td></tr>
<tr><th id="7633">7633</th><td>    <a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a> = <a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a> + (<b>sizeof</b> <a class="macro" href="rcs.h.html#26" title="&quot;date&quot;" data-ref="_M/RCSDATE">RCSDATE</a>) - <var>1</var>;	<i>/* skip the "date" keyword */</i></td></tr>
<tr><th id="7634">7634</th><td>    <b>while</b> (<a class="macro" href="#169" title="(spacetab[(unsigned char)*cp] != 0)" data-ref="_M/whitespace">whitespace</a> (*<a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a>))		<i>/* take space off front of value */</i></td></tr>
<tr><th id="7635">7635</th><td>	<a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a>++;</td></tr>
<tr><th id="7636">7636</th><td></td></tr>
<tr><th id="7637">7637</th><td>    <a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a>);</td></tr>
<tr><th id="7638">7638</th><td></td></tr>
<tr><th id="7639">7639</th><td>    <i>/* Get author field.  */</i></td></tr>
<tr><th id="7640">7640</th><td>    <b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (<a class="local col4 ref" href="#674rcsbuf" title='rcsbuf' data-ref="674rcsbuf" data-ref-filename="674rcsbuf">rcsbuf</a>, &amp;<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>, &amp;<a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>))</td></tr>
<tr><th id="7641">7641</th><td>    {</td></tr>
<tr><th id="7642">7642</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"unexpected end of file reading %s"</q>, <a class="local col5 ref" href="#675rcsfile" title='rcsfile' data-ref="675rcsfile" data-ref-filename="675rcsfile">rcsfile</a>);</td></tr>
<tr><th id="7643">7643</th><td>    }</td></tr>
<tr><th id="7644">7644</th><td>    <b>if</b> (! <a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;author&quot;) &amp;&amp; strcmp ((key), (&quot;author&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>, <q>"author"</q>))</td></tr>
<tr><th id="7645">7645</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"\</q></td></tr>
<tr><th id="7646">7646</th><td><q>unable to parse %s; `author' not in the expected place"</q>, <a class="local col5 ref" href="#675rcsfile" title='rcsfile' data-ref="675rcsfile" data-ref-filename="675rcsfile">rcsfile</a>);</td></tr>
<tr><th id="7647">7647</th><td>    <a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::author" title='rcsversnode::author' data-ref="rcsversnode::author" data-ref-filename="rcsversnode..author">author</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (<a class="local col4 ref" href="#674rcsbuf" title='rcsbuf' data-ref="674rcsbuf" data-ref-filename="674rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>, <var>0</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="7648">7648</th><td></td></tr>
<tr><th id="7649">7649</th><td>    <i>/* Get state field.  */</i></td></tr>
<tr><th id="7650">7650</th><td>    <b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (<a class="local col4 ref" href="#674rcsbuf" title='rcsbuf' data-ref="674rcsbuf" data-ref-filename="674rcsbuf">rcsbuf</a>, &amp;<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>, &amp;<a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>))</td></tr>
<tr><th id="7651">7651</th><td>    {</td></tr>
<tr><th id="7652">7652</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"unexpected end of file reading %s"</q>, <a class="local col5 ref" href="#675rcsfile" title='rcsfile' data-ref="675rcsfile" data-ref-filename="675rcsfile">rcsfile</a>);</td></tr>
<tr><th id="7653">7653</th><td>    }</td></tr>
<tr><th id="7654">7654</th><td>    <b>if</b> (! <a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;state&quot;) &amp;&amp; strcmp ((key), (&quot;state&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>, <q>"state"</q>))</td></tr>
<tr><th id="7655">7655</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"\</q></td></tr>
<tr><th id="7656">7656</th><td><q>unable to parse %s; `state' not in the expected place"</q>, <a class="local col5 ref" href="#675rcsfile" title='rcsfile' data-ref="675rcsfile" data-ref-filename="675rcsfile">rcsfile</a>);</td></tr>
<tr><th id="7657">7657</th><td>    <a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::state" title='rcsversnode::state' data-ref="rcsversnode::state" data-ref-filename="rcsversnode..state">state</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (<a class="local col4 ref" href="#674rcsbuf" title='rcsbuf' data-ref="674rcsbuf" data-ref-filename="674rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>, <var>0</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="7658">7658</th><td>    <i>/* The value is optional, according to rcsfile(5).  */</i></td></tr>
<tr><th id="7659">7659</th><td>    <b>if</b> (<a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="macro" href="#138" title="(*(char *)(value) == *(char *)(&quot;dead&quot;) &amp;&amp; strcmp ((value), (&quot;dead&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>, <a class="macro" href="rcs.h.html#34" title="&quot;dead&quot;" data-ref="_M/RCSDEAD">RCSDEAD</a>))</td></tr>
<tr><th id="7660">7660</th><td>    {</td></tr>
<tr><th id="7661">7661</th><td>	<a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::dead" title='rcsversnode::dead' data-ref="rcsversnode::dead" data-ref-filename="rcsversnode..dead">dead</a> = <var>1</var>;</td></tr>
<tr><th id="7662">7662</th><td>    }</td></tr>
<tr><th id="7663">7663</th><td></td></tr>
<tr><th id="7664">7664</th><td>    <i>/* Note that "branches" and "next" are in fact mandatory, according</i></td></tr>
<tr><th id="7665">7665</th><td><i>       to doc/RCSFILES.  */</i></td></tr>
<tr><th id="7666">7666</th><td></td></tr>
<tr><th id="7667">7667</th><td>    <i>/* fill in the branch list (if any branches exist) */</i></td></tr>
<tr><th id="7668">7668</th><td>    <b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (<a class="local col4 ref" href="#674rcsbuf" title='rcsbuf' data-ref="674rcsbuf" data-ref-filename="674rcsbuf">rcsbuf</a>, &amp;<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>, &amp;<a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>))</td></tr>
<tr><th id="7669">7669</th><td>    {</td></tr>
<tr><th id="7670">7670</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"unexpected end of file reading %s"</q>, <a class="local col5 ref" href="#675rcsfile" title='rcsfile' data-ref="675rcsfile" data-ref-filename="675rcsfile">rcsfile</a>);</td></tr>
<tr><th id="7671">7671</th><td>    }</td></tr>
<tr><th id="7672">7672</th><td>    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;desc&quot;) &amp;&amp; strcmp ((key), (&quot;desc&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>, <a class="macro" href="rcs.h.html#27" title="&quot;desc&quot;" data-ref="_M/RCSDESC">RCSDESC</a>))</td></tr>
<tr><th id="7673">7673</th><td>    {</td></tr>
<tr><th id="7674">7674</th><td>	*<a class="local col6 ref" href="#676keyp" title='keyp' data-ref="676keyp" data-ref-filename="676keyp">keyp</a> = <a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>;</td></tr>
<tr><th id="7675">7675</th><td>	*<a class="local col7 ref" href="#677valp" title='valp' data-ref="677valp" data-ref-filename="677valp">valp</a> = <a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>;</td></tr>
<tr><th id="7676">7676</th><td>	<i>/* Probably could/should be a fatal error.  */</i></td></tr>
<tr><th id="7677">7677</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"warning: 'branches' keyword missing from %s"</q>, <a class="local col5 ref" href="#675rcsfile" title='rcsfile' data-ref="675rcsfile" data-ref-filename="675rcsfile">rcsfile</a>);</td></tr>
<tr><th id="7678">7678</th><td>	<b>return</b> <a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>;</td></tr>
<tr><th id="7679">7679</th><td>    }</td></tr>
<tr><th id="7680">7680</th><td>    <b>if</b> (<a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7681">7681</th><td>    {</td></tr>
<tr><th id="7682">7682</th><td>	<a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a> = <a class="ref fn" href="hash.h.html#getlist" title='getlist' data-ref="getlist" data-ref-filename="getlist">getlist</a> ();</td></tr>
<tr><th id="7683">7683</th><td>	<i>/* Note that we are not massaging VALUE from the string found</i></td></tr>
<tr><th id="7684">7684</th><td><i>           in the RCS file.  */</i></td></tr>
<tr><th id="7685">7685</th><td>	<a class="tu ref fn" href="#do_branches" title='do_branches' data-use='c' data-ref="do_branches" data-ref-filename="do_branches">do_branches</a> (<a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>, <a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>);</td></tr>
<tr><th id="7686">7686</th><td>    }</td></tr>
<tr><th id="7687">7687</th><td></td></tr>
<tr><th id="7688">7688</th><td>    <i>/* fill in the next field if there is a next revision */</i></td></tr>
<tr><th id="7689">7689</th><td>    <b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (<a class="local col4 ref" href="#674rcsbuf" title='rcsbuf' data-ref="674rcsbuf" data-ref-filename="674rcsbuf">rcsbuf</a>, &amp;<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>, &amp;<a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>))</td></tr>
<tr><th id="7690">7690</th><td>    {</td></tr>
<tr><th id="7691">7691</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"unexpected end of file reading %s"</q>, <a class="local col5 ref" href="#675rcsfile" title='rcsfile' data-ref="675rcsfile" data-ref-filename="675rcsfile">rcsfile</a>);</td></tr>
<tr><th id="7692">7692</th><td>    }</td></tr>
<tr><th id="7693">7693</th><td>    <b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;desc&quot;) &amp;&amp; strcmp ((key), (&quot;desc&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>, <a class="macro" href="rcs.h.html#27" title="&quot;desc&quot;" data-ref="_M/RCSDESC">RCSDESC</a>))</td></tr>
<tr><th id="7694">7694</th><td>    {</td></tr>
<tr><th id="7695">7695</th><td>	*<a class="local col6 ref" href="#676keyp" title='keyp' data-ref="676keyp" data-ref-filename="676keyp">keyp</a> = <a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>;</td></tr>
<tr><th id="7696">7696</th><td>	*<a class="local col7 ref" href="#677valp" title='valp' data-ref="677valp" data-ref-filename="677valp">valp</a> = <a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>;</td></tr>
<tr><th id="7697">7697</th><td>	<i>/* Probably could/should be a fatal error.  */</i></td></tr>
<tr><th id="7698">7698</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"warning: 'next' keyword missing from %s"</q>, <a class="local col5 ref" href="#675rcsfile" title='rcsfile' data-ref="675rcsfile" data-ref-filename="675rcsfile">rcsfile</a>);</td></tr>
<tr><th id="7699">7699</th><td>	<b>return</b> <a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>;</td></tr>
<tr><th id="7700">7700</th><td>    }</td></tr>
<tr><th id="7701">7701</th><td>    <b>if</b> (<a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7702">7702</th><td>	<a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (<a class="local col4 ref" href="#674rcsbuf" title='rcsbuf' data-ref="674rcsbuf" data-ref-filename="674rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>, <var>0</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="7703">7703</th><td></td></tr>
<tr><th id="7704">7704</th><td>    <i>/*</i></td></tr>
<tr><th id="7705">7705</th><td><i>     * XXX - this is where we put the symbolic link stuff???</i></td></tr>
<tr><th id="7706">7706</th><td><i>     * (into newphrases in the deltas).</i></td></tr>
<tr><th id="7707">7707</th><td><i>     */</i></td></tr>
<tr><th id="7708">7708</th><td>    <b>while</b> (<var>1</var>)</td></tr>
<tr><th id="7709">7709</th><td>    {</td></tr>
<tr><th id="7710">7710</th><td>	<b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (<a class="local col4 ref" href="#674rcsbuf" title='rcsbuf' data-ref="674rcsbuf" data-ref-filename="674rcsbuf">rcsbuf</a>, &amp;<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>, &amp;<a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>))</td></tr>
<tr><th id="7711">7711</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"unexpected end of file reading %s"</q>, <a class="local col5 ref" href="#675rcsfile" title='rcsfile' data-ref="675rcsfile" data-ref-filename="675rcsfile">rcsfile</a>);</td></tr>
<tr><th id="7712">7712</th><td></td></tr>
<tr><th id="7713">7713</th><td>	<i>/* The `desc' keyword is the end of the deltas. */</i></td></tr>
<tr><th id="7714">7714</th><td>	<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcmp" title='strcmp' data-ref="strcmp" data-ref-filename="strcmp">strcmp</a> (<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>, <a class="macro" href="rcs.h.html#27" title="&quot;desc&quot;" data-ref="_M/RCSDESC">RCSDESC</a>) == <var>0</var>)</td></tr>
<tr><th id="7715">7715</th><td>	    <b>break</b>;</td></tr>
<tr><th id="7716">7716</th><td></td></tr>
<tr><th id="7717">7717</th><td><u>#<span data-ppcond="7717">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="7718">7718</th><td></td></tr>
<tr><th id="7719">7719</th><td>	<i>/* The `hardlinks' value is a group of words, which must</i></td></tr>
<tr><th id="7720">7720</th><td><i>	   be parsed separately and added as a list to vnode-&gt;hardlinks. */</i></td></tr>
<tr><th id="7721">7721</th><td>	<b>if</b> (strcmp (key, <q>"hardlinks"</q>) == <var>0</var>)</td></tr>
<tr><th id="7722">7722</th><td>	{</td></tr>
<tr><th id="7723">7723</th><td>	    <em>char</em> *word;</td></tr>
<tr><th id="7724">7724</th><td></td></tr>
<tr><th id="7725">7725</th><td>	    vnode-&gt;hardlinks = getlist();</td></tr>
<tr><th id="7726">7726</th><td>	    <b>while</b> ((word = rcsbuf_valword (rcsbuf, &amp;value)) != NULL)</td></tr>
<tr><th id="7727">7727</th><td>	    {</td></tr>
<tr><th id="7728">7728</th><td>		Node *n = getnode();</td></tr>
<tr><th id="7729">7729</th><td>		n-&gt;key = word;</td></tr>
<tr><th id="7730">7730</th><td>		addnode (vnode-&gt;hardlinks, n);</td></tr>
<tr><th id="7731">7731</th><td>	    }</td></tr>
<tr><th id="7732">7732</th><td>	    <b>continue</b>;</td></tr>
<tr><th id="7733">7733</th><td>	}</td></tr>
<tr><th id="7734">7734</th><td><u>#<span data-ppcond="7717">endif</span></u></td></tr>
<tr><th id="7735">7735</th><td></td></tr>
<tr><th id="7736">7736</th><td>	<i>/* Enable use of repositories created by certain obsolete</i></td></tr>
<tr><th id="7737">7737</th><td><i>	   versions of CVS.  This code should remain indefinately;</i></td></tr>
<tr><th id="7738">7738</th><td><i>	   there is no procedure for converting old repositories, and</i></td></tr>
<tr><th id="7739">7739</th><td><i>	   checking for it is harmless.  */</i></td></tr>
<tr><th id="7740">7740</th><td>	<b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;dead&quot;) &amp;&amp; strcmp ((key), (&quot;dead&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>, <a class="macro" href="rcs.h.html#34" title="&quot;dead&quot;" data-ref="_M/RCSDEAD">RCSDEAD</a>))</td></tr>
<tr><th id="7741">7741</th><td>	{</td></tr>
<tr><th id="7742">7742</th><td>	    <a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::dead" title='rcsversnode::dead' data-ref="rcsversnode::dead" data-ref-filename="rcsversnode..dead">dead</a> = <var>1</var>;</td></tr>
<tr><th id="7743">7743</th><td>	    <b>if</b> (<a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::state" title='rcsversnode::state' data-ref="rcsversnode::state" data-ref-filename="rcsversnode..state">state</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7744">7744</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::state" title='rcsversnode::state' data-ref="rcsversnode::state" data-ref-filename="rcsversnode..state">state</a>);</td></tr>
<tr><th id="7745">7745</th><td>	    <a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::state" title='rcsversnode::state' data-ref="rcsversnode::state" data-ref-filename="rcsversnode..state">state</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="macro" href="rcs.h.html#34" title="&quot;dead&quot;" data-ref="_M/RCSDEAD">RCSDEAD</a>);</td></tr>
<tr><th id="7746">7746</th><td>	    <b>continue</b>;</td></tr>
<tr><th id="7747">7747</th><td>	}</td></tr>
<tr><th id="7748">7748</th><td>	<i>/* if we have a new revision number, we're done with this delta */</i></td></tr>
<tr><th id="7749">7749</th><td>	<b>for</b> (<a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a> = <a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>;</td></tr>
<tr><th id="7750">7750</th><td>	     (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#51" title="((int)((_ctype_tab_ + 1)[((unsigned char) *cp)] &amp; 0x0004))" data-ref="_M/isdigit">isdigit</a> ((<em>unsigned</em> <em>char</em>) *<a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a>) || *<a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a> == <kbd>'.'</kbd>) &amp;&amp; *<a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a> != <kbd>'\0'</kbd>;</td></tr>
<tr><th id="7751">7751</th><td>	     <a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a>++)</td></tr>
<tr><th id="7752">7752</th><td>	    <i>/* do nothing */</i> ;</td></tr>
<tr><th id="7753">7753</th><td>	<i>/* Note that when comparing with RCSDATE, we are not massaging</i></td></tr>
<tr><th id="7754">7754</th><td><i>	   VALUE from the string found in the RCS file.  This is OK</i></td></tr>
<tr><th id="7755">7755</th><td><i>	   since we know exactly what to expect.  */</i></td></tr>
<tr><th id="7756">7756</th><td>	<b>if</b> (*<a class="local col1 ref" href="#681cp" title='cp' data-ref="681cp" data-ref-filename="681cp">cp</a> == <kbd>'\0'</kbd> &amp;&amp; <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="macro" href="rcs.h.html#26" title="&quot;date&quot;" data-ref="_M/RCSDATE">RCSDATE</a>, <a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>, <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="macro" href="rcs.h.html#26" title="&quot;date&quot;" data-ref="_M/RCSDATE">RCSDATE</a>)) == <var>0</var>)</td></tr>
<tr><th id="7757">7757</th><td>	    <b>break</b>;</td></tr>
<tr><th id="7758">7758</th><td></td></tr>
<tr><th id="7759">7759</th><td>	<i>/* At this point, key and value represent a user-defined field</i></td></tr>
<tr><th id="7760">7760</th><td><i>	   in the delta node. */</i></td></tr>
<tr><th id="7761">7761</th><td>	<b>if</b> (<a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other_delta" title='rcsversnode::other_delta' data-ref="rcsversnode::other_delta" data-ref-filename="rcsversnode..other_delta">other_delta</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7762">7762</th><td>	    <a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other_delta" title='rcsversnode::other_delta' data-ref="rcsversnode::other_delta" data-ref-filename="rcsversnode..other_delta">other_delta</a> = <a class="ref fn" href="hash.h.html#getlist" title='getlist' data-ref="getlist" data-ref-filename="getlist">getlist</a> ();</td></tr>
<tr><th id="7763">7763</th><td>	<a class="local col2 ref" href="#682kv" title='kv' data-ref="682kv" data-ref-filename="682kv">kv</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a> ();</td></tr>
<tr><th id="7764">7764</th><td>	<a class="local col2 ref" href="#682kv" title='kv' data-ref="682kv" data-ref-filename="682kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> = <a class="tu ref fn" href="#rcsbuf_valcmp" title='rcsbuf_valcmp' data-use='c' data-ref="rcsbuf_valcmp" data-ref-filename="rcsbuf_valcmp">rcsbuf_valcmp</a> (<a class="local col4 ref" href="#674rcsbuf" title='rcsbuf' data-ref="674rcsbuf" data-ref-filename="674rcsbuf">rcsbuf</a>) ? <a class="enum" href="hash.h.html#RCSCMPFLD" title='RCSCMPFLD' data-ref="RCSCMPFLD" data-ref-filename="RCSCMPFLD">RCSCMPFLD</a> : <a class="enum" href="hash.h.html#RCSFIELD" title='RCSFIELD' data-ref="RCSFIELD" data-ref-filename="RCSFIELD">RCSFIELD</a>;</td></tr>
<tr><th id="7765">7765</th><td>	<a class="local col2 ref" href="#682kv" title='kv' data-ref="682kv" data-ref-filename="682kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>);</td></tr>
<tr><th id="7766">7766</th><td>	<a class="local col2 ref" href="#682kv" title='kv' data-ref="682kv" data-ref-filename="682kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (<a class="local col4 ref" href="#674rcsbuf" title='rcsbuf' data-ref="674rcsbuf" data-ref-filename="674rcsbuf">rcsbuf</a>, <a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>, <a class="local col2 ref" href="#682kv" title='kv' data-ref="682kv" data-ref-filename="682kv">kv</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> == <a class="enum" href="hash.h.html#RCSFIELD" title='RCSFIELD' data-ref="RCSFIELD" data-ref-filename="RCSFIELD">RCSFIELD</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="7767">7767</th><td>	<b>if</b> (<a class="ref fn" href="hash.h.html#addnode" title='addnode' data-ref="addnode" data-ref-filename="addnode">addnode</a> (<a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other_delta" title='rcsversnode::other_delta' data-ref="rcsversnode::other_delta" data-ref-filename="rcsversnode..other_delta">other_delta</a>, <a class="local col2 ref" href="#682kv" title='kv' data-ref="682kv" data-ref-filename="682kv">kv</a>) != <var>0</var>)</td></tr>
<tr><th id="7768">7768</th><td>	{</td></tr>
<tr><th id="7769">7769</th><td>	    <i>/* Complaining about duplicate keys in newphrases seems</i></td></tr>
<tr><th id="7770">7770</th><td><i>	       questionable, in that we don't know what they mean and</i></td></tr>
<tr><th id="7771">7771</th><td><i>	       doc/RCSFILES has no prohibition on several newphrases</i></td></tr>
<tr><th id="7772">7772</th><td><i>	       with the same key.  But we can't store more than one as</i></td></tr>
<tr><th id="7773">7773</th><td><i>	       long as we store them in a List *.  */</i></td></tr>
<tr><th id="7774">7774</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"warning: duplicate key `%s' in RCS file `%s'"</q>,</td></tr>
<tr><th id="7775">7775</th><td>		   <a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>, <a class="local col5 ref" href="#675rcsfile" title='rcsfile' data-ref="675rcsfile" data-ref-filename="675rcsfile">rcsfile</a>);</td></tr>
<tr><th id="7776">7776</th><td>	    <a class="ref fn" href="hash.h.html#freenode" title='freenode' data-ref="freenode" data-ref-filename="freenode">freenode</a> (<a class="local col2 ref" href="#682kv" title='kv' data-ref="682kv" data-ref-filename="682kv">kv</a>);</td></tr>
<tr><th id="7777">7777</th><td>	}</td></tr>
<tr><th id="7778">7778</th><td>    }</td></tr>
<tr><th id="7779">7779</th><td></td></tr>
<tr><th id="7780">7780</th><td>    <i>/* Return the key which caused us to fail back to the caller.  */</i></td></tr>
<tr><th id="7781">7781</th><td>    *<a class="local col6 ref" href="#676keyp" title='keyp' data-ref="676keyp" data-ref-filename="676keyp">keyp</a> = <a class="local col9 ref" href="#679key" title='key' data-ref="679key" data-ref-filename="679key">key</a>;</td></tr>
<tr><th id="7782">7782</th><td>    *<a class="local col7 ref" href="#677valp" title='valp' data-ref="677valp" data-ref-filename="677valp">valp</a> = <a class="local col0 ref" href="#680value" title='value' data-ref="680value" data-ref-filename="680value">value</a>;</td></tr>
<tr><th id="7783">7783</th><td></td></tr>
<tr><th id="7784">7784</th><td>    <b>return</b> <a class="local col8 ref" href="#678vnode" title='vnode' data-ref="678vnode" data-ref-filename="678vnode">vnode</a>;</td></tr>
<tr><th id="7785">7785</th><td>}</td></tr>
<tr><th id="7786">7786</th><td></td></tr>
<tr><th id="7787">7787</th><td></td></tr>
<tr><th id="7788">7788</th><td></td></tr>
<tr><th id="7789">7789</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="7790">7790</th><td><dfn class="tu decl def fn" id="freedeltatext" title='freedeltatext' data-type='void freedeltatext(Deltatext * d)' data-ref="freedeltatext" data-ref-filename="freedeltatext">freedeltatext</dfn> (<a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a> *<dfn class="local col3 decl" id="683d" title='d' data-type='Deltatext *' data-ref="683d" data-ref-filename="683d">d</dfn>)</td></tr>
<tr><th id="7791">7791</th><td>{</td></tr>
<tr><th id="7792">7792</th><td>    <b>if</b> (<a class="local col3 ref" href="#683d" title='d' data-ref="683d" data-ref-filename="683d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::version" title='deltatext::version' data-ref="deltatext::version" data-ref-filename="deltatext..version">version</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7793">7793</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#683d" title='d' data-ref="683d" data-ref-filename="683d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::version" title='deltatext::version' data-ref="deltatext::version" data-ref-filename="deltatext..version">version</a>);</td></tr>
<tr><th id="7794">7794</th><td>    <b>if</b> (<a class="local col3 ref" href="#683d" title='d' data-ref="683d" data-ref-filename="683d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7795">7795</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#683d" title='d' data-ref="683d" data-ref-filename="683d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a>);</td></tr>
<tr><th id="7796">7796</th><td>    <b>if</b> (<a class="local col3 ref" href="#683d" title='d' data-ref="683d" data-ref-filename="683d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7797">7797</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#683d" title='d' data-ref="683d" data-ref-filename="683d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a>);</td></tr>
<tr><th id="7798">7798</th><td>    <b>if</b> (<a class="local col3 ref" href="#683d" title='d' data-ref="683d" data-ref-filename="683d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::other" title='deltatext::other' data-ref="deltatext::other" data-ref-filename="deltatext..other">other</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7799">7799</th><td>	<a class="ref fn" href="hash.h.html#dellist" title='dellist' data-ref="dellist" data-ref-filename="dellist">dellist</a> (&amp;<a class="local col3 ref" href="#683d" title='d' data-ref="683d" data-ref-filename="683d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::other" title='deltatext::other' data-ref="deltatext::other" data-ref-filename="deltatext..other">other</a>);</td></tr>
<tr><th id="7800">7800</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#683d" title='d' data-ref="683d" data-ref-filename="683d">d</a>);</td></tr>
<tr><th id="7801">7801</th><td>}</td></tr>
<tr><th id="7802">7802</th><td></td></tr>
<tr><th id="7803">7803</th><td><em>static</em> <a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a> *</td></tr>
<tr><th id="7804">7804</th><td><dfn class="tu decl def fn" id="RCS_getdeltatext" title='RCS_getdeltatext' data-type='Deltatext * RCS_getdeltatext(RCSNode * rcs, FILE * fp, struct rcsbuffer * rcsbuf)' data-ref="RCS_getdeltatext" data-ref-filename="RCS_getdeltatext">RCS_getdeltatext</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col4 decl" id="684rcs" title='rcs' data-type='RCSNode *' data-ref="684rcs" data-ref-filename="684rcs">rcs</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col5 decl" id="685fp" title='fp' data-type='FILE *' data-ref="685fp" data-ref-filename="685fp">fp</dfn>, <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col6 decl" id="686rcsbuf" title='rcsbuf' data-type='struct rcsbuffer *' data-ref="686rcsbuf" data-ref-filename="686rcsbuf">rcsbuf</dfn>)</td></tr>
<tr><th id="7805">7805</th><td>{</td></tr>
<tr><th id="7806">7806</th><td>    <em>char</em> *<dfn class="local col7 decl" id="687num" title='num' data-type='char *' data-ref="687num" data-ref-filename="687num">num</dfn>;</td></tr>
<tr><th id="7807">7807</th><td>    <em>char</em> *<dfn class="local col8 decl" id="688key" title='key' data-type='char *' data-ref="688key" data-ref-filename="688key">key</dfn>, *<dfn class="local col9 decl" id="689value" title='value' data-type='char *' data-ref="689value" data-ref-filename="689value">value</dfn>;</td></tr>
<tr><th id="7808">7808</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col0 decl" id="690p" title='p' data-type='Node *' data-ref="690p" data-ref-filename="690p">p</dfn>;</td></tr>
<tr><th id="7809">7809</th><td>    <a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a> *<dfn class="local col1 decl" id="691d" title='d' data-type='Deltatext *' data-ref="691d" data-ref-filename="691d">d</dfn>;</td></tr>
<tr><th id="7810">7810</th><td></td></tr>
<tr><th id="7811">7811</th><td>    <i>/* Get the revision number. */</i></td></tr>
<tr><th id="7812">7812</th><td>    <b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getrevnum" title='rcsbuf_getrevnum' data-use='c' data-ref="rcsbuf_getrevnum" data-ref-filename="rcsbuf_getrevnum">rcsbuf_getrevnum</a> (<a class="local col6 ref" href="#686rcsbuf" title='rcsbuf' data-ref="686rcsbuf" data-ref-filename="686rcsbuf">rcsbuf</a>, &amp;<a class="local col7 ref" href="#687num" title='num' data-ref="687num" data-ref-filename="687num">num</a>))</td></tr>
<tr><th id="7813">7813</th><td>    {</td></tr>
<tr><th id="7814">7814</th><td>	<i>/* If num == NULL, it means we reached EOF naturally.  That's</i></td></tr>
<tr><th id="7815">7815</th><td><i>	   fine. */</i></td></tr>
<tr><th id="7816">7816</th><td>	<b>if</b> (<a class="local col7 ref" href="#687num" title='num' data-ref="687num" data-ref-filename="687num">num</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7817">7817</th><td>	    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="7818">7818</th><td>	<b>else</b></td></tr>
<tr><th id="7819">7819</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"%s: unexpected EOF"</q>, <a class="local col4 ref" href="#684rcs" title='rcs' data-ref="684rcs" data-ref-filename="684rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>);</td></tr>
<tr><th id="7820">7820</th><td>    }</td></tr>
<tr><th id="7821">7821</th><td></td></tr>
<tr><th id="7822">7822</th><td>    <a class="local col0 ref" href="#690p" title='p' data-ref="690p" data-ref-filename="690p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col4 ref" href="#684rcs" title='rcs' data-ref="684rcs" data-ref-filename="684rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col7 ref" href="#687num" title='num' data-ref="687num" data-ref-filename="687num">num</a>);</td></tr>
<tr><th id="7823">7823</th><td>    <b>if</b> (<a class="local col0 ref" href="#690p" title='p' data-ref="690p" data-ref-filename="690p">p</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7824">7824</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"mismatch in rcs file %s between deltas and deltatexts (%s)"</q>,</td></tr>
<tr><th id="7825">7825</th><td>	       <a class="local col4 ref" href="#684rcs" title='rcs' data-ref="684rcs" data-ref-filename="684rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col7 ref" href="#687num" title='num' data-ref="687num" data-ref-filename="687num">num</a>);</td></tr>
<tr><th id="7826">7826</th><td></td></tr>
<tr><th id="7827">7827</th><td>    <a class="local col1 ref" href="#691d" title='d' data-ref="691d" data-ref-filename="691d">d</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<b>sizeof</b> (<a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a>));</td></tr>
<tr><th id="7828">7828</th><td>    <a class="local col1 ref" href="#691d" title='d' data-ref="691d" data-ref-filename="691d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::version" title='deltatext::version' data-ref="deltatext::version" data-ref-filename="deltatext..version">version</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col7 ref" href="#687num" title='num' data-ref="687num" data-ref-filename="687num">num</a>);</td></tr>
<tr><th id="7829">7829</th><td></td></tr>
<tr><th id="7830">7830</th><td>    <i>/* Get the log message. */</i></td></tr>
<tr><th id="7831">7831</th><td>    <b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (<a class="local col6 ref" href="#686rcsbuf" title='rcsbuf' data-ref="686rcsbuf" data-ref-filename="686rcsbuf">rcsbuf</a>, &amp;<a class="local col8 ref" href="#688key" title='key' data-ref="688key" data-ref-filename="688key">key</a>, &amp;<a class="local col9 ref" href="#689value" title='value' data-ref="689value" data-ref-filename="689value">value</a>))</td></tr>
<tr><th id="7832">7832</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"%s, delta %s: unexpected EOF"</q>, <a class="local col4 ref" href="#684rcs" title='rcs' data-ref="684rcs" data-ref-filename="684rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col7 ref" href="#687num" title='num' data-ref="687num" data-ref-filename="687num">num</a>);</td></tr>
<tr><th id="7833">7833</th><td>    <b>if</b> (! <a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;log&quot;) &amp;&amp; strcmp ((key), (&quot;log&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col8 ref" href="#688key" title='key' data-ref="688key" data-ref-filename="688key">key</a>, <q>"log"</q>))</td></tr>
<tr><th id="7834">7834</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"%s, delta %s: expected `log', got `%s'"</q>,</td></tr>
<tr><th id="7835">7835</th><td>	       <a class="local col4 ref" href="#684rcs" title='rcs' data-ref="684rcs" data-ref-filename="684rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col7 ref" href="#687num" title='num' data-ref="687num" data-ref-filename="687num">num</a>, <a class="local col8 ref" href="#688key" title='key' data-ref="688key" data-ref-filename="688key">key</a>);</td></tr>
<tr><th id="7836">7836</th><td>    <a class="local col1 ref" href="#691d" title='d' data-ref="691d" data-ref-filename="691d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (<a class="local col6 ref" href="#686rcsbuf" title='rcsbuf' data-ref="686rcsbuf" data-ref-filename="686rcsbuf">rcsbuf</a>, <a class="local col9 ref" href="#689value" title='value' data-ref="689value" data-ref-filename="689value">value</a>, <var>0</var>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="7837">7837</th><td></td></tr>
<tr><th id="7838">7838</th><td>    <i>/* Get random newphrases. */</i></td></tr>
<tr><th id="7839">7839</th><td>    <a class="local col1 ref" href="#691d" title='d' data-ref="691d" data-ref-filename="691d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::other" title='deltatext::other' data-ref="deltatext::other" data-ref-filename="deltatext..other">other</a> = <a class="ref fn" href="hash.h.html#getlist" title='getlist' data-ref="getlist" data-ref-filename="getlist">getlist</a>();</td></tr>
<tr><th id="7840">7840</th><td>    <b>while</b> (<var>1</var>)</td></tr>
<tr><th id="7841">7841</th><td>    {</td></tr>
<tr><th id="7842">7842</th><td>	<b>if</b> (! <a class="tu ref fn" href="#rcsbuf_getkey" title='rcsbuf_getkey' data-use='c' data-ref="rcsbuf_getkey" data-ref-filename="rcsbuf_getkey">rcsbuf_getkey</a> (<a class="local col6 ref" href="#686rcsbuf" title='rcsbuf' data-ref="686rcsbuf" data-ref-filename="686rcsbuf">rcsbuf</a>, &amp;<a class="local col8 ref" href="#688key" title='key' data-ref="688key" data-ref-filename="688key">key</a>, &amp;<a class="local col9 ref" href="#689value" title='value' data-ref="689value" data-ref-filename="689value">value</a>))</td></tr>
<tr><th id="7843">7843</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"%s, delta %s: unexpected EOF"</q>, <a class="local col4 ref" href="#684rcs" title='rcs' data-ref="684rcs" data-ref-filename="684rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col7 ref" href="#687num" title='num' data-ref="687num" data-ref-filename="687num">num</a>);</td></tr>
<tr><th id="7844">7844</th><td></td></tr>
<tr><th id="7845">7845</th><td>	<b>if</b> (<a class="macro" href="#138" title="(*(char *)(key) == *(char *)(&quot;text&quot;) &amp;&amp; strcmp ((key), (&quot;text&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col8 ref" href="#688key" title='key' data-ref="688key" data-ref-filename="688key">key</a>, <q>"text"</q>))</td></tr>
<tr><th id="7846">7846</th><td>	    <b>break</b>;</td></tr>
<tr><th id="7847">7847</th><td></td></tr>
<tr><th id="7848">7848</th><td>	<a class="local col0 ref" href="#690p" title='p' data-ref="690p" data-ref-filename="690p">p</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a>();</td></tr>
<tr><th id="7849">7849</th><td>	<a class="local col0 ref" href="#690p" title='p' data-ref="690p" data-ref-filename="690p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> = <a class="tu ref fn" href="#rcsbuf_valcmp" title='rcsbuf_valcmp' data-use='c' data-ref="rcsbuf_valcmp" data-ref-filename="rcsbuf_valcmp">rcsbuf_valcmp</a> (<a class="local col6 ref" href="#686rcsbuf" title='rcsbuf' data-ref="686rcsbuf" data-ref-filename="686rcsbuf">rcsbuf</a>) ? <a class="enum" href="hash.h.html#RCSCMPFLD" title='RCSCMPFLD' data-ref="RCSCMPFLD" data-ref-filename="RCSCMPFLD">RCSCMPFLD</a> : <a class="enum" href="hash.h.html#RCSFIELD" title='RCSFIELD' data-ref="RCSFIELD" data-ref-filename="RCSFIELD">RCSFIELD</a>;</td></tr>
<tr><th id="7850">7850</th><td>	<a class="local col0 ref" href="#690p" title='p' data-ref="690p" data-ref-filename="690p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col8 ref" href="#688key" title='key' data-ref="688key" data-ref-filename="688key">key</a>);</td></tr>
<tr><th id="7851">7851</th><td>	<a class="local col0 ref" href="#690p" title='p' data-ref="690p" data-ref-filename="690p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (<a class="local col6 ref" href="#686rcsbuf" title='rcsbuf' data-ref="686rcsbuf" data-ref-filename="686rcsbuf">rcsbuf</a>, <a class="local col9 ref" href="#689value" title='value' data-ref="689value" data-ref-filename="689value">value</a>, <a class="local col0 ref" href="#690p" title='p' data-ref="690p" data-ref-filename="690p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> == <a class="enum" href="hash.h.html#RCSFIELD" title='RCSFIELD' data-ref="RCSFIELD" data-ref-filename="RCSFIELD">RCSFIELD</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="7852">7852</th><td>	<b>if</b> (<a class="ref fn" href="hash.h.html#addnode" title='addnode' data-ref="addnode" data-ref-filename="addnode">addnode</a> (<a class="local col1 ref" href="#691d" title='d' data-ref="691d" data-ref-filename="691d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::other" title='deltatext::other' data-ref="deltatext::other" data-ref-filename="deltatext..other">other</a>, <a class="local col0 ref" href="#690p" title='p' data-ref="690p" data-ref-filename="690p">p</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="7853">7853</th><td>	{</td></tr>
<tr><th id="7854">7854</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"warning: %s, delta %s: duplicate field `%s'"</q>,</td></tr>
<tr><th id="7855">7855</th><td>		   <a class="local col4 ref" href="#684rcs" title='rcs' data-ref="684rcs" data-ref-filename="684rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::print_path" title='rcsnode::print_path' data-ref="rcsnode::print_path" data-ref-filename="rcsnode..print_path">print_path</a>, <a class="local col7 ref" href="#687num" title='num' data-ref="687num" data-ref-filename="687num">num</a>, <a class="local col8 ref" href="#688key" title='key' data-ref="688key" data-ref-filename="688key">key</a>);</td></tr>
<tr><th id="7856">7856</th><td>	}</td></tr>
<tr><th id="7857">7857</th><td>    }</td></tr>
<tr><th id="7858">7858</th><td></td></tr>
<tr><th id="7859">7859</th><td>    <i>/* Get the change text. We already know that this key is `text'. */</i></td></tr>
<tr><th id="7860">7860</th><td>    <a class="local col1 ref" href="#691d" title='d' data-ref="691d" data-ref-filename="691d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> = <a class="tu ref fn" href="#rcsbuf_valcopy" title='rcsbuf_valcopy' data-use='c' data-ref="rcsbuf_valcopy" data-ref-filename="rcsbuf_valcopy">rcsbuf_valcopy</a> (<a class="local col6 ref" href="#686rcsbuf" title='rcsbuf' data-ref="686rcsbuf" data-ref-filename="686rcsbuf">rcsbuf</a>, <a class="local col9 ref" href="#689value" title='value' data-ref="689value" data-ref-filename="689value">value</a>, <var>0</var>, &amp;<a class="local col1 ref" href="#691d" title='d' data-ref="691d" data-ref-filename="691d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::len" title='deltatext::len' data-ref="deltatext::len" data-ref-filename="deltatext..len">len</a>);</td></tr>
<tr><th id="7861">7861</th><td></td></tr>
<tr><th id="7862">7862</th><td>    <b>return</b> <a class="local col1 ref" href="#691d" title='d' data-ref="691d" data-ref-filename="691d">d</a>;</td></tr>
<tr><th id="7863">7863</th><td>}</td></tr>
<tr><th id="7864">7864</th><td></td></tr>
<tr><th id="7865">7865</th><td></td></tr>
<tr><th id="7866">7866</th><td></td></tr>
<tr><th id="7867">7867</th><td><i  data-doc="putsymbol_proc">/* RCS output functions, for writing RCS format files from RCSNode</i></td></tr>
<tr><th id="7868">7868</th><td><i  data-doc="putsymbol_proc">   structures.</i></td></tr>
<tr><th id="7869">7869</th><td><i  data-doc="putsymbol_proc"></i></td></tr>
<tr><th id="7870">7870</th><td><i  data-doc="putsymbol_proc">   For most of this work, RCS 5.7 uses an `aprintf' function which aborts</i></td></tr>
<tr><th id="7871">7871</th><td><i  data-doc="putsymbol_proc">   program upon error.  Instead, these functions check the output status</i></td></tr>
<tr><th id="7872">7872</th><td><i  data-doc="putsymbol_proc">   of the stream right before closing it, and aborts if an error condition</i></td></tr>
<tr><th id="7873">7873</th><td><i  data-doc="putsymbol_proc">   is found.  The RCS solution is probably the better one: it produces</i></td></tr>
<tr><th id="7874">7874</th><td><i  data-doc="putsymbol_proc">   more overhead, but will produce a clearer diagnostic in the case of</i></td></tr>
<tr><th id="7875">7875</th><td><i  data-doc="putsymbol_proc">   catastrophic error.  In either case, however, the repository will probably</i></td></tr>
<tr><th id="7876">7876</th><td><i  data-doc="putsymbol_proc">   not get corrupted. */</i></td></tr>
<tr><th id="7877">7877</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="7878">7878</th><td><dfn class="tu decl def fn" id="putsymbol_proc" title='putsymbol_proc' data-type='int putsymbol_proc(Node * symnode, void * fparg)' data-ref="putsymbol_proc" data-ref-filename="putsymbol_proc">putsymbol_proc</dfn> (<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col2 decl" id="692symnode" title='symnode' data-type='Node *' data-ref="692symnode" data-ref-filename="692symnode">symnode</dfn>, <em>void</em> *<dfn class="local col3 decl" id="693fparg" title='fparg' data-type='void *' data-ref="693fparg" data-ref-filename="693fparg">fparg</dfn>)</td></tr>
<tr><th id="7879">7879</th><td>{</td></tr>
<tr><th id="7880">7880</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col4 decl" id="694fp" title='fp' data-type='FILE *' data-ref="694fp" data-ref-filename="694fp">fp</dfn> = <a class="local col3 ref" href="#693fparg" title='fparg' data-ref="693fparg" data-ref-filename="693fparg">fparg</a>;</td></tr>
<tr><th id="7881">7881</th><td></td></tr>
<tr><th id="7882">7882</th><td>    <i>/* A fiddly optimization: this code used to just call fprintf, but</i></td></tr>
<tr><th id="7883">7883</th><td><i>       in an old repository with hundreds of tags this can get called</i></td></tr>
<tr><th id="7884">7884</th><td><i>       hundreds of thousands of times when doing a cvs tag.  Since</i></td></tr>
<tr><th id="7885">7885</th><td><i>       tagging is a relatively common operation, and using putc and</i></td></tr>
<tr><th id="7886">7886</th><td><i>       fputs is just as comprehensible, the change is worthwhile.  */</i></td></tr>
<tr><th id="7887">7887</th><td>    <a class="macro" href="../lib/unlocked-io.h.html#116" title="__sputc(&apos;\n&apos;, fp)" data-ref="_M/putc">putc</a> (<kbd>'\n'</kbd>, <a class="local col4 ref" href="#694fp" title='fp' data-ref="694fp" data-ref-filename="694fp">fp</a>);</td></tr>
<tr><th id="7888">7888</th><td>    <a class="macro" href="../lib/unlocked-io.h.html#116" title="__sputc(&apos;\t&apos;, fp)" data-ref="_M/putc">putc</a> (<kbd>'\t'</kbd>, <a class="local col4 ref" href="#694fp" title='fp' data-ref="694fp" data-ref-filename="694fp">fp</a>);</td></tr>
<tr><th id="7889">7889</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<a class="local col2 ref" href="#692symnode" title='symnode' data-ref="692symnode" data-ref-filename="692symnode">symnode</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>, <a class="local col4 ref" href="#694fp" title='fp' data-ref="694fp" data-ref-filename="694fp">fp</a>);</td></tr>
<tr><th id="7890">7890</th><td>    <a class="macro" href="../lib/unlocked-io.h.html#116" title="__sputc(&apos;:&apos;, fp)" data-ref="_M/putc">putc</a> (<kbd>':'</kbd>, <a class="local col4 ref" href="#694fp" title='fp' data-ref="694fp" data-ref-filename="694fp">fp</a>);</td></tr>
<tr><th id="7891">7891</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<a class="local col2 ref" href="#692symnode" title='symnode' data-ref="692symnode" data-ref-filename="692symnode">symnode</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>, <a class="local col4 ref" href="#694fp" title='fp' data-ref="694fp" data-ref-filename="694fp">fp</a>);</td></tr>
<tr><th id="7892">7892</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="7893">7893</th><td>}</td></tr>
<tr><th id="7894">7894</th><td></td></tr>
<tr><th id="7895">7895</th><td></td></tr>
<tr><th id="7896">7896</th><td></td></tr>
<tr><th id="7897">7897</th><td><i  data-doc="putlock_proc">/* putlock_proc is like putsymbol_proc, but key and data are reversed. */</i></td></tr>
<tr><th id="7898">7898</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="7899">7899</th><td><dfn class="tu decl def fn" id="putlock_proc" title='putlock_proc' data-type='int putlock_proc(Node * symnode, void * fp)' data-ref="putlock_proc" data-ref-filename="putlock_proc">putlock_proc</dfn> (<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col5 decl" id="695symnode" title='symnode' data-type='Node *' data-ref="695symnode" data-ref-filename="695symnode">symnode</dfn>, <em>void</em> *<dfn class="local col6 decl" id="696fp" title='fp' data-type='void *' data-ref="696fp" data-ref-filename="696fp">fp</dfn>)</td></tr>
<tr><th id="7900">7900</th><td>{</td></tr>
<tr><th id="7901">7901</th><td>    <b>return</b> <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf" data-ref-filename="fprintf">fprintf</a> (<a class="local col6 ref" href="#696fp" title='fp' data-ref="696fp" data-ref-filename="696fp">fp</a>, <q>"\n\t%s:%s"</q>, (<em>char</em> *)<a class="local col5 ref" href="#695symnode" title='symnode' data-ref="695symnode" data-ref-filename="695symnode">symnode</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>, <a class="local col5 ref" href="#695symnode" title='symnode' data-ref="695symnode" data-ref-filename="695symnode">symnode</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>);</td></tr>
<tr><th id="7902">7902</th><td>}</td></tr>
<tr><th id="7903">7903</th><td></td></tr>
<tr><th id="7904">7904</th><td></td></tr>
<tr><th id="7905">7905</th><td></td></tr>
<tr><th id="7906">7906</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="7907">7907</th><td><dfn class="tu decl def fn" id="putrcsfield_proc" title='putrcsfield_proc' data-type='int putrcsfield_proc(Node * node, void * vfp)' data-ref="putrcsfield_proc" data-ref-filename="putrcsfield_proc">putrcsfield_proc</dfn> (<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col7 decl" id="697node" title='node' data-type='Node *' data-ref="697node" data-ref-filename="697node">node</dfn>, <em>void</em> *<dfn class="local col8 decl" id="698vfp" title='vfp' data-type='void *' data-ref="698vfp" data-ref-filename="698vfp">vfp</dfn>)</td></tr>
<tr><th id="7908">7908</th><td>{</td></tr>
<tr><th id="7909">7909</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col9 decl" id="699fp" title='fp' data-type='FILE *' data-ref="699fp" data-ref-filename="699fp">fp</dfn> = <a class="local col8 ref" href="#698vfp" title='vfp' data-ref="698vfp" data-ref-filename="698vfp">vfp</a>;</td></tr>
<tr><th id="7910">7910</th><td></td></tr>
<tr><th id="7911">7911</th><td>    <i>/* Some magic keys used internally by CVS start with `;'. Skip them. */</i></td></tr>
<tr><th id="7912">7912</th><td>    <b>if</b> (<a class="local col7 ref" href="#697node" title='node' data-ref="697node" data-ref-filename="697node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>[<var>0</var>] == <kbd>';'</kbd>)</td></tr>
<tr><th id="7913">7913</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="7914">7914</th><td></td></tr>
<tr><th id="7915">7915</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf" data-ref-filename="fprintf">fprintf</a> (<a class="local col9 ref" href="#699fp" title='fp' data-ref="699fp" data-ref-filename="699fp">fp</a>, <q>"\n%s\t"</q>, <a class="local col7 ref" href="#697node" title='node' data-ref="697node" data-ref-filename="697node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>);</td></tr>
<tr><th id="7916">7916</th><td>    <b>if</b> (<a class="local col7 ref" href="#697node" title='node' data-ref="697node" data-ref-filename="697node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7917">7917</th><td>    {</td></tr>
<tr><th id="7918">7918</th><td>	<i>/* If the field's value contains evil characters,</i></td></tr>
<tr><th id="7919">7919</th><td><i>	   it must be stringified. */</i></td></tr>
<tr><th id="7920">7920</th><td>	<i>/* FIXME: This does not quite get it right.  "7jk8f" is not a valid</i></td></tr>
<tr><th id="7921">7921</th><td><i>	   value for a value in a newpharse, according to doc/RCSFILES,</i></td></tr>
<tr><th id="7922">7922</th><td><i>	   because digits are not valid in an "id".  We might do OK by</i></td></tr>
<tr><th id="7923">7923</th><td><i>	   always writing strings (enclosed in @@).  Would be nice to</i></td></tr>
<tr><th id="7924">7924</th><td><i>	   explicitly mention this one way or another in doc/RCSFILES.</i></td></tr>
<tr><th id="7925">7925</th><td><i>	   A case where we are wrong in a much more clear-cut way is that</i></td></tr>
<tr><th id="7926">7926</th><td><i>	   we let through non-graphic characters such as whitespace and</i></td></tr>
<tr><th id="7927">7927</th><td><i>	   control characters.  */</i></td></tr>
<tr><th id="7928">7928</th><td></td></tr>
<tr><th id="7929">7929</th><td>	<b>if</b> (<a class="local col7 ref" href="#697node" title='node' data-ref="697node" data-ref-filename="697node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::type" title='node::type' data-ref="node::type" data-ref-filename="node..type">type</a> == <a class="enum" href="hash.h.html#RCSCMPFLD" title='RCSCMPFLD' data-ref="RCSCMPFLD" data-ref-filename="RCSCMPFLD">RCSCMPFLD</a> || <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strpbrk" title='strpbrk' data-ref="strpbrk" data-ref-filename="strpbrk">strpbrk</a> (<a class="local col7 ref" href="#697node" title='node' data-ref="697node" data-ref-filename="697node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>, <q>"$,.:;@"</q>) == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="7930">7930</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<a class="local col7 ref" href="#697node" title='node' data-ref="697node" data-ref-filename="697node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>, <a class="local col9 ref" href="#699fp" title='fp' data-ref="699fp" data-ref-filename="699fp">fp</a>);</td></tr>
<tr><th id="7931">7931</th><td>	<b>else</b></td></tr>
<tr><th id="7932">7932</th><td>	{</td></tr>
<tr><th id="7933">7933</th><td>	    <a class="macro" href="../lib/unlocked-io.h.html#116" title="__sputc(&apos;@&apos;, fp)" data-ref="_M/putc">putc</a> (<kbd>'@'</kbd>, <a class="local col9 ref" href="#699fp" title='fp' data-ref="699fp" data-ref-filename="699fp">fp</a>);</td></tr>
<tr><th id="7934">7934</th><td>	    <a class="ref fn" href="cvs.h.html#expand_at_signs" title='expand_at_signs' data-ref="expand_at_signs" data-ref-filename="expand_at_signs">expand_at_signs</a> (<a class="local col7 ref" href="#697node" title='node' data-ref="697node" data-ref-filename="697node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>, (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#178" title="__off_t" data-ref="_M/off_t">off_t</a>) <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col7 ref" href="#697node" title='node' data-ref="697node" data-ref-filename="697node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>), <a class="local col9 ref" href="#699fp" title='fp' data-ref="699fp" data-ref-filename="699fp">fp</a>);</td></tr>
<tr><th id="7935">7935</th><td>	    <a class="macro" href="../lib/unlocked-io.h.html#116" title="__sputc(&apos;@&apos;, fp)" data-ref="_M/putc">putc</a> (<kbd>'@'</kbd>, <a class="local col9 ref" href="#699fp" title='fp' data-ref="699fp" data-ref-filename="699fp">fp</a>);</td></tr>
<tr><th id="7936">7936</th><td>	}</td></tr>
<tr><th id="7937">7937</th><td>    }</td></tr>
<tr><th id="7938">7938</th><td></td></tr>
<tr><th id="7939">7939</th><td>    <i>/* desc, log and text fields should not be terminated with semicolon;</i></td></tr>
<tr><th id="7940">7940</th><td><i>       all other fields should be. */</i></td></tr>
<tr><th id="7941">7941</th><td>    <b>if</b> (! <a class="macro" href="#138" title="(*(char *)(node-&gt;key) == *(char *)(&quot;desc&quot;) &amp;&amp; strcmp ((node-&gt;key), (&quot;desc&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col7 ref" href="#697node" title='node' data-ref="697node" data-ref-filename="697node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>, <q>"desc"</q>) &amp;&amp;</td></tr>
<tr><th id="7942">7942</th><td>	! <a class="macro" href="#138" title="(*(char *)(node-&gt;key) == *(char *)(&quot;log&quot;) &amp;&amp; strcmp ((node-&gt;key), (&quot;log&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col7 ref" href="#697node" title='node' data-ref="697node" data-ref-filename="697node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>, <q>"log"</q>) &amp;&amp;</td></tr>
<tr><th id="7943">7943</th><td>	! <a class="macro" href="#138" title="(*(char *)(node-&gt;key) == *(char *)(&quot;text&quot;) &amp;&amp; strcmp ((node-&gt;key), (&quot;text&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col7 ref" href="#697node" title='node' data-ref="697node" data-ref-filename="697node">node</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>, <q>"text"</q>))</td></tr>
<tr><th id="7944">7944</th><td>    {</td></tr>
<tr><th id="7945">7945</th><td>	<a class="macro" href="../lib/unlocked-io.h.html#116" title="__sputc(&apos;;&apos;, fp)" data-ref="_M/putc">putc</a> (<kbd>';'</kbd>, <a class="local col9 ref" href="#699fp" title='fp' data-ref="699fp" data-ref-filename="699fp">fp</a>);</td></tr>
<tr><th id="7946">7946</th><td>    }</td></tr>
<tr><th id="7947">7947</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="7948">7948</th><td>}</td></tr>
<tr><th id="7949">7949</th><td></td></tr>
<tr><th id="7950">7950</th><td></td></tr>
<tr><th id="7951">7951</th><td></td></tr>
<tr><th id="7952">7952</th><td><u>#<span data-ppcond="7952">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="7953">7953</th><td></td></tr>
<tr><th id="7954">7954</th><td><i>/* Save a filename in a `hardlinks' RCS field.  NODE-&gt;KEY will contain</i></td></tr>
<tr><th id="7955">7955</th><td><i>   a full pathname, but currently only basenames are stored in the RCS</i></td></tr>
<tr><th id="7956">7956</th><td><i>   node.  Assume that the filename includes nasty characters and</i></td></tr>
<tr><th id="7957">7957</th><td><i>   @-escape it. */</i></td></tr>
<tr><th id="7958">7958</th><td></td></tr>
<tr><th id="7959">7959</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="7960">7960</th><td>puthardlink_proc (node, vfp)</td></tr>
<tr><th id="7961">7961</th><td>    Node *node;</td></tr>
<tr><th id="7962">7962</th><td>    <em>void</em> *vfp;</td></tr>
<tr><th id="7963">7963</th><td>{</td></tr>
<tr><th id="7964">7964</th><td>    FILE *fp = vfp;</td></tr>
<tr><th id="7965">7965</th><td>    <em>char</em> *basename = strrchr (node-&gt;key, <kbd>'/'</kbd>);</td></tr>
<tr><th id="7966">7966</th><td></td></tr>
<tr><th id="7967">7967</th><td>    <b>if</b> (basename == NULL)</td></tr>
<tr><th id="7968">7968</th><td>	basename = node-&gt;key;</td></tr>
<tr><th id="7969">7969</th><td>    <b>else</b></td></tr>
<tr><th id="7970">7970</th><td>	++basename;</td></tr>
<tr><th id="7971">7971</th><td></td></tr>
<tr><th id="7972">7972</th><td>    putc (<kbd>'\t'</kbd>, fp);</td></tr>
<tr><th id="7973">7973</th><td>    putc (<kbd>'@'</kbd>, fp);</td></tr>
<tr><th id="7974">7974</th><td>    (<em>void</em>) expand_at_signs (basename, strlen (basename), fp);</td></tr>
<tr><th id="7975">7975</th><td>    putc (<kbd>'@'</kbd>, fp);</td></tr>
<tr><th id="7976">7976</th><td></td></tr>
<tr><th id="7977">7977</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="7978">7978</th><td>}</td></tr>
<tr><th id="7979">7979</th><td></td></tr>
<tr><th id="7980">7980</th><td><u>#<span data-ppcond="7952">endif</span> /* PRESERVE_PERMISSIONS_SUPPORT */</u></td></tr>
<tr><th id="7981">7981</th><td></td></tr>
<tr><th id="7982">7982</th><td></td></tr>
<tr><th id="7983">7983</th><td></td></tr>
<tr><th id="7984">7984</th><td><i  data-doc="RCS_putadmin">/* Output the admin node for RCS into stream FP. */</i></td></tr>
<tr><th id="7985">7985</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="7986">7986</th><td><dfn class="tu decl def fn" id="RCS_putadmin" title='RCS_putadmin' data-type='void RCS_putadmin(RCSNode * rcs, FILE * fp)' data-ref="RCS_putadmin" data-ref-filename="RCS_putadmin">RCS_putadmin</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col0 decl" id="700rcs" title='rcs' data-type='RCSNode *' data-ref="700rcs" data-ref-filename="700rcs">rcs</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col1 decl" id="701fp" title='fp' data-type='FILE *' data-ref="701fp" data-ref-filename="701fp">fp</dfn>)</td></tr>
<tr><th id="7987">7987</th><td>{</td></tr>
<tr><th id="7988">7988</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf" data-ref-filename="fprintf">fprintf</a> (<a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>, <q>"%s\t%s;\n"</q>, <a class="macro" href="rcs.h.html#23" title="&quot;head&quot;" data-ref="_M/RCSHEAD">RCSHEAD</a>, <a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a> ? <a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a> : <q>""</q>);</td></tr>
<tr><th id="7989">7989</th><td>    <b>if</b> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a>)</td></tr>
<tr><th id="7990">7990</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf" data-ref-filename="fprintf">fprintf</a> (<a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>, <q>"%s\t%s;\n"</q>, <a class="macro" href="rcs.h.html#24" title="&quot;branch&quot;" data-ref="_M/RCSBRANCH">RCSBRANCH</a>, <a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::branch" title='rcsnode::branch' data-ref="rcsnode::branch" data-ref-filename="rcsnode..branch">branch</a>);</td></tr>
<tr><th id="7991">7991</th><td></td></tr>
<tr><th id="7992">7992</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<q>"access"</q>, <a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>);</td></tr>
<tr><th id="7993">7993</th><td>    <b>if</b> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a>)</td></tr>
<tr><th id="7994">7994</th><td>    {</td></tr>
<tr><th id="7995">7995</th><td>	<em>char</em> *<dfn class="local col2 decl" id="702p" title='p' data-type='char *' data-ref="702p" data-ref-filename="702p">p</dfn>, *<dfn class="local col3 decl" id="703s" title='s' data-type='char *' data-ref="703s" data-ref-filename="703s">s</dfn>;</td></tr>
<tr><th id="7996">7996</th><td>	<a class="local col3 ref" href="#703s" title='s' data-ref="703s" data-ref-filename="703s">s</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a>);</td></tr>
<tr><th id="7997">7997</th><td>	<b>for</b> (<a class="local col2 ref" href="#702p" title='p' data-ref="702p" data-ref-filename="702p">p</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strtok" title='strtok' data-ref="strtok" data-ref-filename="strtok">strtok</a> (<a class="local col3 ref" href="#703s" title='s' data-ref="703s" data-ref-filename="703s">s</a>, <q>" \n\t"</q>); <a class="local col2 ref" href="#702p" title='p' data-ref="702p" data-ref-filename="702p">p</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>; <a class="local col2 ref" href="#702p" title='p' data-ref="702p" data-ref-filename="702p">p</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strtok" title='strtok' data-ref="strtok" data-ref-filename="strtok">strtok</a> (<span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <q>" \n\t"</q>))</td></tr>
<tr><th id="7998">7998</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf" data-ref-filename="fprintf">fprintf</a> (<a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>, <q>"\n\t%s"</q>, <a class="local col2 ref" href="#702p" title='p' data-ref="702p" data-ref-filename="702p">p</a>);</td></tr>
<tr><th id="7999">7999</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col3 ref" href="#703s" title='s' data-ref="703s" data-ref-filename="703s">s</a>);</td></tr>
<tr><th id="8000">8000</th><td>    }</td></tr>
<tr><th id="8001">8001</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<q>";\n"</q>, <a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>);</td></tr>
<tr><th id="8002">8002</th><td></td></tr>
<tr><th id="8003">8003</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<a class="macro" href="rcs.h.html#25" title="&quot;symbols&quot;" data-ref="_M/RCSSYMBOLS">RCSSYMBOLS</a>, <a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>);</td></tr>
<tr><th id="8004">8004</th><td>    <i>/* If we haven't had to convert the symbols to a list yet, don't</i></td></tr>
<tr><th id="8005">8005</th><td><i>       force a conversion now; just write out the string.  */</i></td></tr>
<tr><th id="8006">8006</th><td>    <b>if</b> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols" title='rcsnode::symbols' data-ref="rcsnode::symbols" data-ref-filename="rcsnode..symbols">symbols</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8007">8007</th><td>    {</td></tr>
<tr><th id="8008">8008</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<q>"\n\t"</q>, <a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>);</td></tr>
<tr><th id="8009">8009</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a>, <a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>);</td></tr>
<tr><th id="8010">8010</th><td>    }</td></tr>
<tr><th id="8011">8011</th><td>    <b>else</b></td></tr>
<tr><th id="8012">8012</th><td>	<a class="ref fn" href="hash.h.html#walklist" title='walklist' data-ref="walklist" data-ref-filename="walklist">walklist</a> (<a class="ref fn" href="#RCS_symbols" title='RCS_symbols' data-ref="RCS_symbols" data-ref-filename="RCS_symbols">RCS_symbols</a> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>), <a class="tu ref fn" href="#putsymbol_proc" title='putsymbol_proc' data-use='r' data-ref="putsymbol_proc" data-ref-filename="putsymbol_proc">putsymbol_proc</a>, <a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>);</td></tr>
<tr><th id="8013">8013</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<q>";\n"</q>, <a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>);</td></tr>
<tr><th id="8014">8014</th><td></td></tr>
<tr><th id="8015">8015</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<q>"locks"</q>, <a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>);</td></tr>
<tr><th id="8016">8016</th><td>    <b>if</b> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks_data" title='rcsnode::locks_data' data-ref="rcsnode::locks_data" data-ref-filename="rcsnode..locks_data">locks_data</a>)</td></tr>
<tr><th id="8017">8017</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf" data-ref-filename="fprintf">fprintf</a> (<a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>, <q>"\t%s"</q>, <a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks_data" title='rcsnode::locks_data' data-ref="rcsnode::locks_data" data-ref-filename="rcsnode..locks_data">locks_data</a>);</td></tr>
<tr><th id="8018">8018</th><td>    <b>else</b> <b>if</b> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks" title='rcsnode::locks' data-ref="rcsnode::locks" data-ref-filename="rcsnode..locks">locks</a>)</td></tr>
<tr><th id="8019">8019</th><td>	<a class="ref fn" href="hash.h.html#walklist" title='walklist' data-ref="walklist" data-ref-filename="walklist">walklist</a> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks" title='rcsnode::locks' data-ref="rcsnode::locks" data-ref-filename="rcsnode..locks">locks</a>, <a class="tu ref fn" href="#putlock_proc" title='putlock_proc' data-use='r' data-ref="putlock_proc" data-ref-filename="putlock_proc">putlock_proc</a>, <a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>);</td></tr>
<tr><th id="8020">8020</th><td>    <b>if</b> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::strict_locks" title='rcsnode::strict_locks' data-ref="rcsnode::strict_locks" data-ref-filename="rcsnode..strict_locks">strict_locks</a>)</td></tr>
<tr><th id="8021">8021</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf" data-ref-filename="fprintf">fprintf</a> (<a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>, <q>"; strict"</q>);</td></tr>
<tr><th id="8022">8022</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<q>";\n"</q>, <a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>);</td></tr>
<tr><th id="8023">8023</th><td></td></tr>
<tr><th id="8024">8024</th><td>    <b>if</b> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::comment" title='rcsnode::comment' data-ref="rcsnode::comment" data-ref-filename="rcsnode..comment">comment</a>)</td></tr>
<tr><th id="8025">8025</th><td>    {</td></tr>
<tr><th id="8026">8026</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf" data-ref-filename="fprintf">fprintf</a> (<a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>, <q>"comment\t@"</q>);</td></tr>
<tr><th id="8027">8027</th><td>	<a class="ref fn" href="cvs.h.html#expand_at_signs" title='expand_at_signs' data-ref="expand_at_signs" data-ref-filename="expand_at_signs">expand_at_signs</a> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::comment" title='rcsnode::comment' data-ref="rcsnode::comment" data-ref-filename="rcsnode..comment">comment</a>, (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#178" title="__off_t" data-ref="_M/off_t">off_t</a>) <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::comment" title='rcsnode::comment' data-ref="rcsnode::comment" data-ref-filename="rcsnode..comment">comment</a>), <a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>);</td></tr>
<tr><th id="8028">8028</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<q>"@;\n"</q>, <a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>);</td></tr>
<tr><th id="8029">8029</th><td>    }</td></tr>
<tr><th id="8030">8030</th><td>    <b>if</b> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a> &amp;&amp; ! <a class="macro" href="#138" title="(*(char *)(rcs-&gt;expand) == *(char *)(&quot;kv&quot;) &amp;&amp; strcmp ((rcs-&gt;expand), (&quot;kv&quot;)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a>, <q>"kv"</q>))</td></tr>
<tr><th id="8031">8031</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf" data-ref-filename="fprintf">fprintf</a> (<a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>, <q>"%s\t@%s@;\n"</q>, <a class="macro" href="rcs.h.html#28" title="&quot;expand&quot;" data-ref="_M/RCSEXPAND">RCSEXPAND</a>, <a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a>);</td></tr>
<tr><th id="8032">8032</th><td></td></tr>
<tr><th id="8033">8033</th><td>    <a class="ref fn" href="hash.h.html#walklist" title='walklist' data-ref="walklist" data-ref-filename="walklist">walklist</a> (<a class="local col0 ref" href="#700rcs" title='rcs' data-ref="700rcs" data-ref-filename="700rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::other" title='rcsnode::other' data-ref="rcsnode::other" data-ref-filename="rcsnode..other">other</a>, <a class="tu ref fn" href="#putrcsfield_proc" title='putrcsfield_proc' data-use='r' data-ref="putrcsfield_proc" data-ref-filename="putrcsfield_proc">putrcsfield_proc</a>, <a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>);</td></tr>
<tr><th id="8034">8034</th><td></td></tr>
<tr><th id="8035">8035</th><td>    <a class="macro" href="../lib/unlocked-io.h.html#116" title="__sputc(&apos;\n&apos;, fp)" data-ref="_M/putc">putc</a> (<kbd>'\n'</kbd>, <a class="local col1 ref" href="#701fp" title='fp' data-ref="701fp" data-ref-filename="701fp">fp</a>);</td></tr>
<tr><th id="8036">8036</th><td>}</td></tr>
<tr><th id="8037">8037</th><td></td></tr>
<tr><th id="8038">8038</th><td></td></tr>
<tr><th id="8039">8039</th><td></td></tr>
<tr><th id="8040">8040</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="8041">8041</th><td><dfn class="tu decl def fn" id="putdelta" title='putdelta' data-type='void putdelta(RCSVers * vers, FILE * fp)' data-ref="putdelta" data-ref-filename="putdelta">putdelta</dfn> (<a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col4 decl" id="704vers" title='vers' data-type='RCSVers *' data-ref="704vers" data-ref-filename="704vers">vers</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col5 decl" id="705fp" title='fp' data-type='FILE *' data-ref="705fp" data-ref-filename="705fp">fp</dfn>)</td></tr>
<tr><th id="8042">8042</th><td>{</td></tr>
<tr><th id="8043">8043</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col6 decl" id="706bp" title='bp' data-type='Node *' data-ref="706bp" data-ref-filename="706bp">bp</dfn>, *<dfn class="local col7 decl" id="707start" title='start' data-type='Node *' data-ref="707start" data-ref-filename="707start">start</dfn>;</td></tr>
<tr><th id="8044">8044</th><td></td></tr>
<tr><th id="8045">8045</th><td>    <i>/* Skip if no revision was supplied, or if it is outdated (cvs admin -o) */</i></td></tr>
<tr><th id="8046">8046</th><td>    <b>if</b> (<a class="local col4 ref" href="#704vers" title='vers' data-ref="704vers" data-ref-filename="704vers">vers</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || <a class="local col4 ref" href="#704vers" title='vers' data-ref="704vers" data-ref-filename="704vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::outdated" title='rcsversnode::outdated' data-ref="rcsversnode::outdated" data-ref-filename="rcsversnode..outdated">outdated</a>)</td></tr>
<tr><th id="8047">8047</th><td>	<b>return</b>;</td></tr>
<tr><th id="8048">8048</th><td></td></tr>
<tr><th id="8049">8049</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf" data-ref-filename="fprintf">fprintf</a> (<a class="local col5 ref" href="#705fp" title='fp' data-ref="705fp" data-ref-filename="705fp">fp</a>, <q>"\n%s\n%s\t%s;\t%s %s;\t%s %s;\nbranches"</q>,</td></tr>
<tr><th id="8050">8050</th><td>	     <a class="local col4 ref" href="#704vers" title='vers' data-ref="704vers" data-ref-filename="704vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::version" title='rcsversnode::version' data-ref="rcsversnode::version" data-ref-filename="rcsversnode..version">version</a>,</td></tr>
<tr><th id="8051">8051</th><td>	     <a class="macro" href="rcs.h.html#26" title="&quot;date&quot;" data-ref="_M/RCSDATE">RCSDATE</a>, <a class="local col4 ref" href="#704vers" title='vers' data-ref="704vers" data-ref-filename="704vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::date" title='rcsversnode::date' data-ref="rcsversnode::date" data-ref-filename="rcsversnode..date">date</a>,</td></tr>
<tr><th id="8052">8052</th><td>	     <q>"author"</q>, <a class="local col4 ref" href="#704vers" title='vers' data-ref="704vers" data-ref-filename="704vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::author" title='rcsversnode::author' data-ref="rcsversnode::author" data-ref-filename="rcsversnode..author">author</a>,</td></tr>
<tr><th id="8053">8053</th><td>	     <q>"state"</q>, <a class="local col4 ref" href="#704vers" title='vers' data-ref="704vers" data-ref-filename="704vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::state" title='rcsversnode::state' data-ref="rcsversnode::state" data-ref-filename="rcsversnode..state">state</a> ? <a class="local col4 ref" href="#704vers" title='vers' data-ref="704vers" data-ref-filename="704vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::state" title='rcsversnode::state' data-ref="rcsversnode::state" data-ref-filename="rcsversnode..state">state</a> : <q>""</q>);</td></tr>
<tr><th id="8054">8054</th><td></td></tr>
<tr><th id="8055">8055</th><td>    <b>if</b> (<a class="local col4 ref" href="#704vers" title='vers' data-ref="704vers" data-ref-filename="704vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8056">8056</th><td>    {</td></tr>
<tr><th id="8057">8057</th><td>	<a class="local col7 ref" href="#707start" title='start' data-ref="707start" data-ref-filename="707start">start</a> = <a class="local col4 ref" href="#704vers" title='vers' data-ref="704vers" data-ref-filename="704vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>;</td></tr>
<tr><th id="8058">8058</th><td>	<b>for</b> (<a class="local col6 ref" href="#706bp" title='bp' data-ref="706bp" data-ref-filename="706bp">bp</a> = <a class="local col7 ref" href="#707start" title='start' data-ref="707start" data-ref-filename="707start">start</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>; <a class="local col6 ref" href="#706bp" title='bp' data-ref="706bp" data-ref-filename="706bp">bp</a> != <a class="local col7 ref" href="#707start" title='start' data-ref="707start" data-ref-filename="707start">start</a>; <a class="local col6 ref" href="#706bp" title='bp' data-ref="706bp" data-ref-filename="706bp">bp</a> = <a class="local col6 ref" href="#706bp" title='bp' data-ref="706bp" data-ref-filename="706bp">bp</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>)</td></tr>
<tr><th id="8059">8059</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf" data-ref-filename="fprintf">fprintf</a> (<a class="local col5 ref" href="#705fp" title='fp' data-ref="705fp" data-ref-filename="705fp">fp</a>, <q>"\n\t%s"</q>, <a class="local col6 ref" href="#706bp" title='bp' data-ref="706bp" data-ref-filename="706bp">bp</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>);</td></tr>
<tr><th id="8060">8060</th><td>    }</td></tr>
<tr><th id="8061">8061</th><td></td></tr>
<tr><th id="8062">8062</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf" data-ref-filename="fprintf">fprintf</a> (<a class="local col5 ref" href="#705fp" title='fp' data-ref="705fp" data-ref-filename="705fp">fp</a>, <q>";\nnext\t%s;"</q>, <a class="local col4 ref" href="#704vers" title='vers' data-ref="704vers" data-ref-filename="704vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a> ? <a class="local col4 ref" href="#704vers" title='vers' data-ref="704vers" data-ref-filename="704vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a> : <q>""</q>);</td></tr>
<tr><th id="8063">8063</th><td></td></tr>
<tr><th id="8064">8064</th><td>    <a class="ref fn" href="hash.h.html#walklist" title='walklist' data-ref="walklist" data-ref-filename="walklist">walklist</a> (<a class="local col4 ref" href="#704vers" title='vers' data-ref="704vers" data-ref-filename="704vers">vers</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::other_delta" title='rcsversnode::other_delta' data-ref="rcsversnode::other_delta" data-ref-filename="rcsversnode..other_delta">other_delta</a>, <a class="tu ref fn" href="#putrcsfield_proc" title='putrcsfield_proc' data-use='r' data-ref="putrcsfield_proc" data-ref-filename="putrcsfield_proc">putrcsfield_proc</a>, <a class="local col5 ref" href="#705fp" title='fp' data-ref="705fp" data-ref-filename="705fp">fp</a>);</td></tr>
<tr><th id="8065">8065</th><td></td></tr>
<tr><th id="8066">8066</th><td><u>#<span data-ppcond="8066">ifdef</span> <span class="macro" data-ref="_M/PRESERVE_PERMISSIONS_SUPPORT">PRESERVE_PERMISSIONS_SUPPORT</span></u></td></tr>
<tr><th id="8067">8067</th><td>    <b>if</b> (vers-&gt;hardlinks)</td></tr>
<tr><th id="8068">8068</th><td>    {</td></tr>
<tr><th id="8069">8069</th><td>	fprintf (fp, <q>"\nhardlinks"</q>);</td></tr>
<tr><th id="8070">8070</th><td>	walklist (vers-&gt;hardlinks, puthardlink_proc, fp);</td></tr>
<tr><th id="8071">8071</th><td>	putc (<kbd>';'</kbd>, fp);</td></tr>
<tr><th id="8072">8072</th><td>    }</td></tr>
<tr><th id="8073">8073</th><td><u>#<span data-ppcond="8066">endif</span></u></td></tr>
<tr><th id="8074">8074</th><td>    <a class="macro" href="../lib/unlocked-io.h.html#116" title="__sputc(&apos;\n&apos;, fp)" data-ref="_M/putc">putc</a> (<kbd>'\n'</kbd>, <a class="local col5 ref" href="#705fp" title='fp' data-ref="705fp" data-ref-filename="705fp">fp</a>);</td></tr>
<tr><th id="8075">8075</th><td>}</td></tr>
<tr><th id="8076">8076</th><td></td></tr>
<tr><th id="8077">8077</th><td></td></tr>
<tr><th id="8078">8078</th><td></td></tr>
<tr><th id="8079">8079</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="8080">8080</th><td><dfn class="tu decl def fn" id="RCS_putdtree" title='RCS_putdtree' data-type='void RCS_putdtree(RCSNode * rcs, char * rev, FILE * fp)' data-ref="RCS_putdtree" data-ref-filename="RCS_putdtree">RCS_putdtree</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col8 decl" id="708rcs" title='rcs' data-type='RCSNode *' data-ref="708rcs" data-ref-filename="708rcs">rcs</dfn>, <em>char</em> *<dfn class="local col9 decl" id="709rev" title='rev' data-type='char *' data-ref="709rev" data-ref-filename="709rev">rev</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col0 decl" id="710fp" title='fp' data-type='FILE *' data-ref="710fp" data-ref-filename="710fp">fp</dfn>)</td></tr>
<tr><th id="8081">8081</th><td>{</td></tr>
<tr><th id="8082">8082</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col1 decl" id="711versp" title='versp' data-type='RCSVers *' data-ref="711versp" data-ref-filename="711versp">versp</dfn>;</td></tr>
<tr><th id="8083">8083</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col2 decl" id="712p" title='p' data-type='Node *' data-ref="712p" data-ref-filename="712p">p</dfn>, *<dfn class="local col3 decl" id="713branch" title='branch' data-type='Node *' data-ref="713branch" data-ref-filename="713branch">branch</dfn>;</td></tr>
<tr><th id="8084">8084</th><td></td></tr>
<tr><th id="8085">8085</th><td>    <i>/* Previously, this function used a recursive implementation, but</i></td></tr>
<tr><th id="8086">8086</th><td><i>       if the trunk has a huge number of revisions and the program</i></td></tr>
<tr><th id="8087">8087</th><td><i>       stack is not big, a stack overflow could occur, so this</i></td></tr>
<tr><th id="8088">8088</th><td><i>       nonrecursive version was developed to be more safe. */</i></td></tr>
<tr><th id="8089">8089</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col4 decl" id="714branchlist" title='branchlist' data-type='Node *' data-ref="714branchlist" data-ref-filename="714branchlist">branchlist</dfn>, *<dfn class="local col5 decl" id="715onebranch" title='onebranch' data-type='Node *' data-ref="715onebranch" data-ref-filename="715onebranch">onebranch</dfn>;</td></tr>
<tr><th id="8090">8090</th><td>    <a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> *<dfn class="local col6 decl" id="716branches" title='branches' data-type='List *' data-ref="716branches" data-ref-filename="716branches">branches</dfn>;</td></tr>
<tr><th id="8091">8091</th><td>    <a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> *<dfn class="local col7 decl" id="717onebranchlist" title='onebranchlist' data-type='List *' data-ref="717onebranchlist" data-ref-filename="717onebranchlist">onebranchlist</dfn>;</td></tr>
<tr><th id="8092">8092</th><td></td></tr>
<tr><th id="8093">8093</th><td>    <b>if</b> (<a class="local col9 ref" href="#709rev" title='rev' data-ref="709rev" data-ref-filename="709rev">rev</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8094">8094</th><td>	<b>return</b>;</td></tr>
<tr><th id="8095">8095</th><td></td></tr>
<tr><th id="8096">8096</th><td>    <a class="local col6 ref" href="#716branches" title='branches' data-ref="716branches" data-ref-filename="716branches">branches</a> = <a class="ref fn" href="hash.h.html#getlist" title='getlist' data-ref="getlist" data-ref-filename="getlist">getlist</a>();</td></tr>
<tr><th id="8097">8097</th><td></td></tr>
<tr><th id="8098">8098</th><td>    <b>for</b> (; <a class="local col9 ref" href="#709rev" title='rev' data-ref="709rev" data-ref-filename="709rev">rev</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;)</td></tr>
<tr><th id="8099">8099</th><td>    {</td></tr>
<tr><th id="8100">8100</th><td>	<i>/* Find the delta node for this revision. */</i></td></tr>
<tr><th id="8101">8101</th><td>	<a class="local col2 ref" href="#712p" title='p' data-ref="712p" data-ref-filename="712p">p</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col8 ref" href="#708rcs" title='rcs' data-ref="708rcs" data-ref-filename="708rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col9 ref" href="#709rev" title='rev' data-ref="709rev" data-ref-filename="709rev">rev</a>);</td></tr>
<tr><th id="8102">8102</th><td>	<b>if</b> (<a class="local col2 ref" href="#712p" title='p' data-ref="712p" data-ref-filename="712p">p</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8103">8103</th><td>	{</td></tr>
<tr><th id="8104">8104</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>,</td></tr>
<tr><th id="8105">8105</th><td>		   <q>"error parsing repository file %s, file may be corrupt."</q>, </td></tr>
<tr><th id="8106">8106</th><td>		   <a class="local col8 ref" href="#708rcs" title='rcs' data-ref="708rcs" data-ref-filename="708rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="8107">8107</th><td>	}</td></tr>
<tr><th id="8108">8108</th><td> </td></tr>
<tr><th id="8109">8109</th><td>	<a class="local col1 ref" href="#711versp" title='versp' data-ref="711versp" data-ref-filename="711versp">versp</a> = <a class="local col2 ref" href="#712p" title='p' data-ref="712p" data-ref-filename="712p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="8110">8110</th><td></td></tr>
<tr><th id="8111">8111</th><td>	<i>/* Print the delta node and go for its `next' node.  This</i></td></tr>
<tr><th id="8112">8112</th><td><i>	   prints the trunk. If there are any branches printed on this</i></td></tr>
<tr><th id="8113">8113</th><td><i>	   revision, mark we have some. */</i></td></tr>
<tr><th id="8114">8114</th><td>	<a class="tu ref fn" href="#putdelta" title='putdelta' data-use='c' data-ref="putdelta" data-ref-filename="putdelta">putdelta</a> (<a class="local col1 ref" href="#711versp" title='versp' data-ref="711versp" data-ref-filename="711versp">versp</a>, <a class="local col0 ref" href="#710fp" title='fp' data-ref="710fp" data-ref-filename="710fp">fp</a>);</td></tr>
<tr><th id="8115">8115</th><td>	<i>/* Store branch information into branch list so to write its</i></td></tr>
<tr><th id="8116">8116</th><td><i>	   trunk afterwards */</i></td></tr>
<tr><th id="8117">8117</th><td>	<b>if</b> (<a class="local col1 ref" href="#711versp" title='versp' data-ref="711versp" data-ref-filename="711versp">versp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8118">8118</th><td>	{</td></tr>
<tr><th id="8119">8119</th><td>	    <a class="local col3 ref" href="#713branch" title='branch' data-ref="713branch" data-ref-filename="713branch">branch</a> = <a class="ref fn" href="hash.h.html#getnode" title='getnode' data-ref="getnode" data-ref-filename="getnode">getnode</a>();</td></tr>
<tr><th id="8120">8120</th><td>	    <a class="local col3 ref" href="#713branch" title='branch' data-ref="713branch" data-ref-filename="713branch">branch</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <a class="local col1 ref" href="#711versp" title='versp' data-ref="711versp" data-ref-filename="711versp">versp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::branches" title='rcsversnode::branches' data-ref="rcsversnode::branches" data-ref-filename="rcsversnode..branches">branches</a>;</td></tr>
<tr><th id="8121">8121</th><td></td></tr>
<tr><th id="8122">8122</th><td>	    <a class="ref fn" href="hash.h.html#addnode" title='addnode' data-ref="addnode" data-ref-filename="addnode">addnode</a>(<a class="local col6 ref" href="#716branches" title='branches' data-ref="716branches" data-ref-filename="716branches">branches</a>, <a class="local col3 ref" href="#713branch" title='branch' data-ref="713branch" data-ref-filename="713branch">branch</a>);</td></tr>
<tr><th id="8123">8123</th><td>	}</td></tr>
<tr><th id="8124">8124</th><td></td></tr>
<tr><th id="8125">8125</th><td>	<a class="local col9 ref" href="#709rev" title='rev' data-ref="709rev" data-ref-filename="709rev">rev</a> = <a class="local col1 ref" href="#711versp" title='versp' data-ref="711versp" data-ref-filename="711versp">versp</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::next" title='rcsversnode::next' data-ref="rcsversnode::next" data-ref-filename="rcsversnode..next">next</a>;</td></tr>
<tr><th id="8126">8126</th><td>    }</td></tr>
<tr><th id="8127">8127</th><td></td></tr>
<tr><th id="8128">8128</th><td>    <i>/* If there are any branches printed on this revision,</i></td></tr>
<tr><th id="8129">8129</th><td><i>       print those trunks as well. */</i></td></tr>
<tr><th id="8130">8130</th><td>    <a class="local col4 ref" href="#714branchlist" title='branchlist' data-ref="714branchlist" data-ref-filename="714branchlist">branchlist</a> = <a class="local col6 ref" href="#716branches" title='branches' data-ref="716branches" data-ref-filename="716branches">branches</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>;</td></tr>
<tr><th id="8131">8131</th><td>    <b>for</b> (<a class="local col3 ref" href="#713branch" title='branch' data-ref="713branch" data-ref-filename="713branch">branch</a> = <a class="local col4 ref" href="#714branchlist" title='branchlist' data-ref="714branchlist" data-ref-filename="714branchlist">branchlist</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>;</td></tr>
<tr><th id="8132">8132</th><td>	 <a class="local col3 ref" href="#713branch" title='branch' data-ref="713branch" data-ref-filename="713branch">branch</a> != <a class="local col4 ref" href="#714branchlist" title='branchlist' data-ref="714branchlist" data-ref-filename="714branchlist">branchlist</a>;</td></tr>
<tr><th id="8133">8133</th><td>	 <a class="local col3 ref" href="#713branch" title='branch' data-ref="713branch" data-ref-filename="713branch">branch</a> = <a class="local col3 ref" href="#713branch" title='branch' data-ref="713branch" data-ref-filename="713branch">branch</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>)</td></tr>
<tr><th id="8134">8134</th><td>    {</td></tr>
<tr><th id="8135">8135</th><td>	<a class="local col7 ref" href="#717onebranchlist" title='onebranchlist' data-ref="717onebranchlist" data-ref-filename="717onebranchlist">onebranchlist</a> = (<a class="typedef" href="hash.h.html#List" title='List' data-type='struct list' data-ref="List" data-ref-filename="List">List</a> *)(<a class="local col3 ref" href="#713branch" title='branch' data-ref="713branch" data-ref-filename="713branch">branch</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>);</td></tr>
<tr><th id="8136">8136</th><td>	<a class="local col5 ref" href="#715onebranch" title='onebranch' data-ref="715onebranch" data-ref-filename="715onebranch">onebranch</a> = <a class="local col7 ref" href="#717onebranchlist" title='onebranchlist' data-ref="717onebranchlist" data-ref-filename="717onebranchlist">onebranchlist</a>-&gt;<a class="ref field" href="hash.h.html#list::list" title='list::list' data-ref="list::list" data-ref-filename="list..list">list</a>;</td></tr>
<tr><th id="8137">8137</th><td>	<b>for</b> (<a class="local col2 ref" href="#712p" title='p' data-ref="712p" data-ref-filename="712p">p</a> = <a class="local col5 ref" href="#715onebranch" title='onebranch' data-ref="715onebranch" data-ref-filename="715onebranch">onebranch</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>; <a class="local col2 ref" href="#712p" title='p' data-ref="712p" data-ref-filename="712p">p</a> != <a class="local col5 ref" href="#715onebranch" title='onebranch' data-ref="715onebranch" data-ref-filename="715onebranch">onebranch</a>; <a class="local col2 ref" href="#712p" title='p' data-ref="712p" data-ref-filename="712p">p</a> = <a class="local col2 ref" href="#712p" title='p' data-ref="712p" data-ref-filename="712p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::next" title='node::next' data-ref="node::next" data-ref-filename="node..next">next</a>)</td></tr>
<tr><th id="8138">8138</th><td>	    <a class="tu ref fn" href="#RCS_putdtree" title='RCS_putdtree' data-use='c' data-ref="RCS_putdtree" data-ref-filename="RCS_putdtree">RCS_putdtree</a> (<a class="local col8 ref" href="#708rcs" title='rcs' data-ref="708rcs" data-ref-filename="708rcs">rcs</a>, <a class="local col2 ref" href="#712p" title='p' data-ref="712p" data-ref-filename="712p">p</a>-&gt;<a class="ref field" href="hash.h.html#node::key" title='node::key' data-ref="node::key" data-ref-filename="node..key">key</a>, <a class="local col0 ref" href="#710fp" title='fp' data-ref="710fp" data-ref-filename="710fp">fp</a>);</td></tr>
<tr><th id="8139">8139</th><td></td></tr>
<tr><th id="8140">8140</th><td>	<a class="local col3 ref" href="#713branch" title='branch' data-ref="713branch" data-ref-filename="713branch">branch</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>; <i>/* so to prevent its freeing on dellist */</i></td></tr>
<tr><th id="8141">8141</th><td>    }</td></tr>
<tr><th id="8142">8142</th><td></td></tr>
<tr><th id="8143">8143</th><td>    <a class="ref fn" href="hash.h.html#dellist" title='dellist' data-ref="dellist" data-ref-filename="dellist">dellist</a>(&amp;<a class="local col6 ref" href="#716branches" title='branches' data-ref="716branches" data-ref-filename="716branches">branches</a>);</td></tr>
<tr><th id="8144">8144</th><td>}</td></tr>
<tr><th id="8145">8145</th><td></td></tr>
<tr><th id="8146">8146</th><td></td></tr>
<tr><th id="8147">8147</th><td></td></tr>
<tr><th id="8148">8148</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="8149">8149</th><td><dfn class="tu decl def fn" id="RCS_putdesc" title='RCS_putdesc' data-type='void RCS_putdesc(RCSNode * rcs, FILE * fp)' data-ref="RCS_putdesc" data-ref-filename="RCS_putdesc">RCS_putdesc</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col8 decl" id="718rcs" title='rcs' data-type='RCSNode *' data-ref="718rcs" data-ref-filename="718rcs">rcs</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col9 decl" id="719fp" title='fp' data-type='FILE *' data-ref="719fp" data-ref-filename="719fp">fp</dfn>)</td></tr>
<tr><th id="8150">8150</th><td>{</td></tr>
<tr><th id="8151">8151</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf" data-ref-filename="fprintf">fprintf</a> (<a class="local col9 ref" href="#719fp" title='fp' data-ref="719fp" data-ref-filename="719fp">fp</a>, <q>"\n\n%s\n@"</q>, <a class="macro" href="rcs.h.html#27" title="&quot;desc&quot;" data-ref="_M/RCSDESC">RCSDESC</a>);</td></tr>
<tr><th id="8152">8152</th><td>    <b>if</b> (<a class="local col8 ref" href="#718rcs" title='rcs' data-ref="718rcs" data-ref-filename="718rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::desc" title='rcsnode::desc' data-ref="rcsnode::desc" data-ref-filename="rcsnode..desc">desc</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8153">8153</th><td>    {</td></tr>
<tr><th id="8154">8154</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#178" title="__off_t" data-ref="_M/off_t">off_t</a> <dfn class="local col0 decl" id="720len" title='len' data-type='__off_t' data-ref="720len" data-ref-filename="720len">len</dfn> = (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#178" title="__off_t" data-ref="_M/off_t">off_t</a>) <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col8 ref" href="#718rcs" title='rcs' data-ref="718rcs" data-ref-filename="718rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::desc" title='rcsnode::desc' data-ref="rcsnode::desc" data-ref-filename="rcsnode..desc">desc</a>);</td></tr>
<tr><th id="8155">8155</th><td>	<b>if</b> (<a class="local col0 ref" href="#720len" title='len' data-ref="720len" data-ref-filename="720len">len</a> &gt; <var>0</var>)</td></tr>
<tr><th id="8156">8156</th><td>	{</td></tr>
<tr><th id="8157">8157</th><td>	    <a class="ref fn" href="cvs.h.html#expand_at_signs" title='expand_at_signs' data-ref="expand_at_signs" data-ref-filename="expand_at_signs">expand_at_signs</a> (<a class="local col8 ref" href="#718rcs" title='rcs' data-ref="718rcs" data-ref-filename="718rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::desc" title='rcsnode::desc' data-ref="rcsnode::desc" data-ref-filename="rcsnode..desc">desc</a>, <a class="local col0 ref" href="#720len" title='len' data-ref="720len" data-ref-filename="720len">len</a>, <a class="local col9 ref" href="#719fp" title='fp' data-ref="719fp" data-ref-filename="719fp">fp</a>);</td></tr>
<tr><th id="8158">8158</th><td>	    <b>if</b> (<a class="local col8 ref" href="#718rcs" title='rcs' data-ref="718rcs" data-ref-filename="718rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::desc" title='rcsnode::desc' data-ref="rcsnode::desc" data-ref-filename="rcsnode..desc">desc</a>[<a class="local col0 ref" href="#720len" title='len' data-ref="720len" data-ref-filename="720len">len</a>-<var>1</var>] != <kbd>'\n'</kbd>)</td></tr>
<tr><th id="8159">8159</th><td>		<a class="macro" href="../lib/unlocked-io.h.html#116" title="__sputc(&apos;\n&apos;, fp)" data-ref="_M/putc">putc</a> (<kbd>'\n'</kbd>, <a class="local col9 ref" href="#719fp" title='fp' data-ref="719fp" data-ref-filename="719fp">fp</a>);</td></tr>
<tr><th id="8160">8160</th><td>	}</td></tr>
<tr><th id="8161">8161</th><td>    }</td></tr>
<tr><th id="8162">8162</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<q>"@\n"</q>, <a class="local col9 ref" href="#719fp" title='fp' data-ref="719fp" data-ref-filename="719fp">fp</a>);</td></tr>
<tr><th id="8163">8163</th><td>}</td></tr>
<tr><th id="8164">8164</th><td></td></tr>
<tr><th id="8165">8165</th><td></td></tr>
<tr><th id="8166">8166</th><td></td></tr>
<tr><th id="8167">8167</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="8168">8168</th><td><dfn class="tu decl def fn" id="putdeltatext" title='putdeltatext' data-type='void putdeltatext(FILE * fp, Deltatext * d)' data-ref="putdeltatext" data-ref-filename="putdeltatext">putdeltatext</dfn> (<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col1 decl" id="721fp" title='fp' data-type='FILE *' data-ref="721fp" data-ref-filename="721fp">fp</dfn>, <a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a> *<dfn class="local col2 decl" id="722d" title='d' data-type='Deltatext *' data-ref="722d" data-ref-filename="722d">d</dfn>)</td></tr>
<tr><th id="8169">8169</th><td>{</td></tr>
<tr><th id="8170">8170</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fprintf" title='fprintf' data-ref="fprintf" data-ref-filename="fprintf">fprintf</a> (<a class="local col1 ref" href="#721fp" title='fp' data-ref="721fp" data-ref-filename="721fp">fp</a>, <q>"\n\n%s\nlog\n@"</q>, <a class="local col2 ref" href="#722d" title='d' data-ref="722d" data-ref-filename="722d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::version" title='deltatext::version' data-ref="deltatext::version" data-ref-filename="deltatext..version">version</a>);</td></tr>
<tr><th id="8171">8171</th><td>    <b>if</b> (<a class="local col2 ref" href="#722d" title='d' data-ref="722d" data-ref-filename="722d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8172">8172</th><td>    {</td></tr>
<tr><th id="8173">8173</th><td>	<em>int</em> <dfn class="local col3 decl" id="723loglen" title='loglen' data-type='int' data-ref="723loglen" data-ref-filename="723loglen">loglen</dfn> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col2 ref" href="#722d" title='d' data-ref="722d" data-ref-filename="722d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a>);</td></tr>
<tr><th id="8174">8174</th><td>	<a class="ref fn" href="cvs.h.html#expand_at_signs" title='expand_at_signs' data-ref="expand_at_signs" data-ref-filename="expand_at_signs">expand_at_signs</a> (<a class="local col2 ref" href="#722d" title='d' data-ref="722d" data-ref-filename="722d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a>, (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#178" title="__off_t" data-ref="_M/off_t">off_t</a>) <a class="local col3 ref" href="#723loglen" title='loglen' data-ref="723loglen" data-ref-filename="723loglen">loglen</a>, <a class="local col1 ref" href="#721fp" title='fp' data-ref="721fp" data-ref-filename="721fp">fp</a>);</td></tr>
<tr><th id="8175">8175</th><td>	<b>if</b> (<a class="local col2 ref" href="#722d" title='d' data-ref="722d" data-ref-filename="722d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a>[<a class="local col3 ref" href="#723loglen" title='loglen' data-ref="723loglen" data-ref-filename="723loglen">loglen</a>-<var>1</var>] != <kbd>'\n'</kbd>)</td></tr>
<tr><th id="8176">8176</th><td>	    <a class="macro" href="../lib/unlocked-io.h.html#116" title="__sputc(&apos;\n&apos;, fp)" data-ref="_M/putc">putc</a> (<kbd>'\n'</kbd>, <a class="local col1 ref" href="#721fp" title='fp' data-ref="721fp" data-ref-filename="721fp">fp</a>);</td></tr>
<tr><th id="8177">8177</th><td>    }</td></tr>
<tr><th id="8178">8178</th><td>    <a class="macro" href="../lib/unlocked-io.h.html#116" title="__sputc(&apos;@&apos;, fp)" data-ref="_M/putc">putc</a> (<kbd>'@'</kbd>, <a class="local col1 ref" href="#721fp" title='fp' data-ref="721fp" data-ref-filename="721fp">fp</a>);</td></tr>
<tr><th id="8179">8179</th><td></td></tr>
<tr><th id="8180">8180</th><td>    <a class="ref fn" href="hash.h.html#walklist" title='walklist' data-ref="walklist" data-ref-filename="walklist">walklist</a> (<a class="local col2 ref" href="#722d" title='d' data-ref="722d" data-ref-filename="722d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::other" title='deltatext::other' data-ref="deltatext::other" data-ref-filename="deltatext..other">other</a>, <a class="tu ref fn" href="#putrcsfield_proc" title='putrcsfield_proc' data-use='r' data-ref="putrcsfield_proc" data-ref-filename="putrcsfield_proc">putrcsfield_proc</a>, <a class="local col1 ref" href="#721fp" title='fp' data-ref="721fp" data-ref-filename="721fp">fp</a>);</td></tr>
<tr><th id="8181">8181</th><td></td></tr>
<tr><th id="8182">8182</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<q>"\ntext\n@"</q>, <a class="local col1 ref" href="#721fp" title='fp' data-ref="721fp" data-ref-filename="721fp">fp</a>);</td></tr>
<tr><th id="8183">8183</th><td>    <b>if</b> (<a class="local col2 ref" href="#722d" title='d' data-ref="722d" data-ref-filename="722d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8184">8184</th><td>	<a class="ref fn" href="cvs.h.html#expand_at_signs" title='expand_at_signs' data-ref="expand_at_signs" data-ref-filename="expand_at_signs">expand_at_signs</a> (<a class="local col2 ref" href="#722d" title='d' data-ref="722d" data-ref-filename="722d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a>, (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#178" title="__off_t" data-ref="_M/off_t">off_t</a>) <a class="local col2 ref" href="#722d" title='d' data-ref="722d" data-ref-filename="722d">d</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::len" title='deltatext::len' data-ref="deltatext::len" data-ref-filename="deltatext..len">len</a>, <a class="local col1 ref" href="#721fp" title='fp' data-ref="721fp" data-ref-filename="721fp">fp</a>);</td></tr>
<tr><th id="8185">8185</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fputs" title='fputs' data-ref="fputs" data-ref-filename="fputs">fputs</a> (<q>"@\n"</q>, <a class="local col1 ref" href="#721fp" title='fp' data-ref="721fp" data-ref-filename="721fp">fp</a>);</td></tr>
<tr><th id="8186">8186</th><td>}</td></tr>
<tr><th id="8187">8187</th><td></td></tr>
<tr><th id="8188">8188</th><td></td></tr>
<tr><th id="8189">8189</th><td></td></tr>
<tr><th id="8190">8190</th><td><i>/* TODO: the whole mechanism for updating deltas is kludgey... more</i></td></tr>
<tr><th id="8191">8191</th><td><i>   sensible would be to supply all the necessary info in a `newdeltatext'</i></td></tr>
<tr><th id="8192">8192</th><td><i>   field for RCSVers nodes. -twp */</i></td></tr>
<tr><th id="8193">8193</th><td></td></tr>
<tr><th id="8194">8194</th><td><i  data-doc="RCS_copydeltas">/* Copy delta text nodes from FIN to FOUT.  If NEWDTEXT is non-NULL, it</i></td></tr>
<tr><th id="8195">8195</th><td><i  data-doc="RCS_copydeltas">   is a new delta text node, and should be added to the tree at the</i></td></tr>
<tr><th id="8196">8196</th><td><i  data-doc="RCS_copydeltas">   node whose revision number is INSERTPT.  (Note that trunk nodes are</i></td></tr>
<tr><th id="8197">8197</th><td><i  data-doc="RCS_copydeltas">   written in decreasing order, and branch nodes are written in</i></td></tr>
<tr><th id="8198">8198</th><td><i  data-doc="RCS_copydeltas">   increasing order.) */</i></td></tr>
<tr><th id="8199">8199</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="8200">8200</th><td><dfn class="tu decl def fn" id="RCS_copydeltas" title='RCS_copydeltas' data-type='void RCS_copydeltas(RCSNode * rcs, FILE * fin, struct rcsbuffer * rcsbufin, FILE * fout, Deltatext * newdtext, char * insertpt)' data-ref="RCS_copydeltas" data-ref-filename="RCS_copydeltas">RCS_copydeltas</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col4 decl" id="724rcs" title='rcs' data-type='RCSNode *' data-ref="724rcs" data-ref-filename="724rcs">rcs</dfn>, <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col5 decl" id="725fin" title='fin' data-type='FILE *' data-ref="725fin" data-ref-filename="725fin">fin</dfn>, <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> *<dfn class="local col6 decl" id="726rcsbufin" title='rcsbufin' data-type='struct rcsbuffer *' data-ref="726rcsbufin" data-ref-filename="726rcsbufin">rcsbufin</dfn>,</td></tr>
<tr><th id="8201">8201</th><td>		<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col7 decl" id="727fout" title='fout' data-type='FILE *' data-ref="727fout" data-ref-filename="727fout">fout</dfn>, <a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a> *<dfn class="local col8 decl" id="728newdtext" title='newdtext' data-type='Deltatext *' data-ref="728newdtext" data-ref-filename="728newdtext">newdtext</dfn>, <em>char</em> *<dfn class="local col9 decl" id="729insertpt" title='insertpt' data-type='char *' data-ref="729insertpt" data-ref-filename="729insertpt">insertpt</dfn>)</td></tr>
<tr><th id="8202">8202</th><td>{</td></tr>
<tr><th id="8203">8203</th><td>    <em>int</em> <dfn class="local col0 decl" id="730actions" title='actions' data-type='int' data-ref="730actions" data-ref-filename="730actions">actions</dfn>;</td></tr>
<tr><th id="8204">8204</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col1 decl" id="731dadmin" title='dadmin' data-type='RCSVers *' data-ref="731dadmin" data-ref-filename="731dadmin">dadmin</dfn>;</td></tr>
<tr><th id="8205">8205</th><td>    <a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col2 decl" id="732np" title='np' data-type='Node *' data-ref="732np" data-ref-filename="732np">np</dfn>;</td></tr>
<tr><th id="8206">8206</th><td>    <em>int</em> <dfn class="local col3 decl" id="733insertbefore" title='insertbefore' data-type='int' data-ref="733insertbefore" data-ref-filename="733insertbefore">insertbefore</dfn>, <dfn class="local col4 decl" id="734found" title='found' data-type='int' data-ref="734found" data-ref-filename="734found">found</dfn>;</td></tr>
<tr><th id="8207">8207</th><td>    <em>char</em> *<dfn class="local col5 decl" id="735bufrest" title='bufrest' data-type='char *' data-ref="735bufrest" data-ref-filename="735bufrest">bufrest</dfn>;</td></tr>
<tr><th id="8208">8208</th><td>    <em>int</em> <dfn class="local col6 decl" id="736nls" title='nls' data-type='int' data-ref="736nls" data-ref-filename="736nls">nls</dfn>;</td></tr>
<tr><th id="8209">8209</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col7 decl" id="737buflen" title='buflen' data-type='size_t' data-ref="737buflen" data-ref-filename="737buflen">buflen</dfn>;</td></tr>
<tr><th id="8210">8210</th><td><u>#<span data-ppcond="8210">ifndef</span> <a class="macro" href="../../include/config.h.html#498" data-ref="_M/HAVE_MMAP">HAVE_MMAP</a></u></td></tr>
<tr><th id="8211">8211</th><td>    <em>char</em> buf[<var>8192</var>];</td></tr>
<tr><th id="8212">8212</th><td>    <em>int</em> got;</td></tr>
<tr><th id="8213">8213</th><td><u>#<span data-ppcond="8210">endif</span></u></td></tr>
<tr><th id="8214">8214</th><td></td></tr>
<tr><th id="8215">8215</th><td>    <i>/* Count the number of versions for which we have to do some</i></td></tr>
<tr><th id="8216">8216</th><td><i>       special operation.  */</i></td></tr>
<tr><th id="8217">8217</th><td>    <a class="local col0 ref" href="#730actions" title='actions' data-ref="730actions" data-ref-filename="730actions">actions</a> = <a class="ref fn" href="hash.h.html#walklist" title='walklist' data-ref="walklist" data-ref-filename="walklist">walklist</a> (<a class="local col4 ref" href="#724rcs" title='rcs' data-ref="724rcs" data-ref-filename="724rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="tu ref fn" href="#count_delta_actions" title='count_delta_actions' data-use='r' data-ref="count_delta_actions" data-ref-filename="count_delta_actions">count_delta_actions</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="8218">8218</th><td></td></tr>
<tr><th id="8219">8219</th><td>    <i>/* Make a note of whether NEWDTEXT should be inserted</i></td></tr>
<tr><th id="8220">8220</th><td><i>       before or after its INSERTPT. */</i></td></tr>
<tr><th id="8221">8221</th><td>    <a class="local col3 ref" href="#733insertbefore" title='insertbefore' data-ref="733insertbefore" data-ref-filename="733insertbefore">insertbefore</a> = (<a class="local col8 ref" href="#728newdtext" title='newdtext' data-ref="728newdtext" data-ref-filename="728newdtext">newdtext</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="ref fn" href="subr.h.html#numdots" title='numdots' data-ref="numdots" data-ref-filename="numdots">numdots</a> (<a class="local col8 ref" href="#728newdtext" title='newdtext' data-ref="728newdtext" data-ref-filename="728newdtext">newdtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::version" title='deltatext::version' data-ref="deltatext::version" data-ref-filename="deltatext..version">version</a>) == <var>1</var>);</td></tr>
<tr><th id="8222">8222</th><td></td></tr>
<tr><th id="8223">8223</th><td>    <b>while</b> (<a class="local col0 ref" href="#730actions" title='actions' data-ref="730actions" data-ref-filename="730actions">actions</a> != <var>0</var> || <a class="local col8 ref" href="#728newdtext" title='newdtext' data-ref="728newdtext" data-ref-filename="728newdtext">newdtext</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8224">8224</th><td>    {</td></tr>
<tr><th id="8225">8225</th><td>	<a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a> *<dfn class="local col8 decl" id="738dtext" title='dtext' data-type='Deltatext *' data-ref="738dtext" data-ref-filename="738dtext">dtext</dfn>;</td></tr>
<tr><th id="8226">8226</th><td></td></tr>
<tr><th id="8227">8227</th><td>	<a class="local col8 ref" href="#738dtext" title='dtext' data-ref="738dtext" data-ref-filename="738dtext">dtext</a> = <a class="tu ref fn" href="#RCS_getdeltatext" title='RCS_getdeltatext' data-use='c' data-ref="RCS_getdeltatext" data-ref-filename="RCS_getdeltatext">RCS_getdeltatext</a> (<a class="local col4 ref" href="#724rcs" title='rcs' data-ref="724rcs" data-ref-filename="724rcs">rcs</a>, <a class="local col5 ref" href="#725fin" title='fin' data-ref="725fin" data-ref-filename="725fin">fin</a>, <a class="local col6 ref" href="#726rcsbufin" title='rcsbufin' data-ref="726rcsbufin" data-ref-filename="726rcsbufin">rcsbufin</a>);</td></tr>
<tr><th id="8228">8228</th><td></td></tr>
<tr><th id="8229">8229</th><td>	<i>/* We shouldn't hit EOF here, because that would imply that</i></td></tr>
<tr><th id="8230">8230</th><td><i>           some action was not taken, or that we could not insert</i></td></tr>
<tr><th id="8231">8231</th><td><i>           NEWDTEXT.  */</i></td></tr>
<tr><th id="8232">8232</th><td>	<b>if</b> (<a class="local col8 ref" href="#738dtext" title='dtext' data-ref="738dtext" data-ref-filename="738dtext">dtext</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8233">8233</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <var>0</var>, <q>"internal error: EOF too early in RCS_copydeltas"</q>);</td></tr>
<tr><th id="8234">8234</th><td></td></tr>
<tr><th id="8235">8235</th><td>	<a class="local col4 ref" href="#734found" title='found' data-ref="734found" data-ref-filename="734found">found</a> = (<a class="local col9 ref" href="#729insertpt" title='insertpt' data-ref="729insertpt" data-ref-filename="729insertpt">insertpt</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="macro" href="#138" title="(*(char *)(dtext-&gt;version) == *(char *)(insertpt) &amp;&amp; strcmp ((dtext-&gt;version), (insertpt)) == 0)" data-ref="_M/STREQ">STREQ</a> (<a class="local col8 ref" href="#738dtext" title='dtext' data-ref="738dtext" data-ref-filename="738dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::version" title='deltatext::version' data-ref="deltatext::version" data-ref-filename="deltatext..version">version</a>, <a class="local col9 ref" href="#729insertpt" title='insertpt' data-ref="729insertpt" data-ref-filename="729insertpt">insertpt</a>));</td></tr>
<tr><th id="8236">8236</th><td>	<b>if</b> (<a class="local col4 ref" href="#734found" title='found' data-ref="734found" data-ref-filename="734found">found</a> &amp;&amp; <a class="local col3 ref" href="#733insertbefore" title='insertbefore' data-ref="733insertbefore" data-ref-filename="733insertbefore">insertbefore</a>)</td></tr>
<tr><th id="8237">8237</th><td>	{</td></tr>
<tr><th id="8238">8238</th><td>	    <a class="tu ref fn" href="#putdeltatext" title='putdeltatext' data-use='c' data-ref="putdeltatext" data-ref-filename="putdeltatext">putdeltatext</a> (<a class="local col7 ref" href="#727fout" title='fout' data-ref="727fout" data-ref-filename="727fout">fout</a>, <a class="local col8 ref" href="#728newdtext" title='newdtext' data-ref="728newdtext" data-ref-filename="728newdtext">newdtext</a>);</td></tr>
<tr><th id="8239">8239</th><td>	    <a class="local col8 ref" href="#728newdtext" title='newdtext' data-ref="728newdtext" data-ref-filename="728newdtext">newdtext</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8240">8240</th><td>	    <a class="local col9 ref" href="#729insertpt" title='insertpt' data-ref="729insertpt" data-ref-filename="729insertpt">insertpt</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8241">8241</th><td>	}</td></tr>
<tr><th id="8242">8242</th><td></td></tr>
<tr><th id="8243">8243</th><td>	<a class="local col2 ref" href="#732np" title='np' data-ref="732np" data-ref-filename="732np">np</a> = <a class="ref fn" href="hash.h.html#findnode" title='findnode' data-ref="findnode" data-ref-filename="findnode">findnode</a> (<a class="local col4 ref" href="#724rcs" title='rcs' data-ref="724rcs" data-ref-filename="724rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::versions" title='rcsnode::versions' data-ref="rcsnode::versions" data-ref-filename="rcsnode..versions">versions</a>, <a class="local col8 ref" href="#738dtext" title='dtext' data-ref="738dtext" data-ref-filename="738dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::version" title='deltatext::version' data-ref="deltatext::version" data-ref-filename="deltatext..version">version</a>);</td></tr>
<tr><th id="8244">8244</th><td>	<a class="local col1 ref" href="#731dadmin" title='dadmin' data-ref="731dadmin" data-ref-filename="731dadmin">dadmin</a> = <a class="local col2 ref" href="#732np" title='np' data-ref="732np" data-ref-filename="732np">np</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="8245">8245</th><td></td></tr>
<tr><th id="8246">8246</th><td>	<i>/* If this revision has been outdated, just skip it. */</i></td></tr>
<tr><th id="8247">8247</th><td>	<b>if</b> (<a class="local col1 ref" href="#731dadmin" title='dadmin' data-ref="731dadmin" data-ref-filename="731dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::outdated" title='rcsversnode::outdated' data-ref="rcsversnode::outdated" data-ref-filename="rcsversnode..outdated">outdated</a>)</td></tr>
<tr><th id="8248">8248</th><td>	{</td></tr>
<tr><th id="8249">8249</th><td>	    <a class="tu ref fn" href="#freedeltatext" title='freedeltatext' data-use='c' data-ref="freedeltatext" data-ref-filename="freedeltatext">freedeltatext</a> (<a class="local col8 ref" href="#738dtext" title='dtext' data-ref="738dtext" data-ref-filename="738dtext">dtext</a>);</td></tr>
<tr><th id="8250">8250</th><td>	    --<a class="local col0 ref" href="#730actions" title='actions' data-ref="730actions" data-ref-filename="730actions">actions</a>;</td></tr>
<tr><th id="8251">8251</th><td>	    <b>continue</b>;</td></tr>
<tr><th id="8252">8252</th><td>	}</td></tr>
<tr><th id="8253">8253</th><td>	   </td></tr>
<tr><th id="8254">8254</th><td>	<i>/* Update the change text for this delta.  New change text</i></td></tr>
<tr><th id="8255">8255</th><td><i>	   data may come from cvs admin -m, cvs admin -o, or cvs ci. */</i></td></tr>
<tr><th id="8256">8256</th><td>	<b>if</b> (<a class="local col1 ref" href="#731dadmin" title='dadmin' data-ref="731dadmin" data-ref-filename="731dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8257">8257</th><td>	{</td></tr>
<tr><th id="8258">8258</th><td>	    <b>if</b> (<a class="local col1 ref" href="#731dadmin" title='dadmin' data-ref="731dadmin" data-ref-filename="731dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || <a class="local col1 ref" href="#731dadmin" title='dadmin' data-ref="731dadmin" data-ref-filename="731dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8259">8259</th><td>		--<a class="local col0 ref" href="#730actions" title='actions' data-ref="730actions" data-ref-filename="730actions">actions</a>;</td></tr>
<tr><th id="8260">8260</th><td>	    <b>if</b> (<a class="local col1 ref" href="#731dadmin" title='dadmin' data-ref="731dadmin" data-ref-filename="731dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8261">8261</th><td>	    {</td></tr>
<tr><th id="8262">8262</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#738dtext" title='dtext' data-ref="738dtext" data-ref-filename="738dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a>);</td></tr>
<tr><th id="8263">8263</th><td>		<a class="local col8 ref" href="#738dtext" title='dtext' data-ref="738dtext" data-ref-filename="738dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a> = <a class="local col1 ref" href="#731dadmin" title='dadmin' data-ref="731dadmin" data-ref-filename="731dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a>;</td></tr>
<tr><th id="8264">8264</th><td>		<a class="local col1 ref" href="#731dadmin" title='dadmin' data-ref="731dadmin" data-ref-filename="731dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8265">8265</th><td>	    }</td></tr>
<tr><th id="8266">8266</th><td>	    <b>if</b> (<a class="local col1 ref" href="#731dadmin" title='dadmin' data-ref="731dadmin" data-ref-filename="731dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8267">8267</th><td>	    {</td></tr>
<tr><th id="8268">8268</th><td>		<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col8 ref" href="#738dtext" title='dtext' data-ref="738dtext" data-ref-filename="738dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a>);</td></tr>
<tr><th id="8269">8269</th><td>		<a class="local col8 ref" href="#738dtext" title='dtext' data-ref="738dtext" data-ref-filename="738dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> = <a class="local col1 ref" href="#731dadmin" title='dadmin' data-ref="731dadmin" data-ref-filename="731dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a>;</td></tr>
<tr><th id="8270">8270</th><td>		<a class="local col8 ref" href="#738dtext" title='dtext' data-ref="738dtext" data-ref-filename="738dtext">dtext</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::len" title='deltatext::len' data-ref="deltatext::len" data-ref-filename="deltatext..len">len</a> = <a class="local col1 ref" href="#731dadmin" title='dadmin' data-ref="731dadmin" data-ref-filename="731dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::len" title='deltatext::len' data-ref="deltatext::len" data-ref-filename="deltatext..len">len</a>;</td></tr>
<tr><th id="8271">8271</th><td>		<a class="local col1 ref" href="#731dadmin" title='dadmin' data-ref="731dadmin" data-ref-filename="731dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8272">8272</th><td>	    }</td></tr>
<tr><th id="8273">8273</th><td>	}</td></tr>
<tr><th id="8274">8274</th><td>	<a class="tu ref fn" href="#putdeltatext" title='putdeltatext' data-use='c' data-ref="putdeltatext" data-ref-filename="putdeltatext">putdeltatext</a> (<a class="local col7 ref" href="#727fout" title='fout' data-ref="727fout" data-ref-filename="727fout">fout</a>, <a class="local col8 ref" href="#738dtext" title='dtext' data-ref="738dtext" data-ref-filename="738dtext">dtext</a>);</td></tr>
<tr><th id="8275">8275</th><td>	<a class="tu ref fn" href="#freedeltatext" title='freedeltatext' data-use='c' data-ref="freedeltatext" data-ref-filename="freedeltatext">freedeltatext</a> (<a class="local col8 ref" href="#738dtext" title='dtext' data-ref="738dtext" data-ref-filename="738dtext">dtext</a>);</td></tr>
<tr><th id="8276">8276</th><td></td></tr>
<tr><th id="8277">8277</th><td>	<b>if</b> (<a class="local col4 ref" href="#734found" title='found' data-ref="734found" data-ref-filename="734found">found</a> &amp;&amp; !<a class="local col3 ref" href="#733insertbefore" title='insertbefore' data-ref="733insertbefore" data-ref-filename="733insertbefore">insertbefore</a>)</td></tr>
<tr><th id="8278">8278</th><td>	{</td></tr>
<tr><th id="8279">8279</th><td>	    <a class="tu ref fn" href="#putdeltatext" title='putdeltatext' data-use='c' data-ref="putdeltatext" data-ref-filename="putdeltatext">putdeltatext</a> (<a class="local col7 ref" href="#727fout" title='fout' data-ref="727fout" data-ref-filename="727fout">fout</a>, <a class="local col8 ref" href="#728newdtext" title='newdtext' data-ref="728newdtext" data-ref-filename="728newdtext">newdtext</a>);</td></tr>
<tr><th id="8280">8280</th><td>	    <a class="local col8 ref" href="#728newdtext" title='newdtext' data-ref="728newdtext" data-ref-filename="728newdtext">newdtext</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8281">8281</th><td>	    <a class="local col9 ref" href="#729insertpt" title='insertpt' data-ref="729insertpt" data-ref-filename="729insertpt">insertpt</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8282">8282</th><td>	}</td></tr>
<tr><th id="8283">8283</th><td>    }</td></tr>
<tr><th id="8284">8284</th><td></td></tr>
<tr><th id="8285">8285</th><td>    <i>/* Copy the rest of the file directly, without bothering to</i></td></tr>
<tr><th id="8286">8286</th><td><i>       interpret it.  The caller will handle error checking by calling</i></td></tr>
<tr><th id="8287">8287</th><td><i>       ferror.</i></td></tr>
<tr><th id="8288">8288</th><td><i></i></td></tr>
<tr><th id="8289">8289</th><td><i>       We just wrote a newline to the file, either in putdeltatext or</i></td></tr>
<tr><th id="8290">8290</th><td><i>       in the caller.  However, we may not have read the corresponding</i></td></tr>
<tr><th id="8291">8291</th><td><i>       newline from the file, because rcsbuf_getkey returns as soon as</i></td></tr>
<tr><th id="8292">8292</th><td><i>       it finds the end of the '@' string for the desc or text key.</i></td></tr>
<tr><th id="8293">8293</th><td><i>       Therefore, we may read three newlines when we should really</i></td></tr>
<tr><th id="8294">8294</th><td><i>       only write two, and we check for that case here.  This is not</i></td></tr>
<tr><th id="8295">8295</th><td><i>       an semantically important issue; we only do it to make our RCS</i></td></tr>
<tr><th id="8296">8296</th><td><i>       files look traditional.  */</i></td></tr>
<tr><th id="8297">8297</th><td></td></tr>
<tr><th id="8298">8298</th><td>    <a class="local col6 ref" href="#736nls" title='nls' data-ref="736nls" data-ref-filename="736nls">nls</a> = <var>3</var>;</td></tr>
<tr><th id="8299">8299</th><td></td></tr>
<tr><th id="8300">8300</th><td>    <a class="tu ref fn" href="#rcsbuf_get_buffered" title='rcsbuf_get_buffered' data-use='c' data-ref="rcsbuf_get_buffered" data-ref-filename="rcsbuf_get_buffered">rcsbuf_get_buffered</a> (<a class="local col6 ref" href="#726rcsbufin" title='rcsbufin' data-ref="726rcsbufin" data-ref-filename="726rcsbufin">rcsbufin</a>, &amp;<a class="local col5 ref" href="#735bufrest" title='bufrest' data-ref="735bufrest" data-ref-filename="735bufrest">bufrest</a>, &amp;<a class="local col7 ref" href="#737buflen" title='buflen' data-ref="737buflen" data-ref-filename="737buflen">buflen</a>);</td></tr>
<tr><th id="8301">8301</th><td>    <b>if</b> (<a class="local col7 ref" href="#737buflen" title='buflen' data-ref="737buflen" data-ref-filename="737buflen">buflen</a> &gt; <var>0</var>)</td></tr>
<tr><th id="8302">8302</th><td>    {</td></tr>
<tr><th id="8303">8303</th><td>	<b>if</b> (<a class="local col5 ref" href="#735bufrest" title='bufrest' data-ref="735bufrest" data-ref-filename="735bufrest">bufrest</a>[<var>0</var>] != <kbd>'\n'</kbd></td></tr>
<tr><th id="8304">8304</th><td>	    || <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a> (<a class="local col5 ref" href="#735bufrest" title='bufrest' data-ref="735bufrest" data-ref-filename="735bufrest">bufrest</a>, <q>"\n\n\n"</q>, <a class="local col7 ref" href="#737buflen" title='buflen' data-ref="737buflen" data-ref-filename="737buflen">buflen</a> &lt; <var>3</var> ? <a class="local col7 ref" href="#737buflen" title='buflen' data-ref="737buflen" data-ref-filename="737buflen">buflen</a> : <var>3</var>) != <var>0</var>)</td></tr>
<tr><th id="8305">8305</th><td>	{</td></tr>
<tr><th id="8306">8306</th><td>	    <a class="local col6 ref" href="#736nls" title='nls' data-ref="736nls" data-ref-filename="736nls">nls</a> = <var>0</var>;</td></tr>
<tr><th id="8307">8307</th><td>	}</td></tr>
<tr><th id="8308">8308</th><td>	<b>else</b></td></tr>
<tr><th id="8309">8309</th><td>	{</td></tr>
<tr><th id="8310">8310</th><td>	    <b>if</b> (<a class="local col7 ref" href="#737buflen" title='buflen' data-ref="737buflen" data-ref-filename="737buflen">buflen</a> &lt; <var>3</var>)</td></tr>
<tr><th id="8311">8311</th><td>		<a class="local col6 ref" href="#736nls" title='nls' data-ref="736nls" data-ref-filename="736nls">nls</a> -= <a class="local col7 ref" href="#737buflen" title='buflen' data-ref="737buflen" data-ref-filename="737buflen">buflen</a>;</td></tr>
<tr><th id="8312">8312</th><td>	    <b>else</b></td></tr>
<tr><th id="8313">8313</th><td>	    {</td></tr>
<tr><th id="8314">8314</th><td>		++<a class="local col5 ref" href="#735bufrest" title='bufrest' data-ref="735bufrest" data-ref-filename="735bufrest">bufrest</a>;</td></tr>
<tr><th id="8315">8315</th><td>		--<a class="local col7 ref" href="#737buflen" title='buflen' data-ref="737buflen" data-ref-filename="737buflen">buflen</a>;</td></tr>
<tr><th id="8316">8316</th><td>		<a class="local col6 ref" href="#736nls" title='nls' data-ref="736nls" data-ref-filename="736nls">nls</a> = <var>0</var>;</td></tr>
<tr><th id="8317">8317</th><td>	    }</td></tr>
<tr><th id="8318">8318</th><td>	}</td></tr>
<tr><th id="8319">8319</th><td></td></tr>
<tr><th id="8320">8320</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fwrite" title='fwrite' data-ref="fwrite" data-ref-filename="fwrite">fwrite</a> (<a class="local col5 ref" href="#735bufrest" title='bufrest' data-ref="735bufrest" data-ref-filename="735bufrest">bufrest</a>, <var>1</var>, <a class="local col7 ref" href="#737buflen" title='buflen' data-ref="737buflen" data-ref-filename="737buflen">buflen</a>, <a class="local col7 ref" href="#727fout" title='fout' data-ref="727fout" data-ref-filename="727fout">fout</a>);</td></tr>
<tr><th id="8321">8321</th><td>    }</td></tr>
<tr><th id="8322">8322</th><td><u>#<span data-ppcond="8322">ifndef</span> <a class="macro" href="../../include/config.h.html#498" data-ref="_M/HAVE_MMAP">HAVE_MMAP</a></u></td></tr>
<tr><th id="8323">8323</th><td>    <i>/* This bit isn't necessary when using mmap since the entire file</i></td></tr>
<tr><th id="8324">8324</th><td><i>     * will already be available via the RCS buffer.  Besides, the</i></td></tr>
<tr><th id="8325">8325</th><td><i>     * mmap code doesn't always keep the file pointer up to date, so</i></td></tr>
<tr><th id="8326">8326</th><td><i>     * this adds some data twice.</i></td></tr>
<tr><th id="8327">8327</th><td><i>     */</i></td></tr>
<tr><th id="8328">8328</th><td>    <b>while</b> ((got = fread (buf, <var>1</var>, <b>sizeof</b> buf, fin)) != <var>0</var>)</td></tr>
<tr><th id="8329">8329</th><td>    {</td></tr>
<tr><th id="8330">8330</th><td>	<b>if</b> (nls &gt; <var>0</var></td></tr>
<tr><th id="8331">8331</th><td>	    &amp;&amp; got &gt;= nls</td></tr>
<tr><th id="8332">8332</th><td>	    &amp;&amp; buf[<var>0</var>] == <kbd>'\n'</kbd></td></tr>
<tr><th id="8333">8333</th><td>	    &amp;&amp; strncmp (buf, <q>"\n\n\n"</q>, nls) == <var>0</var>)</td></tr>
<tr><th id="8334">8334</th><td>	{</td></tr>
<tr><th id="8335">8335</th><td>	    fwrite (buf + <var>1</var>, <var>1</var>, got - <var>1</var>, fout);</td></tr>
<tr><th id="8336">8336</th><td>	}</td></tr>
<tr><th id="8337">8337</th><td>	<b>else</b></td></tr>
<tr><th id="8338">8338</th><td>	{</td></tr>
<tr><th id="8339">8339</th><td>	    fwrite (buf, <var>1</var>, got, fout);</td></tr>
<tr><th id="8340">8340</th><td>	}</td></tr>
<tr><th id="8341">8341</th><td></td></tr>
<tr><th id="8342">8342</th><td>	nls = <var>0</var>;</td></tr>
<tr><th id="8343">8343</th><td>    }</td></tr>
<tr><th id="8344">8344</th><td><u>#<span data-ppcond="8322">endif</span> /* HAVE_MMAP */</u></td></tr>
<tr><th id="8345">8345</th><td>}</td></tr>
<tr><th id="8346">8346</th><td></td></tr>
<tr><th id="8347">8347</th><td></td></tr>
<tr><th id="8348">8348</th><td></td></tr>
<tr><th id="8349">8349</th><td><i  data-doc="count_delta_actions">/* A helper procedure for RCS_copydeltas.  This is called via walklist</i></td></tr>
<tr><th id="8350">8350</th><td><i  data-doc="count_delta_actions">   to count the number of RCS revisions for which some special action</i></td></tr>
<tr><th id="8351">8351</th><td><i  data-doc="count_delta_actions">   is required.  */</i></td></tr>
<tr><th id="8352">8352</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="8353">8353</th><td><dfn class="tu decl def fn" id="count_delta_actions" title='count_delta_actions' data-type='int count_delta_actions(Node * np, void * ignore)' data-ref="count_delta_actions" data-ref-filename="count_delta_actions">count_delta_actions</dfn> (<a class="typedef" href="hash.h.html#Node" title='Node' data-type='struct node' data-ref="Node" data-ref-filename="Node">Node</a> *<dfn class="local col9 decl" id="739np" title='np' data-type='Node *' data-ref="739np" data-ref-filename="739np">np</dfn>, <em>void</em> *<dfn class="local col0 decl" id="740ignore" title='ignore' data-type='void *' data-ref="740ignore" data-ref-filename="740ignore">ignore</dfn>)</td></tr>
<tr><th id="8354">8354</th><td>{</td></tr>
<tr><th id="8355">8355</th><td>    <a class="typedef" href="rcs.h.html#RCSVers" title='RCSVers' data-type='struct rcsversnode' data-ref="RCSVers" data-ref-filename="RCSVers">RCSVers</a> *<dfn class="local col1 decl" id="741dadmin" title='dadmin' data-type='RCSVers *' data-ref="741dadmin" data-ref-filename="741dadmin">dadmin</dfn> = <a class="local col9 ref" href="#739np" title='np' data-ref="739np" data-ref-filename="739np">np</a>-&gt;<a class="ref field" href="hash.h.html#node::data" title='node::data' data-ref="node::data" data-ref-filename="node..data">data</a>;</td></tr>
<tr><th id="8356">8356</th><td></td></tr>
<tr><th id="8357">8357</th><td>    <b>if</b> (<a class="local col1 ref" href="#741dadmin" title='dadmin' data-ref="741dadmin" data-ref-filename="741dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::outdated" title='rcsversnode::outdated' data-ref="rcsversnode::outdated" data-ref-filename="rcsversnode..outdated">outdated</a>)</td></tr>
<tr><th id="8358">8358</th><td>	<b>return</b> <var>1</var>;</td></tr>
<tr><th id="8359">8359</th><td></td></tr>
<tr><th id="8360">8360</th><td>    <b>if</b> (<a class="local col1 ref" href="#741dadmin" title='dadmin' data-ref="741dadmin" data-ref-filename="741dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span></td></tr>
<tr><th id="8361">8361</th><td>	&amp;&amp; (<a class="local col1 ref" href="#741dadmin" title='dadmin' data-ref="741dadmin" data-ref-filename="741dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::log" title='deltatext::log' data-ref="deltatext::log" data-ref-filename="deltatext..log">log</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || <a class="local col1 ref" href="#741dadmin" title='dadmin' data-ref="741dadmin" data-ref-filename="741dadmin">dadmin</a>-&gt;<a class="ref field" href="rcs.h.html#rcsversnode::text" title='rcsversnode::text' data-ref="rcsversnode::text" data-ref-filename="rcsversnode..text">text</a>-&gt;<a class="ref field" href="rcs.h.html#deltatext::text" title='deltatext::text' data-ref="deltatext::text" data-ref-filename="deltatext..text">text</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>))</td></tr>
<tr><th id="8362">8362</th><td>    {</td></tr>
<tr><th id="8363">8363</th><td>	<b>return</b> <var>1</var>;</td></tr>
<tr><th id="8364">8364</th><td>    }</td></tr>
<tr><th id="8365">8365</th><td></td></tr>
<tr><th id="8366">8366</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="8367">8367</th><td>}</td></tr>
<tr><th id="8368">8368</th><td></td></tr>
<tr><th id="8369">8369</th><td></td></tr>
<tr><th id="8370">8370</th><td></td></tr>
<tr><th id="8371">8371</th><td><i  data-doc="rcs_cleanup">/*</i></td></tr>
<tr><th id="8372">8372</th><td><i  data-doc="rcs_cleanup"> * Clean up temporary files.</i></td></tr>
<tr><th id="8373">8373</th><td><i  data-doc="rcs_cleanup"> *</i></td></tr>
<tr><th id="8374">8374</th><td><i  data-doc="rcs_cleanup"> * NOTES</i></td></tr>
<tr><th id="8375">8375</th><td><i  data-doc="rcs_cleanup"> *   This function needs to be reentrant since a call to exit() can cause a</i></td></tr>
<tr><th id="8376">8376</th><td><i  data-doc="rcs_cleanup"> *   call to this function, which can then be interrupted by a signal, which</i></td></tr>
<tr><th id="8377">8377</th><td><i  data-doc="rcs_cleanup"> *   can cause a second call to this function.</i></td></tr>
<tr><th id="8378">8378</th><td><i  data-doc="rcs_cleanup"> *</i></td></tr>
<tr><th id="8379">8379</th><td><i  data-doc="rcs_cleanup"> * RETURNS</i></td></tr>
<tr><th id="8380">8380</th><td><i  data-doc="rcs_cleanup"> *   Nothing.</i></td></tr>
<tr><th id="8381">8381</th><td><i  data-doc="rcs_cleanup"> */</i></td></tr>
<tr><th id="8382">8382</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="8383">8383</th><td><dfn class="tu decl def fn" id="rcs_cleanup" title='rcs_cleanup' data-type='void rcs_cleanup()' data-ref="rcs_cleanup" data-ref-filename="rcs_cleanup">rcs_cleanup</dfn> (<em>void</em>)</td></tr>
<tr><th id="8384">8384</th><td>{</td></tr>
<tr><th id="8385">8385</th><td>    <em>static</em> <em>int</em> <dfn class="local col2 decl" id="742reenter" title='reenter' data-type='int' data-ref="742reenter" data-ref-filename="742reenter">reenter</dfn> = <var>0</var>;</td></tr>
<tr><th id="8386">8386</th><td></td></tr>
<tr><th id="8387">8387</th><td>    <b>if</b> (<a class="local col2 ref" href="#742reenter" title='reenter' data-ref="742reenter" data-ref-filename="742reenter">reenter</a>++)</td></tr>
<tr><th id="8388">8388</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/unistd.h.html#_exit" title='_exit' data-ref="_exit" data-ref-filename="_exit">_exit</a>(<var>1</var>);</td></tr>
<tr><th id="8389">8389</th><td></td></tr>
<tr><th id="8390">8390</th><td>    <a class="macro" href="server.h.html#206" title="cvs_trace" data-ref="_M/TRACE">TRACE</a> (<a class="macro" href="server.h.html#217" title="1" data-ref="_M/TRACE_FUNCTION">TRACE_FUNCTION</a>, <q>"rcs_cleanup()"</q>);</td></tr>
<tr><th id="8391">8391</th><td></td></tr>
<tr><th id="8392">8392</th><td>    <i>/* FIXME: Do not perform buffered I/O from an interrupt handler like</i></td></tr>
<tr><th id="8393">8393</th><td><i>     * this (via error).  However, I'm leaving the error-calling code there</i></td></tr>
<tr><th id="8394">8394</th><td><i>     * in the hope that on the rare occasion the error call is actually made</i></td></tr>
<tr><th id="8395">8395</th><td><i>     * (e.g., a fluky I/O error or permissions problem prevents the deletion</i></td></tr>
<tr><th id="8396">8396</th><td><i>     * of a just-created file) reentrancy won't be an issue.</i></td></tr>
<tr><th id="8397">8397</th><td><i>     */</i></td></tr>
<tr><th id="8398">8398</th><td></td></tr>
<tr><th id="8399">8399</th><td>    <i>/* We don't want to be interrupted during calls which set globals to NULL,</i></td></tr>
<tr><th id="8400">8400</th><td><i>     * but we know that by the time we reach this function, interrupts have</i></td></tr>
<tr><th id="8401">8401</th><td><i>     * already been blocked.</i></td></tr>
<tr><th id="8402">8402</th><td><i>     */</i></td></tr>
<tr><th id="8403">8403</th><td>    <b>if</b> (<a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='r' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8404">8404</th><td>    {</td></tr>
<tr><th id="8405">8405</th><td>	<i>/* Use a tmp var since any of these functions could call exit, causing</i></td></tr>
<tr><th id="8406">8406</th><td><i>	 * us to be called a second time.</i></td></tr>
<tr><th id="8407">8407</th><td><i>	 */</i></td></tr>
<tr><th id="8408">8408</th><td>	<em>char</em> *<dfn class="local col3 decl" id="743tmp" title='tmp' data-type='char *' data-ref="743tmp" data-ref-filename="743tmp">tmp</dfn> = <a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='r' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a>;</td></tr>
<tr><th id="8409">8409</th><td>	<a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='w' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8410">8410</th><td>	<b>if</b> (<a class="tu ref" href="#rcs_lockfd" title='rcs_lockfd' data-use='r' data-ref="rcs_lockfd" data-ref-filename="rcs_lockfd">rcs_lockfd</a> &gt;= <var>0</var>)</td></tr>
<tr><th id="8411">8411</th><td>	{</td></tr>
<tr><th id="8412">8412</th><td>	    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/unistd.h.html#close" title='close' data-ref="close" data-ref-filename="close">close</a> (<a class="tu ref" href="#rcs_lockfd" title='rcs_lockfd' data-use='r' data-ref="rcs_lockfd" data-ref-filename="rcs_lockfd">rcs_lockfd</a>) != <var>0</var>)</td></tr>
<tr><th id="8413">8413</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"error closing lock file %s"</q>, <a class="local col3 ref" href="#743tmp" title='tmp' data-ref="743tmp" data-ref-filename="743tmp">tmp</a>);</td></tr>
<tr><th id="8414">8414</th><td>	    <a class="tu ref" href="#rcs_lockfd" title='rcs_lockfd' data-use='w' data-ref="rcs_lockfd" data-ref-filename="rcs_lockfd">rcs_lockfd</a> = -<var>1</var>;</td></tr>
<tr><th id="8415">8415</th><td>	}</td></tr>
<tr><th id="8416">8416</th><td></td></tr>
<tr><th id="8417">8417</th><td>	<i>/* Note that the checks for existence_error are because we can be</i></td></tr>
<tr><th id="8418">8418</th><td><i>	 * called from a signal handler, so we don't know whether the</i></td></tr>
<tr><th id="8419">8419</th><td><i>	 * files got created.</i></td></tr>
<tr><th id="8420">8420</th><td><i>	 */</i></td></tr>
<tr><th id="8421">8421</th><td>	<b>if</b> (<a class="ref fn" href="cvs.h.html#unlink_file" title='unlink_file' data-ref="unlink_file" data-ref-filename="unlink_file">unlink_file</a> (<a class="local col3 ref" href="#743tmp" title='tmp' data-ref="743tmp" data-ref-filename="743tmp">tmp</a>) &lt; <var>0</var></td></tr>
<tr><th id="8422">8422</th><td>	    &amp;&amp; !<a class="macro" href="../lib/system.h.html#139" title="(((*__errno())) == 2)" data-ref="_M/existence_error">existence_error</a> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>))</td></tr>
<tr><th id="8423">8423</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot remove %s"</q>, <a class="local col3 ref" href="#743tmp" title='tmp' data-ref="743tmp" data-ref-filename="743tmp">tmp</a>);</td></tr>
<tr><th id="8424">8424</th><td>    }</td></tr>
<tr><th id="8425">8425</th><td>}</td></tr>
<tr><th id="8426">8426</th><td></td></tr>
<tr><th id="8427">8427</th><td></td></tr>
<tr><th id="8428">8428</th><td></td></tr>
<tr><th id="8429">8429</th><td><i  data-doc="rcs_internal_lockfile">/* RCS_internal_lockfile and RCS_internal_unlockfile perform RCS-style</i></td></tr>
<tr><th id="8430">8430</th><td><i  data-doc="rcs_internal_lockfile">   locking on the specified RCSFILE: for a file called `foo,v', open</i></td></tr>
<tr><th id="8431">8431</th><td><i  data-doc="rcs_internal_lockfile">   for writing a file called `,foo,'.</i></td></tr>
<tr><th id="8432">8432</th><td><i  data-doc="rcs_internal_lockfile"></i></td></tr>
<tr><th id="8433">8433</th><td><i  data-doc="rcs_internal_lockfile">   Note that we what do here is quite different from what RCS does.</i></td></tr>
<tr><th id="8434">8434</th><td><i  data-doc="rcs_internal_lockfile">   RCS creates the ,foo, file before it reads the RCS file (if it</i></td></tr>
<tr><th id="8435">8435</th><td><i  data-doc="rcs_internal_lockfile">   knows that it will be writing later), so that it actually serves as</i></td></tr>
<tr><th id="8436">8436</th><td><i  data-doc="rcs_internal_lockfile">   a lock.  We don't; instead we rely on CVS writelocks.  This means</i></td></tr>
<tr><th id="8437">8437</th><td><i  data-doc="rcs_internal_lockfile">   that if someone is running RCS on the file at the same time they</i></td></tr>
<tr><th id="8438">8438</th><td><i  data-doc="rcs_internal_lockfile">   are running CVS on it, they might lose (we read the file,</i></td></tr>
<tr><th id="8439">8439</th><td><i  data-doc="rcs_internal_lockfile">   then RCS writes it, then we write it, clobbering the</i></td></tr>
<tr><th id="8440">8440</th><td><i  data-doc="rcs_internal_lockfile">   changes made by RCS).  I believe the current sentiment about this</i></td></tr>
<tr><th id="8441">8441</th><td><i  data-doc="rcs_internal_lockfile">   is "well, don't do that".</i></td></tr>
<tr><th id="8442">8442</th><td><i  data-doc="rcs_internal_lockfile"></i></td></tr>
<tr><th id="8443">8443</th><td><i  data-doc="rcs_internal_lockfile">   A concern has been expressed about whether adopting the RCS</i></td></tr>
<tr><th id="8444">8444</th><td><i  data-doc="rcs_internal_lockfile">   strategy would slow us down.  I don't think so, since we need to</i></td></tr>
<tr><th id="8445">8445</th><td><i  data-doc="rcs_internal_lockfile">   write the ,foo, file anyway (unless perhaps if O_EXCL is slower or</i></td></tr>
<tr><th id="8446">8446</th><td><i  data-doc="rcs_internal_lockfile">   something).</i></td></tr>
<tr><th id="8447">8447</th><td><i  data-doc="rcs_internal_lockfile"></i></td></tr>
<tr><th id="8448">8448</th><td><i  data-doc="rcs_internal_lockfile">   These do not perform quite the same function as the RCS -l option</i></td></tr>
<tr><th id="8449">8449</th><td><i  data-doc="rcs_internal_lockfile">   for locking files: they are intended to prevent competing RCS</i></td></tr>
<tr><th id="8450">8450</th><td><i  data-doc="rcs_internal_lockfile">   processes from stomping all over each other's laundry.  Hence,</i></td></tr>
<tr><th id="8451">8451</th><td><i  data-doc="rcs_internal_lockfile">   they are `internal' locking functions.</i></td></tr>
<tr><th id="8452">8452</th><td><i  data-doc="rcs_internal_lockfile"></i></td></tr>
<tr><th id="8453">8453</th><td><i  data-doc="rcs_internal_lockfile">   If there is an error, give a fatal error; if we return we always</i></td></tr>
<tr><th id="8454">8454</th><td><i  data-doc="rcs_internal_lockfile">   return a non-NULL value.  */</i></td></tr>
<tr><th id="8455">8455</th><td><em>static</em> <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *</td></tr>
<tr><th id="8456">8456</th><td><dfn class="tu decl def fn" id="rcs_internal_lockfile" title='rcs_internal_lockfile' data-type='FILE * rcs_internal_lockfile(char * rcsfile)' data-ref="rcs_internal_lockfile" data-ref-filename="rcs_internal_lockfile">rcs_internal_lockfile</dfn> (<em>char</em> *<dfn class="local col4 decl" id="744rcsfile" title='rcsfile' data-type='char *' data-ref="744rcsfile" data-ref-filename="744rcsfile">rcsfile</dfn>)</td></tr>
<tr><th id="8457">8457</th><td>{</td></tr>
<tr><th id="8458">8458</th><td>    <b>struct</b> <a class="type" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat" title='stat' data-ref="stat" data-ref-filename="stat">stat</a> <dfn class="local col5 decl" id="745rstat" title='rstat' data-type='struct stat' data-ref="745rstat" data-ref-filename="745rstat">rstat</dfn>;</td></tr>
<tr><th id="8459">8459</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col6 decl" id="746fp" title='fp' data-type='FILE *' data-ref="746fp" data-ref-filename="746fp">fp</dfn>;</td></tr>
<tr><th id="8460">8460</th><td>    <em>static</em> <em>int</em> <dfn class="local col7 decl" id="747first_call" title='first_call' data-type='int' data-ref="747first_call" data-ref-filename="747first_call">first_call</dfn> = <var>1</var>;</td></tr>
<tr><th id="8461">8461</th><td></td></tr>
<tr><th id="8462">8462</th><td>    <b>if</b> (<a class="local col7 ref" href="#747first_call" title='first_call' data-ref="747first_call" data-ref-filename="747first_call">first_call</a>)</td></tr>
<tr><th id="8463">8463</th><td>    {</td></tr>
<tr><th id="8464">8464</th><td>	<a class="local col7 ref" href="#747first_call" title='first_call' data-ref="747first_call" data-ref-filename="747first_call">first_call</a> = <var>0</var>;</td></tr>
<tr><th id="8465">8465</th><td>	<i>/* Clean up if we get a signal or exit.  */</i></td></tr>
<tr><th id="8466">8466</th><td>	<a class="ref fn" href="cvs.h.html#cleanup_register" title='cleanup_register' data-ref="cleanup_register" data-ref-filename="cleanup_register">cleanup_register</a> (<a class="tu ref fn" href="#rcs_cleanup" title='rcs_cleanup' data-use='r' data-ref="rcs_cleanup" data-ref-filename="rcs_cleanup">rcs_cleanup</a>);</td></tr>
<tr><th id="8467">8467</th><td>    }</td></tr>
<tr><th id="8468">8468</th><td></td></tr>
<tr><th id="8469">8469</th><td>    <i>/* Get the lock file name: `,file,' for RCS file `file,v'. */</i></td></tr>
<tr><th id="8470">8470</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs_lockfile == ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 8470, __func__, &quot;rcs_lockfile == NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='r' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="8471">8471</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs_lockfd &lt; 0) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 8471, __func__, &quot;rcs_lockfd &lt; 0&quot;))" data-ref="_M/assert">assert</a> (<a class="tu ref" href="#rcs_lockfd" title='rcs_lockfd' data-use='r' data-ref="rcs_lockfd" data-ref-filename="rcs_lockfd">rcs_lockfd</a> &lt; <var>0</var>);</td></tr>
<tr><th id="8472">8472</th><td>    <a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='w' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a> = <a class="tu ref fn" href="#rcs_lockfilename" title='rcs_lockfilename' data-use='c' data-ref="rcs_lockfilename" data-ref-filename="rcs_lockfilename">rcs_lockfilename</a> (<a class="local col4 ref" href="#744rcsfile" title='rcsfile' data-ref="744rcsfile" data-ref-filename="744rcsfile">rcsfile</a>);</td></tr>
<tr><th id="8473">8473</th><td></td></tr>
<tr><th id="8474">8474</th><td>    <i>/* Use the existing RCS file mode, or read-only if this is a new</i></td></tr>
<tr><th id="8475">8475</th><td><i>       file.  (Really, this is a lie -- if this is a new file,</i></td></tr>
<tr><th id="8476">8476</th><td><i>       RCS_checkin uses the permissions from the working copy.  For</i></td></tr>
<tr><th id="8477">8477</th><td><i>       actually creating the file, we use 0444 as a safe default mode.) */</i></td></tr>
<tr><th id="8478">8478</th><td>    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#__stat50" title='stat' data-ref="__stat50" data-ref-filename="__stat50">stat</a> (<a class="local col4 ref" href="#744rcsfile" title='rcsfile' data-ref="744rcsfile" data-ref-filename="744rcsfile">rcsfile</a>, &amp;<a class="local col5 ref" href="#745rstat" title='rstat' data-ref="745rstat" data-ref-filename="745rstat">rstat</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="8479">8479</th><td>    {</td></tr>
<tr><th id="8480">8480</th><td>	<b>if</b> (<a class="macro" href="../lib/system.h.html#139" title="(((*__errno())) == 2)" data-ref="_M/existence_error">existence_error</a> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>))</td></tr>
<tr><th id="8481">8481</th><td>	    <a class="local col5 ref" href="#745rstat" title='rstat' data-ref="745rstat" data-ref-filename="745rstat">rstat</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat::st_mode" title='stat::st_mode' data-ref="stat::st_mode" data-ref-filename="stat..st_mode">st_mode</a> = <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#118" title="0000400" data-ref="_M/S_IRUSR">S_IRUSR</a> | <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#129" title="0000040" data-ref="_M/S_IRGRP">S_IRGRP</a> | <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#134" title="0000004" data-ref="_M/S_IROTH">S_IROTH</a>;</td></tr>
<tr><th id="8482">8482</th><td>	<b>else</b></td></tr>
<tr><th id="8483">8483</th><td>	    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot stat %s"</q>, <a class="local col4 ref" href="#744rcsfile" title='rcsfile' data-ref="744rcsfile" data-ref-filename="744rcsfile">rcsfile</a>);</td></tr>
<tr><th id="8484">8484</th><td>    }</td></tr>
<tr><th id="8485">8485</th><td></td></tr>
<tr><th id="8486">8486</th><td>    <i>/* Try to open exclusively.  POSIX.1 guarantees that O_EXCL|O_CREAT</i></td></tr>
<tr><th id="8487">8487</th><td><i>       guarantees an exclusive open.  According to the RCS source, with</i></td></tr>
<tr><th id="8488">8488</th><td><i>       NFS v2 we must also throw in O_TRUNC and use an open mask that makes</i></td></tr>
<tr><th id="8489">8489</th><td><i>       the file unwriteable.  For extensive justification, see the comments for</i></td></tr>
<tr><th id="8490">8490</th><td><i>       rcswriteopen() in rcsedit.c, in RCS 5.7.  This is kind of pointless</i></td></tr>
<tr><th id="8491">8491</th><td><i>       in the CVS case; see comment at the start of this file concerning</i></td></tr>
<tr><th id="8492">8492</th><td><i>       general ,foo, file strategy.</i></td></tr>
<tr><th id="8493">8493</th><td><i></i></td></tr>
<tr><th id="8494">8494</th><td><i>       There is some sentiment that with NFSv3 and such, that one can</i></td></tr>
<tr><th id="8495">8495</th><td><i>       rely on O_EXCL these days.  This might be true for unix (I</i></td></tr>
<tr><th id="8496">8496</th><td><i>       don't really know), but I am still pretty skeptical in the case</i></td></tr>
<tr><th id="8497">8497</th><td><i>       of the non-unix systems.  */</i></td></tr>
<tr><th id="8498">8498</th><td>    <a class="tu ref" href="#rcs_lockfd" title='rcs_lockfd' data-use='w' data-ref="rcs_lockfd" data-ref-filename="rcs_lockfd">rcs_lockfd</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/fcntl.h.html#open" title='open' data-ref="open" data-ref-filename="open">open</a> (<a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='r' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a>,</td></tr>
<tr><th id="8499">8499</th><td>		       <a class="macro" href="../lib/system.h.html#344" title="(0)" data-ref="_M/OPEN_BINARY">OPEN_BINARY</a> | <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/fcntl.h.html#65" title="0x00000001" data-ref="_M/O_WRONLY">O_WRONLY</a> | <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/fcntl.h.html#97" title="0x00000200" data-ref="_M/O_CREAT">O_CREAT</a> | <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/fcntl.h.html#99" title="0x00000800" data-ref="_M/O_EXCL">O_EXCL</a> | <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/fcntl.h.html#98" title="0x00000400" data-ref="_M/O_TRUNC">O_TRUNC</a>,</td></tr>
<tr><th id="8500">8500</th><td>		       <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#118" title="0000400" data-ref="_M/S_IRUSR">S_IRUSR</a> | <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#129" title="0000040" data-ref="_M/S_IRGRP">S_IRGRP</a> | <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#134" title="0000004" data-ref="_M/S_IROTH">S_IROTH</a>);</td></tr>
<tr><th id="8501">8501</th><td></td></tr>
<tr><th id="8502">8502</th><td>    <b>if</b> (<a class="tu ref" href="#rcs_lockfd" title='rcs_lockfd' data-use='r' data-ref="rcs_lockfd" data-ref-filename="rcs_lockfd">rcs_lockfd</a> &lt; <var>0</var>)</td></tr>
<tr><th id="8503">8503</th><td>    {</td></tr>
<tr><th id="8504">8504</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"could not open lock file `%s'"</q>, <a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='r' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a>);</td></tr>
<tr><th id="8505">8505</th><td>    }</td></tr>
<tr><th id="8506">8506</th><td></td></tr>
<tr><th id="8507">8507</th><td>    <i>/* Force the file permissions, and return a stream object. */</i></td></tr>
<tr><th id="8508">8508</th><td>    <i>/* Because we change the modes later, we don't worry about</i></td></tr>
<tr><th id="8509">8509</th><td><i>       this in the non-HAVE_FCHMOD case.  */</i></td></tr>
<tr><th id="8510">8510</th><td><u>#<span data-ppcond="8510">ifdef</span> <a class="macro" href="../../include/config.h.html#285" data-ref="_M/HAVE_FCHMOD">HAVE_FCHMOD</a></u></td></tr>
<tr><th id="8511">8511</th><td>    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#fchmod" title='fchmod' data-ref="fchmod" data-ref-filename="fchmod">fchmod</a> (<a class="tu ref" href="#rcs_lockfd" title='rcs_lockfd' data-use='r' data-ref="rcs_lockfd" data-ref-filename="rcs_lockfd">rcs_lockfd</a>, <a class="local col5 ref" href="#745rstat" title='rstat' data-ref="745rstat" data-ref-filename="745rstat">rstat</a>.<a class="ref field" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat::st_mode" title='stat::st_mode' data-ref="stat::st_mode" data-ref-filename="stat..st_mode">st_mode</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="8512">8512</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot change mode for %s"</q>, <a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='r' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a>);</td></tr>
<tr><th id="8513">8513</th><td><u>#<span data-ppcond="8510">endif</span></u></td></tr>
<tr><th id="8514">8514</th><td>    <a class="local col6 ref" href="#746fp" title='fp' data-ref="746fp" data-ref-filename="746fp">fp</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fdopen" title='fdopen' data-ref="fdopen" data-ref-filename="fdopen">fdopen</a> (<a class="tu ref" href="#rcs_lockfd" title='rcs_lockfd' data-use='r' data-ref="rcs_lockfd" data-ref-filename="rcs_lockfd">rcs_lockfd</a>, <a class="macro" href="../lib/system.h.html#338" title="(&quot;wb&quot;)" data-ref="_M/FOPEN_BINARY_WRITE">FOPEN_BINARY_WRITE</a>);</td></tr>
<tr><th id="8515">8515</th><td>    <b>if</b> (<a class="local col6 ref" href="#746fp" title='fp' data-ref="746fp" data-ref-filename="746fp">fp</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="8516">8516</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot fdopen %s"</q>, <a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='r' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a>);</td></tr>
<tr><th id="8517">8517</th><td></td></tr>
<tr><th id="8518">8518</th><td>    <b>return</b> <a class="local col6 ref" href="#746fp" title='fp' data-ref="746fp" data-ref-filename="746fp">fp</a>;</td></tr>
<tr><th id="8519">8519</th><td>}</td></tr>
<tr><th id="8520">8520</th><td></td></tr>
<tr><th id="8521">8521</th><td></td></tr>
<tr><th id="8522">8522</th><td></td></tr>
<tr><th id="8523">8523</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="8524">8524</th><td><dfn class="tu decl def fn" id="rcs_internal_unlockfile" title='rcs_internal_unlockfile' data-type='void rcs_internal_unlockfile(FILE * fp, char * rcsfile)' data-ref="rcs_internal_unlockfile" data-ref-filename="rcs_internal_unlockfile">rcs_internal_unlockfile</dfn> (<a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col8 decl" id="748fp" title='fp' data-type='FILE *' data-ref="748fp" data-ref-filename="748fp">fp</dfn>, <em>char</em> *<dfn class="local col9 decl" id="749rcsfile" title='rcsfile' data-type='char *' data-ref="749rcsfile" data-ref-filename="749rcsfile">rcsfile</dfn>)</td></tr>
<tr><th id="8525">8525</th><td>{</td></tr>
<tr><th id="8526">8526</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs_lockfile != ((void*)0)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 8526, __func__, &quot;rcs_lockfile != NULL&quot;))" data-ref="_M/assert">assert</a> (<a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='r' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="8527">8527</th><td>    <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((rcs_lockfd &gt;= 0) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 8527, __func__, &quot;rcs_lockfd &gt;= 0&quot;))" data-ref="_M/assert">assert</a> (<a class="tu ref" href="#rcs_lockfd" title='rcs_lockfd' data-use='r' data-ref="rcs_lockfd" data-ref-filename="rcs_lockfd">rcs_lockfd</a> &gt;= <var>0</var>);</td></tr>
<tr><th id="8528">8528</th><td></td></tr>
<tr><th id="8529">8529</th><td>    <i>/* Abort if we could not write everything successfully to LOCKFILE.</i></td></tr>
<tr><th id="8530">8530</th><td><i>       This is not a great error-handling mechanism, but should prevent</i></td></tr>
<tr><th id="8531">8531</th><td><i>       corrupting the repository. */</i></td></tr>
<tr><th id="8532">8532</th><td></td></tr>
<tr><th id="8533">8533</th><td>    <b>if</b> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#493" title="(((fp)-&gt;_flags &amp; 0x0040) != 0)" data-ref="_M/ferror">ferror</a> (<a class="local col8 ref" href="#748fp" title='fp' data-ref="748fp" data-ref-filename="748fp">fp</a>))</td></tr>
<tr><th id="8534">8534</th><td>	<i>/* Using errno here may well be misleanding since the most recent</i></td></tr>
<tr><th id="8535">8535</th><td><i>	   call that set errno may not have anything whatsoever to do with</i></td></tr>
<tr><th id="8536">8536</th><td><i>	   the error that set the flag, but it's better than nothing.  The</i></td></tr>
<tr><th id="8537">8537</th><td><i>	   real solution is to check each call to fprintf rather than waiting</i></td></tr>
<tr><th id="8538">8538</th><td><i>	   until the end like this.  */</i></td></tr>
<tr><th id="8539">8539</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"error writing to lock file %s"</q>, <a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='r' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a>);</td></tr>
<tr><th id="8540">8540</th><td></td></tr>
<tr><th id="8541">8541</th><td>    <i>/* Flush and sync the file, or the user may be told the commit completed,</i></td></tr>
<tr><th id="8542">8542</th><td><i>     * while a server crash/power failure could still cause the data to be</i></td></tr>
<tr><th id="8543">8543</th><td><i>     * lost.</i></td></tr>
<tr><th id="8544">8544</th><td><i>     *</i></td></tr>
<tr><th id="8545">8545</th><td><i>     * Invoking rename(",&lt;file&gt;," , "&lt;file&gt;,v") on Linux and almost all UNIXs</i></td></tr>
<tr><th id="8546">8546</th><td><i>     * only flushes the inode for the target file to disk, it does not</i></td></tr>
<tr><th id="8547">8547</th><td><i>     * guarantee flush of the kernel buffers allocated for the ,&lt;file&gt;,.</i></td></tr>
<tr><th id="8548">8548</th><td><i>     * Depending upon the load on the machine, the Linux kernel's flush daemon</i></td></tr>
<tr><th id="8549">8549</th><td><i>     * process may not flush for a while.  In the meantime the CVS transaction</i></td></tr>
<tr><th id="8550">8550</th><td><i>     * could have been declared committed to the end CVS user (CVS process has</i></td></tr>
<tr><th id="8551">8551</th><td><i>     * returned the final "OK").  If the machine crashes prior to syncing the</i></td></tr>
<tr><th id="8552">8552</th><td><i>     * changes to disk, the committed transaction can be lost.</i></td></tr>
<tr><th id="8553">8553</th><td><i>     */</i></td></tr>
<tr><th id="8554">8554</th><td>    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fflush" title='fflush' data-ref="fflush" data-ref-filename="fflush">fflush</a> (<a class="local col8 ref" href="#748fp" title='fp' data-ref="748fp" data-ref-filename="748fp">fp</a>) != <var>0</var>)</td></tr>
<tr><th id="8555">8555</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"error flushing file `%s' to kernel buffers"</q>,</td></tr>
<tr><th id="8556">8556</th><td>	       <a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='r' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a>);</td></tr>
<tr><th id="8557">8557</th><td><u>#<span data-ppcond="8557">ifdef</span> <a class="macro" href="../../include/config.h.html#300" data-ref="_M/HAVE_FSYNC">HAVE_FSYNC</a></u></td></tr>
<tr><th id="8558">8558</th><td>    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/unistd.h.html#fsync" title='fsync' data-ref="fsync" data-ref-filename="fsync">fsync</a> (<a class="tu ref" href="#rcs_lockfd" title='rcs_lockfd' data-use='r' data-ref="rcs_lockfd" data-ref-filename="rcs_lockfd">rcs_lockfd</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="8559">8559</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"error fsyncing file `%s'"</q>, <a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='r' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a>);</td></tr>
<tr><th id="8560">8560</th><td><u>#<span data-ppcond="8557">endif</span></u></td></tr>
<tr><th id="8561">8561</th><td></td></tr>
<tr><th id="8562">8562</th><td>    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fclose" title='fclose' data-ref="fclose" data-ref-filename="fclose">fclose</a> (<a class="local col8 ref" href="#748fp" title='fp' data-ref="748fp" data-ref-filename="748fp">fp</a>) == <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#183" title="(-1)" data-ref="_M/EOF">EOF</a>)</td></tr>
<tr><th id="8563">8563</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"error closing lock file %s"</q>, <a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='r' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a>);</td></tr>
<tr><th id="8564">8564</th><td>    <a class="tu ref" href="#rcs_lockfd" title='rcs_lockfd' data-use='w' data-ref="rcs_lockfd" data-ref-filename="rcs_lockfd">rcs_lockfd</a> = -<var>1</var>;</td></tr>
<tr><th id="8565">8565</th><td></td></tr>
<tr><th id="8566">8566</th><td>    <a class="ref fn" href="cvs.h.html#rename_file" title='rename_file' data-ref="rename_file" data-ref-filename="rename_file">rename_file</a> (<a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='r' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a>, <a class="local col9 ref" href="#749rcsfile" title='rcsfile' data-ref="749rcsfile" data-ref-filename="749rcsfile">rcsfile</a>);</td></tr>
<tr><th id="8567">8567</th><td></td></tr>
<tr><th id="8568">8568</th><td>    {</td></tr>
<tr><th id="8569">8569</th><td>	<i>/* Use a temporary to make sure there's no interval</i></td></tr>
<tr><th id="8570">8570</th><td><i>	   (after rcs_lockfile has been freed but before it's set to NULL)</i></td></tr>
<tr><th id="8571">8571</th><td><i>	   during which the signal handler's use of rcs_lockfile would</i></td></tr>
<tr><th id="8572">8572</th><td><i>	   reference freed memory.  */</i></td></tr>
<tr><th id="8573">8573</th><td>	<em>char</em> *<dfn class="local col0 decl" id="750tmp" title='tmp' data-type='char *' data-ref="750tmp" data-ref-filename="750tmp">tmp</dfn> = <a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='r' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a>;</td></tr>
<tr><th id="8574">8574</th><td>	<a class="tu ref" href="#rcs_lockfile" title='rcs_lockfile' data-use='w' data-ref="rcs_lockfile" data-ref-filename="rcs_lockfile">rcs_lockfile</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8575">8575</th><td>	<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col0 ref" href="#750tmp" title='tmp' data-ref="750tmp" data-ref-filename="750tmp">tmp</a>);</td></tr>
<tr><th id="8576">8576</th><td>    }</td></tr>
<tr><th id="8577">8577</th><td>}</td></tr>
<tr><th id="8578">8578</th><td></td></tr>
<tr><th id="8579">8579</th><td></td></tr>
<tr><th id="8580">8580</th><td></td></tr>
<tr><th id="8581">8581</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="8582">8582</th><td><dfn class="tu decl def fn" id="rcs_lockfilename" title='rcs_lockfilename' data-type='char * rcs_lockfilename(const char * rcsfile)' data-ref="rcs_lockfilename" data-ref-filename="rcs_lockfilename">rcs_lockfilename</dfn> (<em>const</em> <em>char</em> *<dfn class="local col1 decl" id="751rcsfile" title='rcsfile' data-type='const char *' data-ref="751rcsfile" data-ref-filename="751rcsfile">rcsfile</dfn>)</td></tr>
<tr><th id="8583">8583</th><td>{</td></tr>
<tr><th id="8584">8584</th><td>    <em>char</em> *<dfn class="local col2 decl" id="752lockfile" title='lockfile' data-type='char *' data-ref="752lockfile" data-ref-filename="752lockfile">lockfile</dfn>, *<dfn class="local col3 decl" id="753lockp" title='lockp' data-type='char *' data-ref="753lockp" data-ref-filename="753lockp">lockp</dfn>;</td></tr>
<tr><th id="8585">8585</th><td>    <em>const</em> <em>char</em> *<dfn class="local col4 decl" id="754rcsbase" title='rcsbase' data-type='const char *' data-ref="754rcsbase" data-ref-filename="754rcsbase">rcsbase</dfn>, *<dfn class="local col5 decl" id="755rcsp" title='rcsp' data-type='const char *' data-ref="755rcsp" data-ref-filename="755rcsp">rcsp</dfn>, *<dfn class="local col6 decl" id="756rcsend" title='rcsend' data-type='const char *' data-ref="756rcsend" data-ref-filename="756rcsend">rcsend</dfn>;</td></tr>
<tr><th id="8586">8586</th><td>    <em>int</em> <dfn class="local col7 decl" id="757rcslen" title='rcslen' data-type='int' data-ref="757rcslen" data-ref-filename="757rcslen">rcslen</dfn>;</td></tr>
<tr><th id="8587">8587</th><td></td></tr>
<tr><th id="8588">8588</th><td>    <i>/* Create the lockfile name. */</i></td></tr>
<tr><th id="8589">8589</th><td>    <a class="local col7 ref" href="#757rcslen" title='rcslen' data-ref="757rcslen" data-ref-filename="757rcslen">rcslen</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col1 ref" href="#751rcsfile" title='rcsfile' data-ref="751rcsfile" data-ref-filename="751rcsfile">rcsfile</a>);</td></tr>
<tr><th id="8590">8590</th><td>    <a class="local col2 ref" href="#752lockfile" title='lockfile' data-ref="752lockfile" data-ref-filename="752lockfile">lockfile</a> = <a class="ref fn" href="../lib/xalloc.h.html#xmalloc" title='xmalloc' data-ref="xmalloc" data-ref-filename="xmalloc">xmalloc</a> (<a class="local col7 ref" href="#757rcslen" title='rcslen' data-ref="757rcslen" data-ref-filename="757rcslen">rcslen</a> + <var>10</var>);</td></tr>
<tr><th id="8591">8591</th><td>    <a class="local col4 ref" href="#754rcsbase" title='rcsbase' data-ref="754rcsbase" data-ref-filename="754rcsbase">rcsbase</a> = <a class="ref fn" href="cvs.h.html#last_component" title='last_component' data-ref="last_component" data-ref-filename="last_component">last_component</a> (<a class="local col1 ref" href="#751rcsfile" title='rcsfile' data-ref="751rcsfile" data-ref-filename="751rcsfile">rcsfile</a>);</td></tr>
<tr><th id="8592">8592</th><td>    <a class="local col6 ref" href="#756rcsend" title='rcsend' data-ref="756rcsend" data-ref-filename="756rcsend">rcsend</a> = <a class="local col1 ref" href="#751rcsfile" title='rcsfile' data-ref="751rcsfile" data-ref-filename="751rcsfile">rcsfile</a> + <a class="local col7 ref" href="#757rcslen" title='rcslen' data-ref="757rcslen" data-ref-filename="757rcslen">rcslen</a> - <b>sizeof</b>(<a class="macro" href="rcs.h.html#21" title="&quot;,v&quot;" data-ref="_M/RCSEXT">RCSEXT</a>);</td></tr>
<tr><th id="8593">8593</th><td>    <b>for</b> (<a class="local col3 ref" href="#753lockp" title='lockp' data-ref="753lockp" data-ref-filename="753lockp">lockp</a> = <a class="local col2 ref" href="#752lockfile" title='lockfile' data-ref="752lockfile" data-ref-filename="752lockfile">lockfile</a>, <a class="local col5 ref" href="#755rcsp" title='rcsp' data-ref="755rcsp" data-ref-filename="755rcsp">rcsp</a> = <a class="local col1 ref" href="#751rcsfile" title='rcsfile' data-ref="751rcsfile" data-ref-filename="751rcsfile">rcsfile</a>; <a class="local col5 ref" href="#755rcsp" title='rcsp' data-ref="755rcsp" data-ref-filename="755rcsp">rcsp</a> &lt; <a class="local col4 ref" href="#754rcsbase" title='rcsbase' data-ref="754rcsbase" data-ref-filename="754rcsbase">rcsbase</a>; ++<a class="local col5 ref" href="#755rcsp" title='rcsp' data-ref="755rcsp" data-ref-filename="755rcsp">rcsp</a>)</td></tr>
<tr><th id="8594">8594</th><td>	*<a class="local col3 ref" href="#753lockp" title='lockp' data-ref="753lockp" data-ref-filename="753lockp">lockp</a>++ = *<a class="local col5 ref" href="#755rcsp" title='rcsp' data-ref="755rcsp" data-ref-filename="755rcsp">rcsp</a>;</td></tr>
<tr><th id="8595">8595</th><td>    *<a class="local col3 ref" href="#753lockp" title='lockp' data-ref="753lockp" data-ref-filename="753lockp">lockp</a>++ = <kbd>','</kbd>;</td></tr>
<tr><th id="8596">8596</th><td>    <b>while</b> (<a class="local col5 ref" href="#755rcsp" title='rcsp' data-ref="755rcsp" data-ref-filename="755rcsp">rcsp</a> &lt;= <a class="local col6 ref" href="#756rcsend" title='rcsend' data-ref="756rcsend" data-ref-filename="756rcsend">rcsend</a>)</td></tr>
<tr><th id="8597">8597</th><td>	*<a class="local col3 ref" href="#753lockp" title='lockp' data-ref="753lockp" data-ref-filename="753lockp">lockp</a>++ = *<a class="local col5 ref" href="#755rcsp" title='rcsp' data-ref="755rcsp" data-ref-filename="755rcsp">rcsp</a>++;</td></tr>
<tr><th id="8598">8598</th><td>    *<a class="local col3 ref" href="#753lockp" title='lockp' data-ref="753lockp" data-ref-filename="753lockp">lockp</a>++ = <kbd>','</kbd>;</td></tr>
<tr><th id="8599">8599</th><td>    *<a class="local col3 ref" href="#753lockp" title='lockp' data-ref="753lockp" data-ref-filename="753lockp">lockp</a> = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="8600">8600</th><td></td></tr>
<tr><th id="8601">8601</th><td>    <b>return</b> <a class="local col2 ref" href="#752lockfile" title='lockfile' data-ref="752lockfile" data-ref-filename="752lockfile">lockfile</a>;</td></tr>
<tr><th id="8602">8602</th><td>}</td></tr>
<tr><th id="8603">8603</th><td></td></tr>
<tr><th id="8604">8604</th><td></td></tr>
<tr><th id="8605">8605</th><td></td></tr>
<tr><th id="8606">8606</th><td><i>/* Rewrite an RCS file.  The basic idea here is that the caller should</i></td></tr>
<tr><th id="8607">8607</th><td><i>   first call RCS_reparsercsfile, then munge the data structures as</i></td></tr>
<tr><th id="8608">8608</th><td><i>   desired (via RCS_delete_revs, RCS_settag, &amp;c), then call RCS_rewrite.  */</i></td></tr>
<tr><th id="8609">8609</th><td><em>void</em></td></tr>
<tr><th id="8610">8610</th><td><dfn class="decl def fn" id="RCS_rewrite" title='RCS_rewrite' data-ref="RCS_rewrite" data-ref-filename="RCS_rewrite">RCS_rewrite</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col8 decl" id="758rcs" title='rcs' data-type='RCSNode *' data-ref="758rcs" data-ref-filename="758rcs">rcs</dfn>, <a class="typedef" href="rcs.h.html#Deltatext" title='Deltatext' data-type='struct deltatext' data-ref="Deltatext" data-ref-filename="Deltatext">Deltatext</a> *<dfn class="local col9 decl" id="759newdtext" title='newdtext' data-type='Deltatext *' data-ref="759newdtext" data-ref-filename="759newdtext">newdtext</dfn>, <em>char</em> *<dfn class="local col0 decl" id="760insertpt" title='insertpt' data-type='char *' data-ref="760insertpt" data-ref-filename="760insertpt">insertpt</dfn>)</td></tr>
<tr><th id="8611">8611</th><td>{</td></tr>
<tr><th id="8612">8612</th><td>    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#FILE" title='FILE' data-type='struct __sFILE' data-ref="FILE" data-ref-filename="FILE">FILE</a> *<dfn class="local col1 decl" id="761fin" title='fin' data-type='FILE *' data-ref="761fin" data-ref-filename="761fin">fin</dfn>, *<dfn class="local col2 decl" id="762fout" title='fout' data-type='FILE *' data-ref="762fout" data-ref-filename="762fout">fout</dfn>;</td></tr>
<tr><th id="8613">8613</th><td>    <b>struct</b> <a class="type" href="#rcsbuffer" title='rcsbuffer' data-ref="rcsbuffer" data-ref-filename="rcsbuffer">rcsbuffer</a> <dfn class="local col3 decl" id="763rcsbufin" title='rcsbufin' data-type='struct rcsbuffer' data-ref="763rcsbufin" data-ref-filename="763rcsbufin">rcsbufin</dfn>;</td></tr>
<tr><th id="8614">8614</th><td></td></tr>
<tr><th id="8615">8615</th><td>    <b>if</b> (<a class="ref" href="cvs.h.html#noexec" title='noexec' data-ref="noexec" data-ref-filename="noexec">noexec</a>)</td></tr>
<tr><th id="8616">8616</th><td>	<b>return</b>;</td></tr>
<tr><th id="8617">8617</th><td></td></tr>
<tr><th id="8618">8618</th><td>    <i>/* Make sure we're operating on an actual file and not a symlink.  */</i></td></tr>
<tr><th id="8619">8619</th><td>    <a class="ref fn" href="subr.h.html#resolve_symlink" title='resolve_symlink' data-ref="resolve_symlink" data-ref-filename="resolve_symlink">resolve_symlink</a> (&amp;(<a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>));</td></tr>
<tr><th id="8620">8620</th><td></td></tr>
<tr><th id="8621">8621</th><td>    <a class="local col2 ref" href="#762fout" title='fout' data-ref="762fout" data-ref-filename="762fout">fout</a> = <a class="tu ref fn" href="#rcs_internal_lockfile" title='rcs_internal_lockfile' data-use='c' data-ref="rcs_internal_lockfile" data-ref-filename="rcs_internal_lockfile">rcs_internal_lockfile</a> (<a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="8622">8622</th><td></td></tr>
<tr><th id="8623">8623</th><td>    <a class="tu ref fn" href="#RCS_putadmin" title='RCS_putadmin' data-use='c' data-ref="RCS_putadmin" data-ref-filename="RCS_putadmin">RCS_putadmin</a> (<a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>, <a class="local col2 ref" href="#762fout" title='fout' data-ref="762fout" data-ref-filename="762fout">fout</a>);</td></tr>
<tr><th id="8624">8624</th><td>    <a class="tu ref fn" href="#RCS_putdtree" title='RCS_putdtree' data-use='c' data-ref="RCS_putdtree" data-ref-filename="RCS_putdtree">RCS_putdtree</a> (<a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>, <a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::head" title='rcsnode::head' data-ref="rcsnode::head" data-ref-filename="rcsnode..head">head</a>, <a class="local col2 ref" href="#762fout" title='fout' data-ref="762fout" data-ref-filename="762fout">fout</a>);</td></tr>
<tr><th id="8625">8625</th><td>    <a class="tu ref fn" href="#RCS_putdesc" title='RCS_putdesc' data-use='c' data-ref="RCS_putdesc" data-ref-filename="RCS_putdesc">RCS_putdesc</a> (<a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>, <a class="local col2 ref" href="#762fout" title='fout' data-ref="762fout" data-ref-filename="762fout">fout</a>);</td></tr>
<tr><th id="8626">8626</th><td></td></tr>
<tr><th id="8627">8627</th><td>    <i>/* Open the original RCS file and seek to the first delta text. */</i></td></tr>
<tr><th id="8628">8628</th><td>    <a class="tu ref fn" href="#rcsbuf_cache_open" title='rcsbuf_cache_open' data-use='c' data-ref="rcsbuf_cache_open" data-ref-filename="rcsbuf_cache_open">rcsbuf_cache_open</a> (<a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>, <a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::delta_pos" title='rcsnode::delta_pos' data-ref="rcsnode::delta_pos" data-ref-filename="rcsnode..delta_pos">delta_pos</a>, &amp;<a class="local col1 ref" href="#761fin" title='fin' data-ref="761fin" data-ref-filename="761fin">fin</a>, &amp;<a class="local col3 ref" href="#763rcsbufin" title='rcsbufin' data-ref="763rcsbufin" data-ref-filename="763rcsbufin">rcsbufin</a>);</td></tr>
<tr><th id="8629">8629</th><td></td></tr>
<tr><th id="8630">8630</th><td>    <i>/* Update delta_pos to the current position in the output file.</i></td></tr>
<tr><th id="8631">8631</th><td><i>       Do NOT move these statements: they must be done after fin has</i></td></tr>
<tr><th id="8632">8632</th><td><i>       been positioned at the old delta_pos, but before any delta</i></td></tr>
<tr><th id="8633">8633</th><td><i>       texts have been written to fout.</i></td></tr>
<tr><th id="8634">8634</th><td><i>     */</i></td></tr>
<tr><th id="8635">8635</th><td>    <a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::delta_pos" title='rcsnode::delta_pos' data-ref="rcsnode::delta_pos" data-ref-filename="rcsnode..delta_pos">delta_pos</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#ftello" title='ftello' data-ref="ftello" data-ref-filename="ftello">ftello</a> (<a class="local col2 ref" href="#762fout" title='fout' data-ref="762fout" data-ref-filename="762fout">fout</a>);</td></tr>
<tr><th id="8636">8636</th><td>    <b>if</b> (<a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::delta_pos" title='rcsnode::delta_pos' data-ref="rcsnode::delta_pos" data-ref-filename="rcsnode..delta_pos">delta_pos</a> == -<var>1</var>)</td></tr>
<tr><th id="8637">8637</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"cannot ftello in RCS file %s"</q>, <a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="8638">8638</th><td></td></tr>
<tr><th id="8639">8639</th><td>    <a class="tu ref fn" href="#RCS_copydeltas" title='RCS_copydeltas' data-use='c' data-ref="RCS_copydeltas" data-ref-filename="RCS_copydeltas">RCS_copydeltas</a> (<a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>, <a class="local col1 ref" href="#761fin" title='fin' data-ref="761fin" data-ref-filename="761fin">fin</a>, &amp;<a class="local col3 ref" href="#763rcsbufin" title='rcsbufin' data-ref="763rcsbufin" data-ref-filename="763rcsbufin">rcsbufin</a>, <a class="local col2 ref" href="#762fout" title='fout' data-ref="762fout" data-ref-filename="762fout">fout</a>, <a class="local col9 ref" href="#759newdtext" title='newdtext' data-ref="759newdtext" data-ref-filename="759newdtext">newdtext</a>, <a class="local col0 ref" href="#760insertpt" title='insertpt' data-ref="760insertpt" data-ref-filename="760insertpt">insertpt</a>);</td></tr>
<tr><th id="8640">8640</th><td></td></tr>
<tr><th id="8641">8641</th><td>    <i>/* We don't want to call rcsbuf_cache here, since we're about to</i></td></tr>
<tr><th id="8642">8642</th><td><i>       delete the file.  */</i></td></tr>
<tr><th id="8643">8643</th><td>    <a class="tu ref fn" href="#rcsbuf_close" title='rcsbuf_close' data-use='c' data-ref="rcsbuf_close" data-ref-filename="rcsbuf_close">rcsbuf_close</a> (&amp;<a class="local col3 ref" href="#763rcsbufin" title='rcsbufin' data-ref="763rcsbufin" data-ref-filename="763rcsbufin">rcsbufin</a>);</td></tr>
<tr><th id="8644">8644</th><td>    <b>if</b> (<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#493" title="(((fin)-&gt;_flags &amp; 0x0040) != 0)" data-ref="_M/ferror">ferror</a> (<a class="local col1 ref" href="#761fin" title='fin' data-ref="761fin" data-ref-filename="761fin">fin</a>))</td></tr>
<tr><th id="8645">8645</th><td>	<i>/* The only case in which using errno here would be meaningful</i></td></tr>
<tr><th id="8646">8646</th><td><i>	   is if we happen to have left errno unmolested since the call</i></td></tr>
<tr><th id="8647">8647</th><td><i>	   which produced the error (e.g. fread).  That is pretty</i></td></tr>
<tr><th id="8648">8648</th><td><i>	   fragile even if it happens to sometimes be true.  The real</i></td></tr>
<tr><th id="8649">8649</th><td><i>	   solution is to make sure that all the code which reads</i></td></tr>
<tr><th id="8650">8650</th><td><i>	   from fin checks for errors itself (some does, some doesn't).  */</i></td></tr>
<tr><th id="8651">8651</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>, <q>"warning: ferror set while rewriting RCS file `%s'"</q>, <a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="8652">8652</th><td>    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdio.h.html#fclose" title='fclose' data-ref="fclose" data-ref-filename="fclose">fclose</a> (<a class="local col1 ref" href="#761fin" title='fin' data-ref="761fin" data-ref-filename="761fin">fin</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="8653">8653</th><td>	<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"warning: closing RCS file `%s'"</q>, <a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="8654">8654</th><td></td></tr>
<tr><th id="8655">8655</th><td>    <a class="tu ref fn" href="#rcs_internal_unlockfile" title='rcs_internal_unlockfile' data-use='c' data-ref="rcs_internal_unlockfile" data-ref-filename="rcs_internal_unlockfile">rcs_internal_unlockfile</a> (<a class="local col2 ref" href="#762fout" title='fout' data-ref="762fout" data-ref-filename="762fout">fout</a>, <a class="local col8 ref" href="#758rcs" title='rcs' data-ref="758rcs" data-ref-filename="758rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::path" title='rcsnode::path' data-ref="rcsnode::path" data-ref-filename="rcsnode..path">path</a>);</td></tr>
<tr><th id="8656">8656</th><td>}</td></tr>
<tr><th id="8657">8657</th><td></td></tr>
<tr><th id="8658">8658</th><td></td></tr>
<tr><th id="8659">8659</th><td></td></tr>
<tr><th id="8660">8660</th><td><i>/* Abandon changes to an RCS file. */</i></td></tr>
<tr><th id="8661">8661</th><td><em>void</em></td></tr>
<tr><th id="8662">8662</th><td><dfn class="decl def fn" id="RCS_abandon" title='RCS_abandon' data-ref="RCS_abandon" data-ref-filename="RCS_abandon">RCS_abandon</dfn> (<a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col4 decl" id="764rcs" title='rcs' data-type='RCSNode *' data-ref="764rcs" data-ref-filename="764rcs">rcs</dfn>)</td></tr>
<tr><th id="8663">8663</th><td>{</td></tr>
<tr><th id="8664">8664</th><td>    <a class="tu ref fn" href="#free_rcsnode_contents" title='free_rcsnode_contents' data-use='c' data-ref="free_rcsnode_contents" data-ref-filename="free_rcsnode_contents">free_rcsnode_contents</a> (<a class="local col4 ref" href="#764rcs" title='rcs' data-ref="764rcs" data-ref-filename="764rcs">rcs</a>);</td></tr>
<tr><th id="8665">8665</th><td>    <a class="local col4 ref" href="#764rcs" title='rcs' data-ref="764rcs" data-ref-filename="764rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::symbols_data" title='rcsnode::symbols_data' data-ref="rcsnode::symbols_data" data-ref-filename="rcsnode..symbols_data">symbols_data</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8666">8666</th><td>    <a class="local col4 ref" href="#764rcs" title='rcs' data-ref="764rcs" data-ref-filename="764rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::expand" title='rcsnode::expand' data-ref="rcsnode::expand" data-ref-filename="rcsnode..expand">expand</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8667">8667</th><td>    <a class="local col4 ref" href="#764rcs" title='rcs' data-ref="764rcs" data-ref-filename="764rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::access" title='rcsnode::access' data-ref="rcsnode::access" data-ref-filename="rcsnode..access">access</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8668">8668</th><td>    <a class="local col4 ref" href="#764rcs" title='rcs' data-ref="764rcs" data-ref-filename="764rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::locks_data" title='rcsnode::locks_data' data-ref="rcsnode::locks_data" data-ref-filename="rcsnode..locks_data">locks_data</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8669">8669</th><td>    <a class="local col4 ref" href="#764rcs" title='rcs' data-ref="764rcs" data-ref-filename="764rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::comment" title='rcsnode::comment' data-ref="rcsnode::comment" data-ref-filename="rcsnode..comment">comment</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8670">8670</th><td>    <a class="local col4 ref" href="#764rcs" title='rcs' data-ref="764rcs" data-ref-filename="764rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::desc" title='rcsnode::desc' data-ref="rcsnode::desc" data-ref-filename="rcsnode..desc">desc</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8671">8671</th><td>    <a class="local col4 ref" href="#764rcs" title='rcs' data-ref="764rcs" data-ref-filename="764rcs">rcs</a>-&gt;<a class="ref field" href="rcs.h.html#rcsnode::flags" title='rcsnode::flags' data-ref="rcsnode::flags" data-ref-filename="rcsnode..flags">flags</a> |= <a class="macro" href="rcs.h.html#44" title="0x4" data-ref="_M/PARTIAL">PARTIAL</a>;</td></tr>
<tr><th id="8672">8672</th><td>}</td></tr>
<tr><th id="8673">8673</th><td></td></tr>
<tr><th id="8674">8674</th><td></td></tr>
<tr><th id="8675">8675</th><td></td></tr>
<tr><th id="8676">8676</th><td><i>/*</i></td></tr>
<tr><th id="8677">8677</th><td><i> * For a given file with full pathname PATH and revision number REV,</i></td></tr>
<tr><th id="8678">8678</th><td><i> * produce a file label suitable for passing to diff.  The default</i></td></tr>
<tr><th id="8679">8679</th><td><i> * file label as used by RCS 5.7 looks like this:</i></td></tr>
<tr><th id="8680">8680</th><td><i> *</i></td></tr>
<tr><th id="8681">8681</th><td><i> *	FILENAME &lt;tab&gt; YYYY/MM/DD &lt;sp&gt; HH:MM:SS &lt;tab&gt; REVNUM</i></td></tr>
<tr><th id="8682">8682</th><td><i> *</i></td></tr>
<tr><th id="8683">8683</th><td><i> * The date and time used are the revision's last checkin date and time.</i></td></tr>
<tr><th id="8684">8684</th><td><i> * If REV is NULL, use the working copy's mtime instead.</i></td></tr>
<tr><th id="8685">8685</th><td><i> *</i></td></tr>
<tr><th id="8686">8686</th><td><i> * /dev/null is not statted but assumed to have been created on the Epoch.</i></td></tr>
<tr><th id="8687">8687</th><td><i> * At least using the POSIX.2 definition of patch, this should cause creation</i></td></tr>
<tr><th id="8688">8688</th><td><i> * of files on platforms such as Windoze where the null IO device isn't named</i></td></tr>
<tr><th id="8689">8689</th><td><i> * /dev/null to be parsed by patch properly.</i></td></tr>
<tr><th id="8690">8690</th><td><i> */</i></td></tr>
<tr><th id="8691">8691</th><td><em>char</em> *</td></tr>
<tr><th id="8692">8692</th><td><dfn class="decl def fn" id="make_file_label" title='make_file_label' data-ref="make_file_label" data-ref-filename="make_file_label">make_file_label</dfn> (<em>const</em> <em>char</em> *<dfn class="local col5 decl" id="765path" title='path' data-type='const char *' data-ref="765path" data-ref-filename="765path">path</dfn>, <em>const</em> <em>char</em> *<dfn class="local col6 decl" id="766rev" title='rev' data-type='const char *' data-ref="766rev" data-ref-filename="766rev">rev</dfn>, <a class="typedef" href="rcs.h.html#RCSNode" title='RCSNode' data-type='struct rcsnode' data-ref="RCSNode" data-ref-filename="RCSNode">RCSNode</a> *<dfn class="local col7 decl" id="767rcs" title='rcs' data-type='RCSNode *' data-ref="767rcs" data-ref-filename="767rcs">rcs</dfn>)</td></tr>
<tr><th id="8693">8693</th><td>{</td></tr>
<tr><th id="8694">8694</th><td>    <em>char</em> <dfn class="local col8 decl" id="768datebuf" title='datebuf' data-type='char [51]' data-ref="768datebuf" data-ref-filename="768datebuf">datebuf</dfn>[<a class="macro" href="cvs.h.html#296" title="50" data-ref="_M/MAXDATELEN">MAXDATELEN</a> + <var>1</var>];</td></tr>
<tr><th id="8695">8695</th><td>    <em>char</em> *<dfn class="local col9 decl" id="769label" title='label' data-type='char *' data-ref="769label" data-ref-filename="769label">label</dfn>;</td></tr>
<tr><th id="8696">8696</th><td></td></tr>
<tr><th id="8697">8697</th><td>    <b>if</b> (<a class="local col6 ref" href="#766rev" title='rev' data-ref="766rev" data-ref-filename="766rev">rev</a>)</td></tr>
<tr><th id="8698">8698</th><td>    {</td></tr>
<tr><th id="8699">8699</th><td>	<em>char</em> <dfn class="local col0 decl" id="770date" title='date' data-type='char [51]' data-ref="770date" data-ref-filename="770date">date</dfn>[<a class="macro" href="cvs.h.html#296" title="50" data-ref="_M/MAXDATELEN">MAXDATELEN</a> + <var>1</var>];</td></tr>
<tr><th id="8700">8700</th><td>	<i>/* revs cannot be attached to /dev/null ... duh. */</i></td></tr>
<tr><th id="8701">8701</th><td>	<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/assert.h.html#58" title="((strcmp(&quot;/dev/null&quot;, path)) ? (void)0 : __assert13(&quot;/___NETBSD_SRC___/objdir.amd64/external/gpl2/xcvs/bin/xcvs/../../../../../../external/gpl2/xcvs/dist/src/rcs.c&quot;, 8701, __func__, &quot;strcmp(DEVNULL, path)&quot;))" data-ref="_M/assert">assert</a> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcmp" title='strcmp' data-ref="strcmp" data-ref-filename="strcmp">strcmp</a>(<a class="macro" href="../lib/system.h.html#87" title="&quot;/dev/null&quot;" data-ref="_M/DEVNULL">DEVNULL</a>, <a class="local col5 ref" href="#765path" title='path' data-ref="765path" data-ref-filename="765path">path</a>));</td></tr>
<tr><th id="8702">8702</th><td>	<a class="ref fn" href="#RCS_getrevtime" title='RCS_getrevtime' data-ref="RCS_getrevtime" data-ref-filename="RCS_getrevtime">RCS_getrevtime</a> (<a class="local col7 ref" href="#767rcs" title='rcs' data-ref="767rcs" data-ref-filename="767rcs">rcs</a>, <a class="local col6 ref" href="#766rev" title='rev' data-ref="766rev" data-ref-filename="766rev">rev</a>, <a class="local col8 ref" href="#768datebuf" title='datebuf' data-ref="768datebuf" data-ref-filename="768datebuf">datebuf</a>, <var>0</var>);</td></tr>
<tr><th id="8703">8703</th><td>	(<em>void</em>) <a class="ref fn" href="cvs.h.html#date_to_internet" title='date_to_internet' data-ref="date_to_internet" data-ref-filename="date_to_internet">date_to_internet</a> (<a class="local col0 ref" href="#770date" title='date' data-ref="770date" data-ref-filename="770date">date</a>, <a class="local col8 ref" href="#768datebuf" title='datebuf' data-ref="768datebuf" data-ref-filename="768datebuf">datebuf</a>);</td></tr>
<tr><th id="8704">8704</th><td>	<a class="local col9 ref" href="#769label" title='label' data-ref="769label" data-ref-filename="769label">label</a> = <a class="ref fn" href="subr.h.html#Xasprintf" title='Xasprintf' data-ref="Xasprintf" data-ref-filename="Xasprintf">Xasprintf</a> (<q>"-L%s\t%s\t%s"</q>, <a class="local col5 ref" href="#765path" title='path' data-ref="765path" data-ref-filename="765path">path</a>, <a class="local col0 ref" href="#770date" title='date' data-ref="770date" data-ref-filename="770date">date</a>, <a class="local col6 ref" href="#766rev" title='rev' data-ref="766rev" data-ref-filename="766rev">rev</a>);</td></tr>
<tr><th id="8705">8705</th><td>    }</td></tr>
<tr><th id="8706">8706</th><td>    <b>else</b></td></tr>
<tr><th id="8707">8707</th><td>    {</td></tr>
<tr><th id="8708">8708</th><td>	<b>struct</b> <a class="type" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#stat" title='stat' data-ref="stat" data-ref-filename="stat">stat</a> <dfn class="local col1 decl" id="771sb" title='sb' data-type='struct stat' data-ref="771sb" data-ref-filename="771sb">sb</dfn>;</td></tr>
<tr><th id="8709">8709</th><td>	<b>struct</b> <a class="type" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#tm" title='tm' data-ref="tm" data-ref-filename="tm">tm</a> *<dfn class="local col2 decl" id="772wm" title='wm' data-type='struct tm *' data-ref="772wm" data-ref-filename="772wm">wm</dfn>;</td></tr>
<tr><th id="8710">8710</th><td></td></tr>
<tr><th id="8711">8711</th><td>	<b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcmp" title='strcmp' data-ref="strcmp" data-ref-filename="strcmp">strcmp</a>(<a class="macro" href="../lib/system.h.html#87" title="&quot;/dev/null&quot;" data-ref="_M/DEVNULL">DEVNULL</a>, <a class="local col5 ref" href="#765path" title='path' data-ref="765path" data-ref-filename="765path">path</a>))</td></tr>
<tr><th id="8712">8712</th><td>	{</td></tr>
<tr><th id="8713">8713</th><td>	    <em>const</em> <em>char</em> *<dfn class="local col3 decl" id="773file" title='file' data-type='const char *' data-ref="773file" data-ref-filename="773file">file</dfn> = <a class="ref fn" href="cvs.h.html#last_component" title='last_component' data-ref="last_component" data-ref-filename="last_component">last_component</a> (<a class="local col5 ref" href="#765path" title='path' data-ref="765path" data-ref-filename="765path">path</a>);</td></tr>
<tr><th id="8714">8714</th><td>	    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#__stat50" title='stat' data-ref="__stat50" data-ref-filename="__stat50">stat</a> (<a class="local col3 ref" href="#773file" title='file' data-ref="773file" data-ref-filename="773file">file</a>, &amp;<a class="local col1 ref" href="#771sb" title='sb' data-ref="771sb" data-ref-filename="771sb">sb</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="8715">8715</th><td>		<i>/* Assume that if the stat fails,then the later read for the</i></td></tr>
<tr><th id="8716">8716</th><td><i>		 * diff will too.</i></td></tr>
<tr><th id="8717">8717</th><td><i>		 */</i></td></tr>
<tr><th id="8718">8718</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>1</var>, <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/errno.h.html#55" title="(*__errno())" data-ref="_M/errno">errno</a>, <q>"could not get info for `%s'"</q>, <a class="local col5 ref" href="#765path" title='path' data-ref="765path" data-ref-filename="765path">path</a>);</td></tr>
<tr><th id="8719">8719</th><td>	    <a class="local col2 ref" href="#772wm" title='wm' data-ref="772wm" data-ref-filename="772wm">wm</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#__gmtime50" title='gmtime' data-ref="__gmtime50" data-ref-filename="__gmtime50">gmtime</a> (&amp;<a class="local col1 ref" href="#771sb" title='sb' data-ref="771sb" data-ref-filename="771sb">sb</a>.<a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/stat.h.html#95" title="st_mtim.tv_sec" data-ref="_M/st_mtime">st_mtime</a>);</td></tr>
<tr><th id="8720">8720</th><td>	}</td></tr>
<tr><th id="8721">8721</th><td>	<b>else</b></td></tr>
<tr><th id="8722">8722</th><td>	{</td></tr>
<tr><th id="8723">8723</th><td>	    <a class="typedef" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/types.h.html#time_t" title='time_t' data-type='__int64_t' data-ref="time_t" data-ref-filename="time_t">time_t</a> <dfn class="local col4 decl" id="774t" title='t' data-type='time_t' data-ref="774t" data-ref-filename="774t">t</dfn> = <var>0</var>;</td></tr>
<tr><th id="8724">8724</th><td>	    <a class="local col2 ref" href="#772wm" title='wm' data-ref="772wm" data-ref-filename="772wm">wm</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/time.h.html#__gmtime50" title='gmtime' data-ref="__gmtime50" data-ref-filename="__gmtime50">gmtime</a>(&amp;<a class="local col4 ref" href="#774t" title='t' data-ref="774t" data-ref-filename="774t">t</a>);</td></tr>
<tr><th id="8725">8725</th><td>	}</td></tr>
<tr><th id="8726">8726</th><td></td></tr>
<tr><th id="8727">8727</th><td>	(<em>void</em>) <a class="ref fn" href="cvs.h.html#tm_to_internet" title='tm_to_internet' data-ref="tm_to_internet" data-ref-filename="tm_to_internet">tm_to_internet</a> (<a class="local col8 ref" href="#768datebuf" title='datebuf' data-ref="768datebuf" data-ref-filename="768datebuf">datebuf</a>, <a class="local col2 ref" href="#772wm" title='wm' data-ref="772wm" data-ref-filename="772wm">wm</a>);</td></tr>
<tr><th id="8728">8728</th><td>	<a class="local col9 ref" href="#769label" title='label' data-ref="769label" data-ref-filename="769label">label</a> = <a class="ref fn" href="subr.h.html#Xasprintf" title='Xasprintf' data-ref="Xasprintf" data-ref-filename="Xasprintf">Xasprintf</a> (<q>"-L%s\t%s"</q>, <a class="local col5 ref" href="#765path" title='path' data-ref="765path" data-ref-filename="765path">path</a>, <a class="local col8 ref" href="#768datebuf" title='datebuf' data-ref="768datebuf" data-ref-filename="768datebuf">datebuf</a>);</td></tr>
<tr><th id="8729">8729</th><td>    }</td></tr>
<tr><th id="8730">8730</th><td>    <b>return</b> <a class="local col9 ref" href="#769label" title='label' data-ref="769label" data-ref-filename="769label">label</a>;</td></tr>
<tr><th id="8731">8731</th><td>}</td></tr>
<tr><th id="8732">8732</th><td></td></tr>
<tr><th id="8733">8733</th><td></td></tr>
<tr><th id="8734">8734</th><td></td></tr>
<tr><th id="8735">8735</th><td><i>/*</i></td></tr>
<tr><th id="8736">8736</th><td><i> * Set up a local/custom RCS keyword for expansion.</i></td></tr>
<tr><th id="8737">8737</th><td><i> *</i></td></tr>
<tr><th id="8738">8738</th><td><i> * INPUTS</i></td></tr>
<tr><th id="8739">8739</th><td><i> *   infopath		Path to file being parsed, for error messages.</i></td></tr>
<tr><th id="8740">8740</th><td><i> *   ln			Line number of INFOPATH being processed, for error</i></td></tr>
<tr><th id="8741">8741</th><td><i> *			messages.</i></td></tr>
<tr><th id="8742">8742</th><td><i> *   keywords_in</i></td></tr>
<tr><th id="8743">8743</th><td><i> *   arg</i></td></tr>
<tr><th id="8744">8744</th><td><i> *</i></td></tr>
<tr><th id="8745">8745</th><td><i> * OUTPUTS</i></td></tr>
<tr><th id="8746">8746</th><td><i> *   keywords_in</i></td></tr>
<tr><th id="8747">8747</th><td><i> */</i></td></tr>
<tr><th id="8748">8748</th><td><em>void</em></td></tr>
<tr><th id="8749">8749</th><td><dfn class="decl def fn" id="RCS_setlocalid" title='RCS_setlocalid' data-ref="RCS_setlocalid" data-ref-filename="RCS_setlocalid">RCS_setlocalid</dfn> (<em>const</em> <em>char</em> *<dfn class="local col5 decl" id="775infopath" title='infopath' data-type='const char *' data-ref="775infopath" data-ref-filename="775infopath">infopath</dfn>, <em>unsigned</em> <em>int</em> <dfn class="local col6 decl" id="776ln" title='ln' data-type='unsigned int' data-ref="776ln" data-ref-filename="776ln">ln</dfn>,</td></tr>
<tr><th id="8750">8750</th><td>		<em>void</em> **<dfn class="local col7 decl" id="777keywords_in" title='keywords_in' data-type='void **' data-ref="777keywords_in" data-ref-filename="777keywords_in">keywords_in</dfn>, <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="778arg" title='arg' data-type='const char *' data-ref="778arg" data-ref-filename="778arg">arg</dfn>)</td></tr>
<tr><th id="8751">8751</th><td>{</td></tr>
<tr><th id="8752">8752</th><td>    <em>char</em> *<dfn class="local col9 decl" id="779copy" title='copy' data-type='char *' data-ref="779copy" data-ref-filename="779copy">copy</dfn>, *<dfn class="local col0 decl" id="780next" title='next' data-type='char *' data-ref="780next" data-ref-filename="780next">next</dfn>, *<dfn class="local col1 decl" id="781key" title='key' data-type='char *' data-ref="781key" data-ref-filename="781key">key</dfn>, *<dfn class="local col2 decl" id="782s" title='s' data-type='char *' data-ref="782s" data-ref-filename="782s">s</dfn>;</td></tr>
<tr><th id="8753">8753</th><td>    <b>struct</b> <a class="type" href="#rcs_keyword" title='rcs_keyword' data-ref="rcs_keyword" data-ref-filename="rcs_keyword">rcs_keyword</a> *<dfn class="local col3 decl" id="783keywords" title='keywords' data-type='struct rcs_keyword *' data-ref="783keywords" data-ref-filename="783keywords">keywords</dfn>;</td></tr>
<tr><th id="8754">8754</th><td>    <b>enum</b> <a class="type" href="#keyword" title='keyword' data-ref="keyword" data-ref-filename="keyword">keyword</a> <dfn class="local col4 decl" id="784save_expandto" title='save_expandto' data-type='enum keyword' data-ref="784save_expandto" data-ref-filename="784save_expandto">save_expandto</dfn>;</td></tr>
<tr><th id="8755">8755</th><td></td></tr>
<tr><th id="8756">8756</th><td>    <b>if</b> (!*<a class="local col7 ref" href="#777keywords_in" title='keywords_in' data-ref="777keywords_in" data-ref-filename="777keywords_in">keywords_in</a>)</td></tr>
<tr><th id="8757">8757</th><td>	*<a class="local col7 ref" href="#777keywords_in" title='keywords_in' data-ref="777keywords_in" data-ref-filename="777keywords_in">keywords_in</a> = <a class="tu ref fn" href="#new_keywords" title='new_keywords' data-use='c' data-ref="new_keywords" data-ref-filename="new_keywords">new_keywords</a> ();</td></tr>
<tr><th id="8758">8758</th><td>    <a class="local col3 ref" href="#783keywords" title='keywords' data-ref="783keywords" data-ref-filename="783keywords">keywords</a> = *<a class="local col7 ref" href="#777keywords_in" title='keywords_in' data-ref="777keywords_in" data-ref-filename="777keywords_in">keywords_in</a>;</td></tr>
<tr><th id="8759">8759</th><td></td></tr>
<tr><th id="8760">8760</th><td>    <a class="local col9 ref" href="#779copy" title='copy' data-ref="779copy" data-ref-filename="779copy">copy</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col8 ref" href="#778arg" title='arg' data-ref="778arg" data-ref-filename="778arg">arg</a>);</td></tr>
<tr><th id="8761">8761</th><td>    <a class="local col0 ref" href="#780next" title='next' data-ref="780next" data-ref-filename="780next">next</a> = <a class="local col9 ref" href="#779copy" title='copy' data-ref="779copy" data-ref-filename="779copy">copy</a>;</td></tr>
<tr><th id="8762">8762</th><td>    <a class="local col1 ref" href="#781key" title='key' data-ref="781key" data-ref-filename="781key">key</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strtok" title='strtok' data-ref="strtok" data-ref-filename="strtok">strtok</a> (<a class="local col0 ref" href="#780next" title='next' data-ref="780next" data-ref-filename="780next">next</a>, <q>"="</q>);</td></tr>
<tr><th id="8763">8763</th><td></td></tr>
<tr><th id="8764">8764</th><td>    <i>/*</i></td></tr>
<tr><th id="8765">8765</th><td><i>     * Validate key</i></td></tr>
<tr><th id="8766">8766</th><td><i>     */</i></td></tr>
<tr><th id="8767">8767</th><td>    <b>for</b> (<a class="local col2 ref" href="#782s" title='s' data-ref="782s" data-ref-filename="782s">s</a> = <a class="local col1 ref" href="#781key" title='key' data-ref="781key" data-ref-filename="781key">key</a>; *<a class="local col2 ref" href="#782s" title='s' data-ref="782s" data-ref-filename="782s">s</a> != <kbd>'\0'</kbd>; <a class="local col2 ref" href="#782s" title='s' data-ref="782s" data-ref-filename="782s">s</a>++)</td></tr>
<tr><th id="8768">8768</th><td>    {</td></tr>
<tr><th id="8769">8769</th><td>	<b>if</b> (! <a class="macro" href="../../../../../objdir.amd64/destdir.amd64/usr/include/sys/ctype_inline.h.html#49" title="((int)((_ctype_tab_ + 1)[((unsigned char) *s)] &amp; 0x0001))" data-ref="_M/isalpha">isalpha</a> ((<em>unsigned</em> <em>char</em>) *<a class="local col2 ref" href="#782s" title='s' data-ref="782s" data-ref-filename="782s">s</a>))</td></tr>
<tr><th id="8770">8770</th><td>	{</td></tr>
<tr><th id="8771">8771</th><td>	    <b>if</b> (!<a class="ref fn" href="parseinfo.h.html#parse_error" title='parse_error' data-ref="parse_error" data-ref-filename="parse_error">parse_error</a> (<a class="local col5 ref" href="#775infopath" title='infopath' data-ref="775infopath" data-ref-filename="775infopath">infopath</a>, <a class="local col6 ref" href="#776ln" title='ln' data-ref="776ln" data-ref-filename="776ln">ln</a>))</td></tr>
<tr><th id="8772">8772</th><td>		    <a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="8773">8773</th><td><q>"%s [%u]: LocalKeyword ignored: Bad character `%c' in key `%s'"</q>,</td></tr>
<tr><th id="8774">8774</th><td>			   <a class="ref fn" href="root.h.html#primary_root_inverse_translate" title='primary_root_inverse_translate' data-ref="primary_root_inverse_translate" data-ref-filename="primary_root_inverse_translate">primary_root_inverse_translate</a> (<a class="local col5 ref" href="#775infopath" title='infopath' data-ref="775infopath" data-ref-filename="775infopath">infopath</a>),</td></tr>
<tr><th id="8775">8775</th><td>			   <a class="local col6 ref" href="#776ln" title='ln' data-ref="776ln" data-ref-filename="776ln">ln</a>, *<a class="local col2 ref" href="#782s" title='s' data-ref="782s" data-ref-filename="782s">s</a>, <a class="local col1 ref" href="#781key" title='key' data-ref="781key" data-ref-filename="781key">key</a>);</td></tr>
<tr><th id="8776">8776</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col9 ref" href="#779copy" title='copy' data-ref="779copy" data-ref-filename="779copy">copy</a>);</td></tr>
<tr><th id="8777">8777</th><td>	    <b>return</b>;</td></tr>
<tr><th id="8778">8778</th><td>	}</td></tr>
<tr><th id="8779">8779</th><td>    }</td></tr>
<tr><th id="8780">8780</th><td></td></tr>
<tr><th id="8781">8781</th><td>    <a class="local col4 ref" href="#784save_expandto" title='save_expandto' data-ref="784save_expandto" data-ref-filename="784save_expandto">save_expandto</a> = <a class="local col3 ref" href="#783keywords" title='keywords' data-ref="783keywords" data-ref-filename="783keywords">keywords</a>[<a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a>].<a class="tu ref field" href="#rcs_keyword::expandto" title='rcs_keyword::expandto' data-use='r' data-ref="rcs_keyword::expandto" data-ref-filename="rcs_keyword..expandto">expandto</a>;</td></tr>
<tr><th id="8782">8782</th><td></td></tr>
<tr><th id="8783">8783</th><td>    <i>/* options? */</i></td></tr>
<tr><th id="8784">8784</th><td>    <b>while</b> ((<a class="local col1 ref" href="#781key" title='key' data-ref="781key" data-ref-filename="781key">key</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strtok" title='strtok' data-ref="strtok" data-ref-filename="strtok">strtok</a> (<span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <q>","</q>)) != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="8785">8785</th><td>	<b>if</b> (!<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcmp" title='strcmp' data-ref="strcmp" data-ref-filename="strcmp">strcmp</a>(<a class="local col1 ref" href="#781key" title='key' data-ref="781key" data-ref-filename="781key">key</a>, <a class="local col3 ref" href="#783keywords" title='keywords' data-ref="783keywords" data-ref-filename="783keywords">keywords</a>[<a class="enum" href="#KEYWORD_ID" title='KEYWORD_ID' data-ref="KEYWORD_ID" data-ref-filename="KEYWORD_ID">KEYWORD_ID</a>].<a class="tu ref field" href="#rcs_keyword::string" title='rcs_keyword::string' data-use='r' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</a>))</td></tr>
<tr><th id="8786">8786</th><td>	    <a class="local col3 ref" href="#783keywords" title='keywords' data-ref="783keywords" data-ref-filename="783keywords">keywords</a>[<a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a>].<a class="tu ref field" href="#rcs_keyword::expandto" title='rcs_keyword::expandto' data-use='w' data-ref="rcs_keyword::expandto" data-ref-filename="rcs_keyword..expandto">expandto</a> = <a class="enum" href="#KEYWORD_ID" title='KEYWORD_ID' data-ref="KEYWORD_ID" data-ref-filename="KEYWORD_ID">KEYWORD_ID</a>;</td></tr>
<tr><th id="8787">8787</th><td>	<b>else</b> <b>if</b> (!<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcmp" title='strcmp' data-ref="strcmp" data-ref-filename="strcmp">strcmp</a>(<a class="local col1 ref" href="#781key" title='key' data-ref="781key" data-ref-filename="781key">key</a>, <a class="local col3 ref" href="#783keywords" title='keywords' data-ref="783keywords" data-ref-filename="783keywords">keywords</a>[<a class="enum" href="#KEYWORD_HEADER" title='KEYWORD_HEADER' data-ref="KEYWORD_HEADER" data-ref-filename="KEYWORD_HEADER">KEYWORD_HEADER</a>].<a class="tu ref field" href="#rcs_keyword::string" title='rcs_keyword::string' data-use='r' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</a>))</td></tr>
<tr><th id="8788">8788</th><td>	    <a class="local col3 ref" href="#783keywords" title='keywords' data-ref="783keywords" data-ref-filename="783keywords">keywords</a>[<a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a>].<a class="tu ref field" href="#rcs_keyword::expandto" title='rcs_keyword::expandto' data-use='w' data-ref="rcs_keyword::expandto" data-ref-filename="rcs_keyword..expandto">expandto</a> = <a class="enum" href="#KEYWORD_HEADER" title='KEYWORD_HEADER' data-ref="KEYWORD_HEADER" data-ref-filename="KEYWORD_HEADER">KEYWORD_HEADER</a>;</td></tr>
<tr><th id="8789">8789</th><td>	<b>else</b> <b>if</b> (!<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcmp" title='strcmp' data-ref="strcmp" data-ref-filename="strcmp">strcmp</a>(<a class="local col1 ref" href="#781key" title='key' data-ref="781key" data-ref-filename="781key">key</a>, <a class="local col3 ref" href="#783keywords" title='keywords' data-ref="783keywords" data-ref-filename="783keywords">keywords</a>[<a class="enum" href="#KEYWORD_CVSHEADER" title='KEYWORD_CVSHEADER' data-ref="KEYWORD_CVSHEADER" data-ref-filename="KEYWORD_CVSHEADER">KEYWORD_CVSHEADER</a>].<a class="tu ref field" href="#rcs_keyword::string" title='rcs_keyword::string' data-use='r' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</a>))</td></tr>
<tr><th id="8790">8790</th><td>	    <a class="local col3 ref" href="#783keywords" title='keywords' data-ref="783keywords" data-ref-filename="783keywords">keywords</a>[<a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a>].<a class="tu ref field" href="#rcs_keyword::expandto" title='rcs_keyword::expandto' data-use='w' data-ref="rcs_keyword::expandto" data-ref-filename="rcs_keyword..expandto">expandto</a> = <a class="enum" href="#KEYWORD_CVSHEADER" title='KEYWORD_CVSHEADER' data-ref="KEYWORD_CVSHEADER" data-ref-filename="KEYWORD_CVSHEADER">KEYWORD_CVSHEADER</a>;</td></tr>
<tr><th id="8791">8791</th><td>	<b>else</b></td></tr>
<tr><th id="8792">8792</th><td>	{</td></tr>
<tr><th id="8793">8793</th><td>	    <a class="local col3 ref" href="#783keywords" title='keywords' data-ref="783keywords" data-ref-filename="783keywords">keywords</a>[<a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a>].<a class="tu ref field" href="#rcs_keyword::expandto" title='rcs_keyword::expandto' data-use='w' data-ref="rcs_keyword::expandto" data-ref-filename="rcs_keyword..expandto">expandto</a> = <a class="local col4 ref" href="#784save_expandto" title='save_expandto' data-ref="784save_expandto" data-ref-filename="784save_expandto">save_expandto</a>;</td></tr>
<tr><th id="8794">8794</th><td>	    <b>if</b> (!<a class="ref fn" href="parseinfo.h.html#parse_error" title='parse_error' data-ref="parse_error" data-ref-filename="parse_error">parse_error</a> (<a class="local col5 ref" href="#775infopath" title='infopath' data-ref="775infopath" data-ref-filename="775infopath">infopath</a>, <a class="local col6 ref" href="#776ln" title='ln' data-ref="776ln" data-ref-filename="776ln">ln</a>))</td></tr>
<tr><th id="8795">8795</th><td>		<a class="ref fn" href="../lib/error.h.html#error" title='error' data-ref="error" data-ref-filename="error">error</a> (<var>0</var>, <var>0</var>,</td></tr>
<tr><th id="8796">8796</th><td><q>"%s [%u]: LocalKeyword ignored: Unknown LocalId mode: `%s'"</q>,</td></tr>
<tr><th id="8797">8797</th><td>		       <a class="ref fn" href="root.h.html#primary_root_inverse_translate" title='primary_root_inverse_translate' data-ref="primary_root_inverse_translate" data-ref-filename="primary_root_inverse_translate">primary_root_inverse_translate</a> (<a class="local col5 ref" href="#775infopath" title='infopath' data-ref="775infopath" data-ref-filename="775infopath">infopath</a>),</td></tr>
<tr><th id="8798">8798</th><td>		       <a class="local col6 ref" href="#776ln" title='ln' data-ref="776ln" data-ref-filename="776ln">ln</a>, <a class="local col1 ref" href="#781key" title='key' data-ref="781key" data-ref-filename="781key">key</a>);</td></tr>
<tr><th id="8799">8799</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col9 ref" href="#779copy" title='copy' data-ref="779copy" data-ref-filename="779copy">copy</a>);</td></tr>
<tr><th id="8800">8800</th><td>	    <b>return</b>;</td></tr>
<tr><th id="8801">8801</th><td>	}</td></tr>
<tr><th id="8802">8802</th><td>    }</td></tr>
<tr><th id="8803">8803</th><td></td></tr>
<tr><th id="8804">8804</th><td>    <a class="local col3 ref" href="#783keywords" title='keywords' data-ref="783keywords" data-ref-filename="783keywords">keywords</a>[<a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a>].<a class="tu ref field" href="#rcs_keyword::string" title='rcs_keyword::string' data-use='w' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a> (<a class="local col0 ref" href="#780next" title='next' data-ref="780next" data-ref-filename="780next">next</a>);</td></tr>
<tr><th id="8805">8805</th><td>    <a class="local col3 ref" href="#783keywords" title='keywords' data-ref="783keywords" data-ref-filename="783keywords">keywords</a>[<a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a>].<a class="tu ref field" href="#rcs_keyword::len" title='rcs_keyword::len' data-use='w' data-ref="rcs_keyword::len" data-ref-filename="rcs_keyword..len">len</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a> (<a class="local col0 ref" href="#780next" title='next' data-ref="780next" data-ref-filename="780next">next</a>);</td></tr>
<tr><th id="8806">8806</th><td>    <a class="local col3 ref" href="#783keywords" title='keywords' data-ref="783keywords" data-ref-filename="783keywords">keywords</a>[<a class="enum" href="#KEYWORD_LOCALID" title='KEYWORD_LOCALID' data-ref="KEYWORD_LOCALID" data-ref-filename="KEYWORD_LOCALID">KEYWORD_LOCALID</a>].<a class="tu ref field" href="#rcs_keyword::expandit" title='rcs_keyword::expandit' data-use='w' data-ref="rcs_keyword::expandit" data-ref-filename="rcs_keyword..expandit">expandit</a> = <var>1</var>;</td></tr>
<tr><th id="8807">8807</th><td></td></tr>
<tr><th id="8808">8808</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a> (<a class="local col9 ref" href="#779copy" title='copy' data-ref="779copy" data-ref-filename="779copy">copy</a>);</td></tr>
<tr><th id="8809">8809</th><td>}</td></tr>
<tr><th id="8810">8810</th><td></td></tr>
<tr><th id="8811">8811</th><td></td></tr>
<tr><th id="8812">8812</th><td></td></tr>
<tr><th id="8813">8813</th><td><em>void</em></td></tr>
<tr><th id="8814">8814</th><td><dfn class="decl def fn" id="RCS_setincexc" title='RCS_setincexc' data-ref="RCS_setincexc" data-ref-filename="RCS_setincexc">RCS_setincexc</dfn> (<em>void</em> **<dfn class="local col5 decl" id="785keywords_in" title='keywords_in' data-type='void **' data-ref="785keywords_in" data-ref-filename="785keywords_in">keywords_in</dfn>, <em>const</em> <em>char</em> *<dfn class="local col6 decl" id="786arg" title='arg' data-type='const char *' data-ref="786arg" data-ref-filename="786arg">arg</dfn>)</td></tr>
<tr><th id="8815">8815</th><td>{</td></tr>
<tr><th id="8816">8816</th><td>    <em>char</em> *<dfn class="local col7 decl" id="787key" title='key' data-type='char *' data-ref="787key" data-ref-filename="787key">key</dfn>;</td></tr>
<tr><th id="8817">8817</th><td>    <em>char</em> *<dfn class="local col8 decl" id="788copy" title='copy' data-type='char *' data-ref="788copy" data-ref-filename="788copy">copy</dfn>, *<dfn class="local col9 decl" id="789next" title='next' data-type='char *' data-ref="789next" data-ref-filename="789next">next</dfn>;</td></tr>
<tr><th id="8818">8818</th><td>    <span class="macro" title="_Bool" data-ref="_M/bool">bool</span> <dfn class="local col0 decl" id="790include" title='include' data-type='_Bool' data-ref="790include" data-ref-filename="790include">include</dfn> = <span class="macro" title="0" data-ref="_M/false">false</span>;</td></tr>
<tr><th id="8819">8819</th><td>    <b>struct</b> <a class="type" href="#rcs_keyword" title='rcs_keyword' data-ref="rcs_keyword" data-ref-filename="rcs_keyword">rcs_keyword</a> *<dfn class="local col1 decl" id="791keyword" title='keyword' data-type='struct rcs_keyword *' data-ref="791keyword" data-ref-filename="791keyword">keyword</dfn>;</td></tr>
<tr><th id="8820">8820</th><td>    <b>struct</b> <a class="type" href="#rcs_keyword" title='rcs_keyword' data-ref="rcs_keyword" data-ref-filename="rcs_keyword">rcs_keyword</a> *<dfn class="local col2 decl" id="792keywords" title='keywords' data-type='struct rcs_keyword *' data-ref="792keywords" data-ref-filename="792keywords">keywords</dfn>;</td></tr>
<tr><th id="8821">8821</th><td></td></tr>
<tr><th id="8822">8822</th><td>    <b>if</b> (!*<a class="local col5 ref" href="#785keywords_in" title='keywords_in' data-ref="785keywords_in" data-ref-filename="785keywords_in">keywords_in</a>)</td></tr>
<tr><th id="8823">8823</th><td>	*<a class="local col5 ref" href="#785keywords_in" title='keywords_in' data-ref="785keywords_in" data-ref-filename="785keywords_in">keywords_in</a> = <a class="tu ref fn" href="#new_keywords" title='new_keywords' data-use='c' data-ref="new_keywords" data-ref-filename="new_keywords">new_keywords</a> ();</td></tr>
<tr><th id="8824">8824</th><td>    <a class="local col2 ref" href="#792keywords" title='keywords' data-ref="792keywords" data-ref-filename="792keywords">keywords</a> = *<a class="local col5 ref" href="#785keywords_in" title='keywords_in' data-ref="785keywords_in" data-ref-filename="785keywords_in">keywords_in</a>;</td></tr>
<tr><th id="8825">8825</th><td></td></tr>
<tr><th id="8826">8826</th><td>    <a class="local col8 ref" href="#788copy" title='copy' data-ref="788copy" data-ref-filename="788copy">copy</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a>(<a class="local col6 ref" href="#786arg" title='arg' data-ref="786arg" data-ref-filename="786arg">arg</a>);</td></tr>
<tr><th id="8827">8827</th><td>    <a class="local col9 ref" href="#789next" title='next' data-ref="789next" data-ref-filename="789next">next</a> = <a class="local col8 ref" href="#788copy" title='copy' data-ref="788copy" data-ref-filename="788copy">copy</a>;</td></tr>
<tr><th id="8828">8828</th><td>    <b>switch</b> (*<a class="local col9 ref" href="#789next" title='next' data-ref="789next" data-ref-filename="789next">next</a>++) {</td></tr>
<tr><th id="8829">8829</th><td>	<b>case</b> <kbd>'e'</kbd>:</td></tr>
<tr><th id="8830">8830</th><td>	    <a class="local col0 ref" href="#790include" title='include' data-ref="790include" data-ref-filename="790include">include</a> = <span class="macro" title="0" data-ref="_M/false">false</span>;</td></tr>
<tr><th id="8831">8831</th><td>	    <b>break</b>;</td></tr>
<tr><th id="8832">8832</th><td>	<b>case</b> <kbd>'i'</kbd>:</td></tr>
<tr><th id="8833">8833</th><td>	    <a class="local col0 ref" href="#790include" title='include' data-ref="790include" data-ref-filename="790include">include</a> = <span class="macro" title="1" data-ref="_M/true">true</span>;</td></tr>
<tr><th id="8834">8834</th><td>	    <b>break</b>;</td></tr>
<tr><th id="8835">8835</th><td>	<b>default</b>:</td></tr>
<tr><th id="8836">8836</th><td>	    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a>(<a class="local col8 ref" href="#788copy" title='copy' data-ref="788copy" data-ref-filename="788copy">copy</a>);</td></tr>
<tr><th id="8837">8837</th><td>	    <b>return</b>;</td></tr>
<tr><th id="8838">8838</th><td>    }</td></tr>
<tr><th id="8839">8839</th><td></td></tr>
<tr><th id="8840">8840</th><td>    <b>if</b> (<a class="local col0 ref" href="#790include" title='include' data-ref="790include" data-ref-filename="790include">include</a>)</td></tr>
<tr><th id="8841">8841</th><td>	<b>for</b> (<a class="local col1 ref" href="#791keyword" title='keyword' data-ref="791keyword" data-ref-filename="791keyword">keyword</a> = <a class="local col2 ref" href="#792keywords" title='keywords' data-ref="792keywords" data-ref-filename="792keywords">keywords</a>; <a class="local col1 ref" href="#791keyword" title='keyword' data-ref="791keyword" data-ref-filename="791keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::string" title='rcs_keyword::string' data-use='r' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>; <a class="local col1 ref" href="#791keyword" title='keyword' data-ref="791keyword" data-ref-filename="791keyword">keyword</a>++)</td></tr>
<tr><th id="8842">8842</th><td>	{</td></tr>
<tr><th id="8843">8843</th><td>	    <a class="local col1 ref" href="#791keyword" title='keyword' data-ref="791keyword" data-ref-filename="791keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::expandit" title='rcs_keyword::expandit' data-use='w' data-ref="rcs_keyword::expandit" data-ref-filename="rcs_keyword..expandit">expandit</a> = <span class="macro" title="0" data-ref="_M/false">false</span>;</td></tr>
<tr><th id="8844">8844</th><td>	}</td></tr>
<tr><th id="8845">8845</th><td></td></tr>
<tr><th id="8846">8846</th><td>    <a class="local col7 ref" href="#787key" title='key' data-ref="787key" data-ref-filename="787key">key</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strtok" title='strtok' data-ref="strtok" data-ref-filename="strtok">strtok</a>(<a class="local col9 ref" href="#789next" title='next' data-ref="789next" data-ref-filename="789next">next</a>, <q>","</q>);</td></tr>
<tr><th id="8847">8847</th><td>    <b>while</b> (<a class="local col7 ref" href="#787key" title='key' data-ref="787key" data-ref-filename="787key">key</a>) {</td></tr>
<tr><th id="8848">8848</th><td>	<b>for</b> (<a class="local col1 ref" href="#791keyword" title='keyword' data-ref="791keyword" data-ref-filename="791keyword">keyword</a> = <a class="local col2 ref" href="#792keywords" title='keywords' data-ref="792keywords" data-ref-filename="792keywords">keywords</a>; <a class="local col1 ref" href="#791keyword" title='keyword' data-ref="791keyword" data-ref-filename="791keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::string" title='rcs_keyword::string' data-use='r' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>; <a class="local col1 ref" href="#791keyword" title='keyword' data-ref="791keyword" data-ref-filename="791keyword">keyword</a>++) {</td></tr>
<tr><th id="8849">8849</th><td>	    <b>if</b> (<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strcmp" title='strcmp' data-ref="strcmp" data-ref-filename="strcmp">strcmp</a> (<a class="local col1 ref" href="#791keyword" title='keyword' data-ref="791keyword" data-ref-filename="791keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::string" title='rcs_keyword::string' data-use='r' data-ref="rcs_keyword::string" data-ref-filename="rcs_keyword..string">string</a>, <a class="local col7 ref" href="#787key" title='key' data-ref="787key" data-ref-filename="787key">key</a>) == <var>0</var>)</td></tr>
<tr><th id="8850">8850</th><td>		<a class="local col1 ref" href="#791keyword" title='keyword' data-ref="791keyword" data-ref-filename="791keyword">keyword</a>-&gt;<a class="tu ref field" href="#rcs_keyword::expandit" title='rcs_keyword::expandit' data-use='w' data-ref="rcs_keyword::expandit" data-ref-filename="rcs_keyword..expandit">expandit</a> = <a class="local col0 ref" href="#790include" title='include' data-ref="790include" data-ref-filename="790include">include</a>;</td></tr>
<tr><th id="8851">8851</th><td>	}</td></tr>
<tr><th id="8852">8852</th><td>	<a class="local col7 ref" href="#787key" title='key' data-ref="787key" data-ref-filename="787key">key</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strtok" title='strtok' data-ref="strtok" data-ref-filename="strtok">strtok</a>(<span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <q>","</q>);</td></tr>
<tr><th id="8853">8853</th><td>    }</td></tr>
<tr><th id="8854">8854</th><td>    <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/stdlib.h.html#free" title='free' data-ref="free" data-ref-filename="free">free</a>(<a class="local col8 ref" href="#788copy" title='copy' data-ref="788copy" data-ref-filename="788copy">copy</a>);</td></tr>
<tr><th id="8855">8855</th><td>    <b>return</b>;</td></tr>
<tr><th id="8856">8856</th><td>}</td></tr>
<tr><th id="8857">8857</th><td></td></tr>
<tr><th id="8858">8858</th><td></td></tr>
<tr><th id="8859">8859</th><td></td></tr>
<tr><th id="8860">8860</th><td><u>#define <dfn class="macro" id="_M/ATTIC" data-ref="_M/ATTIC">ATTIC</dfn> "/" CVSATTIC</u></td></tr>
<tr><th id="8861">8861</th><td><em>static</em> <em>char</em> *</td></tr>
<tr><th id="8862">8862</th><td><dfn class="tu decl def fn" id="getfullCVSname" title='getfullCVSname' data-type='char * getfullCVSname(char * CVSname, char ** pathstore)' data-ref="getfullCVSname" data-ref-filename="getfullCVSname">getfullCVSname</dfn>(<em>char</em> *<dfn class="local col3 decl" id="793CVSname" title='CVSname' data-type='char *' data-ref="793CVSname" data-ref-filename="793CVSname">CVSname</dfn>, <em>char</em> **<dfn class="local col4 decl" id="794pathstore" title='pathstore' data-type='char **' data-ref="794pathstore" data-ref-filename="794pathstore">pathstore</dfn>)</td></tr>
<tr><th id="8863">8863</th><td>{</td></tr>
<tr><th id="8864">8864</th><td>    <b>if</b> (<a class="ref" href="root.h.html#current_parsed_root" title='current_parsed_root' data-ref="current_parsed_root" data-ref-filename="current_parsed_root">current_parsed_root</a>-&gt;<a class="ref field" href="root.h.html#cvsroot_s::directory" title='cvsroot_s::directory' data-ref="cvsroot_s::directory" data-ref-filename="cvsroot_s..directory">directory</a>) {</td></tr>
<tr><th id="8865">8865</th><td>	<em>int</em> <dfn class="local col5 decl" id="795rootlen" title='rootlen' data-type='int' data-ref="795rootlen" data-ref-filename="795rootlen">rootlen</dfn>;</td></tr>
<tr><th id="8866">8866</th><td>	<em>char</em> *<dfn class="local col6 decl" id="796c" title='c' data-type='char *' data-ref="796c" data-ref-filename="796c">c</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="8867">8867</th><td>	<em>int</em> <dfn class="local col7 decl" id="797alen" title='alen' data-type='int' data-ref="797alen" data-ref-filename="797alen">alen</dfn> = <b>sizeof</b>(<a class="macro" href="#8860" title="&quot;/&quot; &quot;Attic&quot;" data-ref="_M/ATTIC">ATTIC</a>) - <var>1</var>;</td></tr>
<tr><th id="8868">8868</th><td></td></tr>
<tr><th id="8869">8869</th><td>	*<a class="local col4 ref" href="#794pathstore" title='pathstore' data-ref="794pathstore" data-ref-filename="794pathstore">pathstore</a> = <a class="macro" href="subr.h.html#77" title="Xstrdup" data-ref="_M/xstrdup">xstrdup</a>(<a class="local col3 ref" href="#793CVSname" title='CVSname' data-ref="793CVSname" data-ref-filename="793CVSname">CVSname</a>);</td></tr>
<tr><th id="8870">8870</th><td>	<b>if</b> ((<a class="local col6 ref" href="#796c" title='c' data-ref="796c" data-ref-filename="796c">c</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strrchr" title='strrchr' data-ref="strrchr" data-ref-filename="strrchr">strrchr</a>(*<a class="local col4 ref" href="#794pathstore" title='pathstore' data-ref="794pathstore" data-ref-filename="794pathstore">pathstore</a>, <kbd>'/'</kbd>)) != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="8871">8871</th><td>	    <b>if</b> (<a class="local col6 ref" href="#796c" title='c' data-ref="796c" data-ref-filename="796c">c</a> - *<a class="local col4 ref" href="#794pathstore" title='pathstore' data-ref="794pathstore" data-ref-filename="794pathstore">pathstore</a> &gt;= <a class="local col7 ref" href="#797alen" title='alen' data-ref="797alen" data-ref-filename="797alen">alen</a>) {</td></tr>
<tr><th id="8872">8872</th><td>		<b>if</b> (!<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a>(<a class="local col6 ref" href="#796c" title='c' data-ref="796c" data-ref-filename="796c">c</a> - <a class="local col7 ref" href="#797alen" title='alen' data-ref="797alen" data-ref-filename="797alen">alen</a>, <a class="macro" href="#8860" title="&quot;/&quot; &quot;Attic&quot;" data-ref="_M/ATTIC">ATTIC</a>, <a class="local col7 ref" href="#797alen" title='alen' data-ref="797alen" data-ref-filename="797alen">alen</a>)) {</td></tr>
<tr><th id="8873">8873</th><td>		    <b>while</b> (*<a class="local col6 ref" href="#796c" title='c' data-ref="796c" data-ref-filename="796c">c</a> != <kbd>'\0'</kbd>) {</td></tr>
<tr><th id="8874">8874</th><td>			*(<a class="local col6 ref" href="#796c" title='c' data-ref="796c" data-ref-filename="796c">c</a> - <a class="local col7 ref" href="#797alen" title='alen' data-ref="797alen" data-ref-filename="797alen">alen</a>) = *<a class="local col6 ref" href="#796c" title='c' data-ref="796c" data-ref-filename="796c">c</a>;</td></tr>
<tr><th id="8875">8875</th><td>			<a class="local col6 ref" href="#796c" title='c' data-ref="796c" data-ref-filename="796c">c</a>++;</td></tr>
<tr><th id="8876">8876</th><td>		    }</td></tr>
<tr><th id="8877">8877</th><td>		    *(<a class="local col6 ref" href="#796c" title='c' data-ref="796c" data-ref-filename="796c">c</a> - <a class="local col7 ref" href="#797alen" title='alen' data-ref="797alen" data-ref-filename="797alen">alen</a>) = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="8878">8878</th><td>		}</td></tr>
<tr><th id="8879">8879</th><td>	    }</td></tr>
<tr><th id="8880">8880</th><td>	}</td></tr>
<tr><th id="8881">8881</th><td></td></tr>
<tr><th id="8882">8882</th><td>	<a class="local col5 ref" href="#795rootlen" title='rootlen' data-ref="795rootlen" data-ref-filename="795rootlen">rootlen</a> = <a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strlen" title='strlen' data-ref="strlen" data-ref-filename="strlen">strlen</a>(<a class="ref" href="root.h.html#current_parsed_root" title='current_parsed_root' data-ref="current_parsed_root" data-ref-filename="current_parsed_root">current_parsed_root</a>-&gt;<a class="ref field" href="root.h.html#cvsroot_s::directory" title='cvsroot_s::directory' data-ref="cvsroot_s::directory" data-ref-filename="cvsroot_s..directory">directory</a>);</td></tr>
<tr><th id="8883">8883</th><td>	<b>if</b> (!<a class="ref fn" href="../../../../../objdir.amd64/destdir.amd64/usr/include/string.h.html#strncmp" title='strncmp' data-ref="strncmp" data-ref-filename="strncmp">strncmp</a>(*<a class="local col4 ref" href="#794pathstore" title='pathstore' data-ref="794pathstore" data-ref-filename="794pathstore">pathstore</a>, <a class="ref" href="root.h.html#current_parsed_root" title='current_parsed_root' data-ref="current_parsed_root" data-ref-filename="current_parsed_root">current_parsed_root</a>-&gt;<a class="ref field" href="root.h.html#cvsroot_s::directory" title='cvsroot_s::directory' data-ref="cvsroot_s::directory" data-ref-filename="cvsroot_s..directory">directory</a>, <a class="local col5 ref" href="#795rootlen" title='rootlen' data-ref="795rootlen" data-ref-filename="795rootlen">rootlen</a>) &amp;&amp;</td></tr>
<tr><th id="8884">8884</th><td>	    (*<a class="local col4 ref" href="#794pathstore" title='pathstore' data-ref="794pathstore" data-ref-filename="794pathstore">pathstore</a>)[<a class="local col5 ref" href="#795rootlen" title='rootlen' data-ref="795rootlen" data-ref-filename="795rootlen">rootlen</a>] == <kbd>'/'</kbd>)</td></tr>
<tr><th id="8885">8885</th><td>	    <a class="local col3 ref" href="#793CVSname" title='CVSname' data-ref="793CVSname" data-ref-filename="793CVSname">CVSname</a> = (*<a class="local col4 ref" href="#794pathstore" title='pathstore' data-ref="794pathstore" data-ref-filename="794pathstore">pathstore</a> + <a class="local col5 ref" href="#795rootlen" title='rootlen' data-ref="795rootlen" data-ref-filename="795rootlen">rootlen</a> + <var>1</var>);</td></tr>
<tr><th id="8886">8886</th><td>	<b>else</b></td></tr>
<tr><th id="8887">8887</th><td>	    <a class="local col3 ref" href="#793CVSname" title='CVSname' data-ref="793CVSname" data-ref-filename="793CVSname">CVSname</a> = (*<a class="local col4 ref" href="#794pathstore" title='pathstore' data-ref="794pathstore" data-ref-filename="794pathstore">pathstore</a>);</td></tr>
<tr><th id="8888">8888</th><td>    }</td></tr>
<tr><th id="8889">8889</th><td>    <b>return</b> <a class="local col3 ref" href="#793CVSname" title='CVSname' data-ref="793CVSname" data-ref-filename="793CVSname">CVSname</a>;</td></tr>
<tr><th id="8890">8890</th><td>}</td></tr>
<tr><th id="8891">8891</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2019-Jul-19</em> from project netbsd revision <em>f9da89e0d</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
