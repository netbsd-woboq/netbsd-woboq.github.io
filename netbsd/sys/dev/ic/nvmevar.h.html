<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>nvmevar.h source code [netbsd/sys/dev/ic/nvmevar.h] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="nvme_attach_args,nvme_ccb,nvme_dmamem,nvme_namespace,nvme_queue,nvme_softc "/>
<link rel="stylesheet" href="https://code.woboq.org/data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="https://code.woboq.org/data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="https://code.woboq.org/data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="https://code.woboq.org/data/jquery/jquery-ui.min.js"></script>
<script>var file = 'netbsd/sys/dev/ic/nvmevar.h'; var root_path = '../../../..'; var data_path = 'https://code.woboq.org/data'; var ecma_script_api_version = 2;</script>
<script src='https://code.woboq.org/data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>netbsd</a>/<a href='../..'>sys</a>/<a href='..'>dev</a>/<a href='./'>ic</a>/<a href='nvmevar.h.html'>nvmevar.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*	$NetBSD: nvmevar.h,v 1.20 2019/06/28 15:08:47 jmcneill Exp $	*/</i></td></tr>
<tr><th id="2">2</th><td><i>/*	$OpenBSD: nvmevar.h,v 1.8 2016/04/14 11:18:32 dlg Exp $ */</i></td></tr>
<tr><th id="3">3</th><td></td></tr>
<tr><th id="4">4</th><td><i>/*</i></td></tr>
<tr><th id="5">5</th><td><i> * Copyright (c) 2014 David Gwynne &lt;dlg@openbsd.org&gt;</i></td></tr>
<tr><th id="6">6</th><td><i> *</i></td></tr>
<tr><th id="7">7</th><td><i> * Permission to use, copy, modify, and distribute this software for any</i></td></tr>
<tr><th id="8">8</th><td><i> * purpose with or without fee is hereby granted, provided that the above</i></td></tr>
<tr><th id="9">9</th><td><i> * copyright notice and this permission notice appear in all copies.</i></td></tr>
<tr><th id="10">10</th><td><i> *</i></td></tr>
<tr><th id="11">11</th><td><i> * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES</i></td></tr>
<tr><th id="12">12</th><td><i> * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</i></td></tr>
<tr><th id="13">13</th><td><i> * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR</i></td></tr>
<tr><th id="14">14</th><td><i> * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</i></td></tr>
<tr><th id="15">15</th><td><i> * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN</i></td></tr>
<tr><th id="16">16</th><td><i> * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF</i></td></tr>
<tr><th id="17">17</th><td><i> * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</i></td></tr>
<tr><th id="18">18</th><td><i> */</i></td></tr>
<tr><th id="19">19</th><td></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="../../sys/bus.h.html">&lt;sys/bus.h&gt;</a></u></td></tr>
<tr><th id="21">21</th><td><u>#include <a href="../../sys/cpu.h.html">&lt;sys/cpu.h&gt;</a></u></td></tr>
<tr><th id="22">22</th><td><u>#include <a href="../../sys/device.h.html">&lt;sys/device.h&gt;</a></u></td></tr>
<tr><th id="23">23</th><td><u>#include <a href="../../sys/mutex.h.html">&lt;sys/mutex.h&gt;</a></u></td></tr>
<tr><th id="24">24</th><td><u>#include <a href="../../sys/pool.h.html">&lt;sys/pool.h&gt;</a></u></td></tr>
<tr><th id="25">25</th><td><u>#include <a href="../../sys/queue.h.html">&lt;sys/queue.h&gt;</a></u></td></tr>
<tr><th id="26">26</th><td><u>#include <a href="../../sys/buf.h.html">&lt;sys/buf.h&gt;</a></u></td></tr>
<tr><th id="27">27</th><td></td></tr>
<tr><th id="28">28</th><td><b>struct</b> <dfn class="type def" id="nvme_dmamem" title='nvme_dmamem' data-ref="nvme_dmamem" data-ref-filename="nvme_dmamem">nvme_dmamem</dfn> {</td></tr>
<tr><th id="29">29</th><td>	<a class="typedef" href="../../arch/x86/include/bus_defs.h.html#bus_dmamap_t" title='bus_dmamap_t' data-type='struct x86_bus_dmamap *' data-ref="bus_dmamap_t" data-ref-filename="bus_dmamap_t">bus_dmamap_t</a>		<dfn class="decl field" id="nvme_dmamem::ndm_map" title='nvme_dmamem::ndm_map' data-ref="nvme_dmamem::ndm_map" data-ref-filename="nvme_dmamem..ndm_map">ndm_map</dfn>;</td></tr>
<tr><th id="30">30</th><td>	<a class="typedef" href="../../arch/x86/include/bus_defs.h.html#bus_dma_segment_t" title='bus_dma_segment_t' data-type='struct x86_bus_dma_segment' data-ref="bus_dma_segment_t" data-ref-filename="bus_dma_segment_t">bus_dma_segment_t</a>	<dfn class="decl field" id="nvme_dmamem::ndm_seg" title='nvme_dmamem::ndm_seg' data-ref="nvme_dmamem::ndm_seg" data-ref-filename="nvme_dmamem..ndm_seg">ndm_seg</dfn>;</td></tr>
<tr><th id="31">31</th><td>	<a class="typedef" href="../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a>			<dfn class="decl field" id="nvme_dmamem::ndm_size" title='nvme_dmamem::ndm_size' data-ref="nvme_dmamem::ndm_size" data-ref-filename="nvme_dmamem..ndm_size">ndm_size</dfn>;</td></tr>
<tr><th id="32">32</th><td>	<em>void</em>			*<dfn class="decl field" id="nvme_dmamem::ndm_kva" title='nvme_dmamem::ndm_kva' data-ref="nvme_dmamem::ndm_kva" data-ref-filename="nvme_dmamem..ndm_kva">ndm_kva</dfn>;</td></tr>
<tr><th id="33">33</th><td>};</td></tr>
<tr><th id="34">34</th><td><u>#define <dfn class="macro" id="_M/NVME_DMA_MAP" data-ref="_M/NVME_DMA_MAP">NVME_DMA_MAP</dfn>(_ndm)	((_ndm)-&gt;ndm_map)</u></td></tr>
<tr><th id="35">35</th><td><u>#define <dfn class="macro" id="_M/NVME_DMA_LEN" data-ref="_M/NVME_DMA_LEN">NVME_DMA_LEN</dfn>(_ndm)	((_ndm)-&gt;ndm_map-&gt;dm_segs[0].ds_len)</u></td></tr>
<tr><th id="36">36</th><td><u>#define <dfn class="macro" id="_M/NVME_DMA_DVA" data-ref="_M/NVME_DMA_DVA">NVME_DMA_DVA</dfn>(_ndm)	((uint64_t)(_ndm)-&gt;ndm_map-&gt;dm_segs[0].ds_addr)</u></td></tr>
<tr><th id="37">37</th><td><u>#define <dfn class="macro" id="_M/NVME_DMA_KVA" data-ref="_M/NVME_DMA_KVA">NVME_DMA_KVA</dfn>(_ndm)	((void *)(_ndm)-&gt;ndm_kva)</u></td></tr>
<tr><th id="38">38</th><td></td></tr>
<tr><th id="39">39</th><td><b>struct</b> <a class="type" href="#nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</a>;</td></tr>
<tr><th id="40">40</th><td><b>struct</b> <a class="type" href="#nvme_queue" title='nvme_queue' data-ref="nvme_queue" data-ref-filename="nvme_queue">nvme_queue</a>;</td></tr>
<tr><th id="41">41</th><td></td></tr>
<tr><th id="42">42</th><td><b>typedef</b> <em>void</em> (*<dfn class="typedef" id="nvme_nnc_done" title='nvme_nnc_done' data-type='void (*)(void *, struct buf *, uint16_t, uint32_t)' data-ref="nvme_nnc_done" data-ref-filename="nvme_nnc_done">nvme_nnc_done</dfn>)(<em>void</em> *, <b>struct</b> <a class="type" href="../../sys/buf.h.html#buf" title='buf' data-ref="buf" data-ref-filename="buf">buf</a> *, <a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a>, <a class="typedef" href="../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a>);</td></tr>
<tr><th id="43">43</th><td></td></tr>
<tr><th id="44">44</th><td><b>struct</b> <dfn class="type def" id="nvme_ccb" title='nvme_ccb' data-ref="nvme_ccb" data-ref-filename="nvme_ccb">nvme_ccb</dfn> {</td></tr>
<tr><th id="45">45</th><td>	<a class="macro" href="../../sys/queue.h.html#317" title="struct { struct nvme_ccb *sqe_next; }" data-ref="_M/SIMPLEQ_ENTRY">SIMPLEQ_ENTRY</a>(<a class="type" href="#nvme_ccb" title='nvme_ccb' data-ref="nvme_ccb" data-ref-filename="nvme_ccb">nvme_ccb</a>)	<dfn class="decl field" id="nvme_ccb::ccb_entry" title='nvme_ccb::ccb_entry' data-ref="nvme_ccb::ccb_entry" data-ref-filename="nvme_ccb..ccb_entry">ccb_entry</dfn>;</td></tr>
<tr><th id="46">46</th><td></td></tr>
<tr><th id="47">47</th><td>	<i>/* DMA handles */</i></td></tr>
<tr><th id="48">48</th><td>	<a class="typedef" href="../../arch/x86/include/bus_defs.h.html#bus_dmamap_t" title='bus_dmamap_t' data-type='struct x86_bus_dmamap *' data-ref="bus_dmamap_t" data-ref-filename="bus_dmamap_t">bus_dmamap_t</a>		<dfn class="decl field" id="nvme_ccb::ccb_dmamap" title='nvme_ccb::ccb_dmamap' data-ref="nvme_ccb::ccb_dmamap" data-ref-filename="nvme_ccb..ccb_dmamap">ccb_dmamap</dfn>;</td></tr>
<tr><th id="49">49</th><td></td></tr>
<tr><th id="50">50</th><td>	<a class="typedef" href="../../arch/x86/include/bus_defs.h.html#bus_addr_t" title='bus_addr_t' data-type='paddr_t' data-ref="bus_addr_t" data-ref-filename="bus_addr_t">bus_addr_t</a>		<dfn class="decl field" id="nvme_ccb::ccb_prpl_off" title='nvme_ccb::ccb_prpl_off' data-ref="nvme_ccb::ccb_prpl_off" data-ref-filename="nvme_ccb..ccb_prpl_off">ccb_prpl_off</dfn>;</td></tr>
<tr><th id="51">51</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>		<dfn class="decl field" id="nvme_ccb::ccb_prpl_dva" title='nvme_ccb::ccb_prpl_dva' data-ref="nvme_ccb::ccb_prpl_dva" data-ref-filename="nvme_ccb..ccb_prpl_dva">ccb_prpl_dva</dfn>;</td></tr>
<tr><th id="52">52</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>		*<dfn class="decl field" id="nvme_ccb::ccb_prpl" title='nvme_ccb::ccb_prpl' data-ref="nvme_ccb::ccb_prpl" data-ref-filename="nvme_ccb..ccb_prpl">ccb_prpl</dfn>;</td></tr>
<tr><th id="53">53</th><td></td></tr>
<tr><th id="54">54</th><td>	<i>/* command context */</i></td></tr>
<tr><th id="55">55</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a>		<dfn class="decl field" id="nvme_ccb::ccb_id" title='nvme_ccb::ccb_id' data-ref="nvme_ccb::ccb_id" data-ref-filename="nvme_ccb..ccb_id">ccb_id</dfn>;</td></tr>
<tr><th id="56">56</th><td>	<em>void</em>			*<dfn class="decl field" id="nvme_ccb::ccb_cookie" title='nvme_ccb::ccb_cookie' data-ref="nvme_ccb::ccb_cookie" data-ref-filename="nvme_ccb..ccb_cookie">ccb_cookie</dfn>;</td></tr>
<tr><th id="57">57</th><td><u>#define <dfn class="macro" id="_M/NVME_CCB_FREE" data-ref="_M/NVME_CCB_FREE">NVME_CCB_FREE</dfn>	0xbeefdeed</u></td></tr>
<tr><th id="58">58</th><td>	<em>void</em>			(*<dfn class="decl field" id="nvme_ccb::ccb_done" title='nvme_ccb::ccb_done' data-ref="nvme_ccb::ccb_done" data-ref-filename="nvme_ccb..ccb_done">ccb_done</dfn>)(<b>struct</b> <a class="type" href="#nvme_queue" title='nvme_queue' data-ref="nvme_queue" data-ref-filename="nvme_queue">nvme_queue</a> *,</td></tr>
<tr><th id="59">59</th><td>				    <b>struct</b> <a class="type" href="#nvme_ccb" title='nvme_ccb' data-ref="nvme_ccb" data-ref-filename="nvme_ccb">nvme_ccb</a> *, <b>struct</b> <a class="type" href="nvmereg.h.html#nvme_cqe" title='nvme_cqe' data-ref="nvme_cqe" data-ref-filename="nvme_cqe">nvme_cqe</a> *);</td></tr>
<tr><th id="60">60</th><td></td></tr>
<tr><th id="61">61</th><td>	<i>/* namespace context */</i></td></tr>
<tr><th id="62">62</th><td>	<em>void</em>		*<dfn class="decl field" id="nvme_ccb::nnc_cookie" title='nvme_ccb::nnc_cookie' data-ref="nvme_ccb::nnc_cookie" data-ref-filename="nvme_ccb..nnc_cookie">nnc_cookie</dfn>;</td></tr>
<tr><th id="63">63</th><td>	<a class="typedef" href="#nvme_nnc_done" title='nvme_nnc_done' data-type='void (*)(void *, struct buf *, uint16_t, uint32_t)' data-ref="nvme_nnc_done" data-ref-filename="nvme_nnc_done">nvme_nnc_done</a>	<dfn class="decl field" id="nvme_ccb::nnc_done" title='nvme_ccb::nnc_done' data-ref="nvme_ccb::nnc_done" data-ref-filename="nvme_ccb..nnc_done">nnc_done</dfn>;</td></tr>
<tr><th id="64">64</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a>	<dfn class="decl field" id="nvme_ccb::nnc_nsid" title='nvme_ccb::nnc_nsid' data-ref="nvme_ccb::nnc_nsid" data-ref-filename="nvme_ccb..nnc_nsid">nnc_nsid</dfn>;</td></tr>
<tr><th id="65">65</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a>	<dfn class="decl field" id="nvme_ccb::nnc_flags" title='nvme_ccb::nnc_flags' data-ref="nvme_ccb::nnc_flags" data-ref-filename="nvme_ccb..nnc_flags">nnc_flags</dfn>;</td></tr>
<tr><th id="66">66</th><td><u>#define	<dfn class="macro" id="_M/NVME_NS_CTX_F_READ" data-ref="_M/NVME_NS_CTX_F_READ">NVME_NS_CTX_F_READ</dfn>	__BIT(0)</u></td></tr>
<tr><th id="67">67</th><td><u>#define	<dfn class="macro" id="_M/NVME_NS_CTX_F_POLL" data-ref="_M/NVME_NS_CTX_F_POLL">NVME_NS_CTX_F_POLL</dfn>	__BIT(1)</u></td></tr>
<tr><th id="68">68</th><td><u>#define	<dfn class="macro" id="_M/NVME_NS_CTX_F_FUA" data-ref="_M/NVME_NS_CTX_F_FUA">NVME_NS_CTX_F_FUA</dfn>	__BIT(2)</u></td></tr>
<tr><th id="69">69</th><td></td></tr>
<tr><th id="70">70</th><td>	<b>struct</b> <a class="type" href="../../sys/buf.h.html#buf" title='buf' data-ref="buf" data-ref-filename="buf">buf</a>	*<dfn class="decl field" id="nvme_ccb::nnc_buf" title='nvme_ccb::nnc_buf' data-ref="nvme_ccb::nnc_buf" data-ref-filename="nvme_ccb..nnc_buf">nnc_buf</dfn>;</td></tr>
<tr><th id="71">71</th><td>	<a class="typedef" href="../../sys/types.h.html#daddr_t" title='daddr_t' data-type='int64_t' data-ref="daddr_t" data-ref-filename="daddr_t">daddr_t</a>		<dfn class="decl field" id="nvme_ccb::nnc_blkno" title='nvme_ccb::nnc_blkno' data-ref="nvme_ccb::nnc_blkno" data-ref-filename="nvme_ccb..nnc_blkno">nnc_blkno</dfn>;</td></tr>
<tr><th id="72">72</th><td>	<a class="typedef" href="../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a>		<dfn class="decl field" id="nvme_ccb::nnc_datasize" title='nvme_ccb::nnc_datasize' data-ref="nvme_ccb::nnc_datasize" data-ref-filename="nvme_ccb..nnc_datasize">nnc_datasize</dfn>;</td></tr>
<tr><th id="73">73</th><td>	<em>int</em>		<dfn class="decl field" id="nvme_ccb::nnc_secsize" title='nvme_ccb::nnc_secsize' data-ref="nvme_ccb::nnc_secsize" data-ref-filename="nvme_ccb..nnc_secsize">nnc_secsize</dfn>;</td></tr>
<tr><th id="74">74</th><td>};</td></tr>
<tr><th id="75">75</th><td></td></tr>
<tr><th id="76">76</th><td><b>struct</b> <dfn class="type def" id="nvme_queue" title='nvme_queue' data-ref="nvme_queue" data-ref-filename="nvme_queue">nvme_queue</dfn> {</td></tr>
<tr><th id="77">77</th><td>	<b>struct</b> <a class="type" href="#nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</a>	*<dfn class="decl field" id="nvme_queue::q_sc" title='nvme_queue::q_sc' data-ref="nvme_queue::q_sc" data-ref-filename="nvme_queue..q_sc">q_sc</dfn>;</td></tr>
<tr><th id="78">78</th><td>	<a class="typedef" href="../../sys/mutex.h.html#kmutex_t" title='kmutex_t' data-type='struct kmutex' data-ref="kmutex_t" data-ref-filename="kmutex_t">kmutex_t</a>		<dfn class="decl field" id="nvme_queue::q_sq_mtx" title='nvme_queue::q_sq_mtx' data-ref="nvme_queue::q_sq_mtx" data-ref-filename="nvme_queue..q_sq_mtx">q_sq_mtx</dfn>;</td></tr>
<tr><th id="79">79</th><td>	<a class="typedef" href="../../sys/mutex.h.html#kmutex_t" title='kmutex_t' data-type='struct kmutex' data-ref="kmutex_t" data-ref-filename="kmutex_t">kmutex_t</a>		<dfn class="decl field" id="nvme_queue::q_cq_mtx" title='nvme_queue::q_cq_mtx' data-ref="nvme_queue::q_cq_mtx" data-ref-filename="nvme_queue..q_cq_mtx">q_cq_mtx</dfn>;</td></tr>
<tr><th id="80">80</th><td>	<b>struct</b> <a class="type" href="#nvme_dmamem" title='nvme_dmamem' data-ref="nvme_dmamem" data-ref-filename="nvme_dmamem">nvme_dmamem</a>	*<dfn class="decl field" id="nvme_queue::q_sq_dmamem" title='nvme_queue::q_sq_dmamem' data-ref="nvme_queue::q_sq_dmamem" data-ref-filename="nvme_queue..q_sq_dmamem">q_sq_dmamem</dfn>;</td></tr>
<tr><th id="81">81</th><td>	<b>struct</b> <a class="type" href="#nvme_dmamem" title='nvme_dmamem' data-ref="nvme_dmamem" data-ref-filename="nvme_dmamem">nvme_dmamem</a>	*<dfn class="decl field" id="nvme_queue::q_cq_dmamem" title='nvme_queue::q_cq_dmamem' data-ref="nvme_queue::q_cq_dmamem" data-ref-filename="nvme_queue..q_cq_dmamem">q_cq_dmamem</dfn>;</td></tr>
<tr><th id="82">82</th><td>	<a class="typedef" href="../../arch/x86/include/bus_defs.h.html#bus_size_t" title='bus_size_t' data-type='size_t' data-ref="bus_size_t" data-ref-filename="bus_size_t">bus_size_t</a> 		<dfn class="decl field" id="nvme_queue::q_sqtdbl" title='nvme_queue::q_sqtdbl' data-ref="nvme_queue::q_sqtdbl" data-ref-filename="nvme_queue..q_sqtdbl">q_sqtdbl</dfn>; <i>/* submission queue tail doorbell */</i></td></tr>
<tr><th id="83">83</th><td>	<a class="typedef" href="../../arch/x86/include/bus_defs.h.html#bus_size_t" title='bus_size_t' data-type='size_t' data-ref="bus_size_t" data-ref-filename="bus_size_t">bus_size_t</a> 		<dfn class="decl field" id="nvme_queue::q_cqhdbl" title='nvme_queue::q_cqhdbl' data-ref="nvme_queue::q_cqhdbl" data-ref-filename="nvme_queue..q_cqhdbl">q_cqhdbl</dfn>; <i>/* completion queue head doorbell */</i></td></tr>
<tr><th id="84">84</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a>		<dfn class="decl field" id="nvme_queue::q_id" title='nvme_queue::q_id' data-ref="nvme_queue::q_id" data-ref-filename="nvme_queue..q_id">q_id</dfn>;</td></tr>
<tr><th id="85">85</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a>		<dfn class="decl field" id="nvme_queue::q_entries" title='nvme_queue::q_entries' data-ref="nvme_queue::q_entries" data-ref-filename="nvme_queue..q_entries">q_entries</dfn>;</td></tr>
<tr><th id="86">86</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a>		<dfn class="decl field" id="nvme_queue::q_sq_tail" title='nvme_queue::q_sq_tail' data-ref="nvme_queue::q_sq_tail" data-ref-filename="nvme_queue..q_sq_tail">q_sq_tail</dfn>;</td></tr>
<tr><th id="87">87</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a>		<dfn class="decl field" id="nvme_queue::q_cq_head" title='nvme_queue::q_cq_head' data-ref="nvme_queue::q_cq_head" data-ref-filename="nvme_queue..q_cq_head">q_cq_head</dfn>;</td></tr>
<tr><th id="88">88</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a>		<dfn class="decl field" id="nvme_queue::q_cq_phase" title='nvme_queue::q_cq_phase' data-ref="nvme_queue::q_cq_phase" data-ref-filename="nvme_queue..q_cq_phase">q_cq_phase</dfn>;</td></tr>
<tr><th id="89">89</th><td></td></tr>
<tr><th id="90">90</th><td>	<a class="typedef" href="../../sys/mutex.h.html#kmutex_t" title='kmutex_t' data-type='struct kmutex' data-ref="kmutex_t" data-ref-filename="kmutex_t">kmutex_t</a>		<dfn class="decl field" id="nvme_queue::q_ccb_mtx" title='nvme_queue::q_ccb_mtx' data-ref="nvme_queue::q_ccb_mtx" data-ref-filename="nvme_queue..q_ccb_mtx">q_ccb_mtx</dfn>;</td></tr>
<tr><th id="91">91</th><td>	<a class="typedef" href="../../sys/condvar.h.html#kcondvar_t" title='kcondvar_t' data-type='struct kcondvar' data-ref="kcondvar_t" data-ref-filename="kcondvar_t">kcondvar_t</a>		<dfn class="decl field" id="nvme_queue::q_ccb_wait" title='nvme_queue::q_ccb_wait' data-ref="nvme_queue::q_ccb_wait" data-ref-filename="nvme_queue..q_ccb_wait">q_ccb_wait</dfn>;	<i>/* wait for ccb avail/finish */</i></td></tr>
<tr><th id="92">92</th><td>	<a class="macro" href="../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a>			<dfn class="decl field" id="nvme_queue::q_ccb_waiting" title='nvme_queue::q_ccb_waiting' data-ref="nvme_queue::q_ccb_waiting" data-ref-filename="nvme_queue..q_ccb_waiting">q_ccb_waiting</dfn>;	<i>/* whether there are waiters */</i></td></tr>
<tr><th id="93">93</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a>		<dfn class="decl field" id="nvme_queue::q_nccbs" title='nvme_queue::q_nccbs' data-ref="nvme_queue::q_nccbs" data-ref-filename="nvme_queue..q_nccbs">q_nccbs</dfn>;	<i>/* total number of ccbs */</i></td></tr>
<tr><th id="94">94</th><td>	<b>struct</b> <a class="type" href="#nvme_ccb" title='nvme_ccb' data-ref="nvme_ccb" data-ref-filename="nvme_ccb">nvme_ccb</a>		*<dfn class="decl field" id="nvme_queue::q_ccbs" title='nvme_queue::q_ccbs' data-ref="nvme_queue::q_ccbs" data-ref-filename="nvme_queue..q_ccbs">q_ccbs</dfn>;</td></tr>
<tr><th id="95">95</th><td>	<a class="macro" href="../../sys/queue.h.html#308" title="struct { struct nvme_ccb *sqh_first; struct nvme_ccb **sqh_last; }" data-ref="_M/SIMPLEQ_HEAD">SIMPLEQ_HEAD</a>(, <a class="type" href="#nvme_ccb" title='nvme_ccb' data-ref="nvme_ccb" data-ref-filename="nvme_ccb">nvme_ccb</a>) <dfn class="decl field" id="nvme_queue::q_ccb_list" title='nvme_queue::q_ccb_list' data-ref="nvme_queue::q_ccb_list" data-ref-filename="nvme_queue..q_ccb_list">q_ccb_list</dfn>;</td></tr>
<tr><th id="96">96</th><td>	<b>struct</b> <a class="type" href="#nvme_dmamem" title='nvme_dmamem' data-ref="nvme_dmamem" data-ref-filename="nvme_dmamem">nvme_dmamem</a>	*<dfn class="decl field" id="nvme_queue::q_ccb_prpls" title='nvme_queue::q_ccb_prpls' data-ref="nvme_queue::q_ccb_prpls" data-ref-filename="nvme_queue..q_ccb_prpls">q_ccb_prpls</dfn>;</td></tr>
<tr><th id="97">97</th><td>};</td></tr>
<tr><th id="98">98</th><td></td></tr>
<tr><th id="99">99</th><td><b>struct</b> <dfn class="type def" id="nvme_namespace" title='nvme_namespace' data-ref="nvme_namespace" data-ref-filename="nvme_namespace">nvme_namespace</dfn> {</td></tr>
<tr><th id="100">100</th><td>	<b>struct</b> <a class="type" href="nvmereg.h.html#nvm_identify_namespace" title='nvm_identify_namespace' data-ref="nvm_identify_namespace" data-ref-filename="nvm_identify_namespace">nvm_identify_namespace</a> *<dfn class="decl field" id="nvme_namespace::ident" title='nvme_namespace::ident' data-ref="nvme_namespace::ident" data-ref-filename="nvme_namespace..ident">ident</dfn>;</td></tr>
<tr><th id="101">101</th><td>	<a class="typedef" href="../../sys/device_if.h.html#device_t" title='device_t' data-type='struct device *' data-ref="device_t" data-ref-filename="device_t">device_t</a> <dfn class="decl field" id="nvme_namespace::dev" title='nvme_namespace::dev' data-ref="nvme_namespace::dev" data-ref-filename="nvme_namespace..dev">dev</dfn>;</td></tr>
<tr><th id="102">102</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="decl field" id="nvme_namespace::flags" title='nvme_namespace::flags' data-ref="nvme_namespace::flags" data-ref-filename="nvme_namespace..flags">flags</dfn>;</td></tr>
<tr><th id="103">103</th><td><u>#define	<dfn class="macro" id="_M/NVME_NS_F_OPEN" data-ref="_M/NVME_NS_F_OPEN">NVME_NS_F_OPEN</dfn>	__BIT(0)</u></td></tr>
<tr><th id="104">104</th><td>};</td></tr>
<tr><th id="105">105</th><td></td></tr>
<tr><th id="106">106</th><td><b>struct</b> <dfn class="type def" id="nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</dfn> {</td></tr>
<tr><th id="107">107</th><td>	<a class="typedef" href="../../sys/device_if.h.html#device_t" title='device_t' data-type='struct device *' data-ref="device_t" data-ref-filename="device_t">device_t</a>		<dfn class="decl field" id="nvme_softc::sc_dev" title='nvme_softc::sc_dev' data-ref="nvme_softc::sc_dev" data-ref-filename="nvme_softc..sc_dev">sc_dev</dfn>;</td></tr>
<tr><th id="108">108</th><td></td></tr>
<tr><th id="109">109</th><td>	<a class="typedef" href="../../arch/x86/include/bus_defs.h.html#bus_space_tag_t" title='bus_space_tag_t' data-type='struct bus_space_tag *' data-ref="bus_space_tag_t" data-ref-filename="bus_space_tag_t">bus_space_tag_t</a>		<dfn class="decl field" id="nvme_softc::sc_iot" title='nvme_softc::sc_iot' data-ref="nvme_softc::sc_iot" data-ref-filename="nvme_softc..sc_iot">sc_iot</dfn>;</td></tr>
<tr><th id="110">110</th><td>	<a class="typedef" href="../../arch/x86/include/bus_defs.h.html#bus_space_handle_t" title='bus_space_handle_t' data-type='vaddr_t' data-ref="bus_space_handle_t" data-ref-filename="bus_space_handle_t">bus_space_handle_t</a>	<dfn class="decl field" id="nvme_softc::sc_ioh" title='nvme_softc::sc_ioh' data-ref="nvme_softc::sc_ioh" data-ref-filename="nvme_softc..sc_ioh">sc_ioh</dfn>;</td></tr>
<tr><th id="111">111</th><td>	<a class="typedef" href="../../arch/x86/include/bus_defs.h.html#bus_size_t" title='bus_size_t' data-type='size_t' data-ref="bus_size_t" data-ref-filename="bus_size_t">bus_size_t</a>		<dfn class="decl field" id="nvme_softc::sc_ios" title='nvme_softc::sc_ios' data-ref="nvme_softc::sc_ios" data-ref-filename="nvme_softc..sc_ios">sc_ios</dfn>;</td></tr>
<tr><th id="112">112</th><td>	<a class="typedef" href="../../arch/x86/include/bus_defs.h.html#bus_dma_tag_t" title='bus_dma_tag_t' data-type='struct x86_bus_dma_tag *' data-ref="bus_dma_tag_t" data-ref-filename="bus_dma_tag_t">bus_dma_tag_t</a>		<dfn class="decl field" id="nvme_softc::sc_dmat" title='nvme_softc::sc_dmat' data-ref="nvme_softc::sc_dmat" data-ref-filename="nvme_softc..sc_dmat">sc_dmat</dfn>;</td></tr>
<tr><th id="113">113</th><td></td></tr>
<tr><th id="114">114</th><td>	<em>int</em>			(*<dfn class="decl field" id="nvme_softc::sc_intr_establish" title='nvme_softc::sc_intr_establish' data-ref="nvme_softc::sc_intr_establish" data-ref-filename="nvme_softc..sc_intr_establish">sc_intr_establish</dfn>)(<b>struct</b> <a class="type" href="#nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</a> *,</td></tr>
<tr><th id="115">115</th><td>				    <a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a> <dfn class="local col1 decl" id="1qid" title='qid' data-type='uint16_t' data-ref="1qid" data-ref-filename="1qid">qid</dfn>, <b>struct</b> <a class="type" href="#nvme_queue" title='nvme_queue' data-ref="nvme_queue" data-ref-filename="nvme_queue">nvme_queue</a> *);</td></tr>
<tr><th id="116">116</th><td>	<em>int</em>			(*<dfn class="decl field" id="nvme_softc::sc_intr_disestablish" title='nvme_softc::sc_intr_disestablish' data-ref="nvme_softc::sc_intr_disestablish" data-ref-filename="nvme_softc..sc_intr_disestablish">sc_intr_disestablish</dfn>)(<b>struct</b> <a class="type" href="#nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</a> *,</td></tr>
<tr><th id="117">117</th><td>				    <a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a> <dfn class="local col2 decl" id="2qid" title='qid' data-type='uint16_t' data-ref="2qid" data-ref-filename="2qid">qid</dfn>);</td></tr>
<tr><th id="118">118</th><td>	<em>void</em>			**<dfn class="decl field" id="nvme_softc::sc_ih" title='nvme_softc::sc_ih' data-ref="nvme_softc::sc_ih" data-ref-filename="nvme_softc..sc_ih">sc_ih</dfn>;	<i>/* interrupt handlers */</i></td></tr>
<tr><th id="119">119</th><td>	<em>void</em>			**<dfn class="decl field" id="nvme_softc::sc_softih" title='nvme_softc::sc_softih' data-ref="nvme_softc::sc_softih" data-ref-filename="nvme_softc..sc_softih">sc_softih</dfn>;	<i>/* softintr handlers */</i></td></tr>
<tr><th id="120">120</th><td></td></tr>
<tr><th id="121">121</th><td>	<a class="typedef" href="../../sys/types.h.html#u_int" title='u_int' data-type='unsigned int' data-ref="u_int" data-ref-filename="u_int">u_int</a>			<dfn class="decl field" id="nvme_softc::sc_rdy_to" title='nvme_softc::sc_rdy_to' data-ref="nvme_softc::sc_rdy_to" data-ref-filename="nvme_softc..sc_rdy_to">sc_rdy_to</dfn>;	<i>/* RDY timeout */</i></td></tr>
<tr><th id="122">122</th><td>	<a class="typedef" href="../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a>			<dfn class="decl field" id="nvme_softc::sc_mps" title='nvme_softc::sc_mps' data-ref="nvme_softc::sc_mps" data-ref-filename="nvme_softc..sc_mps">sc_mps</dfn>;		<i>/* memory page size */</i>  </td></tr>
<tr><th id="123">123</th><td>	<a class="typedef" href="../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a>			<dfn class="decl field" id="nvme_softc::sc_mdts" title='nvme_softc::sc_mdts' data-ref="nvme_softc::sc_mdts" data-ref-filename="nvme_softc..sc_mdts">sc_mdts</dfn>;	<i>/* max data trasfer size */</i></td></tr>
<tr><th id="124">124</th><td>	<a class="typedef" href="../../sys/types.h.html#u_int" title='u_int' data-type='unsigned int' data-ref="u_int" data-ref-filename="u_int">u_int</a>			<dfn class="decl field" id="nvme_softc::sc_max_sgl" title='nvme_softc::sc_max_sgl' data-ref="nvme_softc::sc_max_sgl" data-ref-filename="nvme_softc..sc_max_sgl">sc_max_sgl</dfn>;	<i>/* max S/G segments */</i></td></tr>
<tr><th id="125">125</th><td></td></tr>
<tr><th id="126">126</th><td>	<b>struct</b> <a class="type" href="nvmereg.h.html#nvm_identify_controller" title='nvm_identify_controller' data-ref="nvm_identify_controller" data-ref-filename="nvm_identify_controller">nvm_identify_controller</a></td></tr>
<tr><th id="127">127</th><td>				<dfn class="decl field" id="nvme_softc::sc_identify" title='nvme_softc::sc_identify' data-ref="nvme_softc::sc_identify" data-ref-filename="nvme_softc..sc_identify">sc_identify</dfn>;</td></tr>
<tr><th id="128">128</th><td></td></tr>
<tr><th id="129">129</th><td>	<a class="typedef" href="../../sys/types.h.html#u_int" title='u_int' data-type='unsigned int' data-ref="u_int" data-ref-filename="u_int">u_int</a>			<dfn class="decl field" id="nvme_softc::sc_nn" title='nvme_softc::sc_nn' data-ref="nvme_softc::sc_nn" data-ref-filename="nvme_softc..sc_nn">sc_nn</dfn>;		<i>/* namespace count */</i></td></tr>
<tr><th id="130">130</th><td>	<b>struct</b> <a class="type" href="#nvme_namespace" title='nvme_namespace' data-ref="nvme_namespace" data-ref-filename="nvme_namespace">nvme_namespace</a>	*<dfn class="decl field" id="nvme_softc::sc_namespaces" title='nvme_softc::sc_namespaces' data-ref="nvme_softc::sc_namespaces" data-ref-filename="nvme_softc..sc_namespaces">sc_namespaces</dfn>;</td></tr>
<tr><th id="131">131</th><td></td></tr>
<tr><th id="132">132</th><td>	<a class="macro" href="../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a>			<dfn class="decl field" id="nvme_softc::sc_use_mq" title='nvme_softc::sc_use_mq' data-ref="nvme_softc::sc_use_mq" data-ref-filename="nvme_softc..sc_use_mq">sc_use_mq</dfn>;</td></tr>
<tr><th id="133">133</th><td>	<a class="typedef" href="../../sys/types.h.html#u_int" title='u_int' data-type='unsigned int' data-ref="u_int" data-ref-filename="u_int">u_int</a>			<dfn class="decl field" id="nvme_softc::sc_nq" title='nvme_softc::sc_nq' data-ref="nvme_softc::sc_nq" data-ref-filename="nvme_softc..sc_nq">sc_nq</dfn>;		<i>/* # of io queue (sc_q) */</i></td></tr>
<tr><th id="134">134</th><td>	<b>struct</b> <a class="type" href="#nvme_queue" title='nvme_queue' data-ref="nvme_queue" data-ref-filename="nvme_queue">nvme_queue</a>	*<dfn class="decl field" id="nvme_softc::sc_admin_q" title='nvme_softc::sc_admin_q' data-ref="nvme_softc::sc_admin_q" data-ref-filename="nvme_softc..sc_admin_q">sc_admin_q</dfn>;</td></tr>
<tr><th id="135">135</th><td>	<b>struct</b> <a class="type" href="#nvme_queue" title='nvme_queue' data-ref="nvme_queue" data-ref-filename="nvme_queue">nvme_queue</a>	**<dfn class="decl field" id="nvme_softc::sc_q" title='nvme_softc::sc_q' data-ref="nvme_softc::sc_q" data-ref-filename="nvme_softc..sc_q">sc_q</dfn>;</td></tr>
<tr><th id="136">136</th><td></td></tr>
<tr><th id="137">137</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a>		<dfn class="decl field" id="nvme_softc::sc_flags" title='nvme_softc::sc_flags' data-ref="nvme_softc::sc_flags" data-ref-filename="nvme_softc..sc_flags">sc_flags</dfn>;</td></tr>
<tr><th id="138">138</th><td><u>#define	<dfn class="macro" id="_M/NVME_F_ATTACHED" data-ref="_M/NVME_F_ATTACHED">NVME_F_ATTACHED</dfn>	__BIT(0)</u></td></tr>
<tr><th id="139">139</th><td><u>#define	<dfn class="macro" id="_M/NVME_F_OPEN" data-ref="_M/NVME_F_OPEN">NVME_F_OPEN</dfn>	__BIT(1)</u></td></tr>
<tr><th id="140">140</th><td></td></tr>
<tr><th id="141">141</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a>		<dfn class="decl field" id="nvme_softc::sc_quirks" title='nvme_softc::sc_quirks' data-ref="nvme_softc::sc_quirks" data-ref-filename="nvme_softc..sc_quirks">sc_quirks</dfn>;</td></tr>
<tr><th id="142">142</th><td><u>#define	<dfn class="macro" id="_M/NVME_QUIRK_DELAY_B4_CHK_RDY" data-ref="_M/NVME_QUIRK_DELAY_B4_CHK_RDY">NVME_QUIRK_DELAY_B4_CHK_RDY</dfn>	__BIT(0)</u></td></tr>
<tr><th id="143">143</th><td></td></tr>
<tr><th id="144">144</th><td>	<em>char</em>			<dfn class="decl field" id="nvme_softc::sc_modelname" title='nvme_softc::sc_modelname' data-ref="nvme_softc::sc_modelname" data-ref-filename="nvme_softc..sc_modelname">sc_modelname</dfn>[<var>81</var>];</td></tr>
<tr><th id="145">145</th><td>};</td></tr>
<tr><th id="146">146</th><td></td></tr>
<tr><th id="147">147</th><td><u>#define	<dfn class="macro" id="_M/lemtoh16" data-ref="_M/lemtoh16">lemtoh16</dfn>(p)	le16toh(*((uint16_t *)(p)))</u></td></tr>
<tr><th id="148">148</th><td><u>#define	<dfn class="macro" id="_M/lemtoh32" data-ref="_M/lemtoh32">lemtoh32</dfn>(p)	le32toh(*((uint32_t *)(p)))</u></td></tr>
<tr><th id="149">149</th><td><u>#define	<dfn class="macro" id="_M/lemtoh64" data-ref="_M/lemtoh64">lemtoh64</dfn>(p)	le64toh(*((uint64_t *)(p)))</u></td></tr>
<tr><th id="150">150</th><td><u>#define	<dfn class="macro" id="_M/htolem16" data-ref="_M/htolem16">htolem16</dfn>(p, x)	(*((uint16_t *)(p)) = htole16(x))</u></td></tr>
<tr><th id="151">151</th><td><u>#define	<dfn class="macro" id="_M/htolem32" data-ref="_M/htolem32">htolem32</dfn>(p, x)	(*((uint32_t *)(p)) = htole32(x))</u></td></tr>
<tr><th id="152">152</th><td><u>#define	<dfn class="macro" id="_M/htolem64" data-ref="_M/htolem64">htolem64</dfn>(p, x)	(*((uint64_t *)(p)) = htole64(x))</u></td></tr>
<tr><th id="153">153</th><td></td></tr>
<tr><th id="154">154</th><td><b>struct</b> <dfn class="type def" id="nvme_attach_args" title='nvme_attach_args' data-ref="nvme_attach_args" data-ref-filename="nvme_attach_args">nvme_attach_args</dfn> {</td></tr>
<tr><th id="155">155</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a>	<dfn class="decl field" id="nvme_attach_args::naa_nsid" title='nvme_attach_args::naa_nsid' data-ref="nvme_attach_args::naa_nsid" data-ref-filename="nvme_attach_args..naa_nsid">naa_nsid</dfn>;</td></tr>
<tr><th id="156">156</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a>	<dfn class="decl field" id="nvme_attach_args::naa_qentries" title='nvme_attach_args::naa_qentries' data-ref="nvme_attach_args::naa_qentries" data-ref-filename="nvme_attach_args..naa_qentries">naa_qentries</dfn>;	<i>/* total number of queue slots */</i></td></tr>
<tr><th id="157">157</th><td>	<a class="typedef" href="../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a>	<dfn class="decl field" id="nvme_attach_args::naa_maxphys" title='nvme_attach_args::naa_maxphys' data-ref="nvme_attach_args::naa_maxphys" data-ref-filename="nvme_attach_args..naa_maxphys">naa_maxphys</dfn>;	<i>/* maximum device transfer size */</i></td></tr>
<tr><th id="158">158</th><td>	<em>const</em> <em>char</em>	*<dfn class="decl field" id="nvme_attach_args::naa_typename" title='nvme_attach_args::naa_typename' data-ref="nvme_attach_args::naa_typename" data-ref-filename="nvme_attach_args..naa_typename">naa_typename</dfn>;	<i>/* identifier */</i></td></tr>
<tr><th id="159">159</th><td>};</td></tr>
<tr><th id="160">160</th><td></td></tr>
<tr><th id="161">161</th><td><em>int</em>	<dfn class="decl fn" id="nvme_attach" title='nvme_attach' data-ref="nvme_attach" data-ref-filename="nvme_attach">nvme_attach</dfn>(<b>struct</b> <a class="type" href="#nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</a> *);</td></tr>
<tr><th id="162">162</th><td><em>int</em>	<dfn class="decl fn" id="nvme_detach" title='nvme_detach' data-ref="nvme_detach" data-ref-filename="nvme_detach">nvme_detach</dfn>(<b>struct</b> <a class="type" href="#nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</a> *, <em>int</em> <dfn class="local col3 decl" id="3flags" title='flags' data-type='int' data-ref="3flags" data-ref-filename="3flags">flags</dfn>);</td></tr>
<tr><th id="163">163</th><td><em>int</em>	<dfn class="decl fn" id="nvme_rescan" title='nvme_rescan' data-ref="nvme_rescan" data-ref-filename="nvme_rescan">nvme_rescan</dfn>(<a class="typedef" href="../../sys/device_if.h.html#device_t" title='device_t' data-type='struct device *' data-ref="device_t" data-ref-filename="device_t">device_t</a>, <em>const</em> <em>char</em> *, <em>const</em> <em>int</em> *);</td></tr>
<tr><th id="164">164</th><td><em>void</em>	<dfn class="decl fn" id="nvme_childdet" title='nvme_childdet' data-ref="nvme_childdet" data-ref-filename="nvme_childdet">nvme_childdet</dfn>(<a class="typedef" href="../../sys/device_if.h.html#device_t" title='device_t' data-type='struct device *' data-ref="device_t" data-ref-filename="device_t">device_t</a>, <a class="typedef" href="../../sys/device_if.h.html#device_t" title='device_t' data-type='struct device *' data-ref="device_t" data-ref-filename="device_t">device_t</a>);</td></tr>
<tr><th id="165">165</th><td><em>int</em>	<dfn class="decl fn" id="nvme_intr" title='nvme_intr' data-ref="nvme_intr" data-ref-filename="nvme_intr">nvme_intr</dfn>(<em>void</em> *);</td></tr>
<tr><th id="166">166</th><td><em>void</em>	<dfn class="decl fn" id="nvme_softintr_intx" title='nvme_softintr_intx' data-ref="nvme_softintr_intx" data-ref-filename="nvme_softintr_intx">nvme_softintr_intx</dfn>(<em>void</em> *);</td></tr>
<tr><th id="167">167</th><td><em>int</em>	<dfn class="decl fn" id="nvme_intr_msi" title='nvme_intr_msi' data-ref="nvme_intr_msi" data-ref-filename="nvme_intr_msi">nvme_intr_msi</dfn>(<em>void</em> *);</td></tr>
<tr><th id="168">168</th><td><em>void</em>	<dfn class="decl fn" id="nvme_softintr_msi" title='nvme_softintr_msi' data-ref="nvme_softintr_msi" data-ref-filename="nvme_softintr_msi">nvme_softintr_msi</dfn>(<em>void</em> *);</td></tr>
<tr><th id="169">169</th><td></td></tr>
<tr><th id="170">170</th><td><em>static</em> <b>__inline</b> <b>struct</b> <a class="type" href="#nvme_queue" title='nvme_queue' data-ref="nvme_queue" data-ref-filename="nvme_queue">nvme_queue</a> *</td></tr>
<tr><th id="171">171</th><td><dfn class="decl def fn" id="nvme_get_q" title='nvme_get_q' data-ref="nvme_get_q" data-ref-filename="nvme_get_q">nvme_get_q</dfn>(<b>struct</b> <a class="type" href="#nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</a> *<dfn class="local col4 decl" id="4sc" title='sc' data-type='struct nvme_softc *' data-ref="4sc" data-ref-filename="4sc">sc</dfn>, <b>struct</b> <a class="type" href="../../sys/buf.h.html#buf" title='buf' data-ref="buf" data-ref-filename="buf">buf</a> *<dfn class="local col5 decl" id="5bp" title='bp' data-type='struct buf *' data-ref="5bp" data-ref-filename="5bp">bp</dfn>, <a class="macro" href="../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="local col6 decl" id="6waitok" title='waitok' data-type='_Bool' data-ref="6waitok" data-ref-filename="6waitok">waitok</dfn>)</td></tr>
<tr><th id="172">172</th><td>{</td></tr>
<tr><th id="173">173</th><td>	<b>struct</b> <a class="type" href="../../arch/x86/include/cpu.h.html#cpu_info" title='cpu_info' data-ref="cpu_info" data-ref-filename="cpu_info">cpu_info</a> *<dfn class="local col7 decl" id="7ci" title='ci' data-type='struct cpu_info *' data-ref="7ci" data-ref-filename="7ci">ci</dfn> = (<a class="local col5 ref" href="#5bp" title='bp' data-ref="5bp" data-ref-filename="5bp">bp</a> &amp;&amp; <a class="local col5 ref" href="#5bp" title='bp' data-ref="5bp" data-ref-filename="5bp">bp</a>-&gt;<a class="ref field" href="../../sys/buf.h.html#buf::b_ci" title='buf::b_ci' data-ref="buf::b_ci" data-ref-filename="buf..b_ci">b_ci</a>) ? <a class="local col5 ref" href="#5bp" title='bp' data-ref="5bp" data-ref-filename="5bp">bp</a>-&gt;<a class="ref field" href="../../sys/buf.h.html#buf::b_ci" title='buf::b_ci' data-ref="buf::b_ci" data-ref-filename="buf..b_ci">b_ci</a> : <a class="macro" href="../../arch/x86/include/cpu.h.html#404" title="x86_curcpu()" data-ref="_M/curcpu">curcpu</a>();</td></tr>
<tr><th id="174">174</th><td></td></tr>
<tr><th id="175">175</th><td>	<i>/*</i></td></tr>
<tr><th id="176">176</th><td><i>	 * Find a queue with available ccbs, preferring the originating CPU's queue.</i></td></tr>
<tr><th id="177">177</th><td><i>	 */</i></td></tr>
<tr><th id="178">178</th><td></td></tr>
<tr><th id="179">179</th><td>	<b>for</b> (<a class="typedef" href="../../sys/types.h.html#u_int" title='u_int' data-type='unsigned int' data-ref="u_int" data-ref-filename="u_int">u_int</a> <dfn class="local col8 decl" id="8qoff" title='qoff' data-type='u_int' data-ref="8qoff" data-ref-filename="8qoff">qoff</dfn> = <var>0</var>; <a class="local col8 ref" href="#8qoff" title='qoff' data-ref="8qoff" data-ref-filename="8qoff">qoff</a> &lt; <a class="local col4 ref" href="#4sc" title='sc' data-ref="4sc" data-ref-filename="4sc">sc</a>-&gt;<a class="ref field" href="#nvme_softc::sc_nq" title='nvme_softc::sc_nq' data-ref="nvme_softc::sc_nq" data-ref-filename="nvme_softc..sc_nq">sc_nq</a>; <a class="local col8 ref" href="#8qoff" title='qoff' data-ref="8qoff" data-ref-filename="8qoff">qoff</a>++) {</td></tr>
<tr><th id="180">180</th><td>		<b>struct</b> <a class="type" href="#nvme_queue" title='nvme_queue' data-ref="nvme_queue" data-ref-filename="nvme_queue">nvme_queue</a> *<dfn class="local col9 decl" id="9q" title='q' data-type='struct nvme_queue *' data-ref="9q" data-ref-filename="9q">q</dfn> = <a class="local col4 ref" href="#4sc" title='sc' data-ref="4sc" data-ref-filename="4sc">sc</a>-&gt;<a class="ref field" href="#nvme_softc::sc_q" title='nvme_softc::sc_q' data-ref="nvme_softc::sc_q" data-ref-filename="nvme_softc..sc_q">sc_q</a>[(<a class="ref fn" href="../../sys/cpu.h.html#cpu_index" title='cpu_index' data-ref="cpu_index" data-ref-filename="cpu_index">cpu_index</a>(<a class="local col7 ref" href="#7ci" title='ci' data-ref="7ci" data-ref-filename="7ci">ci</a>) + <a class="local col8 ref" href="#8qoff" title='qoff' data-ref="8qoff" data-ref-filename="8qoff">qoff</a>) % <a class="local col4 ref" href="#4sc" title='sc' data-ref="4sc" data-ref-filename="4sc">sc</a>-&gt;<a class="ref field" href="#nvme_softc::sc_nq" title='nvme_softc::sc_nq' data-ref="nvme_softc::sc_nq" data-ref-filename="nvme_softc..sc_nq">sc_nq</a>];</td></tr>
<tr><th id="181">181</th><td>		<b>if</b> (!<a class="macro" href="../../sys/queue.h.html#327" title="((&amp;q-&gt;q_ccb_list)-&gt;sqh_first == ((void *)0))" data-ref="_M/SIMPLEQ_EMPTY">SIMPLEQ_EMPTY</a>(&amp;<a class="local col9 ref" href="#9q" title='q' data-ref="9q" data-ref-filename="9q">q</a>-&gt;<a class="ref field" href="#nvme_queue::q_ccb_list" title='nvme_queue::q_ccb_list' data-ref="nvme_queue::q_ccb_list" data-ref-filename="nvme_queue..q_ccb_list">q_ccb_list</a>) || <a class="local col6 ref" href="#6waitok" title='waitok' data-ref="6waitok" data-ref-filename="6waitok">waitok</a>)</td></tr>
<tr><th id="182">182</th><td>			<b>return</b> <a class="local col9 ref" href="#9q" title='q' data-ref="9q" data-ref-filename="9q">q</a>;</td></tr>
<tr><th id="183">183</th><td>	}</td></tr>
<tr><th id="184">184</th><td>	<b>return</b> <a class="macro" href="../../sys/null.h.html#13" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="185">185</th><td>}</td></tr>
<tr><th id="186">186</th><td></td></tr>
<tr><th id="187">187</th><td><i>/*</i></td></tr>
<tr><th id="188">188</th><td><i> * namespace</i></td></tr>
<tr><th id="189">189</th><td><i> */</i></td></tr>
<tr><th id="190">190</th><td><em>static</em> <b>__inline</b> <b>struct</b> <a class="type" href="#nvme_namespace" title='nvme_namespace' data-ref="nvme_namespace" data-ref-filename="nvme_namespace">nvme_namespace</a> *</td></tr>
<tr><th id="191">191</th><td><dfn class="decl def fn" id="nvme_ns_get" title='nvme_ns_get' data-ref="nvme_ns_get" data-ref-filename="nvme_ns_get">nvme_ns_get</dfn>(<b>struct</b> <a class="type" href="#nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</a> *<dfn class="local col0 decl" id="10sc" title='sc' data-type='struct nvme_softc *' data-ref="10sc" data-ref-filename="10sc">sc</dfn>, <a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a> <dfn class="local col1 decl" id="11nsid" title='nsid' data-type='uint16_t' data-ref="11nsid" data-ref-filename="11nsid">nsid</dfn>)</td></tr>
<tr><th id="192">192</th><td>{</td></tr>
<tr><th id="193">193</th><td>	<b>if</b> (<a class="local col1 ref" href="#11nsid" title='nsid' data-ref="11nsid" data-ref-filename="11nsid">nsid</a> == <var>0</var> || <a class="local col1 ref" href="#11nsid" title='nsid' data-ref="11nsid" data-ref-filename="11nsid">nsid</a> - <var>1</var> &gt;= <a class="local col0 ref" href="#10sc" title='sc' data-ref="10sc" data-ref-filename="10sc">sc</a>-&gt;<a class="ref field" href="#nvme_softc::sc_nn" title='nvme_softc::sc_nn' data-ref="nvme_softc::sc_nn" data-ref-filename="nvme_softc..sc_nn">sc_nn</a>)</td></tr>
<tr><th id="194">194</th><td>		<b>return</b> <a class="macro" href="../../sys/null.h.html#13" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="195">195</th><td>	<b>return</b> &amp;<a class="local col0 ref" href="#10sc" title='sc' data-ref="10sc" data-ref-filename="10sc">sc</a>-&gt;<a class="ref field" href="#nvme_softc::sc_namespaces" title='nvme_softc::sc_namespaces' data-ref="nvme_softc::sc_namespaces" data-ref-filename="nvme_softc..sc_namespaces">sc_namespaces</a>[<a class="local col1 ref" href="#11nsid" title='nsid' data-ref="11nsid" data-ref-filename="11nsid">nsid</a> - <var>1</var>];</td></tr>
<tr><th id="196">196</th><td>}</td></tr>
<tr><th id="197">197</th><td></td></tr>
<tr><th id="198">198</th><td><em>int</em>	<dfn class="decl fn" id="nvme_ns_identify" title='nvme_ns_identify' data-ref="nvme_ns_identify" data-ref-filename="nvme_ns_identify">nvme_ns_identify</dfn>(<b>struct</b> <a class="type" href="#nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</a> *, <a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a>);</td></tr>
<tr><th id="199">199</th><td><em>void</em>	<dfn class="decl fn" id="nvme_ns_free" title='nvme_ns_free' data-ref="nvme_ns_free" data-ref-filename="nvme_ns_free">nvme_ns_free</dfn>(<b>struct</b> <a class="type" href="#nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</a> *, <a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a>);</td></tr>
<tr><th id="200">200</th><td><em>int</em>	<dfn class="decl fn" id="nvme_ns_dobio" title='nvme_ns_dobio' data-ref="nvme_ns_dobio" data-ref-filename="nvme_ns_dobio">nvme_ns_dobio</dfn>(<b>struct</b> <a class="type" href="#nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</a> *, <a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a>, <em>void</em> *,</td></tr>
<tr><th id="201">201</th><td>    <b>struct</b> <a class="type" href="../../sys/buf.h.html#buf" title='buf' data-ref="buf" data-ref-filename="buf">buf</a> *, <em>void</em> *, <a class="typedef" href="../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a>, <em>int</em>, <a class="typedef" href="../../sys/types.h.html#daddr_t" title='daddr_t' data-type='int64_t' data-ref="daddr_t" data-ref-filename="daddr_t">daddr_t</a>, <em>int</em>, <a class="typedef" href="#nvme_nnc_done" title='nvme_nnc_done' data-type='void (*)(void *, struct buf *, uint16_t, uint32_t)' data-ref="nvme_nnc_done" data-ref-filename="nvme_nnc_done">nvme_nnc_done</a>);</td></tr>
<tr><th id="202">202</th><td><em>int</em>	<dfn class="decl fn" id="nvme_ns_sync" title='nvme_ns_sync' data-ref="nvme_ns_sync" data-ref-filename="nvme_ns_sync">nvme_ns_sync</dfn>(<b>struct</b> <a class="type" href="#nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</a> *, <a class="typedef" href="../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a>, <em>int</em>);</td></tr>
<tr><th id="203">203</th><td><em>int</em>	<dfn class="decl fn" id="nvme_admin_getcache" title='nvme_admin_getcache' data-ref="nvme_admin_getcache" data-ref-filename="nvme_admin_getcache">nvme_admin_getcache</dfn>(<b>struct</b> <a class="type" href="#nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</a> *, <em>int</em> *);</td></tr>
<tr><th id="204">204</th><td><em>int</em>	<dfn class="decl fn" id="nvme_admin_setcache" title='nvme_admin_setcache' data-ref="nvme_admin_setcache" data-ref-filename="nvme_admin_setcache">nvme_admin_setcache</dfn>(<b>struct</b> <a class="type" href="#nvme_softc" title='nvme_softc' data-ref="nvme_softc" data-ref-filename="nvme_softc">nvme_softc</a> *, <em>int</em>);</td></tr>
<tr><th id="205">205</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='ld_nvme.c.html'>netbsd/sys/dev/ic/ld_nvme.c</a><br/>Generated on <em>2019-Jul-19</em> from project netbsd revision <em>f9da89e0d</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
