<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>nvmm_x86_vmx.c source code [netbsd/sys/dev/nvmm/x86/nvmm_x86_vmx.c] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="ept_desc,msr_entry,vmcs,vmx_cpudata,vmx_machdata,vmxon,vmxoncpu,vpid_desc "/>
<link rel="stylesheet" href="https://code.woboq.org/data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="https://code.woboq.org/data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="https://code.woboq.org/data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="https://code.woboq.org/data/jquery/jquery-ui.min.js"></script>
<script>var file = 'netbsd/sys/dev/nvmm/x86/nvmm_x86_vmx.c'; var root_path = '../../../../..'; var data_path = 'https://code.woboq.org/data'; var ecma_script_api_version = 2;</script>
<script src='https://code.woboq.org/data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../..'>netbsd</a>/<a href='../../..'>sys</a>/<a href='../..'>dev</a>/<a href='..'>nvmm</a>/<a href='./'>x86</a>/<a href='nvmm_x86_vmx.c.html'>nvmm_x86_vmx.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*	$NetBSD: nvmm_x86_vmx.c,v 1.36 2019/06/16 18:30:31 maxv Exp $	*/</i></td></tr>
<tr><th id="2">2</th><td></td></tr>
<tr><th id="3">3</th><td><i>/*</i></td></tr>
<tr><th id="4">4</th><td><i> * Copyright (c) 2018 The NetBSD Foundation, Inc.</i></td></tr>
<tr><th id="5">5</th><td><i> * All rights reserved.</i></td></tr>
<tr><th id="6">6</th><td><i> *</i></td></tr>
<tr><th id="7">7</th><td><i> * This code is derived from software contributed to The NetBSD Foundation</i></td></tr>
<tr><th id="8">8</th><td><i> * by Maxime Villard.</i></td></tr>
<tr><th id="9">9</th><td><i> *</i></td></tr>
<tr><th id="10">10</th><td><i> * Redistribution and use in source and binary forms, with or without</i></td></tr>
<tr><th id="11">11</th><td><i> * modification, are permitted provided that the following conditions</i></td></tr>
<tr><th id="12">12</th><td><i> * are met:</i></td></tr>
<tr><th id="13">13</th><td><i> * 1. Redistributions of source code must retain the above copyright</i></td></tr>
<tr><th id="14">14</th><td><i> *    notice, this list of conditions and the following disclaimer.</i></td></tr>
<tr><th id="15">15</th><td><i> * 2. Redistributions in binary form must reproduce the above copyright</i></td></tr>
<tr><th id="16">16</th><td><i> *    notice, this list of conditions and the following disclaimer in the</i></td></tr>
<tr><th id="17">17</th><td><i> *    documentation and/or other materials provided with the distribution.</i></td></tr>
<tr><th id="18">18</th><td><i> *</i></td></tr>
<tr><th id="19">19</th><td><i> * THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC. AND CONTRIBUTORS</i></td></tr>
<tr><th id="20">20</th><td><i> * ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED</i></td></tr>
<tr><th id="21">21</th><td><i> * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR</i></td></tr>
<tr><th id="22">22</th><td><i> * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS</i></td></tr>
<tr><th id="23">23</th><td><i> * BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</i></td></tr>
<tr><th id="24">24</th><td><i> * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</i></td></tr>
<tr><th id="25">25</th><td><i> * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</i></td></tr>
<tr><th id="26">26</th><td><i> * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</i></td></tr>
<tr><th id="27">27</th><td><i> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</i></td></tr>
<tr><th id="28">28</th><td><i> * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</i></td></tr>
<tr><th id="29">29</th><td><i> * POSSIBILITY OF SUCH DAMAGE.</i></td></tr>
<tr><th id="30">30</th><td><i> */</i></td></tr>
<tr><th id="31">31</th><td></td></tr>
<tr><th id="32">32</th><td><u>#include <a href="../../../sys/cdefs.h.html">&lt;sys/cdefs.h&gt;</a></u></td></tr>
<tr><th id="33">33</th><td><a class="macro" href="../../../sys/cdefs_elf.h.html#156" title="__asm(&quot;.pushsection &quot; &quot;.ident&quot; &quot;\n&quot; &quot;.asciz \&quot;&quot; &quot;$NetBSD: nvmm_x86_vmx.c,v 1.36 2019/06/16 18:30:31 maxv Exp $&quot; &quot;\&quot;\n&quot; &quot;.popsection&quot;)" data-ref="_M/__KERNEL_RCSID">__KERNEL_RCSID</a>(<var>0</var>, <q>"$NetBSD: nvmm_x86_vmx.c,v 1.36 2019/06/16 18:30:31 maxv Exp $"</q>);</td></tr>
<tr><th id="34">34</th><td></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="../../../sys/param.h.html">&lt;sys/param.h&gt;</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="../../../sys/systm.h.html">&lt;sys/systm.h&gt;</a></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="../../../sys/kernel.h.html">&lt;sys/kernel.h&gt;</a></u></td></tr>
<tr><th id="38">38</th><td><u>#include <a href="../../../sys/kmem.h.html">&lt;sys/kmem.h&gt;</a></u></td></tr>
<tr><th id="39">39</th><td><u>#include <a href="../../../sys/cpu.h.html">&lt;sys/cpu.h&gt;</a></u></td></tr>
<tr><th id="40">40</th><td><u>#include <a href="../../../sys/xcall.h.html">&lt;sys/xcall.h&gt;</a></u></td></tr>
<tr><th id="41">41</th><td><u>#include <a href="../../../sys/mman.h.html">&lt;sys/mman.h&gt;</a></u></td></tr>
<tr><th id="42">42</th><td></td></tr>
<tr><th id="43">43</th><td><u>#include <a href="../../../uvm/uvm.h.html">&lt;uvm/uvm.h&gt;</a></u></td></tr>
<tr><th id="44">44</th><td><u>#include <a href="../../../uvm/uvm_page.h.html">&lt;uvm/uvm_page.h&gt;</a></u></td></tr>
<tr><th id="45">45</th><td></td></tr>
<tr><th id="46">46</th><td><u>#include <a href="../../../arch/x86/include/cputypes.h.html">&lt;x86/cputypes.h&gt;</a></u></td></tr>
<tr><th id="47">47</th><td><u>#include <a href="../../../arch/x86/include/specialreg.h.html">&lt;x86/specialreg.h&gt;</a></u></td></tr>
<tr><th id="48">48</th><td><u>#include <a href="../../../arch/x86/include/pmap.h.html">&lt;x86/pmap.h&gt;</a></u></td></tr>
<tr><th id="49">49</th><td><u>#include <a href="../../../arch/x86/include/dbregs.h.html">&lt;x86/dbregs.h&gt;</a></u></td></tr>
<tr><th id="50">50</th><td><u>#include <a href="../../../arch/x86/include/cpu_counter.h.html">&lt;x86/cpu_counter.h&gt;</a></u></td></tr>
<tr><th id="51">51</th><td><u>#include <a href="../../../arch/amd64/include/cpuvar.h.html">&lt;machine/cpuvar.h&gt;</a></u></td></tr>
<tr><th id="52">52</th><td></td></tr>
<tr><th id="53">53</th><td><u>#include <a href="../nvmm.h.html">&lt;dev/nvmm/nvmm.h&gt;</a></u></td></tr>
<tr><th id="54">54</th><td><u>#include <a href="../nvmm_internal.h.html">&lt;dev/nvmm/nvmm_internal.h&gt;</a></u></td></tr>
<tr><th id="55">55</th><td><u>#include <a href="nvmm_x86.h.html">&lt;dev/nvmm/x86/nvmm_x86.h&gt;</a></u></td></tr>
<tr><th id="56">56</th><td></td></tr>
<tr><th id="57">57</th><td><em>int</em> <dfn class="decl fn" id="_vmx_vmxon" title='_vmx_vmxon' data-ref="_vmx_vmxon" data-ref-filename="_vmx_vmxon">_vmx_vmxon</dfn>(<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> *<dfn class="local col1 decl" id="1pa" title='pa' data-type='paddr_t *' data-ref="1pa" data-ref-filename="1pa">pa</dfn>);</td></tr>
<tr><th id="58">58</th><td><em>int</em> <dfn class="decl fn" id="_vmx_vmxoff" title='_vmx_vmxoff' data-ref="_vmx_vmxoff" data-ref-filename="_vmx_vmxoff">_vmx_vmxoff</dfn>(<em>void</em>);</td></tr>
<tr><th id="59">59</th><td><em>int</em> <dfn class="decl fn" id="vmx_vmlaunch" title='vmx_vmlaunch' data-ref="vmx_vmlaunch" data-ref-filename="vmx_vmlaunch">vmx_vmlaunch</dfn>(<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> *<dfn class="local col2 decl" id="2gprs" title='gprs' data-type='uint64_t *' data-ref="2gprs" data-ref-filename="2gprs">gprs</dfn>);</td></tr>
<tr><th id="60">60</th><td><em>int</em> <dfn class="decl fn" id="vmx_vmresume" title='vmx_vmresume' data-ref="vmx_vmresume" data-ref-filename="vmx_vmresume">vmx_vmresume</dfn>(<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> *<dfn class="local col3 decl" id="3gprs" title='gprs' data-type='uint64_t *' data-ref="3gprs" data-ref-filename="3gprs">gprs</dfn>);</td></tr>
<tr><th id="61">61</th><td></td></tr>
<tr><th id="62">62</th><td><u>#define <dfn class="macro" id="_M/vmx_vmxon" data-ref="_M/vmx_vmxon">vmx_vmxon</dfn>(a) \</u></td></tr>
<tr><th id="63">63</th><td><u>	if (__predict_false(<a class="ref fn" href="#_vmx_vmxon" title='_vmx_vmxon' data-ref="_vmx_vmxon" data-ref-filename="_vmx_vmxon">_vmx_vmxon</a>(a) != 0)) { \</u></td></tr>
<tr><th id="64">64</th><td><u>		<a class="ref fn" href="../../../sys/systm.h.html#panic" title='panic' data-ref="panic" data-ref-filename="panic">panic</a>("%s: VMXON failed", __func__); \</u></td></tr>
<tr><th id="65">65</th><td><u>	}</u></td></tr>
<tr><th id="66">66</th><td><u>#define <dfn class="macro" id="_M/vmx_vmxoff" data-ref="_M/vmx_vmxoff">vmx_vmxoff</dfn>() \</u></td></tr>
<tr><th id="67">67</th><td><u>	if (__predict_false(<a class="ref fn" href="#_vmx_vmxoff" title='_vmx_vmxoff' data-ref="_vmx_vmxoff" data-ref-filename="_vmx_vmxoff">_vmx_vmxoff</a>() != 0)) { \</u></td></tr>
<tr><th id="68">68</th><td><u>		<a class="ref fn" href="../../../sys/systm.h.html#panic" title='panic' data-ref="panic" data-ref-filename="panic">panic</a>("%s: VMXOFF failed", __func__); \</u></td></tr>
<tr><th id="69">69</th><td><u>	}</u></td></tr>
<tr><th id="70">70</th><td></td></tr>
<tr><th id="71">71</th><td><b>struct</b> <dfn class="type def" id="ept_desc" title='ept_desc' data-ref="ept_desc" data-ref-filename="ept_desc">ept_desc</dfn> {</td></tr>
<tr><th id="72">72</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="ept_desc::eptp" title='ept_desc::eptp' data-type='uint64_t' data-ref="ept_desc::eptp" data-ref-filename="ept_desc..eptp">eptp</dfn>;</td></tr>
<tr><th id="73">73</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="ept_desc::mbz" title='ept_desc::mbz' data-type='uint64_t' data-ref="ept_desc::mbz" data-ref-filename="ept_desc..mbz">mbz</dfn>;</td></tr>
<tr><th id="74">74</th><td>} <a class="macro" href="../../../sys/cdefs.h.html#391" title="__attribute__((__packed__))" data-ref="_M/__packed">__packed</a>;</td></tr>
<tr><th id="75">75</th><td></td></tr>
<tr><th id="76">76</th><td><b>struct</b> <dfn class="type def" id="vpid_desc" title='vpid_desc' data-ref="vpid_desc" data-ref-filename="vpid_desc">vpid_desc</dfn> {</td></tr>
<tr><th id="77">77</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vpid_desc::vpid" title='vpid_desc::vpid' data-type='uint64_t' data-ref="vpid_desc::vpid" data-ref-filename="vpid_desc..vpid">vpid</dfn>;</td></tr>
<tr><th id="78">78</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vpid_desc::addr" title='vpid_desc::addr' data-type='uint64_t' data-ref="vpid_desc::addr" data-ref-filename="vpid_desc..addr">addr</dfn>;</td></tr>
<tr><th id="79">79</th><td>} <a class="macro" href="../../../sys/cdefs.h.html#391" title="__attribute__((__packed__))" data-ref="_M/__packed">__packed</a>;</td></tr>
<tr><th id="80">80</th><td></td></tr>
<tr><th id="81">81</th><td><em>static</em> <b>inline</b> <em>void</em></td></tr>
<tr><th id="82">82</th><td><dfn class="tu decl def fn" id="vmx_invept" title='vmx_invept' data-type='void vmx_invept(uint64_t op, struct ept_desc * desc)' data-ref="vmx_invept" data-ref-filename="vmx_invept">vmx_invept</dfn>(<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col4 decl" id="4op" title='op' data-type='uint64_t' data-ref="4op" data-ref-filename="4op">op</dfn>, <b>struct</b> <a class="type" href="#ept_desc" title='ept_desc' data-ref="ept_desc" data-ref-filename="ept_desc">ept_desc</a> *<dfn class="local col5 decl" id="5desc" title='desc' data-type='struct ept_desc *' data-ref="5desc" data-ref-filename="5desc">desc</dfn>)</td></tr>
<tr><th id="83">83</th><td>{</td></tr>
<tr><th id="84">84</th><td>	<b>asm</b> <em>volatile</em> (</td></tr>
<tr><th id="85">85</th><td>		<q>"invept		%[desc],%[op];"</q></td></tr>
<tr><th id="86">86</th><td>		<q>"jz		vmx_insn_failvalid;"</q></td></tr>
<tr><th id="87">87</th><td>		<q>"jc		vmx_insn_failinvalid;"</q></td></tr>
<tr><th id="88">88</th><td>		:</td></tr>
<tr><th id="89">89</th><td>		: [desc] <q>"m"</q> (*<a class="local col5 ref" href="#5desc" title='desc' data-ref="5desc" data-ref-filename="5desc">desc</a>), [op] <q>"r"</q> (<a class="local col4 ref" href="#4op" title='op' data-ref="4op" data-ref-filename="4op">op</a>)</td></tr>
<tr><th id="90">90</th><td>		: <q>"memory"</q>, <q>"cc"</q></td></tr>
<tr><th id="91">91</th><td>	);</td></tr>
<tr><th id="92">92</th><td>}</td></tr>
<tr><th id="93">93</th><td></td></tr>
<tr><th id="94">94</th><td><em>static</em> <b>inline</b> <em>void</em></td></tr>
<tr><th id="95">95</th><td><dfn class="tu decl def fn" id="vmx_invvpid" title='vmx_invvpid' data-type='void vmx_invvpid(uint64_t op, struct vpid_desc * desc)' data-ref="vmx_invvpid" data-ref-filename="vmx_invvpid">vmx_invvpid</dfn>(<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col6 decl" id="6op" title='op' data-type='uint64_t' data-ref="6op" data-ref-filename="6op">op</dfn>, <b>struct</b> <a class="type" href="#vpid_desc" title='vpid_desc' data-ref="vpid_desc" data-ref-filename="vpid_desc">vpid_desc</a> *<dfn class="local col7 decl" id="7desc" title='desc' data-type='struct vpid_desc *' data-ref="7desc" data-ref-filename="7desc">desc</dfn>)</td></tr>
<tr><th id="96">96</th><td>{</td></tr>
<tr><th id="97">97</th><td>	<b>asm</b> <em>volatile</em> (</td></tr>
<tr><th id="98">98</th><td>		<q>"invvpid	%[desc],%[op];"</q></td></tr>
<tr><th id="99">99</th><td>		<q>"jz		vmx_insn_failvalid;"</q></td></tr>
<tr><th id="100">100</th><td>		<q>"jc		vmx_insn_failinvalid;"</q></td></tr>
<tr><th id="101">101</th><td>		:</td></tr>
<tr><th id="102">102</th><td>		: [desc] <q>"m"</q> (*<a class="local col7 ref" href="#7desc" title='desc' data-ref="7desc" data-ref-filename="7desc">desc</a>), [op] <q>"r"</q> (<a class="local col6 ref" href="#6op" title='op' data-ref="6op" data-ref-filename="6op">op</a>)</td></tr>
<tr><th id="103">103</th><td>		: <q>"memory"</q>, <q>"cc"</q></td></tr>
<tr><th id="104">104</th><td>	);</td></tr>
<tr><th id="105">105</th><td>}</td></tr>
<tr><th id="106">106</th><td></td></tr>
<tr><th id="107">107</th><td><em>static</em> <b>inline</b> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a></td></tr>
<tr><th id="108">108</th><td><dfn class="tu decl def fn" id="vmx_vmread" title='vmx_vmread' data-type='uint64_t vmx_vmread(uint64_t field)' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</dfn>(<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col8 decl" id="8field" title='field' data-type='uint64_t' data-ref="8field" data-ref-filename="8field">field</dfn>)</td></tr>
<tr><th id="109">109</th><td>{</td></tr>
<tr><th id="110">110</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col9 decl" id="9value" title='value' data-type='uint64_t' data-ref="9value" data-ref-filename="9value">value</dfn>;</td></tr>
<tr><th id="111">111</th><td></td></tr>
<tr><th id="112">112</th><td>	<b>asm</b> <em>volatile</em> (</td></tr>
<tr><th id="113">113</th><td>		<q>"vmread		%[field],%[value];"</q></td></tr>
<tr><th id="114">114</th><td>		<q>"jz		vmx_insn_failvalid;"</q></td></tr>
<tr><th id="115">115</th><td>		<q>"jc		vmx_insn_failinvalid;"</q></td></tr>
<tr><th id="116">116</th><td>		: [value] <q>"=r"</q> (<a class="local col9 ref" href="#9value" title='value' data-ref="9value" data-ref-filename="9value">value</a>)</td></tr>
<tr><th id="117">117</th><td>		: [field] <q>"r"</q> (<a class="local col8 ref" href="#8field" title='field' data-ref="8field" data-ref-filename="8field">field</a>)</td></tr>
<tr><th id="118">118</th><td>		: <q>"cc"</q></td></tr>
<tr><th id="119">119</th><td>	);</td></tr>
<tr><th id="120">120</th><td></td></tr>
<tr><th id="121">121</th><td>	<b>return</b> <a class="local col9 ref" href="#9value" title='value' data-ref="9value" data-ref-filename="9value">value</a>;</td></tr>
<tr><th id="122">122</th><td>}</td></tr>
<tr><th id="123">123</th><td></td></tr>
<tr><th id="124">124</th><td><em>static</em> <b>inline</b> <em>void</em></td></tr>
<tr><th id="125">125</th><td><dfn class="tu decl def fn" id="vmx_vmwrite" title='vmx_vmwrite' data-type='void vmx_vmwrite(uint64_t field, uint64_t value)' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</dfn>(<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col0 decl" id="10field" title='field' data-type='uint64_t' data-ref="10field" data-ref-filename="10field">field</dfn>, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col1 decl" id="11value" title='value' data-type='uint64_t' data-ref="11value" data-ref-filename="11value">value</dfn>)</td></tr>
<tr><th id="126">126</th><td>{</td></tr>
<tr><th id="127">127</th><td>	<b>asm</b> <em>volatile</em> (</td></tr>
<tr><th id="128">128</th><td>		<q>"vmwrite	%[value],%[field];"</q></td></tr>
<tr><th id="129">129</th><td>		<q>"jz		vmx_insn_failvalid;"</q></td></tr>
<tr><th id="130">130</th><td>		<q>"jc		vmx_insn_failinvalid;"</q></td></tr>
<tr><th id="131">131</th><td>		:</td></tr>
<tr><th id="132">132</th><td>		: [field] <q>"r"</q> (<a class="local col0 ref" href="#10field" title='field' data-ref="10field" data-ref-filename="10field">field</a>), [value] <q>"r"</q> (<a class="local col1 ref" href="#11value" title='value' data-ref="11value" data-ref-filename="11value">value</a>)</td></tr>
<tr><th id="133">133</th><td>		: <q>"cc"</q></td></tr>
<tr><th id="134">134</th><td>	);</td></tr>
<tr><th id="135">135</th><td>}</td></tr>
<tr><th id="136">136</th><td></td></tr>
<tr><th id="137">137</th><td><em>static</em> <b>inline</b> <a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a></td></tr>
<tr><th id="138">138</th><td><dfn class="tu decl def fn" id="vmx_vmptrst" title='vmx_vmptrst' data-type='paddr_t vmx_vmptrst()' data-ref="vmx_vmptrst" data-ref-filename="vmx_vmptrst">vmx_vmptrst</dfn>(<em>void</em>)</td></tr>
<tr><th id="139">139</th><td>{</td></tr>
<tr><th id="140">140</th><td>	<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> <dfn class="local col2 decl" id="12pa" title='pa' data-type='paddr_t' data-ref="12pa" data-ref-filename="12pa">pa</dfn>;</td></tr>
<tr><th id="141">141</th><td></td></tr>
<tr><th id="142">142</th><td>	<b>asm</b> <em>volatile</em> (</td></tr>
<tr><th id="143">143</th><td>		<q>"vmptrst	%[pa];"</q></td></tr>
<tr><th id="144">144</th><td>		:</td></tr>
<tr><th id="145">145</th><td>		: [pa] <q>"m"</q> (*(<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> *)&amp;<a class="local col2 ref" href="#12pa" title='pa' data-ref="12pa" data-ref-filename="12pa">pa</a>)</td></tr>
<tr><th id="146">146</th><td>		: <q>"memory"</q></td></tr>
<tr><th id="147">147</th><td>	);</td></tr>
<tr><th id="148">148</th><td></td></tr>
<tr><th id="149">149</th><td>	<b>return</b> <a class="local col2 ref" href="#12pa" title='pa' data-ref="12pa" data-ref-filename="12pa">pa</a>;</td></tr>
<tr><th id="150">150</th><td>}</td></tr>
<tr><th id="151">151</th><td></td></tr>
<tr><th id="152">152</th><td><em>static</em> <b>inline</b> <em>void</em></td></tr>
<tr><th id="153">153</th><td><dfn class="tu decl def fn" id="vmx_vmptrld" title='vmx_vmptrld' data-type='void vmx_vmptrld(paddr_t * pa)' data-ref="vmx_vmptrld" data-ref-filename="vmx_vmptrld">vmx_vmptrld</dfn>(<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> *<dfn class="local col3 decl" id="13pa" title='pa' data-type='paddr_t *' data-ref="13pa" data-ref-filename="13pa">pa</dfn>)</td></tr>
<tr><th id="154">154</th><td>{</td></tr>
<tr><th id="155">155</th><td>	<b>asm</b> <em>volatile</em> (</td></tr>
<tr><th id="156">156</th><td>		<q>"vmptrld	%[pa];"</q></td></tr>
<tr><th id="157">157</th><td>		<q>"jz		vmx_insn_failvalid;"</q></td></tr>
<tr><th id="158">158</th><td>		<q>"jc		vmx_insn_failinvalid;"</q></td></tr>
<tr><th id="159">159</th><td>		:</td></tr>
<tr><th id="160">160</th><td>		: [pa] <q>"m"</q> (*<a class="local col3 ref" href="#13pa" title='pa' data-ref="13pa" data-ref-filename="13pa">pa</a>)</td></tr>
<tr><th id="161">161</th><td>		: <q>"memory"</q>, <q>"cc"</q></td></tr>
<tr><th id="162">162</th><td>	);</td></tr>
<tr><th id="163">163</th><td>}</td></tr>
<tr><th id="164">164</th><td></td></tr>
<tr><th id="165">165</th><td><em>static</em> <b>inline</b> <em>void</em></td></tr>
<tr><th id="166">166</th><td><dfn class="tu decl def fn" id="vmx_vmclear" title='vmx_vmclear' data-type='void vmx_vmclear(paddr_t * pa)' data-ref="vmx_vmclear" data-ref-filename="vmx_vmclear">vmx_vmclear</dfn>(<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> *<dfn class="local col4 decl" id="14pa" title='pa' data-type='paddr_t *' data-ref="14pa" data-ref-filename="14pa">pa</dfn>)</td></tr>
<tr><th id="167">167</th><td>{</td></tr>
<tr><th id="168">168</th><td>	<b>asm</b> <em>volatile</em> (</td></tr>
<tr><th id="169">169</th><td>		<q>"vmclear	%[pa];"</q></td></tr>
<tr><th id="170">170</th><td>		<q>"jz		vmx_insn_failvalid;"</q></td></tr>
<tr><th id="171">171</th><td>		<q>"jc		vmx_insn_failinvalid;"</q></td></tr>
<tr><th id="172">172</th><td>		:</td></tr>
<tr><th id="173">173</th><td>		: [pa] <q>"m"</q> (*<a class="local col4 ref" href="#14pa" title='pa' data-ref="14pa" data-ref-filename="14pa">pa</a>)</td></tr>
<tr><th id="174">174</th><td>		: <q>"memory"</q>, <q>"cc"</q></td></tr>
<tr><th id="175">175</th><td>	);</td></tr>
<tr><th id="176">176</th><td>}</td></tr>
<tr><th id="177">177</th><td></td></tr>
<tr><th id="178">178</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_FEATURE_CONTROL" data-ref="_M/MSR_IA32_FEATURE_CONTROL">MSR_IA32_FEATURE_CONTROL</dfn>	0x003A</u></td></tr>
<tr><th id="179">179</th><td><u>#define		<dfn class="macro" id="_M/IA32_FEATURE_CONTROL_LOCK" data-ref="_M/IA32_FEATURE_CONTROL_LOCK">IA32_FEATURE_CONTROL_LOCK</dfn>	__BIT(0)</u></td></tr>
<tr><th id="180">180</th><td><u>#define		<dfn class="macro" id="_M/IA32_FEATURE_CONTROL_IN_SMX" data-ref="_M/IA32_FEATURE_CONTROL_IN_SMX">IA32_FEATURE_CONTROL_IN_SMX</dfn>	__BIT(1)</u></td></tr>
<tr><th id="181">181</th><td><u>#define		<dfn class="macro" id="_M/IA32_FEATURE_CONTROL_OUT_SMX" data-ref="_M/IA32_FEATURE_CONTROL_OUT_SMX">IA32_FEATURE_CONTROL_OUT_SMX</dfn>	__BIT(2)</u></td></tr>
<tr><th id="182">182</th><td></td></tr>
<tr><th id="183">183</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_BASIC" data-ref="_M/MSR_IA32_VMX_BASIC">MSR_IA32_VMX_BASIC</dfn>		0x0480</u></td></tr>
<tr><th id="184">184</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_BASIC_IDENT" data-ref="_M/IA32_VMX_BASIC_IDENT">IA32_VMX_BASIC_IDENT</dfn>		__BITS(30,0)</u></td></tr>
<tr><th id="185">185</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_BASIC_DATA_SIZE" data-ref="_M/IA32_VMX_BASIC_DATA_SIZE">IA32_VMX_BASIC_DATA_SIZE</dfn>	__BITS(44,32)</u></td></tr>
<tr><th id="186">186</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_BASIC_MEM_WIDTH" data-ref="_M/IA32_VMX_BASIC_MEM_WIDTH">IA32_VMX_BASIC_MEM_WIDTH</dfn>	__BIT(48)</u></td></tr>
<tr><th id="187">187</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_BASIC_DUAL" data-ref="_M/IA32_VMX_BASIC_DUAL">IA32_VMX_BASIC_DUAL</dfn>		__BIT(49)</u></td></tr>
<tr><th id="188">188</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_BASIC_MEM_TYPE" data-ref="_M/IA32_VMX_BASIC_MEM_TYPE">IA32_VMX_BASIC_MEM_TYPE</dfn>		__BITS(53,50)</u></td></tr>
<tr><th id="189">189</th><td><u>#define			<dfn class="macro" id="_M/MEM_TYPE_UC" data-ref="_M/MEM_TYPE_UC">MEM_TYPE_UC</dfn>		0</u></td></tr>
<tr><th id="190">190</th><td><u>#define			<dfn class="macro" id="_M/MEM_TYPE_WB" data-ref="_M/MEM_TYPE_WB">MEM_TYPE_WB</dfn>		6</u></td></tr>
<tr><th id="191">191</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_BASIC_IO_REPORT" data-ref="_M/IA32_VMX_BASIC_IO_REPORT">IA32_VMX_BASIC_IO_REPORT</dfn>	__BIT(54)</u></td></tr>
<tr><th id="192">192</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_BASIC_TRUE_CTLS" data-ref="_M/IA32_VMX_BASIC_TRUE_CTLS">IA32_VMX_BASIC_TRUE_CTLS</dfn>	__BIT(55)</u></td></tr>
<tr><th id="193">193</th><td></td></tr>
<tr><th id="194">194</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_PINBASED_CTLS" data-ref="_M/MSR_IA32_VMX_PINBASED_CTLS">MSR_IA32_VMX_PINBASED_CTLS</dfn>		0x0481</u></td></tr>
<tr><th id="195">195</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_PROCBASED_CTLS" data-ref="_M/MSR_IA32_VMX_PROCBASED_CTLS">MSR_IA32_VMX_PROCBASED_CTLS</dfn>		0x0482</u></td></tr>
<tr><th id="196">196</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_EXIT_CTLS" data-ref="_M/MSR_IA32_VMX_EXIT_CTLS">MSR_IA32_VMX_EXIT_CTLS</dfn>			0x0483</u></td></tr>
<tr><th id="197">197</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_ENTRY_CTLS" data-ref="_M/MSR_IA32_VMX_ENTRY_CTLS">MSR_IA32_VMX_ENTRY_CTLS</dfn>			0x0484</u></td></tr>
<tr><th id="198">198</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_PROCBASED_CTLS2" data-ref="_M/MSR_IA32_VMX_PROCBASED_CTLS2">MSR_IA32_VMX_PROCBASED_CTLS2</dfn>		0x048B</u></td></tr>
<tr><th id="199">199</th><td></td></tr>
<tr><th id="200">200</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_TRUE_PINBASED_CTLS" data-ref="_M/MSR_IA32_VMX_TRUE_PINBASED_CTLS">MSR_IA32_VMX_TRUE_PINBASED_CTLS</dfn>		0x048D</u></td></tr>
<tr><th id="201">201</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_TRUE_PROCBASED_CTLS" data-ref="_M/MSR_IA32_VMX_TRUE_PROCBASED_CTLS">MSR_IA32_VMX_TRUE_PROCBASED_CTLS</dfn>	0x048E</u></td></tr>
<tr><th id="202">202</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_TRUE_EXIT_CTLS" data-ref="_M/MSR_IA32_VMX_TRUE_EXIT_CTLS">MSR_IA32_VMX_TRUE_EXIT_CTLS</dfn>		0x048F</u></td></tr>
<tr><th id="203">203</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_TRUE_ENTRY_CTLS" data-ref="_M/MSR_IA32_VMX_TRUE_ENTRY_CTLS">MSR_IA32_VMX_TRUE_ENTRY_CTLS</dfn>		0x0490</u></td></tr>
<tr><th id="204">204</th><td></td></tr>
<tr><th id="205">205</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_CR0_FIXED0" data-ref="_M/MSR_IA32_VMX_CR0_FIXED0">MSR_IA32_VMX_CR0_FIXED0</dfn>			0x0486</u></td></tr>
<tr><th id="206">206</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_CR0_FIXED1" data-ref="_M/MSR_IA32_VMX_CR0_FIXED1">MSR_IA32_VMX_CR0_FIXED1</dfn>			0x0487</u></td></tr>
<tr><th id="207">207</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_CR4_FIXED0" data-ref="_M/MSR_IA32_VMX_CR4_FIXED0">MSR_IA32_VMX_CR4_FIXED0</dfn>			0x0488</u></td></tr>
<tr><th id="208">208</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_CR4_FIXED1" data-ref="_M/MSR_IA32_VMX_CR4_FIXED1">MSR_IA32_VMX_CR4_FIXED1</dfn>			0x0489</u></td></tr>
<tr><th id="209">209</th><td></td></tr>
<tr><th id="210">210</th><td><u>#define <dfn class="macro" id="_M/MSR_IA32_VMX_EPT_VPID_CAP" data-ref="_M/MSR_IA32_VMX_EPT_VPID_CAP">MSR_IA32_VMX_EPT_VPID_CAP</dfn>	0x048C</u></td></tr>
<tr><th id="211">211</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_EPT_VPID_WALKLENGTH_4" data-ref="_M/IA32_VMX_EPT_VPID_WALKLENGTH_4">IA32_VMX_EPT_VPID_WALKLENGTH_4</dfn>		__BIT(6)</u></td></tr>
<tr><th id="212">212</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_EPT_VPID_UC" data-ref="_M/IA32_VMX_EPT_VPID_UC">IA32_VMX_EPT_VPID_UC</dfn>			__BIT(8)</u></td></tr>
<tr><th id="213">213</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_EPT_VPID_WB" data-ref="_M/IA32_VMX_EPT_VPID_WB">IA32_VMX_EPT_VPID_WB</dfn>			__BIT(14)</u></td></tr>
<tr><th id="214">214</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_EPT_VPID_INVEPT" data-ref="_M/IA32_VMX_EPT_VPID_INVEPT">IA32_VMX_EPT_VPID_INVEPT</dfn>		__BIT(20)</u></td></tr>
<tr><th id="215">215</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_EPT_VPID_FLAGS_AD" data-ref="_M/IA32_VMX_EPT_VPID_FLAGS_AD">IA32_VMX_EPT_VPID_FLAGS_AD</dfn>		__BIT(21)</u></td></tr>
<tr><th id="216">216</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_EPT_VPID_INVEPT_CONTEXT" data-ref="_M/IA32_VMX_EPT_VPID_INVEPT_CONTEXT">IA32_VMX_EPT_VPID_INVEPT_CONTEXT</dfn>	__BIT(25)</u></td></tr>
<tr><th id="217">217</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_EPT_VPID_INVEPT_ALL" data-ref="_M/IA32_VMX_EPT_VPID_INVEPT_ALL">IA32_VMX_EPT_VPID_INVEPT_ALL</dfn>		__BIT(26)</u></td></tr>
<tr><th id="218">218</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_EPT_VPID_INVVPID" data-ref="_M/IA32_VMX_EPT_VPID_INVVPID">IA32_VMX_EPT_VPID_INVVPID</dfn>		__BIT(32)</u></td></tr>
<tr><th id="219">219</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_EPT_VPID_INVVPID_ADDR" data-ref="_M/IA32_VMX_EPT_VPID_INVVPID_ADDR">IA32_VMX_EPT_VPID_INVVPID_ADDR</dfn>		__BIT(40)</u></td></tr>
<tr><th id="220">220</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_EPT_VPID_INVVPID_CONTEXT" data-ref="_M/IA32_VMX_EPT_VPID_INVVPID_CONTEXT">IA32_VMX_EPT_VPID_INVVPID_CONTEXT</dfn>	__BIT(41)</u></td></tr>
<tr><th id="221">221</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_EPT_VPID_INVVPID_ALL" data-ref="_M/IA32_VMX_EPT_VPID_INVVPID_ALL">IA32_VMX_EPT_VPID_INVVPID_ALL</dfn>		__BIT(42)</u></td></tr>
<tr><th id="222">222</th><td><u>#define		<dfn class="macro" id="_M/IA32_VMX_EPT_VPID_INVVPID_CONTEXT_NOG" data-ref="_M/IA32_VMX_EPT_VPID_INVVPID_CONTEXT_NOG">IA32_VMX_EPT_VPID_INVVPID_CONTEXT_NOG</dfn>	__BIT(43)</u></td></tr>
<tr><th id="223">223</th><td></td></tr>
<tr><th id="224">224</th><td><i>/* -------------------------------------------------------------------------- */</i></td></tr>
<tr><th id="225">225</th><td></td></tr>
<tr><th id="226">226</th><td><i>/* 16-bit control fields */</i></td></tr>
<tr><th id="227">227</th><td><u>#define <dfn class="macro" id="_M/VMCS_VPID" data-ref="_M/VMCS_VPID">VMCS_VPID</dfn>				0x00000000</u></td></tr>
<tr><th id="228">228</th><td><u>#define <dfn class="macro" id="_M/VMCS_PIR_VECTOR" data-ref="_M/VMCS_PIR_VECTOR">VMCS_PIR_VECTOR</dfn>				0x00000002</u></td></tr>
<tr><th id="229">229</th><td><u>#define <dfn class="macro" id="_M/VMCS_EPTP_INDEX" data-ref="_M/VMCS_EPTP_INDEX">VMCS_EPTP_INDEX</dfn>				0x00000004</u></td></tr>
<tr><th id="230">230</th><td><i>/* 16-bit guest-state fields */</i></td></tr>
<tr><th id="231">231</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_ES_SELECTOR" data-ref="_M/VMCS_GUEST_ES_SELECTOR">VMCS_GUEST_ES_SELECTOR</dfn>			0x00000800</u></td></tr>
<tr><th id="232">232</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_CS_SELECTOR" data-ref="_M/VMCS_GUEST_CS_SELECTOR">VMCS_GUEST_CS_SELECTOR</dfn>			0x00000802</u></td></tr>
<tr><th id="233">233</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_SS_SELECTOR" data-ref="_M/VMCS_GUEST_SS_SELECTOR">VMCS_GUEST_SS_SELECTOR</dfn>			0x00000804</u></td></tr>
<tr><th id="234">234</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_DS_SELECTOR" data-ref="_M/VMCS_GUEST_DS_SELECTOR">VMCS_GUEST_DS_SELECTOR</dfn>			0x00000806</u></td></tr>
<tr><th id="235">235</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_FS_SELECTOR" data-ref="_M/VMCS_GUEST_FS_SELECTOR">VMCS_GUEST_FS_SELECTOR</dfn>			0x00000808</u></td></tr>
<tr><th id="236">236</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_GS_SELECTOR" data-ref="_M/VMCS_GUEST_GS_SELECTOR">VMCS_GUEST_GS_SELECTOR</dfn>			0x0000080A</u></td></tr>
<tr><th id="237">237</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_LDTR_SELECTOR" data-ref="_M/VMCS_GUEST_LDTR_SELECTOR">VMCS_GUEST_LDTR_SELECTOR</dfn>		0x0000080C</u></td></tr>
<tr><th id="238">238</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_TR_SELECTOR" data-ref="_M/VMCS_GUEST_TR_SELECTOR">VMCS_GUEST_TR_SELECTOR</dfn>			0x0000080E</u></td></tr>
<tr><th id="239">239</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_INTR_STATUS" data-ref="_M/VMCS_GUEST_INTR_STATUS">VMCS_GUEST_INTR_STATUS</dfn>			0x00000810</u></td></tr>
<tr><th id="240">240</th><td><u>#define <dfn class="macro" id="_M/VMCS_PML_INDEX" data-ref="_M/VMCS_PML_INDEX">VMCS_PML_INDEX</dfn>				0x00000812</u></td></tr>
<tr><th id="241">241</th><td><i>/* 16-bit host-state fields */</i></td></tr>
<tr><th id="242">242</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_ES_SELECTOR" data-ref="_M/VMCS_HOST_ES_SELECTOR">VMCS_HOST_ES_SELECTOR</dfn>			0x00000C00</u></td></tr>
<tr><th id="243">243</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_CS_SELECTOR" data-ref="_M/VMCS_HOST_CS_SELECTOR">VMCS_HOST_CS_SELECTOR</dfn>			0x00000C02</u></td></tr>
<tr><th id="244">244</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_SS_SELECTOR" data-ref="_M/VMCS_HOST_SS_SELECTOR">VMCS_HOST_SS_SELECTOR</dfn>			0x00000C04</u></td></tr>
<tr><th id="245">245</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_DS_SELECTOR" data-ref="_M/VMCS_HOST_DS_SELECTOR">VMCS_HOST_DS_SELECTOR</dfn>			0x00000C06</u></td></tr>
<tr><th id="246">246</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_FS_SELECTOR" data-ref="_M/VMCS_HOST_FS_SELECTOR">VMCS_HOST_FS_SELECTOR</dfn>			0x00000C08</u></td></tr>
<tr><th id="247">247</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_GS_SELECTOR" data-ref="_M/VMCS_HOST_GS_SELECTOR">VMCS_HOST_GS_SELECTOR</dfn>			0x00000C0A</u></td></tr>
<tr><th id="248">248</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_TR_SELECTOR" data-ref="_M/VMCS_HOST_TR_SELECTOR">VMCS_HOST_TR_SELECTOR</dfn>			0x00000C0C</u></td></tr>
<tr><th id="249">249</th><td><i>/* 64-bit control fields */</i></td></tr>
<tr><th id="250">250</th><td><u>#define <dfn class="macro" id="_M/VMCS_IO_BITMAP_A" data-ref="_M/VMCS_IO_BITMAP_A">VMCS_IO_BITMAP_A</dfn>			0x00002000</u></td></tr>
<tr><th id="251">251</th><td><u>#define <dfn class="macro" id="_M/VMCS_IO_BITMAP_B" data-ref="_M/VMCS_IO_BITMAP_B">VMCS_IO_BITMAP_B</dfn>			0x00002002</u></td></tr>
<tr><th id="252">252</th><td><u>#define <dfn class="macro" id="_M/VMCS_MSR_BITMAP" data-ref="_M/VMCS_MSR_BITMAP">VMCS_MSR_BITMAP</dfn>				0x00002004</u></td></tr>
<tr><th id="253">253</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXIT_MSR_STORE_ADDRESS" data-ref="_M/VMCS_EXIT_MSR_STORE_ADDRESS">VMCS_EXIT_MSR_STORE_ADDRESS</dfn>		0x00002006</u></td></tr>
<tr><th id="254">254</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXIT_MSR_LOAD_ADDRESS" data-ref="_M/VMCS_EXIT_MSR_LOAD_ADDRESS">VMCS_EXIT_MSR_LOAD_ADDRESS</dfn>		0x00002008</u></td></tr>
<tr><th id="255">255</th><td><u>#define <dfn class="macro" id="_M/VMCS_ENTRY_MSR_LOAD_ADDRESS" data-ref="_M/VMCS_ENTRY_MSR_LOAD_ADDRESS">VMCS_ENTRY_MSR_LOAD_ADDRESS</dfn>		0x0000200A</u></td></tr>
<tr><th id="256">256</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXECUTIVE_VMCS" data-ref="_M/VMCS_EXECUTIVE_VMCS">VMCS_EXECUTIVE_VMCS</dfn>			0x0000200C</u></td></tr>
<tr><th id="257">257</th><td><u>#define <dfn class="macro" id="_M/VMCS_PML_ADDRESS" data-ref="_M/VMCS_PML_ADDRESS">VMCS_PML_ADDRESS</dfn>			0x0000200E</u></td></tr>
<tr><th id="258">258</th><td><u>#define <dfn class="macro" id="_M/VMCS_TSC_OFFSET" data-ref="_M/VMCS_TSC_OFFSET">VMCS_TSC_OFFSET</dfn>				0x00002010</u></td></tr>
<tr><th id="259">259</th><td><u>#define <dfn class="macro" id="_M/VMCS_VIRTUAL_APIC" data-ref="_M/VMCS_VIRTUAL_APIC">VMCS_VIRTUAL_APIC</dfn>			0x00002012</u></td></tr>
<tr><th id="260">260</th><td><u>#define <dfn class="macro" id="_M/VMCS_APIC_ACCESS" data-ref="_M/VMCS_APIC_ACCESS">VMCS_APIC_ACCESS</dfn>			0x00002014</u></td></tr>
<tr><th id="261">261</th><td><u>#define <dfn class="macro" id="_M/VMCS_PIR_DESC" data-ref="_M/VMCS_PIR_DESC">VMCS_PIR_DESC</dfn>				0x00002016</u></td></tr>
<tr><th id="262">262</th><td><u>#define <dfn class="macro" id="_M/VMCS_VM_CONTROL" data-ref="_M/VMCS_VM_CONTROL">VMCS_VM_CONTROL</dfn>				0x00002018</u></td></tr>
<tr><th id="263">263</th><td><u>#define <dfn class="macro" id="_M/VMCS_EPTP" data-ref="_M/VMCS_EPTP">VMCS_EPTP</dfn>				0x0000201A</u></td></tr>
<tr><th id="264">264</th><td><u>#define		<dfn class="macro" id="_M/EPTP_TYPE" data-ref="_M/EPTP_TYPE">EPTP_TYPE</dfn>			__BITS(2,0)</u></td></tr>
<tr><th id="265">265</th><td><u>#define			<dfn class="macro" id="_M/EPTP_TYPE_UC" data-ref="_M/EPTP_TYPE_UC">EPTP_TYPE_UC</dfn>		0</u></td></tr>
<tr><th id="266">266</th><td><u>#define			<dfn class="macro" id="_M/EPTP_TYPE_WB" data-ref="_M/EPTP_TYPE_WB">EPTP_TYPE_WB</dfn>		6</u></td></tr>
<tr><th id="267">267</th><td><u>#define		<dfn class="macro" id="_M/EPTP_WALKLEN" data-ref="_M/EPTP_WALKLEN">EPTP_WALKLEN</dfn>			__BITS(5,3)</u></td></tr>
<tr><th id="268">268</th><td><u>#define		<dfn class="macro" id="_M/EPTP_FLAGS_AD" data-ref="_M/EPTP_FLAGS_AD">EPTP_FLAGS_AD</dfn>			__BIT(6)</u></td></tr>
<tr><th id="269">269</th><td><u>#define		<dfn class="macro" id="_M/EPTP_PHYSADDR" data-ref="_M/EPTP_PHYSADDR">EPTP_PHYSADDR</dfn>			__BITS(63,12)</u></td></tr>
<tr><th id="270">270</th><td><u>#define <dfn class="macro" id="_M/VMCS_EOI_EXIT0" data-ref="_M/VMCS_EOI_EXIT0">VMCS_EOI_EXIT0</dfn>				0x0000201C</u></td></tr>
<tr><th id="271">271</th><td><u>#define <dfn class="macro" id="_M/VMCS_EOI_EXIT1" data-ref="_M/VMCS_EOI_EXIT1">VMCS_EOI_EXIT1</dfn>				0x0000201E</u></td></tr>
<tr><th id="272">272</th><td><u>#define <dfn class="macro" id="_M/VMCS_EOI_EXIT2" data-ref="_M/VMCS_EOI_EXIT2">VMCS_EOI_EXIT2</dfn>				0x00002020</u></td></tr>
<tr><th id="273">273</th><td><u>#define <dfn class="macro" id="_M/VMCS_EOI_EXIT3" data-ref="_M/VMCS_EOI_EXIT3">VMCS_EOI_EXIT3</dfn>				0x00002022</u></td></tr>
<tr><th id="274">274</th><td><u>#define <dfn class="macro" id="_M/VMCS_EPTP_LIST" data-ref="_M/VMCS_EPTP_LIST">VMCS_EPTP_LIST</dfn>				0x00002024</u></td></tr>
<tr><th id="275">275</th><td><u>#define <dfn class="macro" id="_M/VMCS_VMREAD_BITMAP" data-ref="_M/VMCS_VMREAD_BITMAP">VMCS_VMREAD_BITMAP</dfn>			0x00002026</u></td></tr>
<tr><th id="276">276</th><td><u>#define <dfn class="macro" id="_M/VMCS_VMWRITE_BITMAP" data-ref="_M/VMCS_VMWRITE_BITMAP">VMCS_VMWRITE_BITMAP</dfn>			0x00002028</u></td></tr>
<tr><th id="277">277</th><td><u>#define <dfn class="macro" id="_M/VMCS_VIRTUAL_EXCEPTION" data-ref="_M/VMCS_VIRTUAL_EXCEPTION">VMCS_VIRTUAL_EXCEPTION</dfn>			0x0000202A</u></td></tr>
<tr><th id="278">278</th><td><u>#define <dfn class="macro" id="_M/VMCS_XSS_EXIT_BITMAP" data-ref="_M/VMCS_XSS_EXIT_BITMAP">VMCS_XSS_EXIT_BITMAP</dfn>			0x0000202C</u></td></tr>
<tr><th id="279">279</th><td><u>#define <dfn class="macro" id="_M/VMCS_ENCLS_EXIT_BITMAP" data-ref="_M/VMCS_ENCLS_EXIT_BITMAP">VMCS_ENCLS_EXIT_BITMAP</dfn>			0x0000202E</u></td></tr>
<tr><th id="280">280</th><td><u>#define <dfn class="macro" id="_M/VMCS_SUBPAGE_PERM_TABLE_PTR" data-ref="_M/VMCS_SUBPAGE_PERM_TABLE_PTR">VMCS_SUBPAGE_PERM_TABLE_PTR</dfn>		0x00002030</u></td></tr>
<tr><th id="281">281</th><td><u>#define <dfn class="macro" id="_M/VMCS_TSC_MULTIPLIER" data-ref="_M/VMCS_TSC_MULTIPLIER">VMCS_TSC_MULTIPLIER</dfn>			0x00002032</u></td></tr>
<tr><th id="282">282</th><td><i>/* 64-bit read-only fields */</i></td></tr>
<tr><th id="283">283</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_PHYSICAL_ADDRESS" data-ref="_M/VMCS_GUEST_PHYSICAL_ADDRESS">VMCS_GUEST_PHYSICAL_ADDRESS</dfn>		0x00002400</u></td></tr>
<tr><th id="284">284</th><td><i>/* 64-bit guest-state fields */</i></td></tr>
<tr><th id="285">285</th><td><u>#define <dfn class="macro" id="_M/VMCS_LINK_POINTER" data-ref="_M/VMCS_LINK_POINTER">VMCS_LINK_POINTER</dfn>			0x00002800</u></td></tr>
<tr><th id="286">286</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_IA32_DEBUGCTL" data-ref="_M/VMCS_GUEST_IA32_DEBUGCTL">VMCS_GUEST_IA32_DEBUGCTL</dfn>		0x00002802</u></td></tr>
<tr><th id="287">287</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_IA32_PAT" data-ref="_M/VMCS_GUEST_IA32_PAT">VMCS_GUEST_IA32_PAT</dfn>			0x00002804</u></td></tr>
<tr><th id="288">288</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_IA32_EFER" data-ref="_M/VMCS_GUEST_IA32_EFER">VMCS_GUEST_IA32_EFER</dfn>			0x00002806</u></td></tr>
<tr><th id="289">289</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_IA32_PERF_GLOBAL_CTRL" data-ref="_M/VMCS_GUEST_IA32_PERF_GLOBAL_CTRL">VMCS_GUEST_IA32_PERF_GLOBAL_CTRL</dfn>	0x00002808</u></td></tr>
<tr><th id="290">290</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_PDPTE0" data-ref="_M/VMCS_GUEST_PDPTE0">VMCS_GUEST_PDPTE0</dfn>			0x0000280A</u></td></tr>
<tr><th id="291">291</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_PDPTE1" data-ref="_M/VMCS_GUEST_PDPTE1">VMCS_GUEST_PDPTE1</dfn>			0x0000280C</u></td></tr>
<tr><th id="292">292</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_PDPTE2" data-ref="_M/VMCS_GUEST_PDPTE2">VMCS_GUEST_PDPTE2</dfn>			0x0000280E</u></td></tr>
<tr><th id="293">293</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_PDPTE3" data-ref="_M/VMCS_GUEST_PDPTE3">VMCS_GUEST_PDPTE3</dfn>			0x00002810</u></td></tr>
<tr><th id="294">294</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_BNDCFGS" data-ref="_M/VMCS_GUEST_BNDCFGS">VMCS_GUEST_BNDCFGS</dfn>			0x00002812</u></td></tr>
<tr><th id="295">295</th><td><i>/* 64-bit host-state fields */</i></td></tr>
<tr><th id="296">296</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_IA32_PAT" data-ref="_M/VMCS_HOST_IA32_PAT">VMCS_HOST_IA32_PAT</dfn>			0x00002C00</u></td></tr>
<tr><th id="297">297</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_IA32_EFER" data-ref="_M/VMCS_HOST_IA32_EFER">VMCS_HOST_IA32_EFER</dfn>			0x00002C02</u></td></tr>
<tr><th id="298">298</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_IA32_PERF_GLOBAL_CTRL" data-ref="_M/VMCS_HOST_IA32_PERF_GLOBAL_CTRL">VMCS_HOST_IA32_PERF_GLOBAL_CTRL</dfn>		0x00002C04</u></td></tr>
<tr><th id="299">299</th><td><i>/* 32-bit control fields */</i></td></tr>
<tr><th id="300">300</th><td><u>#define <dfn class="macro" id="_M/VMCS_PINBASED_CTLS" data-ref="_M/VMCS_PINBASED_CTLS">VMCS_PINBASED_CTLS</dfn>			0x00004000</u></td></tr>
<tr><th id="301">301</th><td><u>#define		<dfn class="macro" id="_M/PIN_CTLS_INT_EXITING" data-ref="_M/PIN_CTLS_INT_EXITING">PIN_CTLS_INT_EXITING</dfn>		__BIT(0)</u></td></tr>
<tr><th id="302">302</th><td><u>#define		<dfn class="macro" id="_M/PIN_CTLS_NMI_EXITING" data-ref="_M/PIN_CTLS_NMI_EXITING">PIN_CTLS_NMI_EXITING</dfn>		__BIT(3)</u></td></tr>
<tr><th id="303">303</th><td><u>#define		<dfn class="macro" id="_M/PIN_CTLS_VIRTUAL_NMIS" data-ref="_M/PIN_CTLS_VIRTUAL_NMIS">PIN_CTLS_VIRTUAL_NMIS</dfn>		__BIT(5)</u></td></tr>
<tr><th id="304">304</th><td><u>#define		<dfn class="macro" id="_M/PIN_CTLS_ACTIVATE_PREEMPT_TIMER" data-ref="_M/PIN_CTLS_ACTIVATE_PREEMPT_TIMER">PIN_CTLS_ACTIVATE_PREEMPT_TIMER</dfn>	__BIT(6)</u></td></tr>
<tr><th id="305">305</th><td><u>#define		<dfn class="macro" id="_M/PIN_CTLS_PROCESS_POSTED_INTS" data-ref="_M/PIN_CTLS_PROCESS_POSTED_INTS">PIN_CTLS_PROCESS_POSTED_INTS</dfn>	__BIT(7)</u></td></tr>
<tr><th id="306">306</th><td><u>#define <dfn class="macro" id="_M/VMCS_PROCBASED_CTLS" data-ref="_M/VMCS_PROCBASED_CTLS">VMCS_PROCBASED_CTLS</dfn>			0x00004002</u></td></tr>
<tr><th id="307">307</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_INT_WINDOW_EXITING" data-ref="_M/PROC_CTLS_INT_WINDOW_EXITING">PROC_CTLS_INT_WINDOW_EXITING</dfn>	__BIT(2)</u></td></tr>
<tr><th id="308">308</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_USE_TSC_OFFSETTING" data-ref="_M/PROC_CTLS_USE_TSC_OFFSETTING">PROC_CTLS_USE_TSC_OFFSETTING</dfn>	__BIT(3)</u></td></tr>
<tr><th id="309">309</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_HLT_EXITING" data-ref="_M/PROC_CTLS_HLT_EXITING">PROC_CTLS_HLT_EXITING</dfn>		__BIT(7)</u></td></tr>
<tr><th id="310">310</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_INVLPG_EXITING" data-ref="_M/PROC_CTLS_INVLPG_EXITING">PROC_CTLS_INVLPG_EXITING</dfn>	__BIT(9)</u></td></tr>
<tr><th id="311">311</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_MWAIT_EXITING" data-ref="_M/PROC_CTLS_MWAIT_EXITING">PROC_CTLS_MWAIT_EXITING</dfn>		__BIT(10)</u></td></tr>
<tr><th id="312">312</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_RDPMC_EXITING" data-ref="_M/PROC_CTLS_RDPMC_EXITING">PROC_CTLS_RDPMC_EXITING</dfn>		__BIT(11)</u></td></tr>
<tr><th id="313">313</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_RDTSC_EXITING" data-ref="_M/PROC_CTLS_RDTSC_EXITING">PROC_CTLS_RDTSC_EXITING</dfn>		__BIT(12)</u></td></tr>
<tr><th id="314">314</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_RCR3_EXITING" data-ref="_M/PROC_CTLS_RCR3_EXITING">PROC_CTLS_RCR3_EXITING</dfn>		__BIT(15)</u></td></tr>
<tr><th id="315">315</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_LCR3_EXITING" data-ref="_M/PROC_CTLS_LCR3_EXITING">PROC_CTLS_LCR3_EXITING</dfn>		__BIT(16)</u></td></tr>
<tr><th id="316">316</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_RCR8_EXITING" data-ref="_M/PROC_CTLS_RCR8_EXITING">PROC_CTLS_RCR8_EXITING</dfn>		__BIT(19)</u></td></tr>
<tr><th id="317">317</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_LCR8_EXITING" data-ref="_M/PROC_CTLS_LCR8_EXITING">PROC_CTLS_LCR8_EXITING</dfn>		__BIT(20)</u></td></tr>
<tr><th id="318">318</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_USE_TPR_SHADOW" data-ref="_M/PROC_CTLS_USE_TPR_SHADOW">PROC_CTLS_USE_TPR_SHADOW</dfn>	__BIT(21)</u></td></tr>
<tr><th id="319">319</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_NMI_WINDOW_EXITING" data-ref="_M/PROC_CTLS_NMI_WINDOW_EXITING">PROC_CTLS_NMI_WINDOW_EXITING</dfn>	__BIT(22)</u></td></tr>
<tr><th id="320">320</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_DR_EXITING" data-ref="_M/PROC_CTLS_DR_EXITING">PROC_CTLS_DR_EXITING</dfn>		__BIT(23)</u></td></tr>
<tr><th id="321">321</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_UNCOND_IO_EXITING" data-ref="_M/PROC_CTLS_UNCOND_IO_EXITING">PROC_CTLS_UNCOND_IO_EXITING</dfn>	__BIT(24)</u></td></tr>
<tr><th id="322">322</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_USE_IO_BITMAPS" data-ref="_M/PROC_CTLS_USE_IO_BITMAPS">PROC_CTLS_USE_IO_BITMAPS</dfn>	__BIT(25)</u></td></tr>
<tr><th id="323">323</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_MONITOR_TRAP_FLAG" data-ref="_M/PROC_CTLS_MONITOR_TRAP_FLAG">PROC_CTLS_MONITOR_TRAP_FLAG</dfn>	__BIT(27)</u></td></tr>
<tr><th id="324">324</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_USE_MSR_BITMAPS" data-ref="_M/PROC_CTLS_USE_MSR_BITMAPS">PROC_CTLS_USE_MSR_BITMAPS</dfn>	__BIT(28)</u></td></tr>
<tr><th id="325">325</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_MONITOR_EXITING" data-ref="_M/PROC_CTLS_MONITOR_EXITING">PROC_CTLS_MONITOR_EXITING</dfn>	__BIT(29)</u></td></tr>
<tr><th id="326">326</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_PAUSE_EXITING" data-ref="_M/PROC_CTLS_PAUSE_EXITING">PROC_CTLS_PAUSE_EXITING</dfn>		__BIT(30)</u></td></tr>
<tr><th id="327">327</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS_ACTIVATE_CTLS2" data-ref="_M/PROC_CTLS_ACTIVATE_CTLS2">PROC_CTLS_ACTIVATE_CTLS2</dfn>	__BIT(31)</u></td></tr>
<tr><th id="328">328</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXCEPTION_BITMAP" data-ref="_M/VMCS_EXCEPTION_BITMAP">VMCS_EXCEPTION_BITMAP</dfn>			0x00004004</u></td></tr>
<tr><th id="329">329</th><td><u>#define <dfn class="macro" id="_M/VMCS_PF_ERROR_MASK" data-ref="_M/VMCS_PF_ERROR_MASK">VMCS_PF_ERROR_MASK</dfn>			0x00004006</u></td></tr>
<tr><th id="330">330</th><td><u>#define <dfn class="macro" id="_M/VMCS_PF_ERROR_MATCH" data-ref="_M/VMCS_PF_ERROR_MATCH">VMCS_PF_ERROR_MATCH</dfn>			0x00004008</u></td></tr>
<tr><th id="331">331</th><td><u>#define <dfn class="macro" id="_M/VMCS_CR3_TARGET_COUNT" data-ref="_M/VMCS_CR3_TARGET_COUNT">VMCS_CR3_TARGET_COUNT</dfn>			0x0000400A</u></td></tr>
<tr><th id="332">332</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXIT_CTLS" data-ref="_M/VMCS_EXIT_CTLS">VMCS_EXIT_CTLS</dfn>				0x0000400C</u></td></tr>
<tr><th id="333">333</th><td><u>#define		<dfn class="macro" id="_M/EXIT_CTLS_SAVE_DEBUG_CONTROLS" data-ref="_M/EXIT_CTLS_SAVE_DEBUG_CONTROLS">EXIT_CTLS_SAVE_DEBUG_CONTROLS</dfn>	__BIT(2)</u></td></tr>
<tr><th id="334">334</th><td><u>#define		<dfn class="macro" id="_M/EXIT_CTLS_HOST_LONG_MODE" data-ref="_M/EXIT_CTLS_HOST_LONG_MODE">EXIT_CTLS_HOST_LONG_MODE</dfn>	__BIT(9)</u></td></tr>
<tr><th id="335">335</th><td><u>#define		<dfn class="macro" id="_M/EXIT_CTLS_LOAD_PERFGLOBALCTRL" data-ref="_M/EXIT_CTLS_LOAD_PERFGLOBALCTRL">EXIT_CTLS_LOAD_PERFGLOBALCTRL</dfn>	__BIT(12)</u></td></tr>
<tr><th id="336">336</th><td><u>#define		<dfn class="macro" id="_M/EXIT_CTLS_ACK_INTERRUPT" data-ref="_M/EXIT_CTLS_ACK_INTERRUPT">EXIT_CTLS_ACK_INTERRUPT</dfn>		__BIT(15)</u></td></tr>
<tr><th id="337">337</th><td><u>#define		<dfn class="macro" id="_M/EXIT_CTLS_SAVE_PAT" data-ref="_M/EXIT_CTLS_SAVE_PAT">EXIT_CTLS_SAVE_PAT</dfn>		__BIT(18)</u></td></tr>
<tr><th id="338">338</th><td><u>#define		<dfn class="macro" id="_M/EXIT_CTLS_LOAD_PAT" data-ref="_M/EXIT_CTLS_LOAD_PAT">EXIT_CTLS_LOAD_PAT</dfn>		__BIT(19)</u></td></tr>
<tr><th id="339">339</th><td><u>#define		<dfn class="macro" id="_M/EXIT_CTLS_SAVE_EFER" data-ref="_M/EXIT_CTLS_SAVE_EFER">EXIT_CTLS_SAVE_EFER</dfn>		__BIT(20)</u></td></tr>
<tr><th id="340">340</th><td><u>#define		<dfn class="macro" id="_M/EXIT_CTLS_LOAD_EFER" data-ref="_M/EXIT_CTLS_LOAD_EFER">EXIT_CTLS_LOAD_EFER</dfn>		__BIT(21)</u></td></tr>
<tr><th id="341">341</th><td><u>#define		<dfn class="macro" id="_M/EXIT_CTLS_SAVE_PREEMPT_TIMER" data-ref="_M/EXIT_CTLS_SAVE_PREEMPT_TIMER">EXIT_CTLS_SAVE_PREEMPT_TIMER</dfn>	__BIT(22)</u></td></tr>
<tr><th id="342">342</th><td><u>#define		<dfn class="macro" id="_M/EXIT_CTLS_CLEAR_BNDCFGS" data-ref="_M/EXIT_CTLS_CLEAR_BNDCFGS">EXIT_CTLS_CLEAR_BNDCFGS</dfn>		__BIT(23)</u></td></tr>
<tr><th id="343">343</th><td><u>#define		<dfn class="macro" id="_M/EXIT_CTLS_CONCEAL_PT" data-ref="_M/EXIT_CTLS_CONCEAL_PT">EXIT_CTLS_CONCEAL_PT</dfn>		__BIT(24)</u></td></tr>
<tr><th id="344">344</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXIT_MSR_STORE_COUNT" data-ref="_M/VMCS_EXIT_MSR_STORE_COUNT">VMCS_EXIT_MSR_STORE_COUNT</dfn>		0x0000400E</u></td></tr>
<tr><th id="345">345</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXIT_MSR_LOAD_COUNT" data-ref="_M/VMCS_EXIT_MSR_LOAD_COUNT">VMCS_EXIT_MSR_LOAD_COUNT</dfn>		0x00004010</u></td></tr>
<tr><th id="346">346</th><td><u>#define <dfn class="macro" id="_M/VMCS_ENTRY_CTLS" data-ref="_M/VMCS_ENTRY_CTLS">VMCS_ENTRY_CTLS</dfn>				0x00004012</u></td></tr>
<tr><th id="347">347</th><td><u>#define		<dfn class="macro" id="_M/ENTRY_CTLS_LOAD_DEBUG_CONTROLS" data-ref="_M/ENTRY_CTLS_LOAD_DEBUG_CONTROLS">ENTRY_CTLS_LOAD_DEBUG_CONTROLS</dfn>	__BIT(2)</u></td></tr>
<tr><th id="348">348</th><td><u>#define		<dfn class="macro" id="_M/ENTRY_CTLS_LONG_MODE" data-ref="_M/ENTRY_CTLS_LONG_MODE">ENTRY_CTLS_LONG_MODE</dfn>		__BIT(9)</u></td></tr>
<tr><th id="349">349</th><td><u>#define		<dfn class="macro" id="_M/ENTRY_CTLS_SMM" data-ref="_M/ENTRY_CTLS_SMM">ENTRY_CTLS_SMM</dfn>			__BIT(10)</u></td></tr>
<tr><th id="350">350</th><td><u>#define		<dfn class="macro" id="_M/ENTRY_CTLS_DISABLE_DUAL" data-ref="_M/ENTRY_CTLS_DISABLE_DUAL">ENTRY_CTLS_DISABLE_DUAL</dfn>		__BIT(11)</u></td></tr>
<tr><th id="351">351</th><td><u>#define		<dfn class="macro" id="_M/ENTRY_CTLS_LOAD_PERFGLOBALCTRL" data-ref="_M/ENTRY_CTLS_LOAD_PERFGLOBALCTRL">ENTRY_CTLS_LOAD_PERFGLOBALCTRL</dfn>	__BIT(13)</u></td></tr>
<tr><th id="352">352</th><td><u>#define		<dfn class="macro" id="_M/ENTRY_CTLS_LOAD_PAT" data-ref="_M/ENTRY_CTLS_LOAD_PAT">ENTRY_CTLS_LOAD_PAT</dfn>		__BIT(14)</u></td></tr>
<tr><th id="353">353</th><td><u>#define		<dfn class="macro" id="_M/ENTRY_CTLS_LOAD_EFER" data-ref="_M/ENTRY_CTLS_LOAD_EFER">ENTRY_CTLS_LOAD_EFER</dfn>		__BIT(15)</u></td></tr>
<tr><th id="354">354</th><td><u>#define		<dfn class="macro" id="_M/ENTRY_CTLS_LOAD_BNDCFGS" data-ref="_M/ENTRY_CTLS_LOAD_BNDCFGS">ENTRY_CTLS_LOAD_BNDCFGS</dfn>		__BIT(16)</u></td></tr>
<tr><th id="355">355</th><td><u>#define		<dfn class="macro" id="_M/ENTRY_CTLS_CONCEAL_PT" data-ref="_M/ENTRY_CTLS_CONCEAL_PT">ENTRY_CTLS_CONCEAL_PT</dfn>		__BIT(17)</u></td></tr>
<tr><th id="356">356</th><td><u>#define <dfn class="macro" id="_M/VMCS_ENTRY_MSR_LOAD_COUNT" data-ref="_M/VMCS_ENTRY_MSR_LOAD_COUNT">VMCS_ENTRY_MSR_LOAD_COUNT</dfn>		0x00004014</u></td></tr>
<tr><th id="357">357</th><td><u>#define <dfn class="macro" id="_M/VMCS_ENTRY_INTR_INFO" data-ref="_M/VMCS_ENTRY_INTR_INFO">VMCS_ENTRY_INTR_INFO</dfn>			0x00004016</u></td></tr>
<tr><th id="358">358</th><td><u>#define		<dfn class="macro" id="_M/INTR_INFO_VECTOR" data-ref="_M/INTR_INFO_VECTOR">INTR_INFO_VECTOR</dfn>		__BITS(7,0)</u></td></tr>
<tr><th id="359">359</th><td><u>#define		<dfn class="macro" id="_M/INTR_INFO_TYPE" data-ref="_M/INTR_INFO_TYPE">INTR_INFO_TYPE</dfn>			__BITS(10,8)</u></td></tr>
<tr><th id="360">360</th><td><u>#define			<dfn class="macro" id="_M/INTR_TYPE_EXT_INT" data-ref="_M/INTR_TYPE_EXT_INT">INTR_TYPE_EXT_INT</dfn>	0</u></td></tr>
<tr><th id="361">361</th><td><u>#define			<dfn class="macro" id="_M/INTR_TYPE_NMI" data-ref="_M/INTR_TYPE_NMI">INTR_TYPE_NMI</dfn>		2</u></td></tr>
<tr><th id="362">362</th><td><u>#define			<dfn class="macro" id="_M/INTR_TYPE_HW_EXC" data-ref="_M/INTR_TYPE_HW_EXC">INTR_TYPE_HW_EXC</dfn>	3</u></td></tr>
<tr><th id="363">363</th><td><u>#define			<dfn class="macro" id="_M/INTR_TYPE_SW_INT" data-ref="_M/INTR_TYPE_SW_INT">INTR_TYPE_SW_INT</dfn>	4</u></td></tr>
<tr><th id="364">364</th><td><u>#define			<dfn class="macro" id="_M/INTR_TYPE_PRIV_SW_EXC" data-ref="_M/INTR_TYPE_PRIV_SW_EXC">INTR_TYPE_PRIV_SW_EXC</dfn>	5</u></td></tr>
<tr><th id="365">365</th><td><u>#define			<dfn class="macro" id="_M/INTR_TYPE_SW_EXC" data-ref="_M/INTR_TYPE_SW_EXC">INTR_TYPE_SW_EXC</dfn>	6</u></td></tr>
<tr><th id="366">366</th><td><u>#define			<dfn class="macro" id="_M/INTR_TYPE_OTHER" data-ref="_M/INTR_TYPE_OTHER">INTR_TYPE_OTHER</dfn>		7</u></td></tr>
<tr><th id="367">367</th><td><u>#define		<dfn class="macro" id="_M/INTR_INFO_ERROR" data-ref="_M/INTR_INFO_ERROR">INTR_INFO_ERROR</dfn>			__BIT(11)</u></td></tr>
<tr><th id="368">368</th><td><u>#define		<dfn class="macro" id="_M/INTR_INFO_VALID" data-ref="_M/INTR_INFO_VALID">INTR_INFO_VALID</dfn>			__BIT(31)</u></td></tr>
<tr><th id="369">369</th><td><u>#define <dfn class="macro" id="_M/VMCS_ENTRY_EXCEPTION_ERROR" data-ref="_M/VMCS_ENTRY_EXCEPTION_ERROR">VMCS_ENTRY_EXCEPTION_ERROR</dfn>		0x00004018</u></td></tr>
<tr><th id="370">370</th><td><u>#define <dfn class="macro" id="_M/VMCS_ENTRY_INST_LENGTH" data-ref="_M/VMCS_ENTRY_INST_LENGTH">VMCS_ENTRY_INST_LENGTH</dfn>			0x0000401A</u></td></tr>
<tr><th id="371">371</th><td><u>#define <dfn class="macro" id="_M/VMCS_TPR_THRESHOLD" data-ref="_M/VMCS_TPR_THRESHOLD">VMCS_TPR_THRESHOLD</dfn>			0x0000401C</u></td></tr>
<tr><th id="372">372</th><td><u>#define <dfn class="macro" id="_M/VMCS_PROCBASED_CTLS2" data-ref="_M/VMCS_PROCBASED_CTLS2">VMCS_PROCBASED_CTLS2</dfn>			0x0000401E</u></td></tr>
<tr><th id="373">373</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_VIRT_APIC_ACCESSES" data-ref="_M/PROC_CTLS2_VIRT_APIC_ACCESSES">PROC_CTLS2_VIRT_APIC_ACCESSES</dfn>	__BIT(0)</u></td></tr>
<tr><th id="374">374</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_ENABLE_EPT" data-ref="_M/PROC_CTLS2_ENABLE_EPT">PROC_CTLS2_ENABLE_EPT</dfn>		__BIT(1)</u></td></tr>
<tr><th id="375">375</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_DESC_TABLE_EXITING" data-ref="_M/PROC_CTLS2_DESC_TABLE_EXITING">PROC_CTLS2_DESC_TABLE_EXITING</dfn>	__BIT(2)</u></td></tr>
<tr><th id="376">376</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_ENABLE_RDTSCP" data-ref="_M/PROC_CTLS2_ENABLE_RDTSCP">PROC_CTLS2_ENABLE_RDTSCP</dfn>	__BIT(3)</u></td></tr>
<tr><th id="377">377</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_VIRT_X2APIC" data-ref="_M/PROC_CTLS2_VIRT_X2APIC">PROC_CTLS2_VIRT_X2APIC</dfn>		__BIT(4)</u></td></tr>
<tr><th id="378">378</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_ENABLE_VPID" data-ref="_M/PROC_CTLS2_ENABLE_VPID">PROC_CTLS2_ENABLE_VPID</dfn>		__BIT(5)</u></td></tr>
<tr><th id="379">379</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_WBINVD_EXITING" data-ref="_M/PROC_CTLS2_WBINVD_EXITING">PROC_CTLS2_WBINVD_EXITING</dfn>	__BIT(6)</u></td></tr>
<tr><th id="380">380</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_UNRESTRICTED_GUEST" data-ref="_M/PROC_CTLS2_UNRESTRICTED_GUEST">PROC_CTLS2_UNRESTRICTED_GUEST</dfn>	__BIT(7)</u></td></tr>
<tr><th id="381">381</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_APIC_REG_VIRT" data-ref="_M/PROC_CTLS2_APIC_REG_VIRT">PROC_CTLS2_APIC_REG_VIRT</dfn>	__BIT(8)</u></td></tr>
<tr><th id="382">382</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_VIRT_INT_DELIVERY" data-ref="_M/PROC_CTLS2_VIRT_INT_DELIVERY">PROC_CTLS2_VIRT_INT_DELIVERY</dfn>	__BIT(9)</u></td></tr>
<tr><th id="383">383</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_PAUSE_LOOP_EXITING" data-ref="_M/PROC_CTLS2_PAUSE_LOOP_EXITING">PROC_CTLS2_PAUSE_LOOP_EXITING</dfn>	__BIT(10)</u></td></tr>
<tr><th id="384">384</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_RDRAND_EXITING" data-ref="_M/PROC_CTLS2_RDRAND_EXITING">PROC_CTLS2_RDRAND_EXITING</dfn>	__BIT(11)</u></td></tr>
<tr><th id="385">385</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_INVPCID_ENABLE" data-ref="_M/PROC_CTLS2_INVPCID_ENABLE">PROC_CTLS2_INVPCID_ENABLE</dfn>	__BIT(12)</u></td></tr>
<tr><th id="386">386</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_VMFUNC_ENABLE" data-ref="_M/PROC_CTLS2_VMFUNC_ENABLE">PROC_CTLS2_VMFUNC_ENABLE</dfn>	__BIT(13)</u></td></tr>
<tr><th id="387">387</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_VMCS_SHADOWING" data-ref="_M/PROC_CTLS2_VMCS_SHADOWING">PROC_CTLS2_VMCS_SHADOWING</dfn>	__BIT(14)</u></td></tr>
<tr><th id="388">388</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_ENCLS_EXITING" data-ref="_M/PROC_CTLS2_ENCLS_EXITING">PROC_CTLS2_ENCLS_EXITING</dfn>	__BIT(15)</u></td></tr>
<tr><th id="389">389</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_RDSEED_EXITING" data-ref="_M/PROC_CTLS2_RDSEED_EXITING">PROC_CTLS2_RDSEED_EXITING</dfn>	__BIT(16)</u></td></tr>
<tr><th id="390">390</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_PML_ENABLE" data-ref="_M/PROC_CTLS2_PML_ENABLE">PROC_CTLS2_PML_ENABLE</dfn>		__BIT(17)</u></td></tr>
<tr><th id="391">391</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_EPT_VIOLATION" data-ref="_M/PROC_CTLS2_EPT_VIOLATION">PROC_CTLS2_EPT_VIOLATION</dfn>	__BIT(18)</u></td></tr>
<tr><th id="392">392</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_CONCEAL_VMX_FROM_PT" data-ref="_M/PROC_CTLS2_CONCEAL_VMX_FROM_PT">PROC_CTLS2_CONCEAL_VMX_FROM_PT</dfn>	__BIT(19)</u></td></tr>
<tr><th id="393">393</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_XSAVES_ENABLE" data-ref="_M/PROC_CTLS2_XSAVES_ENABLE">PROC_CTLS2_XSAVES_ENABLE</dfn>	__BIT(20)</u></td></tr>
<tr><th id="394">394</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_MODE_BASED_EXEC_EPT" data-ref="_M/PROC_CTLS2_MODE_BASED_EXEC_EPT">PROC_CTLS2_MODE_BASED_EXEC_EPT</dfn>	__BIT(22)</u></td></tr>
<tr><th id="395">395</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_SUBPAGE_PERMISSIONS" data-ref="_M/PROC_CTLS2_SUBPAGE_PERMISSIONS">PROC_CTLS2_SUBPAGE_PERMISSIONS</dfn>	__BIT(23)</u></td></tr>
<tr><th id="396">396</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_USE_TSC_SCALING" data-ref="_M/PROC_CTLS2_USE_TSC_SCALING">PROC_CTLS2_USE_TSC_SCALING</dfn>	__BIT(25)</u></td></tr>
<tr><th id="397">397</th><td><u>#define		<dfn class="macro" id="_M/PROC_CTLS2_ENCLV_EXITING" data-ref="_M/PROC_CTLS2_ENCLV_EXITING">PROC_CTLS2_ENCLV_EXITING</dfn>	__BIT(28)</u></td></tr>
<tr><th id="398">398</th><td><u>#define <dfn class="macro" id="_M/VMCS_PLE_GAP" data-ref="_M/VMCS_PLE_GAP">VMCS_PLE_GAP</dfn>				0x00004020</u></td></tr>
<tr><th id="399">399</th><td><u>#define <dfn class="macro" id="_M/VMCS_PLE_WINDOW" data-ref="_M/VMCS_PLE_WINDOW">VMCS_PLE_WINDOW</dfn>				0x00004022</u></td></tr>
<tr><th id="400">400</th><td><i>/* 32-bit read-only data fields */</i></td></tr>
<tr><th id="401">401</th><td><u>#define <dfn class="macro" id="_M/VMCS_INSTRUCTION_ERROR" data-ref="_M/VMCS_INSTRUCTION_ERROR">VMCS_INSTRUCTION_ERROR</dfn>			0x00004400</u></td></tr>
<tr><th id="402">402</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXIT_REASON" data-ref="_M/VMCS_EXIT_REASON">VMCS_EXIT_REASON</dfn>			0x00004402</u></td></tr>
<tr><th id="403">403</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXIT_INTR_INFO" data-ref="_M/VMCS_EXIT_INTR_INFO">VMCS_EXIT_INTR_INFO</dfn>			0x00004404</u></td></tr>
<tr><th id="404">404</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXIT_INTR_ERRCODE" data-ref="_M/VMCS_EXIT_INTR_ERRCODE">VMCS_EXIT_INTR_ERRCODE</dfn>			0x00004406</u></td></tr>
<tr><th id="405">405</th><td><u>#define <dfn class="macro" id="_M/VMCS_IDT_VECTORING_INFO" data-ref="_M/VMCS_IDT_VECTORING_INFO">VMCS_IDT_VECTORING_INFO</dfn>			0x00004408</u></td></tr>
<tr><th id="406">406</th><td><u>#define <dfn class="macro" id="_M/VMCS_IDT_VECTORING_ERROR" data-ref="_M/VMCS_IDT_VECTORING_ERROR">VMCS_IDT_VECTORING_ERROR</dfn>		0x0000440A</u></td></tr>
<tr><th id="407">407</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXIT_INSTRUCTION_LENGTH" data-ref="_M/VMCS_EXIT_INSTRUCTION_LENGTH">VMCS_EXIT_INSTRUCTION_LENGTH</dfn>		0x0000440C</u></td></tr>
<tr><th id="408">408</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXIT_INSTRUCTION_INFO" data-ref="_M/VMCS_EXIT_INSTRUCTION_INFO">VMCS_EXIT_INSTRUCTION_INFO</dfn>		0x0000440E</u></td></tr>
<tr><th id="409">409</th><td><i>/* 32-bit guest-state fields */</i></td></tr>
<tr><th id="410">410</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_ES_LIMIT" data-ref="_M/VMCS_GUEST_ES_LIMIT">VMCS_GUEST_ES_LIMIT</dfn>			0x00004800</u></td></tr>
<tr><th id="411">411</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_CS_LIMIT" data-ref="_M/VMCS_GUEST_CS_LIMIT">VMCS_GUEST_CS_LIMIT</dfn>			0x00004802</u></td></tr>
<tr><th id="412">412</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_SS_LIMIT" data-ref="_M/VMCS_GUEST_SS_LIMIT">VMCS_GUEST_SS_LIMIT</dfn>			0x00004804</u></td></tr>
<tr><th id="413">413</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_DS_LIMIT" data-ref="_M/VMCS_GUEST_DS_LIMIT">VMCS_GUEST_DS_LIMIT</dfn>			0x00004806</u></td></tr>
<tr><th id="414">414</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_FS_LIMIT" data-ref="_M/VMCS_GUEST_FS_LIMIT">VMCS_GUEST_FS_LIMIT</dfn>			0x00004808</u></td></tr>
<tr><th id="415">415</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_GS_LIMIT" data-ref="_M/VMCS_GUEST_GS_LIMIT">VMCS_GUEST_GS_LIMIT</dfn>			0x0000480A</u></td></tr>
<tr><th id="416">416</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_LDTR_LIMIT" data-ref="_M/VMCS_GUEST_LDTR_LIMIT">VMCS_GUEST_LDTR_LIMIT</dfn>			0x0000480C</u></td></tr>
<tr><th id="417">417</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_TR_LIMIT" data-ref="_M/VMCS_GUEST_TR_LIMIT">VMCS_GUEST_TR_LIMIT</dfn>			0x0000480E</u></td></tr>
<tr><th id="418">418</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_GDTR_LIMIT" data-ref="_M/VMCS_GUEST_GDTR_LIMIT">VMCS_GUEST_GDTR_LIMIT</dfn>			0x00004810</u></td></tr>
<tr><th id="419">419</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_IDTR_LIMIT" data-ref="_M/VMCS_GUEST_IDTR_LIMIT">VMCS_GUEST_IDTR_LIMIT</dfn>			0x00004812</u></td></tr>
<tr><th id="420">420</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_ES_ACCESS_RIGHTS" data-ref="_M/VMCS_GUEST_ES_ACCESS_RIGHTS">VMCS_GUEST_ES_ACCESS_RIGHTS</dfn>		0x00004814</u></td></tr>
<tr><th id="421">421</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_CS_ACCESS_RIGHTS" data-ref="_M/VMCS_GUEST_CS_ACCESS_RIGHTS">VMCS_GUEST_CS_ACCESS_RIGHTS</dfn>		0x00004816</u></td></tr>
<tr><th id="422">422</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_SS_ACCESS_RIGHTS" data-ref="_M/VMCS_GUEST_SS_ACCESS_RIGHTS">VMCS_GUEST_SS_ACCESS_RIGHTS</dfn>		0x00004818</u></td></tr>
<tr><th id="423">423</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_DS_ACCESS_RIGHTS" data-ref="_M/VMCS_GUEST_DS_ACCESS_RIGHTS">VMCS_GUEST_DS_ACCESS_RIGHTS</dfn>		0x0000481A</u></td></tr>
<tr><th id="424">424</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_FS_ACCESS_RIGHTS" data-ref="_M/VMCS_GUEST_FS_ACCESS_RIGHTS">VMCS_GUEST_FS_ACCESS_RIGHTS</dfn>		0x0000481C</u></td></tr>
<tr><th id="425">425</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_GS_ACCESS_RIGHTS" data-ref="_M/VMCS_GUEST_GS_ACCESS_RIGHTS">VMCS_GUEST_GS_ACCESS_RIGHTS</dfn>		0x0000481E</u></td></tr>
<tr><th id="426">426</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_LDTR_ACCESS_RIGHTS" data-ref="_M/VMCS_GUEST_LDTR_ACCESS_RIGHTS">VMCS_GUEST_LDTR_ACCESS_RIGHTS</dfn>		0x00004820</u></td></tr>
<tr><th id="427">427</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_TR_ACCESS_RIGHTS" data-ref="_M/VMCS_GUEST_TR_ACCESS_RIGHTS">VMCS_GUEST_TR_ACCESS_RIGHTS</dfn>		0x00004822</u></td></tr>
<tr><th id="428">428</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_INTERRUPTIBILITY" data-ref="_M/VMCS_GUEST_INTERRUPTIBILITY">VMCS_GUEST_INTERRUPTIBILITY</dfn>		0x00004824</u></td></tr>
<tr><th id="429">429</th><td><u>#define		<dfn class="macro" id="_M/INT_STATE_STI" data-ref="_M/INT_STATE_STI">INT_STATE_STI</dfn>			__BIT(0)</u></td></tr>
<tr><th id="430">430</th><td><u>#define		<dfn class="macro" id="_M/INT_STATE_MOVSS" data-ref="_M/INT_STATE_MOVSS">INT_STATE_MOVSS</dfn>			__BIT(1)</u></td></tr>
<tr><th id="431">431</th><td><u>#define		<dfn class="macro" id="_M/INT_STATE_SMI" data-ref="_M/INT_STATE_SMI">INT_STATE_SMI</dfn>			__BIT(2)</u></td></tr>
<tr><th id="432">432</th><td><u>#define		<dfn class="macro" id="_M/INT_STATE_NMI" data-ref="_M/INT_STATE_NMI">INT_STATE_NMI</dfn>			__BIT(3)</u></td></tr>
<tr><th id="433">433</th><td><u>#define		<dfn class="macro" id="_M/INT_STATE_ENCLAVE" data-ref="_M/INT_STATE_ENCLAVE">INT_STATE_ENCLAVE</dfn>		__BIT(4)</u></td></tr>
<tr><th id="434">434</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_ACTIVITY" data-ref="_M/VMCS_GUEST_ACTIVITY">VMCS_GUEST_ACTIVITY</dfn>			0x00004826</u></td></tr>
<tr><th id="435">435</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_SMBASE" data-ref="_M/VMCS_GUEST_SMBASE">VMCS_GUEST_SMBASE</dfn>			0x00004828</u></td></tr>
<tr><th id="436">436</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_IA32_SYSENTER_CS" data-ref="_M/VMCS_GUEST_IA32_SYSENTER_CS">VMCS_GUEST_IA32_SYSENTER_CS</dfn>		0x0000482A</u></td></tr>
<tr><th id="437">437</th><td><u>#define <dfn class="macro" id="_M/VMCS_PREEMPTION_TIMER_VALUE" data-ref="_M/VMCS_PREEMPTION_TIMER_VALUE">VMCS_PREEMPTION_TIMER_VALUE</dfn>		0x0000482E</u></td></tr>
<tr><th id="438">438</th><td><i>/* 32-bit host state fields */</i></td></tr>
<tr><th id="439">439</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_IA32_SYSENTER_CS" data-ref="_M/VMCS_HOST_IA32_SYSENTER_CS">VMCS_HOST_IA32_SYSENTER_CS</dfn>		0x00004C00</u></td></tr>
<tr><th id="440">440</th><td><i>/* Natural-Width control fields */</i></td></tr>
<tr><th id="441">441</th><td><u>#define <dfn class="macro" id="_M/VMCS_CR0_MASK" data-ref="_M/VMCS_CR0_MASK">VMCS_CR0_MASK</dfn>				0x00006000</u></td></tr>
<tr><th id="442">442</th><td><u>#define <dfn class="macro" id="_M/VMCS_CR4_MASK" data-ref="_M/VMCS_CR4_MASK">VMCS_CR4_MASK</dfn>				0x00006002</u></td></tr>
<tr><th id="443">443</th><td><u>#define <dfn class="macro" id="_M/VMCS_CR0_SHADOW" data-ref="_M/VMCS_CR0_SHADOW">VMCS_CR0_SHADOW</dfn>				0x00006004</u></td></tr>
<tr><th id="444">444</th><td><u>#define <dfn class="macro" id="_M/VMCS_CR4_SHADOW" data-ref="_M/VMCS_CR4_SHADOW">VMCS_CR4_SHADOW</dfn>				0x00006006</u></td></tr>
<tr><th id="445">445</th><td><u>#define <dfn class="macro" id="_M/VMCS_CR3_TARGET0" data-ref="_M/VMCS_CR3_TARGET0">VMCS_CR3_TARGET0</dfn>			0x00006008</u></td></tr>
<tr><th id="446">446</th><td><u>#define <dfn class="macro" id="_M/VMCS_CR3_TARGET1" data-ref="_M/VMCS_CR3_TARGET1">VMCS_CR3_TARGET1</dfn>			0x0000600A</u></td></tr>
<tr><th id="447">447</th><td><u>#define <dfn class="macro" id="_M/VMCS_CR3_TARGET2" data-ref="_M/VMCS_CR3_TARGET2">VMCS_CR3_TARGET2</dfn>			0x0000600C</u></td></tr>
<tr><th id="448">448</th><td><u>#define <dfn class="macro" id="_M/VMCS_CR3_TARGET3" data-ref="_M/VMCS_CR3_TARGET3">VMCS_CR3_TARGET3</dfn>			0x0000600E</u></td></tr>
<tr><th id="449">449</th><td><i>/* Natural-Width read-only fields */</i></td></tr>
<tr><th id="450">450</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXIT_QUALIFICATION" data-ref="_M/VMCS_EXIT_QUALIFICATION">VMCS_EXIT_QUALIFICATION</dfn>			0x00006400</u></td></tr>
<tr><th id="451">451</th><td><u>#define <dfn class="macro" id="_M/VMCS_IO_RCX" data-ref="_M/VMCS_IO_RCX">VMCS_IO_RCX</dfn>				0x00006402</u></td></tr>
<tr><th id="452">452</th><td><u>#define <dfn class="macro" id="_M/VMCS_IO_RSI" data-ref="_M/VMCS_IO_RSI">VMCS_IO_RSI</dfn>				0x00006404</u></td></tr>
<tr><th id="453">453</th><td><u>#define <dfn class="macro" id="_M/VMCS_IO_RDI" data-ref="_M/VMCS_IO_RDI">VMCS_IO_RDI</dfn>				0x00006406</u></td></tr>
<tr><th id="454">454</th><td><u>#define <dfn class="macro" id="_M/VMCS_IO_RIP" data-ref="_M/VMCS_IO_RIP">VMCS_IO_RIP</dfn>				0x00006408</u></td></tr>
<tr><th id="455">455</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_LINEAR_ADDRESS" data-ref="_M/VMCS_GUEST_LINEAR_ADDRESS">VMCS_GUEST_LINEAR_ADDRESS</dfn>		0x0000640A</u></td></tr>
<tr><th id="456">456</th><td><i>/* Natural-Width guest-state fields */</i></td></tr>
<tr><th id="457">457</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_CR0" data-ref="_M/VMCS_GUEST_CR0">VMCS_GUEST_CR0</dfn>				0x00006800</u></td></tr>
<tr><th id="458">458</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_CR3" data-ref="_M/VMCS_GUEST_CR3">VMCS_GUEST_CR3</dfn>				0x00006802</u></td></tr>
<tr><th id="459">459</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_CR4" data-ref="_M/VMCS_GUEST_CR4">VMCS_GUEST_CR4</dfn>				0x00006804</u></td></tr>
<tr><th id="460">460</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_ES_BASE" data-ref="_M/VMCS_GUEST_ES_BASE">VMCS_GUEST_ES_BASE</dfn>			0x00006806</u></td></tr>
<tr><th id="461">461</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_CS_BASE" data-ref="_M/VMCS_GUEST_CS_BASE">VMCS_GUEST_CS_BASE</dfn>			0x00006808</u></td></tr>
<tr><th id="462">462</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_SS_BASE" data-ref="_M/VMCS_GUEST_SS_BASE">VMCS_GUEST_SS_BASE</dfn>			0x0000680A</u></td></tr>
<tr><th id="463">463</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_DS_BASE" data-ref="_M/VMCS_GUEST_DS_BASE">VMCS_GUEST_DS_BASE</dfn>			0x0000680C</u></td></tr>
<tr><th id="464">464</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_FS_BASE" data-ref="_M/VMCS_GUEST_FS_BASE">VMCS_GUEST_FS_BASE</dfn>			0x0000680E</u></td></tr>
<tr><th id="465">465</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_GS_BASE" data-ref="_M/VMCS_GUEST_GS_BASE">VMCS_GUEST_GS_BASE</dfn>			0x00006810</u></td></tr>
<tr><th id="466">466</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_LDTR_BASE" data-ref="_M/VMCS_GUEST_LDTR_BASE">VMCS_GUEST_LDTR_BASE</dfn>			0x00006812</u></td></tr>
<tr><th id="467">467</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_TR_BASE" data-ref="_M/VMCS_GUEST_TR_BASE">VMCS_GUEST_TR_BASE</dfn>			0x00006814</u></td></tr>
<tr><th id="468">468</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_GDTR_BASE" data-ref="_M/VMCS_GUEST_GDTR_BASE">VMCS_GUEST_GDTR_BASE</dfn>			0x00006816</u></td></tr>
<tr><th id="469">469</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_IDTR_BASE" data-ref="_M/VMCS_GUEST_IDTR_BASE">VMCS_GUEST_IDTR_BASE</dfn>			0x00006818</u></td></tr>
<tr><th id="470">470</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_DR7" data-ref="_M/VMCS_GUEST_DR7">VMCS_GUEST_DR7</dfn>				0x0000681A</u></td></tr>
<tr><th id="471">471</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_RSP" data-ref="_M/VMCS_GUEST_RSP">VMCS_GUEST_RSP</dfn>				0x0000681C</u></td></tr>
<tr><th id="472">472</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_RIP" data-ref="_M/VMCS_GUEST_RIP">VMCS_GUEST_RIP</dfn>				0x0000681E</u></td></tr>
<tr><th id="473">473</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_RFLAGS" data-ref="_M/VMCS_GUEST_RFLAGS">VMCS_GUEST_RFLAGS</dfn>			0x00006820</u></td></tr>
<tr><th id="474">474</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_PENDING_DBG_EXCEPTIONS" data-ref="_M/VMCS_GUEST_PENDING_DBG_EXCEPTIONS">VMCS_GUEST_PENDING_DBG_EXCEPTIONS</dfn>	0x00006822</u></td></tr>
<tr><th id="475">475</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_IA32_SYSENTER_ESP" data-ref="_M/VMCS_GUEST_IA32_SYSENTER_ESP">VMCS_GUEST_IA32_SYSENTER_ESP</dfn>		0x00006824</u></td></tr>
<tr><th id="476">476</th><td><u>#define <dfn class="macro" id="_M/VMCS_GUEST_IA32_SYSENTER_EIP" data-ref="_M/VMCS_GUEST_IA32_SYSENTER_EIP">VMCS_GUEST_IA32_SYSENTER_EIP</dfn>		0x00006826</u></td></tr>
<tr><th id="477">477</th><td><i>/* Natural-Width host-state fields */</i></td></tr>
<tr><th id="478">478</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_CR0" data-ref="_M/VMCS_HOST_CR0">VMCS_HOST_CR0</dfn>				0x00006C00</u></td></tr>
<tr><th id="479">479</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_CR3" data-ref="_M/VMCS_HOST_CR3">VMCS_HOST_CR3</dfn>				0x00006C02</u></td></tr>
<tr><th id="480">480</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_CR4" data-ref="_M/VMCS_HOST_CR4">VMCS_HOST_CR4</dfn>				0x00006C04</u></td></tr>
<tr><th id="481">481</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_FS_BASE" data-ref="_M/VMCS_HOST_FS_BASE">VMCS_HOST_FS_BASE</dfn>			0x00006C06</u></td></tr>
<tr><th id="482">482</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_GS_BASE" data-ref="_M/VMCS_HOST_GS_BASE">VMCS_HOST_GS_BASE</dfn>			0x00006C08</u></td></tr>
<tr><th id="483">483</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_TR_BASE" data-ref="_M/VMCS_HOST_TR_BASE">VMCS_HOST_TR_BASE</dfn>			0x00006C0A</u></td></tr>
<tr><th id="484">484</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_GDTR_BASE" data-ref="_M/VMCS_HOST_GDTR_BASE">VMCS_HOST_GDTR_BASE</dfn>			0x00006C0C</u></td></tr>
<tr><th id="485">485</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_IDTR_BASE" data-ref="_M/VMCS_HOST_IDTR_BASE">VMCS_HOST_IDTR_BASE</dfn>			0x00006C0E</u></td></tr>
<tr><th id="486">486</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_IA32_SYSENTER_ESP" data-ref="_M/VMCS_HOST_IA32_SYSENTER_ESP">VMCS_HOST_IA32_SYSENTER_ESP</dfn>		0x00006C10</u></td></tr>
<tr><th id="487">487</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_IA32_SYSENTER_EIP" data-ref="_M/VMCS_HOST_IA32_SYSENTER_EIP">VMCS_HOST_IA32_SYSENTER_EIP</dfn>		0x00006C12</u></td></tr>
<tr><th id="488">488</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_RSP" data-ref="_M/VMCS_HOST_RSP">VMCS_HOST_RSP</dfn>				0x00006C14</u></td></tr>
<tr><th id="489">489</th><td><u>#define <dfn class="macro" id="_M/VMCS_HOST_RIP" data-ref="_M/VMCS_HOST_RIP">VMCS_HOST_RIP</dfn>				0x00006c16</u></td></tr>
<tr><th id="490">490</th><td></td></tr>
<tr><th id="491">491</th><td><i>/* VMX basic exit reasons. */</i></td></tr>
<tr><th id="492">492</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_EXC_NMI" data-ref="_M/VMCS_EXITCODE_EXC_NMI">VMCS_EXITCODE_EXC_NMI</dfn>			0</u></td></tr>
<tr><th id="493">493</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_EXT_INT" data-ref="_M/VMCS_EXITCODE_EXT_INT">VMCS_EXITCODE_EXT_INT</dfn>			1</u></td></tr>
<tr><th id="494">494</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_SHUTDOWN" data-ref="_M/VMCS_EXITCODE_SHUTDOWN">VMCS_EXITCODE_SHUTDOWN</dfn>			2</u></td></tr>
<tr><th id="495">495</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_INIT" data-ref="_M/VMCS_EXITCODE_INIT">VMCS_EXITCODE_INIT</dfn>			3</u></td></tr>
<tr><th id="496">496</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_SIPI" data-ref="_M/VMCS_EXITCODE_SIPI">VMCS_EXITCODE_SIPI</dfn>			4</u></td></tr>
<tr><th id="497">497</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_SMI" data-ref="_M/VMCS_EXITCODE_SMI">VMCS_EXITCODE_SMI</dfn>			5</u></td></tr>
<tr><th id="498">498</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_OTHER_SMI" data-ref="_M/VMCS_EXITCODE_OTHER_SMI">VMCS_EXITCODE_OTHER_SMI</dfn>			6</u></td></tr>
<tr><th id="499">499</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_INT_WINDOW" data-ref="_M/VMCS_EXITCODE_INT_WINDOW">VMCS_EXITCODE_INT_WINDOW</dfn>		7</u></td></tr>
<tr><th id="500">500</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_NMI_WINDOW" data-ref="_M/VMCS_EXITCODE_NMI_WINDOW">VMCS_EXITCODE_NMI_WINDOW</dfn>		8</u></td></tr>
<tr><th id="501">501</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_TASK_SWITCH" data-ref="_M/VMCS_EXITCODE_TASK_SWITCH">VMCS_EXITCODE_TASK_SWITCH</dfn>		9</u></td></tr>
<tr><th id="502">502</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_CPUID" data-ref="_M/VMCS_EXITCODE_CPUID">VMCS_EXITCODE_CPUID</dfn>			10</u></td></tr>
<tr><th id="503">503</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_GETSEC" data-ref="_M/VMCS_EXITCODE_GETSEC">VMCS_EXITCODE_GETSEC</dfn>			11</u></td></tr>
<tr><th id="504">504</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_HLT" data-ref="_M/VMCS_EXITCODE_HLT">VMCS_EXITCODE_HLT</dfn>			12</u></td></tr>
<tr><th id="505">505</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_INVD" data-ref="_M/VMCS_EXITCODE_INVD">VMCS_EXITCODE_INVD</dfn>			13</u></td></tr>
<tr><th id="506">506</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_INVLPG" data-ref="_M/VMCS_EXITCODE_INVLPG">VMCS_EXITCODE_INVLPG</dfn>			14</u></td></tr>
<tr><th id="507">507</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_RDPMC" data-ref="_M/VMCS_EXITCODE_RDPMC">VMCS_EXITCODE_RDPMC</dfn>			15</u></td></tr>
<tr><th id="508">508</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_RDTSC" data-ref="_M/VMCS_EXITCODE_RDTSC">VMCS_EXITCODE_RDTSC</dfn>			16</u></td></tr>
<tr><th id="509">509</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_RSM" data-ref="_M/VMCS_EXITCODE_RSM">VMCS_EXITCODE_RSM</dfn>			17</u></td></tr>
<tr><th id="510">510</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_VMCALL" data-ref="_M/VMCS_EXITCODE_VMCALL">VMCS_EXITCODE_VMCALL</dfn>			18</u></td></tr>
<tr><th id="511">511</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_VMCLEAR" data-ref="_M/VMCS_EXITCODE_VMCLEAR">VMCS_EXITCODE_VMCLEAR</dfn>			19</u></td></tr>
<tr><th id="512">512</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_VMLAUNCH" data-ref="_M/VMCS_EXITCODE_VMLAUNCH">VMCS_EXITCODE_VMLAUNCH</dfn>			20</u></td></tr>
<tr><th id="513">513</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_VMPTRLD" data-ref="_M/VMCS_EXITCODE_VMPTRLD">VMCS_EXITCODE_VMPTRLD</dfn>			21</u></td></tr>
<tr><th id="514">514</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_VMPTRST" data-ref="_M/VMCS_EXITCODE_VMPTRST">VMCS_EXITCODE_VMPTRST</dfn>			22</u></td></tr>
<tr><th id="515">515</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_VMREAD" data-ref="_M/VMCS_EXITCODE_VMREAD">VMCS_EXITCODE_VMREAD</dfn>			23</u></td></tr>
<tr><th id="516">516</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_VMRESUME" data-ref="_M/VMCS_EXITCODE_VMRESUME">VMCS_EXITCODE_VMRESUME</dfn>			24</u></td></tr>
<tr><th id="517">517</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_VMWRITE" data-ref="_M/VMCS_EXITCODE_VMWRITE">VMCS_EXITCODE_VMWRITE</dfn>			25</u></td></tr>
<tr><th id="518">518</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_VMXOFF" data-ref="_M/VMCS_EXITCODE_VMXOFF">VMCS_EXITCODE_VMXOFF</dfn>			26</u></td></tr>
<tr><th id="519">519</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_VMXON" data-ref="_M/VMCS_EXITCODE_VMXON">VMCS_EXITCODE_VMXON</dfn>			27</u></td></tr>
<tr><th id="520">520</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_CR" data-ref="_M/VMCS_EXITCODE_CR">VMCS_EXITCODE_CR</dfn>			28</u></td></tr>
<tr><th id="521">521</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_DR" data-ref="_M/VMCS_EXITCODE_DR">VMCS_EXITCODE_DR</dfn>			29</u></td></tr>
<tr><th id="522">522</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_IO" data-ref="_M/VMCS_EXITCODE_IO">VMCS_EXITCODE_IO</dfn>			30</u></td></tr>
<tr><th id="523">523</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_RDMSR" data-ref="_M/VMCS_EXITCODE_RDMSR">VMCS_EXITCODE_RDMSR</dfn>			31</u></td></tr>
<tr><th id="524">524</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_WRMSR" data-ref="_M/VMCS_EXITCODE_WRMSR">VMCS_EXITCODE_WRMSR</dfn>			32</u></td></tr>
<tr><th id="525">525</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_FAIL_GUEST_INVALID" data-ref="_M/VMCS_EXITCODE_FAIL_GUEST_INVALID">VMCS_EXITCODE_FAIL_GUEST_INVALID</dfn>	33</u></td></tr>
<tr><th id="526">526</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_FAIL_MSR_INVALID" data-ref="_M/VMCS_EXITCODE_FAIL_MSR_INVALID">VMCS_EXITCODE_FAIL_MSR_INVALID</dfn>		34</u></td></tr>
<tr><th id="527">527</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_MWAIT" data-ref="_M/VMCS_EXITCODE_MWAIT">VMCS_EXITCODE_MWAIT</dfn>			36</u></td></tr>
<tr><th id="528">528</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_TRAP_FLAG" data-ref="_M/VMCS_EXITCODE_TRAP_FLAG">VMCS_EXITCODE_TRAP_FLAG</dfn>			37</u></td></tr>
<tr><th id="529">529</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_MONITOR" data-ref="_M/VMCS_EXITCODE_MONITOR">VMCS_EXITCODE_MONITOR</dfn>			39</u></td></tr>
<tr><th id="530">530</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_PAUSE" data-ref="_M/VMCS_EXITCODE_PAUSE">VMCS_EXITCODE_PAUSE</dfn>			40</u></td></tr>
<tr><th id="531">531</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_FAIL_MACHINE_CHECK" data-ref="_M/VMCS_EXITCODE_FAIL_MACHINE_CHECK">VMCS_EXITCODE_FAIL_MACHINE_CHECK</dfn>	41</u></td></tr>
<tr><th id="532">532</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_TPR_BELOW" data-ref="_M/VMCS_EXITCODE_TPR_BELOW">VMCS_EXITCODE_TPR_BELOW</dfn>			43</u></td></tr>
<tr><th id="533">533</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_APIC_ACCESS" data-ref="_M/VMCS_EXITCODE_APIC_ACCESS">VMCS_EXITCODE_APIC_ACCESS</dfn>		44</u></td></tr>
<tr><th id="534">534</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_VEOI" data-ref="_M/VMCS_EXITCODE_VEOI">VMCS_EXITCODE_VEOI</dfn>			45</u></td></tr>
<tr><th id="535">535</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_GDTR_IDTR" data-ref="_M/VMCS_EXITCODE_GDTR_IDTR">VMCS_EXITCODE_GDTR_IDTR</dfn>			46</u></td></tr>
<tr><th id="536">536</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_LDTR_TR" data-ref="_M/VMCS_EXITCODE_LDTR_TR">VMCS_EXITCODE_LDTR_TR</dfn>			47</u></td></tr>
<tr><th id="537">537</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_EPT_VIOLATION" data-ref="_M/VMCS_EXITCODE_EPT_VIOLATION">VMCS_EXITCODE_EPT_VIOLATION</dfn>		48</u></td></tr>
<tr><th id="538">538</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_EPT_MISCONFIG" data-ref="_M/VMCS_EXITCODE_EPT_MISCONFIG">VMCS_EXITCODE_EPT_MISCONFIG</dfn>		49</u></td></tr>
<tr><th id="539">539</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_INVEPT" data-ref="_M/VMCS_EXITCODE_INVEPT">VMCS_EXITCODE_INVEPT</dfn>			50</u></td></tr>
<tr><th id="540">540</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_RDTSCP" data-ref="_M/VMCS_EXITCODE_RDTSCP">VMCS_EXITCODE_RDTSCP</dfn>			51</u></td></tr>
<tr><th id="541">541</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_PREEMPT_TIMEOUT" data-ref="_M/VMCS_EXITCODE_PREEMPT_TIMEOUT">VMCS_EXITCODE_PREEMPT_TIMEOUT</dfn>		52</u></td></tr>
<tr><th id="542">542</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_INVVPID" data-ref="_M/VMCS_EXITCODE_INVVPID">VMCS_EXITCODE_INVVPID</dfn>			53</u></td></tr>
<tr><th id="543">543</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_WBINVD" data-ref="_M/VMCS_EXITCODE_WBINVD">VMCS_EXITCODE_WBINVD</dfn>			54</u></td></tr>
<tr><th id="544">544</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_XSETBV" data-ref="_M/VMCS_EXITCODE_XSETBV">VMCS_EXITCODE_XSETBV</dfn>			55</u></td></tr>
<tr><th id="545">545</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_APIC_WRITE" data-ref="_M/VMCS_EXITCODE_APIC_WRITE">VMCS_EXITCODE_APIC_WRITE</dfn>		56</u></td></tr>
<tr><th id="546">546</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_RDRAND" data-ref="_M/VMCS_EXITCODE_RDRAND">VMCS_EXITCODE_RDRAND</dfn>			57</u></td></tr>
<tr><th id="547">547</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_INVPCID" data-ref="_M/VMCS_EXITCODE_INVPCID">VMCS_EXITCODE_INVPCID</dfn>			58</u></td></tr>
<tr><th id="548">548</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_VMFUNC" data-ref="_M/VMCS_EXITCODE_VMFUNC">VMCS_EXITCODE_VMFUNC</dfn>			59</u></td></tr>
<tr><th id="549">549</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_ENCLS" data-ref="_M/VMCS_EXITCODE_ENCLS">VMCS_EXITCODE_ENCLS</dfn>			60</u></td></tr>
<tr><th id="550">550</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_RDSEED" data-ref="_M/VMCS_EXITCODE_RDSEED">VMCS_EXITCODE_RDSEED</dfn>			61</u></td></tr>
<tr><th id="551">551</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_PAGE_LOG_FULL" data-ref="_M/VMCS_EXITCODE_PAGE_LOG_FULL">VMCS_EXITCODE_PAGE_LOG_FULL</dfn>		62</u></td></tr>
<tr><th id="552">552</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_XSAVES" data-ref="_M/VMCS_EXITCODE_XSAVES">VMCS_EXITCODE_XSAVES</dfn>			63</u></td></tr>
<tr><th id="553">553</th><td><u>#define <dfn class="macro" id="_M/VMCS_EXITCODE_XRSTORS" data-ref="_M/VMCS_EXITCODE_XRSTORS">VMCS_EXITCODE_XRSTORS</dfn>			64</u></td></tr>
<tr><th id="554">554</th><td></td></tr>
<tr><th id="555">555</th><td><i  data-doc="vmx_vcpu_state_provide">/* -------------------------------------------------------------------------- */</i></td></tr>
<tr><th id="556">556</th><td></td></tr>
<tr><th id="557">557</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#vmx_vcpu_state_provide" title='vmx_vcpu_state_provide' data-type='void vmx_vcpu_state_provide(struct nvmm_cpu * , uint64_t )' data-ref="vmx_vcpu_state_provide" data-ref-filename="vmx_vcpu_state_provide">vmx_vcpu_state_provide</a>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>);</td></tr>
<tr><th id="558">558</th><td><em>static</em> <em>void</em> <a class="tu decl fn" href="#vmx_vcpu_state_commit" title='vmx_vcpu_state_commit' data-type='void vmx_vcpu_state_commit(struct nvmm_cpu * )' data-ref="vmx_vcpu_state_commit" data-ref-filename="vmx_vcpu_state_commit">vmx_vcpu_state_commit</a>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *);</td></tr>
<tr><th id="559">559</th><td></td></tr>
<tr><th id="560">560</th><td><u>#define <dfn class="macro" id="_M/VMX_MSRLIST_STAR" data-ref="_M/VMX_MSRLIST_STAR">VMX_MSRLIST_STAR</dfn>		0</u></td></tr>
<tr><th id="561">561</th><td><u>#define <dfn class="macro" id="_M/VMX_MSRLIST_LSTAR" data-ref="_M/VMX_MSRLIST_LSTAR">VMX_MSRLIST_LSTAR</dfn>		1</u></td></tr>
<tr><th id="562">562</th><td><u>#define <dfn class="macro" id="_M/VMX_MSRLIST_CSTAR" data-ref="_M/VMX_MSRLIST_CSTAR">VMX_MSRLIST_CSTAR</dfn>		2</u></td></tr>
<tr><th id="563">563</th><td><u>#define <dfn class="macro" id="_M/VMX_MSRLIST_SFMASK" data-ref="_M/VMX_MSRLIST_SFMASK">VMX_MSRLIST_SFMASK</dfn>		3</u></td></tr>
<tr><th id="564">564</th><td><u>#define <dfn class="macro" id="_M/VMX_MSRLIST_KERNELGSBASE" data-ref="_M/VMX_MSRLIST_KERNELGSBASE">VMX_MSRLIST_KERNELGSBASE</dfn>	4</u></td></tr>
<tr><th id="565">565</th><td><u>#define <dfn class="macro" id="_M/VMX_MSRLIST_EXIT_NMSR" data-ref="_M/VMX_MSRLIST_EXIT_NMSR">VMX_MSRLIST_EXIT_NMSR</dfn>		5</u></td></tr>
<tr><th id="566">566</th><td><u>#define <dfn class="macro" id="_M/VMX_MSRLIST_L1DFLUSH" data-ref="_M/VMX_MSRLIST_L1DFLUSH">VMX_MSRLIST_L1DFLUSH</dfn>		5</u></td></tr>
<tr><th id="567">567</th><td></td></tr>
<tr><th id="568">568</th><td><i  data-doc="vmx_msrlist_entry_nmsr">/* On entry, we may do +1 to include L1DFLUSH. */</i></td></tr>
<tr><th id="569">569</th><td><em>static</em> <a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="tu decl def" id="vmx_msrlist_entry_nmsr" title='vmx_msrlist_entry_nmsr' data-type='size_t' data-ref="vmx_msrlist_entry_nmsr" data-ref-filename="vmx_msrlist_entry_nmsr">vmx_msrlist_entry_nmsr</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a> = <a class="macro" href="#565" title="5" data-ref="_M/VMX_MSRLIST_EXIT_NMSR">VMX_MSRLIST_EXIT_NMSR</a>;</td></tr>
<tr><th id="570">570</th><td></td></tr>
<tr><th id="571">571</th><td><b>struct</b> <dfn class="type def" id="vmxon" title='vmxon' data-ref="vmxon" data-ref-filename="vmxon">vmxon</dfn> {</td></tr>
<tr><th id="572">572</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="tu decl field" id="vmxon::ident" title='vmxon::ident' data-type='uint32_t' data-ref="vmxon::ident" data-ref-filename="vmxon..ident">ident</dfn>;</td></tr>
<tr><th id="573">573</th><td><u>#define <dfn class="macro" id="_M/VMXON_IDENT_REVISION" data-ref="_M/VMXON_IDENT_REVISION">VMXON_IDENT_REVISION</dfn>	__BITS(30,0)</u></td></tr>
<tr><th id="574">574</th><td></td></tr>
<tr><th id="575">575</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> <dfn class="tu decl field" id="vmxon::data" title='vmxon::data' data-type='uint8_t [4092]' data-ref="vmxon::data" data-ref-filename="vmxon..data">data</dfn>[<a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a> - <var>4</var>];</td></tr>
<tr><th id="576">576</th><td>} <a class="macro" href="../../../sys/cdefs.h.html#391" title="__attribute__((__packed__))" data-ref="_M/__packed">__packed</a>;</td></tr>
<tr><th id="577">577</th><td></td></tr>
<tr><th id="578">578</th><td><a class="macro" href="../../../lib/libkern/libkern.h.html#254" title="typedef char __ctassert9[ (sizeof(struct vmxon) == (1 &lt;&lt; 12)) ? 1 : -1] __attribute__((__unused__))" data-ref="_M/CTASSERT">CTASSERT</a>(<b>sizeof</b>(<b>struct</b> <a class="type" href="#vmxon" title='vmxon' data-ref="vmxon" data-ref-filename="vmxon">vmxon</a>) == <a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>);</td></tr>
<tr><th id="579">579</th><td></td></tr>
<tr><th id="580">580</th><td><b>struct</b> <dfn class="type def" id="vmxoncpu" title='vmxoncpu' data-ref="vmxoncpu" data-ref-filename="vmxoncpu">vmxoncpu</dfn> {</td></tr>
<tr><th id="581">581</th><td>	<a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a> <dfn class="tu decl field" id="vmxoncpu::va" title='vmxoncpu::va' data-type='vaddr_t' data-ref="vmxoncpu::va" data-ref-filename="vmxoncpu..va">va</dfn>;</td></tr>
<tr><th id="582">582</th><td>	<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> <dfn class="tu decl field" id="vmxoncpu::pa" title='vmxoncpu::pa' data-type='paddr_t' data-ref="vmxoncpu::pa" data-ref-filename="vmxoncpu..pa">pa</dfn>;</td></tr>
<tr><th id="583">583</th><td>};</td></tr>
<tr><th id="584">584</th><td></td></tr>
<tr><th id="585">585</th><td><em>static</em> <b>struct</b> <a class="type" href="#vmxoncpu" title='vmxoncpu' data-ref="vmxoncpu" data-ref-filename="vmxoncpu">vmxoncpu</a> <dfn class="tu decl def" id="vmxoncpu" title='vmxoncpu' data-type='struct vmxoncpu [256]' data-ref="vmxoncpu" data-ref-filename="vmxoncpu">vmxoncpu</dfn>[<a class="macro" href="../../../arch/amd64/include/param.h.html#7" title="256" data-ref="_M/MAXCPUS">MAXCPUS</a>];</td></tr>
<tr><th id="586">586</th><td></td></tr>
<tr><th id="587">587</th><td><b>struct</b> <dfn class="type def" id="vmcs" title='vmcs' data-ref="vmcs" data-ref-filename="vmcs">vmcs</dfn> {</td></tr>
<tr><th id="588">588</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="tu decl field" id="vmcs::ident" title='vmcs::ident' data-type='uint32_t' data-ref="vmcs::ident" data-ref-filename="vmcs..ident">ident</dfn>;</td></tr>
<tr><th id="589">589</th><td><u>#define <dfn class="macro" id="_M/VMCS_IDENT_REVISION" data-ref="_M/VMCS_IDENT_REVISION">VMCS_IDENT_REVISION</dfn>	__BITS(30,0)</u></td></tr>
<tr><th id="590">590</th><td><u>#define <dfn class="macro" id="_M/VMCS_IDENT_SHADOW" data-ref="_M/VMCS_IDENT_SHADOW">VMCS_IDENT_SHADOW</dfn>	__BIT(31)</u></td></tr>
<tr><th id="591">591</th><td></td></tr>
<tr><th id="592">592</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="tu decl field" id="vmcs::abort" title='vmcs::abort' data-type='uint32_t' data-ref="vmcs::abort" data-ref-filename="vmcs..abort">abort</dfn>;</td></tr>
<tr><th id="593">593</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> <dfn class="tu decl field" id="vmcs::data" title='vmcs::data' data-type='uint8_t [4088]' data-ref="vmcs::data" data-ref-filename="vmcs..data">data</dfn>[<a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a> - <var>8</var>];</td></tr>
<tr><th id="594">594</th><td>} <a class="macro" href="../../../sys/cdefs.h.html#391" title="__attribute__((__packed__))" data-ref="_M/__packed">__packed</a>;</td></tr>
<tr><th id="595">595</th><td></td></tr>
<tr><th id="596">596</th><td><a class="macro" href="../../../lib/libkern/libkern.h.html#254" title="typedef char __ctassert11[ (sizeof(struct vmcs) == (1 &lt;&lt; 12)) ? 1 : -1] __attribute__((__unused__))" data-ref="_M/CTASSERT">CTASSERT</a>(<b>sizeof</b>(<b>struct</b> <a class="type" href="#vmcs" title='vmcs' data-ref="vmcs" data-ref-filename="vmcs">vmcs</a>) == <a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>);</td></tr>
<tr><th id="597">597</th><td></td></tr>
<tr><th id="598">598</th><td><b>struct</b> <dfn class="type def" id="msr_entry" title='msr_entry' data-ref="msr_entry" data-ref-filename="msr_entry">msr_entry</dfn> {</td></tr>
<tr><th id="599">599</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="tu decl field" id="msr_entry::msr" title='msr_entry::msr' data-type='uint32_t' data-ref="msr_entry::msr" data-ref-filename="msr_entry..msr">msr</dfn>;</td></tr>
<tr><th id="600">600</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="tu decl field" id="msr_entry::rsvd" title='msr_entry::rsvd' data-type='uint32_t' data-ref="msr_entry::rsvd" data-ref-filename="msr_entry..rsvd">rsvd</dfn>;</td></tr>
<tr><th id="601">601</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="msr_entry::val" title='msr_entry::val' data-type='uint64_t' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</dfn>;</td></tr>
<tr><th id="602">602</th><td>} <a class="macro" href="../../../sys/cdefs.h.html#391" title="__attribute__((__packed__))" data-ref="_M/__packed">__packed</a>;</td></tr>
<tr><th id="603">603</th><td></td></tr>
<tr><th id="604">604</th><td><u>#define <dfn class="macro" id="_M/VPID_MAX" data-ref="_M/VPID_MAX">VPID_MAX</dfn>	0xFFFF</u></td></tr>
<tr><th id="605">605</th><td></td></tr>
<tr><th id="606">606</th><td><i>/* Make sure we never run out of VPIDs. */</i></td></tr>
<tr><th id="607">607</th><td><a class="macro" href="../../../lib/libkern/libkern.h.html#254" title="typedef char __ctassert13[ (0xFFFF-1 &gt;= 128 * 256) ? 1 : -1] __attribute__((__unused__))" data-ref="_M/CTASSERT">CTASSERT</a>(<a class="macro" href="#604" title="0xFFFF" data-ref="_M/VPID_MAX">VPID_MAX</a>-<var>1</var> &gt;= <a class="macro" href="../nvmm_internal.h.html#35" title="128" data-ref="_M/NVMM_MAX_MACHINES">NVMM_MAX_MACHINES</a> * <a class="macro" href="../nvmm_internal.h.html#36" title="256" data-ref="_M/NVMM_MAX_VCPUS">NVMM_MAX_VCPUS</a>);</td></tr>
<tr><th id="608">608</th><td></td></tr>
<tr><th id="609">609</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl def" id="vmx_tlb_flush_op" title='vmx_tlb_flush_op' data-type='uint64_t' data-ref="vmx_tlb_flush_op" data-ref-filename="vmx_tlb_flush_op">vmx_tlb_flush_op</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="610">610</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl def" id="vmx_ept_flush_op" title='vmx_ept_flush_op' data-type='uint64_t' data-ref="vmx_ept_flush_op" data-ref-filename="vmx_ept_flush_op">vmx_ept_flush_op</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="611">611</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl def" id="vmx_eptp_type" title='vmx_eptp_type' data-type='uint64_t' data-ref="vmx_eptp_type" data-ref-filename="vmx_eptp_type">vmx_eptp_type</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="612">612</th><td></td></tr>
<tr><th id="613">613</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl def" id="vmx_pinbased_ctls" title='vmx_pinbased_ctls' data-type='uint64_t' data-ref="vmx_pinbased_ctls" data-ref-filename="vmx_pinbased_ctls">vmx_pinbased_ctls</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="614">614</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl def" id="vmx_procbased_ctls" title='vmx_procbased_ctls' data-type='uint64_t' data-ref="vmx_procbased_ctls" data-ref-filename="vmx_procbased_ctls">vmx_procbased_ctls</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="615">615</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl def" id="vmx_procbased_ctls2" title='vmx_procbased_ctls2' data-type='uint64_t' data-ref="vmx_procbased_ctls2" data-ref-filename="vmx_procbased_ctls2">vmx_procbased_ctls2</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="616">616</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl def" id="vmx_entry_ctls" title='vmx_entry_ctls' data-type='uint64_t' data-ref="vmx_entry_ctls" data-ref-filename="vmx_entry_ctls">vmx_entry_ctls</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="617">617</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl def" id="vmx_exit_ctls" title='vmx_exit_ctls' data-type='uint64_t' data-ref="vmx_exit_ctls" data-ref-filename="vmx_exit_ctls">vmx_exit_ctls</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="618">618</th><td></td></tr>
<tr><th id="619">619</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl def" id="vmx_cr0_fixed0" title='vmx_cr0_fixed0' data-type='uint64_t' data-ref="vmx_cr0_fixed0" data-ref-filename="vmx_cr0_fixed0">vmx_cr0_fixed0</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="620">620</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl def" id="vmx_cr0_fixed1" title='vmx_cr0_fixed1' data-type='uint64_t' data-ref="vmx_cr0_fixed1" data-ref-filename="vmx_cr0_fixed1">vmx_cr0_fixed1</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="621">621</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl def" id="vmx_cr4_fixed0" title='vmx_cr4_fixed0' data-type='uint64_t' data-ref="vmx_cr4_fixed0" data-ref-filename="vmx_cr4_fixed0">vmx_cr4_fixed0</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="622">622</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl def" id="vmx_cr4_fixed1" title='vmx_cr4_fixed1' data-type='uint64_t' data-ref="vmx_cr4_fixed1" data-ref-filename="vmx_cr4_fixed1">vmx_cr4_fixed1</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="623">623</th><td></td></tr>
<tr><th id="624">624</th><td><b>extern</b> <a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="decl" id="pmap_ept_has_ad" title='pmap_ept_has_ad' data-ref="pmap_ept_has_ad" data-ref-filename="pmap_ept_has_ad">pmap_ept_has_ad</dfn>;</td></tr>
<tr><th id="625">625</th><td></td></tr>
<tr><th id="626">626</th><td><u>#define <dfn class="macro" id="_M/VMX_PINBASED_CTLS_ONE" data-ref="_M/VMX_PINBASED_CTLS_ONE">VMX_PINBASED_CTLS_ONE</dfn>	\</u></td></tr>
<tr><th id="627">627</th><td><u>	(PIN_CTLS_INT_EXITING| \</u></td></tr>
<tr><th id="628">628</th><td><u>	 PIN_CTLS_NMI_EXITING| \</u></td></tr>
<tr><th id="629">629</th><td><u>	 PIN_CTLS_VIRTUAL_NMIS)</u></td></tr>
<tr><th id="630">630</th><td></td></tr>
<tr><th id="631">631</th><td><u>#define <dfn class="macro" id="_M/VMX_PINBASED_CTLS_ZERO" data-ref="_M/VMX_PINBASED_CTLS_ZERO">VMX_PINBASED_CTLS_ZERO</dfn>	0</u></td></tr>
<tr><th id="632">632</th><td></td></tr>
<tr><th id="633">633</th><td><u>#define <dfn class="macro" id="_M/VMX_PROCBASED_CTLS_ONE" data-ref="_M/VMX_PROCBASED_CTLS_ONE">VMX_PROCBASED_CTLS_ONE</dfn>	\</u></td></tr>
<tr><th id="634">634</th><td><u>	(PROC_CTLS_USE_TSC_OFFSETTING| \</u></td></tr>
<tr><th id="635">635</th><td><u>	 PROC_CTLS_HLT_EXITING| \</u></td></tr>
<tr><th id="636">636</th><td><u>	 PROC_CTLS_MWAIT_EXITING | \</u></td></tr>
<tr><th id="637">637</th><td><u>	 PROC_CTLS_RDPMC_EXITING | \</u></td></tr>
<tr><th id="638">638</th><td><u>	 PROC_CTLS_RCR8_EXITING | \</u></td></tr>
<tr><th id="639">639</th><td><u>	 PROC_CTLS_LCR8_EXITING | \</u></td></tr>
<tr><th id="640">640</th><td><u>	 PROC_CTLS_UNCOND_IO_EXITING | /* no I/O bitmap */ \</u></td></tr>
<tr><th id="641">641</th><td><u>	 PROC_CTLS_USE_MSR_BITMAPS | \</u></td></tr>
<tr><th id="642">642</th><td><u>	 PROC_CTLS_MONITOR_EXITING | \</u></td></tr>
<tr><th id="643">643</th><td><u>	 PROC_CTLS_ACTIVATE_CTLS2)</u></td></tr>
<tr><th id="644">644</th><td></td></tr>
<tr><th id="645">645</th><td><u>#define <dfn class="macro" id="_M/VMX_PROCBASED_CTLS_ZERO" data-ref="_M/VMX_PROCBASED_CTLS_ZERO">VMX_PROCBASED_CTLS_ZERO</dfn>	\</u></td></tr>
<tr><th id="646">646</th><td><u>	(PROC_CTLS_RCR3_EXITING| \</u></td></tr>
<tr><th id="647">647</th><td><u>	 PROC_CTLS_LCR3_EXITING)</u></td></tr>
<tr><th id="648">648</th><td></td></tr>
<tr><th id="649">649</th><td><u>#define <dfn class="macro" id="_M/VMX_PROCBASED_CTLS2_ONE" data-ref="_M/VMX_PROCBASED_CTLS2_ONE">VMX_PROCBASED_CTLS2_ONE</dfn>	\</u></td></tr>
<tr><th id="650">650</th><td><u>	(PROC_CTLS2_ENABLE_EPT| \</u></td></tr>
<tr><th id="651">651</th><td><u>	 PROC_CTLS2_ENABLE_VPID| \</u></td></tr>
<tr><th id="652">652</th><td><u>	 PROC_CTLS2_UNRESTRICTED_GUEST)</u></td></tr>
<tr><th id="653">653</th><td></td></tr>
<tr><th id="654">654</th><td><u>#define <dfn class="macro" id="_M/VMX_PROCBASED_CTLS2_ZERO" data-ref="_M/VMX_PROCBASED_CTLS2_ZERO">VMX_PROCBASED_CTLS2_ZERO</dfn>	0</u></td></tr>
<tr><th id="655">655</th><td></td></tr>
<tr><th id="656">656</th><td><u>#define <dfn class="macro" id="_M/VMX_ENTRY_CTLS_ONE" data-ref="_M/VMX_ENTRY_CTLS_ONE">VMX_ENTRY_CTLS_ONE</dfn>	\</u></td></tr>
<tr><th id="657">657</th><td><u>	(ENTRY_CTLS_LOAD_DEBUG_CONTROLS| \</u></td></tr>
<tr><th id="658">658</th><td><u>	 ENTRY_CTLS_LOAD_EFER| \</u></td></tr>
<tr><th id="659">659</th><td><u>	 ENTRY_CTLS_LOAD_PAT)</u></td></tr>
<tr><th id="660">660</th><td></td></tr>
<tr><th id="661">661</th><td><u>#define <dfn class="macro" id="_M/VMX_ENTRY_CTLS_ZERO" data-ref="_M/VMX_ENTRY_CTLS_ZERO">VMX_ENTRY_CTLS_ZERO</dfn>	\</u></td></tr>
<tr><th id="662">662</th><td><u>	(ENTRY_CTLS_SMM| \</u></td></tr>
<tr><th id="663">663</th><td><u>	 ENTRY_CTLS_DISABLE_DUAL)</u></td></tr>
<tr><th id="664">664</th><td></td></tr>
<tr><th id="665">665</th><td><u>#define <dfn class="macro" id="_M/VMX_EXIT_CTLS_ONE" data-ref="_M/VMX_EXIT_CTLS_ONE">VMX_EXIT_CTLS_ONE</dfn>	\</u></td></tr>
<tr><th id="666">666</th><td><u>	(EXIT_CTLS_SAVE_DEBUG_CONTROLS| \</u></td></tr>
<tr><th id="667">667</th><td><u>	 EXIT_CTLS_HOST_LONG_MODE| \</u></td></tr>
<tr><th id="668">668</th><td><u>	 EXIT_CTLS_SAVE_PAT| \</u></td></tr>
<tr><th id="669">669</th><td><u>	 EXIT_CTLS_LOAD_PAT| \</u></td></tr>
<tr><th id="670">670</th><td><u>	 EXIT_CTLS_SAVE_EFER| \</u></td></tr>
<tr><th id="671">671</th><td><u>	 EXIT_CTLS_LOAD_EFER)</u></td></tr>
<tr><th id="672">672</th><td></td></tr>
<tr><th id="673">673</th><td><u>#define <dfn class="macro" id="_M/VMX_EXIT_CTLS_ZERO" data-ref="_M/VMX_EXIT_CTLS_ZERO">VMX_EXIT_CTLS_ZERO</dfn>	0</u></td></tr>
<tr><th id="674">674</th><td></td></tr>
<tr><th id="675">675</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> *<dfn class="tu decl def" id="vmx_asidmap" title='vmx_asidmap' data-type='uint8_t *' data-ref="vmx_asidmap" data-ref-filename="vmx_asidmap">vmx_asidmap</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="676">676</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="tu decl def" id="vmx_maxasid" title='vmx_maxasid' data-type='uint32_t' data-ref="vmx_maxasid" data-ref-filename="vmx_maxasid">vmx_maxasid</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="677">677</th><td><em>static</em> <a class="typedef" href="../../../sys/mutex.h.html#kmutex_t" title='kmutex_t' data-type='struct kmutex' data-ref="kmutex_t" data-ref-filename="kmutex_t">kmutex_t</a> <dfn class="tu decl def" id="vmx_asidlock" title='vmx_asidlock' data-type='kmutex_t' data-ref="vmx_asidlock" data-ref-filename="vmx_asidlock">vmx_asidlock</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#227" title="__attribute__((__aligned__(64), __section__(&quot;.data.cacheline_aligned&quot;)))" data-ref="_M/__cacheline_aligned">__cacheline_aligned</a>;</td></tr>
<tr><th id="678">678</th><td></td></tr>
<tr><th id="679">679</th><td><u>#define <dfn class="macro" id="_M/VMX_XCR0_MASK_DEFAULT" data-ref="_M/VMX_XCR0_MASK_DEFAULT">VMX_XCR0_MASK_DEFAULT</dfn>	(XCR0_X87|XCR0_SSE)</u></td></tr>
<tr><th id="680">680</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl def" id="vmx_xcr0_mask" title='vmx_xcr0_mask' data-type='uint64_t' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</dfn> <a class="macro" href="../../../sys/cdefs_elf.h.html#224" title="__attribute__((__section__(&quot;.data.read_mostly&quot;)))" data-ref="_M/__read_mostly">__read_mostly</a>;</td></tr>
<tr><th id="681">681</th><td></td></tr>
<tr><th id="682">682</th><td><u>#define <dfn class="macro" id="_M/VMX_NCPUIDS" data-ref="_M/VMX_NCPUIDS">VMX_NCPUIDS</dfn>	32</u></td></tr>
<tr><th id="683">683</th><td></td></tr>
<tr><th id="684">684</th><td><u>#define <dfn class="macro" id="_M/VMCS_NPAGES" data-ref="_M/VMCS_NPAGES">VMCS_NPAGES</dfn>	1</u></td></tr>
<tr><th id="685">685</th><td><u>#define <dfn class="macro" id="_M/VMCS_SIZE" data-ref="_M/VMCS_SIZE">VMCS_SIZE</dfn>	(VMCS_NPAGES * PAGE_SIZE)</u></td></tr>
<tr><th id="686">686</th><td></td></tr>
<tr><th id="687">687</th><td><u>#define <dfn class="macro" id="_M/MSRBM_NPAGES" data-ref="_M/MSRBM_NPAGES">MSRBM_NPAGES</dfn>	1</u></td></tr>
<tr><th id="688">688</th><td><u>#define <dfn class="macro" id="_M/MSRBM_SIZE" data-ref="_M/MSRBM_SIZE">MSRBM_SIZE</dfn>	(MSRBM_NPAGES * PAGE_SIZE)</u></td></tr>
<tr><th id="689">689</th><td></td></tr>
<tr><th id="690">690</th><td><u>#define <dfn class="macro" id="_M/EFER_TLB_FLUSH" data-ref="_M/EFER_TLB_FLUSH">EFER_TLB_FLUSH</dfn> \</u></td></tr>
<tr><th id="691">691</th><td><u>	(EFER_NXE|EFER_LMA|EFER_LME)</u></td></tr>
<tr><th id="692">692</th><td><u>#define <dfn class="macro" id="_M/CR0_TLB_FLUSH" data-ref="_M/CR0_TLB_FLUSH">CR0_TLB_FLUSH</dfn> \</u></td></tr>
<tr><th id="693">693</th><td><u>	(CR0_PG|CR0_WP|CR0_CD|CR0_NW)</u></td></tr>
<tr><th id="694">694</th><td><u>#define <dfn class="macro" id="_M/CR4_TLB_FLUSH" data-ref="_M/CR4_TLB_FLUSH">CR4_TLB_FLUSH</dfn> \</u></td></tr>
<tr><th id="695">695</th><td><u>	(CR4_PGE|CR4_PAE|CR4_PSE)</u></td></tr>
<tr><th id="696">696</th><td></td></tr>
<tr><th id="697">697</th><td><i>/* -------------------------------------------------------------------------- */</i></td></tr>
<tr><th id="698">698</th><td></td></tr>
<tr><th id="699">699</th><td><b>struct</b> <dfn class="type def" id="vmx_machdata" title='vmx_machdata' data-ref="vmx_machdata" data-ref-filename="vmx_machdata">vmx_machdata</dfn> {</td></tr>
<tr><th id="700">700</th><td>	<a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="tu decl field" id="vmx_machdata::cpuidpresent" title='vmx_machdata::cpuidpresent' data-type='_Bool [32]' data-ref="vmx_machdata::cpuidpresent" data-ref-filename="vmx_machdata..cpuidpresent">cpuidpresent</dfn>[<a class="macro" href="#682" title="32" data-ref="_M/VMX_NCPUIDS">VMX_NCPUIDS</a>];</td></tr>
<tr><th id="701">701</th><td>	<b>struct</b> <a class="type" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid" title='nvmm_mach_conf_x86_cpuid' data-ref="nvmm_mach_conf_x86_cpuid" data-ref-filename="nvmm_mach_conf_x86_cpuid">nvmm_mach_conf_x86_cpuid</a> <dfn class="tu decl field" id="vmx_machdata::cpuid" title='vmx_machdata::cpuid' data-type='struct nvmm_mach_conf_x86_cpuid [32]' data-ref="vmx_machdata::cpuid" data-ref-filename="vmx_machdata..cpuid">cpuid</dfn>[<a class="macro" href="#682" title="32" data-ref="_M/VMX_NCPUIDS">VMX_NCPUIDS</a>];</td></tr>
<tr><th id="702">702</th><td>	<em>volatile</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_machdata::mach_htlb_gen" title='vmx_machdata::mach_htlb_gen' data-type='volatile uint64_t' data-ref="vmx_machdata::mach_htlb_gen" data-ref-filename="vmx_machdata..mach_htlb_gen">mach_htlb_gen</dfn>;</td></tr>
<tr><th id="703">703</th><td>};</td></tr>
<tr><th id="704">704</th><td></td></tr>
<tr><th id="705">705</th><td><em>static</em> <em>const</em> <a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="tu decl def" id="vmx_conf_sizes" title='vmx_conf_sizes' data-type='const size_t [1]' data-ref="vmx_conf_sizes" data-ref-filename="vmx_conf_sizes">vmx_conf_sizes</dfn>[<a class="macro" href="nvmm_x86.h.html#235" title="1" data-ref="_M/NVMM_X86_NCONF">NVMM_X86_NCONF</a>] = {</td></tr>
<tr><th id="706">706</th><td>	[<a class="macro" href="../nvmm.h.html#102" title="(200 - 200)" data-ref="_M/NVMM_MACH_CONF_MD">NVMM_MACH_CONF_MD</a>(<a class="macro" href="nvmm_x86.h.html#234" title="200" data-ref="_M/NVMM_MACH_CONF_X86_CPUID">NVMM_MACH_CONF_X86_CPUID</a>)] =</td></tr>
<tr><th id="707">707</th><td>	    <b>sizeof</b>(<b>struct</b> <a class="type" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid" title='nvmm_mach_conf_x86_cpuid' data-ref="nvmm_mach_conf_x86_cpuid" data-ref-filename="nvmm_mach_conf_x86_cpuid">nvmm_mach_conf_x86_cpuid</a>)</td></tr>
<tr><th id="708">708</th><td>};</td></tr>
<tr><th id="709">709</th><td></td></tr>
<tr><th id="710">710</th><td><b>struct</b> <dfn class="type def" id="vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</dfn> {</td></tr>
<tr><th id="711">711</th><td>	<i  data-doc="vmx_cpudata::asid">/* General */</i></td></tr>
<tr><th id="712">712</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::asid" title='vmx_cpudata::asid' data-type='uint64_t' data-ref="vmx_cpudata::asid" data-ref-filename="vmx_cpudata..asid">asid</dfn>;</td></tr>
<tr><th id="713">713</th><td>	<a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="tu decl field" id="vmx_cpudata::gtlb_want_flush" title='vmx_cpudata::gtlb_want_flush' data-type='_Bool' data-ref="vmx_cpudata::gtlb_want_flush" data-ref-filename="vmx_cpudata..gtlb_want_flush">gtlb_want_flush</dfn>;</td></tr>
<tr><th id="714">714</th><td>	<a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="tu decl field" id="vmx_cpudata::gtsc_want_update" title='vmx_cpudata::gtsc_want_update' data-type='_Bool' data-ref="vmx_cpudata::gtsc_want_update" data-ref-filename="vmx_cpudata..gtsc_want_update">gtsc_want_update</dfn>;</td></tr>
<tr><th id="715">715</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::vcpu_htlb_gen" title='vmx_cpudata::vcpu_htlb_gen' data-type='uint64_t' data-ref="vmx_cpudata::vcpu_htlb_gen" data-ref-filename="vmx_cpudata..vcpu_htlb_gen">vcpu_htlb_gen</dfn>;</td></tr>
<tr><th id="716">716</th><td>	<a class="typedef" href="../../../sys/kcpuset.h.html#kcpuset_t" title='kcpuset_t' data-type='struct kcpuset' data-ref="kcpuset_t" data-ref-filename="kcpuset_t">kcpuset_t</a> *<dfn class="tu decl field" id="vmx_cpudata::htlb_want_flush" title='vmx_cpudata::htlb_want_flush' data-type='kcpuset_t *' data-ref="vmx_cpudata::htlb_want_flush" data-ref-filename="vmx_cpudata..htlb_want_flush">htlb_want_flush</dfn>;</td></tr>
<tr><th id="717">717</th><td></td></tr>
<tr><th id="718">718</th><td>	<i  data-doc="vmx_cpudata::vmcs">/* VMCS */</i></td></tr>
<tr><th id="719">719</th><td>	<b>struct</b> <a class="type" href="#vmcs" title='vmcs' data-ref="vmcs" data-ref-filename="vmcs">vmcs</a> *<dfn class="tu decl field" id="vmx_cpudata::vmcs" title='vmx_cpudata::vmcs' data-type='struct vmcs *' data-ref="vmx_cpudata::vmcs" data-ref-filename="vmx_cpudata..vmcs">vmcs</dfn>;</td></tr>
<tr><th id="720">720</th><td>	<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> <dfn class="tu decl field" id="vmx_cpudata::vmcs_pa" title='vmx_cpudata::vmcs_pa' data-type='paddr_t' data-ref="vmx_cpudata::vmcs_pa" data-ref-filename="vmx_cpudata..vmcs_pa">vmcs_pa</dfn>;</td></tr>
<tr><th id="721">721</th><td>	<a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="tu decl field" id="vmx_cpudata::vmcs_refcnt" title='vmx_cpudata::vmcs_refcnt' data-type='size_t' data-ref="vmx_cpudata::vmcs_refcnt" data-ref-filename="vmx_cpudata..vmcs_refcnt">vmcs_refcnt</dfn>;</td></tr>
<tr><th id="722">722</th><td>	<b>struct</b> <a class="type" href="../../../arch/x86/include/cpu.h.html#cpu_info" title='cpu_info' data-ref="cpu_info" data-ref-filename="cpu_info">cpu_info</a> *<dfn class="tu decl field" id="vmx_cpudata::vmcs_ci" title='vmx_cpudata::vmcs_ci' data-type='struct cpu_info *' data-ref="vmx_cpudata::vmcs_ci" data-ref-filename="vmx_cpudata..vmcs_ci">vmcs_ci</dfn>;</td></tr>
<tr><th id="723">723</th><td>	<a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="tu decl field" id="vmx_cpudata::vmcs_launched" title='vmx_cpudata::vmcs_launched' data-type='_Bool' data-ref="vmx_cpudata::vmcs_launched" data-ref-filename="vmx_cpudata..vmcs_launched">vmcs_launched</dfn>;</td></tr>
<tr><th id="724">724</th><td></td></tr>
<tr><th id="725">725</th><td>	<i  data-doc="vmx_cpudata::msrbm">/* MSR bitmap */</i></td></tr>
<tr><th id="726">726</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> *<dfn class="tu decl field" id="vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-type='uint8_t *' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</dfn>;</td></tr>
<tr><th id="727">727</th><td>	<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> <dfn class="tu decl field" id="vmx_cpudata::msrbm_pa" title='vmx_cpudata::msrbm_pa' data-type='paddr_t' data-ref="vmx_cpudata::msrbm_pa" data-ref-filename="vmx_cpudata..msrbm_pa">msrbm_pa</dfn>;</td></tr>
<tr><th id="728">728</th><td></td></tr>
<tr><th id="729">729</th><td>	<i  data-doc="vmx_cpudata::hxcr0">/* Host state */</i></td></tr>
<tr><th id="730">730</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::hxcr0" title='vmx_cpudata::hxcr0' data-type='uint64_t' data-ref="vmx_cpudata::hxcr0" data-ref-filename="vmx_cpudata..hxcr0">hxcr0</dfn>;</td></tr>
<tr><th id="731">731</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::star" title='vmx_cpudata::star' data-type='uint64_t' data-ref="vmx_cpudata::star" data-ref-filename="vmx_cpudata..star">star</dfn>;</td></tr>
<tr><th id="732">732</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::lstar" title='vmx_cpudata::lstar' data-type='uint64_t' data-ref="vmx_cpudata::lstar" data-ref-filename="vmx_cpudata..lstar">lstar</dfn>;</td></tr>
<tr><th id="733">733</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::cstar" title='vmx_cpudata::cstar' data-type='uint64_t' data-ref="vmx_cpudata::cstar" data-ref-filename="vmx_cpudata..cstar">cstar</dfn>;</td></tr>
<tr><th id="734">734</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::sfmask" title='vmx_cpudata::sfmask' data-type='uint64_t' data-ref="vmx_cpudata::sfmask" data-ref-filename="vmx_cpudata..sfmask">sfmask</dfn>;</td></tr>
<tr><th id="735">735</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::kernelgsbase" title='vmx_cpudata::kernelgsbase' data-type='uint64_t' data-ref="vmx_cpudata::kernelgsbase" data-ref-filename="vmx_cpudata..kernelgsbase">kernelgsbase</dfn>;</td></tr>
<tr><th id="736">736</th><td>	<a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="tu decl field" id="vmx_cpudata::ts_set" title='vmx_cpudata::ts_set' data-type='_Bool' data-ref="vmx_cpudata::ts_set" data-ref-filename="vmx_cpudata..ts_set">ts_set</dfn>;</td></tr>
<tr><th id="737">737</th><td>	<b>struct</b> <a class="type" href="../../../arch/x86/include/cpu_extended_state.h.html#xsave_header" title='xsave_header' data-ref="xsave_header" data-ref-filename="xsave_header">xsave_header</a> <dfn class="tu decl field" id="vmx_cpudata::hfpu" title='vmx_cpudata::hfpu' data-type='struct xsave_header' data-ref="vmx_cpudata::hfpu" data-ref-filename="vmx_cpudata..hfpu">hfpu</dfn> <a class="macro" href="../../../sys/cdefs.h.html#392" title="__attribute__((__aligned__(64)))" data-ref="_M/__aligned">__aligned</a>(<var>64</var>);</td></tr>
<tr><th id="738">738</th><td></td></tr>
<tr><th id="739">739</th><td>	<i>/* Intr state */</i></td></tr>
<tr><th id="740">740</th><td>	<a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="tu decl field" id="vmx_cpudata::int_window_exit" title='vmx_cpudata::int_window_exit' data-type='_Bool' data-ref="vmx_cpudata::int_window_exit" data-ref-filename="vmx_cpudata..int_window_exit">int_window_exit</dfn>;</td></tr>
<tr><th id="741">741</th><td>	<a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="tu decl field" id="vmx_cpudata::nmi_window_exit" title='vmx_cpudata::nmi_window_exit' data-type='_Bool' data-ref="vmx_cpudata::nmi_window_exit" data-ref-filename="vmx_cpudata..nmi_window_exit">nmi_window_exit</dfn>;</td></tr>
<tr><th id="742">742</th><td>	<a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="tu decl field" id="vmx_cpudata::evt_pending" title='vmx_cpudata::evt_pending' data-type='_Bool' data-ref="vmx_cpudata::evt_pending" data-ref-filename="vmx_cpudata..evt_pending">evt_pending</dfn>;</td></tr>
<tr><th id="743">743</th><td></td></tr>
<tr><th id="744">744</th><td>	<i  data-doc="vmx_cpudata::gmsr">/* Guest state */</i></td></tr>
<tr><th id="745">745</th><td>	<b>struct</b> <a class="type" href="#msr_entry" title='msr_entry' data-ref="msr_entry" data-ref-filename="msr_entry">msr_entry</a> *<dfn class="tu decl field" id="vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-type='struct msr_entry *' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</dfn>;</td></tr>
<tr><th id="746">746</th><td>	<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> <dfn class="tu decl field" id="vmx_cpudata::gmsr_pa" title='vmx_cpudata::gmsr_pa' data-type='paddr_t' data-ref="vmx_cpudata::gmsr_pa" data-ref-filename="vmx_cpudata..gmsr_pa">gmsr_pa</dfn>;</td></tr>
<tr><th id="747">747</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::gmsr_misc_enable" title='vmx_cpudata::gmsr_misc_enable' data-type='uint64_t' data-ref="vmx_cpudata::gmsr_misc_enable" data-ref-filename="vmx_cpudata..gmsr_misc_enable">gmsr_misc_enable</dfn>;</td></tr>
<tr><th id="748">748</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::gcr2" title='vmx_cpudata::gcr2' data-type='uint64_t' data-ref="vmx_cpudata::gcr2" data-ref-filename="vmx_cpudata..gcr2">gcr2</dfn>;</td></tr>
<tr><th id="749">749</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::gcr8" title='vmx_cpudata::gcr8' data-type='uint64_t' data-ref="vmx_cpudata::gcr8" data-ref-filename="vmx_cpudata..gcr8">gcr8</dfn>;</td></tr>
<tr><th id="750">750</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::gxcr0" title='vmx_cpudata::gxcr0' data-type='uint64_t' data-ref="vmx_cpudata::gxcr0" data-ref-filename="vmx_cpudata..gxcr0">gxcr0</dfn>;</td></tr>
<tr><th id="751">751</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-type='uint64_t [18]' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</dfn>[<a class="macro" href="nvmm_x86.h.html#137" title="18" data-ref="_M/NVMM_X64_NGPR">NVMM_X64_NGPR</a>];</td></tr>
<tr><th id="752">752</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::drs" title='vmx_cpudata::drs' data-type='uint64_t [6]' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</dfn>[<a class="macro" href="nvmm_x86.h.html#155" title="6" data-ref="_M/NVMM_X64_NDR">NVMM_X64_NDR</a>];</td></tr>
<tr><th id="753">753</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl field" id="vmx_cpudata::gtsc" title='vmx_cpudata::gtsc' data-type='uint64_t' data-ref="vmx_cpudata::gtsc" data-ref-filename="vmx_cpudata..gtsc">gtsc</dfn>;</td></tr>
<tr><th id="754">754</th><td>	<b>struct</b> <a class="type" href="../../../arch/x86/include/cpu_extended_state.h.html#xsave_header" title='xsave_header' data-ref="xsave_header" data-ref-filename="xsave_header">xsave_header</a> <dfn class="tu decl field" id="vmx_cpudata::gfpu" title='vmx_cpudata::gfpu' data-type='struct xsave_header' data-ref="vmx_cpudata::gfpu" data-ref-filename="vmx_cpudata..gfpu">gfpu</dfn> <a class="macro" href="../../../sys/cdefs.h.html#392" title="__attribute__((__aligned__(64)))" data-ref="_M/__aligned">__aligned</a>(<var>64</var>);</td></tr>
<tr><th id="755">755</th><td>};</td></tr>
<tr><th id="756">756</th><td></td></tr>
<tr><th id="757">757</th><td><em>static</em> <em>const</em> <b>struct</b> {</td></tr>
<tr><th id="758">758</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col5 decl field" id="15selector" title='selector' data-type='uint64_t' data-ref="15selector" data-ref-filename="15selector">selector</dfn>;</td></tr>
<tr><th id="759">759</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col6 decl field" id="16attrib" title='attrib' data-type='uint64_t' data-ref="16attrib" data-ref-filename="16attrib">attrib</dfn>;</td></tr>
<tr><th id="760">760</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col7 decl field" id="17limit" title='limit' data-type='uint64_t' data-ref="17limit" data-ref-filename="17limit">limit</dfn>;</td></tr>
<tr><th id="761">761</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col8 decl field" id="18base" title='base' data-type='uint64_t' data-ref="18base" data-ref-filename="18base">base</dfn>;</td></tr>
<tr><th id="762">762</th><td>} <dfn class="tu decl def" id="vmx_guest_segs" title='vmx_guest_segs' data-type='const struct (anonymous struct at /___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c:757:14) [10]' data-ref="vmx_guest_segs" data-ref-filename="vmx_guest_segs">vmx_guest_segs</dfn>[<a class="macro" href="nvmm_x86.h.html#116" title="10" data-ref="_M/NVMM_X64_NSEG">NVMM_X64_NSEG</a>] = {</td></tr>
<tr><th id="763">763</th><td>	[<a class="macro" href="nvmm_x86.h.html#106" title="0" data-ref="_M/NVMM_X64_SEG_ES">NVMM_X64_SEG_ES</a>] = {</td></tr>
<tr><th id="764">764</th><td>		<a class="macro" href="#231" title="0x00000800" data-ref="_M/VMCS_GUEST_ES_SELECTOR">VMCS_GUEST_ES_SELECTOR</a>,</td></tr>
<tr><th id="765">765</th><td>		<a class="macro" href="#420" title="0x00004814" data-ref="_M/VMCS_GUEST_ES_ACCESS_RIGHTS">VMCS_GUEST_ES_ACCESS_RIGHTS</a>,</td></tr>
<tr><th id="766">766</th><td>		<a class="macro" href="#410" title="0x00004800" data-ref="_M/VMCS_GUEST_ES_LIMIT">VMCS_GUEST_ES_LIMIT</a>,</td></tr>
<tr><th id="767">767</th><td>		<a class="macro" href="#460" title="0x00006806" data-ref="_M/VMCS_GUEST_ES_BASE">VMCS_GUEST_ES_BASE</a></td></tr>
<tr><th id="768">768</th><td>	},</td></tr>
<tr><th id="769">769</th><td>	[<a class="macro" href="nvmm_x86.h.html#107" title="1" data-ref="_M/NVMM_X64_SEG_CS">NVMM_X64_SEG_CS</a>] = {</td></tr>
<tr><th id="770">770</th><td>		<a class="macro" href="#232" title="0x00000802" data-ref="_M/VMCS_GUEST_CS_SELECTOR">VMCS_GUEST_CS_SELECTOR</a>,</td></tr>
<tr><th id="771">771</th><td>		<a class="macro" href="#421" title="0x00004816" data-ref="_M/VMCS_GUEST_CS_ACCESS_RIGHTS">VMCS_GUEST_CS_ACCESS_RIGHTS</a>,</td></tr>
<tr><th id="772">772</th><td>		<a class="macro" href="#411" title="0x00004802" data-ref="_M/VMCS_GUEST_CS_LIMIT">VMCS_GUEST_CS_LIMIT</a>,</td></tr>
<tr><th id="773">773</th><td>		<a class="macro" href="#461" title="0x00006808" data-ref="_M/VMCS_GUEST_CS_BASE">VMCS_GUEST_CS_BASE</a></td></tr>
<tr><th id="774">774</th><td>	},</td></tr>
<tr><th id="775">775</th><td>	[<a class="macro" href="nvmm_x86.h.html#108" title="2" data-ref="_M/NVMM_X64_SEG_SS">NVMM_X64_SEG_SS</a>] = {</td></tr>
<tr><th id="776">776</th><td>		<a class="macro" href="#233" title="0x00000804" data-ref="_M/VMCS_GUEST_SS_SELECTOR">VMCS_GUEST_SS_SELECTOR</a>,</td></tr>
<tr><th id="777">777</th><td>		<a class="macro" href="#422" title="0x00004818" data-ref="_M/VMCS_GUEST_SS_ACCESS_RIGHTS">VMCS_GUEST_SS_ACCESS_RIGHTS</a>,</td></tr>
<tr><th id="778">778</th><td>		<a class="macro" href="#412" title="0x00004804" data-ref="_M/VMCS_GUEST_SS_LIMIT">VMCS_GUEST_SS_LIMIT</a>,</td></tr>
<tr><th id="779">779</th><td>		<a class="macro" href="#462" title="0x0000680A" data-ref="_M/VMCS_GUEST_SS_BASE">VMCS_GUEST_SS_BASE</a></td></tr>
<tr><th id="780">780</th><td>	},</td></tr>
<tr><th id="781">781</th><td>	[<a class="macro" href="nvmm_x86.h.html#109" title="3" data-ref="_M/NVMM_X64_SEG_DS">NVMM_X64_SEG_DS</a>] = {</td></tr>
<tr><th id="782">782</th><td>		<a class="macro" href="#234" title="0x00000806" data-ref="_M/VMCS_GUEST_DS_SELECTOR">VMCS_GUEST_DS_SELECTOR</a>,</td></tr>
<tr><th id="783">783</th><td>		<a class="macro" href="#423" title="0x0000481A" data-ref="_M/VMCS_GUEST_DS_ACCESS_RIGHTS">VMCS_GUEST_DS_ACCESS_RIGHTS</a>,</td></tr>
<tr><th id="784">784</th><td>		<a class="macro" href="#413" title="0x00004806" data-ref="_M/VMCS_GUEST_DS_LIMIT">VMCS_GUEST_DS_LIMIT</a>,</td></tr>
<tr><th id="785">785</th><td>		<a class="macro" href="#463" title="0x0000680C" data-ref="_M/VMCS_GUEST_DS_BASE">VMCS_GUEST_DS_BASE</a></td></tr>
<tr><th id="786">786</th><td>	},</td></tr>
<tr><th id="787">787</th><td>	[<a class="macro" href="nvmm_x86.h.html#110" title="4" data-ref="_M/NVMM_X64_SEG_FS">NVMM_X64_SEG_FS</a>] = {</td></tr>
<tr><th id="788">788</th><td>		<a class="macro" href="#235" title="0x00000808" data-ref="_M/VMCS_GUEST_FS_SELECTOR">VMCS_GUEST_FS_SELECTOR</a>,</td></tr>
<tr><th id="789">789</th><td>		<a class="macro" href="#424" title="0x0000481C" data-ref="_M/VMCS_GUEST_FS_ACCESS_RIGHTS">VMCS_GUEST_FS_ACCESS_RIGHTS</a>,</td></tr>
<tr><th id="790">790</th><td>		<a class="macro" href="#414" title="0x00004808" data-ref="_M/VMCS_GUEST_FS_LIMIT">VMCS_GUEST_FS_LIMIT</a>,</td></tr>
<tr><th id="791">791</th><td>		<a class="macro" href="#464" title="0x0000680E" data-ref="_M/VMCS_GUEST_FS_BASE">VMCS_GUEST_FS_BASE</a></td></tr>
<tr><th id="792">792</th><td>	},</td></tr>
<tr><th id="793">793</th><td>	[<a class="macro" href="nvmm_x86.h.html#111" title="5" data-ref="_M/NVMM_X64_SEG_GS">NVMM_X64_SEG_GS</a>] = {</td></tr>
<tr><th id="794">794</th><td>		<a class="macro" href="#236" title="0x0000080A" data-ref="_M/VMCS_GUEST_GS_SELECTOR">VMCS_GUEST_GS_SELECTOR</a>,</td></tr>
<tr><th id="795">795</th><td>		<a class="macro" href="#425" title="0x0000481E" data-ref="_M/VMCS_GUEST_GS_ACCESS_RIGHTS">VMCS_GUEST_GS_ACCESS_RIGHTS</a>,</td></tr>
<tr><th id="796">796</th><td>		<a class="macro" href="#415" title="0x0000480A" data-ref="_M/VMCS_GUEST_GS_LIMIT">VMCS_GUEST_GS_LIMIT</a>,</td></tr>
<tr><th id="797">797</th><td>		<a class="macro" href="#465" title="0x00006810" data-ref="_M/VMCS_GUEST_GS_BASE">VMCS_GUEST_GS_BASE</a></td></tr>
<tr><th id="798">798</th><td>	},</td></tr>
<tr><th id="799">799</th><td>	[<a class="macro" href="nvmm_x86.h.html#112" title="6" data-ref="_M/NVMM_X64_SEG_GDT">NVMM_X64_SEG_GDT</a>] = {</td></tr>
<tr><th id="800">800</th><td>		<var>0</var>, <i>/* doesn't exist */</i></td></tr>
<tr><th id="801">801</th><td>		<var>0</var>, <i>/* doesn't exist */</i></td></tr>
<tr><th id="802">802</th><td>		<a class="macro" href="#418" title="0x00004810" data-ref="_M/VMCS_GUEST_GDTR_LIMIT">VMCS_GUEST_GDTR_LIMIT</a>,</td></tr>
<tr><th id="803">803</th><td>		<a class="macro" href="#468" title="0x00006816" data-ref="_M/VMCS_GUEST_GDTR_BASE">VMCS_GUEST_GDTR_BASE</a></td></tr>
<tr><th id="804">804</th><td>	},</td></tr>
<tr><th id="805">805</th><td>	[<a class="macro" href="nvmm_x86.h.html#113" title="7" data-ref="_M/NVMM_X64_SEG_IDT">NVMM_X64_SEG_IDT</a>] = {</td></tr>
<tr><th id="806">806</th><td>		<var>0</var>, <i>/* doesn't exist */</i></td></tr>
<tr><th id="807">807</th><td>		<var>0</var>, <i>/* doesn't exist */</i></td></tr>
<tr><th id="808">808</th><td>		<a class="macro" href="#419" title="0x00004812" data-ref="_M/VMCS_GUEST_IDTR_LIMIT">VMCS_GUEST_IDTR_LIMIT</a>,</td></tr>
<tr><th id="809">809</th><td>		<a class="macro" href="#469" title="0x00006818" data-ref="_M/VMCS_GUEST_IDTR_BASE">VMCS_GUEST_IDTR_BASE</a></td></tr>
<tr><th id="810">810</th><td>	},</td></tr>
<tr><th id="811">811</th><td>	[<a class="macro" href="nvmm_x86.h.html#114" title="8" data-ref="_M/NVMM_X64_SEG_LDT">NVMM_X64_SEG_LDT</a>] = {</td></tr>
<tr><th id="812">812</th><td>		<a class="macro" href="#237" title="0x0000080C" data-ref="_M/VMCS_GUEST_LDTR_SELECTOR">VMCS_GUEST_LDTR_SELECTOR</a>,</td></tr>
<tr><th id="813">813</th><td>		<a class="macro" href="#426" title="0x00004820" data-ref="_M/VMCS_GUEST_LDTR_ACCESS_RIGHTS">VMCS_GUEST_LDTR_ACCESS_RIGHTS</a>,</td></tr>
<tr><th id="814">814</th><td>		<a class="macro" href="#416" title="0x0000480C" data-ref="_M/VMCS_GUEST_LDTR_LIMIT">VMCS_GUEST_LDTR_LIMIT</a>,</td></tr>
<tr><th id="815">815</th><td>		<a class="macro" href="#466" title="0x00006812" data-ref="_M/VMCS_GUEST_LDTR_BASE">VMCS_GUEST_LDTR_BASE</a></td></tr>
<tr><th id="816">816</th><td>	},</td></tr>
<tr><th id="817">817</th><td>	[<a class="macro" href="nvmm_x86.h.html#115" title="9" data-ref="_M/NVMM_X64_SEG_TR">NVMM_X64_SEG_TR</a>] = {</td></tr>
<tr><th id="818">818</th><td>		<a class="macro" href="#238" title="0x0000080E" data-ref="_M/VMCS_GUEST_TR_SELECTOR">VMCS_GUEST_TR_SELECTOR</a>,</td></tr>
<tr><th id="819">819</th><td>		<a class="macro" href="#427" title="0x00004822" data-ref="_M/VMCS_GUEST_TR_ACCESS_RIGHTS">VMCS_GUEST_TR_ACCESS_RIGHTS</a>,</td></tr>
<tr><th id="820">820</th><td>		<a class="macro" href="#417" title="0x0000480E" data-ref="_M/VMCS_GUEST_TR_LIMIT">VMCS_GUEST_TR_LIMIT</a>,</td></tr>
<tr><th id="821">821</th><td>		<a class="macro" href="#467" title="0x00006814" data-ref="_M/VMCS_GUEST_TR_BASE">VMCS_GUEST_TR_BASE</a></td></tr>
<tr><th id="822">822</th><td>	}</td></tr>
<tr><th id="823">823</th><td>};</td></tr>
<tr><th id="824">824</th><td></td></tr>
<tr><th id="825">825</th><td><i  data-doc="vmx_get_revision">/* -------------------------------------------------------------------------- */</i></td></tr>
<tr><th id="826">826</th><td></td></tr>
<tr><th id="827">827</th><td><em>static</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a></td></tr>
<tr><th id="828">828</th><td><dfn class="tu decl def fn" id="vmx_get_revision" title='vmx_get_revision' data-type='uint64_t vmx_get_revision()' data-ref="vmx_get_revision" data-ref-filename="vmx_get_revision">vmx_get_revision</dfn>(<em>void</em>)</td></tr>
<tr><th id="829">829</th><td>{</td></tr>
<tr><th id="830">830</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col9 decl" id="19msr" title='msr' data-type='uint64_t' data-ref="19msr" data-ref-filename="19msr">msr</dfn>;</td></tr>
<tr><th id="831">831</th><td></td></tr>
<tr><th id="832">832</th><td>	<a class="local col9 ref" href="#19msr" title='msr' data-ref="19msr" data-ref-filename="19msr">msr</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="#183" title="0x0480" data-ref="_M/MSR_IA32_VMX_BASIC">MSR_IA32_VMX_BASIC</a>);</td></tr>
<tr><th id="833">833</th><td>	<a class="local col9 ref" href="#19msr" title='msr' data-ref="19msr" data-ref-filename="19msr">msr</a> &amp;= <a class="macro" href="#184" title="(((((uintmax_t)((( ((30))&gt;((0)))?((30)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&gt;((0)))?((30)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((30))&lt;=((0)))?((30)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&lt;=((0)))?((30)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/IA32_VMX_BASIC_IDENT">IA32_VMX_BASIC_IDENT</a>;</td></tr>
<tr><th id="834">834</th><td></td></tr>
<tr><th id="835">835</th><td>	<b>return</b> <a class="local col9 ref" href="#19msr" title='msr' data-ref="19msr" data-ref-filename="19msr">msr</a>;</td></tr>
<tr><th id="836">836</th><td>}</td></tr>
<tr><th id="837">837</th><td></td></tr>
<tr><th id="838">838</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="839">839</th><td><dfn class="tu decl def fn" id="vmx_vmclear_ipi" title='vmx_vmclear_ipi' data-type='void vmx_vmclear_ipi(void * arg1, void * arg2)' data-ref="vmx_vmclear_ipi" data-ref-filename="vmx_vmclear_ipi">vmx_vmclear_ipi</dfn>(<em>void</em> *<dfn class="local col0 decl" id="20arg1" title='arg1' data-type='void *' data-ref="20arg1" data-ref-filename="20arg1">arg1</dfn>, <em>void</em> *<dfn class="local col1 decl" id="21arg2" title='arg2' data-type='void *' data-ref="21arg2" data-ref-filename="21arg2">arg2</dfn>)</td></tr>
<tr><th id="840">840</th><td>{</td></tr>
<tr><th id="841">841</th><td>	<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> <dfn class="local col2 decl" id="22vmcs_pa" title='vmcs_pa' data-type='paddr_t' data-ref="22vmcs_pa" data-ref-filename="22vmcs_pa">vmcs_pa</dfn> = (<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a>)<a class="local col0 ref" href="#20arg1" title='arg1' data-ref="20arg1" data-ref-filename="20arg1">arg1</a>;</td></tr>
<tr><th id="842">842</th><td>	<a class="tu ref fn" href="#vmx_vmclear" title='vmx_vmclear' data-use='c' data-ref="vmx_vmclear" data-ref-filename="vmx_vmclear">vmx_vmclear</a>(&amp;<a class="local col2 ref" href="#22vmcs_pa" title='vmcs_pa' data-ref="22vmcs_pa" data-ref-filename="22vmcs_pa">vmcs_pa</a>);</td></tr>
<tr><th id="843">843</th><td>}</td></tr>
<tr><th id="844">844</th><td></td></tr>
<tr><th id="845">845</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="846">846</th><td><dfn class="tu decl def fn" id="vmx_vmclear_remote" title='vmx_vmclear_remote' data-type='void vmx_vmclear_remote(struct cpu_info * ci, paddr_t vmcs_pa)' data-ref="vmx_vmclear_remote" data-ref-filename="vmx_vmclear_remote">vmx_vmclear_remote</dfn>(<b>struct</b> <a class="type" href="../../../arch/x86/include/cpu.h.html#cpu_info" title='cpu_info' data-ref="cpu_info" data-ref-filename="cpu_info">cpu_info</a> *<dfn class="local col3 decl" id="23ci" title='ci' data-type='struct cpu_info *' data-ref="23ci" data-ref-filename="23ci">ci</dfn>, <a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> <dfn class="local col4 decl" id="24vmcs_pa" title='vmcs_pa' data-type='paddr_t' data-ref="24vmcs_pa" data-ref-filename="24vmcs_pa">vmcs_pa</dfn>)</td></tr>
<tr><th id="847">847</th><td>{</td></tr>
<tr><th id="848">848</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col5 decl" id="25xc" title='xc' data-type='uint64_t' data-ref="25xc" data-ref-filename="25xc">xc</dfn>;</td></tr>
<tr><th id="849">849</th><td>	<em>int</em> <dfn class="local col6 decl" id="26bound" title='bound' data-type='int' data-ref="26bound" data-ref-filename="26bound">bound</dfn>;</td></tr>
<tr><th id="850">850</th><td></td></tr>
<tr><th id="851">851</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect(((kpreempt_disabled())) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;kpreempt_disabled()&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 851))" data-ref="_M/KASSERT">KASSERT</a>(<a class="ref fn" href="../../../sys/systm.h.html#kpreempt_disabled" title='kpreempt_disabled' data-ref="kpreempt_disabled" data-ref-filename="kpreempt_disabled">kpreempt_disabled</a>());</td></tr>
<tr><th id="852">852</th><td></td></tr>
<tr><th id="853">853</th><td>	<a class="local col6 ref" href="#26bound" title='bound' data-ref="26bound" data-ref-filename="26bound">bound</a> = <a class="ref fn" href="../../../sys/lwp.h.html#curlwp_bind" title='curlwp_bind' data-ref="curlwp_bind" data-ref-filename="curlwp_bind">curlwp_bind</a>();</td></tr>
<tr><th id="854">854</th><td>	<a class="ref fn" href="../../../sys/systm.h.html#kpreempt_enable" title='kpreempt_enable' data-ref="kpreempt_enable" data-ref-filename="kpreempt_enable">kpreempt_enable</a>();</td></tr>
<tr><th id="855">855</th><td></td></tr>
<tr><th id="856">856</th><td>	<a class="local col5 ref" href="#25xc" title='xc' data-ref="25xc" data-ref-filename="25xc">xc</a> = <a class="ref fn" href="../../../sys/xcall.h.html#xc_unicast" title='xc_unicast' data-ref="xc_unicast" data-ref-filename="xc_unicast">xc_unicast</a>(<a class="macro" href="../../../sys/xcall.h.html#39" title="0x01" data-ref="_M/XC_HIGHPRI">XC_HIGHPRI</a>, <a class="tu ref fn" href="#vmx_vmclear_ipi" title='vmx_vmclear_ipi' data-use='r' data-ref="vmx_vmclear_ipi" data-ref-filename="vmx_vmclear_ipi">vmx_vmclear_ipi</a>, (<em>void</em> *)<a class="local col4 ref" href="#24vmcs_pa" title='vmcs_pa' data-ref="24vmcs_pa" data-ref-filename="24vmcs_pa">vmcs_pa</a>, <a class="macro" href="../../../sys/null.h.html#13" title="((void *)0)" data-ref="_M/NULL">NULL</a>, <a class="local col3 ref" href="#23ci" title='ci' data-ref="23ci" data-ref-filename="23ci">ci</a>);</td></tr>
<tr><th id="857">857</th><td>	<a class="ref fn" href="../../../sys/xcall.h.html#xc_wait" title='xc_wait' data-ref="xc_wait" data-ref-filename="xc_wait">xc_wait</a>(<a class="local col5 ref" href="#25xc" title='xc' data-ref="25xc" data-ref-filename="25xc">xc</a>);</td></tr>
<tr><th id="858">858</th><td></td></tr>
<tr><th id="859">859</th><td>	<a class="ref fn" href="../../../sys/systm.h.html#kpreempt_disable" title='kpreempt_disable' data-ref="kpreempt_disable" data-ref-filename="kpreempt_disable">kpreempt_disable</a>();</td></tr>
<tr><th id="860">860</th><td>	<a class="ref fn" href="../../../sys/lwp.h.html#curlwp_bindx" title='curlwp_bindx' data-ref="curlwp_bindx" data-ref-filename="curlwp_bindx">curlwp_bindx</a>(<a class="local col6 ref" href="#26bound" title='bound' data-ref="26bound" data-ref-filename="26bound">bound</a>);</td></tr>
<tr><th id="861">861</th><td>}</td></tr>
<tr><th id="862">862</th><td></td></tr>
<tr><th id="863">863</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="864">864</th><td><dfn class="tu decl def fn" id="vmx_vmcs_enter" title='vmx_vmcs_enter' data-type='void vmx_vmcs_enter(struct nvmm_cpu * vcpu)' data-ref="vmx_vmcs_enter" data-ref-filename="vmx_vmcs_enter">vmx_vmcs_enter</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col7 decl" id="27vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="27vcpu" data-ref-filename="27vcpu">vcpu</dfn>)</td></tr>
<tr><th id="865">865</th><td>{</td></tr>
<tr><th id="866">866</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col8 decl" id="28cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="28cpudata" data-ref-filename="28cpudata">cpudata</dfn> = <a class="local col7 ref" href="#27vcpu" title='vcpu' data-ref="27vcpu" data-ref-filename="27vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="867">867</th><td>	<b>struct</b> <a class="type" href="../../../arch/x86/include/cpu.h.html#cpu_info" title='cpu_info' data-ref="cpu_info" data-ref-filename="cpu_info">cpu_info</a> *<dfn class="local col9 decl" id="29vmcs_ci" title='vmcs_ci' data-type='struct cpu_info *' data-ref="29vmcs_ci" data-ref-filename="29vmcs_ci">vmcs_ci</dfn>;</td></tr>
<tr><th id="868">868</th><td>	<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> <dfn class="local col0 decl" id="30oldpa" title='oldpa' data-type='paddr_t' data-ref="30oldpa" data-ref-filename="30oldpa">oldpa</dfn> <a class="macro" href="../../../sys/cdefs.h.html#283" title="" data-ref="_M/__diagused">__diagused</a>;</td></tr>
<tr><th id="869">869</th><td></td></tr>
<tr><th id="870">870</th><td>	<a class="local col8 ref" href="#28cpudata" title='cpudata' data-ref="28cpudata" data-ref-filename="28cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_refcnt" title='vmx_cpudata::vmcs_refcnt' data-use='w' data-ref="vmx_cpudata::vmcs_refcnt" data-ref-filename="vmx_cpudata..vmcs_refcnt">vmcs_refcnt</a>++;</td></tr>
<tr><th id="871">871</th><td>	<b>if</b> (<a class="local col8 ref" href="#28cpudata" title='cpudata' data-ref="28cpudata" data-ref-filename="28cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_refcnt" title='vmx_cpudata::vmcs_refcnt' data-use='r' data-ref="vmx_cpudata::vmcs_refcnt" data-ref-filename="vmx_cpudata..vmcs_refcnt">vmcs_refcnt</a> &gt; <var>1</var>) {</td></tr>
<tr><th id="872">872</th><td><u>#<span data-ppcond="872">ifdef</span> <span class="macro" data-ref="_M/DIAGNOSTIC">DIAGNOSTIC</span></u></td></tr>
<tr><th id="873">873</th><td>		<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect(((kpreempt_disabled())) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;kpreempt_disabled()&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 873))" data-ref="_M/KASSERT">KASSERT</a>(<a class="ref fn" href="../../../sys/systm.h.html#kpreempt_disabled" title='kpreempt_disabled' data-ref="kpreempt_disabled" data-ref-filename="kpreempt_disabled">kpreempt_disabled</a>());</td></tr>
<tr><th id="874">874</th><td>		<a class="local col0 ref" href="#30oldpa" title='oldpa' data-ref="30oldpa" data-ref-filename="30oldpa">oldpa</a> = <a class="tu ref fn" href="#vmx_vmptrst" title='vmx_vmptrst' data-use='c' data-ref="vmx_vmptrst" data-ref-filename="vmx_vmptrst">vmx_vmptrst</a>();</td></tr>
<tr><th id="875">875</th><td>		<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect(((oldpa == cpudata-&gt;vmcs_pa)) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;oldpa == cpudata-&gt;vmcs_pa&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 875))" data-ref="_M/KASSERT">KASSERT</a>(<a class="local col0 ref" href="#30oldpa" title='oldpa' data-ref="30oldpa" data-ref-filename="30oldpa">oldpa</a> == <a class="local col8 ref" href="#28cpudata" title='cpudata' data-ref="28cpudata" data-ref-filename="28cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_pa" title='vmx_cpudata::vmcs_pa' data-use='r' data-ref="vmx_cpudata::vmcs_pa" data-ref-filename="vmx_cpudata..vmcs_pa">vmcs_pa</a>);</td></tr>
<tr><th id="876">876</th><td><u>#<span data-ppcond="872">endif</span></u></td></tr>
<tr><th id="877">877</th><td>		<b>return</b>;</td></tr>
<tr><th id="878">878</th><td>	}</td></tr>
<tr><th id="879">879</th><td></td></tr>
<tr><th id="880">880</th><td>	<a class="local col9 ref" href="#29vmcs_ci" title='vmcs_ci' data-ref="29vmcs_ci" data-ref-filename="29vmcs_ci">vmcs_ci</a> = <a class="local col8 ref" href="#28cpudata" title='cpudata' data-ref="28cpudata" data-ref-filename="28cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_ci" title='vmx_cpudata::vmcs_ci' data-use='r' data-ref="vmx_cpudata::vmcs_ci" data-ref-filename="vmx_cpudata..vmcs_ci">vmcs_ci</a>;</td></tr>
<tr><th id="881">881</th><td>	<a class="local col8 ref" href="#28cpudata" title='cpudata' data-ref="28cpudata" data-ref-filename="28cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_ci" title='vmx_cpudata::vmcs_ci' data-use='w' data-ref="vmx_cpudata::vmcs_ci" data-ref-filename="vmx_cpudata..vmcs_ci">vmcs_ci</a> = (<em>void</em> *)<var>0x00FFFFFFFFFFFFFF</var>; <i>/* clobber */</i></td></tr>
<tr><th id="882">882</th><td></td></tr>
<tr><th id="883">883</th><td>	<a class="ref fn" href="../../../sys/systm.h.html#kpreempt_disable" title='kpreempt_disable' data-ref="kpreempt_disable" data-ref-filename="kpreempt_disable">kpreempt_disable</a>();</td></tr>
<tr><th id="884">884</th><td></td></tr>
<tr><th id="885">885</th><td>	<b>if</b> (<a class="local col9 ref" href="#29vmcs_ci" title='vmcs_ci' data-ref="29vmcs_ci" data-ref-filename="29vmcs_ci">vmcs_ci</a> == <a class="macro" href="../../../sys/null.h.html#13" title="((void *)0)" data-ref="_M/NULL">NULL</a>) {</td></tr>
<tr><th id="886">886</th><td>		<i>/* This VMCS is loaded for the first time. */</i></td></tr>
<tr><th id="887">887</th><td>		<a class="tu ref fn" href="#vmx_vmclear" title='vmx_vmclear' data-use='c' data-ref="vmx_vmclear" data-ref-filename="vmx_vmclear">vmx_vmclear</a>(&amp;<a class="local col8 ref" href="#28cpudata" title='cpudata' data-ref="28cpudata" data-ref-filename="28cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_pa" title='vmx_cpudata::vmcs_pa' data-use='a' data-ref="vmx_cpudata::vmcs_pa" data-ref-filename="vmx_cpudata..vmcs_pa">vmcs_pa</a>);</td></tr>
<tr><th id="888">888</th><td>		<a class="local col8 ref" href="#28cpudata" title='cpudata' data-ref="28cpudata" data-ref-filename="28cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_launched" title='vmx_cpudata::vmcs_launched' data-use='w' data-ref="vmx_cpudata::vmcs_launched" data-ref-filename="vmx_cpudata..vmcs_launched">vmcs_launched</a> = <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="889">889</th><td>	} <b>else</b> <b>if</b> (<a class="local col9 ref" href="#29vmcs_ci" title='vmcs_ci' data-ref="29vmcs_ci" data-ref-filename="29vmcs_ci">vmcs_ci</a> != <a class="macro" href="../../../arch/x86/include/cpu.h.html#404" title="x86_curcpu()" data-ref="_M/curcpu">curcpu</a>()) {</td></tr>
<tr><th id="890">890</th><td>		<i>/* This VMCS is active on a remote CPU. */</i></td></tr>
<tr><th id="891">891</th><td>		<a class="tu ref fn" href="#vmx_vmclear_remote" title='vmx_vmclear_remote' data-use='c' data-ref="vmx_vmclear_remote" data-ref-filename="vmx_vmclear_remote">vmx_vmclear_remote</a>(<a class="local col9 ref" href="#29vmcs_ci" title='vmcs_ci' data-ref="29vmcs_ci" data-ref-filename="29vmcs_ci">vmcs_ci</a>, <a class="local col8 ref" href="#28cpudata" title='cpudata' data-ref="28cpudata" data-ref-filename="28cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_pa" title='vmx_cpudata::vmcs_pa' data-use='r' data-ref="vmx_cpudata::vmcs_pa" data-ref-filename="vmx_cpudata..vmcs_pa">vmcs_pa</a>);</td></tr>
<tr><th id="892">892</th><td>		<a class="local col8 ref" href="#28cpudata" title='cpudata' data-ref="28cpudata" data-ref-filename="28cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_launched" title='vmx_cpudata::vmcs_launched' data-use='w' data-ref="vmx_cpudata::vmcs_launched" data-ref-filename="vmx_cpudata..vmcs_launched">vmcs_launched</a> = <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="893">893</th><td>	} <b>else</b> {</td></tr>
<tr><th id="894">894</th><td>		<i>/* This VMCS is active on curcpu, nothing to do. */</i></td></tr>
<tr><th id="895">895</th><td>	}</td></tr>
<tr><th id="896">896</th><td></td></tr>
<tr><th id="897">897</th><td>	<a class="tu ref fn" href="#vmx_vmptrld" title='vmx_vmptrld' data-use='c' data-ref="vmx_vmptrld" data-ref-filename="vmx_vmptrld">vmx_vmptrld</a>(&amp;<a class="local col8 ref" href="#28cpudata" title='cpudata' data-ref="28cpudata" data-ref-filename="28cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_pa" title='vmx_cpudata::vmcs_pa' data-use='a' data-ref="vmx_cpudata::vmcs_pa" data-ref-filename="vmx_cpudata..vmcs_pa">vmcs_pa</a>);</td></tr>
<tr><th id="898">898</th><td>}</td></tr>
<tr><th id="899">899</th><td></td></tr>
<tr><th id="900">900</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="901">901</th><td><dfn class="tu decl def fn" id="vmx_vmcs_leave" title='vmx_vmcs_leave' data-type='void vmx_vmcs_leave(struct nvmm_cpu * vcpu)' data-ref="vmx_vmcs_leave" data-ref-filename="vmx_vmcs_leave">vmx_vmcs_leave</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col1 decl" id="31vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="31vcpu" data-ref-filename="31vcpu">vcpu</dfn>)</td></tr>
<tr><th id="902">902</th><td>{</td></tr>
<tr><th id="903">903</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col2 decl" id="32cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="32cpudata" data-ref-filename="32cpudata">cpudata</dfn> = <a class="local col1 ref" href="#31vcpu" title='vcpu' data-ref="31vcpu" data-ref-filename="31vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="904">904</th><td></td></tr>
<tr><th id="905">905</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect(((kpreempt_disabled())) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;kpreempt_disabled()&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 905))" data-ref="_M/KASSERT">KASSERT</a>(<a class="ref fn" href="../../../sys/systm.h.html#kpreempt_disabled" title='kpreempt_disabled' data-ref="kpreempt_disabled" data-ref-filename="kpreempt_disabled">kpreempt_disabled</a>());</td></tr>
<tr><th id="906">906</th><td><u>#<span data-ppcond="906">ifdef</span> <span class="macro" data-ref="_M/DIAGNOSTIC">DIAGNOSTIC</span></u></td></tr>
<tr><th id="907">907</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect(((vmx_vmptrst() == cpudata-&gt;vmcs_pa)) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;vmx_vmptrst() == cpudata-&gt;vmcs_pa&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 907))" data-ref="_M/KASSERT">KASSERT</a>(<a class="tu ref fn" href="#vmx_vmptrst" title='vmx_vmptrst' data-use='c' data-ref="vmx_vmptrst" data-ref-filename="vmx_vmptrst">vmx_vmptrst</a>() == <a class="local col2 ref" href="#32cpudata" title='cpudata' data-ref="32cpudata" data-ref-filename="32cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_pa" title='vmx_cpudata::vmcs_pa' data-use='r' data-ref="vmx_cpudata::vmcs_pa" data-ref-filename="vmx_cpudata..vmcs_pa">vmcs_pa</a>);</td></tr>
<tr><th id="908">908</th><td><u>#<span data-ppcond="906">endif</span></u></td></tr>
<tr><th id="909">909</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect(((cpudata-&gt;vmcs_refcnt &gt; 0)) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;cpudata-&gt;vmcs_refcnt &gt; 0&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 909))" data-ref="_M/KASSERT">KASSERT</a>(<a class="local col2 ref" href="#32cpudata" title='cpudata' data-ref="32cpudata" data-ref-filename="32cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_refcnt" title='vmx_cpudata::vmcs_refcnt' data-use='r' data-ref="vmx_cpudata::vmcs_refcnt" data-ref-filename="vmx_cpudata..vmcs_refcnt">vmcs_refcnt</a> &gt; <var>0</var>);</td></tr>
<tr><th id="910">910</th><td>	<a class="local col2 ref" href="#32cpudata" title='cpudata' data-ref="32cpudata" data-ref-filename="32cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_refcnt" title='vmx_cpudata::vmcs_refcnt' data-use='w' data-ref="vmx_cpudata::vmcs_refcnt" data-ref-filename="vmx_cpudata..vmcs_refcnt">vmcs_refcnt</a>--;</td></tr>
<tr><th id="911">911</th><td></td></tr>
<tr><th id="912">912</th><td>	<b>if</b> (<a class="local col2 ref" href="#32cpudata" title='cpudata' data-ref="32cpudata" data-ref-filename="32cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_refcnt" title='vmx_cpudata::vmcs_refcnt' data-use='r' data-ref="vmx_cpudata::vmcs_refcnt" data-ref-filename="vmx_cpudata..vmcs_refcnt">vmcs_refcnt</a> &gt; <var>0</var>) {</td></tr>
<tr><th id="913">913</th><td>		<b>return</b>;</td></tr>
<tr><th id="914">914</th><td>	}</td></tr>
<tr><th id="915">915</th><td></td></tr>
<tr><th id="916">916</th><td>	<a class="local col2 ref" href="#32cpudata" title='cpudata' data-ref="32cpudata" data-ref-filename="32cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_ci" title='vmx_cpudata::vmcs_ci' data-use='w' data-ref="vmx_cpudata::vmcs_ci" data-ref-filename="vmx_cpudata..vmcs_ci">vmcs_ci</a> = <a class="macro" href="../../../arch/x86/include/cpu.h.html#404" title="x86_curcpu()" data-ref="_M/curcpu">curcpu</a>();</td></tr>
<tr><th id="917">917</th><td>	<a class="ref fn" href="../../../sys/systm.h.html#kpreempt_enable" title='kpreempt_enable' data-ref="kpreempt_enable" data-ref-filename="kpreempt_enable">kpreempt_enable</a>();</td></tr>
<tr><th id="918">918</th><td>}</td></tr>
<tr><th id="919">919</th><td></td></tr>
<tr><th id="920">920</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="921">921</th><td><dfn class="tu decl def fn" id="vmx_vmcs_destroy" title='vmx_vmcs_destroy' data-type='void vmx_vmcs_destroy(struct nvmm_cpu * vcpu)' data-ref="vmx_vmcs_destroy" data-ref-filename="vmx_vmcs_destroy">vmx_vmcs_destroy</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col3 decl" id="33vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="33vcpu" data-ref-filename="33vcpu">vcpu</dfn>)</td></tr>
<tr><th id="922">922</th><td>{</td></tr>
<tr><th id="923">923</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col4 decl" id="34cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="34cpudata" data-ref-filename="34cpudata">cpudata</dfn> = <a class="local col3 ref" href="#33vcpu" title='vcpu' data-ref="33vcpu" data-ref-filename="33vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="924">924</th><td></td></tr>
<tr><th id="925">925</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect(((kpreempt_disabled())) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;kpreempt_disabled()&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 925))" data-ref="_M/KASSERT">KASSERT</a>(<a class="ref fn" href="../../../sys/systm.h.html#kpreempt_disabled" title='kpreempt_disabled' data-ref="kpreempt_disabled" data-ref-filename="kpreempt_disabled">kpreempt_disabled</a>());</td></tr>
<tr><th id="926">926</th><td><u>#<span data-ppcond="926">ifdef</span> <span class="macro" data-ref="_M/DIAGNOSTIC">DIAGNOSTIC</span></u></td></tr>
<tr><th id="927">927</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect(((vmx_vmptrst() == cpudata-&gt;vmcs_pa)) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;vmx_vmptrst() == cpudata-&gt;vmcs_pa&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 927))" data-ref="_M/KASSERT">KASSERT</a>(<a class="tu ref fn" href="#vmx_vmptrst" title='vmx_vmptrst' data-use='c' data-ref="vmx_vmptrst" data-ref-filename="vmx_vmptrst">vmx_vmptrst</a>() == <a class="local col4 ref" href="#34cpudata" title='cpudata' data-ref="34cpudata" data-ref-filename="34cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_pa" title='vmx_cpudata::vmcs_pa' data-use='r' data-ref="vmx_cpudata::vmcs_pa" data-ref-filename="vmx_cpudata..vmcs_pa">vmcs_pa</a>);</td></tr>
<tr><th id="928">928</th><td><u>#<span data-ppcond="926">endif</span></u></td></tr>
<tr><th id="929">929</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect(((cpudata-&gt;vmcs_refcnt == 1)) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;cpudata-&gt;vmcs_refcnt == 1&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 929))" data-ref="_M/KASSERT">KASSERT</a>(<a class="local col4 ref" href="#34cpudata" title='cpudata' data-ref="34cpudata" data-ref-filename="34cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_refcnt" title='vmx_cpudata::vmcs_refcnt' data-use='r' data-ref="vmx_cpudata::vmcs_refcnt" data-ref-filename="vmx_cpudata..vmcs_refcnt">vmcs_refcnt</a> == <var>1</var>);</td></tr>
<tr><th id="930">930</th><td>	<a class="local col4 ref" href="#34cpudata" title='cpudata' data-ref="34cpudata" data-ref-filename="34cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_refcnt" title='vmx_cpudata::vmcs_refcnt' data-use='w' data-ref="vmx_cpudata::vmcs_refcnt" data-ref-filename="vmx_cpudata..vmcs_refcnt">vmcs_refcnt</a>--;</td></tr>
<tr><th id="931">931</th><td></td></tr>
<tr><th id="932">932</th><td>	<a class="tu ref fn" href="#vmx_vmclear" title='vmx_vmclear' data-use='c' data-ref="vmx_vmclear" data-ref-filename="vmx_vmclear">vmx_vmclear</a>(&amp;<a class="local col4 ref" href="#34cpudata" title='cpudata' data-ref="34cpudata" data-ref-filename="34cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_pa" title='vmx_cpudata::vmcs_pa' data-use='a' data-ref="vmx_cpudata::vmcs_pa" data-ref-filename="vmx_cpudata..vmcs_pa">vmcs_pa</a>);</td></tr>
<tr><th id="933">933</th><td>	<a class="ref fn" href="../../../sys/systm.h.html#kpreempt_enable" title='kpreempt_enable' data-ref="kpreempt_enable" data-ref-filename="kpreempt_enable">kpreempt_enable</a>();</td></tr>
<tr><th id="934">934</th><td>}</td></tr>
<tr><th id="935">935</th><td></td></tr>
<tr><th id="936">936</th><td><i  data-doc="vmx_event_waitexit_enable">/* -------------------------------------------------------------------------- */</i></td></tr>
<tr><th id="937">937</th><td></td></tr>
<tr><th id="938">938</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="939">939</th><td><dfn class="tu decl def fn" id="vmx_event_waitexit_enable" title='vmx_event_waitexit_enable' data-type='void vmx_event_waitexit_enable(struct nvmm_cpu * vcpu, _Bool nmi)' data-ref="vmx_event_waitexit_enable" data-ref-filename="vmx_event_waitexit_enable">vmx_event_waitexit_enable</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col5 decl" id="35vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="35vcpu" data-ref-filename="35vcpu">vcpu</dfn>, <a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="local col6 decl" id="36nmi" title='nmi' data-type='_Bool' data-ref="36nmi" data-ref-filename="36nmi">nmi</dfn>)</td></tr>
<tr><th id="940">940</th><td>{</td></tr>
<tr><th id="941">941</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col7 decl" id="37cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="37cpudata" data-ref-filename="37cpudata">cpudata</dfn> = <a class="local col5 ref" href="#35vcpu" title='vcpu' data-ref="35vcpu" data-ref-filename="35vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="942">942</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col8 decl" id="38ctls1" title='ctls1' data-type='uint64_t' data-ref="38ctls1" data-ref-filename="38ctls1">ctls1</dfn>;</td></tr>
<tr><th id="943">943</th><td></td></tr>
<tr><th id="944">944</th><td>	<a class="local col8 ref" href="#38ctls1" title='ctls1' data-ref="38ctls1" data-ref-filename="38ctls1">ctls1</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#306" title="0x00004002" data-ref="_M/VMCS_PROCBASED_CTLS">VMCS_PROCBASED_CTLS</a>);</td></tr>
<tr><th id="945">945</th><td></td></tr>
<tr><th id="946">946</th><td>	<b>if</b> (<a class="local col6 ref" href="#36nmi" title='nmi' data-ref="36nmi" data-ref-filename="36nmi">nmi</a>) {</td></tr>
<tr><th id="947">947</th><td>		<i>// XXX INT_STATE_NMI?</i></td></tr>
<tr><th id="948">948</th><td>		<a class="local col8 ref" href="#38ctls1" title='ctls1' data-ref="38ctls1" data-ref-filename="38ctls1">ctls1</a> |= <a class="macro" href="#319" title="(((uintmax_t)(22) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((22) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/PROC_CTLS_NMI_WINDOW_EXITING">PROC_CTLS_NMI_WINDOW_EXITING</a>;</td></tr>
<tr><th id="949">949</th><td>		<a class="local col7 ref" href="#37cpudata" title='cpudata' data-ref="37cpudata" data-ref-filename="37cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::nmi_window_exit" title='vmx_cpudata::nmi_window_exit' data-use='w' data-ref="vmx_cpudata::nmi_window_exit" data-ref-filename="vmx_cpudata..nmi_window_exit">nmi_window_exit</a> = <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="950">950</th><td>	} <b>else</b> {</td></tr>
<tr><th id="951">951</th><td>		<a class="local col8 ref" href="#38ctls1" title='ctls1' data-ref="38ctls1" data-ref-filename="38ctls1">ctls1</a> |= <a class="macro" href="#307" title="(((uintmax_t)(2) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((2) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/PROC_CTLS_INT_WINDOW_EXITING">PROC_CTLS_INT_WINDOW_EXITING</a>;</td></tr>
<tr><th id="952">952</th><td>		<a class="local col7 ref" href="#37cpudata" title='cpudata' data-ref="37cpudata" data-ref-filename="37cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::int_window_exit" title='vmx_cpudata::int_window_exit' data-use='w' data-ref="vmx_cpudata::int_window_exit" data-ref-filename="vmx_cpudata..int_window_exit">int_window_exit</a> = <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="953">953</th><td>	}</td></tr>
<tr><th id="954">954</th><td></td></tr>
<tr><th id="955">955</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#306" title="0x00004002" data-ref="_M/VMCS_PROCBASED_CTLS">VMCS_PROCBASED_CTLS</a>, <a class="local col8 ref" href="#38ctls1" title='ctls1' data-ref="38ctls1" data-ref-filename="38ctls1">ctls1</a>);</td></tr>
<tr><th id="956">956</th><td>}</td></tr>
<tr><th id="957">957</th><td></td></tr>
<tr><th id="958">958</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="959">959</th><td><dfn class="tu decl def fn" id="vmx_event_waitexit_disable" title='vmx_event_waitexit_disable' data-type='void vmx_event_waitexit_disable(struct nvmm_cpu * vcpu, _Bool nmi)' data-ref="vmx_event_waitexit_disable" data-ref-filename="vmx_event_waitexit_disable">vmx_event_waitexit_disable</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col9 decl" id="39vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="39vcpu" data-ref-filename="39vcpu">vcpu</dfn>, <a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="local col0 decl" id="40nmi" title='nmi' data-type='_Bool' data-ref="40nmi" data-ref-filename="40nmi">nmi</dfn>)</td></tr>
<tr><th id="960">960</th><td>{</td></tr>
<tr><th id="961">961</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col1 decl" id="41cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="41cpudata" data-ref-filename="41cpudata">cpudata</dfn> = <a class="local col9 ref" href="#39vcpu" title='vcpu' data-ref="39vcpu" data-ref-filename="39vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="962">962</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="42ctls1" title='ctls1' data-type='uint64_t' data-ref="42ctls1" data-ref-filename="42ctls1">ctls1</dfn>;</td></tr>
<tr><th id="963">963</th><td></td></tr>
<tr><th id="964">964</th><td>	<a class="local col2 ref" href="#42ctls1" title='ctls1' data-ref="42ctls1" data-ref-filename="42ctls1">ctls1</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#306" title="0x00004002" data-ref="_M/VMCS_PROCBASED_CTLS">VMCS_PROCBASED_CTLS</a>);</td></tr>
<tr><th id="965">965</th><td></td></tr>
<tr><th id="966">966</th><td>	<b>if</b> (<a class="local col0 ref" href="#40nmi" title='nmi' data-ref="40nmi" data-ref-filename="40nmi">nmi</a>) {</td></tr>
<tr><th id="967">967</th><td>		<a class="local col2 ref" href="#42ctls1" title='ctls1' data-ref="42ctls1" data-ref-filename="42ctls1">ctls1</a> &amp;= ~<a class="macro" href="#319" title="(((uintmax_t)(22) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((22) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/PROC_CTLS_NMI_WINDOW_EXITING">PROC_CTLS_NMI_WINDOW_EXITING</a>;</td></tr>
<tr><th id="968">968</th><td>		<a class="local col1 ref" href="#41cpudata" title='cpudata' data-ref="41cpudata" data-ref-filename="41cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::nmi_window_exit" title='vmx_cpudata::nmi_window_exit' data-use='w' data-ref="vmx_cpudata::nmi_window_exit" data-ref-filename="vmx_cpudata..nmi_window_exit">nmi_window_exit</a> = <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="969">969</th><td>	} <b>else</b> {</td></tr>
<tr><th id="970">970</th><td>		<a class="local col2 ref" href="#42ctls1" title='ctls1' data-ref="42ctls1" data-ref-filename="42ctls1">ctls1</a> &amp;= ~<a class="macro" href="#307" title="(((uintmax_t)(2) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((2) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/PROC_CTLS_INT_WINDOW_EXITING">PROC_CTLS_INT_WINDOW_EXITING</a>;</td></tr>
<tr><th id="971">971</th><td>		<a class="local col1 ref" href="#41cpudata" title='cpudata' data-ref="41cpudata" data-ref-filename="41cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::int_window_exit" title='vmx_cpudata::int_window_exit' data-use='w' data-ref="vmx_cpudata::int_window_exit" data-ref-filename="vmx_cpudata..int_window_exit">int_window_exit</a> = <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="972">972</th><td>	}</td></tr>
<tr><th id="973">973</th><td></td></tr>
<tr><th id="974">974</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#306" title="0x00004002" data-ref="_M/VMCS_PROCBASED_CTLS">VMCS_PROCBASED_CTLS</a>, <a class="local col2 ref" href="#42ctls1" title='ctls1' data-ref="42ctls1" data-ref-filename="42ctls1">ctls1</a>);</td></tr>
<tr><th id="975">975</th><td>}</td></tr>
<tr><th id="976">976</th><td></td></tr>
<tr><th id="977">977</th><td><em>static</em> <b>inline</b> <em>int</em></td></tr>
<tr><th id="978">978</th><td><dfn class="tu decl def fn" id="vmx_event_has_error" title='vmx_event_has_error' data-type='int vmx_event_has_error(uint64_t vector)' data-ref="vmx_event_has_error" data-ref-filename="vmx_event_has_error">vmx_event_has_error</dfn>(<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col3 decl" id="43vector" title='vector' data-type='uint64_t' data-ref="43vector" data-ref-filename="43vector">vector</dfn>)</td></tr>
<tr><th id="979">979</th><td>{</td></tr>
<tr><th id="980">980</th><td>	<b>switch</b> (<a class="local col3 ref" href="#43vector" title='vector' data-ref="43vector" data-ref-filename="43vector">vector</a>) {</td></tr>
<tr><th id="981">981</th><td>	<b>case</b> <var>8</var>:		<i>/* #DF */</i></td></tr>
<tr><th id="982">982</th><td>	<b>case</b> <var>10</var>:	<i>/* #TS */</i></td></tr>
<tr><th id="983">983</th><td>	<b>case</b> <var>11</var>:	<i>/* #NP */</i></td></tr>
<tr><th id="984">984</th><td>	<b>case</b> <var>12</var>:	<i>/* #SS */</i></td></tr>
<tr><th id="985">985</th><td>	<b>case</b> <var>13</var>:	<i>/* #GP */</i></td></tr>
<tr><th id="986">986</th><td>	<b>case</b> <var>14</var>:	<i>/* #PF */</i></td></tr>
<tr><th id="987">987</th><td>	<b>case</b> <var>17</var>:	<i>/* #AC */</i></td></tr>
<tr><th id="988">988</th><td>	<b>case</b> <var>30</var>:	<i>/* #SX */</i></td></tr>
<tr><th id="989">989</th><td>		<b>return</b> <var>1</var>;</td></tr>
<tr><th id="990">990</th><td>	<b>default</b>:</td></tr>
<tr><th id="991">991</th><td>		<b>return</b> <var>0</var>;</td></tr>
<tr><th id="992">992</th><td>	}</td></tr>
<tr><th id="993">993</th><td>}</td></tr>
<tr><th id="994">994</th><td></td></tr>
<tr><th id="995">995</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="996">996</th><td><dfn class="tu decl def fn" id="vmx_vcpu_inject" title='vmx_vcpu_inject' data-type='int vmx_vcpu_inject(struct nvmm_cpu * vcpu)' data-ref="vmx_vcpu_inject" data-ref-filename="vmx_vcpu_inject">vmx_vcpu_inject</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col4 decl" id="44vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="44vcpu" data-ref-filename="44vcpu">vcpu</dfn>)</td></tr>
<tr><th id="997">997</th><td>{</td></tr>
<tr><th id="998">998</th><td>	<b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_comm_page" title='nvmm_comm_page' data-ref="nvmm_comm_page" data-ref-filename="nvmm_comm_page">nvmm_comm_page</a> *<dfn class="local col5 decl" id="45comm" title='comm' data-type='struct nvmm_comm_page *' data-ref="45comm" data-ref-filename="45comm">comm</dfn> = <a class="local col4 ref" href="#44vcpu" title='vcpu' data-ref="44vcpu" data-ref-filename="44vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>;</td></tr>
<tr><th id="999">999</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col6 decl" id="46cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="46cpudata" data-ref-filename="46cpudata">cpudata</dfn> = <a class="local col4 ref" href="#44vcpu" title='vcpu' data-ref="44vcpu" data-ref-filename="44vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1000">1000</th><td>	<em>int</em> <dfn class="local col7 decl" id="47type" title='type' data-type='int' data-ref="47type" data-ref-filename="47type">type</dfn> = <var>0</var>, <dfn class="local col8 decl" id="48err" title='err' data-type='int' data-ref="48err" data-ref-filename="48err">err</dfn> = <var>0</var>, <dfn class="local col9 decl" id="49ret" title='ret' data-type='int' data-ref="49ret" data-ref-filename="49ret">ret</dfn> = <a class="macro" href="../../../sys/errno.h.html#64" title="22" data-ref="_M/EINVAL">EINVAL</a>;</td></tr>
<tr><th id="1001">1001</th><td>	<b>enum</b> <a class="type" href="../nvmm.h.html#nvmm_event_type" title='nvmm_event_type' data-ref="nvmm_event_type" data-ref-filename="nvmm_event_type">nvmm_event_type</a> <dfn class="local col0 decl" id="50evtype" title='evtype' data-type='enum nvmm_event_type' data-ref="50evtype" data-ref-filename="50evtype">evtype</dfn>;</td></tr>
<tr><th id="1002">1002</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col1 decl" id="51info" title='info' data-type='uint64_t' data-ref="51info" data-ref-filename="51info">info</dfn>, <dfn class="local col2 decl" id="52vector" title='vector' data-type='uint64_t' data-ref="52vector" data-ref-filename="52vector">vector</dfn>, <dfn class="local col3 decl" id="53error" title='error' data-type='uint64_t' data-ref="53error" data-ref-filename="53error">error</dfn>;</td></tr>
<tr><th id="1003">1003</th><td></td></tr>
<tr><th id="1004">1004</th><td>	<a class="local col0 ref" href="#50evtype" title='evtype' data-ref="50evtype" data-ref-filename="50evtype">evtype</a> = <a class="local col5 ref" href="#45comm" title='comm' data-ref="45comm" data-ref-filename="45comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::event" title='nvmm_comm_page::event' data-ref="nvmm_comm_page::event" data-ref-filename="nvmm_comm_page..event">event</a>.<a class="ref field" href="../nvmm.h.html#nvmm_event::type" title='nvmm_event::type' data-ref="nvmm_event::type" data-ref-filename="nvmm_event..type">type</a>;</td></tr>
<tr><th id="1005">1005</th><td>	<a class="local col2 ref" href="#52vector" title='vector' data-ref="52vector" data-ref-filename="52vector">vector</a> = <a class="local col5 ref" href="#45comm" title='comm' data-ref="45comm" data-ref-filename="45comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::event" title='nvmm_comm_page::event' data-ref="nvmm_comm_page::event" data-ref-filename="nvmm_comm_page..event">event</a>.<a class="ref field" href="../nvmm.h.html#nvmm_event::vector" title='nvmm_event::vector' data-ref="nvmm_event::vector" data-ref-filename="nvmm_event..vector">vector</a>;</td></tr>
<tr><th id="1006">1006</th><td>	<a class="local col3 ref" href="#53error" title='error' data-ref="53error" data-ref-filename="53error">error</a> = <a class="local col5 ref" href="#45comm" title='comm' data-ref="45comm" data-ref-filename="45comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::event" title='nvmm_comm_page::event' data-ref="nvmm_comm_page::event" data-ref-filename="nvmm_comm_page..event">event</a>.<a class="ref field" href="../nvmm.h.html#nvmm_event::u" title='nvmm_event::u' data-ref="nvmm_event::u" data-ref-filename="nvmm_event..u">u</a>.<a class="ref field" href="../nvmm.h.html#nvmm_event::(anonymous)::error" title='nvmm_event::(anonymous union)::error' data-ref="nvmm_event::(anonymous)::error" data-ref-filename="nvmm_event..(anonymous)..error">error</a>;</td></tr>
<tr><th id="1007">1007</th><td>	<a class="macro" href="../../../sys/cdefs.h.html#453" title="__asm volatile(&quot;&quot;:::&quot;memory&quot;)" data-ref="_M/__insn_barrier">__insn_barrier</a>();</td></tr>
<tr><th id="1008">1008</th><td></td></tr>
<tr><th id="1009">1009</th><td>	<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#488" title="__builtin_expect((vector &gt;= 256) != 0, 0)" data-ref="_M/__predict_false">__predict_false</a>(<a class="local col2 ref" href="#52vector" title='vector' data-ref="52vector" data-ref-filename="52vector">vector</a> &gt;= <var>256</var>)) {</td></tr>
<tr><th id="1010">1010</th><td>		<b>return</b> <a class="macro" href="../../../sys/errno.h.html#64" title="22" data-ref="_M/EINVAL">EINVAL</a>;</td></tr>
<tr><th id="1011">1011</th><td>	}</td></tr>
<tr><th id="1012">1012</th><td></td></tr>
<tr><th id="1013">1013</th><td>	<a class="tu ref fn" href="#vmx_vmcs_enter" title='vmx_vmcs_enter' data-use='c' data-ref="vmx_vmcs_enter" data-ref-filename="vmx_vmcs_enter">vmx_vmcs_enter</a>(<a class="local col4 ref" href="#44vcpu" title='vcpu' data-ref="44vcpu" data-ref-filename="44vcpu">vcpu</a>);</td></tr>
<tr><th id="1014">1014</th><td></td></tr>
<tr><th id="1015">1015</th><td>	<b>switch</b> (<a class="local col0 ref" href="#50evtype" title='evtype' data-ref="50evtype" data-ref-filename="50evtype">evtype</a>) {</td></tr>
<tr><th id="1016">1016</th><td>	<b>case</b> <a class="enum" href="../nvmm.h.html#NVMM_EVENT_INTERRUPT_HW" title='NVMM_EVENT_INTERRUPT_HW' data-ref="NVMM_EVENT_INTERRUPT_HW" data-ref-filename="NVMM_EVENT_INTERRUPT_HW">NVMM_EVENT_INTERRUPT_HW</a>:</td></tr>
<tr><th id="1017">1017</th><td>		<a class="local col7 ref" href="#47type" title='type' data-ref="47type" data-ref-filename="47type">type</a> = <a class="macro" href="#360" title="0" data-ref="_M/INTR_TYPE_EXT_INT">INTR_TYPE_EXT_INT</a>;</td></tr>
<tr><th id="1018">1018</th><td>		<b>if</b> (<a class="local col2 ref" href="#52vector" title='vector' data-ref="52vector" data-ref-filename="52vector">vector</a> == <var>2</var>) {</td></tr>
<tr><th id="1019">1019</th><td>			<a class="local col7 ref" href="#47type" title='type' data-ref="47type" data-ref-filename="47type">type</a> = <a class="macro" href="#361" title="2" data-ref="_M/INTR_TYPE_NMI">INTR_TYPE_NMI</a>;</td></tr>
<tr><th id="1020">1020</th><td>			<a class="tu ref fn" href="#vmx_event_waitexit_enable" title='vmx_event_waitexit_enable' data-use='c' data-ref="vmx_event_waitexit_enable" data-ref-filename="vmx_event_waitexit_enable">vmx_event_waitexit_enable</a>(<a class="local col4 ref" href="#44vcpu" title='vcpu' data-ref="44vcpu" data-ref-filename="44vcpu">vcpu</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="1021">1021</th><td>		}</td></tr>
<tr><th id="1022">1022</th><td>		<a class="local col8 ref" href="#48err" title='err' data-ref="48err" data-ref-filename="48err">err</a> = <var>0</var>;</td></tr>
<tr><th id="1023">1023</th><td>		<b>break</b>;</td></tr>
<tr><th id="1024">1024</th><td>	<b>case</b> <a class="enum" href="../nvmm.h.html#NVMM_EVENT_EXCEPTION" title='NVMM_EVENT_EXCEPTION' data-ref="NVMM_EVENT_EXCEPTION" data-ref-filename="NVMM_EVENT_EXCEPTION">NVMM_EVENT_EXCEPTION</a>:</td></tr>
<tr><th id="1025">1025</th><td>		<b>if</b> (<a class="local col2 ref" href="#52vector" title='vector' data-ref="52vector" data-ref-filename="52vector">vector</a> == <var>2</var> || <a class="local col2 ref" href="#52vector" title='vector' data-ref="52vector" data-ref-filename="52vector">vector</a> &gt;= <var>32</var>)</td></tr>
<tr><th id="1026">1026</th><td>			<b>goto</b> <a class="lbl" href="#54out" data-ref="54out" data-ref-filename="54out">out</a>;</td></tr>
<tr><th id="1027">1027</th><td>		<b>if</b> (<a class="local col2 ref" href="#52vector" title='vector' data-ref="52vector" data-ref-filename="52vector">vector</a> == <var>3</var> || <a class="local col2 ref" href="#52vector" title='vector' data-ref="52vector" data-ref-filename="52vector">vector</a> == <var>0</var>)</td></tr>
<tr><th id="1028">1028</th><td>			<b>goto</b> <a class="lbl" href="#54out" data-ref="54out" data-ref-filename="54out">out</a>;</td></tr>
<tr><th id="1029">1029</th><td>		<a class="local col7 ref" href="#47type" title='type' data-ref="47type" data-ref-filename="47type">type</a> = <a class="macro" href="#362" title="3" data-ref="_M/INTR_TYPE_HW_EXC">INTR_TYPE_HW_EXC</a>;</td></tr>
<tr><th id="1030">1030</th><td>		<a class="local col8 ref" href="#48err" title='err' data-ref="48err" data-ref-filename="48err">err</a> = <a class="tu ref fn" href="#vmx_event_has_error" title='vmx_event_has_error' data-use='c' data-ref="vmx_event_has_error" data-ref-filename="vmx_event_has_error">vmx_event_has_error</a>(<a class="local col2 ref" href="#52vector" title='vector' data-ref="52vector" data-ref-filename="52vector">vector</a>);</td></tr>
<tr><th id="1031">1031</th><td>		<b>break</b>;</td></tr>
<tr><th id="1032">1032</th><td>	<b>default</b>:</td></tr>
<tr><th id="1033">1033</th><td>		<b>goto</b> <a class="lbl" href="#54out" data-ref="54out" data-ref-filename="54out">out</a>;</td></tr>
<tr><th id="1034">1034</th><td>	}</td></tr>
<tr><th id="1035">1035</th><td></td></tr>
<tr><th id="1036">1036</th><td>	<a class="local col1 ref" href="#51info" title='info' data-ref="51info" data-ref-filename="51info">info</a> =</td></tr>
<tr><th id="1037">1037</th><td>	    <a class="macro" href="../../../sys/cdefs.h.html#607" title="((vector) * (((((((((uintmax_t)((( ((7))&gt;((0)))?((7)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((7))&gt;((0)))?((7)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((7))&lt;=((0)))?((7)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((7))&lt;=((0)))?((7)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((7))&gt;((0)))?((7)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((7))&gt;((0)))?((7)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((7))&lt;=((0)))?((7)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((7))&lt;=((0)))?((7)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((7))&gt;((0)))?((7)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((7))&gt;((0)))?((7)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((7))&lt;=((0)))?((7)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((7))&lt;=((0)))?((7)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="local col2 ref" href="#52vector" title='vector' data-ref="52vector" data-ref-filename="52vector">vector</a>, <a class="macro" href="#358" title="(((((uintmax_t)((( ((7))&gt;((0)))?((7)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((7))&gt;((0)))?((7)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((7))&lt;=((0)))?((7)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((7))&lt;=((0)))?((7)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/INTR_INFO_VECTOR">INTR_INFO_VECTOR</a>) |</td></tr>
<tr><th id="1038">1038</th><td>	    <a class="macro" href="../../../sys/cdefs.h.html#607" title="((type) * (((((((((uintmax_t)((( ((10))&gt;((8)))?((10)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&gt;((8)))?((10)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((10))&lt;=((8)))?((10)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&lt;=((8)))?((10)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((10))&gt;((8)))?((10)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&gt;((8)))?((10)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((10))&lt;=((8)))?((10)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&lt;=((8)))?((10)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((10))&gt;((8)))?((10)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&gt;((8)))?((10)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((10))&lt;=((8)))?((10)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&lt;=((8)))?((10)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="local col7 ref" href="#47type" title='type' data-ref="47type" data-ref-filename="47type">type</a>, <a class="macro" href="#359" title="(((((uintmax_t)((( ((10))&gt;((8)))?((10)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&gt;((8)))?((10)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((10))&lt;=((8)))?((10)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&lt;=((8)))?((10)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/INTR_INFO_TYPE">INTR_INFO_TYPE</a>) |</td></tr>
<tr><th id="1039">1039</th><td>	    <a class="macro" href="../../../sys/cdefs.h.html#607" title="((err) * (((((((uintmax_t)(11) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((11) &amp; (8 * sizeof(uintmax_t) - 1))))) - 1) &amp; ((((uintmax_t)(11) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((11) &amp; (8 * sizeof(uintmax_t) - 1)))))) ^ ((((uintmax_t)(11) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((11) &amp; (8 * sizeof(uintmax_t) - 1)))))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="local col8 ref" href="#48err" title='err' data-ref="48err" data-ref-filename="48err">err</a>, <a class="macro" href="#367" title="(((uintmax_t)(11) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((11) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/INTR_INFO_ERROR">INTR_INFO_ERROR</a>) |</td></tr>
<tr><th id="1040">1040</th><td>	    <a class="macro" href="../../../sys/cdefs.h.html#607" title="((1) * (((((((uintmax_t)(31) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((31) &amp; (8 * sizeof(uintmax_t) - 1))))) - 1) &amp; ((((uintmax_t)(31) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((31) &amp; (8 * sizeof(uintmax_t) - 1)))))) ^ ((((uintmax_t)(31) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((31) &amp; (8 * sizeof(uintmax_t) - 1)))))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<var>1</var>, <a class="macro" href="#368" title="(((uintmax_t)(31) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((31) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/INTR_INFO_VALID">INTR_INFO_VALID</a>);</td></tr>
<tr><th id="1041">1041</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#357" title="0x00004016" data-ref="_M/VMCS_ENTRY_INTR_INFO">VMCS_ENTRY_INTR_INFO</a>, <a class="local col1 ref" href="#51info" title='info' data-ref="51info" data-ref-filename="51info">info</a>);</td></tr>
<tr><th id="1042">1042</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#369" title="0x00004018" data-ref="_M/VMCS_ENTRY_EXCEPTION_ERROR">VMCS_ENTRY_EXCEPTION_ERROR</a>, <a class="local col3 ref" href="#53error" title='error' data-ref="53error" data-ref-filename="53error">error</a>);</td></tr>
<tr><th id="1043">1043</th><td></td></tr>
<tr><th id="1044">1044</th><td>	<a class="local col6 ref" href="#46cpudata" title='cpudata' data-ref="46cpudata" data-ref-filename="46cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::evt_pending" title='vmx_cpudata::evt_pending' data-use='w' data-ref="vmx_cpudata::evt_pending" data-ref-filename="vmx_cpudata..evt_pending">evt_pending</a> = <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="1045">1045</th><td>	<a class="local col9 ref" href="#49ret" title='ret' data-ref="49ret" data-ref-filename="49ret">ret</a> = <var>0</var>;</td></tr>
<tr><th id="1046">1046</th><td></td></tr>
<tr><th id="1047">1047</th><td><dfn class="lbl" id="54out" data-ref="54out" data-ref-filename="54out">out</dfn>:</td></tr>
<tr><th id="1048">1048</th><td>	<a class="tu ref fn" href="#vmx_vmcs_leave" title='vmx_vmcs_leave' data-use='c' data-ref="vmx_vmcs_leave" data-ref-filename="vmx_vmcs_leave">vmx_vmcs_leave</a>(<a class="local col4 ref" href="#44vcpu" title='vcpu' data-ref="44vcpu" data-ref-filename="44vcpu">vcpu</a>);</td></tr>
<tr><th id="1049">1049</th><td>	<b>return</b> <a class="local col9 ref" href="#49ret" title='ret' data-ref="49ret" data-ref-filename="49ret">ret</a>;</td></tr>
<tr><th id="1050">1050</th><td>}</td></tr>
<tr><th id="1051">1051</th><td></td></tr>
<tr><th id="1052">1052</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1053">1053</th><td><dfn class="tu decl def fn" id="vmx_inject_ud" title='vmx_inject_ud' data-type='void vmx_inject_ud(struct nvmm_cpu * vcpu)' data-ref="vmx_inject_ud" data-ref-filename="vmx_inject_ud">vmx_inject_ud</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col5 decl" id="55vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="55vcpu" data-ref-filename="55vcpu">vcpu</dfn>)</td></tr>
<tr><th id="1054">1054</th><td>{</td></tr>
<tr><th id="1055">1055</th><td>	<b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_comm_page" title='nvmm_comm_page' data-ref="nvmm_comm_page" data-ref-filename="nvmm_comm_page">nvmm_comm_page</a> *<dfn class="local col6 decl" id="56comm" title='comm' data-type='struct nvmm_comm_page *' data-ref="56comm" data-ref-filename="56comm">comm</dfn> = <a class="local col5 ref" href="#55vcpu" title='vcpu' data-ref="55vcpu" data-ref-filename="55vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>;</td></tr>
<tr><th id="1056">1056</th><td>	<em>int</em> <dfn class="local col7 decl" id="57ret" title='ret' data-type='int' data-ref="57ret" data-ref-filename="57ret">ret</dfn> <a class="macro" href="../../../sys/cdefs.h.html#283" title="" data-ref="_M/__diagused">__diagused</a>;</td></tr>
<tr><th id="1057">1057</th><td></td></tr>
<tr><th id="1058">1058</th><td>	<a class="local col6 ref" href="#56comm" title='comm' data-ref="56comm" data-ref-filename="56comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::event" title='nvmm_comm_page::event' data-ref="nvmm_comm_page::event" data-ref-filename="nvmm_comm_page..event">event</a>.<a class="ref field" href="../nvmm.h.html#nvmm_event::type" title='nvmm_event::type' data-ref="nvmm_event::type" data-ref-filename="nvmm_event..type">type</a> = <a class="enum" href="../nvmm.h.html#NVMM_EVENT_EXCEPTION" title='NVMM_EVENT_EXCEPTION' data-ref="NVMM_EVENT_EXCEPTION" data-ref-filename="NVMM_EVENT_EXCEPTION">NVMM_EVENT_EXCEPTION</a>;</td></tr>
<tr><th id="1059">1059</th><td>	<a class="local col6 ref" href="#56comm" title='comm' data-ref="56comm" data-ref-filename="56comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::event" title='nvmm_comm_page::event' data-ref="nvmm_comm_page::event" data-ref-filename="nvmm_comm_page..event">event</a>.<a class="ref field" href="../nvmm.h.html#nvmm_event::vector" title='nvmm_event::vector' data-ref="nvmm_event::vector" data-ref-filename="nvmm_event..vector">vector</a> = <var>6</var>;</td></tr>
<tr><th id="1060">1060</th><td>	<a class="local col6 ref" href="#56comm" title='comm' data-ref="56comm" data-ref-filename="56comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::event" title='nvmm_comm_page::event' data-ref="nvmm_comm_page::event" data-ref-filename="nvmm_comm_page..event">event</a>.<a class="ref field" href="../nvmm.h.html#nvmm_event::u" title='nvmm_event::u' data-ref="nvmm_event::u" data-ref-filename="nvmm_event..u">u</a>.<a class="ref field" href="../nvmm.h.html#nvmm_event::(anonymous)::error" title='nvmm_event::(anonymous union)::error' data-ref="nvmm_event::(anonymous)::error" data-ref-filename="nvmm_event..(anonymous)..error">error</a> = <var>0</var>;</td></tr>
<tr><th id="1061">1061</th><td></td></tr>
<tr><th id="1062">1062</th><td>	<a class="local col7 ref" href="#57ret" title='ret' data-ref="57ret" data-ref-filename="57ret">ret</a> = <a class="tu ref fn" href="#vmx_vcpu_inject" title='vmx_vcpu_inject' data-use='c' data-ref="vmx_vcpu_inject" data-ref-filename="vmx_vcpu_inject">vmx_vcpu_inject</a>(<a class="local col5 ref" href="#55vcpu" title='vcpu' data-ref="55vcpu" data-ref-filename="55vcpu">vcpu</a>);</td></tr>
<tr><th id="1063">1063</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect(((ret == 0)) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;ret == 0&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 1063))" data-ref="_M/KASSERT">KASSERT</a>(<a class="local col7 ref" href="#57ret" title='ret' data-ref="57ret" data-ref-filename="57ret">ret</a> == <var>0</var>);</td></tr>
<tr><th id="1064">1064</th><td>}</td></tr>
<tr><th id="1065">1065</th><td></td></tr>
<tr><th id="1066">1066</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1067">1067</th><td><dfn class="tu decl def fn" id="vmx_inject_gp" title='vmx_inject_gp' data-type='void vmx_inject_gp(struct nvmm_cpu * vcpu)' data-ref="vmx_inject_gp" data-ref-filename="vmx_inject_gp">vmx_inject_gp</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col8 decl" id="58vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="58vcpu" data-ref-filename="58vcpu">vcpu</dfn>)</td></tr>
<tr><th id="1068">1068</th><td>{</td></tr>
<tr><th id="1069">1069</th><td>	<b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_comm_page" title='nvmm_comm_page' data-ref="nvmm_comm_page" data-ref-filename="nvmm_comm_page">nvmm_comm_page</a> *<dfn class="local col9 decl" id="59comm" title='comm' data-type='struct nvmm_comm_page *' data-ref="59comm" data-ref-filename="59comm">comm</dfn> = <a class="local col8 ref" href="#58vcpu" title='vcpu' data-ref="58vcpu" data-ref-filename="58vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>;</td></tr>
<tr><th id="1070">1070</th><td>	<em>int</em> <dfn class="local col0 decl" id="60ret" title='ret' data-type='int' data-ref="60ret" data-ref-filename="60ret">ret</dfn> <a class="macro" href="../../../sys/cdefs.h.html#283" title="" data-ref="_M/__diagused">__diagused</a>;</td></tr>
<tr><th id="1071">1071</th><td></td></tr>
<tr><th id="1072">1072</th><td>	<a class="local col9 ref" href="#59comm" title='comm' data-ref="59comm" data-ref-filename="59comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::event" title='nvmm_comm_page::event' data-ref="nvmm_comm_page::event" data-ref-filename="nvmm_comm_page..event">event</a>.<a class="ref field" href="../nvmm.h.html#nvmm_event::type" title='nvmm_event::type' data-ref="nvmm_event::type" data-ref-filename="nvmm_event..type">type</a> = <a class="enum" href="../nvmm.h.html#NVMM_EVENT_EXCEPTION" title='NVMM_EVENT_EXCEPTION' data-ref="NVMM_EVENT_EXCEPTION" data-ref-filename="NVMM_EVENT_EXCEPTION">NVMM_EVENT_EXCEPTION</a>;</td></tr>
<tr><th id="1073">1073</th><td>	<a class="local col9 ref" href="#59comm" title='comm' data-ref="59comm" data-ref-filename="59comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::event" title='nvmm_comm_page::event' data-ref="nvmm_comm_page::event" data-ref-filename="nvmm_comm_page..event">event</a>.<a class="ref field" href="../nvmm.h.html#nvmm_event::vector" title='nvmm_event::vector' data-ref="nvmm_event::vector" data-ref-filename="nvmm_event..vector">vector</a> = <var>13</var>;</td></tr>
<tr><th id="1074">1074</th><td>	<a class="local col9 ref" href="#59comm" title='comm' data-ref="59comm" data-ref-filename="59comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::event" title='nvmm_comm_page::event' data-ref="nvmm_comm_page::event" data-ref-filename="nvmm_comm_page..event">event</a>.<a class="ref field" href="../nvmm.h.html#nvmm_event::u" title='nvmm_event::u' data-ref="nvmm_event::u" data-ref-filename="nvmm_event..u">u</a>.<a class="ref field" href="../nvmm.h.html#nvmm_event::(anonymous)::error" title='nvmm_event::(anonymous union)::error' data-ref="nvmm_event::(anonymous)::error" data-ref-filename="nvmm_event..(anonymous)..error">error</a> = <var>0</var>;</td></tr>
<tr><th id="1075">1075</th><td></td></tr>
<tr><th id="1076">1076</th><td>	<a class="local col0 ref" href="#60ret" title='ret' data-ref="60ret" data-ref-filename="60ret">ret</a> = <a class="tu ref fn" href="#vmx_vcpu_inject" title='vmx_vcpu_inject' data-use='c' data-ref="vmx_vcpu_inject" data-ref-filename="vmx_vcpu_inject">vmx_vcpu_inject</a>(<a class="local col8 ref" href="#58vcpu" title='vcpu' data-ref="58vcpu" data-ref-filename="58vcpu">vcpu</a>);</td></tr>
<tr><th id="1077">1077</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect(((ret == 0)) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;ret == 0&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 1077))" data-ref="_M/KASSERT">KASSERT</a>(<a class="local col0 ref" href="#60ret" title='ret' data-ref="60ret" data-ref-filename="60ret">ret</a> == <var>0</var>);</td></tr>
<tr><th id="1078">1078</th><td>}</td></tr>
<tr><th id="1079">1079</th><td></td></tr>
<tr><th id="1080">1080</th><td><em>static</em> <b>inline</b> <em>int</em></td></tr>
<tr><th id="1081">1081</th><td><dfn class="tu decl def fn" id="vmx_vcpu_event_commit" title='vmx_vcpu_event_commit' data-type='int vmx_vcpu_event_commit(struct nvmm_cpu * vcpu)' data-ref="vmx_vcpu_event_commit" data-ref-filename="vmx_vcpu_event_commit">vmx_vcpu_event_commit</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col1 decl" id="61vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="61vcpu" data-ref-filename="61vcpu">vcpu</dfn>)</td></tr>
<tr><th id="1082">1082</th><td>{</td></tr>
<tr><th id="1083">1083</th><td>	<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#487" title="__builtin_expect((!vcpu-&gt;comm-&gt;event_commit) != 0, 1)" data-ref="_M/__predict_true">__predict_true</a>(!<a class="local col1 ref" href="#61vcpu" title='vcpu' data-ref="61vcpu" data-ref-filename="61vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::event_commit" title='nvmm_comm_page::event_commit' data-ref="nvmm_comm_page::event_commit" data-ref-filename="nvmm_comm_page..event_commit">event_commit</a>)) {</td></tr>
<tr><th id="1084">1084</th><td>		<b>return</b> <var>0</var>;</td></tr>
<tr><th id="1085">1085</th><td>	}</td></tr>
<tr><th id="1086">1086</th><td>	<a class="local col1 ref" href="#61vcpu" title='vcpu' data-ref="61vcpu" data-ref-filename="61vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::event_commit" title='nvmm_comm_page::event_commit' data-ref="nvmm_comm_page::event_commit" data-ref-filename="nvmm_comm_page..event_commit">event_commit</a> = <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="1087">1087</th><td>	<b>return</b> <a class="tu ref fn" href="#vmx_vcpu_inject" title='vmx_vcpu_inject' data-use='c' data-ref="vmx_vcpu_inject" data-ref-filename="vmx_vcpu_inject">vmx_vcpu_inject</a>(<a class="local col1 ref" href="#61vcpu" title='vcpu' data-ref="61vcpu" data-ref-filename="61vcpu">vcpu</a>);</td></tr>
<tr><th id="1088">1088</th><td>}</td></tr>
<tr><th id="1089">1089</th><td></td></tr>
<tr><th id="1090">1090</th><td><em>static</em> <b>inline</b> <em>void</em></td></tr>
<tr><th id="1091">1091</th><td><dfn class="tu decl def fn" id="vmx_inkernel_advance" title='vmx_inkernel_advance' data-type='void vmx_inkernel_advance()' data-ref="vmx_inkernel_advance" data-ref-filename="vmx_inkernel_advance">vmx_inkernel_advance</dfn>(<em>void</em>)</td></tr>
<tr><th id="1092">1092</th><td>{</td></tr>
<tr><th id="1093">1093</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="62rip" title='rip' data-type='uint64_t' data-ref="62rip" data-ref-filename="62rip">rip</dfn>, <dfn class="local col3 decl" id="63inslen" title='inslen' data-type='uint64_t' data-ref="63inslen" data-ref-filename="63inslen">inslen</dfn>, <dfn class="local col4 decl" id="64intstate" title='intstate' data-type='uint64_t' data-ref="64intstate" data-ref-filename="64intstate">intstate</dfn>;</td></tr>
<tr><th id="1094">1094</th><td></td></tr>
<tr><th id="1095">1095</th><td>	<i>/*</i></td></tr>
<tr><th id="1096">1096</th><td><i>	 * Maybe we should also apply single-stepping and debug exceptions.</i></td></tr>
<tr><th id="1097">1097</th><td><i>	 * Matters for guest-ring3, because it can execute 'cpuid' under a</i></td></tr>
<tr><th id="1098">1098</th><td><i>	 * debugger.</i></td></tr>
<tr><th id="1099">1099</th><td><i>	 */</i></td></tr>
<tr><th id="1100">1100</th><td>	<a class="local col3 ref" href="#63inslen" title='inslen' data-ref="63inslen" data-ref-filename="63inslen">inslen</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#407" title="0x0000440C" data-ref="_M/VMCS_EXIT_INSTRUCTION_LENGTH">VMCS_EXIT_INSTRUCTION_LENGTH</a>);</td></tr>
<tr><th id="1101">1101</th><td>	<a class="local col2 ref" href="#62rip" title='rip' data-ref="62rip" data-ref-filename="62rip">rip</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#472" title="0x0000681E" data-ref="_M/VMCS_GUEST_RIP">VMCS_GUEST_RIP</a>);</td></tr>
<tr><th id="1102">1102</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#472" title="0x0000681E" data-ref="_M/VMCS_GUEST_RIP">VMCS_GUEST_RIP</a>, <a class="local col2 ref" href="#62rip" title='rip' data-ref="62rip" data-ref-filename="62rip">rip</a> + <a class="local col3 ref" href="#63inslen" title='inslen' data-ref="63inslen" data-ref-filename="63inslen">inslen</a>);</td></tr>
<tr><th id="1103">1103</th><td>	<a class="local col4 ref" href="#64intstate" title='intstate' data-ref="64intstate" data-ref-filename="64intstate">intstate</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#428" title="0x00004824" data-ref="_M/VMCS_GUEST_INTERRUPTIBILITY">VMCS_GUEST_INTERRUPTIBILITY</a>);</td></tr>
<tr><th id="1104">1104</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#428" title="0x00004824" data-ref="_M/VMCS_GUEST_INTERRUPTIBILITY">VMCS_GUEST_INTERRUPTIBILITY</a>,</td></tr>
<tr><th id="1105">1105</th><td>	    <a class="local col4 ref" href="#64intstate" title='intstate' data-ref="64intstate" data-ref-filename="64intstate">intstate</a> &amp; ~(<a class="macro" href="#429" title="(((uintmax_t)(0) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((0) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/INT_STATE_STI">INT_STATE_STI</a>|<a class="macro" href="#430" title="(((uintmax_t)(1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((1) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/INT_STATE_MOVSS">INT_STATE_MOVSS</a>));</td></tr>
<tr><th id="1106">1106</th><td>}</td></tr>
<tr><th id="1107">1107</th><td></td></tr>
<tr><th id="1108">1108</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1109">1109</th><td><dfn class="tu decl def fn" id="vmx_exit_exc_nmi" title='vmx_exit_exc_nmi' data-type='void vmx_exit_exc_nmi(struct nvmm_machine * mach, struct nvmm_cpu * vcpu, struct nvmm_exit * exit)' data-ref="vmx_exit_exc_nmi" data-ref-filename="vmx_exit_exc_nmi">vmx_exit_exc_nmi</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col5 decl" id="65mach" title='mach' data-type='struct nvmm_machine *' data-ref="65mach" data-ref-filename="65mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col6 decl" id="66vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="66vcpu" data-ref-filename="66vcpu">vcpu</dfn>,</td></tr>
<tr><th id="1110">1110</th><td>    <b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_exit" title='nvmm_exit' data-ref="nvmm_exit" data-ref-filename="nvmm_exit">nvmm_exit</a> *<dfn class="local col7 decl" id="67exit" title='exit' data-type='struct nvmm_exit *' data-ref="67exit" data-ref-filename="67exit">exit</dfn>)</td></tr>
<tr><th id="1111">1111</th><td>{</td></tr>
<tr><th id="1112">1112</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col8 decl" id="68qual" title='qual' data-type='uint64_t' data-ref="68qual" data-ref-filename="68qual">qual</dfn>;</td></tr>
<tr><th id="1113">1113</th><td></td></tr>
<tr><th id="1114">1114</th><td>	<a class="local col8 ref" href="#68qual" title='qual' data-ref="68qual" data-ref-filename="68qual">qual</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#403" title="0x00004404" data-ref="_M/VMCS_EXIT_INTR_INFO">VMCS_EXIT_INTR_INFO</a>);</td></tr>
<tr><th id="1115">1115</th><td></td></tr>
<tr><th id="1116">1116</th><td>	<b>if</b> ((<a class="local col8 ref" href="#68qual" title='qual' data-ref="68qual" data-ref-filename="68qual">qual</a> &amp; <a class="macro" href="#368" title="(((uintmax_t)(31) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((31) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/INTR_INFO_VALID">INTR_INFO_VALID</a>) == <var>0</var>) {</td></tr>
<tr><th id="1117">1117</th><td>		<b>goto</b> <a class="lbl" href="#69error" data-ref="69error" data-ref-filename="69error">error</a>;</td></tr>
<tr><th id="1118">1118</th><td>	}</td></tr>
<tr><th id="1119">1119</th><td>	<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#606" title="(((qual) &amp; ((((((uintmax_t)((( ((10))&gt;((8)))?((10)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&gt;((8)))?((10)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((10))&lt;=((8)))?((10)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&lt;=((8)))?((10)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((10))&gt;((8)))?((10)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&gt;((8)))?((10)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((10))&lt;=((8)))?((10)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&lt;=((8)))?((10)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((10))&gt;((8)))?((10)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&gt;((8)))?((10)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((10))&lt;=((8)))?((10)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&lt;=((8)))?((10)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((10))&gt;((8)))?((10)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&gt;((8)))?((10)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((10))&lt;=((8)))?((10)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&lt;=((8)))?((10)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col8 ref" href="#68qual" title='qual' data-ref="68qual" data-ref-filename="68qual">qual</a>, <a class="macro" href="#359" title="(((((uintmax_t)((( ((10))&gt;((8)))?((10)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&gt;((8)))?((10)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((10))&lt;=((8)))?((10)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((10))&lt;=((8)))?((10)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/INTR_INFO_TYPE">INTR_INFO_TYPE</a>) != <a class="macro" href="#361" title="2" data-ref="_M/INTR_TYPE_NMI">INTR_TYPE_NMI</a>) {</td></tr>
<tr><th id="1120">1120</th><td>		<b>goto</b> <a class="lbl" href="#69error" data-ref="69error" data-ref-filename="69error">error</a>;</td></tr>
<tr><th id="1121">1121</th><td>	}</td></tr>
<tr><th id="1122">1122</th><td></td></tr>
<tr><th id="1123">1123</th><td>	<a class="local col7 ref" href="#67exit" title='exit' data-ref="67exit" data-ref-filename="67exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#51" title="0x0000000000000000ULL" data-ref="_M/NVMM_EXIT_NONE">NVMM_EXIT_NONE</a>;</td></tr>
<tr><th id="1124">1124</th><td>	<b>return</b>;</td></tr>
<tr><th id="1125">1125</th><td></td></tr>
<tr><th id="1126">1126</th><td><dfn class="lbl" id="69error" data-ref="69error" data-ref-filename="69error">error</dfn>:</td></tr>
<tr><th id="1127">1127</th><td>	<a class="local col7 ref" href="#67exit" title='exit' data-ref="67exit" data-ref-filename="67exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#60" title="0xFFFFFFFFFFFFFFFFULL" data-ref="_M/NVMM_EXIT_INVALID">NVMM_EXIT_INVALID</a>;</td></tr>
<tr><th id="1128">1128</th><td>}</td></tr>
<tr><th id="1129">1129</th><td></td></tr>
<tr><th id="1130">1130</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1131">1131</th><td><dfn class="tu decl def fn" id="vmx_inkernel_handle_cpuid" title='vmx_inkernel_handle_cpuid' data-type='void vmx_inkernel_handle_cpuid(struct nvmm_cpu * vcpu, uint64_t eax, uint64_t ecx)' data-ref="vmx_inkernel_handle_cpuid" data-ref-filename="vmx_inkernel_handle_cpuid">vmx_inkernel_handle_cpuid</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col0 decl" id="70vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="70vcpu" data-ref-filename="70vcpu">vcpu</dfn>, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col1 decl" id="71eax" title='eax' data-type='uint64_t' data-ref="71eax" data-ref-filename="71eax">eax</dfn>, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="72ecx" title='ecx' data-type='uint64_t' data-ref="72ecx" data-ref-filename="72ecx">ecx</dfn>)</td></tr>
<tr><th id="1132">1132</th><td>{</td></tr>
<tr><th id="1133">1133</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col3 decl" id="73cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</dfn> = <a class="local col0 ref" href="#70vcpu" title='vcpu' data-ref="70vcpu" data-ref-filename="70vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1134">1134</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col4 decl" id="74cr4" title='cr4' data-type='uint64_t' data-ref="74cr4" data-ref-filename="74cr4">cr4</dfn>;</td></tr>
<tr><th id="1135">1135</th><td></td></tr>
<tr><th id="1136">1136</th><td>	<b>switch</b> (<a class="local col1 ref" href="#71eax" title='eax' data-ref="71eax" data-ref-filename="71eax">eax</a>) {</td></tr>
<tr><th id="1137">1137</th><td>	<b>case</b> <var>0x00000001</var>:</td></tr>
<tr><th id="1138">1138</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>] &amp;= <a class="ref" href="nvmm_x86.h.html#nvmm_cpuid_00000001" title='nvmm_cpuid_00000001' data-ref="nvmm_cpuid_00000001" data-ref-filename="nvmm_cpuid_00000001">nvmm_cpuid_00000001</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x86_cpuid_mask::eax" title='nvmm_x86_cpuid_mask::eax' data-ref="nvmm_x86_cpuid_mask::eax" data-ref-filename="nvmm_x86_cpuid_mask..eax">eax</a>;</td></tr>
<tr><th id="1139">1139</th><td></td></tr>
<tr><th id="1140">1140</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#122" title="3" data-ref="_M/NVMM_X64_GPR_RBX">NVMM_X64_GPR_RBX</a>] &amp;= ~<a class="macro" href="../../../arch/x86/include/specialreg.h.html#300" title="(((((uintmax_t)((( ((31))&gt;((24)))?((31)):((24))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&gt;((24)))?((31)):((24))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((31))&lt;=((24)))?((31)):((24)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&lt;=((24)))?((31)):((24)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/CPUID_LOCAL_APIC_ID">CPUID_LOCAL_APIC_ID</a>;</td></tr>
<tr><th id="1141">1141</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#122" title="3" data-ref="_M/NVMM_X64_GPR_RBX">NVMM_X64_GPR_RBX</a>] |= <a class="macro" href="../../../sys/cdefs.h.html#607" title="((vcpu-&gt;cpuid) * (((((((((uintmax_t)((( ((31))&gt;((24)))?((31)):((24))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&gt;((24)))?((31)):((24))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((31))&lt;=((24)))?((31)):((24)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&lt;=((24)))?((31)):((24)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((31))&gt;((24)))?((31)):((24))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&gt;((24)))?((31)):((24))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((31))&lt;=((24)))?((31)):((24)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&lt;=((24)))?((31)):((24)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((31))&gt;((24)))?((31)):((24))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&gt;((24)))?((31)):((24))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((31))&lt;=((24)))?((31)):((24)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&lt;=((24)))?((31)):((24)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="local col0 ref" href="#70vcpu" title='vcpu' data-ref="70vcpu" data-ref-filename="70vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpuid" title='nvmm_cpu::cpuid' data-ref="nvmm_cpu::cpuid" data-ref-filename="nvmm_cpu..cpuid">cpuid</a>,</td></tr>
<tr><th id="1142">1142</th><td>		    <a class="macro" href="../../../arch/x86/include/specialreg.h.html#300" title="(((((uintmax_t)((( ((31))&gt;((24)))?((31)):((24))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&gt;((24)))?((31)):((24))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((31))&lt;=((24)))?((31)):((24)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&lt;=((24)))?((31)):((24)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/CPUID_LOCAL_APIC_ID">CPUID_LOCAL_APIC_ID</a>);</td></tr>
<tr><th id="1143">1143</th><td></td></tr>
<tr><th id="1144">1144</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>] &amp;= <a class="ref" href="nvmm_x86.h.html#nvmm_cpuid_00000001" title='nvmm_cpuid_00000001' data-ref="nvmm_cpuid_00000001" data-ref-filename="nvmm_cpuid_00000001">nvmm_cpuid_00000001</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x86_cpuid_mask::ecx" title='nvmm_x86_cpuid_mask::ecx' data-ref="nvmm_x86_cpuid_mask::ecx" data-ref-filename="nvmm_x86_cpuid_mask..ecx">ecx</a>;</td></tr>
<tr><th id="1145">1145</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>] |= <a class="macro" href="../../../arch/x86/include/specialreg.h.html#259" title="0x80000000" data-ref="_M/CPUID2_RAZ">CPUID2_RAZ</a>;</td></tr>
<tr><th id="1146">1146</th><td></td></tr>
<tr><th id="1147">1147</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>] &amp;= <a class="ref" href="nvmm_x86.h.html#nvmm_cpuid_00000001" title='nvmm_cpuid_00000001' data-ref="nvmm_cpuid_00000001" data-ref-filename="nvmm_cpuid_00000001">nvmm_cpuid_00000001</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x86_cpuid_mask::edx" title='nvmm_x86_cpuid_mask::edx' data-ref="nvmm_x86_cpuid_mask::edx" data-ref-filename="nvmm_x86_cpuid_mask..edx">edx</a>;</td></tr>
<tr><th id="1148">1148</th><td></td></tr>
<tr><th id="1149">1149</th><td>		<i>/* CPUID2_OSXSAVE depends on CR4. */</i></td></tr>
<tr><th id="1150">1150</th><td>		<a class="local col4 ref" href="#74cr4" title='cr4' data-ref="74cr4" data-ref-filename="74cr4">cr4</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#459" title="0x00006804" data-ref="_M/VMCS_GUEST_CR4">VMCS_GUEST_CR4</a>);</td></tr>
<tr><th id="1151">1151</th><td>		<b>if</b> (!(<a class="local col4 ref" href="#74cr4" title='cr4' data-ref="74cr4" data-ref-filename="74cr4">cr4</a> &amp; <a class="macro" href="../../../arch/x86/include/specialreg.h.html#116" title="0x00040000" data-ref="_M/CR4_OSXSAVE">CR4_OSXSAVE</a>)) {</td></tr>
<tr><th id="1152">1152</th><td>			<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>] &amp;= ~<a class="macro" href="../../../arch/x86/include/specialreg.h.html#255" title="0x08000000" data-ref="_M/CPUID2_OSXSAVE">CPUID2_OSXSAVE</a>;</td></tr>
<tr><th id="1153">1153</th><td>		}</td></tr>
<tr><th id="1154">1154</th><td>		<b>break</b>;</td></tr>
<tr><th id="1155">1155</th><td>	<b>case</b> <var>0x00000005</var>:</td></tr>
<tr><th id="1156">1156</th><td>	<b>case</b> <var>0x00000006</var>:</td></tr>
<tr><th id="1157">1157</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>] = <var>0</var>;</td></tr>
<tr><th id="1158">1158</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#122" title="3" data-ref="_M/NVMM_X64_GPR_RBX">NVMM_X64_GPR_RBX</a>] = <var>0</var>;</td></tr>
<tr><th id="1159">1159</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>] = <var>0</var>;</td></tr>
<tr><th id="1160">1160</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>] = <var>0</var>;</td></tr>
<tr><th id="1161">1161</th><td>		<b>break</b>;</td></tr>
<tr><th id="1162">1162</th><td>	<b>case</b> <var>0x00000007</var>:</td></tr>
<tr><th id="1163">1163</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>] &amp;= <a class="ref" href="nvmm_x86.h.html#nvmm_cpuid_00000007" title='nvmm_cpuid_00000007' data-ref="nvmm_cpuid_00000007" data-ref-filename="nvmm_cpuid_00000007">nvmm_cpuid_00000007</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x86_cpuid_mask::eax" title='nvmm_x86_cpuid_mask::eax' data-ref="nvmm_x86_cpuid_mask::eax" data-ref-filename="nvmm_x86_cpuid_mask..eax">eax</a>;</td></tr>
<tr><th id="1164">1164</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#122" title="3" data-ref="_M/NVMM_X64_GPR_RBX">NVMM_X64_GPR_RBX</a>] &amp;= <a class="ref" href="nvmm_x86.h.html#nvmm_cpuid_00000007" title='nvmm_cpuid_00000007' data-ref="nvmm_cpuid_00000007" data-ref-filename="nvmm_cpuid_00000007">nvmm_cpuid_00000007</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x86_cpuid_mask::ebx" title='nvmm_x86_cpuid_mask::ebx' data-ref="nvmm_x86_cpuid_mask::ebx" data-ref-filename="nvmm_x86_cpuid_mask..ebx">ebx</a>;</td></tr>
<tr><th id="1165">1165</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>] &amp;= <a class="ref" href="nvmm_x86.h.html#nvmm_cpuid_00000007" title='nvmm_cpuid_00000007' data-ref="nvmm_cpuid_00000007" data-ref-filename="nvmm_cpuid_00000007">nvmm_cpuid_00000007</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x86_cpuid_mask::ecx" title='nvmm_x86_cpuid_mask::ecx' data-ref="nvmm_x86_cpuid_mask::ecx" data-ref-filename="nvmm_x86_cpuid_mask..ecx">ecx</a>;</td></tr>
<tr><th id="1166">1166</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>] &amp;= <a class="ref" href="nvmm_x86.h.html#nvmm_cpuid_00000007" title='nvmm_cpuid_00000007' data-ref="nvmm_cpuid_00000007" data-ref-filename="nvmm_cpuid_00000007">nvmm_cpuid_00000007</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x86_cpuid_mask::edx" title='nvmm_x86_cpuid_mask::edx' data-ref="nvmm_x86_cpuid_mask::edx" data-ref-filename="nvmm_x86_cpuid_mask..edx">edx</a>;</td></tr>
<tr><th id="1167">1167</th><td>		<b>break</b>;</td></tr>
<tr><th id="1168">1168</th><td>	<b>case</b> <var>0x0000000D</var>:</td></tr>
<tr><th id="1169">1169</th><td>		<b>if</b> (<a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a> == <var>0</var>) {</td></tr>
<tr><th id="1170">1170</th><td>			<b>break</b>;</td></tr>
<tr><th id="1171">1171</th><td>		}</td></tr>
<tr><th id="1172">1172</th><td>		<b>switch</b> (<a class="local col2 ref" href="#72ecx" title='ecx' data-ref="72ecx" data-ref-filename="72ecx">ecx</a>) {</td></tr>
<tr><th id="1173">1173</th><td>		<b>case</b> <var>0</var>:</td></tr>
<tr><th id="1174">1174</th><td>			<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>] = <a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a> &amp; <var>0xFFFFFFFF</var>;</td></tr>
<tr><th id="1175">1175</th><td>			<b>if</b> (<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gxcr0" title='vmx_cpudata::gxcr0' data-use='r' data-ref="vmx_cpudata::gxcr0" data-ref-filename="vmx_cpudata..gxcr0">gxcr0</a> &amp; <a class="macro" href="../../../arch/x86/include/specialreg.h.html#125" title="0x00000002" data-ref="_M/XCR0_SSE">XCR0_SSE</a>) {</td></tr>
<tr><th id="1176">1176</th><td>				<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#122" title="3" data-ref="_M/NVMM_X64_GPR_RBX">NVMM_X64_GPR_RBX</a>] = <b>sizeof</b>(<b>struct</b> <a class="type" href="../../../arch/x86/include/cpu_extended_state.h.html#fxsave" title='fxsave' data-ref="fxsave" data-ref-filename="fxsave">fxsave</a>);</td></tr>
<tr><th id="1177">1177</th><td>			} <b>else</b> {</td></tr>
<tr><th id="1178">1178</th><td>				<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#122" title="3" data-ref="_M/NVMM_X64_GPR_RBX">NVMM_X64_GPR_RBX</a>] = <b>sizeof</b>(<b>struct</b> <a class="type" href="../../../arch/x86/include/cpu_extended_state.h.html#save87" title='save87' data-ref="save87" data-ref-filename="save87">save87</a>);</td></tr>
<tr><th id="1179">1179</th><td>			}</td></tr>
<tr><th id="1180">1180</th><td>			<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#122" title="3" data-ref="_M/NVMM_X64_GPR_RBX">NVMM_X64_GPR_RBX</a>] += <var>64</var>; <i>/* XSAVE header */</i></td></tr>
<tr><th id="1181">1181</th><td>			<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>] = <b>sizeof</b>(<b>struct</b> <a class="type" href="../../../arch/x86/include/cpu_extended_state.h.html#fxsave" title='fxsave' data-ref="fxsave" data-ref-filename="fxsave">fxsave</a>) + <var>64</var>;</td></tr>
<tr><th id="1182">1182</th><td>			<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>] = <a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a> &gt;&gt; <var>32</var>;</td></tr>
<tr><th id="1183">1183</th><td>			<b>break</b>;</td></tr>
<tr><th id="1184">1184</th><td>		<b>case</b> <var>1</var>:</td></tr>
<tr><th id="1185">1185</th><td>			<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>] &amp;= ~<a class="macro" href="../../../arch/x86/include/specialreg.h.html#572" title="0x00000008" data-ref="_M/CPUID_PES1_XSAVES">CPUID_PES1_XSAVES</a>;</td></tr>
<tr><th id="1186">1186</th><td>			<b>break</b>;</td></tr>
<tr><th id="1187">1187</th><td>		}</td></tr>
<tr><th id="1188">1188</th><td>		<b>break</b>;</td></tr>
<tr><th id="1189">1189</th><td>	<b>case</b> <var>0x40000000</var>:</td></tr>
<tr><th id="1190">1190</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#122" title="3" data-ref="_M/NVMM_X64_GPR_RBX">NVMM_X64_GPR_RBX</a>] = <var>0</var>;</td></tr>
<tr><th id="1191">1191</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>] = <var>0</var>;</td></tr>
<tr><th id="1192">1192</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>] = <var>0</var>;</td></tr>
<tr><th id="1193">1193</th><td>		<a class="macro" href="../../../lib/libkern/libkern.h.html#380" title="__builtin_memcpy(&amp;cpudata-&gt;gprs[3], &quot;___ &quot;, 4)" data-ref="_M/memcpy">memcpy</a>(&amp;<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='a' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#122" title="3" data-ref="_M/NVMM_X64_GPR_RBX">NVMM_X64_GPR_RBX</a>], <q>"___ "</q>, <var>4</var>);</td></tr>
<tr><th id="1194">1194</th><td>		<a class="macro" href="../../../lib/libkern/libkern.h.html#380" title="__builtin_memcpy(&amp;cpudata-&gt;gprs[1], &quot;NVMM&quot;, 4)" data-ref="_M/memcpy">memcpy</a>(&amp;<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='a' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>], <q>"NVMM"</q>, <var>4</var>);</td></tr>
<tr><th id="1195">1195</th><td>		<a class="macro" href="../../../lib/libkern/libkern.h.html#380" title="__builtin_memcpy(&amp;cpudata-&gt;gprs[2], &quot; ___&quot;, 4)" data-ref="_M/memcpy">memcpy</a>(&amp;<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='a' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>], <q>" ___"</q>, <var>4</var>);</td></tr>
<tr><th id="1196">1196</th><td>		<b>break</b>;</td></tr>
<tr><th id="1197">1197</th><td>	<b>case</b> <var>0x80000001</var>:</td></tr>
<tr><th id="1198">1198</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>] &amp;= <a class="ref" href="nvmm_x86.h.html#nvmm_cpuid_80000001" title='nvmm_cpuid_80000001' data-ref="nvmm_cpuid_80000001" data-ref-filename="nvmm_cpuid_80000001">nvmm_cpuid_80000001</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x86_cpuid_mask::eax" title='nvmm_x86_cpuid_mask::eax' data-ref="nvmm_x86_cpuid_mask::eax" data-ref-filename="nvmm_x86_cpuid_mask..eax">eax</a>;</td></tr>
<tr><th id="1199">1199</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#122" title="3" data-ref="_M/NVMM_X64_GPR_RBX">NVMM_X64_GPR_RBX</a>] &amp;= <a class="ref" href="nvmm_x86.h.html#nvmm_cpuid_80000001" title='nvmm_cpuid_80000001' data-ref="nvmm_cpuid_80000001" data-ref-filename="nvmm_cpuid_80000001">nvmm_cpuid_80000001</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x86_cpuid_mask::ebx" title='nvmm_x86_cpuid_mask::ebx' data-ref="nvmm_x86_cpuid_mask::ebx" data-ref-filename="nvmm_x86_cpuid_mask..ebx">ebx</a>;</td></tr>
<tr><th id="1200">1200</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>] &amp;= <a class="ref" href="nvmm_x86.h.html#nvmm_cpuid_80000001" title='nvmm_cpuid_80000001' data-ref="nvmm_cpuid_80000001" data-ref-filename="nvmm_cpuid_80000001">nvmm_cpuid_80000001</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x86_cpuid_mask::ecx" title='nvmm_x86_cpuid_mask::ecx' data-ref="nvmm_x86_cpuid_mask::ecx" data-ref-filename="nvmm_x86_cpuid_mask..ecx">ecx</a>;</td></tr>
<tr><th id="1201">1201</th><td>		<a class="local col3 ref" href="#73cpudata" title='cpudata' data-ref="73cpudata" data-ref-filename="73cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>] &amp;= <a class="ref" href="nvmm_x86.h.html#nvmm_cpuid_80000001" title='nvmm_cpuid_80000001' data-ref="nvmm_cpuid_80000001" data-ref-filename="nvmm_cpuid_80000001">nvmm_cpuid_80000001</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x86_cpuid_mask::edx" title='nvmm_x86_cpuid_mask::edx' data-ref="nvmm_x86_cpuid_mask::edx" data-ref-filename="nvmm_x86_cpuid_mask..edx">edx</a>;</td></tr>
<tr><th id="1202">1202</th><td>		<b>break</b>;</td></tr>
<tr><th id="1203">1203</th><td>	<b>default</b>:</td></tr>
<tr><th id="1204">1204</th><td>		<b>break</b>;</td></tr>
<tr><th id="1205">1205</th><td>	}</td></tr>
<tr><th id="1206">1206</th><td>}</td></tr>
<tr><th id="1207">1207</th><td></td></tr>
<tr><th id="1208">1208</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1209">1209</th><td><dfn class="tu decl def fn" id="vmx_exit_cpuid" title='vmx_exit_cpuid' data-type='void vmx_exit_cpuid(struct nvmm_machine * mach, struct nvmm_cpu * vcpu, struct nvmm_exit * exit)' data-ref="vmx_exit_cpuid" data-ref-filename="vmx_exit_cpuid">vmx_exit_cpuid</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col5 decl" id="75mach" title='mach' data-type='struct nvmm_machine *' data-ref="75mach" data-ref-filename="75mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col6 decl" id="76vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="76vcpu" data-ref-filename="76vcpu">vcpu</dfn>,</td></tr>
<tr><th id="1210">1210</th><td>    <b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_exit" title='nvmm_exit' data-ref="nvmm_exit" data-ref-filename="nvmm_exit">nvmm_exit</a> *<dfn class="local col7 decl" id="77exit" title='exit' data-type='struct nvmm_exit *' data-ref="77exit" data-ref-filename="77exit">exit</dfn>)</td></tr>
<tr><th id="1211">1211</th><td>{</td></tr>
<tr><th id="1212">1212</th><td>	<b>struct</b> <a class="type" href="#vmx_machdata" title='vmx_machdata' data-ref="vmx_machdata" data-ref-filename="vmx_machdata">vmx_machdata</a> *<dfn class="local col8 decl" id="78machdata" title='machdata' data-type='struct vmx_machdata *' data-ref="78machdata" data-ref-filename="78machdata">machdata</dfn> = <a class="local col5 ref" href="#75mach" title='mach' data-ref="75mach" data-ref-filename="75mach">mach</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_machine::machdata" title='nvmm_machine::machdata' data-ref="nvmm_machine::machdata" data-ref-filename="nvmm_machine..machdata">machdata</a>;</td></tr>
<tr><th id="1213">1213</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col9 decl" id="79cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</dfn> = <a class="local col6 ref" href="#76vcpu" title='vcpu' data-ref="76vcpu" data-ref-filename="76vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1214">1214</th><td>	<b>struct</b> <a class="type" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid" title='nvmm_mach_conf_x86_cpuid' data-ref="nvmm_mach_conf_x86_cpuid" data-ref-filename="nvmm_mach_conf_x86_cpuid">nvmm_mach_conf_x86_cpuid</a> *<dfn class="local col0 decl" id="80cpuid" title='cpuid' data-type='struct nvmm_mach_conf_x86_cpuid *' data-ref="80cpuid" data-ref-filename="80cpuid">cpuid</dfn>;</td></tr>
<tr><th id="1215">1215</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col1 decl" id="81eax" title='eax' data-type='uint64_t' data-ref="81eax" data-ref-filename="81eax">eax</dfn>, <dfn class="local col2 decl" id="82ecx" title='ecx' data-type='uint64_t' data-ref="82ecx" data-ref-filename="82ecx">ecx</dfn>;</td></tr>
<tr><th id="1216">1216</th><td>	<a class="typedef" href="../../../sys/types.h.html#u_int" title='u_int' data-type='unsigned int' data-ref="u_int" data-ref-filename="u_int">u_int</a> <dfn class="local col3 decl" id="83descs" title='descs' data-type='u_int [4]' data-ref="83descs" data-ref-filename="83descs">descs</dfn>[<var>4</var>];</td></tr>
<tr><th id="1217">1217</th><td>	<a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col4 decl" id="84i" title='i' data-type='size_t' data-ref="84i" data-ref-filename="84i">i</dfn>;</td></tr>
<tr><th id="1218">1218</th><td></td></tr>
<tr><th id="1219">1219</th><td>	<a class="local col1 ref" href="#81eax" title='eax' data-ref="81eax" data-ref-filename="81eax">eax</a> = <a class="local col9 ref" href="#79cpudata" title='cpudata' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>];</td></tr>
<tr><th id="1220">1220</th><td>	<a class="local col2 ref" href="#82ecx" title='ecx' data-ref="82ecx" data-ref-filename="82ecx">ecx</a> = <a class="local col9 ref" href="#79cpudata" title='cpudata' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>];</td></tr>
<tr><th id="1221">1221</th><td>	<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#x86_cpuid2" title='x86_cpuid2' data-ref="x86_cpuid2" data-ref-filename="x86_cpuid2">x86_cpuid2</a>(<a class="local col1 ref" href="#81eax" title='eax' data-ref="81eax" data-ref-filename="81eax">eax</a>, <a class="local col2 ref" href="#82ecx" title='ecx' data-ref="82ecx" data-ref-filename="82ecx">ecx</a>, <a class="local col3 ref" href="#83descs" title='descs' data-ref="83descs" data-ref-filename="83descs">descs</a>);</td></tr>
<tr><th id="1222">1222</th><td></td></tr>
<tr><th id="1223">1223</th><td>	<a class="local col9 ref" href="#79cpudata" title='cpudata' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>] = <a class="local col3 ref" href="#83descs" title='descs' data-ref="83descs" data-ref-filename="83descs">descs</a>[<var>0</var>];</td></tr>
<tr><th id="1224">1224</th><td>	<a class="local col9 ref" href="#79cpudata" title='cpudata' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#122" title="3" data-ref="_M/NVMM_X64_GPR_RBX">NVMM_X64_GPR_RBX</a>] = <a class="local col3 ref" href="#83descs" title='descs' data-ref="83descs" data-ref-filename="83descs">descs</a>[<var>1</var>];</td></tr>
<tr><th id="1225">1225</th><td>	<a class="local col9 ref" href="#79cpudata" title='cpudata' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>] = <a class="local col3 ref" href="#83descs" title='descs' data-ref="83descs" data-ref-filename="83descs">descs</a>[<var>2</var>];</td></tr>
<tr><th id="1226">1226</th><td>	<a class="local col9 ref" href="#79cpudata" title='cpudata' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>] = <a class="local col3 ref" href="#83descs" title='descs' data-ref="83descs" data-ref-filename="83descs">descs</a>[<var>3</var>];</td></tr>
<tr><th id="1227">1227</th><td></td></tr>
<tr><th id="1228">1228</th><td>	<a class="tu ref fn" href="#vmx_inkernel_handle_cpuid" title='vmx_inkernel_handle_cpuid' data-use='c' data-ref="vmx_inkernel_handle_cpuid" data-ref-filename="vmx_inkernel_handle_cpuid">vmx_inkernel_handle_cpuid</a>(<a class="local col6 ref" href="#76vcpu" title='vcpu' data-ref="76vcpu" data-ref-filename="76vcpu">vcpu</a>, <a class="local col1 ref" href="#81eax" title='eax' data-ref="81eax" data-ref-filename="81eax">eax</a>, <a class="local col2 ref" href="#82ecx" title='ecx' data-ref="82ecx" data-ref-filename="82ecx">ecx</a>);</td></tr>
<tr><th id="1229">1229</th><td></td></tr>
<tr><th id="1230">1230</th><td>	<b>for</b> (<a class="local col4 ref" href="#84i" title='i' data-ref="84i" data-ref-filename="84i">i</a> = <var>0</var>; <a class="local col4 ref" href="#84i" title='i' data-ref="84i" data-ref-filename="84i">i</a> &lt; <a class="macro" href="#682" title="32" data-ref="_M/VMX_NCPUIDS">VMX_NCPUIDS</a>; <a class="local col4 ref" href="#84i" title='i' data-ref="84i" data-ref-filename="84i">i</a>++) {</td></tr>
<tr><th id="1231">1231</th><td>		<a class="local col0 ref" href="#80cpuid" title='cpuid' data-ref="80cpuid" data-ref-filename="80cpuid">cpuid</a> = &amp;<a class="local col8 ref" href="#78machdata" title='machdata' data-ref="78machdata" data-ref-filename="78machdata">machdata</a>-&gt;<a class="tu ref field" href="#vmx_machdata::cpuid" title='vmx_machdata::cpuid' data-use='a' data-ref="vmx_machdata::cpuid" data-ref-filename="vmx_machdata..cpuid">cpuid</a>[<a class="local col4 ref" href="#84i" title='i' data-ref="84i" data-ref-filename="84i">i</a>];</td></tr>
<tr><th id="1232">1232</th><td>		<b>if</b> (!<a class="local col8 ref" href="#78machdata" title='machdata' data-ref="78machdata" data-ref-filename="78machdata">machdata</a>-&gt;<a class="tu ref field" href="#vmx_machdata::cpuidpresent" title='vmx_machdata::cpuidpresent' data-use='r' data-ref="vmx_machdata::cpuidpresent" data-ref-filename="vmx_machdata..cpuidpresent">cpuidpresent</a>[<a class="local col4 ref" href="#84i" title='i' data-ref="84i" data-ref-filename="84i">i</a>]) {</td></tr>
<tr><th id="1233">1233</th><td>			<b>continue</b>;</td></tr>
<tr><th id="1234">1234</th><td>		}</td></tr>
<tr><th id="1235">1235</th><td>		<b>if</b> (<a class="local col0 ref" href="#80cpuid" title='cpuid' data-ref="80cpuid" data-ref-filename="80cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::leaf" title='nvmm_mach_conf_x86_cpuid::leaf' data-ref="nvmm_mach_conf_x86_cpuid::leaf" data-ref-filename="nvmm_mach_conf_x86_cpuid..leaf">leaf</a> != <a class="local col1 ref" href="#81eax" title='eax' data-ref="81eax" data-ref-filename="81eax">eax</a>) {</td></tr>
<tr><th id="1236">1236</th><td>			<b>continue</b>;</td></tr>
<tr><th id="1237">1237</th><td>		}</td></tr>
<tr><th id="1238">1238</th><td></td></tr>
<tr><th id="1239">1239</th><td>		<i>/* del */</i></td></tr>
<tr><th id="1240">1240</th><td>		<a class="local col9 ref" href="#79cpudata" title='cpudata' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>] &amp;= ~<a class="local col0 ref" href="#80cpuid" title='cpuid' data-ref="80cpuid" data-ref-filename="80cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::del" title='nvmm_mach_conf_x86_cpuid::del' data-ref="nvmm_mach_conf_x86_cpuid::del" data-ref-filename="nvmm_mach_conf_x86_cpuid..del">del</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::eax" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::eax' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::eax" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..eax">eax</a>;</td></tr>
<tr><th id="1241">1241</th><td>		<a class="local col9 ref" href="#79cpudata" title='cpudata' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#122" title="3" data-ref="_M/NVMM_X64_GPR_RBX">NVMM_X64_GPR_RBX</a>] &amp;= ~<a class="local col0 ref" href="#80cpuid" title='cpuid' data-ref="80cpuid" data-ref-filename="80cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::del" title='nvmm_mach_conf_x86_cpuid::del' data-ref="nvmm_mach_conf_x86_cpuid::del" data-ref-filename="nvmm_mach_conf_x86_cpuid..del">del</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::ebx" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::ebx' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::ebx" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..ebx">ebx</a>;</td></tr>
<tr><th id="1242">1242</th><td>		<a class="local col9 ref" href="#79cpudata" title='cpudata' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>] &amp;= ~<a class="local col0 ref" href="#80cpuid" title='cpuid' data-ref="80cpuid" data-ref-filename="80cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::del" title='nvmm_mach_conf_x86_cpuid::del' data-ref="nvmm_mach_conf_x86_cpuid::del" data-ref-filename="nvmm_mach_conf_x86_cpuid..del">del</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::ecx" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::ecx' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::ecx" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..ecx">ecx</a>;</td></tr>
<tr><th id="1243">1243</th><td>		<a class="local col9 ref" href="#79cpudata" title='cpudata' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>] &amp;= ~<a class="local col0 ref" href="#80cpuid" title='cpuid' data-ref="80cpuid" data-ref-filename="80cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::del" title='nvmm_mach_conf_x86_cpuid::del' data-ref="nvmm_mach_conf_x86_cpuid::del" data-ref-filename="nvmm_mach_conf_x86_cpuid..del">del</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::edx" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::edx' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::edx" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..edx">edx</a>;</td></tr>
<tr><th id="1244">1244</th><td></td></tr>
<tr><th id="1245">1245</th><td>		<i>/* set */</i></td></tr>
<tr><th id="1246">1246</th><td>		<a class="local col9 ref" href="#79cpudata" title='cpudata' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>] |= <a class="local col0 ref" href="#80cpuid" title='cpuid' data-ref="80cpuid" data-ref-filename="80cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::set" title='nvmm_mach_conf_x86_cpuid::set' data-ref="nvmm_mach_conf_x86_cpuid::set" data-ref-filename="nvmm_mach_conf_x86_cpuid..set">set</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::eax" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::eax' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::eax" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..eax">eax</a>;</td></tr>
<tr><th id="1247">1247</th><td>		<a class="local col9 ref" href="#79cpudata" title='cpudata' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#122" title="3" data-ref="_M/NVMM_X64_GPR_RBX">NVMM_X64_GPR_RBX</a>] |= <a class="local col0 ref" href="#80cpuid" title='cpuid' data-ref="80cpuid" data-ref-filename="80cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::set" title='nvmm_mach_conf_x86_cpuid::set' data-ref="nvmm_mach_conf_x86_cpuid::set" data-ref-filename="nvmm_mach_conf_x86_cpuid..set">set</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::ebx" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::ebx' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::ebx" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..ebx">ebx</a>;</td></tr>
<tr><th id="1248">1248</th><td>		<a class="local col9 ref" href="#79cpudata" title='cpudata' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>] |= <a class="local col0 ref" href="#80cpuid" title='cpuid' data-ref="80cpuid" data-ref-filename="80cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::set" title='nvmm_mach_conf_x86_cpuid::set' data-ref="nvmm_mach_conf_x86_cpuid::set" data-ref-filename="nvmm_mach_conf_x86_cpuid..set">set</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::ecx" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::ecx' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::ecx" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..ecx">ecx</a>;</td></tr>
<tr><th id="1249">1249</th><td>		<a class="local col9 ref" href="#79cpudata" title='cpudata' data-ref="79cpudata" data-ref-filename="79cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>] |= <a class="local col0 ref" href="#80cpuid" title='cpuid' data-ref="80cpuid" data-ref-filename="80cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::set" title='nvmm_mach_conf_x86_cpuid::set' data-ref="nvmm_mach_conf_x86_cpuid::set" data-ref-filename="nvmm_mach_conf_x86_cpuid..set">set</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::edx" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::edx' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::edx" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..edx">edx</a>;</td></tr>
<tr><th id="1250">1250</th><td></td></tr>
<tr><th id="1251">1251</th><td>		<b>break</b>;</td></tr>
<tr><th id="1252">1252</th><td>	}</td></tr>
<tr><th id="1253">1253</th><td></td></tr>
<tr><th id="1254">1254</th><td>	<a class="tu ref fn" href="#vmx_inkernel_advance" title='vmx_inkernel_advance' data-use='c' data-ref="vmx_inkernel_advance" data-ref-filename="vmx_inkernel_advance">vmx_inkernel_advance</a>();</td></tr>
<tr><th id="1255">1255</th><td>	<a class="local col7 ref" href="#77exit" title='exit' data-ref="77exit" data-ref-filename="77exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#51" title="0x0000000000000000ULL" data-ref="_M/NVMM_EXIT_NONE">NVMM_EXIT_NONE</a>;</td></tr>
<tr><th id="1256">1256</th><td>}</td></tr>
<tr><th id="1257">1257</th><td></td></tr>
<tr><th id="1258">1258</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1259">1259</th><td><dfn class="tu decl def fn" id="vmx_exit_hlt" title='vmx_exit_hlt' data-type='void vmx_exit_hlt(struct nvmm_machine * mach, struct nvmm_cpu * vcpu, struct nvmm_exit * exit)' data-ref="vmx_exit_hlt" data-ref-filename="vmx_exit_hlt">vmx_exit_hlt</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col5 decl" id="85mach" title='mach' data-type='struct nvmm_machine *' data-ref="85mach" data-ref-filename="85mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col6 decl" id="86vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="86vcpu" data-ref-filename="86vcpu">vcpu</dfn>,</td></tr>
<tr><th id="1260">1260</th><td>    <b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_exit" title='nvmm_exit' data-ref="nvmm_exit" data-ref-filename="nvmm_exit">nvmm_exit</a> *<dfn class="local col7 decl" id="87exit" title='exit' data-type='struct nvmm_exit *' data-ref="87exit" data-ref-filename="87exit">exit</dfn>)</td></tr>
<tr><th id="1261">1261</th><td>{</td></tr>
<tr><th id="1262">1262</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col8 decl" id="88cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="88cpudata" data-ref-filename="88cpudata">cpudata</dfn> = <a class="local col6 ref" href="#86vcpu" title='vcpu' data-ref="86vcpu" data-ref-filename="86vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1263">1263</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col9 decl" id="89rflags" title='rflags' data-type='uint64_t' data-ref="89rflags" data-ref-filename="89rflags">rflags</dfn>;</td></tr>
<tr><th id="1264">1264</th><td></td></tr>
<tr><th id="1265">1265</th><td>	<b>if</b> (<a class="local col8 ref" href="#88cpudata" title='cpudata' data-ref="88cpudata" data-ref-filename="88cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::int_window_exit" title='vmx_cpudata::int_window_exit' data-use='r' data-ref="vmx_cpudata::int_window_exit" data-ref-filename="vmx_cpudata..int_window_exit">int_window_exit</a>) {</td></tr>
<tr><th id="1266">1266</th><td>		<a class="local col9 ref" href="#89rflags" title='rflags' data-ref="89rflags" data-ref-filename="89rflags">rflags</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#473" title="0x00006820" data-ref="_M/VMCS_GUEST_RFLAGS">VMCS_GUEST_RFLAGS</a>);</td></tr>
<tr><th id="1267">1267</th><td>		<b>if</b> (<a class="local col9 ref" href="#89rflags" title='rflags' data-ref="89rflags" data-ref-filename="89rflags">rflags</a> &amp; <a class="macro" href="../../../arch/x86/include/psl.h.html#49" title="0x00000200" data-ref="_M/PSL_I">PSL_I</a>) {</td></tr>
<tr><th id="1268">1268</th><td>			<a class="tu ref fn" href="#vmx_event_waitexit_disable" title='vmx_event_waitexit_disable' data-use='c' data-ref="vmx_event_waitexit_disable" data-ref-filename="vmx_event_waitexit_disable">vmx_event_waitexit_disable</a>(<a class="local col6 ref" href="#86vcpu" title='vcpu' data-ref="86vcpu" data-ref-filename="86vcpu">vcpu</a>, <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>);</td></tr>
<tr><th id="1269">1269</th><td>		}</td></tr>
<tr><th id="1270">1270</th><td>	}</td></tr>
<tr><th id="1271">1271</th><td></td></tr>
<tr><th id="1272">1272</th><td>	<a class="tu ref fn" href="#vmx_inkernel_advance" title='vmx_inkernel_advance' data-use='c' data-ref="vmx_inkernel_advance" data-ref-filename="vmx_inkernel_advance">vmx_inkernel_advance</a>();</td></tr>
<tr><th id="1273">1273</th><td>	<a class="local col7 ref" href="#87exit" title='exit' data-ref="87exit" data-ref-filename="87exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#57" title="0x0000000000000006ULL" data-ref="_M/NVMM_EXIT_HALTED">NVMM_EXIT_HALTED</a>;</td></tr>
<tr><th id="1274">1274</th><td>}</td></tr>
<tr><th id="1275">1275</th><td></td></tr>
<tr><th id="1276">1276</th><td><u>#define <dfn class="macro" id="_M/VMX_QUAL_CR_NUM" data-ref="_M/VMX_QUAL_CR_NUM">VMX_QUAL_CR_NUM</dfn>		__BITS(3,0)</u></td></tr>
<tr><th id="1277">1277</th><td><u>#define <dfn class="macro" id="_M/VMX_QUAL_CR_TYPE" data-ref="_M/VMX_QUAL_CR_TYPE">VMX_QUAL_CR_TYPE</dfn>	__BITS(5,4)</u></td></tr>
<tr><th id="1278">1278</th><td><u>#define		<dfn class="macro" id="_M/CR_TYPE_WRITE" data-ref="_M/CR_TYPE_WRITE">CR_TYPE_WRITE</dfn>	0</u></td></tr>
<tr><th id="1279">1279</th><td><u>#define		<dfn class="macro" id="_M/CR_TYPE_READ" data-ref="_M/CR_TYPE_READ">CR_TYPE_READ</dfn>	1</u></td></tr>
<tr><th id="1280">1280</th><td><u>#define		<dfn class="macro" id="_M/CR_TYPE_CLTS" data-ref="_M/CR_TYPE_CLTS">CR_TYPE_CLTS</dfn>	2</u></td></tr>
<tr><th id="1281">1281</th><td><u>#define		<dfn class="macro" id="_M/CR_TYPE_LMSW" data-ref="_M/CR_TYPE_LMSW">CR_TYPE_LMSW</dfn>	3</u></td></tr>
<tr><th id="1282">1282</th><td><u>#define <dfn class="macro" id="_M/VMX_QUAL_CR_LMSW_OPMEM" data-ref="_M/VMX_QUAL_CR_LMSW_OPMEM">VMX_QUAL_CR_LMSW_OPMEM</dfn>	__BIT(6)</u></td></tr>
<tr><th id="1283">1283</th><td><u>#define <dfn class="macro" id="_M/VMX_QUAL_CR_GPR" data-ref="_M/VMX_QUAL_CR_GPR">VMX_QUAL_CR_GPR</dfn>		__BITS(11,8)</u></td></tr>
<tr><th id="1284">1284</th><td><u>#define <dfn class="macro" id="_M/VMX_QUAL_CR_LMSW_SRC" data-ref="_M/VMX_QUAL_CR_LMSW_SRC">VMX_QUAL_CR_LMSW_SRC</dfn>	__BIT(31,16)</u></td></tr>
<tr><th id="1285">1285</th><td></td></tr>
<tr><th id="1286">1286</th><td><em>static</em> <b>inline</b> <em>int</em></td></tr>
<tr><th id="1287">1287</th><td><dfn class="tu decl def fn" id="vmx_check_cr" title='vmx_check_cr' data-type='int vmx_check_cr(uint64_t crval, uint64_t fixed0, uint64_t fixed1)' data-ref="vmx_check_cr" data-ref-filename="vmx_check_cr">vmx_check_cr</dfn>(<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col0 decl" id="90crval" title='crval' data-type='uint64_t' data-ref="90crval" data-ref-filename="90crval">crval</dfn>, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col1 decl" id="91fixed0" title='fixed0' data-type='uint64_t' data-ref="91fixed0" data-ref-filename="91fixed0">fixed0</dfn>, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="92fixed1" title='fixed1' data-type='uint64_t' data-ref="92fixed1" data-ref-filename="92fixed1">fixed1</dfn>)</td></tr>
<tr><th id="1288">1288</th><td>{</td></tr>
<tr><th id="1289">1289</th><td>	<i>/* Bits set to 1 in fixed0 are fixed to 1. */</i></td></tr>
<tr><th id="1290">1290</th><td>	<b>if</b> ((<a class="local col0 ref" href="#90crval" title='crval' data-ref="90crval" data-ref-filename="90crval">crval</a> &amp; <a class="local col1 ref" href="#91fixed0" title='fixed0' data-ref="91fixed0" data-ref-filename="91fixed0">fixed0</a>) != <a class="local col1 ref" href="#91fixed0" title='fixed0' data-ref="91fixed0" data-ref-filename="91fixed0">fixed0</a>) {</td></tr>
<tr><th id="1291">1291</th><td>		<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="1292">1292</th><td>	}</td></tr>
<tr><th id="1293">1293</th><td>	<i>/* Bits set to 0 in fixed1 are fixed to 0. */</i></td></tr>
<tr><th id="1294">1294</th><td>	<b>if</b> (<a class="local col0 ref" href="#90crval" title='crval' data-ref="90crval" data-ref-filename="90crval">crval</a> &amp; ~<a class="local col2 ref" href="#92fixed1" title='fixed1' data-ref="92fixed1" data-ref-filename="92fixed1">fixed1</a>) {</td></tr>
<tr><th id="1295">1295</th><td>		<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="1296">1296</th><td>	}</td></tr>
<tr><th id="1297">1297</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="1298">1298</th><td>}</td></tr>
<tr><th id="1299">1299</th><td></td></tr>
<tr><th id="1300">1300</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="1301">1301</th><td><dfn class="tu decl def fn" id="vmx_inkernel_handle_cr0" title='vmx_inkernel_handle_cr0' data-type='int vmx_inkernel_handle_cr0(struct nvmm_machine * mach, struct nvmm_cpu * vcpu, uint64_t qual)' data-ref="vmx_inkernel_handle_cr0" data-ref-filename="vmx_inkernel_handle_cr0">vmx_inkernel_handle_cr0</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col3 decl" id="93mach" title='mach' data-type='struct nvmm_machine *' data-ref="93mach" data-ref-filename="93mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col4 decl" id="94vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="94vcpu" data-ref-filename="94vcpu">vcpu</dfn>,</td></tr>
<tr><th id="1302">1302</th><td>    <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col5 decl" id="95qual" title='qual' data-type='uint64_t' data-ref="95qual" data-ref-filename="95qual">qual</dfn>)</td></tr>
<tr><th id="1303">1303</th><td>{</td></tr>
<tr><th id="1304">1304</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col6 decl" id="96cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="96cpudata" data-ref-filename="96cpudata">cpudata</dfn> = <a class="local col4 ref" href="#94vcpu" title='vcpu' data-ref="94vcpu" data-ref-filename="94vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1305">1305</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col7 decl" id="97type" title='type' data-type='uint64_t' data-ref="97type" data-ref-filename="97type">type</dfn>, <dfn class="local col8 decl" id="98gpr" title='gpr' data-type='uint64_t' data-ref="98gpr" data-ref-filename="98gpr">gpr</dfn>, <dfn class="local col9 decl" id="99cr0" title='cr0' data-type='uint64_t' data-ref="99cr0" data-ref-filename="99cr0">cr0</dfn>;</td></tr>
<tr><th id="1306">1306</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col0 decl" id="100efer" title='efer' data-type='uint64_t' data-ref="100efer" data-ref-filename="100efer">efer</dfn>, <dfn class="local col1 decl" id="101ctls1" title='ctls1' data-type='uint64_t' data-ref="101ctls1" data-ref-filename="101ctls1">ctls1</dfn>;</td></tr>
<tr><th id="1307">1307</th><td></td></tr>
<tr><th id="1308">1308</th><td>	<a class="local col7 ref" href="#97type" title='type' data-ref="97type" data-ref-filename="97type">type</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((qual) &amp; ((((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col5 ref" href="#95qual" title='qual' data-ref="95qual" data-ref-filename="95qual">qual</a>, <a class="macro" href="#1277" title="(((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_QUAL_CR_TYPE">VMX_QUAL_CR_TYPE</a>);</td></tr>
<tr><th id="1309">1309</th><td>	<b>if</b> (<a class="local col7 ref" href="#97type" title='type' data-ref="97type" data-ref-filename="97type">type</a> != <a class="macro" href="#1278" title="0" data-ref="_M/CR_TYPE_WRITE">CR_TYPE_WRITE</a>) {</td></tr>
<tr><th id="1310">1310</th><td>		<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="1311">1311</th><td>	}</td></tr>
<tr><th id="1312">1312</th><td></td></tr>
<tr><th id="1313">1313</th><td>	<a class="local col8 ref" href="#98gpr" title='gpr' data-ref="98gpr" data-ref-filename="98gpr">gpr</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((qual) &amp; ((((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col5 ref" href="#95qual" title='qual' data-ref="95qual" data-ref-filename="95qual">qual</a>, <a class="macro" href="#1283" title="(((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_QUAL_CR_GPR">VMX_QUAL_CR_GPR</a>);</td></tr>
<tr><th id="1314">1314</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect(((gpr &lt; 16)) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;gpr &lt; 16&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 1314))" data-ref="_M/KASSERT">KASSERT</a>(<a class="local col8 ref" href="#98gpr" title='gpr' data-ref="98gpr" data-ref-filename="98gpr">gpr</a> &lt; <var>16</var>);</td></tr>
<tr><th id="1315">1315</th><td></td></tr>
<tr><th id="1316">1316</th><td>	<b>if</b> (<a class="local col8 ref" href="#98gpr" title='gpr' data-ref="98gpr" data-ref-filename="98gpr">gpr</a> == <a class="macro" href="nvmm_x86.h.html#123" title="4" data-ref="_M/NVMM_X64_GPR_RSP">NVMM_X64_GPR_RSP</a>) {</td></tr>
<tr><th id="1317">1317</th><td>		<a class="local col8 ref" href="#98gpr" title='gpr' data-ref="98gpr" data-ref-filename="98gpr">gpr</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#471" title="0x0000681C" data-ref="_M/VMCS_GUEST_RSP">VMCS_GUEST_RSP</a>);</td></tr>
<tr><th id="1318">1318</th><td>	} <b>else</b> {</td></tr>
<tr><th id="1319">1319</th><td>		<a class="local col8 ref" href="#98gpr" title='gpr' data-ref="98gpr" data-ref-filename="98gpr">gpr</a> = <a class="local col6 ref" href="#96cpudata" title='cpudata' data-ref="96cpudata" data-ref-filename="96cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="local col8 ref" href="#98gpr" title='gpr' data-ref="98gpr" data-ref-filename="98gpr">gpr</a>];</td></tr>
<tr><th id="1320">1320</th><td>	}</td></tr>
<tr><th id="1321">1321</th><td></td></tr>
<tr><th id="1322">1322</th><td>	<a class="local col9 ref" href="#99cr0" title='cr0' data-ref="99cr0" data-ref-filename="99cr0">cr0</a> = <a class="local col8 ref" href="#98gpr" title='gpr' data-ref="98gpr" data-ref-filename="98gpr">gpr</a> | <a class="macro" href="../../../arch/x86/include/specialreg.h.html#68" title="0x00000020" data-ref="_M/CR0_NE">CR0_NE</a> | <a class="macro" href="../../../arch/x86/include/specialreg.h.html#67" title="0x00000010" data-ref="_M/CR0_ET">CR0_ET</a>;</td></tr>
<tr><th id="1323">1323</th><td>	<a class="local col9 ref" href="#99cr0" title='cr0' data-ref="99cr0" data-ref-filename="99cr0">cr0</a> &amp;= ~(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#71" title="0x20000000" data-ref="_M/CR0_NW">CR0_NW</a>|<a class="macro" href="../../../arch/x86/include/specialreg.h.html#72" title="0x40000000" data-ref="_M/CR0_CD">CR0_CD</a>);</td></tr>
<tr><th id="1324">1324</th><td></td></tr>
<tr><th id="1325">1325</th><td>	<b>if</b> (<a class="tu ref fn" href="#vmx_check_cr" title='vmx_check_cr' data-use='c' data-ref="vmx_check_cr" data-ref-filename="vmx_check_cr">vmx_check_cr</a>(<a class="local col9 ref" href="#99cr0" title='cr0' data-ref="99cr0" data-ref-filename="99cr0">cr0</a>, <a class="tu ref" href="#vmx_cr0_fixed0" title='vmx_cr0_fixed0' data-use='r' data-ref="vmx_cr0_fixed0" data-ref-filename="vmx_cr0_fixed0">vmx_cr0_fixed0</a>, <a class="tu ref" href="#vmx_cr0_fixed1" title='vmx_cr0_fixed1' data-use='r' data-ref="vmx_cr0_fixed1" data-ref-filename="vmx_cr0_fixed1">vmx_cr0_fixed1</a>) == -<var>1</var>) {</td></tr>
<tr><th id="1326">1326</th><td>		<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="1327">1327</th><td>	}</td></tr>
<tr><th id="1328">1328</th><td></td></tr>
<tr><th id="1329">1329</th><td>	<i>/*</i></td></tr>
<tr><th id="1330">1330</th><td><i>	 * XXX Handle 32bit PAE paging, need to set PDPTEs, fetched manually</i></td></tr>
<tr><th id="1331">1331</th><td><i>	 * from CR3.</i></td></tr>
<tr><th id="1332">1332</th><td><i>	 */</i></td></tr>
<tr><th id="1333">1333</th><td></td></tr>
<tr><th id="1334">1334</th><td>	<b>if</b> (<a class="local col9 ref" href="#99cr0" title='cr0' data-ref="99cr0" data-ref-filename="99cr0">cr0</a> &amp; <a class="macro" href="../../../arch/x86/include/specialreg.h.html#73" title="0x80000000" data-ref="_M/CR0_PG">CR0_PG</a>) {</td></tr>
<tr><th id="1335">1335</th><td>		<a class="local col1 ref" href="#101ctls1" title='ctls1' data-ref="101ctls1" data-ref-filename="101ctls1">ctls1</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#346" title="0x00004012" data-ref="_M/VMCS_ENTRY_CTLS">VMCS_ENTRY_CTLS</a>);</td></tr>
<tr><th id="1336">1336</th><td>		<a class="local col0 ref" href="#100efer" title='efer' data-ref="100efer" data-ref-filename="100efer">efer</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#288" title="0x00002806" data-ref="_M/VMCS_GUEST_IA32_EFER">VMCS_GUEST_IA32_EFER</a>);</td></tr>
<tr><th id="1337">1337</th><td>		<b>if</b> (<a class="local col0 ref" href="#100efer" title='efer' data-ref="100efer" data-ref-filename="100efer">efer</a> &amp; <a class="macro" href="../../../arch/x86/include/specialreg.h.html#960" title="0x00000100" data-ref="_M/EFER_LME">EFER_LME</a>) {</td></tr>
<tr><th id="1338">1338</th><td>			<a class="local col1 ref" href="#101ctls1" title='ctls1' data-ref="101ctls1" data-ref-filename="101ctls1">ctls1</a> |= <a class="macro" href="#348" title="(((uintmax_t)(9) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((9) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/ENTRY_CTLS_LONG_MODE">ENTRY_CTLS_LONG_MODE</a>;</td></tr>
<tr><th id="1339">1339</th><td>			<a class="local col0 ref" href="#100efer" title='efer' data-ref="100efer" data-ref-filename="100efer">efer</a> |= <a class="macro" href="../../../arch/x86/include/specialreg.h.html#961" title="0x00000400" data-ref="_M/EFER_LMA">EFER_LMA</a>;</td></tr>
<tr><th id="1340">1340</th><td>		} <b>else</b> {</td></tr>
<tr><th id="1341">1341</th><td>			<a class="local col1 ref" href="#101ctls1" title='ctls1' data-ref="101ctls1" data-ref-filename="101ctls1">ctls1</a> &amp;= ~<a class="macro" href="#348" title="(((uintmax_t)(9) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((9) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/ENTRY_CTLS_LONG_MODE">ENTRY_CTLS_LONG_MODE</a>;</td></tr>
<tr><th id="1342">1342</th><td>			<a class="local col0 ref" href="#100efer" title='efer' data-ref="100efer" data-ref-filename="100efer">efer</a> &amp;= ~<a class="macro" href="../../../arch/x86/include/specialreg.h.html#961" title="0x00000400" data-ref="_M/EFER_LMA">EFER_LMA</a>;</td></tr>
<tr><th id="1343">1343</th><td>		}</td></tr>
<tr><th id="1344">1344</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#288" title="0x00002806" data-ref="_M/VMCS_GUEST_IA32_EFER">VMCS_GUEST_IA32_EFER</a>, <a class="local col0 ref" href="#100efer" title='efer' data-ref="100efer" data-ref-filename="100efer">efer</a>);</td></tr>
<tr><th id="1345">1345</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#346" title="0x00004012" data-ref="_M/VMCS_ENTRY_CTLS">VMCS_ENTRY_CTLS</a>, <a class="local col1 ref" href="#101ctls1" title='ctls1' data-ref="101ctls1" data-ref-filename="101ctls1">ctls1</a>);</td></tr>
<tr><th id="1346">1346</th><td>	}</td></tr>
<tr><th id="1347">1347</th><td></td></tr>
<tr><th id="1348">1348</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#457" title="0x00006800" data-ref="_M/VMCS_GUEST_CR0">VMCS_GUEST_CR0</a>, <a class="local col9 ref" href="#99cr0" title='cr0' data-ref="99cr0" data-ref-filename="99cr0">cr0</a>);</td></tr>
<tr><th id="1349">1349</th><td>	<a class="tu ref fn" href="#vmx_inkernel_advance" title='vmx_inkernel_advance' data-use='c' data-ref="vmx_inkernel_advance" data-ref-filename="vmx_inkernel_advance">vmx_inkernel_advance</a>();</td></tr>
<tr><th id="1350">1350</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="1351">1351</th><td>}</td></tr>
<tr><th id="1352">1352</th><td></td></tr>
<tr><th id="1353">1353</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="1354">1354</th><td><dfn class="tu decl def fn" id="vmx_inkernel_handle_cr4" title='vmx_inkernel_handle_cr4' data-type='int vmx_inkernel_handle_cr4(struct nvmm_machine * mach, struct nvmm_cpu * vcpu, uint64_t qual)' data-ref="vmx_inkernel_handle_cr4" data-ref-filename="vmx_inkernel_handle_cr4">vmx_inkernel_handle_cr4</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col2 decl" id="102mach" title='mach' data-type='struct nvmm_machine *' data-ref="102mach" data-ref-filename="102mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col3 decl" id="103vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="103vcpu" data-ref-filename="103vcpu">vcpu</dfn>,</td></tr>
<tr><th id="1355">1355</th><td>    <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col4 decl" id="104qual" title='qual' data-type='uint64_t' data-ref="104qual" data-ref-filename="104qual">qual</dfn>)</td></tr>
<tr><th id="1356">1356</th><td>{</td></tr>
<tr><th id="1357">1357</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col5 decl" id="105cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="105cpudata" data-ref-filename="105cpudata">cpudata</dfn> = <a class="local col3 ref" href="#103vcpu" title='vcpu' data-ref="103vcpu" data-ref-filename="103vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1358">1358</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col6 decl" id="106type" title='type' data-type='uint64_t' data-ref="106type" data-ref-filename="106type">type</dfn>, <dfn class="local col7 decl" id="107gpr" title='gpr' data-type='uint64_t' data-ref="107gpr" data-ref-filename="107gpr">gpr</dfn>, <dfn class="local col8 decl" id="108cr4" title='cr4' data-type='uint64_t' data-ref="108cr4" data-ref-filename="108cr4">cr4</dfn>;</td></tr>
<tr><th id="1359">1359</th><td></td></tr>
<tr><th id="1360">1360</th><td>	<a class="local col6 ref" href="#106type" title='type' data-ref="106type" data-ref-filename="106type">type</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((qual) &amp; ((((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col4 ref" href="#104qual" title='qual' data-ref="104qual" data-ref-filename="104qual">qual</a>, <a class="macro" href="#1277" title="(((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_QUAL_CR_TYPE">VMX_QUAL_CR_TYPE</a>);</td></tr>
<tr><th id="1361">1361</th><td>	<b>if</b> (<a class="local col6 ref" href="#106type" title='type' data-ref="106type" data-ref-filename="106type">type</a> != <a class="macro" href="#1278" title="0" data-ref="_M/CR_TYPE_WRITE">CR_TYPE_WRITE</a>) {</td></tr>
<tr><th id="1362">1362</th><td>		<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="1363">1363</th><td>	}</td></tr>
<tr><th id="1364">1364</th><td></td></tr>
<tr><th id="1365">1365</th><td>	<a class="local col7 ref" href="#107gpr" title='gpr' data-ref="107gpr" data-ref-filename="107gpr">gpr</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((qual) &amp; ((((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col4 ref" href="#104qual" title='qual' data-ref="104qual" data-ref-filename="104qual">qual</a>, <a class="macro" href="#1283" title="(((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_QUAL_CR_GPR">VMX_QUAL_CR_GPR</a>);</td></tr>
<tr><th id="1366">1366</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect(((gpr &lt; 16)) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;gpr &lt; 16&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 1366))" data-ref="_M/KASSERT">KASSERT</a>(<a class="local col7 ref" href="#107gpr" title='gpr' data-ref="107gpr" data-ref-filename="107gpr">gpr</a> &lt; <var>16</var>);</td></tr>
<tr><th id="1367">1367</th><td></td></tr>
<tr><th id="1368">1368</th><td>	<b>if</b> (<a class="local col7 ref" href="#107gpr" title='gpr' data-ref="107gpr" data-ref-filename="107gpr">gpr</a> == <a class="macro" href="nvmm_x86.h.html#123" title="4" data-ref="_M/NVMM_X64_GPR_RSP">NVMM_X64_GPR_RSP</a>) {</td></tr>
<tr><th id="1369">1369</th><td>		<a class="local col7 ref" href="#107gpr" title='gpr' data-ref="107gpr" data-ref-filename="107gpr">gpr</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#471" title="0x0000681C" data-ref="_M/VMCS_GUEST_RSP">VMCS_GUEST_RSP</a>);</td></tr>
<tr><th id="1370">1370</th><td>	} <b>else</b> {</td></tr>
<tr><th id="1371">1371</th><td>		<a class="local col7 ref" href="#107gpr" title='gpr' data-ref="107gpr" data-ref-filename="107gpr">gpr</a> = <a class="local col5 ref" href="#105cpudata" title='cpudata' data-ref="105cpudata" data-ref-filename="105cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="local col7 ref" href="#107gpr" title='gpr' data-ref="107gpr" data-ref-filename="107gpr">gpr</a>];</td></tr>
<tr><th id="1372">1372</th><td>	}</td></tr>
<tr><th id="1373">1373</th><td></td></tr>
<tr><th id="1374">1374</th><td>	<a class="local col8 ref" href="#108cr4" title='cr4' data-ref="108cr4" data-ref-filename="108cr4">cr4</a> = <a class="local col7 ref" href="#107gpr" title='gpr' data-ref="107gpr" data-ref-filename="107gpr">gpr</a> | <a class="macro" href="../../../arch/x86/include/specialreg.h.html#112" title="0x00002000" data-ref="_M/CR4_VMXE">CR4_VMXE</a>;</td></tr>
<tr><th id="1375">1375</th><td></td></tr>
<tr><th id="1376">1376</th><td>	<b>if</b> (<a class="tu ref fn" href="#vmx_check_cr" title='vmx_check_cr' data-use='c' data-ref="vmx_check_cr" data-ref-filename="vmx_check_cr">vmx_check_cr</a>(<a class="local col8 ref" href="#108cr4" title='cr4' data-ref="108cr4" data-ref-filename="108cr4">cr4</a>, <a class="tu ref" href="#vmx_cr4_fixed0" title='vmx_cr4_fixed0' data-use='r' data-ref="vmx_cr4_fixed0" data-ref-filename="vmx_cr4_fixed0">vmx_cr4_fixed0</a>, <a class="tu ref" href="#vmx_cr4_fixed1" title='vmx_cr4_fixed1' data-use='r' data-ref="vmx_cr4_fixed1" data-ref-filename="vmx_cr4_fixed1">vmx_cr4_fixed1</a>) == -<var>1</var>) {</td></tr>
<tr><th id="1377">1377</th><td>		<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="1378">1378</th><td>	}</td></tr>
<tr><th id="1379">1379</th><td></td></tr>
<tr><th id="1380">1380</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#459" title="0x00006804" data-ref="_M/VMCS_GUEST_CR4">VMCS_GUEST_CR4</a>, <a class="local col8 ref" href="#108cr4" title='cr4' data-ref="108cr4" data-ref-filename="108cr4">cr4</a>);</td></tr>
<tr><th id="1381">1381</th><td>	<a class="tu ref fn" href="#vmx_inkernel_advance" title='vmx_inkernel_advance' data-use='c' data-ref="vmx_inkernel_advance" data-ref-filename="vmx_inkernel_advance">vmx_inkernel_advance</a>();</td></tr>
<tr><th id="1382">1382</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="1383">1383</th><td>}</td></tr>
<tr><th id="1384">1384</th><td></td></tr>
<tr><th id="1385">1385</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="1386">1386</th><td><dfn class="tu decl def fn" id="vmx_inkernel_handle_cr8" title='vmx_inkernel_handle_cr8' data-type='int vmx_inkernel_handle_cr8(struct nvmm_machine * mach, struct nvmm_cpu * vcpu, uint64_t qual)' data-ref="vmx_inkernel_handle_cr8" data-ref-filename="vmx_inkernel_handle_cr8">vmx_inkernel_handle_cr8</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col9 decl" id="109mach" title='mach' data-type='struct nvmm_machine *' data-ref="109mach" data-ref-filename="109mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col0 decl" id="110vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="110vcpu" data-ref-filename="110vcpu">vcpu</dfn>,</td></tr>
<tr><th id="1387">1387</th><td>    <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col1 decl" id="111qual" title='qual' data-type='uint64_t' data-ref="111qual" data-ref-filename="111qual">qual</dfn>)</td></tr>
<tr><th id="1388">1388</th><td>{</td></tr>
<tr><th id="1389">1389</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col2 decl" id="112cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="112cpudata" data-ref-filename="112cpudata">cpudata</dfn> = <a class="local col0 ref" href="#110vcpu" title='vcpu' data-ref="110vcpu" data-ref-filename="110vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1390">1390</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col3 decl" id="113type" title='type' data-type='uint64_t' data-ref="113type" data-ref-filename="113type">type</dfn>, <dfn class="local col4 decl" id="114gpr" title='gpr' data-type='uint64_t' data-ref="114gpr" data-ref-filename="114gpr">gpr</dfn>;</td></tr>
<tr><th id="1391">1391</th><td>	<a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="local col5 decl" id="115write" title='write' data-type='_Bool' data-ref="115write" data-ref-filename="115write">write</dfn>;</td></tr>
<tr><th id="1392">1392</th><td></td></tr>
<tr><th id="1393">1393</th><td>	<a class="local col3 ref" href="#113type" title='type' data-ref="113type" data-ref-filename="113type">type</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((qual) &amp; ((((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col1 ref" href="#111qual" title='qual' data-ref="111qual" data-ref-filename="111qual">qual</a>, <a class="macro" href="#1277" title="(((((uintmax_t)((( ((5))&gt;((4)))?((5)):((4))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((4)))?((5)):((4))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((4)))?((5)):((4)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((4)))?((5)):((4)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_QUAL_CR_TYPE">VMX_QUAL_CR_TYPE</a>);</td></tr>
<tr><th id="1394">1394</th><td>	<b>if</b> (<a class="local col3 ref" href="#113type" title='type' data-ref="113type" data-ref-filename="113type">type</a> == <a class="macro" href="#1278" title="0" data-ref="_M/CR_TYPE_WRITE">CR_TYPE_WRITE</a>) {</td></tr>
<tr><th id="1395">1395</th><td>		<a class="local col5 ref" href="#115write" title='write' data-ref="115write" data-ref-filename="115write">write</a> = <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="1396">1396</th><td>	} <b>else</b> <b>if</b> (<a class="local col3 ref" href="#113type" title='type' data-ref="113type" data-ref-filename="113type">type</a> == <a class="macro" href="#1279" title="1" data-ref="_M/CR_TYPE_READ">CR_TYPE_READ</a>) {</td></tr>
<tr><th id="1397">1397</th><td>		<a class="local col5 ref" href="#115write" title='write' data-ref="115write" data-ref-filename="115write">write</a> = <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="1398">1398</th><td>	} <b>else</b> {</td></tr>
<tr><th id="1399">1399</th><td>		<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="1400">1400</th><td>	}</td></tr>
<tr><th id="1401">1401</th><td></td></tr>
<tr><th id="1402">1402</th><td>	<a class="local col4 ref" href="#114gpr" title='gpr' data-ref="114gpr" data-ref-filename="114gpr">gpr</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((qual) &amp; ((((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col1 ref" href="#111qual" title='qual' data-ref="111qual" data-ref-filename="111qual">qual</a>, <a class="macro" href="#1283" title="(((((uintmax_t)((( ((11))&gt;((8)))?((11)):((8))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&gt;((8)))?((11)):((8))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((11))&lt;=((8)))?((11)):((8)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((11))&lt;=((8)))?((11)):((8)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_QUAL_CR_GPR">VMX_QUAL_CR_GPR</a>);</td></tr>
<tr><th id="1403">1403</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect(((gpr &lt; 16)) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;gpr &lt; 16&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 1403))" data-ref="_M/KASSERT">KASSERT</a>(<a class="local col4 ref" href="#114gpr" title='gpr' data-ref="114gpr" data-ref-filename="114gpr">gpr</a> &lt; <var>16</var>);</td></tr>
<tr><th id="1404">1404</th><td></td></tr>
<tr><th id="1405">1405</th><td>	<b>if</b> (<a class="local col5 ref" href="#115write" title='write' data-ref="115write" data-ref-filename="115write">write</a>) {</td></tr>
<tr><th id="1406">1406</th><td>		<b>if</b> (<a class="local col4 ref" href="#114gpr" title='gpr' data-ref="114gpr" data-ref-filename="114gpr">gpr</a> == <a class="macro" href="nvmm_x86.h.html#123" title="4" data-ref="_M/NVMM_X64_GPR_RSP">NVMM_X64_GPR_RSP</a>) {</td></tr>
<tr><th id="1407">1407</th><td>			<a class="local col2 ref" href="#112cpudata" title='cpudata' data-ref="112cpudata" data-ref-filename="112cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gcr8" title='vmx_cpudata::gcr8' data-use='w' data-ref="vmx_cpudata::gcr8" data-ref-filename="vmx_cpudata..gcr8">gcr8</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#471" title="0x0000681C" data-ref="_M/VMCS_GUEST_RSP">VMCS_GUEST_RSP</a>);</td></tr>
<tr><th id="1408">1408</th><td>		} <b>else</b> {</td></tr>
<tr><th id="1409">1409</th><td>			<a class="local col2 ref" href="#112cpudata" title='cpudata' data-ref="112cpudata" data-ref-filename="112cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gcr8" title='vmx_cpudata::gcr8' data-use='w' data-ref="vmx_cpudata::gcr8" data-ref-filename="vmx_cpudata..gcr8">gcr8</a> = <a class="local col2 ref" href="#112cpudata" title='cpudata' data-ref="112cpudata" data-ref-filename="112cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="local col4 ref" href="#114gpr" title='gpr' data-ref="114gpr" data-ref-filename="114gpr">gpr</a>];</td></tr>
<tr><th id="1410">1410</th><td>		}</td></tr>
<tr><th id="1411">1411</th><td>	} <b>else</b> {</td></tr>
<tr><th id="1412">1412</th><td>		<b>if</b> (<a class="local col4 ref" href="#114gpr" title='gpr' data-ref="114gpr" data-ref-filename="114gpr">gpr</a> == <a class="macro" href="nvmm_x86.h.html#123" title="4" data-ref="_M/NVMM_X64_GPR_RSP">NVMM_X64_GPR_RSP</a>) {</td></tr>
<tr><th id="1413">1413</th><td>			<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#471" title="0x0000681C" data-ref="_M/VMCS_GUEST_RSP">VMCS_GUEST_RSP</a>, <a class="local col2 ref" href="#112cpudata" title='cpudata' data-ref="112cpudata" data-ref-filename="112cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gcr8" title='vmx_cpudata::gcr8' data-use='r' data-ref="vmx_cpudata::gcr8" data-ref-filename="vmx_cpudata..gcr8">gcr8</a>);</td></tr>
<tr><th id="1414">1414</th><td>		} <b>else</b> {</td></tr>
<tr><th id="1415">1415</th><td>			<a class="local col2 ref" href="#112cpudata" title='cpudata' data-ref="112cpudata" data-ref-filename="112cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="local col4 ref" href="#114gpr" title='gpr' data-ref="114gpr" data-ref-filename="114gpr">gpr</a>] = <a class="local col2 ref" href="#112cpudata" title='cpudata' data-ref="112cpudata" data-ref-filename="112cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gcr8" title='vmx_cpudata::gcr8' data-use='r' data-ref="vmx_cpudata::gcr8" data-ref-filename="vmx_cpudata..gcr8">gcr8</a>;</td></tr>
<tr><th id="1416">1416</th><td>		}</td></tr>
<tr><th id="1417">1417</th><td>	}</td></tr>
<tr><th id="1418">1418</th><td></td></tr>
<tr><th id="1419">1419</th><td>	<a class="tu ref fn" href="#vmx_inkernel_advance" title='vmx_inkernel_advance' data-use='c' data-ref="vmx_inkernel_advance" data-ref-filename="vmx_inkernel_advance">vmx_inkernel_advance</a>();</td></tr>
<tr><th id="1420">1420</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="1421">1421</th><td>}</td></tr>
<tr><th id="1422">1422</th><td></td></tr>
<tr><th id="1423">1423</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1424">1424</th><td><dfn class="tu decl def fn" id="vmx_exit_cr" title='vmx_exit_cr' data-type='void vmx_exit_cr(struct nvmm_machine * mach, struct nvmm_cpu * vcpu, struct nvmm_exit * exit)' data-ref="vmx_exit_cr" data-ref-filename="vmx_exit_cr">vmx_exit_cr</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col6 decl" id="116mach" title='mach' data-type='struct nvmm_machine *' data-ref="116mach" data-ref-filename="116mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col7 decl" id="117vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="117vcpu" data-ref-filename="117vcpu">vcpu</dfn>,</td></tr>
<tr><th id="1425">1425</th><td>    <b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_exit" title='nvmm_exit' data-ref="nvmm_exit" data-ref-filename="nvmm_exit">nvmm_exit</a> *<dfn class="local col8 decl" id="118exit" title='exit' data-type='struct nvmm_exit *' data-ref="118exit" data-ref-filename="118exit">exit</dfn>)</td></tr>
<tr><th id="1426">1426</th><td>{</td></tr>
<tr><th id="1427">1427</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col9 decl" id="119qual" title='qual' data-type='uint64_t' data-ref="119qual" data-ref-filename="119qual">qual</dfn>;</td></tr>
<tr><th id="1428">1428</th><td>	<em>int</em> <dfn class="local col0 decl" id="120ret" title='ret' data-type='int' data-ref="120ret" data-ref-filename="120ret">ret</dfn>;</td></tr>
<tr><th id="1429">1429</th><td></td></tr>
<tr><th id="1430">1430</th><td>	<a class="local col9 ref" href="#119qual" title='qual' data-ref="119qual" data-ref-filename="119qual">qual</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#450" title="0x00006400" data-ref="_M/VMCS_EXIT_QUALIFICATION">VMCS_EXIT_QUALIFICATION</a>);</td></tr>
<tr><th id="1431">1431</th><td></td></tr>
<tr><th id="1432">1432</th><td>	<b>switch</b> (<a class="macro" href="../../../sys/cdefs.h.html#606" title="(((qual) &amp; ((((((uintmax_t)((( ((3))&gt;((0)))?((3)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&gt;((0)))?((3)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((3))&lt;=((0)))?((3)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&lt;=((0)))?((3)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((3))&gt;((0)))?((3)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&gt;((0)))?((3)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((3))&lt;=((0)))?((3)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&lt;=((0)))?((3)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((3))&gt;((0)))?((3)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&gt;((0)))?((3)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((3))&lt;=((0)))?((3)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&lt;=((0)))?((3)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((3))&gt;((0)))?((3)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&gt;((0)))?((3)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((3))&lt;=((0)))?((3)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&lt;=((0)))?((3)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col9 ref" href="#119qual" title='qual' data-ref="119qual" data-ref-filename="119qual">qual</a>, <a class="macro" href="#1276" title="(((((uintmax_t)((( ((3))&gt;((0)))?((3)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&gt;((0)))?((3)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((3))&lt;=((0)))?((3)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&lt;=((0)))?((3)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_QUAL_CR_NUM">VMX_QUAL_CR_NUM</a>)) {</td></tr>
<tr><th id="1433">1433</th><td>	<b>case</b> <var>0</var>:</td></tr>
<tr><th id="1434">1434</th><td>		<a class="local col0 ref" href="#120ret" title='ret' data-ref="120ret" data-ref-filename="120ret">ret</a> = <a class="tu ref fn" href="#vmx_inkernel_handle_cr0" title='vmx_inkernel_handle_cr0' data-use='c' data-ref="vmx_inkernel_handle_cr0" data-ref-filename="vmx_inkernel_handle_cr0">vmx_inkernel_handle_cr0</a>(<a class="local col6 ref" href="#116mach" title='mach' data-ref="116mach" data-ref-filename="116mach">mach</a>, <a class="local col7 ref" href="#117vcpu" title='vcpu' data-ref="117vcpu" data-ref-filename="117vcpu">vcpu</a>, <a class="local col9 ref" href="#119qual" title='qual' data-ref="119qual" data-ref-filename="119qual">qual</a>);</td></tr>
<tr><th id="1435">1435</th><td>		<b>break</b>;</td></tr>
<tr><th id="1436">1436</th><td>	<b>case</b> <var>4</var>:</td></tr>
<tr><th id="1437">1437</th><td>		<a class="local col0 ref" href="#120ret" title='ret' data-ref="120ret" data-ref-filename="120ret">ret</a> = <a class="tu ref fn" href="#vmx_inkernel_handle_cr4" title='vmx_inkernel_handle_cr4' data-use='c' data-ref="vmx_inkernel_handle_cr4" data-ref-filename="vmx_inkernel_handle_cr4">vmx_inkernel_handle_cr4</a>(<a class="local col6 ref" href="#116mach" title='mach' data-ref="116mach" data-ref-filename="116mach">mach</a>, <a class="local col7 ref" href="#117vcpu" title='vcpu' data-ref="117vcpu" data-ref-filename="117vcpu">vcpu</a>, <a class="local col9 ref" href="#119qual" title='qual' data-ref="119qual" data-ref-filename="119qual">qual</a>);</td></tr>
<tr><th id="1438">1438</th><td>		<b>break</b>;</td></tr>
<tr><th id="1439">1439</th><td>	<b>case</b> <var>8</var>:</td></tr>
<tr><th id="1440">1440</th><td>		<a class="local col0 ref" href="#120ret" title='ret' data-ref="120ret" data-ref-filename="120ret">ret</a> = <a class="tu ref fn" href="#vmx_inkernel_handle_cr8" title='vmx_inkernel_handle_cr8' data-use='c' data-ref="vmx_inkernel_handle_cr8" data-ref-filename="vmx_inkernel_handle_cr8">vmx_inkernel_handle_cr8</a>(<a class="local col6 ref" href="#116mach" title='mach' data-ref="116mach" data-ref-filename="116mach">mach</a>, <a class="local col7 ref" href="#117vcpu" title='vcpu' data-ref="117vcpu" data-ref-filename="117vcpu">vcpu</a>, <a class="local col9 ref" href="#119qual" title='qual' data-ref="119qual" data-ref-filename="119qual">qual</a>);</td></tr>
<tr><th id="1441">1441</th><td>		<b>break</b>;</td></tr>
<tr><th id="1442">1442</th><td>	<b>default</b>:</td></tr>
<tr><th id="1443">1443</th><td>		<a class="local col0 ref" href="#120ret" title='ret' data-ref="120ret" data-ref-filename="120ret">ret</a> = -<var>1</var>;</td></tr>
<tr><th id="1444">1444</th><td>		<b>break</b>;</td></tr>
<tr><th id="1445">1445</th><td>	}</td></tr>
<tr><th id="1446">1446</th><td></td></tr>
<tr><th id="1447">1447</th><td>	<b>if</b> (<a class="local col0 ref" href="#120ret" title='ret' data-ref="120ret" data-ref-filename="120ret">ret</a> == -<var>1</var>) {</td></tr>
<tr><th id="1448">1448</th><td>		<a class="tu ref fn" href="#vmx_inject_gp" title='vmx_inject_gp' data-use='c' data-ref="vmx_inject_gp" data-ref-filename="vmx_inject_gp">vmx_inject_gp</a>(<a class="local col7 ref" href="#117vcpu" title='vcpu' data-ref="117vcpu" data-ref-filename="117vcpu">vcpu</a>);</td></tr>
<tr><th id="1449">1449</th><td>	}</td></tr>
<tr><th id="1450">1450</th><td></td></tr>
<tr><th id="1451">1451</th><td>	<a class="local col8 ref" href="#118exit" title='exit' data-ref="118exit" data-ref-filename="118exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#51" title="0x0000000000000000ULL" data-ref="_M/NVMM_EXIT_NONE">NVMM_EXIT_NONE</a>;</td></tr>
<tr><th id="1452">1452</th><td>}</td></tr>
<tr><th id="1453">1453</th><td></td></tr>
<tr><th id="1454">1454</th><td><u>#define <dfn class="macro" id="_M/VMX_QUAL_IO_SIZE" data-ref="_M/VMX_QUAL_IO_SIZE">VMX_QUAL_IO_SIZE</dfn>	__BITS(2,0)</u></td></tr>
<tr><th id="1455">1455</th><td><u>#define		<dfn class="macro" id="_M/IO_SIZE_8" data-ref="_M/IO_SIZE_8">IO_SIZE_8</dfn>	0</u></td></tr>
<tr><th id="1456">1456</th><td><u>#define		<dfn class="macro" id="_M/IO_SIZE_16" data-ref="_M/IO_SIZE_16">IO_SIZE_16</dfn>	1</u></td></tr>
<tr><th id="1457">1457</th><td><u>#define		<dfn class="macro" id="_M/IO_SIZE_32" data-ref="_M/IO_SIZE_32">IO_SIZE_32</dfn>	3</u></td></tr>
<tr><th id="1458">1458</th><td><u>#define <dfn class="macro" id="_M/VMX_QUAL_IO_IN" data-ref="_M/VMX_QUAL_IO_IN">VMX_QUAL_IO_IN</dfn>		__BIT(3)</u></td></tr>
<tr><th id="1459">1459</th><td><u>#define <dfn class="macro" id="_M/VMX_QUAL_IO_STR" data-ref="_M/VMX_QUAL_IO_STR">VMX_QUAL_IO_STR</dfn>		__BIT(4)</u></td></tr>
<tr><th id="1460">1460</th><td><u>#define <dfn class="macro" id="_M/VMX_QUAL_IO_REP" data-ref="_M/VMX_QUAL_IO_REP">VMX_QUAL_IO_REP</dfn>		__BIT(5)</u></td></tr>
<tr><th id="1461">1461</th><td><u>#define <dfn class="macro" id="_M/VMX_QUAL_IO_DX" data-ref="_M/VMX_QUAL_IO_DX">VMX_QUAL_IO_DX</dfn>		__BIT(6)</u></td></tr>
<tr><th id="1462">1462</th><td><u>#define <dfn class="macro" id="_M/VMX_QUAL_IO_PORT" data-ref="_M/VMX_QUAL_IO_PORT">VMX_QUAL_IO_PORT</dfn>	__BITS(31,16)</u></td></tr>
<tr><th id="1463">1463</th><td></td></tr>
<tr><th id="1464">1464</th><td><u>#define <dfn class="macro" id="_M/VMX_INFO_IO_ADRSIZE" data-ref="_M/VMX_INFO_IO_ADRSIZE">VMX_INFO_IO_ADRSIZE</dfn>	__BITS(9,7)</u></td></tr>
<tr><th id="1465">1465</th><td><u>#define		<dfn class="macro" id="_M/IO_ADRSIZE_16" data-ref="_M/IO_ADRSIZE_16">IO_ADRSIZE_16</dfn>	0</u></td></tr>
<tr><th id="1466">1466</th><td><u>#define		<dfn class="macro" id="_M/IO_ADRSIZE_32" data-ref="_M/IO_ADRSIZE_32">IO_ADRSIZE_32</dfn>	1</u></td></tr>
<tr><th id="1467">1467</th><td><u>#define		<dfn class="macro" id="_M/IO_ADRSIZE_64" data-ref="_M/IO_ADRSIZE_64">IO_ADRSIZE_64</dfn>	2</u></td></tr>
<tr><th id="1468">1468</th><td><u>#define <dfn class="macro" id="_M/VMX_INFO_IO_SEG" data-ref="_M/VMX_INFO_IO_SEG">VMX_INFO_IO_SEG</dfn>		__BITS(17,15)</u></td></tr>
<tr><th id="1469">1469</th><td></td></tr>
<tr><th id="1470">1470</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1471">1471</th><td><dfn class="tu decl def fn" id="vmx_exit_io" title='vmx_exit_io' data-type='void vmx_exit_io(struct nvmm_machine * mach, struct nvmm_cpu * vcpu, struct nvmm_exit * exit)' data-ref="vmx_exit_io" data-ref-filename="vmx_exit_io">vmx_exit_io</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col1 decl" id="121mach" title='mach' data-type='struct nvmm_machine *' data-ref="121mach" data-ref-filename="121mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col2 decl" id="122vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="122vcpu" data-ref-filename="122vcpu">vcpu</dfn>,</td></tr>
<tr><th id="1472">1472</th><td>    <b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_exit" title='nvmm_exit' data-ref="nvmm_exit" data-ref-filename="nvmm_exit">nvmm_exit</a> *<dfn class="local col3 decl" id="123exit" title='exit' data-type='struct nvmm_exit *' data-ref="123exit" data-ref-filename="123exit">exit</dfn>)</td></tr>
<tr><th id="1473">1473</th><td>{</td></tr>
<tr><th id="1474">1474</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col4 decl" id="124qual" title='qual' data-type='uint64_t' data-ref="124qual" data-ref-filename="124qual">qual</dfn>, <dfn class="local col5 decl" id="125info" title='info' data-type='uint64_t' data-ref="125info" data-ref-filename="125info">info</dfn>, <dfn class="local col6 decl" id="126inslen" title='inslen' data-type='uint64_t' data-ref="126inslen" data-ref-filename="126inslen">inslen</dfn>, <dfn class="local col7 decl" id="127rip" title='rip' data-type='uint64_t' data-ref="127rip" data-ref-filename="127rip">rip</dfn>;</td></tr>
<tr><th id="1475">1475</th><td></td></tr>
<tr><th id="1476">1476</th><td>	<a class="local col4 ref" href="#124qual" title='qual' data-ref="124qual" data-ref-filename="124qual">qual</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#450" title="0x00006400" data-ref="_M/VMCS_EXIT_QUALIFICATION">VMCS_EXIT_QUALIFICATION</a>);</td></tr>
<tr><th id="1477">1477</th><td>	<a class="local col5 ref" href="#125info" title='info' data-ref="125info" data-ref-filename="125info">info</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#408" title="0x0000440E" data-ref="_M/VMCS_EXIT_INSTRUCTION_INFO">VMCS_EXIT_INSTRUCTION_INFO</a>);</td></tr>
<tr><th id="1478">1478</th><td></td></tr>
<tr><th id="1479">1479</th><td>	<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#53" title="0x0000000000000002ULL" data-ref="_M/NVMM_EXIT_IO">NVMM_EXIT_IO</a>;</td></tr>
<tr><th id="1480">1480</th><td></td></tr>
<tr><th id="1481">1481</th><td>	<b>if</b> (<a class="local col4 ref" href="#124qual" title='qual' data-ref="124qual" data-ref-filename="124qual">qual</a> &amp; <a class="macro" href="#1458" title="(((uintmax_t)(3) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((3) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_QUAL_IO_IN">VMX_QUAL_IO_IN</a>) {</td></tr>
<tr><th id="1482">1482</th><td>		<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::type" title='nvmm_exit_io::type' data-ref="nvmm_exit_io::type" data-ref-filename="nvmm_exit_io..type">type</a> = <a class="enum" href="nvmm_x86.h.html#NVMM_EXIT_IO_IN" title='NVMM_EXIT_IO_IN' data-ref="NVMM_EXIT_IO_IN" data-ref-filename="NVMM_EXIT_IO_IN">NVMM_EXIT_IO_IN</a>;</td></tr>
<tr><th id="1483">1483</th><td>	} <b>else</b> {</td></tr>
<tr><th id="1484">1484</th><td>		<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::type" title='nvmm_exit_io::type' data-ref="nvmm_exit_io::type" data-ref-filename="nvmm_exit_io..type">type</a> = <a class="enum" href="nvmm_x86.h.html#NVMM_EXIT_IO_OUT" title='NVMM_EXIT_IO_OUT' data-ref="NVMM_EXIT_IO_OUT" data-ref-filename="NVMM_EXIT_IO_OUT">NVMM_EXIT_IO_OUT</a>;</td></tr>
<tr><th id="1485">1485</th><td>	}</td></tr>
<tr><th id="1486">1486</th><td></td></tr>
<tr><th id="1487">1487</th><td>	<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::port" title='nvmm_exit_io::port' data-ref="nvmm_exit_io::port" data-ref-filename="nvmm_exit_io..port">port</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((qual) &amp; ((((((uintmax_t)((( ((31))&gt;((16)))?((31)):((16))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&gt;((16)))?((31)):((16))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((31))&lt;=((16)))?((31)):((16)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&lt;=((16)))?((31)):((16)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((31))&gt;((16)))?((31)):((16))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&gt;((16)))?((31)):((16))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((31))&lt;=((16)))?((31)):((16)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&lt;=((16)))?((31)):((16)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((31))&gt;((16)))?((31)):((16))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&gt;((16)))?((31)):((16))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((31))&lt;=((16)))?((31)):((16)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&lt;=((16)))?((31)):((16)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((31))&gt;((16)))?((31)):((16))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&gt;((16)))?((31)):((16))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((31))&lt;=((16)))?((31)):((16)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&lt;=((16)))?((31)):((16)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col4 ref" href="#124qual" title='qual' data-ref="124qual" data-ref-filename="124qual">qual</a>, <a class="macro" href="#1462" title="(((((uintmax_t)((( ((31))&gt;((16)))?((31)):((16))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&gt;((16)))?((31)):((16))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((31))&lt;=((16)))?((31)):((16)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((31))&lt;=((16)))?((31)):((16)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_QUAL_IO_PORT">VMX_QUAL_IO_PORT</a>);</td></tr>
<tr><th id="1488">1488</th><td></td></tr>
<tr><th id="1489">1489</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#279" title="(__builtin_expect((((((info) &amp; ((((((uintmax_t)((( ((17))&gt;((15)))?((17)):((15))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&gt;((15)))?((17)):((15))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((17))&lt;=((15)))?((17)):((15)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&lt;=((15)))?((17)):((15)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((17))&gt;((15)))?((17)):((15))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&gt;((15)))?((17)):((15))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((17))&lt;=((15)))?((17)):((15)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&lt;=((15)))?((17)):((15)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((17))&gt;((15)))?((17)):((15))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&gt;((15)))?((17)):((15))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((17))&lt;=((15)))?((17)):((15)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&lt;=((15)))?((17)):((15)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((17))&gt;((15)))?((17)):((15))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&gt;((15)))?((17)):((15))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((17))&lt;=((15)))?((17)):((15)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&lt;=((15)))?((17)):((15)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))))) &lt; 6)) != 0, 1) ? (void)0 : kern_assert(&quot;kernel %sassertion \&quot;%s\&quot; failed: file \&quot;%s\&quot;, line %d &quot;, &quot;diagnostic &quot;, &quot;__SHIFTOUT(info, VMX_INFO_IO_SEG) &lt; 6&quot;, &quot;/___NETBSD_SRC___/objdir.amd64/sys/modules/arch/x86/amd64-xen/sys/modules/nvmm/../../../../../../../../../sys/dev/nvmm/x86/nvmm_x86_vmx.c&quot;, 1489))" data-ref="_M/KASSERT">KASSERT</a>(<a class="macro" href="../../../sys/cdefs.h.html#606" title="(((info) &amp; ((((((uintmax_t)((( ((17))&gt;((15)))?((17)):((15))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&gt;((15)))?((17)):((15))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((17))&lt;=((15)))?((17)):((15)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&lt;=((15)))?((17)):((15)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((17))&gt;((15)))?((17)):((15))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&gt;((15)))?((17)):((15))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((17))&lt;=((15)))?((17)):((15)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&lt;=((15)))?((17)):((15)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((17))&gt;((15)))?((17)):((15))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&gt;((15)))?((17)):((15))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((17))&lt;=((15)))?((17)):((15)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&lt;=((15)))?((17)):((15)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((17))&gt;((15)))?((17)):((15))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&gt;((15)))?((17)):((15))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((17))&lt;=((15)))?((17)):((15)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&lt;=((15)))?((17)):((15)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col5 ref" href="#125info" title='info' data-ref="125info" data-ref-filename="125info">info</a>, <a class="macro" href="#1468" title="(((((uintmax_t)((( ((17))&gt;((15)))?((17)):((15))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&gt;((15)))?((17)):((15))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((17))&lt;=((15)))?((17)):((15)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&lt;=((15)))?((17)):((15)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_INFO_IO_SEG">VMX_INFO_IO_SEG</a>) &lt; <var>6</var>);</td></tr>
<tr><th id="1490">1490</th><td>	<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::seg" title='nvmm_exit_io::seg' data-ref="nvmm_exit_io::seg" data-ref-filename="nvmm_exit_io..seg">seg</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((info) &amp; ((((((uintmax_t)((( ((17))&gt;((15)))?((17)):((15))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&gt;((15)))?((17)):((15))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((17))&lt;=((15)))?((17)):((15)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&lt;=((15)))?((17)):((15)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((17))&gt;((15)))?((17)):((15))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&gt;((15)))?((17)):((15))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((17))&lt;=((15)))?((17)):((15)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&lt;=((15)))?((17)):((15)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((17))&gt;((15)))?((17)):((15))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&gt;((15)))?((17)):((15))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((17))&lt;=((15)))?((17)):((15)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&lt;=((15)))?((17)):((15)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((17))&gt;((15)))?((17)):((15))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&gt;((15)))?((17)):((15))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((17))&lt;=((15)))?((17)):((15)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&lt;=((15)))?((17)):((15)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col5 ref" href="#125info" title='info' data-ref="125info" data-ref-filename="125info">info</a>, <a class="macro" href="#1468" title="(((((uintmax_t)((( ((17))&gt;((15)))?((17)):((15))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&gt;((15)))?((17)):((15))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((17))&lt;=((15)))?((17)):((15)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((17))&lt;=((15)))?((17)):((15)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_INFO_IO_SEG">VMX_INFO_IO_SEG</a>);</td></tr>
<tr><th id="1491">1491</th><td></td></tr>
<tr><th id="1492">1492</th><td>	<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#606" title="(((info) &amp; ((((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col5 ref" href="#125info" title='info' data-ref="125info" data-ref-filename="125info">info</a>, <a class="macro" href="#1464" title="(((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_INFO_IO_ADRSIZE">VMX_INFO_IO_ADRSIZE</a>) == <a class="macro" href="#1467" title="2" data-ref="_M/IO_ADRSIZE_64">IO_ADRSIZE_64</a>) {</td></tr>
<tr><th id="1493">1493</th><td>		<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::address_size" title='nvmm_exit_io::address_size' data-ref="nvmm_exit_io::address_size" data-ref-filename="nvmm_exit_io..address_size">address_size</a> = <var>8</var>;</td></tr>
<tr><th id="1494">1494</th><td>	} <b>else</b> <b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#606" title="(((info) &amp; ((((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col5 ref" href="#125info" title='info' data-ref="125info" data-ref-filename="125info">info</a>, <a class="macro" href="#1464" title="(((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_INFO_IO_ADRSIZE">VMX_INFO_IO_ADRSIZE</a>) == <a class="macro" href="#1466" title="1" data-ref="_M/IO_ADRSIZE_32">IO_ADRSIZE_32</a>) {</td></tr>
<tr><th id="1495">1495</th><td>		<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::address_size" title='nvmm_exit_io::address_size' data-ref="nvmm_exit_io::address_size" data-ref-filename="nvmm_exit_io..address_size">address_size</a> = <var>4</var>;</td></tr>
<tr><th id="1496">1496</th><td>	} <b>else</b> <b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#606" title="(((info) &amp; ((((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col5 ref" href="#125info" title='info' data-ref="125info" data-ref-filename="125info">info</a>, <a class="macro" href="#1464" title="(((((uintmax_t)((( ((9))&gt;((7)))?((9)):((7))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&gt;((7)))?((9)):((7))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((9))&lt;=((7)))?((9)):((7)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((9))&lt;=((7)))?((9)):((7)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_INFO_IO_ADRSIZE">VMX_INFO_IO_ADRSIZE</a>) == <a class="macro" href="#1465" title="0" data-ref="_M/IO_ADRSIZE_16">IO_ADRSIZE_16</a>) {</td></tr>
<tr><th id="1497">1497</th><td>		<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::address_size" title='nvmm_exit_io::address_size' data-ref="nvmm_exit_io::address_size" data-ref-filename="nvmm_exit_io..address_size">address_size</a> = <var>2</var>;</td></tr>
<tr><th id="1498">1498</th><td>	}</td></tr>
<tr><th id="1499">1499</th><td></td></tr>
<tr><th id="1500">1500</th><td>	<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#606" title="(((qual) &amp; ((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col4 ref" href="#124qual" title='qual' data-ref="124qual" data-ref-filename="124qual">qual</a>, <a class="macro" href="#1454" title="(((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_QUAL_IO_SIZE">VMX_QUAL_IO_SIZE</a>) == <a class="macro" href="#1457" title="3" data-ref="_M/IO_SIZE_32">IO_SIZE_32</a>) {</td></tr>
<tr><th id="1501">1501</th><td>		<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::operand_size" title='nvmm_exit_io::operand_size' data-ref="nvmm_exit_io::operand_size" data-ref-filename="nvmm_exit_io..operand_size">operand_size</a> = <var>4</var>;</td></tr>
<tr><th id="1502">1502</th><td>	} <b>else</b> <b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#606" title="(((qual) &amp; ((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col4 ref" href="#124qual" title='qual' data-ref="124qual" data-ref-filename="124qual">qual</a>, <a class="macro" href="#1454" title="(((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_QUAL_IO_SIZE">VMX_QUAL_IO_SIZE</a>) == <a class="macro" href="#1456" title="1" data-ref="_M/IO_SIZE_16">IO_SIZE_16</a>) {</td></tr>
<tr><th id="1503">1503</th><td>		<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::operand_size" title='nvmm_exit_io::operand_size' data-ref="nvmm_exit_io::operand_size" data-ref-filename="nvmm_exit_io..operand_size">operand_size</a> = <var>2</var>;</td></tr>
<tr><th id="1504">1504</th><td>	} <b>else</b> <b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#606" title="(((qual) &amp; ((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col4 ref" href="#124qual" title='qual' data-ref="124qual" data-ref-filename="124qual">qual</a>, <a class="macro" href="#1454" title="(((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_QUAL_IO_SIZE">VMX_QUAL_IO_SIZE</a>) == <a class="macro" href="#1455" title="0" data-ref="_M/IO_SIZE_8">IO_SIZE_8</a>) {</td></tr>
<tr><th id="1505">1505</th><td>		<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::operand_size" title='nvmm_exit_io::operand_size' data-ref="nvmm_exit_io::operand_size" data-ref-filename="nvmm_exit_io..operand_size">operand_size</a> = <var>1</var>;</td></tr>
<tr><th id="1506">1506</th><td>	}</td></tr>
<tr><th id="1507">1507</th><td></td></tr>
<tr><th id="1508">1508</th><td>	<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::rep" title='nvmm_exit_io::rep' data-ref="nvmm_exit_io::rep" data-ref-filename="nvmm_exit_io..rep">rep</a> = (<a class="local col4 ref" href="#124qual" title='qual' data-ref="124qual" data-ref-filename="124qual">qual</a> &amp; <a class="macro" href="#1460" title="(((uintmax_t)(5) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((5) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_QUAL_IO_REP">VMX_QUAL_IO_REP</a>) != <var>0</var>;</td></tr>
<tr><th id="1509">1509</th><td>	<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::str" title='nvmm_exit_io::str' data-ref="nvmm_exit_io::str" data-ref-filename="nvmm_exit_io..str">str</a> = (<a class="local col4 ref" href="#124qual" title='qual' data-ref="124qual" data-ref-filename="124qual">qual</a> &amp; <a class="macro" href="#1459" title="(((uintmax_t)(4) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((4) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_QUAL_IO_STR">VMX_QUAL_IO_STR</a>) != <var>0</var>;</td></tr>
<tr><th id="1510">1510</th><td></td></tr>
<tr><th id="1511">1511</th><td>	<b>if</b> ((<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::type" title='nvmm_exit_io::type' data-ref="nvmm_exit_io::type" data-ref-filename="nvmm_exit_io..type">type</a> == <a class="enum" href="nvmm_x86.h.html#NVMM_EXIT_IO_IN" title='NVMM_EXIT_IO_IN' data-ref="NVMM_EXIT_IO_IN" data-ref-filename="NVMM_EXIT_IO_IN">NVMM_EXIT_IO_IN</a>) &amp;&amp; <a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::str" title='nvmm_exit_io::str' data-ref="nvmm_exit_io::str" data-ref-filename="nvmm_exit_io..str">str</a>) {</td></tr>
<tr><th id="1512">1512</th><td>		<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::seg" title='nvmm_exit_io::seg' data-ref="nvmm_exit_io::seg" data-ref-filename="nvmm_exit_io..seg">seg</a> = <a class="macro" href="nvmm_x86.h.html#106" title="0" data-ref="_M/NVMM_X64_SEG_ES">NVMM_X64_SEG_ES</a>;</td></tr>
<tr><th id="1513">1513</th><td>	}</td></tr>
<tr><th id="1514">1514</th><td></td></tr>
<tr><th id="1515">1515</th><td>	<a class="local col6 ref" href="#126inslen" title='inslen' data-ref="126inslen" data-ref-filename="126inslen">inslen</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#407" title="0x0000440C" data-ref="_M/VMCS_EXIT_INSTRUCTION_LENGTH">VMCS_EXIT_INSTRUCTION_LENGTH</a>);</td></tr>
<tr><th id="1516">1516</th><td>	<a class="local col7 ref" href="#127rip" title='rip' data-ref="127rip" data-ref-filename="127rip">rip</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#472" title="0x0000681E" data-ref="_M/VMCS_GUEST_RIP">VMCS_GUEST_RIP</a>);</td></tr>
<tr><th id="1517">1517</th><td>	<a class="local col3 ref" href="#123exit" title='exit' data-ref="123exit" data-ref-filename="123exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::io" title='nvmm_exit_md::io' data-ref="nvmm_exit_md::io" data-ref-filename="nvmm_exit_md..io">io</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_io::npc" title='nvmm_exit_io::npc' data-ref="nvmm_exit_io::npc" data-ref-filename="nvmm_exit_io..npc">npc</a> = <a class="local col7 ref" href="#127rip" title='rip' data-ref="127rip" data-ref-filename="127rip">rip</a> + <a class="local col6 ref" href="#126inslen" title='inslen' data-ref="126inslen" data-ref-filename="126inslen">inslen</a>;</td></tr>
<tr><th id="1518">1518</th><td></td></tr>
<tr><th id="1519">1519</th><td>	<a class="tu ref fn" href="#vmx_vcpu_state_provide" title='vmx_vcpu_state_provide' data-use='c' data-ref="vmx_vcpu_state_provide" data-ref-filename="vmx_vcpu_state_provide">vmx_vcpu_state_provide</a>(<a class="local col2 ref" href="#122vcpu" title='vcpu' data-ref="122vcpu" data-ref-filename="122vcpu">vcpu</a>,</td></tr>
<tr><th id="1520">1520</th><td>	    <a class="macro" href="nvmm_x86.h.html#211" title="0x02" data-ref="_M/NVMM_X64_STATE_GPRS">NVMM_X64_STATE_GPRS</a> | <a class="macro" href="nvmm_x86.h.html#210" title="0x01" data-ref="_M/NVMM_X64_STATE_SEGS">NVMM_X64_STATE_SEGS</a> |</td></tr>
<tr><th id="1521">1521</th><td>	    <a class="macro" href="nvmm_x86.h.html#212" title="0x04" data-ref="_M/NVMM_X64_STATE_CRS">NVMM_X64_STATE_CRS</a> | <a class="macro" href="nvmm_x86.h.html#214" title="0x10" data-ref="_M/NVMM_X64_STATE_MSRS">NVMM_X64_STATE_MSRS</a>);</td></tr>
<tr><th id="1522">1522</th><td>}</td></tr>
<tr><th id="1523">1523</th><td></td></tr>
<tr><th id="1524">1524</th><td><em>static</em> <em>const</em> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="tu decl def" id="msr_ignore_list" title='msr_ignore_list' data-type='const uint64_t [2]' data-ref="msr_ignore_list" data-ref-filename="msr_ignore_list">msr_ignore_list</dfn>[] = {</td></tr>
<tr><th id="1525">1525</th><td>	<a class="macro" href="../../../arch/x86/include/specialreg.h.html#780" title="0x08b" data-ref="_M/MSR_BIOS_SIGN">MSR_BIOS_SIGN</a>,</td></tr>
<tr><th id="1526">1526</th><td>	<a class="macro" href="../../../arch/x86/include/specialreg.h.html#760" title="0x017" data-ref="_M/MSR_IA32_PLATFORM_ID">MSR_IA32_PLATFORM_ID</a></td></tr>
<tr><th id="1527">1527</th><td>};</td></tr>
<tr><th id="1528">1528</th><td></td></tr>
<tr><th id="1529">1529</th><td><em>static</em> <a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a></td></tr>
<tr><th id="1530">1530</th><td><dfn class="tu decl def fn" id="vmx_inkernel_handle_msr" title='vmx_inkernel_handle_msr' data-type='_Bool vmx_inkernel_handle_msr(struct nvmm_machine * mach, struct nvmm_cpu * vcpu, struct nvmm_exit * exit)' data-ref="vmx_inkernel_handle_msr" data-ref-filename="vmx_inkernel_handle_msr">vmx_inkernel_handle_msr</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col8 decl" id="128mach" title='mach' data-type='struct nvmm_machine *' data-ref="128mach" data-ref-filename="128mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col9 decl" id="129vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="129vcpu" data-ref-filename="129vcpu">vcpu</dfn>,</td></tr>
<tr><th id="1531">1531</th><td>    <b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_exit" title='nvmm_exit' data-ref="nvmm_exit" data-ref-filename="nvmm_exit">nvmm_exit</a> *<dfn class="local col0 decl" id="130exit" title='exit' data-type='struct nvmm_exit *' data-ref="130exit" data-ref-filename="130exit">exit</dfn>)</td></tr>
<tr><th id="1532">1532</th><td>{</td></tr>
<tr><th id="1533">1533</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col1 decl" id="131cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="131cpudata" data-ref-filename="131cpudata">cpudata</dfn> = <a class="local col9 ref" href="#129vcpu" title='vcpu' data-ref="129vcpu" data-ref-filename="129vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1534">1534</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="132val" title='val' data-type='uint64_t' data-ref="132val" data-ref-filename="132val">val</dfn>;</td></tr>
<tr><th id="1535">1535</th><td>	<a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col3 decl" id="133i" title='i' data-type='size_t' data-ref="133i" data-ref-filename="133i">i</dfn>;</td></tr>
<tr><th id="1536">1536</th><td></td></tr>
<tr><th id="1537">1537</th><td>	<b>switch</b> (<a class="local col0 ref" href="#130exit" title='exit' data-ref="130exit" data-ref-filename="130exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::type" title='nvmm_exit_msr::type' data-ref="nvmm_exit_msr::type" data-ref-filename="nvmm_exit_msr..type">type</a>) {</td></tr>
<tr><th id="1538">1538</th><td>	<b>case</b> <a class="enum" href="nvmm_x86.h.html#NVMM_EXIT_MSR_RDMSR" title='NVMM_EXIT_MSR_RDMSR' data-ref="NVMM_EXIT_MSR_RDMSR" data-ref-filename="NVMM_EXIT_MSR_RDMSR">NVMM_EXIT_MSR_RDMSR</a>:</td></tr>
<tr><th id="1539">1539</th><td>		<b>if</b> (<a class="local col0 ref" href="#130exit" title='exit' data-ref="130exit" data-ref-filename="130exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::msr" title='nvmm_exit_msr::msr' data-ref="nvmm_exit_msr::msr" data-ref-filename="nvmm_exit_msr..msr">msr</a> == <a class="macro" href="../../../arch/x86/include/specialreg.h.html#873" title="0x277" data-ref="_M/MSR_CR_PAT">MSR_CR_PAT</a>) {</td></tr>
<tr><th id="1540">1540</th><td>			<a class="local col2 ref" href="#132val" title='val' data-ref="132val" data-ref-filename="132val">val</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#287" title="0x00002804" data-ref="_M/VMCS_GUEST_IA32_PAT">VMCS_GUEST_IA32_PAT</a>);</td></tr>
<tr><th id="1541">1541</th><td>			<a class="local col1 ref" href="#131cpudata" title='cpudata' data-ref="131cpudata" data-ref-filename="131cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>] = (<a class="local col2 ref" href="#132val" title='val' data-ref="132val" data-ref-filename="132val">val</a> &amp; <var>0xFFFFFFFF</var>);</td></tr>
<tr><th id="1542">1542</th><td>			<a class="local col1 ref" href="#131cpudata" title='cpudata' data-ref="131cpudata" data-ref-filename="131cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>] = (<a class="local col2 ref" href="#132val" title='val' data-ref="132val" data-ref-filename="132val">val</a> &gt;&gt; <var>32</var>);</td></tr>
<tr><th id="1543">1543</th><td>			<b>goto</b> <a class="lbl" href="#134handled" data-ref="134handled" data-ref-filename="134handled">handled</a>;</td></tr>
<tr><th id="1544">1544</th><td>		}</td></tr>
<tr><th id="1545">1545</th><td>		<b>if</b> (<a class="local col0 ref" href="#130exit" title='exit' data-ref="130exit" data-ref-filename="130exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::msr" title='nvmm_exit_msr::msr' data-ref="nvmm_exit_msr::msr" data-ref-filename="nvmm_exit_msr..msr">msr</a> == <a class="macro" href="../../../arch/x86/include/specialreg.h.html#812" title="0x1a0" data-ref="_M/MSR_MISC_ENABLE">MSR_MISC_ENABLE</a>) {</td></tr>
<tr><th id="1546">1546</th><td>			<a class="local col2 ref" href="#132val" title='val' data-ref="132val" data-ref-filename="132val">val</a> = <a class="local col1 ref" href="#131cpudata" title='cpudata' data-ref="131cpudata" data-ref-filename="131cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr_misc_enable" title='vmx_cpudata::gmsr_misc_enable' data-use='r' data-ref="vmx_cpudata::gmsr_misc_enable" data-ref-filename="vmx_cpudata..gmsr_misc_enable">gmsr_misc_enable</a>;</td></tr>
<tr><th id="1547">1547</th><td>			<a class="local col1 ref" href="#131cpudata" title='cpudata' data-ref="131cpudata" data-ref-filename="131cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>] = (<a class="local col2 ref" href="#132val" title='val' data-ref="132val" data-ref-filename="132val">val</a> &amp; <var>0xFFFFFFFF</var>);</td></tr>
<tr><th id="1548">1548</th><td>			<a class="local col1 ref" href="#131cpudata" title='cpudata' data-ref="131cpudata" data-ref-filename="131cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>] = (<a class="local col2 ref" href="#132val" title='val' data-ref="132val" data-ref-filename="132val">val</a> &gt;&gt; <var>32</var>);</td></tr>
<tr><th id="1549">1549</th><td>			<b>goto</b> <a class="lbl" href="#134handled" data-ref="134handled" data-ref-filename="134handled">handled</a>;</td></tr>
<tr><th id="1550">1550</th><td>		}</td></tr>
<tr><th id="1551">1551</th><td>		<b>for</b> (<a class="local col3 ref" href="#133i" title='i' data-ref="133i" data-ref-filename="133i">i</a> = <var>0</var>; <a class="local col3 ref" href="#133i" title='i' data-ref="133i" data-ref-filename="133i">i</a> &lt; <a class="macro" href="../../../sys/cdefs.h.html#580" title="(sizeof(msr_ignore_list) / sizeof(msr_ignore_list[0]))" data-ref="_M/__arraycount">__arraycount</a>(<a class="tu ref" href="#msr_ignore_list" title='msr_ignore_list' data-use='r' data-ref="msr_ignore_list" data-ref-filename="msr_ignore_list">msr_ignore_list</a>); <a class="local col3 ref" href="#133i" title='i' data-ref="133i" data-ref-filename="133i">i</a>++) {</td></tr>
<tr><th id="1552">1552</th><td>			<b>if</b> (<a class="tu ref" href="#msr_ignore_list" title='msr_ignore_list' data-use='r' data-ref="msr_ignore_list" data-ref-filename="msr_ignore_list">msr_ignore_list</a>[<a class="local col3 ref" href="#133i" title='i' data-ref="133i" data-ref-filename="133i">i</a>] != <a class="local col0 ref" href="#130exit" title='exit' data-ref="130exit" data-ref-filename="130exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::msr" title='nvmm_exit_msr::msr' data-ref="nvmm_exit_msr::msr" data-ref-filename="nvmm_exit_msr..msr">msr</a>)</td></tr>
<tr><th id="1553">1553</th><td>				<b>continue</b>;</td></tr>
<tr><th id="1554">1554</th><td>			<a class="local col2 ref" href="#132val" title='val' data-ref="132val" data-ref-filename="132val">val</a> = <var>0</var>;</td></tr>
<tr><th id="1555">1555</th><td>			<a class="local col1 ref" href="#131cpudata" title='cpudata' data-ref="131cpudata" data-ref-filename="131cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>] = (<a class="local col2 ref" href="#132val" title='val' data-ref="132val" data-ref-filename="132val">val</a> &amp; <var>0xFFFFFFFF</var>);</td></tr>
<tr><th id="1556">1556</th><td>			<a class="local col1 ref" href="#131cpudata" title='cpudata' data-ref="131cpudata" data-ref-filename="131cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='w' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>] = (<a class="local col2 ref" href="#132val" title='val' data-ref="132val" data-ref-filename="132val">val</a> &gt;&gt; <var>32</var>);</td></tr>
<tr><th id="1557">1557</th><td>			<b>goto</b> <a class="lbl" href="#134handled" data-ref="134handled" data-ref-filename="134handled">handled</a>;</td></tr>
<tr><th id="1558">1558</th><td>		}</td></tr>
<tr><th id="1559">1559</th><td>		<b>break</b>;</td></tr>
<tr><th id="1560">1560</th><td>	<b>case</b> <a class="enum" href="nvmm_x86.h.html#NVMM_EXIT_MSR_WRMSR" title='NVMM_EXIT_MSR_WRMSR' data-ref="NVMM_EXIT_MSR_WRMSR" data-ref-filename="NVMM_EXIT_MSR_WRMSR">NVMM_EXIT_MSR_WRMSR</a>:</td></tr>
<tr><th id="1561">1561</th><td>		<b>if</b> (<a class="local col0 ref" href="#130exit" title='exit' data-ref="130exit" data-ref-filename="130exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::msr" title='nvmm_exit_msr::msr' data-ref="nvmm_exit_msr::msr" data-ref-filename="nvmm_exit_msr..msr">msr</a> == <a class="macro" href="../../../arch/x86/include/specialreg.h.html#759" title="0x010" data-ref="_M/MSR_TSC">MSR_TSC</a>) {</td></tr>
<tr><th id="1562">1562</th><td>			<a class="local col1 ref" href="#131cpudata" title='cpudata' data-ref="131cpudata" data-ref-filename="131cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gtsc" title='vmx_cpudata::gtsc' data-use='w' data-ref="vmx_cpudata::gtsc" data-ref-filename="vmx_cpudata..gtsc">gtsc</a> = <a class="local col0 ref" href="#130exit" title='exit' data-ref="130exit" data-ref-filename="130exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::val" title='nvmm_exit_msr::val' data-ref="nvmm_exit_msr::val" data-ref-filename="nvmm_exit_msr..val">val</a>;</td></tr>
<tr><th id="1563">1563</th><td>			<a class="local col1 ref" href="#131cpudata" title='cpudata' data-ref="131cpudata" data-ref-filename="131cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gtsc_want_update" title='vmx_cpudata::gtsc_want_update' data-use='w' data-ref="vmx_cpudata::gtsc_want_update" data-ref-filename="vmx_cpudata..gtsc_want_update">gtsc_want_update</a> = <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="1564">1564</th><td>			<b>goto</b> <a class="lbl" href="#134handled" data-ref="134handled" data-ref-filename="134handled">handled</a>;</td></tr>
<tr><th id="1565">1565</th><td>		}</td></tr>
<tr><th id="1566">1566</th><td>		<b>if</b> (<a class="local col0 ref" href="#130exit" title='exit' data-ref="130exit" data-ref-filename="130exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::msr" title='nvmm_exit_msr::msr' data-ref="nvmm_exit_msr::msr" data-ref-filename="nvmm_exit_msr..msr">msr</a> == <a class="macro" href="../../../arch/x86/include/specialreg.h.html#873" title="0x277" data-ref="_M/MSR_CR_PAT">MSR_CR_PAT</a>) {</td></tr>
<tr><th id="1567">1567</th><td>			<a class="local col2 ref" href="#132val" title='val' data-ref="132val" data-ref-filename="132val">val</a> = <a class="local col0 ref" href="#130exit" title='exit' data-ref="130exit" data-ref-filename="130exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::val" title='nvmm_exit_msr::val' data-ref="nvmm_exit_msr::val" data-ref-filename="nvmm_exit_msr..val">val</a>;</td></tr>
<tr><th id="1568">1568</th><td>			<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#488" title="__builtin_expect((!nvmm_x86_pat_validate(val)) != 0, 0)" data-ref="_M/__predict_false">__predict_false</a>(!<a class="ref fn" href="nvmm_x86.h.html#nvmm_x86_pat_validate" title='nvmm_x86_pat_validate' data-ref="nvmm_x86_pat_validate" data-ref-filename="nvmm_x86_pat_validate">nvmm_x86_pat_validate</a>(<a class="local col2 ref" href="#132val" title='val' data-ref="132val" data-ref-filename="132val">val</a>))) {</td></tr>
<tr><th id="1569">1569</th><td>				<b>goto</b> <a class="lbl" href="#135error" data-ref="135error" data-ref-filename="135error">error</a>;</td></tr>
<tr><th id="1570">1570</th><td>			}</td></tr>
<tr><th id="1571">1571</th><td>			<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#287" title="0x00002804" data-ref="_M/VMCS_GUEST_IA32_PAT">VMCS_GUEST_IA32_PAT</a>, <a class="local col2 ref" href="#132val" title='val' data-ref="132val" data-ref-filename="132val">val</a>);</td></tr>
<tr><th id="1572">1572</th><td>			<b>goto</b> <a class="lbl" href="#134handled" data-ref="134handled" data-ref-filename="134handled">handled</a>;</td></tr>
<tr><th id="1573">1573</th><td>		}</td></tr>
<tr><th id="1574">1574</th><td>		<b>if</b> (<a class="local col0 ref" href="#130exit" title='exit' data-ref="130exit" data-ref-filename="130exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::msr" title='nvmm_exit_msr::msr' data-ref="nvmm_exit_msr::msr" data-ref-filename="nvmm_exit_msr..msr">msr</a> == <a class="macro" href="../../../arch/x86/include/specialreg.h.html#812" title="0x1a0" data-ref="_M/MSR_MISC_ENABLE">MSR_MISC_ENABLE</a>) {</td></tr>
<tr><th id="1575">1575</th><td>			<i>/* Don't care. */</i></td></tr>
<tr><th id="1576">1576</th><td>			<b>goto</b> <a class="lbl" href="#134handled" data-ref="134handled" data-ref-filename="134handled">handled</a>;</td></tr>
<tr><th id="1577">1577</th><td>		}</td></tr>
<tr><th id="1578">1578</th><td>		<b>for</b> (<a class="local col3 ref" href="#133i" title='i' data-ref="133i" data-ref-filename="133i">i</a> = <var>0</var>; <a class="local col3 ref" href="#133i" title='i' data-ref="133i" data-ref-filename="133i">i</a> &lt; <a class="macro" href="../../../sys/cdefs.h.html#580" title="(sizeof(msr_ignore_list) / sizeof(msr_ignore_list[0]))" data-ref="_M/__arraycount">__arraycount</a>(<a class="tu ref" href="#msr_ignore_list" title='msr_ignore_list' data-use='r' data-ref="msr_ignore_list" data-ref-filename="msr_ignore_list">msr_ignore_list</a>); <a class="local col3 ref" href="#133i" title='i' data-ref="133i" data-ref-filename="133i">i</a>++) {</td></tr>
<tr><th id="1579">1579</th><td>			<b>if</b> (<a class="tu ref" href="#msr_ignore_list" title='msr_ignore_list' data-use='r' data-ref="msr_ignore_list" data-ref-filename="msr_ignore_list">msr_ignore_list</a>[<a class="local col3 ref" href="#133i" title='i' data-ref="133i" data-ref-filename="133i">i</a>] != <a class="local col0 ref" href="#130exit" title='exit' data-ref="130exit" data-ref-filename="130exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::msr" title='nvmm_exit_msr::msr' data-ref="nvmm_exit_msr::msr" data-ref-filename="nvmm_exit_msr..msr">msr</a>)</td></tr>
<tr><th id="1580">1580</th><td>				<b>continue</b>;</td></tr>
<tr><th id="1581">1581</th><td>			<b>goto</b> <a class="lbl" href="#134handled" data-ref="134handled" data-ref-filename="134handled">handled</a>;</td></tr>
<tr><th id="1582">1582</th><td>		}</td></tr>
<tr><th id="1583">1583</th><td>		<b>break</b>;</td></tr>
<tr><th id="1584">1584</th><td>	}</td></tr>
<tr><th id="1585">1585</th><td></td></tr>
<tr><th id="1586">1586</th><td>	<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="1587">1587</th><td></td></tr>
<tr><th id="1588">1588</th><td><dfn class="lbl" id="134handled" data-ref="134handled" data-ref-filename="134handled">handled</dfn>:</td></tr>
<tr><th id="1589">1589</th><td>	<a class="tu ref fn" href="#vmx_inkernel_advance" title='vmx_inkernel_advance' data-use='c' data-ref="vmx_inkernel_advance" data-ref-filename="vmx_inkernel_advance">vmx_inkernel_advance</a>();</td></tr>
<tr><th id="1590">1590</th><td>	<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="1591">1591</th><td></td></tr>
<tr><th id="1592">1592</th><td><dfn class="lbl" id="135error" data-ref="135error" data-ref-filename="135error">error</dfn>:</td></tr>
<tr><th id="1593">1593</th><td>	<a class="tu ref fn" href="#vmx_inject_gp" title='vmx_inject_gp' data-use='c' data-ref="vmx_inject_gp" data-ref-filename="vmx_inject_gp">vmx_inject_gp</a>(<a class="local col9 ref" href="#129vcpu" title='vcpu' data-ref="129vcpu" data-ref-filename="129vcpu">vcpu</a>);</td></tr>
<tr><th id="1594">1594</th><td>	<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="1595">1595</th><td>}</td></tr>
<tr><th id="1596">1596</th><td></td></tr>
<tr><th id="1597">1597</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1598">1598</th><td><dfn class="tu decl def fn" id="vmx_exit_msr" title='vmx_exit_msr' data-type='void vmx_exit_msr(struct nvmm_machine * mach, struct nvmm_cpu * vcpu, struct nvmm_exit * exit, _Bool rdmsr)' data-ref="vmx_exit_msr" data-ref-filename="vmx_exit_msr">vmx_exit_msr</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col6 decl" id="136mach" title='mach' data-type='struct nvmm_machine *' data-ref="136mach" data-ref-filename="136mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col7 decl" id="137vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="137vcpu" data-ref-filename="137vcpu">vcpu</dfn>,</td></tr>
<tr><th id="1599">1599</th><td>    <b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_exit" title='nvmm_exit' data-ref="nvmm_exit" data-ref-filename="nvmm_exit">nvmm_exit</a> *<dfn class="local col8 decl" id="138exit" title='exit' data-type='struct nvmm_exit *' data-ref="138exit" data-ref-filename="138exit">exit</dfn>, <a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="local col9 decl" id="139rdmsr" title='rdmsr' data-type='_Bool' data-ref="139rdmsr" data-ref-filename="139rdmsr">rdmsr</dfn>)</td></tr>
<tr><th id="1600">1600</th><td>{</td></tr>
<tr><th id="1601">1601</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col0 decl" id="140cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="140cpudata" data-ref-filename="140cpudata">cpudata</dfn> = <a class="local col7 ref" href="#137vcpu" title='vcpu' data-ref="137vcpu" data-ref-filename="137vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1602">1602</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col1 decl" id="141inslen" title='inslen' data-type='uint64_t' data-ref="141inslen" data-ref-filename="141inslen">inslen</dfn>, <dfn class="local col2 decl" id="142rip" title='rip' data-type='uint64_t' data-ref="142rip" data-ref-filename="142rip">rip</dfn>;</td></tr>
<tr><th id="1603">1603</th><td></td></tr>
<tr><th id="1604">1604</th><td>	<b>if</b> (<a class="local col9 ref" href="#139rdmsr" title='rdmsr' data-ref="139rdmsr" data-ref-filename="139rdmsr">rdmsr</a>) {</td></tr>
<tr><th id="1605">1605</th><td>		<a class="local col8 ref" href="#138exit" title='exit' data-ref="138exit" data-ref-filename="138exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::type" title='nvmm_exit_msr::type' data-ref="nvmm_exit_msr::type" data-ref-filename="nvmm_exit_msr..type">type</a> = <a class="enum" href="nvmm_x86.h.html#NVMM_EXIT_MSR_RDMSR" title='NVMM_EXIT_MSR_RDMSR' data-ref="NVMM_EXIT_MSR_RDMSR" data-ref-filename="NVMM_EXIT_MSR_RDMSR">NVMM_EXIT_MSR_RDMSR</a>;</td></tr>
<tr><th id="1606">1606</th><td>	} <b>else</b> {</td></tr>
<tr><th id="1607">1607</th><td>		<a class="local col8 ref" href="#138exit" title='exit' data-ref="138exit" data-ref-filename="138exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::type" title='nvmm_exit_msr::type' data-ref="nvmm_exit_msr::type" data-ref-filename="nvmm_exit_msr..type">type</a> = <a class="enum" href="nvmm_x86.h.html#NVMM_EXIT_MSR_WRMSR" title='NVMM_EXIT_MSR_WRMSR' data-ref="NVMM_EXIT_MSR_WRMSR" data-ref-filename="NVMM_EXIT_MSR_WRMSR">NVMM_EXIT_MSR_WRMSR</a>;</td></tr>
<tr><th id="1608">1608</th><td>	}</td></tr>
<tr><th id="1609">1609</th><td></td></tr>
<tr><th id="1610">1610</th><td>	<a class="local col8 ref" href="#138exit" title='exit' data-ref="138exit" data-ref-filename="138exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::msr" title='nvmm_exit_msr::msr' data-ref="nvmm_exit_msr::msr" data-ref-filename="nvmm_exit_msr..msr">msr</a> = (<a class="local col0 ref" href="#140cpudata" title='cpudata' data-ref="140cpudata" data-ref-filename="140cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>] &amp; <var>0xFFFFFFFF</var>);</td></tr>
<tr><th id="1611">1611</th><td></td></tr>
<tr><th id="1612">1612</th><td>	<b>if</b> (<a class="local col9 ref" href="#139rdmsr" title='rdmsr' data-ref="139rdmsr" data-ref-filename="139rdmsr">rdmsr</a>) {</td></tr>
<tr><th id="1613">1613</th><td>		<a class="local col8 ref" href="#138exit" title='exit' data-ref="138exit" data-ref-filename="138exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::val" title='nvmm_exit_msr::val' data-ref="nvmm_exit_msr::val" data-ref-filename="nvmm_exit_msr..val">val</a> = <var>0</var>;</td></tr>
<tr><th id="1614">1614</th><td>	} <b>else</b> {</td></tr>
<tr><th id="1615">1615</th><td>		<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col3 decl" id="143rdx" title='rdx' data-type='uint64_t' data-ref="143rdx" data-ref-filename="143rdx">rdx</dfn>, <dfn class="local col4 decl" id="144rax" title='rax' data-type='uint64_t' data-ref="144rax" data-ref-filename="144rax">rax</dfn>;</td></tr>
<tr><th id="1616">1616</th><td>		<a class="local col3 ref" href="#143rdx" title='rdx' data-ref="143rdx" data-ref-filename="143rdx">rdx</a> = <a class="local col0 ref" href="#140cpudata" title='cpudata' data-ref="140cpudata" data-ref-filename="140cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>];</td></tr>
<tr><th id="1617">1617</th><td>		<a class="local col4 ref" href="#144rax" title='rax' data-ref="144rax" data-ref-filename="144rax">rax</a> = <a class="local col0 ref" href="#140cpudata" title='cpudata' data-ref="140cpudata" data-ref-filename="140cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>];</td></tr>
<tr><th id="1618">1618</th><td>		<a class="local col8 ref" href="#138exit" title='exit' data-ref="138exit" data-ref-filename="138exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::val" title='nvmm_exit_msr::val' data-ref="nvmm_exit_msr::val" data-ref-filename="nvmm_exit_msr..val">val</a> = (<a class="local col3 ref" href="#143rdx" title='rdx' data-ref="143rdx" data-ref-filename="143rdx">rdx</a> &lt;&lt; <var>32</var>) | (<a class="local col4 ref" href="#144rax" title='rax' data-ref="144rax" data-ref-filename="144rax">rax</a> &amp; <var>0xFFFFFFFF</var>);</td></tr>
<tr><th id="1619">1619</th><td>	}</td></tr>
<tr><th id="1620">1620</th><td></td></tr>
<tr><th id="1621">1621</th><td>	<b>if</b> (<a class="tu ref fn" href="#vmx_inkernel_handle_msr" title='vmx_inkernel_handle_msr' data-use='c' data-ref="vmx_inkernel_handle_msr" data-ref-filename="vmx_inkernel_handle_msr">vmx_inkernel_handle_msr</a>(<a class="local col6 ref" href="#136mach" title='mach' data-ref="136mach" data-ref-filename="136mach">mach</a>, <a class="local col7 ref" href="#137vcpu" title='vcpu' data-ref="137vcpu" data-ref-filename="137vcpu">vcpu</a>, <a class="local col8 ref" href="#138exit" title='exit' data-ref="138exit" data-ref-filename="138exit">exit</a>)) {</td></tr>
<tr><th id="1622">1622</th><td>		<a class="local col8 ref" href="#138exit" title='exit' data-ref="138exit" data-ref-filename="138exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#51" title="0x0000000000000000ULL" data-ref="_M/NVMM_EXIT_NONE">NVMM_EXIT_NONE</a>;</td></tr>
<tr><th id="1623">1623</th><td>		<b>return</b>;</td></tr>
<tr><th id="1624">1624</th><td>	}</td></tr>
<tr><th id="1625">1625</th><td></td></tr>
<tr><th id="1626">1626</th><td>	<a class="local col8 ref" href="#138exit" title='exit' data-ref="138exit" data-ref-filename="138exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#54" title="0x0000000000000003ULL" data-ref="_M/NVMM_EXIT_MSR">NVMM_EXIT_MSR</a>;</td></tr>
<tr><th id="1627">1627</th><td>	<a class="local col1 ref" href="#141inslen" title='inslen' data-ref="141inslen" data-ref-filename="141inslen">inslen</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#407" title="0x0000440C" data-ref="_M/VMCS_EXIT_INSTRUCTION_LENGTH">VMCS_EXIT_INSTRUCTION_LENGTH</a>);</td></tr>
<tr><th id="1628">1628</th><td>	<a class="local col2 ref" href="#142rip" title='rip' data-ref="142rip" data-ref-filename="142rip">rip</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#472" title="0x0000681E" data-ref="_M/VMCS_GUEST_RIP">VMCS_GUEST_RIP</a>);</td></tr>
<tr><th id="1629">1629</th><td>	<a class="local col8 ref" href="#138exit" title='exit' data-ref="138exit" data-ref-filename="138exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::msr" title='nvmm_exit_md::msr' data-ref="nvmm_exit_md::msr" data-ref-filename="nvmm_exit_md..msr">msr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_msr::npc" title='nvmm_exit_msr::npc' data-ref="nvmm_exit_msr::npc" data-ref-filename="nvmm_exit_msr..npc">npc</a> = <a class="local col2 ref" href="#142rip" title='rip' data-ref="142rip" data-ref-filename="142rip">rip</a> + <a class="local col1 ref" href="#141inslen" title='inslen' data-ref="141inslen" data-ref-filename="141inslen">inslen</a>;</td></tr>
<tr><th id="1630">1630</th><td></td></tr>
<tr><th id="1631">1631</th><td>	<a class="tu ref fn" href="#vmx_vcpu_state_provide" title='vmx_vcpu_state_provide' data-use='c' data-ref="vmx_vcpu_state_provide" data-ref-filename="vmx_vcpu_state_provide">vmx_vcpu_state_provide</a>(<a class="local col7 ref" href="#137vcpu" title='vcpu' data-ref="137vcpu" data-ref-filename="137vcpu">vcpu</a>, <a class="macro" href="nvmm_x86.h.html#211" title="0x02" data-ref="_M/NVMM_X64_STATE_GPRS">NVMM_X64_STATE_GPRS</a>);</td></tr>
<tr><th id="1632">1632</th><td>}</td></tr>
<tr><th id="1633">1633</th><td></td></tr>
<tr><th id="1634">1634</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1635">1635</th><td><dfn class="tu decl def fn" id="vmx_exit_xsetbv" title='vmx_exit_xsetbv' data-type='void vmx_exit_xsetbv(struct nvmm_machine * mach, struct nvmm_cpu * vcpu, struct nvmm_exit * exit)' data-ref="vmx_exit_xsetbv" data-ref-filename="vmx_exit_xsetbv">vmx_exit_xsetbv</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col5 decl" id="145mach" title='mach' data-type='struct nvmm_machine *' data-ref="145mach" data-ref-filename="145mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col6 decl" id="146vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="146vcpu" data-ref-filename="146vcpu">vcpu</dfn>,</td></tr>
<tr><th id="1636">1636</th><td>    <b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_exit" title='nvmm_exit' data-ref="nvmm_exit" data-ref-filename="nvmm_exit">nvmm_exit</a> *<dfn class="local col7 decl" id="147exit" title='exit' data-type='struct nvmm_exit *' data-ref="147exit" data-ref-filename="147exit">exit</dfn>)</td></tr>
<tr><th id="1637">1637</th><td>{</td></tr>
<tr><th id="1638">1638</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col8 decl" id="148cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="148cpudata" data-ref-filename="148cpudata">cpudata</dfn> = <a class="local col6 ref" href="#146vcpu" title='vcpu' data-ref="146vcpu" data-ref-filename="146vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1639">1639</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint16_t" title='uint16_t' data-type='__uint16_t' data-ref="uint16_t" data-ref-filename="uint16_t">uint16_t</a> <dfn class="local col9 decl" id="149val" title='val' data-type='uint16_t' data-ref="149val" data-ref-filename="149val">val</dfn>;</td></tr>
<tr><th id="1640">1640</th><td></td></tr>
<tr><th id="1641">1641</th><td>	<a class="local col7 ref" href="#147exit" title='exit' data-ref="147exit" data-ref-filename="147exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#51" title="0x0000000000000000ULL" data-ref="_M/NVMM_EXIT_NONE">NVMM_EXIT_NONE</a>;</td></tr>
<tr><th id="1642">1642</th><td></td></tr>
<tr><th id="1643">1643</th><td>	<a class="local col9 ref" href="#149val" title='val' data-ref="149val" data-ref-filename="149val">val</a> = (<a class="local col8 ref" href="#148cpudata" title='cpudata' data-ref="148cpudata" data-ref-filename="148cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#121" title="2" data-ref="_M/NVMM_X64_GPR_RDX">NVMM_X64_GPR_RDX</a>] &lt;&lt; <var>32</var>) |</td></tr>
<tr><th id="1644">1644</th><td>	    (<a class="local col8 ref" href="#148cpudata" title='cpudata' data-ref="148cpudata" data-ref-filename="148cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#119" title="0" data-ref="_M/NVMM_X64_GPR_RAX">NVMM_X64_GPR_RAX</a>] &amp; <var>0xFFFFFFFF</var>);</td></tr>
<tr><th id="1645">1645</th><td></td></tr>
<tr><th id="1646">1646</th><td>	<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#488" title="__builtin_expect((cpudata-&gt;gprs[1] != 0) != 0, 0)" data-ref="_M/__predict_false">__predict_false</a>(<a class="local col8 ref" href="#148cpudata" title='cpudata' data-ref="148cpudata" data-ref-filename="148cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#120" title="1" data-ref="_M/NVMM_X64_GPR_RCX">NVMM_X64_GPR_RCX</a>] != <var>0</var>)) {</td></tr>
<tr><th id="1647">1647</th><td>		<b>goto</b> <a class="lbl" href="#150error" data-ref="150error" data-ref-filename="150error">error</a>;</td></tr>
<tr><th id="1648">1648</th><td>	} <b>else</b> <b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#488" title="__builtin_expect(((val &amp; ~vmx_xcr0_mask) != 0) != 0, 0)" data-ref="_M/__predict_false">__predict_false</a>((<a class="local col9 ref" href="#149val" title='val' data-ref="149val" data-ref-filename="149val">val</a> &amp; ~<a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a>) != <var>0</var>)) {</td></tr>
<tr><th id="1649">1649</th><td>		<b>goto</b> <a class="lbl" href="#150error" data-ref="150error" data-ref-filename="150error">error</a>;</td></tr>
<tr><th id="1650">1650</th><td>	} <b>else</b> <b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#488" title="__builtin_expect(((val &amp; 0x00000001) == 0) != 0, 0)" data-ref="_M/__predict_false">__predict_false</a>((<a class="local col9 ref" href="#149val" title='val' data-ref="149val" data-ref-filename="149val">val</a> &amp; <a class="macro" href="../../../arch/x86/include/specialreg.h.html#124" title="0x00000001" data-ref="_M/XCR0_X87">XCR0_X87</a>) == <var>0</var>)) {</td></tr>
<tr><th id="1651">1651</th><td>		<b>goto</b> <a class="lbl" href="#150error" data-ref="150error" data-ref-filename="150error">error</a>;</td></tr>
<tr><th id="1652">1652</th><td>	}</td></tr>
<tr><th id="1653">1653</th><td></td></tr>
<tr><th id="1654">1654</th><td>	<a class="local col8 ref" href="#148cpudata" title='cpudata' data-ref="148cpudata" data-ref-filename="148cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gxcr0" title='vmx_cpudata::gxcr0' data-use='w' data-ref="vmx_cpudata::gxcr0" data-ref-filename="vmx_cpudata..gxcr0">gxcr0</a> = <a class="local col9 ref" href="#149val" title='val' data-ref="149val" data-ref-filename="149val">val</a>;</td></tr>
<tr><th id="1655">1655</th><td></td></tr>
<tr><th id="1656">1656</th><td>	<a class="tu ref fn" href="#vmx_inkernel_advance" title='vmx_inkernel_advance' data-use='c' data-ref="vmx_inkernel_advance" data-ref-filename="vmx_inkernel_advance">vmx_inkernel_advance</a>();</td></tr>
<tr><th id="1657">1657</th><td>	<b>return</b>;</td></tr>
<tr><th id="1658">1658</th><td></td></tr>
<tr><th id="1659">1659</th><td><dfn class="lbl" id="150error" data-ref="150error" data-ref-filename="150error">error</dfn>:</td></tr>
<tr><th id="1660">1660</th><td>	<a class="tu ref fn" href="#vmx_inject_gp" title='vmx_inject_gp' data-use='c' data-ref="vmx_inject_gp" data-ref-filename="vmx_inject_gp">vmx_inject_gp</a>(<a class="local col6 ref" href="#146vcpu" title='vcpu' data-ref="146vcpu" data-ref-filename="146vcpu">vcpu</a>);</td></tr>
<tr><th id="1661">1661</th><td>}</td></tr>
<tr><th id="1662">1662</th><td></td></tr>
<tr><th id="1663">1663</th><td><u>#define <dfn class="macro" id="_M/VMX_EPT_VIOLATION_READ" data-ref="_M/VMX_EPT_VIOLATION_READ">VMX_EPT_VIOLATION_READ</dfn>		__BIT(0)</u></td></tr>
<tr><th id="1664">1664</th><td><u>#define <dfn class="macro" id="_M/VMX_EPT_VIOLATION_WRITE" data-ref="_M/VMX_EPT_VIOLATION_WRITE">VMX_EPT_VIOLATION_WRITE</dfn>		__BIT(1)</u></td></tr>
<tr><th id="1665">1665</th><td><u>#define <dfn class="macro" id="_M/VMX_EPT_VIOLATION_EXECUTE" data-ref="_M/VMX_EPT_VIOLATION_EXECUTE">VMX_EPT_VIOLATION_EXECUTE</dfn>	__BIT(2)</u></td></tr>
<tr><th id="1666">1666</th><td></td></tr>
<tr><th id="1667">1667</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1668">1668</th><td><dfn class="tu decl def fn" id="vmx_exit_epf" title='vmx_exit_epf' data-type='void vmx_exit_epf(struct nvmm_machine * mach, struct nvmm_cpu * vcpu, struct nvmm_exit * exit)' data-ref="vmx_exit_epf" data-ref-filename="vmx_exit_epf">vmx_exit_epf</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col1 decl" id="151mach" title='mach' data-type='struct nvmm_machine *' data-ref="151mach" data-ref-filename="151mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col2 decl" id="152vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="152vcpu" data-ref-filename="152vcpu">vcpu</dfn>,</td></tr>
<tr><th id="1669">1669</th><td>    <b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_exit" title='nvmm_exit' data-ref="nvmm_exit" data-ref-filename="nvmm_exit">nvmm_exit</a> *<dfn class="local col3 decl" id="153exit" title='exit' data-type='struct nvmm_exit *' data-ref="153exit" data-ref-filename="153exit">exit</dfn>)</td></tr>
<tr><th id="1670">1670</th><td>{</td></tr>
<tr><th id="1671">1671</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col4 decl" id="154perm" title='perm' data-type='uint64_t' data-ref="154perm" data-ref-filename="154perm">perm</dfn>;</td></tr>
<tr><th id="1672">1672</th><td>	<a class="typedef" href="../nvmm.h.html#gpaddr_t" title='gpaddr_t' data-type='uint64_t' data-ref="gpaddr_t" data-ref-filename="gpaddr_t">gpaddr_t</a> <dfn class="local col5 decl" id="155gpa" title='gpa' data-type='gpaddr_t' data-ref="155gpa" data-ref-filename="155gpa">gpa</dfn>;</td></tr>
<tr><th id="1673">1673</th><td></td></tr>
<tr><th id="1674">1674</th><td>	<a class="local col5 ref" href="#155gpa" title='gpa' data-ref="155gpa" data-ref-filename="155gpa">gpa</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#283" title="0x00002400" data-ref="_M/VMCS_GUEST_PHYSICAL_ADDRESS">VMCS_GUEST_PHYSICAL_ADDRESS</a>);</td></tr>
<tr><th id="1675">1675</th><td></td></tr>
<tr><th id="1676">1676</th><td>	<a class="local col3 ref" href="#153exit" title='exit' data-ref="153exit" data-ref-filename="153exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#52" title="0x0000000000000001ULL" data-ref="_M/NVMM_EXIT_MEMORY">NVMM_EXIT_MEMORY</a>;</td></tr>
<tr><th id="1677">1677</th><td>	<a class="local col4 ref" href="#154perm" title='perm' data-ref="154perm" data-ref-filename="154perm">perm</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#450" title="0x00006400" data-ref="_M/VMCS_EXIT_QUALIFICATION">VMCS_EXIT_QUALIFICATION</a>);</td></tr>
<tr><th id="1678">1678</th><td>	<b>if</b> (<a class="local col4 ref" href="#154perm" title='perm' data-ref="154perm" data-ref-filename="154perm">perm</a> &amp; <a class="macro" href="#1664" title="(((uintmax_t)(1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((1) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_EPT_VIOLATION_WRITE">VMX_EPT_VIOLATION_WRITE</a>)</td></tr>
<tr><th id="1679">1679</th><td>		<a class="local col3 ref" href="#153exit" title='exit' data-ref="153exit" data-ref-filename="153exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::mem" title='nvmm_exit_md::mem' data-ref="nvmm_exit_md::mem" data-ref-filename="nvmm_exit_md..mem">mem</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_memory::prot" title='nvmm_exit_memory::prot' data-ref="nvmm_exit_memory::prot" data-ref-filename="nvmm_exit_memory..prot">prot</a> = <a class="macro" href="../../../sys/mman.h.html#64" title="0x02" data-ref="_M/PROT_WRITE">PROT_WRITE</a>;</td></tr>
<tr><th id="1680">1680</th><td>	<b>else</b> <b>if</b> (<a class="local col4 ref" href="#154perm" title='perm' data-ref="154perm" data-ref-filename="154perm">perm</a> &amp; <a class="macro" href="#1665" title="(((uintmax_t)(2) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((2) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_EPT_VIOLATION_EXECUTE">VMX_EPT_VIOLATION_EXECUTE</a>)</td></tr>
<tr><th id="1681">1681</th><td>		<a class="local col3 ref" href="#153exit" title='exit' data-ref="153exit" data-ref-filename="153exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::mem" title='nvmm_exit_md::mem' data-ref="nvmm_exit_md::mem" data-ref-filename="nvmm_exit_md..mem">mem</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_memory::prot" title='nvmm_exit_memory::prot' data-ref="nvmm_exit_memory::prot" data-ref-filename="nvmm_exit_memory..prot">prot</a> = <a class="macro" href="../../../sys/mman.h.html#65" title="0x04" data-ref="_M/PROT_EXEC">PROT_EXEC</a>;</td></tr>
<tr><th id="1682">1682</th><td>	<b>else</b></td></tr>
<tr><th id="1683">1683</th><td>		<a class="local col3 ref" href="#153exit" title='exit' data-ref="153exit" data-ref-filename="153exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::mem" title='nvmm_exit_md::mem' data-ref="nvmm_exit_md::mem" data-ref-filename="nvmm_exit_md..mem">mem</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_memory::prot" title='nvmm_exit_memory::prot' data-ref="nvmm_exit_memory::prot" data-ref-filename="nvmm_exit_memory..prot">prot</a> = <a class="macro" href="../../../sys/mman.h.html#63" title="0x01" data-ref="_M/PROT_READ">PROT_READ</a>;</td></tr>
<tr><th id="1684">1684</th><td>	<a class="local col3 ref" href="#153exit" title='exit' data-ref="153exit" data-ref-filename="153exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::mem" title='nvmm_exit_md::mem' data-ref="nvmm_exit_md::mem" data-ref-filename="nvmm_exit_md..mem">mem</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_memory::gpa" title='nvmm_exit_memory::gpa' data-ref="nvmm_exit_memory::gpa" data-ref-filename="nvmm_exit_memory..gpa">gpa</a> = <a class="local col5 ref" href="#155gpa" title='gpa' data-ref="155gpa" data-ref-filename="155gpa">gpa</a>;</td></tr>
<tr><th id="1685">1685</th><td>	<a class="local col3 ref" href="#153exit" title='exit' data-ref="153exit" data-ref-filename="153exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::mem" title='nvmm_exit_md::mem' data-ref="nvmm_exit_md::mem" data-ref-filename="nvmm_exit_md..mem">mem</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_memory::inst_len" title='nvmm_exit_memory::inst_len' data-ref="nvmm_exit_memory::inst_len" data-ref-filename="nvmm_exit_memory..inst_len">inst_len</a> = <var>0</var>;</td></tr>
<tr><th id="1686">1686</th><td></td></tr>
<tr><th id="1687">1687</th><td>	<a class="tu ref fn" href="#vmx_vcpu_state_provide" title='vmx_vcpu_state_provide' data-use='c' data-ref="vmx_vcpu_state_provide" data-ref-filename="vmx_vcpu_state_provide">vmx_vcpu_state_provide</a>(<a class="local col2 ref" href="#152vcpu" title='vcpu' data-ref="152vcpu" data-ref-filename="152vcpu">vcpu</a>,</td></tr>
<tr><th id="1688">1688</th><td>	    <a class="macro" href="nvmm_x86.h.html#211" title="0x02" data-ref="_M/NVMM_X64_STATE_GPRS">NVMM_X64_STATE_GPRS</a> | <a class="macro" href="nvmm_x86.h.html#210" title="0x01" data-ref="_M/NVMM_X64_STATE_SEGS">NVMM_X64_STATE_SEGS</a> |</td></tr>
<tr><th id="1689">1689</th><td>	    <a class="macro" href="nvmm_x86.h.html#212" title="0x04" data-ref="_M/NVMM_X64_STATE_CRS">NVMM_X64_STATE_CRS</a> | <a class="macro" href="nvmm_x86.h.html#214" title="0x10" data-ref="_M/NVMM_X64_STATE_MSRS">NVMM_X64_STATE_MSRS</a>);</td></tr>
<tr><th id="1690">1690</th><td>}</td></tr>
<tr><th id="1691">1691</th><td></td></tr>
<tr><th id="1692">1692</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1693">1693</th><td><dfn class="tu decl def fn" id="vmx_exit_invalid" title='vmx_exit_invalid' data-type='void vmx_exit_invalid(struct nvmm_exit * exit, uint64_t code)' data-ref="vmx_exit_invalid" data-ref-filename="vmx_exit_invalid">vmx_exit_invalid</dfn>(<b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_exit" title='nvmm_exit' data-ref="nvmm_exit" data-ref-filename="nvmm_exit">nvmm_exit</a> *<dfn class="local col6 decl" id="156exit" title='exit' data-type='struct nvmm_exit *' data-ref="156exit" data-ref-filename="156exit">exit</dfn>, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col7 decl" id="157code" title='code' data-type='uint64_t' data-ref="157code" data-ref-filename="157code">code</dfn>)</td></tr>
<tr><th id="1694">1694</th><td>{</td></tr>
<tr><th id="1695">1695</th><td>	<a class="local col6 ref" href="#156exit" title='exit' data-ref="156exit" data-ref-filename="156exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::u" title='nvmm_exit::u' data-ref="nvmm_exit::u" data-ref-filename="nvmm_exit..u">u</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_md::inv" title='nvmm_exit_md::inv' data-ref="nvmm_exit_md::inv" data-ref-filename="nvmm_exit_md..inv">inv</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_exit_invalid::hwcode" title='nvmm_exit_invalid::hwcode' data-ref="nvmm_exit_invalid::hwcode" data-ref-filename="nvmm_exit_invalid..hwcode">hwcode</a> = <a class="local col7 ref" href="#157code" title='code' data-ref="157code" data-ref-filename="157code">code</a>;</td></tr>
<tr><th id="1696">1696</th><td>	<a class="local col6 ref" href="#156exit" title='exit' data-ref="156exit" data-ref-filename="156exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#60" title="0xFFFFFFFFFFFFFFFFULL" data-ref="_M/NVMM_EXIT_INVALID">NVMM_EXIT_INVALID</a>;</td></tr>
<tr><th id="1697">1697</th><td>}</td></tr>
<tr><th id="1698">1698</th><td></td></tr>
<tr><th id="1699">1699</th><td><i  data-doc="vmx_vcpu_guest_fpu_enter">/* -------------------------------------------------------------------------- */</i></td></tr>
<tr><th id="1700">1700</th><td></td></tr>
<tr><th id="1701">1701</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1702">1702</th><td><dfn class="tu decl def fn" id="vmx_vcpu_guest_fpu_enter" title='vmx_vcpu_guest_fpu_enter' data-type='void vmx_vcpu_guest_fpu_enter(struct nvmm_cpu * vcpu)' data-ref="vmx_vcpu_guest_fpu_enter" data-ref-filename="vmx_vcpu_guest_fpu_enter">vmx_vcpu_guest_fpu_enter</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col8 decl" id="158vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="158vcpu" data-ref-filename="158vcpu">vcpu</dfn>)</td></tr>
<tr><th id="1703">1703</th><td>{</td></tr>
<tr><th id="1704">1704</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col9 decl" id="159cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="159cpudata" data-ref-filename="159cpudata">cpudata</dfn> = <a class="local col8 ref" href="#158vcpu" title='vcpu' data-ref="158vcpu" data-ref-filename="158vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1705">1705</th><td></td></tr>
<tr><th id="1706">1706</th><td>	<a class="local col9 ref" href="#159cpudata" title='cpudata' data-ref="159cpudata" data-ref-filename="159cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::ts_set" title='vmx_cpudata::ts_set' data-use='w' data-ref="vmx_cpudata::ts_set" data-ref-filename="vmx_cpudata..ts_set">ts_set</a> = (<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#213" title='rcr0' data-ref="rcr0" data-ref-filename="rcr0">rcr0</a>() &amp; <a class="macro" href="../../../arch/x86/include/specialreg.h.html#66" title="0x00000008" data-ref="_M/CR0_TS">CR0_TS</a>) != <var>0</var>;</td></tr>
<tr><th id="1707">1707</th><td></td></tr>
<tr><th id="1708">1708</th><td>	<a class="ref fn" href="../../../arch/x86/include/fpu.h.html#fpu_area_save" title='fpu_area_save' data-ref="fpu_area_save" data-ref-filename="fpu_area_save">fpu_area_save</a>(&amp;<a class="local col9 ref" href="#159cpudata" title='cpudata' data-ref="159cpudata" data-ref-filename="159cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::hfpu" title='vmx_cpudata::hfpu' data-use='a' data-ref="vmx_cpudata::hfpu" data-ref-filename="vmx_cpudata..hfpu">hfpu</a>, <a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a>);</td></tr>
<tr><th id="1709">1709</th><td>	<a class="ref fn" href="../../../arch/x86/include/fpu.h.html#fpu_area_restore" title='fpu_area_restore' data-ref="fpu_area_restore" data-ref-filename="fpu_area_restore">fpu_area_restore</a>(&amp;<a class="local col9 ref" href="#159cpudata" title='cpudata' data-ref="159cpudata" data-ref-filename="159cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gfpu" title='vmx_cpudata::gfpu' data-use='a' data-ref="vmx_cpudata::gfpu" data-ref-filename="vmx_cpudata..gfpu">gfpu</a>, <a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a>);</td></tr>
<tr><th id="1710">1710</th><td></td></tr>
<tr><th id="1711">1711</th><td>	<b>if</b> (<a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a> != <var>0</var>) {</td></tr>
<tr><th id="1712">1712</th><td>		<a class="local col9 ref" href="#159cpudata" title='cpudata' data-ref="159cpudata" data-ref-filename="159cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::hxcr0" title='vmx_cpudata::hxcr0' data-use='w' data-ref="vmx_cpudata::hxcr0" data-ref-filename="vmx_cpudata..hxcr0">hxcr0</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdxcr" title='rdxcr' data-ref="rdxcr" data-ref-filename="rdxcr">rdxcr</a>(<var>0</var>);</td></tr>
<tr><th id="1713">1713</th><td>		<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#wrxcr" title='wrxcr' data-ref="wrxcr" data-ref-filename="wrxcr">wrxcr</a>(<var>0</var>, <a class="local col9 ref" href="#159cpudata" title='cpudata' data-ref="159cpudata" data-ref-filename="159cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gxcr0" title='vmx_cpudata::gxcr0' data-use='r' data-ref="vmx_cpudata::gxcr0" data-ref-filename="vmx_cpudata..gxcr0">gxcr0</a>);</td></tr>
<tr><th id="1714">1714</th><td>	}</td></tr>
<tr><th id="1715">1715</th><td>}</td></tr>
<tr><th id="1716">1716</th><td></td></tr>
<tr><th id="1717">1717</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1718">1718</th><td><dfn class="tu decl def fn" id="vmx_vcpu_guest_fpu_leave" title='vmx_vcpu_guest_fpu_leave' data-type='void vmx_vcpu_guest_fpu_leave(struct nvmm_cpu * vcpu)' data-ref="vmx_vcpu_guest_fpu_leave" data-ref-filename="vmx_vcpu_guest_fpu_leave">vmx_vcpu_guest_fpu_leave</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col0 decl" id="160vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="160vcpu" data-ref-filename="160vcpu">vcpu</dfn>)</td></tr>
<tr><th id="1719">1719</th><td>{</td></tr>
<tr><th id="1720">1720</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col1 decl" id="161cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="161cpudata" data-ref-filename="161cpudata">cpudata</dfn> = <a class="local col0 ref" href="#160vcpu" title='vcpu' data-ref="160vcpu" data-ref-filename="160vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1721">1721</th><td></td></tr>
<tr><th id="1722">1722</th><td>	<b>if</b> (<a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a> != <var>0</var>) {</td></tr>
<tr><th id="1723">1723</th><td>		<a class="local col1 ref" href="#161cpudata" title='cpudata' data-ref="161cpudata" data-ref-filename="161cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gxcr0" title='vmx_cpudata::gxcr0' data-use='w' data-ref="vmx_cpudata::gxcr0" data-ref-filename="vmx_cpudata..gxcr0">gxcr0</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdxcr" title='rdxcr' data-ref="rdxcr" data-ref-filename="rdxcr">rdxcr</a>(<var>0</var>);</td></tr>
<tr><th id="1724">1724</th><td>		<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#wrxcr" title='wrxcr' data-ref="wrxcr" data-ref-filename="wrxcr">wrxcr</a>(<var>0</var>, <a class="local col1 ref" href="#161cpudata" title='cpudata' data-ref="161cpudata" data-ref-filename="161cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::hxcr0" title='vmx_cpudata::hxcr0' data-use='r' data-ref="vmx_cpudata::hxcr0" data-ref-filename="vmx_cpudata..hxcr0">hxcr0</a>);</td></tr>
<tr><th id="1725">1725</th><td>	}</td></tr>
<tr><th id="1726">1726</th><td></td></tr>
<tr><th id="1727">1727</th><td>	<a class="ref fn" href="../../../arch/x86/include/fpu.h.html#fpu_area_save" title='fpu_area_save' data-ref="fpu_area_save" data-ref-filename="fpu_area_save">fpu_area_save</a>(&amp;<a class="local col1 ref" href="#161cpudata" title='cpudata' data-ref="161cpudata" data-ref-filename="161cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gfpu" title='vmx_cpudata::gfpu' data-use='a' data-ref="vmx_cpudata::gfpu" data-ref-filename="vmx_cpudata..gfpu">gfpu</a>, <a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a>);</td></tr>
<tr><th id="1728">1728</th><td>	<a class="ref fn" href="../../../arch/x86/include/fpu.h.html#fpu_area_restore" title='fpu_area_restore' data-ref="fpu_area_restore" data-ref-filename="fpu_area_restore">fpu_area_restore</a>(&amp;<a class="local col1 ref" href="#161cpudata" title='cpudata' data-ref="161cpudata" data-ref-filename="161cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::hfpu" title='vmx_cpudata::hfpu' data-use='a' data-ref="vmx_cpudata::hfpu" data-ref-filename="vmx_cpudata..hfpu">hfpu</a>, <a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a>);</td></tr>
<tr><th id="1729">1729</th><td></td></tr>
<tr><th id="1730">1730</th><td>	<b>if</b> (<a class="local col1 ref" href="#161cpudata" title='cpudata' data-ref="161cpudata" data-ref-filename="161cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::ts_set" title='vmx_cpudata::ts_set' data-use='r' data-ref="vmx_cpudata::ts_set" data-ref-filename="vmx_cpudata..ts_set">ts_set</a>) {</td></tr>
<tr><th id="1731">1731</th><td>		<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#stts" title='stts' data-ref="stts" data-ref-filename="stts">stts</a>();</td></tr>
<tr><th id="1732">1732</th><td>	}</td></tr>
<tr><th id="1733">1733</th><td>}</td></tr>
<tr><th id="1734">1734</th><td></td></tr>
<tr><th id="1735">1735</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1736">1736</th><td><dfn class="tu decl def fn" id="vmx_vcpu_guest_dbregs_enter" title='vmx_vcpu_guest_dbregs_enter' data-type='void vmx_vcpu_guest_dbregs_enter(struct nvmm_cpu * vcpu)' data-ref="vmx_vcpu_guest_dbregs_enter" data-ref-filename="vmx_vcpu_guest_dbregs_enter">vmx_vcpu_guest_dbregs_enter</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col2 decl" id="162vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="162vcpu" data-ref-filename="162vcpu">vcpu</dfn>)</td></tr>
<tr><th id="1737">1737</th><td>{</td></tr>
<tr><th id="1738">1738</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col3 decl" id="163cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="163cpudata" data-ref-filename="163cpudata">cpudata</dfn> = <a class="local col2 ref" href="#162vcpu" title='vcpu' data-ref="162vcpu" data-ref-filename="162vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1739">1739</th><td></td></tr>
<tr><th id="1740">1740</th><td>	<a class="ref fn" href="../../../arch/x86/include/dbregs.h.html#x86_dbregs_save" title='x86_dbregs_save' data-ref="x86_dbregs_save" data-ref-filename="x86_dbregs_save">x86_dbregs_save</a>(<a class="macro" href="../../../arch/x86/include/cpu.h.html#405" title="x86_curlwp()" data-ref="_M/curlwp">curlwp</a>);</td></tr>
<tr><th id="1741">1741</th><td></td></tr>
<tr><th id="1742">1742</th><td>	<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#257" title='ldr7' data-ref="ldr7" data-ref-filename="ldr7">ldr7</a>(<var>0</var>);</td></tr>
<tr><th id="1743">1743</th><td></td></tr>
<tr><th id="1744">1744</th><td>	<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#252" title='ldr0' data-ref="ldr0" data-ref-filename="ldr0">ldr0</a>(<a class="local col3 ref" href="#163cpudata" title='cpudata' data-ref="163cpudata" data-ref-filename="163cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='r' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>[<a class="macro" href="nvmm_x86.h.html#149" title="0" data-ref="_M/NVMM_X64_DR_DR0">NVMM_X64_DR_DR0</a>]);</td></tr>
<tr><th id="1745">1745</th><td>	<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#253" title='ldr1' data-ref="ldr1" data-ref-filename="ldr1">ldr1</a>(<a class="local col3 ref" href="#163cpudata" title='cpudata' data-ref="163cpudata" data-ref-filename="163cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='r' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>[<a class="macro" href="nvmm_x86.h.html#150" title="1" data-ref="_M/NVMM_X64_DR_DR1">NVMM_X64_DR_DR1</a>]);</td></tr>
<tr><th id="1746">1746</th><td>	<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#254" title='ldr2' data-ref="ldr2" data-ref-filename="ldr2">ldr2</a>(<a class="local col3 ref" href="#163cpudata" title='cpudata' data-ref="163cpudata" data-ref-filename="163cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='r' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>[<a class="macro" href="nvmm_x86.h.html#151" title="2" data-ref="_M/NVMM_X64_DR_DR2">NVMM_X64_DR_DR2</a>]);</td></tr>
<tr><th id="1747">1747</th><td>	<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#255" title='ldr3' data-ref="ldr3" data-ref-filename="ldr3">ldr3</a>(<a class="local col3 ref" href="#163cpudata" title='cpudata' data-ref="163cpudata" data-ref-filename="163cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='r' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>[<a class="macro" href="nvmm_x86.h.html#152" title="3" data-ref="_M/NVMM_X64_DR_DR3">NVMM_X64_DR_DR3</a>]);</td></tr>
<tr><th id="1748">1748</th><td>	<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#256" title='ldr6' data-ref="ldr6" data-ref-filename="ldr6">ldr6</a>(<a class="local col3 ref" href="#163cpudata" title='cpudata' data-ref="163cpudata" data-ref-filename="163cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='r' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>[<a class="macro" href="nvmm_x86.h.html#153" title="4" data-ref="_M/NVMM_X64_DR_DR6">NVMM_X64_DR_DR6</a>]);</td></tr>
<tr><th id="1749">1749</th><td>}</td></tr>
<tr><th id="1750">1750</th><td></td></tr>
<tr><th id="1751">1751</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1752">1752</th><td><dfn class="tu decl def fn" id="vmx_vcpu_guest_dbregs_leave" title='vmx_vcpu_guest_dbregs_leave' data-type='void vmx_vcpu_guest_dbregs_leave(struct nvmm_cpu * vcpu)' data-ref="vmx_vcpu_guest_dbregs_leave" data-ref-filename="vmx_vcpu_guest_dbregs_leave">vmx_vcpu_guest_dbregs_leave</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col4 decl" id="164vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="164vcpu" data-ref-filename="164vcpu">vcpu</dfn>)</td></tr>
<tr><th id="1753">1753</th><td>{</td></tr>
<tr><th id="1754">1754</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col5 decl" id="165cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="165cpudata" data-ref-filename="165cpudata">cpudata</dfn> = <a class="local col4 ref" href="#164vcpu" title='vcpu' data-ref="164vcpu" data-ref-filename="164vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1755">1755</th><td></td></tr>
<tr><th id="1756">1756</th><td>	<a class="local col5 ref" href="#165cpudata" title='cpudata' data-ref="165cpudata" data-ref-filename="165cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='w' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>[<a class="macro" href="nvmm_x86.h.html#149" title="0" data-ref="_M/NVMM_X64_DR_DR0">NVMM_X64_DR_DR0</a>] = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#252" title='rdr0' data-ref="rdr0" data-ref-filename="rdr0">rdr0</a>();</td></tr>
<tr><th id="1757">1757</th><td>	<a class="local col5 ref" href="#165cpudata" title='cpudata' data-ref="165cpudata" data-ref-filename="165cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='w' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>[<a class="macro" href="nvmm_x86.h.html#150" title="1" data-ref="_M/NVMM_X64_DR_DR1">NVMM_X64_DR_DR1</a>] = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#253" title='rdr1' data-ref="rdr1" data-ref-filename="rdr1">rdr1</a>();</td></tr>
<tr><th id="1758">1758</th><td>	<a class="local col5 ref" href="#165cpudata" title='cpudata' data-ref="165cpudata" data-ref-filename="165cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='w' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>[<a class="macro" href="nvmm_x86.h.html#151" title="2" data-ref="_M/NVMM_X64_DR_DR2">NVMM_X64_DR_DR2</a>] = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#254" title='rdr2' data-ref="rdr2" data-ref-filename="rdr2">rdr2</a>();</td></tr>
<tr><th id="1759">1759</th><td>	<a class="local col5 ref" href="#165cpudata" title='cpudata' data-ref="165cpudata" data-ref-filename="165cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='w' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>[<a class="macro" href="nvmm_x86.h.html#152" title="3" data-ref="_M/NVMM_X64_DR_DR3">NVMM_X64_DR_DR3</a>] = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#255" title='rdr3' data-ref="rdr3" data-ref-filename="rdr3">rdr3</a>();</td></tr>
<tr><th id="1760">1760</th><td>	<a class="local col5 ref" href="#165cpudata" title='cpudata' data-ref="165cpudata" data-ref-filename="165cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='w' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>[<a class="macro" href="nvmm_x86.h.html#153" title="4" data-ref="_M/NVMM_X64_DR_DR6">NVMM_X64_DR_DR6</a>] = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#256" title='rdr6' data-ref="rdr6" data-ref-filename="rdr6">rdr6</a>();</td></tr>
<tr><th id="1761">1761</th><td></td></tr>
<tr><th id="1762">1762</th><td>	<a class="ref fn" href="../../../arch/x86/include/dbregs.h.html#x86_dbregs_restore" title='x86_dbregs_restore' data-ref="x86_dbregs_restore" data-ref-filename="x86_dbregs_restore">x86_dbregs_restore</a>(<a class="macro" href="../../../arch/x86/include/cpu.h.html#405" title="x86_curlwp()" data-ref="_M/curlwp">curlwp</a>);</td></tr>
<tr><th id="1763">1763</th><td>}</td></tr>
<tr><th id="1764">1764</th><td></td></tr>
<tr><th id="1765">1765</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1766">1766</th><td><dfn class="tu decl def fn" id="vmx_vcpu_guest_misc_enter" title='vmx_vcpu_guest_misc_enter' data-type='void vmx_vcpu_guest_misc_enter(struct nvmm_cpu * vcpu)' data-ref="vmx_vcpu_guest_misc_enter" data-ref-filename="vmx_vcpu_guest_misc_enter">vmx_vcpu_guest_misc_enter</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col6 decl" id="166vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="166vcpu" data-ref-filename="166vcpu">vcpu</dfn>)</td></tr>
<tr><th id="1767">1767</th><td>{</td></tr>
<tr><th id="1768">1768</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col7 decl" id="167cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="167cpudata" data-ref-filename="167cpudata">cpudata</dfn> = <a class="local col6 ref" href="#166vcpu" title='vcpu' data-ref="166vcpu" data-ref-filename="166vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1769">1769</th><td></td></tr>
<tr><th id="1770">1770</th><td>	<i>/* This gets restored automatically by the CPU. */</i></td></tr>
<tr><th id="1771">1771</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#481" title="0x00006C06" data-ref="_M/VMCS_HOST_FS_BASE">VMCS_HOST_FS_BASE</a>, <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#973" title="0xc0000100" data-ref="_M/MSR_FSBASE">MSR_FSBASE</a>));</td></tr>
<tr><th id="1772">1772</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#479" title="0x00006C02" data-ref="_M/VMCS_HOST_CR3">VMCS_HOST_CR3</a>, <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#215" title='rcr3' data-ref="rcr3" data-ref-filename="rcr3">rcr3</a>());</td></tr>
<tr><th id="1773">1773</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#480" title="0x00006C04" data-ref="_M/VMCS_HOST_CR4">VMCS_HOST_CR4</a>, <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#222" title='rcr4' data-ref="rcr4" data-ref-filename="rcr4">rcr4</a>());</td></tr>
<tr><th id="1774">1774</th><td></td></tr>
<tr><th id="1775">1775</th><td>	<a class="local col7 ref" href="#167cpudata" title='cpudata' data-ref="167cpudata" data-ref-filename="167cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::kernelgsbase" title='vmx_cpudata::kernelgsbase' data-use='w' data-ref="vmx_cpudata::kernelgsbase" data-ref-filename="vmx_cpudata..kernelgsbase">kernelgsbase</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#975" title="0xc0000102" data-ref="_M/MSR_KERNELGSBASE">MSR_KERNELGSBASE</a>);</td></tr>
<tr><th id="1776">1776</th><td>}</td></tr>
<tr><th id="1777">1777</th><td></td></tr>
<tr><th id="1778">1778</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1779">1779</th><td><dfn class="tu decl def fn" id="vmx_vcpu_guest_misc_leave" title='vmx_vcpu_guest_misc_leave' data-type='void vmx_vcpu_guest_misc_leave(struct nvmm_cpu * vcpu)' data-ref="vmx_vcpu_guest_misc_leave" data-ref-filename="vmx_vcpu_guest_misc_leave">vmx_vcpu_guest_misc_leave</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col8 decl" id="168vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="168vcpu" data-ref-filename="168vcpu">vcpu</dfn>)</td></tr>
<tr><th id="1780">1780</th><td>{</td></tr>
<tr><th id="1781">1781</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col9 decl" id="169cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="169cpudata" data-ref-filename="169cpudata">cpudata</dfn> = <a class="local col8 ref" href="#168vcpu" title='vcpu' data-ref="168vcpu" data-ref-filename="168vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1782">1782</th><td></td></tr>
<tr><th id="1783">1783</th><td>	<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#wrmsr" title='wrmsr' data-ref="wrmsr" data-ref-filename="wrmsr">wrmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#968" title="0xc0000081" data-ref="_M/MSR_STAR">MSR_STAR</a>, <a class="local col9 ref" href="#169cpudata" title='cpudata' data-ref="169cpudata" data-ref-filename="169cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::star" title='vmx_cpudata::star' data-use='r' data-ref="vmx_cpudata::star" data-ref-filename="vmx_cpudata..star">star</a>);</td></tr>
<tr><th id="1784">1784</th><td>	<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#wrmsr" title='wrmsr' data-ref="wrmsr" data-ref-filename="wrmsr">wrmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#969" title="0xc0000082" data-ref="_M/MSR_LSTAR">MSR_LSTAR</a>, <a class="local col9 ref" href="#169cpudata" title='cpudata' data-ref="169cpudata" data-ref-filename="169cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::lstar" title='vmx_cpudata::lstar' data-use='r' data-ref="vmx_cpudata::lstar" data-ref-filename="vmx_cpudata..lstar">lstar</a>);</td></tr>
<tr><th id="1785">1785</th><td>	<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#wrmsr" title='wrmsr' data-ref="wrmsr" data-ref-filename="wrmsr">wrmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#970" title="0xc0000083" data-ref="_M/MSR_CSTAR">MSR_CSTAR</a>, <a class="local col9 ref" href="#169cpudata" title='cpudata' data-ref="169cpudata" data-ref-filename="169cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::cstar" title='vmx_cpudata::cstar' data-use='r' data-ref="vmx_cpudata::cstar" data-ref-filename="vmx_cpudata..cstar">cstar</a>);</td></tr>
<tr><th id="1786">1786</th><td>	<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#wrmsr" title='wrmsr' data-ref="wrmsr" data-ref-filename="wrmsr">wrmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#971" title="0xc0000084" data-ref="_M/MSR_SFMASK">MSR_SFMASK</a>, <a class="local col9 ref" href="#169cpudata" title='cpudata' data-ref="169cpudata" data-ref-filename="169cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::sfmask" title='vmx_cpudata::sfmask' data-use='r' data-ref="vmx_cpudata::sfmask" data-ref-filename="vmx_cpudata..sfmask">sfmask</a>);</td></tr>
<tr><th id="1787">1787</th><td>	<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#wrmsr" title='wrmsr' data-ref="wrmsr" data-ref-filename="wrmsr">wrmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#975" title="0xc0000102" data-ref="_M/MSR_KERNELGSBASE">MSR_KERNELGSBASE</a>, <a class="local col9 ref" href="#169cpudata" title='cpudata' data-ref="169cpudata" data-ref-filename="169cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::kernelgsbase" title='vmx_cpudata::kernelgsbase' data-use='r' data-ref="vmx_cpudata::kernelgsbase" data-ref-filename="vmx_cpudata..kernelgsbase">kernelgsbase</a>);</td></tr>
<tr><th id="1788">1788</th><td>}</td></tr>
<tr><th id="1789">1789</th><td></td></tr>
<tr><th id="1790">1790</th><td><i>/* -------------------------------------------------------------------------- */</i></td></tr>
<tr><th id="1791">1791</th><td></td></tr>
<tr><th id="1792">1792</th><td><u>#define <dfn class="macro" id="_M/VMX_INVVPID_ADDRESS" data-ref="_M/VMX_INVVPID_ADDRESS">VMX_INVVPID_ADDRESS</dfn>		0</u></td></tr>
<tr><th id="1793">1793</th><td><u>#define <dfn class="macro" id="_M/VMX_INVVPID_CONTEXT" data-ref="_M/VMX_INVVPID_CONTEXT">VMX_INVVPID_CONTEXT</dfn>		1</u></td></tr>
<tr><th id="1794">1794</th><td><u>#define <dfn class="macro" id="_M/VMX_INVVPID_ALL" data-ref="_M/VMX_INVVPID_ALL">VMX_INVVPID_ALL</dfn>			2</u></td></tr>
<tr><th id="1795">1795</th><td><u>#define <dfn class="macro" id="_M/VMX_INVVPID_CONTEXT_NOGLOBAL" data-ref="_M/VMX_INVVPID_CONTEXT_NOGLOBAL">VMX_INVVPID_CONTEXT_NOGLOBAL</dfn>	3</u></td></tr>
<tr><th id="1796">1796</th><td></td></tr>
<tr><th id="1797">1797</th><td><u>#define <dfn class="macro" id="_M/VMX_INVEPT_CONTEXT" data-ref="_M/VMX_INVEPT_CONTEXT">VMX_INVEPT_CONTEXT</dfn>		1</u></td></tr>
<tr><th id="1798">1798</th><td><u>#define <dfn class="macro" id="_M/VMX_INVEPT_ALL" data-ref="_M/VMX_INVEPT_ALL">VMX_INVEPT_ALL</dfn>			2</u></td></tr>
<tr><th id="1799">1799</th><td></td></tr>
<tr><th id="1800">1800</th><td><em>static</em> <b>inline</b> <em>void</em></td></tr>
<tr><th id="1801">1801</th><td><dfn class="tu decl def fn" id="vmx_gtlb_catchup" title='vmx_gtlb_catchup' data-type='void vmx_gtlb_catchup(struct nvmm_cpu * vcpu, int hcpu)' data-ref="vmx_gtlb_catchup" data-ref-filename="vmx_gtlb_catchup">vmx_gtlb_catchup</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col0 decl" id="170vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="170vcpu" data-ref-filename="170vcpu">vcpu</dfn>, <em>int</em> <dfn class="local col1 decl" id="171hcpu" title='hcpu' data-type='int' data-ref="171hcpu" data-ref-filename="171hcpu">hcpu</dfn>)</td></tr>
<tr><th id="1802">1802</th><td>{</td></tr>
<tr><th id="1803">1803</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col2 decl" id="172cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="172cpudata" data-ref-filename="172cpudata">cpudata</dfn> = <a class="local col0 ref" href="#170vcpu" title='vcpu' data-ref="170vcpu" data-ref-filename="170vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1804">1804</th><td></td></tr>
<tr><th id="1805">1805</th><td>	<b>if</b> (<a class="local col0 ref" href="#170vcpu" title='vcpu' data-ref="170vcpu" data-ref-filename="170vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::hcpu_last" title='nvmm_cpu::hcpu_last' data-ref="nvmm_cpu::hcpu_last" data-ref-filename="nvmm_cpu..hcpu_last">hcpu_last</a> != <a class="local col1 ref" href="#171hcpu" title='hcpu' data-ref="171hcpu" data-ref-filename="171hcpu">hcpu</a>) {</td></tr>
<tr><th id="1806">1806</th><td>		<a class="local col2 ref" href="#172cpudata" title='cpudata' data-ref="172cpudata" data-ref-filename="172cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gtlb_want_flush" title='vmx_cpudata::gtlb_want_flush' data-use='w' data-ref="vmx_cpudata::gtlb_want_flush" data-ref-filename="vmx_cpudata..gtlb_want_flush">gtlb_want_flush</a> = <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="1807">1807</th><td>	}</td></tr>
<tr><th id="1808">1808</th><td>}</td></tr>
<tr><th id="1809">1809</th><td></td></tr>
<tr><th id="1810">1810</th><td><em>static</em> <b>inline</b> <em>void</em></td></tr>
<tr><th id="1811">1811</th><td><dfn class="tu decl def fn" id="vmx_htlb_catchup" title='vmx_htlb_catchup' data-type='void vmx_htlb_catchup(struct nvmm_cpu * vcpu, int hcpu)' data-ref="vmx_htlb_catchup" data-ref-filename="vmx_htlb_catchup">vmx_htlb_catchup</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col3 decl" id="173vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="173vcpu" data-ref-filename="173vcpu">vcpu</dfn>, <em>int</em> <dfn class="local col4 decl" id="174hcpu" title='hcpu' data-type='int' data-ref="174hcpu" data-ref-filename="174hcpu">hcpu</dfn>)</td></tr>
<tr><th id="1812">1812</th><td>{</td></tr>
<tr><th id="1813">1813</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col5 decl" id="175cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="175cpudata" data-ref-filename="175cpudata">cpudata</dfn> = <a class="local col3 ref" href="#173vcpu" title='vcpu' data-ref="173vcpu" data-ref-filename="173vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1814">1814</th><td>	<b>struct</b> <a class="type" href="#ept_desc" title='ept_desc' data-ref="ept_desc" data-ref-filename="ept_desc">ept_desc</a> <dfn class="local col6 decl" id="176ept_desc" title='ept_desc' data-type='struct ept_desc' data-ref="176ept_desc" data-ref-filename="176ept_desc">ept_desc</dfn>;</td></tr>
<tr><th id="1815">1815</th><td></td></tr>
<tr><th id="1816">1816</th><td>	<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#487" title="__builtin_expect((!kcpuset_isset(cpudata-&gt;htlb_want_flush, hcpu)) != 0, 1)" data-ref="_M/__predict_true">__predict_true</a>(!<a class="ref fn" href="../../../sys/kcpuset.h.html#kcpuset_isset" title='kcpuset_isset' data-ref="kcpuset_isset" data-ref-filename="kcpuset_isset">kcpuset_isset</a>(<a class="local col5 ref" href="#175cpudata" title='cpudata' data-ref="175cpudata" data-ref-filename="175cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::htlb_want_flush" title='vmx_cpudata::htlb_want_flush' data-use='r' data-ref="vmx_cpudata::htlb_want_flush" data-ref-filename="vmx_cpudata..htlb_want_flush">htlb_want_flush</a>, <a class="local col4 ref" href="#174hcpu" title='hcpu' data-ref="174hcpu" data-ref-filename="174hcpu">hcpu</a>))) {</td></tr>
<tr><th id="1817">1817</th><td>		<b>return</b>;</td></tr>
<tr><th id="1818">1818</th><td>	}</td></tr>
<tr><th id="1819">1819</th><td></td></tr>
<tr><th id="1820">1820</th><td>	<a class="local col6 ref" href="#176ept_desc" title='ept_desc' data-ref="176ept_desc" data-ref-filename="176ept_desc">ept_desc</a>.<a class="tu ref field" href="#ept_desc::eptp" title='ept_desc::eptp' data-use='w' data-ref="ept_desc::eptp" data-ref-filename="ept_desc..eptp">eptp</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#263" title="0x0000201A" data-ref="_M/VMCS_EPTP">VMCS_EPTP</a>);</td></tr>
<tr><th id="1821">1821</th><td>	<a class="local col6 ref" href="#176ept_desc" title='ept_desc' data-ref="176ept_desc" data-ref-filename="176ept_desc">ept_desc</a>.<a class="tu ref field" href="#ept_desc::mbz" title='ept_desc::mbz' data-use='w' data-ref="ept_desc::mbz" data-ref-filename="ept_desc..mbz">mbz</a> = <var>0</var>;</td></tr>
<tr><th id="1822">1822</th><td>	<a class="tu ref fn" href="#vmx_invept" title='vmx_invept' data-use='c' data-ref="vmx_invept" data-ref-filename="vmx_invept">vmx_invept</a>(<a class="tu ref" href="#vmx_ept_flush_op" title='vmx_ept_flush_op' data-use='r' data-ref="vmx_ept_flush_op" data-ref-filename="vmx_ept_flush_op">vmx_ept_flush_op</a>, &amp;<a class="local col6 ref" href="#176ept_desc" title='ept_desc' data-ref="176ept_desc" data-ref-filename="176ept_desc">ept_desc</a>);</td></tr>
<tr><th id="1823">1823</th><td>	<a class="ref fn" href="../../../sys/kcpuset.h.html#kcpuset_clear" title='kcpuset_clear' data-ref="kcpuset_clear" data-ref-filename="kcpuset_clear">kcpuset_clear</a>(<a class="local col5 ref" href="#175cpudata" title='cpudata' data-ref="175cpudata" data-ref-filename="175cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::htlb_want_flush" title='vmx_cpudata::htlb_want_flush' data-use='r' data-ref="vmx_cpudata::htlb_want_flush" data-ref-filename="vmx_cpudata..htlb_want_flush">htlb_want_flush</a>, <a class="local col4 ref" href="#174hcpu" title='hcpu' data-ref="174hcpu" data-ref-filename="174hcpu">hcpu</a>);</td></tr>
<tr><th id="1824">1824</th><td>}</td></tr>
<tr><th id="1825">1825</th><td></td></tr>
<tr><th id="1826">1826</th><td><em>static</em> <b>inline</b> <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a></td></tr>
<tr><th id="1827">1827</th><td><dfn class="tu decl def fn" id="vmx_htlb_flush" title='vmx_htlb_flush' data-type='uint64_t vmx_htlb_flush(struct vmx_machdata * machdata, struct vmx_cpudata * cpudata)' data-ref="vmx_htlb_flush" data-ref-filename="vmx_htlb_flush">vmx_htlb_flush</dfn>(<b>struct</b> <a class="type" href="#vmx_machdata" title='vmx_machdata' data-ref="vmx_machdata" data-ref-filename="vmx_machdata">vmx_machdata</a> *<dfn class="local col7 decl" id="177machdata" title='machdata' data-type='struct vmx_machdata *' data-ref="177machdata" data-ref-filename="177machdata">machdata</dfn>, <b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col8 decl" id="178cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="178cpudata" data-ref-filename="178cpudata">cpudata</dfn>)</td></tr>
<tr><th id="1828">1828</th><td>{</td></tr>
<tr><th id="1829">1829</th><td>	<b>struct</b> <a class="type" href="#ept_desc" title='ept_desc' data-ref="ept_desc" data-ref-filename="ept_desc">ept_desc</a> <dfn class="local col9 decl" id="179ept_desc" title='ept_desc' data-type='struct ept_desc' data-ref="179ept_desc" data-ref-filename="179ept_desc">ept_desc</dfn>;</td></tr>
<tr><th id="1830">1830</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col0 decl" id="180machgen" title='machgen' data-type='uint64_t' data-ref="180machgen" data-ref-filename="180machgen">machgen</dfn>;</td></tr>
<tr><th id="1831">1831</th><td></td></tr>
<tr><th id="1832">1832</th><td>	<a class="local col0 ref" href="#180machgen" title='machgen' data-ref="180machgen" data-ref-filename="180machgen">machgen</a> = <a class="local col7 ref" href="#177machdata" title='machdata' data-ref="177machdata" data-ref-filename="177machdata">machdata</a>-&gt;<a class="tu ref field" href="#vmx_machdata::mach_htlb_gen" title='vmx_machdata::mach_htlb_gen' data-use='r' data-ref="vmx_machdata::mach_htlb_gen" data-ref-filename="vmx_machdata..mach_htlb_gen">mach_htlb_gen</a>;</td></tr>
<tr><th id="1833">1833</th><td>	<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#487" title="__builtin_expect((machgen == cpudata-&gt;vcpu_htlb_gen) != 0, 1)" data-ref="_M/__predict_true">__predict_true</a>(<a class="local col0 ref" href="#180machgen" title='machgen' data-ref="180machgen" data-ref-filename="180machgen">machgen</a> == <a class="local col8 ref" href="#178cpudata" title='cpudata' data-ref="178cpudata" data-ref-filename="178cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vcpu_htlb_gen" title='vmx_cpudata::vcpu_htlb_gen' data-use='r' data-ref="vmx_cpudata::vcpu_htlb_gen" data-ref-filename="vmx_cpudata..vcpu_htlb_gen">vcpu_htlb_gen</a>)) {</td></tr>
<tr><th id="1834">1834</th><td>		<b>return</b> <a class="local col0 ref" href="#180machgen" title='machgen' data-ref="180machgen" data-ref-filename="180machgen">machgen</a>;</td></tr>
<tr><th id="1835">1835</th><td>	}</td></tr>
<tr><th id="1836">1836</th><td></td></tr>
<tr><th id="1837">1837</th><td>	<a class="ref fn" href="../../../sys/kcpuset.h.html#kcpuset_copy" title='kcpuset_copy' data-ref="kcpuset_copy" data-ref-filename="kcpuset_copy">kcpuset_copy</a>(<a class="local col8 ref" href="#178cpudata" title='cpudata' data-ref="178cpudata" data-ref-filename="178cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::htlb_want_flush" title='vmx_cpudata::htlb_want_flush' data-use='r' data-ref="vmx_cpudata::htlb_want_flush" data-ref-filename="vmx_cpudata..htlb_want_flush">htlb_want_flush</a>, <a class="ref" href="../../../sys/cpu.h.html#kcpuset_running" title='kcpuset_running' data-ref="kcpuset_running" data-ref-filename="kcpuset_running">kcpuset_running</a>);</td></tr>
<tr><th id="1838">1838</th><td></td></tr>
<tr><th id="1839">1839</th><td>	<a class="local col9 ref" href="#179ept_desc" title='ept_desc' data-ref="179ept_desc" data-ref-filename="179ept_desc">ept_desc</a>.<a class="tu ref field" href="#ept_desc::eptp" title='ept_desc::eptp' data-use='w' data-ref="ept_desc::eptp" data-ref-filename="ept_desc..eptp">eptp</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#263" title="0x0000201A" data-ref="_M/VMCS_EPTP">VMCS_EPTP</a>);</td></tr>
<tr><th id="1840">1840</th><td>	<a class="local col9 ref" href="#179ept_desc" title='ept_desc' data-ref="179ept_desc" data-ref-filename="179ept_desc">ept_desc</a>.<a class="tu ref field" href="#ept_desc::mbz" title='ept_desc::mbz' data-use='w' data-ref="ept_desc::mbz" data-ref-filename="ept_desc..mbz">mbz</a> = <var>0</var>;</td></tr>
<tr><th id="1841">1841</th><td>	<a class="tu ref fn" href="#vmx_invept" title='vmx_invept' data-use='c' data-ref="vmx_invept" data-ref-filename="vmx_invept">vmx_invept</a>(<a class="tu ref" href="#vmx_ept_flush_op" title='vmx_ept_flush_op' data-use='r' data-ref="vmx_ept_flush_op" data-ref-filename="vmx_ept_flush_op">vmx_ept_flush_op</a>, &amp;<a class="local col9 ref" href="#179ept_desc" title='ept_desc' data-ref="179ept_desc" data-ref-filename="179ept_desc">ept_desc</a>);</td></tr>
<tr><th id="1842">1842</th><td></td></tr>
<tr><th id="1843">1843</th><td>	<b>return</b> <a class="local col0 ref" href="#180machgen" title='machgen' data-ref="180machgen" data-ref-filename="180machgen">machgen</a>;</td></tr>
<tr><th id="1844">1844</th><td>}</td></tr>
<tr><th id="1845">1845</th><td></td></tr>
<tr><th id="1846">1846</th><td><em>static</em> <b>inline</b> <em>void</em></td></tr>
<tr><th id="1847">1847</th><td><dfn class="tu decl def fn" id="vmx_htlb_flush_ack" title='vmx_htlb_flush_ack' data-type='void vmx_htlb_flush_ack(struct vmx_cpudata * cpudata, uint64_t machgen)' data-ref="vmx_htlb_flush_ack" data-ref-filename="vmx_htlb_flush_ack">vmx_htlb_flush_ack</dfn>(<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col1 decl" id="181cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="181cpudata" data-ref-filename="181cpudata">cpudata</dfn>, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="182machgen" title='machgen' data-type='uint64_t' data-ref="182machgen" data-ref-filename="182machgen">machgen</dfn>)</td></tr>
<tr><th id="1848">1848</th><td>{</td></tr>
<tr><th id="1849">1849</th><td>	<a class="local col1 ref" href="#181cpudata" title='cpudata' data-ref="181cpudata" data-ref-filename="181cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vcpu_htlb_gen" title='vmx_cpudata::vcpu_htlb_gen' data-use='w' data-ref="vmx_cpudata::vcpu_htlb_gen" data-ref-filename="vmx_cpudata..vcpu_htlb_gen">vcpu_htlb_gen</a> = <a class="local col2 ref" href="#182machgen" title='machgen' data-ref="182machgen" data-ref-filename="182machgen">machgen</a>;</td></tr>
<tr><th id="1850">1850</th><td>	<a class="ref fn" href="../../../sys/kcpuset.h.html#kcpuset_clear" title='kcpuset_clear' data-ref="kcpuset_clear" data-ref-filename="kcpuset_clear">kcpuset_clear</a>(<a class="local col1 ref" href="#181cpudata" title='cpudata' data-ref="181cpudata" data-ref-filename="181cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::htlb_want_flush" title='vmx_cpudata::htlb_want_flush' data-use='r' data-ref="vmx_cpudata::htlb_want_flush" data-ref-filename="vmx_cpudata..htlb_want_flush">htlb_want_flush</a>, <a class="macro" href="../../../arch/x86/include/cpu.h.html#383" title="(cpu_index(x86_curcpu()))" data-ref="_M/cpu_number">cpu_number</a>());</td></tr>
<tr><th id="1851">1851</th><td>}</td></tr>
<tr><th id="1852">1852</th><td></td></tr>
<tr><th id="1853">1853</th><td><em>static</em> <b>inline</b> <em>void</em></td></tr>
<tr><th id="1854">1854</th><td><dfn class="tu decl def fn" id="vmx_exit_evt" title='vmx_exit_evt' data-type='void vmx_exit_evt(struct vmx_cpudata * cpudata)' data-ref="vmx_exit_evt" data-ref-filename="vmx_exit_evt">vmx_exit_evt</dfn>(<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col3 decl" id="183cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="183cpudata" data-ref-filename="183cpudata">cpudata</dfn>)</td></tr>
<tr><th id="1855">1855</th><td>{</td></tr>
<tr><th id="1856">1856</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col4 decl" id="184info" title='info' data-type='uint64_t' data-ref="184info" data-ref-filename="184info">info</dfn>, <dfn class="local col5 decl" id="185err" title='err' data-type='uint64_t' data-ref="185err" data-ref-filename="185err">err</dfn>;</td></tr>
<tr><th id="1857">1857</th><td></td></tr>
<tr><th id="1858">1858</th><td>	<a class="local col3 ref" href="#183cpudata" title='cpudata' data-ref="183cpudata" data-ref-filename="183cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::evt_pending" title='vmx_cpudata::evt_pending' data-use='w' data-ref="vmx_cpudata::evt_pending" data-ref-filename="vmx_cpudata..evt_pending">evt_pending</a> = <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="1859">1859</th><td></td></tr>
<tr><th id="1860">1860</th><td>	<a class="local col4 ref" href="#184info" title='info' data-ref="184info" data-ref-filename="184info">info</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#405" title="0x00004408" data-ref="_M/VMCS_IDT_VECTORING_INFO">VMCS_IDT_VECTORING_INFO</a>);</td></tr>
<tr><th id="1861">1861</th><td>	<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#487" title="__builtin_expect(((info &amp; (((uintmax_t)(31) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((31) &amp; (8 * sizeof(uintmax_t) - 1))))) == 0) != 0, 1)" data-ref="_M/__predict_true">__predict_true</a>((<a class="local col4 ref" href="#184info" title='info' data-ref="184info" data-ref-filename="184info">info</a> &amp; <a class="macro" href="#368" title="(((uintmax_t)(31) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((31) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/INTR_INFO_VALID">INTR_INFO_VALID</a>) == <var>0</var>)) {</td></tr>
<tr><th id="1862">1862</th><td>		<b>return</b>;</td></tr>
<tr><th id="1863">1863</th><td>	}</td></tr>
<tr><th id="1864">1864</th><td>	<a class="local col5 ref" href="#185err" title='err' data-ref="185err" data-ref-filename="185err">err</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#406" title="0x0000440A" data-ref="_M/VMCS_IDT_VECTORING_ERROR">VMCS_IDT_VECTORING_ERROR</a>);</td></tr>
<tr><th id="1865">1865</th><td></td></tr>
<tr><th id="1866">1866</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#357" title="0x00004016" data-ref="_M/VMCS_ENTRY_INTR_INFO">VMCS_ENTRY_INTR_INFO</a>, <a class="local col4 ref" href="#184info" title='info' data-ref="184info" data-ref-filename="184info">info</a>);</td></tr>
<tr><th id="1867">1867</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#369" title="0x00004018" data-ref="_M/VMCS_ENTRY_EXCEPTION_ERROR">VMCS_ENTRY_EXCEPTION_ERROR</a>, <a class="local col5 ref" href="#185err" title='err' data-ref="185err" data-ref-filename="185err">err</a>);</td></tr>
<tr><th id="1868">1868</th><td></td></tr>
<tr><th id="1869">1869</th><td>	<a class="local col3 ref" href="#183cpudata" title='cpudata' data-ref="183cpudata" data-ref-filename="183cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::evt_pending" title='vmx_cpudata::evt_pending' data-use='w' data-ref="vmx_cpudata::evt_pending" data-ref-filename="vmx_cpudata..evt_pending">evt_pending</a> = <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="1870">1870</th><td>}</td></tr>
<tr><th id="1871">1871</th><td></td></tr>
<tr><th id="1872">1872</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="1873">1873</th><td><dfn class="tu decl def fn" id="vmx_vcpu_run" title='vmx_vcpu_run' data-type='int vmx_vcpu_run(struct nvmm_machine * mach, struct nvmm_cpu * vcpu, struct nvmm_exit * exit)' data-ref="vmx_vcpu_run" data-ref-filename="vmx_vcpu_run">vmx_vcpu_run</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col6 decl" id="186mach" title='mach' data-type='struct nvmm_machine *' data-ref="186mach" data-ref-filename="186mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col7 decl" id="187vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</dfn>,</td></tr>
<tr><th id="1874">1874</th><td>    <b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_exit" title='nvmm_exit' data-ref="nvmm_exit" data-ref-filename="nvmm_exit">nvmm_exit</a> *<dfn class="local col8 decl" id="188exit" title='exit' data-type='struct nvmm_exit *' data-ref="188exit" data-ref-filename="188exit">exit</dfn>)</td></tr>
<tr><th id="1875">1875</th><td>{</td></tr>
<tr><th id="1876">1876</th><td>	<b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_comm_page" title='nvmm_comm_page' data-ref="nvmm_comm_page" data-ref-filename="nvmm_comm_page">nvmm_comm_page</a> *<dfn class="local col9 decl" id="189comm" title='comm' data-type='struct nvmm_comm_page *' data-ref="189comm" data-ref-filename="189comm">comm</dfn> = <a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>;</td></tr>
<tr><th id="1877">1877</th><td>	<b>struct</b> <a class="type" href="#vmx_machdata" title='vmx_machdata' data-ref="vmx_machdata" data-ref-filename="vmx_machdata">vmx_machdata</a> *<dfn class="local col0 decl" id="190machdata" title='machdata' data-type='struct vmx_machdata *' data-ref="190machdata" data-ref-filename="190machdata">machdata</dfn> = <a class="local col6 ref" href="#186mach" title='mach' data-ref="186mach" data-ref-filename="186mach">mach</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_machine::machdata" title='nvmm_machine::machdata' data-ref="nvmm_machine::machdata" data-ref-filename="nvmm_machine..machdata">machdata</a>;</td></tr>
<tr><th id="1878">1878</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col1 decl" id="191cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</dfn> = <a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="1879">1879</th><td>	<b>struct</b> <a class="type" href="#vpid_desc" title='vpid_desc' data-ref="vpid_desc" data-ref-filename="vpid_desc">vpid_desc</a> <dfn class="local col2 decl" id="192vpid_desc" title='vpid_desc' data-type='struct vpid_desc' data-ref="192vpid_desc" data-ref-filename="192vpid_desc">vpid_desc</dfn>;</td></tr>
<tr><th id="1880">1880</th><td>	<b>struct</b> <a class="type" href="../../../arch/x86/include/cpu.h.html#cpu_info" title='cpu_info' data-ref="cpu_info" data-ref-filename="cpu_info">cpu_info</a> *<dfn class="local col3 decl" id="193ci" title='ci' data-type='struct cpu_info *' data-ref="193ci" data-ref-filename="193ci">ci</dfn>;</td></tr>
<tr><th id="1881">1881</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col4 decl" id="194exitcode" title='exitcode' data-type='uint64_t' data-ref="194exitcode" data-ref-filename="194exitcode">exitcode</dfn>;</td></tr>
<tr><th id="1882">1882</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col5 decl" id="195intstate" title='intstate' data-type='uint64_t' data-ref="195intstate" data-ref-filename="195intstate">intstate</dfn>;</td></tr>
<tr><th id="1883">1883</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col6 decl" id="196machgen" title='machgen' data-type='uint64_t' data-ref="196machgen" data-ref-filename="196machgen">machgen</dfn>;</td></tr>
<tr><th id="1884">1884</th><td>	<em>int</em> <dfn class="local col7 decl" id="197hcpu" title='hcpu' data-type='int' data-ref="197hcpu" data-ref-filename="197hcpu">hcpu</dfn>, <dfn class="local col8 decl" id="198s" title='s' data-type='int' data-ref="198s" data-ref-filename="198s">s</dfn>, <dfn class="local col9 decl" id="199ret" title='ret' data-type='int' data-ref="199ret" data-ref-filename="199ret">ret</dfn>;</td></tr>
<tr><th id="1885">1885</th><td>	<a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="local col0 decl" id="200launched" title='launched' data-type='_Bool' data-ref="200launched" data-ref-filename="200launched">launched</dfn>;</td></tr>
<tr><th id="1886">1886</th><td></td></tr>
<tr><th id="1887">1887</th><td>	<a class="tu ref fn" href="#vmx_vmcs_enter" title='vmx_vmcs_enter' data-use='c' data-ref="vmx_vmcs_enter" data-ref-filename="vmx_vmcs_enter">vmx_vmcs_enter</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>);</td></tr>
<tr><th id="1888">1888</th><td></td></tr>
<tr><th id="1889">1889</th><td>	<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#488" title="__builtin_expect((vmx_vcpu_event_commit(vcpu) != 0) != 0, 0)" data-ref="_M/__predict_false">__predict_false</a>(<a class="tu ref fn" href="#vmx_vcpu_event_commit" title='vmx_vcpu_event_commit' data-use='c' data-ref="vmx_vcpu_event_commit" data-ref-filename="vmx_vcpu_event_commit">vmx_vcpu_event_commit</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>) != <var>0</var>)) {</td></tr>
<tr><th id="1890">1890</th><td>		<a class="tu ref fn" href="#vmx_vmcs_leave" title='vmx_vmcs_leave' data-use='c' data-ref="vmx_vmcs_leave" data-ref-filename="vmx_vmcs_leave">vmx_vmcs_leave</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>);</td></tr>
<tr><th id="1891">1891</th><td>		<b>return</b> <a class="macro" href="../../../sys/errno.h.html#64" title="22" data-ref="_M/EINVAL">EINVAL</a>;</td></tr>
<tr><th id="1892">1892</th><td>	}</td></tr>
<tr><th id="1893">1893</th><td>	<a class="tu ref fn" href="#vmx_vcpu_state_commit" title='vmx_vcpu_state_commit' data-use='c' data-ref="vmx_vcpu_state_commit" data-ref-filename="vmx_vcpu_state_commit">vmx_vcpu_state_commit</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>);</td></tr>
<tr><th id="1894">1894</th><td>	<a class="local col9 ref" href="#189comm" title='comm' data-ref="189comm" data-ref-filename="189comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state_cached" title='nvmm_comm_page::state_cached' data-ref="nvmm_comm_page::state_cached" data-ref-filename="nvmm_comm_page..state_cached">state_cached</a> = <var>0</var>;</td></tr>
<tr><th id="1895">1895</th><td></td></tr>
<tr><th id="1896">1896</th><td>	<a class="local col3 ref" href="#193ci" title='ci' data-ref="193ci" data-ref-filename="193ci">ci</a> = <a class="macro" href="../../../arch/x86/include/cpu.h.html#404" title="x86_curcpu()" data-ref="_M/curcpu">curcpu</a>();</td></tr>
<tr><th id="1897">1897</th><td>	<a class="local col7 ref" href="#197hcpu" title='hcpu' data-ref="197hcpu" data-ref-filename="197hcpu">hcpu</a> = <a class="macro" href="../../../arch/x86/include/cpu.h.html#383" title="(cpu_index(x86_curcpu()))" data-ref="_M/cpu_number">cpu_number</a>();</td></tr>
<tr><th id="1898">1898</th><td>	<a class="local col0 ref" href="#200launched" title='launched' data-ref="200launched" data-ref-filename="200launched">launched</a> = <a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_launched" title='vmx_cpudata::vmcs_launched' data-use='r' data-ref="vmx_cpudata::vmcs_launched" data-ref-filename="vmx_cpudata..vmcs_launched">vmcs_launched</a>;</td></tr>
<tr><th id="1899">1899</th><td></td></tr>
<tr><th id="1900">1900</th><td>	<a class="tu ref fn" href="#vmx_gtlb_catchup" title='vmx_gtlb_catchup' data-use='c' data-ref="vmx_gtlb_catchup" data-ref-filename="vmx_gtlb_catchup">vmx_gtlb_catchup</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>, <a class="local col7 ref" href="#197hcpu" title='hcpu' data-ref="197hcpu" data-ref-filename="197hcpu">hcpu</a>);</td></tr>
<tr><th id="1901">1901</th><td>	<a class="tu ref fn" href="#vmx_htlb_catchup" title='vmx_htlb_catchup' data-use='c' data-ref="vmx_htlb_catchup" data-ref-filename="vmx_htlb_catchup">vmx_htlb_catchup</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>, <a class="local col7 ref" href="#197hcpu" title='hcpu' data-ref="197hcpu" data-ref-filename="197hcpu">hcpu</a>);</td></tr>
<tr><th id="1902">1902</th><td></td></tr>
<tr><th id="1903">1903</th><td>	<b>if</b> (<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::hcpu_last" title='nvmm_cpu::hcpu_last' data-ref="nvmm_cpu::hcpu_last" data-ref-filename="nvmm_cpu..hcpu_last">hcpu_last</a> != <a class="local col7 ref" href="#197hcpu" title='hcpu' data-ref="197hcpu" data-ref-filename="197hcpu">hcpu</a>) {</td></tr>
<tr><th id="1904">1904</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#248" title="0x00000C0C" data-ref="_M/VMCS_HOST_TR_SELECTOR">VMCS_HOST_TR_SELECTOR</a>, <a class="local col3 ref" href="#193ci" title='ci' data-ref="193ci" data-ref-filename="193ci">ci</a>-&gt;<a class="ref field" href="../../../arch/x86/include/cpu.h.html#cpu_info::ci_tss_sel" title='cpu_info::ci_tss_sel' data-ref="cpu_info::ci_tss_sel" data-ref-filename="cpu_info..ci_tss_sel">ci_tss_sel</a>);</td></tr>
<tr><th id="1905">1905</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#483" title="0x00006C0A" data-ref="_M/VMCS_HOST_TR_BASE">VMCS_HOST_TR_BASE</a>, (<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>)<a class="local col3 ref" href="#193ci" title='ci' data-ref="193ci" data-ref-filename="193ci">ci</a>-&gt;<a class="ref field" href="../../../arch/x86/include/cpu.h.html#cpu_info::ci_tss" title='cpu_info::ci_tss' data-ref="cpu_info::ci_tss" data-ref-filename="cpu_info..ci_tss">ci_tss</a>);</td></tr>
<tr><th id="1906">1906</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#484" title="0x00006C0C" data-ref="_M/VMCS_HOST_GDTR_BASE">VMCS_HOST_GDTR_BASE</a>, (<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>)<a class="local col3 ref" href="#193ci" title='ci' data-ref="193ci" data-ref-filename="193ci">ci</a>-&gt;<a class="ref field" href="../../../arch/x86/include/cpu.h.html#cpu_info::ci_gdt" title='cpu_info::ci_gdt' data-ref="cpu_info::ci_gdt" data-ref-filename="cpu_info..ci_gdt">ci_gdt</a>);</td></tr>
<tr><th id="1907">1907</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#482" title="0x00006C08" data-ref="_M/VMCS_HOST_GS_BASE">VMCS_HOST_GS_BASE</a>, <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#974" title="0xc0000101" data-ref="_M/MSR_GSBASE">MSR_GSBASE</a>));</td></tr>
<tr><th id="1908">1908</th><td>		<a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gtsc_want_update" title='vmx_cpudata::gtsc_want_update' data-use='w' data-ref="vmx_cpudata::gtsc_want_update" data-ref-filename="vmx_cpudata..gtsc_want_update">gtsc_want_update</a> = <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="1909">1909</th><td>		<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::hcpu_last" title='nvmm_cpu::hcpu_last' data-ref="nvmm_cpu::hcpu_last" data-ref-filename="nvmm_cpu..hcpu_last">hcpu_last</a> = <a class="local col7 ref" href="#197hcpu" title='hcpu' data-ref="197hcpu" data-ref-filename="197hcpu">hcpu</a>;</td></tr>
<tr><th id="1910">1910</th><td>	}</td></tr>
<tr><th id="1911">1911</th><td></td></tr>
<tr><th id="1912">1912</th><td>	<a class="tu ref fn" href="#vmx_vcpu_guest_dbregs_enter" title='vmx_vcpu_guest_dbregs_enter' data-use='c' data-ref="vmx_vcpu_guest_dbregs_enter" data-ref-filename="vmx_vcpu_guest_dbregs_enter">vmx_vcpu_guest_dbregs_enter</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>);</td></tr>
<tr><th id="1913">1913</th><td>	<a class="tu ref fn" href="#vmx_vcpu_guest_misc_enter" title='vmx_vcpu_guest_misc_enter' data-use='c' data-ref="vmx_vcpu_guest_misc_enter" data-ref-filename="vmx_vcpu_guest_misc_enter">vmx_vcpu_guest_misc_enter</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>);</td></tr>
<tr><th id="1914">1914</th><td></td></tr>
<tr><th id="1915">1915</th><td>	<b>while</b> (<var>1</var>) {</td></tr>
<tr><th id="1916">1916</th><td>		<b>if</b> (<a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gtlb_want_flush" title='vmx_cpudata::gtlb_want_flush' data-use='r' data-ref="vmx_cpudata::gtlb_want_flush" data-ref-filename="vmx_cpudata..gtlb_want_flush">gtlb_want_flush</a>) {</td></tr>
<tr><th id="1917">1917</th><td>			<a class="local col2 ref" href="#192vpid_desc" title='vpid_desc' data-ref="192vpid_desc" data-ref-filename="192vpid_desc">vpid_desc</a>.<a class="tu ref field" href="#vpid_desc::vpid" title='vpid_desc::vpid' data-use='w' data-ref="vpid_desc::vpid" data-ref-filename="vpid_desc..vpid">vpid</a> = <a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::asid" title='vmx_cpudata::asid' data-use='r' data-ref="vmx_cpudata::asid" data-ref-filename="vmx_cpudata..asid">asid</a>;</td></tr>
<tr><th id="1918">1918</th><td>			<a class="local col2 ref" href="#192vpid_desc" title='vpid_desc' data-ref="192vpid_desc" data-ref-filename="192vpid_desc">vpid_desc</a>.<a class="tu ref field" href="#vpid_desc::addr" title='vpid_desc::addr' data-use='w' data-ref="vpid_desc::addr" data-ref-filename="vpid_desc..addr">addr</a> = <var>0</var>;</td></tr>
<tr><th id="1919">1919</th><td>			<a class="tu ref fn" href="#vmx_invvpid" title='vmx_invvpid' data-use='c' data-ref="vmx_invvpid" data-ref-filename="vmx_invvpid">vmx_invvpid</a>(<a class="tu ref" href="#vmx_tlb_flush_op" title='vmx_tlb_flush_op' data-use='r' data-ref="vmx_tlb_flush_op" data-ref-filename="vmx_tlb_flush_op">vmx_tlb_flush_op</a>, &amp;<a class="local col2 ref" href="#192vpid_desc" title='vpid_desc' data-ref="192vpid_desc" data-ref-filename="192vpid_desc">vpid_desc</a>);</td></tr>
<tr><th id="1920">1920</th><td>			<a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gtlb_want_flush" title='vmx_cpudata::gtlb_want_flush' data-use='w' data-ref="vmx_cpudata::gtlb_want_flush" data-ref-filename="vmx_cpudata..gtlb_want_flush">gtlb_want_flush</a> = <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="1921">1921</th><td>		}</td></tr>
<tr><th id="1922">1922</th><td></td></tr>
<tr><th id="1923">1923</th><td>		<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#488" title="__builtin_expect((cpudata-&gt;gtsc_want_update) != 0, 0)" data-ref="_M/__predict_false">__predict_false</a>(<a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gtsc_want_update" title='vmx_cpudata::gtsc_want_update' data-use='r' data-ref="vmx_cpudata::gtsc_want_update" data-ref-filename="vmx_cpudata..gtsc_want_update">gtsc_want_update</a>)) {</td></tr>
<tr><th id="1924">1924</th><td>			<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#258" title="0x00002010" data-ref="_M/VMCS_TSC_OFFSET">VMCS_TSC_OFFSET</a>, <a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gtsc" title='vmx_cpudata::gtsc' data-use='r' data-ref="vmx_cpudata::gtsc" data-ref-filename="vmx_cpudata..gtsc">gtsc</a> - <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdtsc" title='rdtsc' data-ref="rdtsc" data-ref-filename="rdtsc">rdtsc</a>());</td></tr>
<tr><th id="1925">1925</th><td>			<a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gtsc_want_update" title='vmx_cpudata::gtsc_want_update' data-use='w' data-ref="vmx_cpudata::gtsc_want_update" data-ref-filename="vmx_cpudata..gtsc_want_update">gtsc_want_update</a> = <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="1926">1926</th><td>		}</td></tr>
<tr><th id="1927">1927</th><td></td></tr>
<tr><th id="1928">1928</th><td>		<a class="local col8 ref" href="#198s" title='s' data-ref="198s" data-ref-filename="198s">s</a> = <a class="ref fn" href="../../../sys/spl.h.html#58" title='splhigh' data-ref="splhigh" data-ref-filename="splhigh">splhigh</a>();</td></tr>
<tr><th id="1929">1929</th><td>		<a class="local col6 ref" href="#196machgen" title='machgen' data-ref="196machgen" data-ref-filename="196machgen">machgen</a> = <a class="tu ref fn" href="#vmx_htlb_flush" title='vmx_htlb_flush' data-use='c' data-ref="vmx_htlb_flush" data-ref-filename="vmx_htlb_flush">vmx_htlb_flush</a>(<a class="local col0 ref" href="#190machdata" title='machdata' data-ref="190machdata" data-ref-filename="190machdata">machdata</a>, <a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>);</td></tr>
<tr><th id="1930">1930</th><td>		<a class="tu ref fn" href="#vmx_vcpu_guest_fpu_enter" title='vmx_vcpu_guest_fpu_enter' data-use='c' data-ref="vmx_vcpu_guest_fpu_enter" data-ref-filename="vmx_vcpu_guest_fpu_enter">vmx_vcpu_guest_fpu_enter</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>);</td></tr>
<tr><th id="1931">1931</th><td>		<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#214" title='lcr2' data-ref="lcr2" data-ref-filename="lcr2">lcr2</a>(<a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gcr2" title='vmx_cpudata::gcr2' data-use='r' data-ref="vmx_cpudata::gcr2" data-ref-filename="vmx_cpudata..gcr2">gcr2</a>);</td></tr>
<tr><th id="1932">1932</th><td>		<b>if</b> (<a class="local col0 ref" href="#200launched" title='launched' data-ref="200launched" data-ref-filename="200launched">launched</a>) {</td></tr>
<tr><th id="1933">1933</th><td>			<a class="local col9 ref" href="#199ret" title='ret' data-ref="199ret" data-ref-filename="199ret">ret</a> = <a class="ref fn" href="#vmx_vmresume" title='vmx_vmresume' data-ref="vmx_vmresume" data-ref-filename="vmx_vmresume">vmx_vmresume</a>(<a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>);</td></tr>
<tr><th id="1934">1934</th><td>		} <b>else</b> {</td></tr>
<tr><th id="1935">1935</th><td>			<a class="local col9 ref" href="#199ret" title='ret' data-ref="199ret" data-ref-filename="199ret">ret</a> = <a class="ref fn" href="#vmx_vmlaunch" title='vmx_vmlaunch' data-ref="vmx_vmlaunch" data-ref-filename="vmx_vmlaunch">vmx_vmlaunch</a>(<a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>);</td></tr>
<tr><th id="1936">1936</th><td>		}</td></tr>
<tr><th id="1937">1937</th><td>		<a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gcr2" title='vmx_cpudata::gcr2' data-use='w' data-ref="vmx_cpudata::gcr2" data-ref-filename="vmx_cpudata..gcr2">gcr2</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#214" title='rcr2' data-ref="rcr2" data-ref-filename="rcr2">rcr2</a>();</td></tr>
<tr><th id="1938">1938</th><td>		<a class="tu ref fn" href="#vmx_vcpu_guest_fpu_leave" title='vmx_vcpu_guest_fpu_leave' data-use='c' data-ref="vmx_vcpu_guest_fpu_leave" data-ref-filename="vmx_vcpu_guest_fpu_leave">vmx_vcpu_guest_fpu_leave</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>);</td></tr>
<tr><th id="1939">1939</th><td>		<a class="tu ref fn" href="#vmx_htlb_flush_ack" title='vmx_htlb_flush_ack' data-use='c' data-ref="vmx_htlb_flush_ack" data-ref-filename="vmx_htlb_flush_ack">vmx_htlb_flush_ack</a>(<a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>, <a class="local col6 ref" href="#196machgen" title='machgen' data-ref="196machgen" data-ref-filename="196machgen">machgen</a>);</td></tr>
<tr><th id="1940">1940</th><td>		<a class="macro" href="../../../arch/x86/include/intr.h.html#170" title="spllower(s)" data-ref="_M/splx">splx</a>(<a class="local col8 ref" href="#198s" title='s' data-ref="198s" data-ref-filename="198s">s</a>);</td></tr>
<tr><th id="1941">1941</th><td></td></tr>
<tr><th id="1942">1942</th><td>		<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#488" title="__builtin_expect((ret != 0) != 0, 0)" data-ref="_M/__predict_false">__predict_false</a>(<a class="local col9 ref" href="#199ret" title='ret' data-ref="199ret" data-ref-filename="199ret">ret</a> != <var>0</var>)) {</td></tr>
<tr><th id="1943">1943</th><td>			<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#60" title="0xFFFFFFFFFFFFFFFFULL" data-ref="_M/NVMM_EXIT_INVALID">NVMM_EXIT_INVALID</a>;</td></tr>
<tr><th id="1944">1944</th><td>			<b>break</b>;</td></tr>
<tr><th id="1945">1945</th><td>		}</td></tr>
<tr><th id="1946">1946</th><td>		<a class="tu ref fn" href="#vmx_exit_evt" title='vmx_exit_evt' data-use='c' data-ref="vmx_exit_evt" data-ref-filename="vmx_exit_evt">vmx_exit_evt</a>(<a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>);</td></tr>
<tr><th id="1947">1947</th><td></td></tr>
<tr><th id="1948">1948</th><td>		<a class="local col0 ref" href="#200launched" title='launched' data-ref="200launched" data-ref-filename="200launched">launched</a> = <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="1949">1949</th><td></td></tr>
<tr><th id="1950">1950</th><td>		<a class="local col4 ref" href="#194exitcode" title='exitcode' data-ref="194exitcode" data-ref-filename="194exitcode">exitcode</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#402" title="0x00004402" data-ref="_M/VMCS_EXIT_REASON">VMCS_EXIT_REASON</a>);</td></tr>
<tr><th id="1951">1951</th><td>		<a class="local col4 ref" href="#194exitcode" title='exitcode' data-ref="194exitcode" data-ref-filename="194exitcode">exitcode</a> &amp;= <a class="macro" href="../../../sys/cdefs.h.html#593" title="(((((uintmax_t)((( ((15))&gt;((0)))?((15)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((15))&gt;((0)))?((15)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((15))&lt;=((0)))?((15)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((15))&lt;=((0)))?((15)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/__BITS">__BITS</a>(<var>15</var>,<var>0</var>);</td></tr>
<tr><th id="1952">1952</th><td></td></tr>
<tr><th id="1953">1953</th><td>		<b>switch</b> (<a class="local col4 ref" href="#194exitcode" title='exitcode' data-ref="194exitcode" data-ref-filename="194exitcode">exitcode</a>) {</td></tr>
<tr><th id="1954">1954</th><td>		<b>case</b> <a class="macro" href="#492" title="0" data-ref="_M/VMCS_EXITCODE_EXC_NMI">VMCS_EXITCODE_EXC_NMI</a>:</td></tr>
<tr><th id="1955">1955</th><td>			<a class="tu ref fn" href="#vmx_exit_exc_nmi" title='vmx_exit_exc_nmi' data-use='c' data-ref="vmx_exit_exc_nmi" data-ref-filename="vmx_exit_exc_nmi">vmx_exit_exc_nmi</a>(<a class="local col6 ref" href="#186mach" title='mach' data-ref="186mach" data-ref-filename="186mach">mach</a>, <a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>, <a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>);</td></tr>
<tr><th id="1956">1956</th><td>			<b>break</b>;</td></tr>
<tr><th id="1957">1957</th><td>		<b>case</b> <a class="macro" href="#493" title="1" data-ref="_M/VMCS_EXITCODE_EXT_INT">VMCS_EXITCODE_EXT_INT</a>:</td></tr>
<tr><th id="1958">1958</th><td>			<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#51" title="0x0000000000000000ULL" data-ref="_M/NVMM_EXIT_NONE">NVMM_EXIT_NONE</a>;</td></tr>
<tr><th id="1959">1959</th><td>			<b>break</b>;</td></tr>
<tr><th id="1960">1960</th><td>		<b>case</b> <a class="macro" href="#502" title="10" data-ref="_M/VMCS_EXITCODE_CPUID">VMCS_EXITCODE_CPUID</a>:</td></tr>
<tr><th id="1961">1961</th><td>			<a class="tu ref fn" href="#vmx_exit_cpuid" title='vmx_exit_cpuid' data-use='c' data-ref="vmx_exit_cpuid" data-ref-filename="vmx_exit_cpuid">vmx_exit_cpuid</a>(<a class="local col6 ref" href="#186mach" title='mach' data-ref="186mach" data-ref-filename="186mach">mach</a>, <a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>, <a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>);</td></tr>
<tr><th id="1962">1962</th><td>			<b>break</b>;</td></tr>
<tr><th id="1963">1963</th><td>		<b>case</b> <a class="macro" href="#504" title="12" data-ref="_M/VMCS_EXITCODE_HLT">VMCS_EXITCODE_HLT</a>:</td></tr>
<tr><th id="1964">1964</th><td>			<a class="tu ref fn" href="#vmx_exit_hlt" title='vmx_exit_hlt' data-use='c' data-ref="vmx_exit_hlt" data-ref-filename="vmx_exit_hlt">vmx_exit_hlt</a>(<a class="local col6 ref" href="#186mach" title='mach' data-ref="186mach" data-ref-filename="186mach">mach</a>, <a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>, <a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>);</td></tr>
<tr><th id="1965">1965</th><td>			<b>break</b>;</td></tr>
<tr><th id="1966">1966</th><td>		<b>case</b> <a class="macro" href="#520" title="28" data-ref="_M/VMCS_EXITCODE_CR">VMCS_EXITCODE_CR</a>:</td></tr>
<tr><th id="1967">1967</th><td>			<a class="tu ref fn" href="#vmx_exit_cr" title='vmx_exit_cr' data-use='c' data-ref="vmx_exit_cr" data-ref-filename="vmx_exit_cr">vmx_exit_cr</a>(<a class="local col6 ref" href="#186mach" title='mach' data-ref="186mach" data-ref-filename="186mach">mach</a>, <a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>, <a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>);</td></tr>
<tr><th id="1968">1968</th><td>			<b>break</b>;</td></tr>
<tr><th id="1969">1969</th><td>		<b>case</b> <a class="macro" href="#522" title="30" data-ref="_M/VMCS_EXITCODE_IO">VMCS_EXITCODE_IO</a>:</td></tr>
<tr><th id="1970">1970</th><td>			<a class="tu ref fn" href="#vmx_exit_io" title='vmx_exit_io' data-use='c' data-ref="vmx_exit_io" data-ref-filename="vmx_exit_io">vmx_exit_io</a>(<a class="local col6 ref" href="#186mach" title='mach' data-ref="186mach" data-ref-filename="186mach">mach</a>, <a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>, <a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>);</td></tr>
<tr><th id="1971">1971</th><td>			<b>break</b>;</td></tr>
<tr><th id="1972">1972</th><td>		<b>case</b> <a class="macro" href="#523" title="31" data-ref="_M/VMCS_EXITCODE_RDMSR">VMCS_EXITCODE_RDMSR</a>:</td></tr>
<tr><th id="1973">1973</th><td>			<a class="tu ref fn" href="#vmx_exit_msr" title='vmx_exit_msr' data-use='c' data-ref="vmx_exit_msr" data-ref-filename="vmx_exit_msr">vmx_exit_msr</a>(<a class="local col6 ref" href="#186mach" title='mach' data-ref="186mach" data-ref-filename="186mach">mach</a>, <a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>, <a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="1974">1974</th><td>			<b>break</b>;</td></tr>
<tr><th id="1975">1975</th><td>		<b>case</b> <a class="macro" href="#524" title="32" data-ref="_M/VMCS_EXITCODE_WRMSR">VMCS_EXITCODE_WRMSR</a>:</td></tr>
<tr><th id="1976">1976</th><td>			<a class="tu ref fn" href="#vmx_exit_msr" title='vmx_exit_msr' data-use='c' data-ref="vmx_exit_msr" data-ref-filename="vmx_exit_msr">vmx_exit_msr</a>(<a class="local col6 ref" href="#186mach" title='mach' data-ref="186mach" data-ref-filename="186mach">mach</a>, <a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>, <a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>, <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>);</td></tr>
<tr><th id="1977">1977</th><td>			<b>break</b>;</td></tr>
<tr><th id="1978">1978</th><td>		<b>case</b> <a class="macro" href="#494" title="2" data-ref="_M/VMCS_EXITCODE_SHUTDOWN">VMCS_EXITCODE_SHUTDOWN</a>:</td></tr>
<tr><th id="1979">1979</th><td>			<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#58" title="0x0000000000000007ULL" data-ref="_M/NVMM_EXIT_SHUTDOWN">NVMM_EXIT_SHUTDOWN</a>;</td></tr>
<tr><th id="1980">1980</th><td>			<b>break</b>;</td></tr>
<tr><th id="1981">1981</th><td>		<b>case</b> <a class="macro" href="#529" title="39" data-ref="_M/VMCS_EXITCODE_MONITOR">VMCS_EXITCODE_MONITOR</a>:</td></tr>
<tr><th id="1982">1982</th><td>			<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="nvmm_x86.h.html#90" title="0x0000000000001000ULL" data-ref="_M/NVMM_EXIT_MONITOR">NVMM_EXIT_MONITOR</a>;</td></tr>
<tr><th id="1983">1983</th><td>			<b>break</b>;</td></tr>
<tr><th id="1984">1984</th><td>		<b>case</b> <a class="macro" href="#527" title="36" data-ref="_M/VMCS_EXITCODE_MWAIT">VMCS_EXITCODE_MWAIT</a>:</td></tr>
<tr><th id="1985">1985</th><td>			<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="nvmm_x86.h.html#91" title="0x0000000000001001ULL" data-ref="_M/NVMM_EXIT_MWAIT">NVMM_EXIT_MWAIT</a>;</td></tr>
<tr><th id="1986">1986</th><td>			<b>break</b>;</td></tr>
<tr><th id="1987">1987</th><td>		<b>case</b> <a class="macro" href="#544" title="55" data-ref="_M/VMCS_EXITCODE_XSETBV">VMCS_EXITCODE_XSETBV</a>:</td></tr>
<tr><th id="1988">1988</th><td>			<a class="tu ref fn" href="#vmx_exit_xsetbv" title='vmx_exit_xsetbv' data-use='c' data-ref="vmx_exit_xsetbv" data-ref-filename="vmx_exit_xsetbv">vmx_exit_xsetbv</a>(<a class="local col6 ref" href="#186mach" title='mach' data-ref="186mach" data-ref-filename="186mach">mach</a>, <a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>, <a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>);</td></tr>
<tr><th id="1989">1989</th><td>			<b>break</b>;</td></tr>
<tr><th id="1990">1990</th><td>		<b>case</b> <a class="macro" href="#507" title="15" data-ref="_M/VMCS_EXITCODE_RDPMC">VMCS_EXITCODE_RDPMC</a>:</td></tr>
<tr><th id="1991">1991</th><td>		<b>case</b> <a class="macro" href="#540" title="51" data-ref="_M/VMCS_EXITCODE_RDTSCP">VMCS_EXITCODE_RDTSCP</a>:</td></tr>
<tr><th id="1992">1992</th><td>		<b>case</b> <a class="macro" href="#542" title="53" data-ref="_M/VMCS_EXITCODE_INVVPID">VMCS_EXITCODE_INVVPID</a>:</td></tr>
<tr><th id="1993">1993</th><td>		<b>case</b> <a class="macro" href="#539" title="50" data-ref="_M/VMCS_EXITCODE_INVEPT">VMCS_EXITCODE_INVEPT</a>:</td></tr>
<tr><th id="1994">1994</th><td>		<b>case</b> <a class="macro" href="#510" title="18" data-ref="_M/VMCS_EXITCODE_VMCALL">VMCS_EXITCODE_VMCALL</a>:</td></tr>
<tr><th id="1995">1995</th><td>		<b>case</b> <a class="macro" href="#511" title="19" data-ref="_M/VMCS_EXITCODE_VMCLEAR">VMCS_EXITCODE_VMCLEAR</a>:</td></tr>
<tr><th id="1996">1996</th><td>		<b>case</b> <a class="macro" href="#512" title="20" data-ref="_M/VMCS_EXITCODE_VMLAUNCH">VMCS_EXITCODE_VMLAUNCH</a>:</td></tr>
<tr><th id="1997">1997</th><td>		<b>case</b> <a class="macro" href="#513" title="21" data-ref="_M/VMCS_EXITCODE_VMPTRLD">VMCS_EXITCODE_VMPTRLD</a>:</td></tr>
<tr><th id="1998">1998</th><td>		<b>case</b> <a class="macro" href="#514" title="22" data-ref="_M/VMCS_EXITCODE_VMPTRST">VMCS_EXITCODE_VMPTRST</a>:</td></tr>
<tr><th id="1999">1999</th><td>		<b>case</b> <a class="macro" href="#515" title="23" data-ref="_M/VMCS_EXITCODE_VMREAD">VMCS_EXITCODE_VMREAD</a>:</td></tr>
<tr><th id="2000">2000</th><td>		<b>case</b> <a class="macro" href="#516" title="24" data-ref="_M/VMCS_EXITCODE_VMRESUME">VMCS_EXITCODE_VMRESUME</a>:</td></tr>
<tr><th id="2001">2001</th><td>		<b>case</b> <a class="macro" href="#517" title="25" data-ref="_M/VMCS_EXITCODE_VMWRITE">VMCS_EXITCODE_VMWRITE</a>:</td></tr>
<tr><th id="2002">2002</th><td>		<b>case</b> <a class="macro" href="#518" title="26" data-ref="_M/VMCS_EXITCODE_VMXOFF">VMCS_EXITCODE_VMXOFF</a>:</td></tr>
<tr><th id="2003">2003</th><td>		<b>case</b> <a class="macro" href="#519" title="27" data-ref="_M/VMCS_EXITCODE_VMXON">VMCS_EXITCODE_VMXON</a>:</td></tr>
<tr><th id="2004">2004</th><td>			<a class="tu ref fn" href="#vmx_inject_ud" title='vmx_inject_ud' data-use='c' data-ref="vmx_inject_ud" data-ref-filename="vmx_inject_ud">vmx_inject_ud</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>);</td></tr>
<tr><th id="2005">2005</th><td>			<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#51" title="0x0000000000000000ULL" data-ref="_M/NVMM_EXIT_NONE">NVMM_EXIT_NONE</a>;</td></tr>
<tr><th id="2006">2006</th><td>			<b>break</b>;</td></tr>
<tr><th id="2007">2007</th><td>		<b>case</b> <a class="macro" href="#537" title="48" data-ref="_M/VMCS_EXITCODE_EPT_VIOLATION">VMCS_EXITCODE_EPT_VIOLATION</a>:</td></tr>
<tr><th id="2008">2008</th><td>			<a class="tu ref fn" href="#vmx_exit_epf" title='vmx_exit_epf' data-use='c' data-ref="vmx_exit_epf" data-ref-filename="vmx_exit_epf">vmx_exit_epf</a>(<a class="local col6 ref" href="#186mach" title='mach' data-ref="186mach" data-ref-filename="186mach">mach</a>, <a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>, <a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>);</td></tr>
<tr><th id="2009">2009</th><td>			<b>break</b>;</td></tr>
<tr><th id="2010">2010</th><td>		<b>case</b> <a class="macro" href="#499" title="7" data-ref="_M/VMCS_EXITCODE_INT_WINDOW">VMCS_EXITCODE_INT_WINDOW</a>:</td></tr>
<tr><th id="2011">2011</th><td>			<a class="tu ref fn" href="#vmx_event_waitexit_disable" title='vmx_event_waitexit_disable' data-use='c' data-ref="vmx_event_waitexit_disable" data-ref-filename="vmx_event_waitexit_disable">vmx_event_waitexit_disable</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>, <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>);</td></tr>
<tr><th id="2012">2012</th><td>			<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#55" title="0x0000000000000004ULL" data-ref="_M/NVMM_EXIT_INT_READY">NVMM_EXIT_INT_READY</a>;</td></tr>
<tr><th id="2013">2013</th><td>			<b>break</b>;</td></tr>
<tr><th id="2014">2014</th><td>		<b>case</b> <a class="macro" href="#500" title="8" data-ref="_M/VMCS_EXITCODE_NMI_WINDOW">VMCS_EXITCODE_NMI_WINDOW</a>:</td></tr>
<tr><th id="2015">2015</th><td>			<a class="tu ref fn" href="#vmx_event_waitexit_disable" title='vmx_event_waitexit_disable' data-use='c' data-ref="vmx_event_waitexit_disable" data-ref-filename="vmx_event_waitexit_disable">vmx_event_waitexit_disable</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2016">2016</th><td>			<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> = <a class="macro" href="../nvmm.h.html#56" title="0x0000000000000005ULL" data-ref="_M/NVMM_EXIT_NMI_READY">NVMM_EXIT_NMI_READY</a>;</td></tr>
<tr><th id="2017">2017</th><td>			<b>break</b>;</td></tr>
<tr><th id="2018">2018</th><td>		<b>default</b>:</td></tr>
<tr><th id="2019">2019</th><td>			<a class="tu ref fn" href="#vmx_exit_invalid" title='vmx_exit_invalid' data-use='c' data-ref="vmx_exit_invalid" data-ref-filename="vmx_exit_invalid">vmx_exit_invalid</a>(<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>, <a class="local col4 ref" href="#194exitcode" title='exitcode' data-ref="194exitcode" data-ref-filename="194exitcode">exitcode</a>);</td></tr>
<tr><th id="2020">2020</th><td>			<b>break</b>;</td></tr>
<tr><th id="2021">2021</th><td>		}</td></tr>
<tr><th id="2022">2022</th><td></td></tr>
<tr><th id="2023">2023</th><td>		<i>/* If no reason to return to userland, keep rolling. */</i></td></tr>
<tr><th id="2024">2024</th><td>		<b>if</b> (<a class="macro" href="../../../arch/x86/include/cpu.h.html#404" title="x86_curcpu()" data-ref="_M/curcpu">curcpu</a>()-&gt;<a class="macro" href="../../../sys/cpu_data.h.html#115" title="ci_data.cpu_schedstate" data-ref="_M/ci_schedstate">ci_schedstate</a>.<a class="ref field" href="../../../sys/sched.h.html#schedstate_percpu::spc_flags" title='schedstate_percpu::spc_flags' data-ref="schedstate_percpu::spc_flags" data-ref-filename="schedstate_percpu..spc_flags">spc_flags</a> &amp; <a class="macro" href="../../../sys/sched.h.html#177" title="0x0002" data-ref="_M/SPCF_SHOULDYIELD">SPCF_SHOULDYIELD</a>) {</td></tr>
<tr><th id="2025">2025</th><td>			<b>break</b>;</td></tr>
<tr><th id="2026">2026</th><td>		}</td></tr>
<tr><th id="2027">2027</th><td>		<b>if</b> (<a class="macro" href="../../../arch/x86/include/cpu.h.html#404" title="x86_curcpu()" data-ref="_M/curcpu">curcpu</a>()-&gt;<a class="ref field" href="../../../arch/x86/include/cpu.h.html#cpu_info::ci_data" title='cpu_info::ci_data' data-ref="cpu_info::ci_data" data-ref-filename="cpu_info..ci_data">ci_data</a>.<a class="ref field" href="../../../sys/cpu_data.h.html#cpu_data::cpu_softints" title='cpu_data::cpu_softints' data-ref="cpu_data::cpu_softints" data-ref-filename="cpu_data..cpu_softints">cpu_softints</a> != <var>0</var>) {</td></tr>
<tr><th id="2028">2028</th><td>			<b>break</b>;</td></tr>
<tr><th id="2029">2029</th><td>		}</td></tr>
<tr><th id="2030">2030</th><td>		<b>if</b> (<a class="macro" href="../../../arch/x86/include/cpu.h.html#405" title="x86_curlwp()" data-ref="_M/curlwp">curlwp</a>-&gt;<a class="ref field" href="../../../sys/lwp.h.html#lwp::l_flag" title='lwp::l_flag' data-ref="lwp::l_flag" data-ref-filename="lwp..l_flag">l_flag</a> &amp; <a class="macro" href="../../../sys/lwp.h.html#274" title="(0x00100000 | 0x01000000 | 0x08000000 | 0x00020000 | 0x00080000 | 0x00000002)" data-ref="_M/LW_USERRET">LW_USERRET</a>) {</td></tr>
<tr><th id="2031">2031</th><td>			<b>break</b>;</td></tr>
<tr><th id="2032">2032</th><td>		}</td></tr>
<tr><th id="2033">2033</th><td>		<b>if</b> (<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::reason" title='nvmm_exit::reason' data-ref="nvmm_exit::reason" data-ref-filename="nvmm_exit..reason">reason</a> != <a class="macro" href="../nvmm.h.html#51" title="0x0000000000000000ULL" data-ref="_M/NVMM_EXIT_NONE">NVMM_EXIT_NONE</a>) {</td></tr>
<tr><th id="2034">2034</th><td>			<b>break</b>;</td></tr>
<tr><th id="2035">2035</th><td>		}</td></tr>
<tr><th id="2036">2036</th><td>	}</td></tr>
<tr><th id="2037">2037</th><td></td></tr>
<tr><th id="2038">2038</th><td>	<a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_launched" title='vmx_cpudata::vmcs_launched' data-use='w' data-ref="vmx_cpudata::vmcs_launched" data-ref-filename="vmx_cpudata..vmcs_launched">vmcs_launched</a> = <a class="local col0 ref" href="#200launched" title='launched' data-ref="200launched" data-ref-filename="200launched">launched</a>;</td></tr>
<tr><th id="2039">2039</th><td></td></tr>
<tr><th id="2040">2040</th><td>	<a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gtsc" title='vmx_cpudata::gtsc' data-use='w' data-ref="vmx_cpudata::gtsc" data-ref-filename="vmx_cpudata..gtsc">gtsc</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#258" title="0x00002010" data-ref="_M/VMCS_TSC_OFFSET">VMCS_TSC_OFFSET</a>) + <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdtsc" title='rdtsc' data-ref="rdtsc" data-ref-filename="rdtsc">rdtsc</a>();</td></tr>
<tr><th id="2041">2041</th><td></td></tr>
<tr><th id="2042">2042</th><td>	<a class="tu ref fn" href="#vmx_vcpu_guest_misc_leave" title='vmx_vcpu_guest_misc_leave' data-use='c' data-ref="vmx_vcpu_guest_misc_leave" data-ref-filename="vmx_vcpu_guest_misc_leave">vmx_vcpu_guest_misc_leave</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>);</td></tr>
<tr><th id="2043">2043</th><td>	<a class="tu ref fn" href="#vmx_vcpu_guest_dbregs_leave" title='vmx_vcpu_guest_dbregs_leave' data-use='c' data-ref="vmx_vcpu_guest_dbregs_leave" data-ref-filename="vmx_vcpu_guest_dbregs_leave">vmx_vcpu_guest_dbregs_leave</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>);</td></tr>
<tr><th id="2044">2044</th><td></td></tr>
<tr><th id="2045">2045</th><td>	<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::exitstate" title='nvmm_exit::exitstate' data-ref="nvmm_exit::exitstate" data-ref-filename="nvmm_exit..exitstate">exitstate</a>[<a class="macro" href="nvmm_x86.h.html#202" title="0" data-ref="_M/NVMM_X64_EXITSTATE_CR8">NVMM_X64_EXITSTATE_CR8</a>] = <a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gcr8" title='vmx_cpudata::gcr8' data-use='r' data-ref="vmx_cpudata::gcr8" data-ref-filename="vmx_cpudata..gcr8">gcr8</a>;</td></tr>
<tr><th id="2046">2046</th><td>	<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::exitstate" title='nvmm_exit::exitstate' data-ref="nvmm_exit::exitstate" data-ref-filename="nvmm_exit..exitstate">exitstate</a>[<a class="macro" href="nvmm_x86.h.html#203" title="1" data-ref="_M/NVMM_X64_EXITSTATE_RFLAGS">NVMM_X64_EXITSTATE_RFLAGS</a>] =</td></tr>
<tr><th id="2047">2047</th><td>	    <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#473" title="0x00006820" data-ref="_M/VMCS_GUEST_RFLAGS">VMCS_GUEST_RFLAGS</a>);</td></tr>
<tr><th id="2048">2048</th><td>	<a class="local col5 ref" href="#195intstate" title='intstate' data-ref="195intstate" data-ref-filename="195intstate">intstate</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#428" title="0x00004824" data-ref="_M/VMCS_GUEST_INTERRUPTIBILITY">VMCS_GUEST_INTERRUPTIBILITY</a>);</td></tr>
<tr><th id="2049">2049</th><td>	<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::exitstate" title='nvmm_exit::exitstate' data-ref="nvmm_exit::exitstate" data-ref-filename="nvmm_exit..exitstate">exitstate</a>[<a class="macro" href="nvmm_x86.h.html#204" title="2" data-ref="_M/NVMM_X64_EXITSTATE_INT_SHADOW">NVMM_X64_EXITSTATE_INT_SHADOW</a>] =</td></tr>
<tr><th id="2050">2050</th><td>	    (<a class="local col5 ref" href="#195intstate" title='intstate' data-ref="195intstate" data-ref-filename="195intstate">intstate</a> &amp; (<a class="macro" href="#429" title="(((uintmax_t)(0) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((0) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/INT_STATE_STI">INT_STATE_STI</a>|<a class="macro" href="#430" title="(((uintmax_t)(1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((1) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/INT_STATE_MOVSS">INT_STATE_MOVSS</a>)) != <var>0</var>;</td></tr>
<tr><th id="2051">2051</th><td>	<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::exitstate" title='nvmm_exit::exitstate' data-ref="nvmm_exit::exitstate" data-ref-filename="nvmm_exit..exitstate">exitstate</a>[<a class="macro" href="nvmm_x86.h.html#205" title="3" data-ref="_M/NVMM_X64_EXITSTATE_INT_WINDOW_EXIT">NVMM_X64_EXITSTATE_INT_WINDOW_EXIT</a>] =</td></tr>
<tr><th id="2052">2052</th><td>	    <a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::int_window_exit" title='vmx_cpudata::int_window_exit' data-use='r' data-ref="vmx_cpudata::int_window_exit" data-ref-filename="vmx_cpudata..int_window_exit">int_window_exit</a>;</td></tr>
<tr><th id="2053">2053</th><td>	<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::exitstate" title='nvmm_exit::exitstate' data-ref="nvmm_exit::exitstate" data-ref-filename="nvmm_exit..exitstate">exitstate</a>[<a class="macro" href="nvmm_x86.h.html#206" title="4" data-ref="_M/NVMM_X64_EXITSTATE_NMI_WINDOW_EXIT">NVMM_X64_EXITSTATE_NMI_WINDOW_EXIT</a>] =</td></tr>
<tr><th id="2054">2054</th><td>	    <a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::nmi_window_exit" title='vmx_cpudata::nmi_window_exit' data-use='r' data-ref="vmx_cpudata::nmi_window_exit" data-ref-filename="vmx_cpudata..nmi_window_exit">nmi_window_exit</a>;</td></tr>
<tr><th id="2055">2055</th><td>	<a class="local col8 ref" href="#188exit" title='exit' data-ref="188exit" data-ref-filename="188exit">exit</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_exit::exitstate" title='nvmm_exit::exitstate' data-ref="nvmm_exit::exitstate" data-ref-filename="nvmm_exit..exitstate">exitstate</a>[<a class="macro" href="nvmm_x86.h.html#207" title="5" data-ref="_M/NVMM_X64_EXITSTATE_EVT_PENDING">NVMM_X64_EXITSTATE_EVT_PENDING</a>] =</td></tr>
<tr><th id="2056">2056</th><td>	    <a class="local col1 ref" href="#191cpudata" title='cpudata' data-ref="191cpudata" data-ref-filename="191cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::evt_pending" title='vmx_cpudata::evt_pending' data-use='r' data-ref="vmx_cpudata::evt_pending" data-ref-filename="vmx_cpudata..evt_pending">evt_pending</a>;</td></tr>
<tr><th id="2057">2057</th><td></td></tr>
<tr><th id="2058">2058</th><td>	<a class="tu ref fn" href="#vmx_vmcs_leave" title='vmx_vmcs_leave' data-use='c' data-ref="vmx_vmcs_leave" data-ref-filename="vmx_vmcs_leave">vmx_vmcs_leave</a>(<a class="local col7 ref" href="#187vcpu" title='vcpu' data-ref="187vcpu" data-ref-filename="187vcpu">vcpu</a>);</td></tr>
<tr><th id="2059">2059</th><td></td></tr>
<tr><th id="2060">2060</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="2061">2061</th><td>}</td></tr>
<tr><th id="2062">2062</th><td></td></tr>
<tr><th id="2063">2063</th><td><i  data-doc="vmx_memalloc">/* -------------------------------------------------------------------------- */</i></td></tr>
<tr><th id="2064">2064</th><td></td></tr>
<tr><th id="2065">2065</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="2066">2066</th><td><dfn class="tu decl def fn" id="vmx_memalloc" title='vmx_memalloc' data-type='int vmx_memalloc(paddr_t * pa, vaddr_t * va, size_t npages)' data-ref="vmx_memalloc" data-ref-filename="vmx_memalloc">vmx_memalloc</dfn>(<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> *<dfn class="local col1 decl" id="201pa" title='pa' data-type='paddr_t *' data-ref="201pa" data-ref-filename="201pa">pa</dfn>, <a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a> *<dfn class="local col2 decl" id="202va" title='va' data-type='vaddr_t *' data-ref="202va" data-ref-filename="202va">va</dfn>, <a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col3 decl" id="203npages" title='npages' data-type='size_t' data-ref="203npages" data-ref-filename="203npages">npages</dfn>)</td></tr>
<tr><th id="2067">2067</th><td>{</td></tr>
<tr><th id="2068">2068</th><td>	<b>struct</b> <a class="type" href="../../../uvm/uvm_pglist.h.html#40" title='pglist' data-ref="pglist" data-ref-filename="pglist">pglist</a> <dfn class="local col4 decl" id="204pglist" title='pglist' data-type='struct pglist' data-ref="204pglist" data-ref-filename="204pglist">pglist</dfn>;</td></tr>
<tr><th id="2069">2069</th><td>	<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> <dfn class="local col5 decl" id="205_pa" title='_pa' data-type='paddr_t' data-ref="205_pa" data-ref-filename="205_pa">_pa</dfn>;</td></tr>
<tr><th id="2070">2070</th><td>	<a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a> <dfn class="local col6 decl" id="206_va" title='_va' data-type='vaddr_t' data-ref="206_va" data-ref-filename="206_va">_va</dfn>;</td></tr>
<tr><th id="2071">2071</th><td>	<a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col7 decl" id="207i" title='i' data-type='size_t' data-ref="207i" data-ref-filename="207i">i</dfn>;</td></tr>
<tr><th id="2072">2072</th><td>	<em>int</em> <dfn class="local col8 decl" id="208ret" title='ret' data-type='int' data-ref="208ret" data-ref-filename="208ret">ret</dfn>;</td></tr>
<tr><th id="2073">2073</th><td></td></tr>
<tr><th id="2074">2074</th><td>	<a class="local col8 ref" href="#208ret" title='ret' data-ref="208ret" data-ref-filename="208ret">ret</a> = <a class="ref fn" href="../../../uvm/uvm_extern.h.html#uvm_pglistalloc" title='uvm_pglistalloc' data-ref="uvm_pglistalloc" data-ref-filename="uvm_pglistalloc">uvm_pglistalloc</a>(<a class="local col3 ref" href="#203npages" title='npages' data-ref="203npages" data-ref-filename="203npages">npages</a> * <a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>, <var>0</var>, ~<var>0UL</var>, <a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>, <var>0</var>,</td></tr>
<tr><th id="2075">2075</th><td>	    &amp;<a class="local col4 ref" href="#204pglist" title='pglist' data-ref="204pglist" data-ref-filename="204pglist">pglist</a>, <var>1</var>, <var>0</var>);</td></tr>
<tr><th id="2076">2076</th><td>	<b>if</b> (<a class="local col8 ref" href="#208ret" title='ret' data-ref="208ret" data-ref-filename="208ret">ret</a> != <var>0</var>)</td></tr>
<tr><th id="2077">2077</th><td>		<b>return</b> <a class="macro" href="../../../sys/errno.h.html#54" title="12" data-ref="_M/ENOMEM">ENOMEM</a>;</td></tr>
<tr><th id="2078">2078</th><td>	<a class="local col5 ref" href="#205_pa" title='_pa' data-ref="205_pa" data-ref-filename="205_pa">_pa</a> = <a class="macro" href="../../../sys/queue.h.html#428" title="((&amp;pglist)-&gt;tqh_first)" data-ref="_M/TAILQ_FIRST">TAILQ_FIRST</a>(&amp;<a class="local col4 ref" href="#204pglist" title='pglist' data-ref="204pglist" data-ref-filename="204pglist">pglist</a>)-&gt;<a class="ref field" href="../../../uvm/uvm_page.h.html#vm_page::phys_addr" title='vm_page::phys_addr' data-ref="vm_page::phys_addr" data-ref-filename="vm_page..phys_addr">phys_addr</a>;</td></tr>
<tr><th id="2079">2079</th><td>	<a class="local col6 ref" href="#206_va" title='_va' data-ref="206_va" data-ref-filename="206_va">_va</a> = <a class="ref fn" href="../../../uvm/uvm_extern.h.html#uvm_km_alloc" title='uvm_km_alloc' data-ref="uvm_km_alloc" data-ref-filename="uvm_km_alloc">uvm_km_alloc</a>(<a class="ref" href="../../../uvm/uvm_extern.h.html#kernel_map" title='kernel_map' data-ref="kernel_map" data-ref-filename="kernel_map">kernel_map</a>, <a class="local col3 ref" href="#203npages" title='npages' data-ref="203npages" data-ref-filename="203npages">npages</a> * <a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>, <var>0</var>,</td></tr>
<tr><th id="2080">2080</th><td>	    <a class="macro" href="../../../uvm/uvm_extern.h.html#197" title="0x4" data-ref="_M/UVM_KMF_VAONLY">UVM_KMF_VAONLY</a> | <a class="macro" href="../../../uvm/uvm_extern.h.html#203" title="0x00400000" data-ref="_M/UVM_KMF_NOWAIT">UVM_KMF_NOWAIT</a>);</td></tr>
<tr><th id="2081">2081</th><td>	<b>if</b> (<a class="local col6 ref" href="#206_va" title='_va' data-ref="206_va" data-ref-filename="206_va">_va</a> == <var>0</var>)</td></tr>
<tr><th id="2082">2082</th><td>		<b>goto</b> <a class="lbl" href="#209error" data-ref="209error" data-ref-filename="209error">error</a>;</td></tr>
<tr><th id="2083">2083</th><td></td></tr>
<tr><th id="2084">2084</th><td>	<b>for</b> (<a class="local col7 ref" href="#207i" title='i' data-ref="207i" data-ref-filename="207i">i</a> = <var>0</var>; <a class="local col7 ref" href="#207i" title='i' data-ref="207i" data-ref-filename="207i">i</a> &lt; <a class="local col3 ref" href="#203npages" title='npages' data-ref="203npages" data-ref-filename="203npages">npages</a>; <a class="local col7 ref" href="#207i" title='i' data-ref="207i" data-ref-filename="207i">i</a>++) {</td></tr>
<tr><th id="2085">2085</th><td>		<a class="ref fn" href="../../../uvm/uvm_pmap.h.html#pmap_kenter_pa" title='pmap_kenter_pa' data-ref="pmap_kenter_pa" data-ref-filename="pmap_kenter_pa">pmap_kenter_pa</a>(<a class="local col6 ref" href="#206_va" title='_va' data-ref="206_va" data-ref-filename="206_va">_va</a> + <a class="local col7 ref" href="#207i" title='i' data-ref="207i" data-ref-filename="207i">i</a> * <a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>, <a class="local col5 ref" href="#205_pa" title='_pa' data-ref="205_pa" data-ref-filename="205_pa">_pa</a> + <a class="local col7 ref" href="#207i" title='i' data-ref="207i" data-ref-filename="207i">i</a> * <a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>,</td></tr>
<tr><th id="2086">2086</th><td>		    <a class="macro" href="../../../uvm/uvm_prot.h.html#84" title="((vm_prot_t) 0x01)" data-ref="_M/VM_PROT_READ">VM_PROT_READ</a> | <a class="macro" href="../../../uvm/uvm_prot.h.html#85" title="((vm_prot_t) 0x02)" data-ref="_M/VM_PROT_WRITE">VM_PROT_WRITE</a>, <a class="macro" href="../../../uvm/uvm_pmap.h.html#109" title="0x00000300" data-ref="_M/PMAP_WRITE_BACK">PMAP_WRITE_BACK</a>);</td></tr>
<tr><th id="2087">2087</th><td>	}</td></tr>
<tr><th id="2088">2088</th><td>	<a class="ref fn" href="../../../uvm/uvm_pmap.h.html#pmap_update" title='pmap_update' data-ref="pmap_update" data-ref-filename="pmap_update">pmap_update</a>(<a class="macro" href="../../../uvm/uvm_pmap.h.html#91" title="kernel_pmap_ptr" data-ref="_M/pmap_kernel">pmap_kernel</a>());</td></tr>
<tr><th id="2089">2089</th><td></td></tr>
<tr><th id="2090">2090</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#382" title="__builtin_memset((void *)_va, 0, npages * (1 &lt;&lt; 12))" data-ref="_M/memset">memset</a>((<em>void</em> *)<a class="local col6 ref" href="#206_va" title='_va' data-ref="206_va" data-ref-filename="206_va">_va</a>, <var>0</var>, <a class="local col3 ref" href="#203npages" title='npages' data-ref="203npages" data-ref-filename="203npages">npages</a> * <a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>);</td></tr>
<tr><th id="2091">2091</th><td></td></tr>
<tr><th id="2092">2092</th><td>	*<a class="local col1 ref" href="#201pa" title='pa' data-ref="201pa" data-ref-filename="201pa">pa</a> = <a class="local col5 ref" href="#205_pa" title='_pa' data-ref="205_pa" data-ref-filename="205_pa">_pa</a>;</td></tr>
<tr><th id="2093">2093</th><td>	*<a class="local col2 ref" href="#202va" title='va' data-ref="202va" data-ref-filename="202va">va</a> = <a class="local col6 ref" href="#206_va" title='_va' data-ref="206_va" data-ref-filename="206_va">_va</a>;</td></tr>
<tr><th id="2094">2094</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="2095">2095</th><td></td></tr>
<tr><th id="2096">2096</th><td><dfn class="lbl" id="209error" data-ref="209error" data-ref-filename="209error">error</dfn>:</td></tr>
<tr><th id="2097">2097</th><td>	<b>for</b> (<a class="local col7 ref" href="#207i" title='i' data-ref="207i" data-ref-filename="207i">i</a> = <var>0</var>; <a class="local col7 ref" href="#207i" title='i' data-ref="207i" data-ref-filename="207i">i</a> &lt; <a class="local col3 ref" href="#203npages" title='npages' data-ref="203npages" data-ref-filename="203npages">npages</a>; <a class="local col7 ref" href="#207i" title='i' data-ref="207i" data-ref-filename="207i">i</a>++) {</td></tr>
<tr><th id="2098">2098</th><td>		<a class="ref fn" href="../../../uvm/uvm_page.h.html#uvm_pagefree" title='uvm_pagefree' data-ref="uvm_pagefree" data-ref-filename="uvm_pagefree">uvm_pagefree</a>(<a class="macro" href="../../../uvm/uvm_page.h.html#363" title="uvm_phys_to_vm_page(_pa + i * (1 &lt;&lt; 12))" data-ref="_M/PHYS_TO_VM_PAGE">PHYS_TO_VM_PAGE</a>(<a class="local col5 ref" href="#205_pa" title='_pa' data-ref="205_pa" data-ref-filename="205_pa">_pa</a> + <a class="local col7 ref" href="#207i" title='i' data-ref="207i" data-ref-filename="207i">i</a> * <a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>));</td></tr>
<tr><th id="2099">2099</th><td>	}</td></tr>
<tr><th id="2100">2100</th><td>	<b>return</b> <a class="macro" href="../../../sys/errno.h.html#54" title="12" data-ref="_M/ENOMEM">ENOMEM</a>;</td></tr>
<tr><th id="2101">2101</th><td>}</td></tr>
<tr><th id="2102">2102</th><td></td></tr>
<tr><th id="2103">2103</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2104">2104</th><td><dfn class="tu decl def fn" id="vmx_memfree" title='vmx_memfree' data-type='void vmx_memfree(paddr_t pa, vaddr_t va, size_t npages)' data-ref="vmx_memfree" data-ref-filename="vmx_memfree">vmx_memfree</dfn>(<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> <dfn class="local col0 decl" id="210pa" title='pa' data-type='paddr_t' data-ref="210pa" data-ref-filename="210pa">pa</dfn>, <a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a> <dfn class="local col1 decl" id="211va" title='va' data-type='vaddr_t' data-ref="211va" data-ref-filename="211va">va</dfn>, <a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col2 decl" id="212npages" title='npages' data-type='size_t' data-ref="212npages" data-ref-filename="212npages">npages</dfn>)</td></tr>
<tr><th id="2105">2105</th><td>{</td></tr>
<tr><th id="2106">2106</th><td>	<a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col3 decl" id="213i" title='i' data-type='size_t' data-ref="213i" data-ref-filename="213i">i</dfn>;</td></tr>
<tr><th id="2107">2107</th><td></td></tr>
<tr><th id="2108">2108</th><td>	<a class="ref fn" href="../../../uvm/uvm_pmap.h.html#pmap_kremove" title='pmap_kremove' data-ref="pmap_kremove" data-ref-filename="pmap_kremove">pmap_kremove</a>(<a class="local col1 ref" href="#211va" title='va' data-ref="211va" data-ref-filename="211va">va</a>, <a class="local col2 ref" href="#212npages" title='npages' data-ref="212npages" data-ref-filename="212npages">npages</a> * <a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>);</td></tr>
<tr><th id="2109">2109</th><td>	<a class="ref fn" href="../../../uvm/uvm_pmap.h.html#pmap_update" title='pmap_update' data-ref="pmap_update" data-ref-filename="pmap_update">pmap_update</a>(<a class="macro" href="../../../uvm/uvm_pmap.h.html#91" title="kernel_pmap_ptr" data-ref="_M/pmap_kernel">pmap_kernel</a>());</td></tr>
<tr><th id="2110">2110</th><td>	<a class="ref fn" href="../../../uvm/uvm_extern.h.html#uvm_km_free" title='uvm_km_free' data-ref="uvm_km_free" data-ref-filename="uvm_km_free">uvm_km_free</a>(<a class="ref" href="../../../uvm/uvm_extern.h.html#kernel_map" title='kernel_map' data-ref="kernel_map" data-ref-filename="kernel_map">kernel_map</a>, <a class="local col1 ref" href="#211va" title='va' data-ref="211va" data-ref-filename="211va">va</a>, <a class="local col2 ref" href="#212npages" title='npages' data-ref="212npages" data-ref-filename="212npages">npages</a> * <a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>, <a class="macro" href="../../../uvm/uvm_extern.h.html#197" title="0x4" data-ref="_M/UVM_KMF_VAONLY">UVM_KMF_VAONLY</a>);</td></tr>
<tr><th id="2111">2111</th><td>	<b>for</b> (<a class="local col3 ref" href="#213i" title='i' data-ref="213i" data-ref-filename="213i">i</a> = <var>0</var>; <a class="local col3 ref" href="#213i" title='i' data-ref="213i" data-ref-filename="213i">i</a> &lt; <a class="local col2 ref" href="#212npages" title='npages' data-ref="212npages" data-ref-filename="212npages">npages</a>; <a class="local col3 ref" href="#213i" title='i' data-ref="213i" data-ref-filename="213i">i</a>++) {</td></tr>
<tr><th id="2112">2112</th><td>		<a class="ref fn" href="../../../uvm/uvm_page.h.html#uvm_pagefree" title='uvm_pagefree' data-ref="uvm_pagefree" data-ref-filename="uvm_pagefree">uvm_pagefree</a>(<a class="macro" href="../../../uvm/uvm_page.h.html#363" title="uvm_phys_to_vm_page(pa + i * (1 &lt;&lt; 12))" data-ref="_M/PHYS_TO_VM_PAGE">PHYS_TO_VM_PAGE</a>(<a class="local col0 ref" href="#210pa" title='pa' data-ref="210pa" data-ref-filename="210pa">pa</a> + <a class="local col3 ref" href="#213i" title='i' data-ref="213i" data-ref-filename="213i">i</a> * <a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>));</td></tr>
<tr><th id="2113">2113</th><td>	}</td></tr>
<tr><th id="2114">2114</th><td>}</td></tr>
<tr><th id="2115">2115</th><td></td></tr>
<tr><th id="2116">2116</th><td><i  data-doc="vmx_vcpu_msr_allow">/* -------------------------------------------------------------------------- */</i></td></tr>
<tr><th id="2117">2117</th><td></td></tr>
<tr><th id="2118">2118</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2119">2119</th><td><dfn class="tu decl def fn" id="vmx_vcpu_msr_allow" title='vmx_vcpu_msr_allow' data-type='void vmx_vcpu_msr_allow(uint8_t * bitmap, uint64_t msr, _Bool read, _Bool write)' data-ref="vmx_vcpu_msr_allow" data-ref-filename="vmx_vcpu_msr_allow">vmx_vcpu_msr_allow</dfn>(<a class="typedef" href="../../../sys/stdint.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> *<dfn class="local col4 decl" id="214bitmap" title='bitmap' data-type='uint8_t *' data-ref="214bitmap" data-ref-filename="214bitmap">bitmap</dfn>, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col5 decl" id="215msr" title='msr' data-type='uint64_t' data-ref="215msr" data-ref-filename="215msr">msr</dfn>, <a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="local col6 decl" id="216read" title='read' data-type='_Bool' data-ref="216read" data-ref-filename="216read">read</dfn>, <a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="local col7 decl" id="217write" title='write' data-type='_Bool' data-ref="217write" data-ref-filename="217write">write</dfn>)</td></tr>
<tr><th id="2120">2120</th><td>{</td></tr>
<tr><th id="2121">2121</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col8 decl" id="218byte" title='byte' data-type='uint64_t' data-ref="218byte" data-ref-filename="218byte">byte</dfn>;</td></tr>
<tr><th id="2122">2122</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> <dfn class="local col9 decl" id="219bitoff" title='bitoff' data-type='uint8_t' data-ref="219bitoff" data-ref-filename="219bitoff">bitoff</dfn>;</td></tr>
<tr><th id="2123">2123</th><td></td></tr>
<tr><th id="2124">2124</th><td>	<b>if</b> (<a class="local col5 ref" href="#215msr" title='msr' data-ref="215msr" data-ref-filename="215msr">msr</a> &lt; <var>0x00002000</var>) {</td></tr>
<tr><th id="2125">2125</th><td>		<i>/* Range 1 */</i></td></tr>
<tr><th id="2126">2126</th><td>		<a class="local col8 ref" href="#218byte" title='byte' data-ref="218byte" data-ref-filename="218byte">byte</a> = ((<a class="local col5 ref" href="#215msr" title='msr' data-ref="215msr" data-ref-filename="215msr">msr</a> - <var>0x00000000</var>) / <var>8</var>) + <var>0</var>;</td></tr>
<tr><th id="2127">2127</th><td>	} <b>else</b> <b>if</b> (<a class="local col5 ref" href="#215msr" title='msr' data-ref="215msr" data-ref-filename="215msr">msr</a> &gt;= <var>0xC0000000</var> &amp;&amp; <a class="local col5 ref" href="#215msr" title='msr' data-ref="215msr" data-ref-filename="215msr">msr</a> &lt; <var>0xC0002000</var>) {</td></tr>
<tr><th id="2128">2128</th><td>		<i>/* Range 2 */</i></td></tr>
<tr><th id="2129">2129</th><td>		<a class="local col8 ref" href="#218byte" title='byte' data-ref="218byte" data-ref-filename="218byte">byte</a> = ((<a class="local col5 ref" href="#215msr" title='msr' data-ref="215msr" data-ref-filename="215msr">msr</a> - <var>0xC0000000</var>) / <var>8</var>) + <var>1024</var>;</td></tr>
<tr><th id="2130">2130</th><td>	} <b>else</b> {</td></tr>
<tr><th id="2131">2131</th><td>		<a class="ref fn" href="../../../sys/systm.h.html#panic" title='panic' data-ref="panic" data-ref-filename="panic">panic</a>(<q>"%s: wrong range"</q>, <b>__func__</b>);</td></tr>
<tr><th id="2132">2132</th><td>	}</td></tr>
<tr><th id="2133">2133</th><td></td></tr>
<tr><th id="2134">2134</th><td>	<a class="local col9 ref" href="#219bitoff" title='bitoff' data-ref="219bitoff" data-ref-filename="219bitoff">bitoff</a> = (<a class="local col5 ref" href="#215msr" title='msr' data-ref="215msr" data-ref-filename="215msr">msr</a> &amp; <var>0x7</var>);</td></tr>
<tr><th id="2135">2135</th><td></td></tr>
<tr><th id="2136">2136</th><td>	<b>if</b> (<a class="local col6 ref" href="#216read" title='read' data-ref="216read" data-ref-filename="216read">read</a>) {</td></tr>
<tr><th id="2137">2137</th><td>		<a class="local col4 ref" href="#214bitmap" title='bitmap' data-ref="214bitmap" data-ref-filename="214bitmap">bitmap</a>[<a class="local col8 ref" href="#218byte" title='byte' data-ref="218byte" data-ref-filename="218byte">byte</a>] &amp;= ~<a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(bitoff) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((bitoff) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col9 ref" href="#219bitoff" title='bitoff' data-ref="219bitoff" data-ref-filename="219bitoff">bitoff</a>);</td></tr>
<tr><th id="2138">2138</th><td>	}</td></tr>
<tr><th id="2139">2139</th><td>	<b>if</b> (<a class="local col7 ref" href="#217write" title='write' data-ref="217write" data-ref-filename="217write">write</a>) {</td></tr>
<tr><th id="2140">2140</th><td>		<a class="local col4 ref" href="#214bitmap" title='bitmap' data-ref="214bitmap" data-ref-filename="214bitmap">bitmap</a>[<var>2048</var> + <a class="local col8 ref" href="#218byte" title='byte' data-ref="218byte" data-ref-filename="218byte">byte</a>] &amp;= ~<a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(bitoff) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((bitoff) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col9 ref" href="#219bitoff" title='bitoff' data-ref="219bitoff" data-ref-filename="219bitoff">bitoff</a>);</td></tr>
<tr><th id="2141">2141</th><td>	}</td></tr>
<tr><th id="2142">2142</th><td>}</td></tr>
<tr><th id="2143">2143</th><td></td></tr>
<tr><th id="2144">2144</th><td><u>#define <dfn class="macro" id="_M/VMX_SEG_ATTRIB_TYPE" data-ref="_M/VMX_SEG_ATTRIB_TYPE">VMX_SEG_ATTRIB_TYPE</dfn>		__BITS(3,0)</u></td></tr>
<tr><th id="2145">2145</th><td><u>#define <dfn class="macro" id="_M/VMX_SEG_ATTRIB_S" data-ref="_M/VMX_SEG_ATTRIB_S">VMX_SEG_ATTRIB_S</dfn>		__BIT(4)</u></td></tr>
<tr><th id="2146">2146</th><td><u>#define <dfn class="macro" id="_M/VMX_SEG_ATTRIB_DPL" data-ref="_M/VMX_SEG_ATTRIB_DPL">VMX_SEG_ATTRIB_DPL</dfn>		__BITS(6,5)</u></td></tr>
<tr><th id="2147">2147</th><td><u>#define <dfn class="macro" id="_M/VMX_SEG_ATTRIB_P" data-ref="_M/VMX_SEG_ATTRIB_P">VMX_SEG_ATTRIB_P</dfn>		__BIT(7)</u></td></tr>
<tr><th id="2148">2148</th><td><u>#define <dfn class="macro" id="_M/VMX_SEG_ATTRIB_AVL" data-ref="_M/VMX_SEG_ATTRIB_AVL">VMX_SEG_ATTRIB_AVL</dfn>		__BIT(12)</u></td></tr>
<tr><th id="2149">2149</th><td><u>#define <dfn class="macro" id="_M/VMX_SEG_ATTRIB_L" data-ref="_M/VMX_SEG_ATTRIB_L">VMX_SEG_ATTRIB_L</dfn>		__BIT(13)</u></td></tr>
<tr><th id="2150">2150</th><td><u>#define <dfn class="macro" id="_M/VMX_SEG_ATTRIB_DEF" data-ref="_M/VMX_SEG_ATTRIB_DEF">VMX_SEG_ATTRIB_DEF</dfn>		__BIT(14)</u></td></tr>
<tr><th id="2151">2151</th><td><u>#define <dfn class="macro" id="_M/VMX_SEG_ATTRIB_G" data-ref="_M/VMX_SEG_ATTRIB_G">VMX_SEG_ATTRIB_G</dfn>		__BIT(15)</u></td></tr>
<tr><th id="2152">2152</th><td><u>#define <dfn class="macro" id="_M/VMX_SEG_ATTRIB_UNUSABLE" data-ref="_M/VMX_SEG_ATTRIB_UNUSABLE">VMX_SEG_ATTRIB_UNUSABLE</dfn>		__BIT(16)</u></td></tr>
<tr><th id="2153">2153</th><td></td></tr>
<tr><th id="2154">2154</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2155">2155</th><td><dfn class="tu decl def fn" id="vmx_vcpu_setstate_seg" title='vmx_vcpu_setstate_seg' data-type='void vmx_vcpu_setstate_seg(const struct nvmm_x64_state_seg * segs, int idx)' data-ref="vmx_vcpu_setstate_seg" data-ref-filename="vmx_vcpu_setstate_seg">vmx_vcpu_setstate_seg</dfn>(<em>const</em> <b>struct</b> <a class="type" href="nvmm_x86.h.html#nvmm_x64_state_seg" title='nvmm_x64_state_seg' data-ref="nvmm_x64_state_seg" data-ref-filename="nvmm_x64_state_seg">nvmm_x64_state_seg</a> *<dfn class="local col0 decl" id="220segs" title='segs' data-type='const struct nvmm_x64_state_seg *' data-ref="220segs" data-ref-filename="220segs">segs</dfn>, <em>int</em> <dfn class="local col1 decl" id="221idx" title='idx' data-type='int' data-ref="221idx" data-ref-filename="221idx">idx</dfn>)</td></tr>
<tr><th id="2156">2156</th><td>{</td></tr>
<tr><th id="2157">2157</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="222attrib" title='attrib' data-type='uint64_t' data-ref="222attrib" data-ref-filename="222attrib">attrib</dfn>;</td></tr>
<tr><th id="2158">2158</th><td></td></tr>
<tr><th id="2159">2159</th><td>	<a class="local col2 ref" href="#222attrib" title='attrib' data-ref="222attrib" data-ref-filename="222attrib">attrib</a> =</td></tr>
<tr><th id="2160">2160</th><td>	    <a class="macro" href="../../../sys/cdefs.h.html#607" title="((segs[idx].attrib.type) * (((((((((uintmax_t)((( ((3))&gt;((0)))?((3)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&gt;((0)))?((3)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((3))&lt;=((0)))?((3)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&lt;=((0)))?((3)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((3))&gt;((0)))?((3)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&gt;((0)))?((3)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((3))&lt;=((0)))?((3)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&lt;=((0)))?((3)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((3))&gt;((0)))?((3)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&gt;((0)))?((3)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((3))&lt;=((0)))?((3)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&lt;=((0)))?((3)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="local col0 ref" href="#220segs" title='segs' data-ref="220segs" data-ref-filename="220segs">segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::type" title='nvmm_x64_state_seg::(anonymous struct)::type' data-ref="nvmm_x64_state_seg::(anonymous)::type" data-ref-filename="nvmm_x64_state_seg..(anonymous)..type">type</a>, <a class="macro" href="#2144" title="(((((uintmax_t)((( ((3))&gt;((0)))?((3)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&gt;((0)))?((3)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((3))&lt;=((0)))?((3)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&lt;=((0)))?((3)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_SEG_ATTRIB_TYPE">VMX_SEG_ATTRIB_TYPE</a>) |</td></tr>
<tr><th id="2161">2161</th><td>	    <a class="macro" href="../../../sys/cdefs.h.html#607" title="((segs[idx].attrib.s) * (((((((uintmax_t)(4) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((4) &amp; (8 * sizeof(uintmax_t) - 1))))) - 1) &amp; ((((uintmax_t)(4) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((4) &amp; (8 * sizeof(uintmax_t) - 1)))))) ^ ((((uintmax_t)(4) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((4) &amp; (8 * sizeof(uintmax_t) - 1)))))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="local col0 ref" href="#220segs" title='segs' data-ref="220segs" data-ref-filename="220segs">segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::s" title='nvmm_x64_state_seg::(anonymous struct)::s' data-ref="nvmm_x64_state_seg::(anonymous)::s" data-ref-filename="nvmm_x64_state_seg..(anonymous)..s">s</a>, <a class="macro" href="#2145" title="(((uintmax_t)(4) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((4) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_SEG_ATTRIB_S">VMX_SEG_ATTRIB_S</a>) |</td></tr>
<tr><th id="2162">2162</th><td>	    <a class="macro" href="../../../sys/cdefs.h.html#607" title="((segs[idx].attrib.dpl) * (((((((((uintmax_t)((( ((6))&gt;((5)))?((6)):((5))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&gt;((5)))?((6)):((5))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((6))&lt;=((5)))?((6)):((5)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&lt;=((5)))?((6)):((5)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((6))&gt;((5)))?((6)):((5))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&gt;((5)))?((6)):((5))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((6))&lt;=((5)))?((6)):((5)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&lt;=((5)))?((6)):((5)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((6))&gt;((5)))?((6)):((5))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&gt;((5)))?((6)):((5))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((6))&lt;=((5)))?((6)):((5)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&lt;=((5)))?((6)):((5)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="local col0 ref" href="#220segs" title='segs' data-ref="220segs" data-ref-filename="220segs">segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::dpl" title='nvmm_x64_state_seg::(anonymous struct)::dpl' data-ref="nvmm_x64_state_seg::(anonymous)::dpl" data-ref-filename="nvmm_x64_state_seg..(anonymous)..dpl">dpl</a>, <a class="macro" href="#2146" title="(((((uintmax_t)((( ((6))&gt;((5)))?((6)):((5))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&gt;((5)))?((6)):((5))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((6))&lt;=((5)))?((6)):((5)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&lt;=((5)))?((6)):((5)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_SEG_ATTRIB_DPL">VMX_SEG_ATTRIB_DPL</a>) |</td></tr>
<tr><th id="2163">2163</th><td>	    <a class="macro" href="../../../sys/cdefs.h.html#607" title="((segs[idx].attrib.p) * (((((((uintmax_t)(7) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((7) &amp; (8 * sizeof(uintmax_t) - 1))))) - 1) &amp; ((((uintmax_t)(7) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((7) &amp; (8 * sizeof(uintmax_t) - 1)))))) ^ ((((uintmax_t)(7) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((7) &amp; (8 * sizeof(uintmax_t) - 1)))))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="local col0 ref" href="#220segs" title='segs' data-ref="220segs" data-ref-filename="220segs">segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::p" title='nvmm_x64_state_seg::(anonymous struct)::p' data-ref="nvmm_x64_state_seg::(anonymous)::p" data-ref-filename="nvmm_x64_state_seg..(anonymous)..p">p</a>, <a class="macro" href="#2147" title="(((uintmax_t)(7) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((7) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_SEG_ATTRIB_P">VMX_SEG_ATTRIB_P</a>) |</td></tr>
<tr><th id="2164">2164</th><td>	    <a class="macro" href="../../../sys/cdefs.h.html#607" title="((segs[idx].attrib.avl) * (((((((uintmax_t)(12) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((12) &amp; (8 * sizeof(uintmax_t) - 1))))) - 1) &amp; ((((uintmax_t)(12) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((12) &amp; (8 * sizeof(uintmax_t) - 1)))))) ^ ((((uintmax_t)(12) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((12) &amp; (8 * sizeof(uintmax_t) - 1)))))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="local col0 ref" href="#220segs" title='segs' data-ref="220segs" data-ref-filename="220segs">segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::avl" title='nvmm_x64_state_seg::(anonymous struct)::avl' data-ref="nvmm_x64_state_seg::(anonymous)::avl" data-ref-filename="nvmm_x64_state_seg..(anonymous)..avl">avl</a>, <a class="macro" href="#2148" title="(((uintmax_t)(12) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((12) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_SEG_ATTRIB_AVL">VMX_SEG_ATTRIB_AVL</a>) |</td></tr>
<tr><th id="2165">2165</th><td>	    <a class="macro" href="../../../sys/cdefs.h.html#607" title="((segs[idx].attrib.l) * (((((((uintmax_t)(13) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((13) &amp; (8 * sizeof(uintmax_t) - 1))))) - 1) &amp; ((((uintmax_t)(13) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((13) &amp; (8 * sizeof(uintmax_t) - 1)))))) ^ ((((uintmax_t)(13) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((13) &amp; (8 * sizeof(uintmax_t) - 1)))))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="local col0 ref" href="#220segs" title='segs' data-ref="220segs" data-ref-filename="220segs">segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::l" title='nvmm_x64_state_seg::(anonymous struct)::l' data-ref="nvmm_x64_state_seg::(anonymous)::l" data-ref-filename="nvmm_x64_state_seg..(anonymous)..l">l</a>, <a class="macro" href="#2149" title="(((uintmax_t)(13) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((13) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_SEG_ATTRIB_L">VMX_SEG_ATTRIB_L</a>) |</td></tr>
<tr><th id="2166">2166</th><td>	    <a class="macro" href="../../../sys/cdefs.h.html#607" title="((segs[idx].attrib.def) * (((((((uintmax_t)(14) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((14) &amp; (8 * sizeof(uintmax_t) - 1))))) - 1) &amp; ((((uintmax_t)(14) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((14) &amp; (8 * sizeof(uintmax_t) - 1)))))) ^ ((((uintmax_t)(14) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((14) &amp; (8 * sizeof(uintmax_t) - 1)))))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="local col0 ref" href="#220segs" title='segs' data-ref="220segs" data-ref-filename="220segs">segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::def" title='nvmm_x64_state_seg::(anonymous struct)::def' data-ref="nvmm_x64_state_seg::(anonymous)::def" data-ref-filename="nvmm_x64_state_seg..(anonymous)..def">def</a>, <a class="macro" href="#2150" title="(((uintmax_t)(14) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((14) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_SEG_ATTRIB_DEF">VMX_SEG_ATTRIB_DEF</a>) |</td></tr>
<tr><th id="2167">2167</th><td>	    <a class="macro" href="../../../sys/cdefs.h.html#607" title="((segs[idx].attrib.g) * (((((((uintmax_t)(15) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((15) &amp; (8 * sizeof(uintmax_t) - 1))))) - 1) &amp; ((((uintmax_t)(15) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((15) &amp; (8 * sizeof(uintmax_t) - 1)))))) ^ ((((uintmax_t)(15) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((15) &amp; (8 * sizeof(uintmax_t) - 1)))))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="local col0 ref" href="#220segs" title='segs' data-ref="220segs" data-ref-filename="220segs">segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::g" title='nvmm_x64_state_seg::(anonymous struct)::g' data-ref="nvmm_x64_state_seg::(anonymous)::g" data-ref-filename="nvmm_x64_state_seg..(anonymous)..g">g</a>, <a class="macro" href="#2151" title="(((uintmax_t)(15) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((15) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_SEG_ATTRIB_G">VMX_SEG_ATTRIB_G</a>) |</td></tr>
<tr><th id="2168">2168</th><td>	    (!<a class="local col0 ref" href="#220segs" title='segs' data-ref="220segs" data-ref-filename="220segs">segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::p" title='nvmm_x64_state_seg::(anonymous struct)::p' data-ref="nvmm_x64_state_seg::(anonymous)::p" data-ref-filename="nvmm_x64_state_seg..(anonymous)..p">p</a> ? <a class="macro" href="#2152" title="(((uintmax_t)(16) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((16) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_SEG_ATTRIB_UNUSABLE">VMX_SEG_ATTRIB_UNUSABLE</a> : <var>0</var>);</td></tr>
<tr><th id="2169">2169</th><td></td></tr>
<tr><th id="2170">2170</th><td>	<b>if</b> (<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a> != <a class="macro" href="nvmm_x86.h.html#112" title="6" data-ref="_M/NVMM_X64_SEG_GDT">NVMM_X64_SEG_GDT</a> &amp;&amp; <a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a> != <a class="macro" href="nvmm_x86.h.html#113" title="7" data-ref="_M/NVMM_X64_SEG_IDT">NVMM_X64_SEG_IDT</a>) {</td></tr>
<tr><th id="2171">2171</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="tu ref" href="#vmx_guest_segs" title='vmx_guest_segs' data-use='m' data-ref="vmx_guest_segs" data-ref-filename="vmx_guest_segs">vmx_guest_segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="local col5 ref field" href="#15selector" title='selector' data-ref="15selector" data-ref-filename="15selector">selector</a>, <a class="local col0 ref" href="#220segs" title='segs' data-ref="220segs" data-ref-filename="220segs">segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::selector" title='nvmm_x64_state_seg::selector' data-ref="nvmm_x64_state_seg::selector" data-ref-filename="nvmm_x64_state_seg..selector">selector</a>);</td></tr>
<tr><th id="2172">2172</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="tu ref" href="#vmx_guest_segs" title='vmx_guest_segs' data-use='m' data-ref="vmx_guest_segs" data-ref-filename="vmx_guest_segs">vmx_guest_segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="local col6 ref field" href="#16attrib" title='attrib' data-ref="16attrib" data-ref-filename="16attrib">attrib</a>, <a class="local col2 ref" href="#222attrib" title='attrib' data-ref="222attrib" data-ref-filename="222attrib">attrib</a>);</td></tr>
<tr><th id="2173">2173</th><td>	}</td></tr>
<tr><th id="2174">2174</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="tu ref" href="#vmx_guest_segs" title='vmx_guest_segs' data-use='m' data-ref="vmx_guest_segs" data-ref-filename="vmx_guest_segs">vmx_guest_segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="local col7 ref field" href="#17limit" title='limit' data-ref="17limit" data-ref-filename="17limit">limit</a>, <a class="local col0 ref" href="#220segs" title='segs' data-ref="220segs" data-ref-filename="220segs">segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::limit" title='nvmm_x64_state_seg::limit' data-ref="nvmm_x64_state_seg::limit" data-ref-filename="nvmm_x64_state_seg..limit">limit</a>);</td></tr>
<tr><th id="2175">2175</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="tu ref" href="#vmx_guest_segs" title='vmx_guest_segs' data-use='m' data-ref="vmx_guest_segs" data-ref-filename="vmx_guest_segs">vmx_guest_segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="local col8 ref field" href="#18base" title='base' data-ref="18base" data-ref-filename="18base">base</a>, <a class="local col0 ref" href="#220segs" title='segs' data-ref="220segs" data-ref-filename="220segs">segs</a>[<a class="local col1 ref" href="#221idx" title='idx' data-ref="221idx" data-ref-filename="221idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::base" title='nvmm_x64_state_seg::base' data-ref="nvmm_x64_state_seg::base" data-ref-filename="nvmm_x64_state_seg..base">base</a>);</td></tr>
<tr><th id="2176">2176</th><td>}</td></tr>
<tr><th id="2177">2177</th><td></td></tr>
<tr><th id="2178">2178</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2179">2179</th><td><dfn class="tu decl def fn" id="vmx_vcpu_getstate_seg" title='vmx_vcpu_getstate_seg' data-type='void vmx_vcpu_getstate_seg(struct nvmm_x64_state_seg * segs, int idx)' data-ref="vmx_vcpu_getstate_seg" data-ref-filename="vmx_vcpu_getstate_seg">vmx_vcpu_getstate_seg</dfn>(<b>struct</b> <a class="type" href="nvmm_x86.h.html#nvmm_x64_state_seg" title='nvmm_x64_state_seg' data-ref="nvmm_x64_state_seg" data-ref-filename="nvmm_x64_state_seg">nvmm_x64_state_seg</a> *<dfn class="local col3 decl" id="223segs" title='segs' data-type='struct nvmm_x64_state_seg *' data-ref="223segs" data-ref-filename="223segs">segs</dfn>, <em>int</em> <dfn class="local col4 decl" id="224idx" title='idx' data-type='int' data-ref="224idx" data-ref-filename="224idx">idx</dfn>)</td></tr>
<tr><th id="2180">2180</th><td>{</td></tr>
<tr><th id="2181">2181</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col5 decl" id="225selector" title='selector' data-type='uint64_t' data-ref="225selector" data-ref-filename="225selector">selector</dfn> = <var>0</var>, <dfn class="local col6 decl" id="226attrib" title='attrib' data-type='uint64_t' data-ref="226attrib" data-ref-filename="226attrib">attrib</dfn> = <var>0</var>, <dfn class="local col7 decl" id="227base" title='base' data-type='uint64_t' data-ref="227base" data-ref-filename="227base">base</dfn>, <dfn class="local col8 decl" id="228limit" title='limit' data-type='uint64_t' data-ref="228limit" data-ref-filename="228limit">limit</dfn>;</td></tr>
<tr><th id="2182">2182</th><td></td></tr>
<tr><th id="2183">2183</th><td>	<b>if</b> (<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a> != <a class="macro" href="nvmm_x86.h.html#112" title="6" data-ref="_M/NVMM_X64_SEG_GDT">NVMM_X64_SEG_GDT</a> &amp;&amp; <a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a> != <a class="macro" href="nvmm_x86.h.html#113" title="7" data-ref="_M/NVMM_X64_SEG_IDT">NVMM_X64_SEG_IDT</a>) {</td></tr>
<tr><th id="2184">2184</th><td>		<a class="local col5 ref" href="#225selector" title='selector' data-ref="225selector" data-ref-filename="225selector">selector</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="tu ref" href="#vmx_guest_segs" title='vmx_guest_segs' data-use='m' data-ref="vmx_guest_segs" data-ref-filename="vmx_guest_segs">vmx_guest_segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="local col5 ref field" href="#15selector" title='selector' data-ref="15selector" data-ref-filename="15selector">selector</a>);</td></tr>
<tr><th id="2185">2185</th><td>		<a class="local col6 ref" href="#226attrib" title='attrib' data-ref="226attrib" data-ref-filename="226attrib">attrib</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="tu ref" href="#vmx_guest_segs" title='vmx_guest_segs' data-use='m' data-ref="vmx_guest_segs" data-ref-filename="vmx_guest_segs">vmx_guest_segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="local col6 ref field" href="#16attrib" title='attrib' data-ref="16attrib" data-ref-filename="16attrib">attrib</a>);</td></tr>
<tr><th id="2186">2186</th><td>	}</td></tr>
<tr><th id="2187">2187</th><td>	<a class="local col8 ref" href="#228limit" title='limit' data-ref="228limit" data-ref-filename="228limit">limit</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="tu ref" href="#vmx_guest_segs" title='vmx_guest_segs' data-use='m' data-ref="vmx_guest_segs" data-ref-filename="vmx_guest_segs">vmx_guest_segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="local col7 ref field" href="#17limit" title='limit' data-ref="17limit" data-ref-filename="17limit">limit</a>);</td></tr>
<tr><th id="2188">2188</th><td>	<a class="local col7 ref" href="#227base" title='base' data-ref="227base" data-ref-filename="227base">base</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="tu ref" href="#vmx_guest_segs" title='vmx_guest_segs' data-use='m' data-ref="vmx_guest_segs" data-ref-filename="vmx_guest_segs">vmx_guest_segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="local col8 ref field" href="#18base" title='base' data-ref="18base" data-ref-filename="18base">base</a>);</td></tr>
<tr><th id="2189">2189</th><td></td></tr>
<tr><th id="2190">2190</th><td>	<a class="local col3 ref" href="#223segs" title='segs' data-ref="223segs" data-ref-filename="223segs">segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::selector" title='nvmm_x64_state_seg::selector' data-ref="nvmm_x64_state_seg::selector" data-ref-filename="nvmm_x64_state_seg..selector">selector</a> = <a class="local col5 ref" href="#225selector" title='selector' data-ref="225selector" data-ref-filename="225selector">selector</a>;</td></tr>
<tr><th id="2191">2191</th><td>	<a class="local col3 ref" href="#223segs" title='segs' data-ref="223segs" data-ref-filename="223segs">segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::limit" title='nvmm_x64_state_seg::limit' data-ref="nvmm_x64_state_seg::limit" data-ref-filename="nvmm_x64_state_seg..limit">limit</a> = <a class="local col8 ref" href="#228limit" title='limit' data-ref="228limit" data-ref-filename="228limit">limit</a>;</td></tr>
<tr><th id="2192">2192</th><td>	<a class="local col3 ref" href="#223segs" title='segs' data-ref="223segs" data-ref-filename="223segs">segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::base" title='nvmm_x64_state_seg::base' data-ref="nvmm_x64_state_seg::base" data-ref-filename="nvmm_x64_state_seg..base">base</a> = <a class="local col7 ref" href="#227base" title='base' data-ref="227base" data-ref-filename="227base">base</a>;</td></tr>
<tr><th id="2193">2193</th><td>	<a class="local col3 ref" href="#223segs" title='segs' data-ref="223segs" data-ref-filename="223segs">segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::type" title='nvmm_x64_state_seg::(anonymous struct)::type' data-ref="nvmm_x64_state_seg::(anonymous)::type" data-ref-filename="nvmm_x64_state_seg..(anonymous)..type">type</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((attrib) &amp; ((((((uintmax_t)((( ((3))&gt;((0)))?((3)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&gt;((0)))?((3)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((3))&lt;=((0)))?((3)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&lt;=((0)))?((3)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((3))&gt;((0)))?((3)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&gt;((0)))?((3)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((3))&lt;=((0)))?((3)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&lt;=((0)))?((3)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((3))&gt;((0)))?((3)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&gt;((0)))?((3)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((3))&lt;=((0)))?((3)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&lt;=((0)))?((3)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((3))&gt;((0)))?((3)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&gt;((0)))?((3)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((3))&lt;=((0)))?((3)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&lt;=((0)))?((3)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col6 ref" href="#226attrib" title='attrib' data-ref="226attrib" data-ref-filename="226attrib">attrib</a>, <a class="macro" href="#2144" title="(((((uintmax_t)((( ((3))&gt;((0)))?((3)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&gt;((0)))?((3)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((3))&lt;=((0)))?((3)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((3))&lt;=((0)))?((3)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_SEG_ATTRIB_TYPE">VMX_SEG_ATTRIB_TYPE</a>);</td></tr>
<tr><th id="2194">2194</th><td>	<a class="local col3 ref" href="#223segs" title='segs' data-ref="223segs" data-ref-filename="223segs">segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::s" title='nvmm_x64_state_seg::(anonymous struct)::s' data-ref="nvmm_x64_state_seg::(anonymous)::s" data-ref-filename="nvmm_x64_state_seg..(anonymous)..s">s</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((attrib) &amp; ((((uintmax_t)(4) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((4) &amp; (8 * sizeof(uintmax_t) - 1)))))) / (((((((uintmax_t)(4) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((4) &amp; (8 * sizeof(uintmax_t) - 1))))) - 1) &amp; ((((uintmax_t)(4) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((4) &amp; (8 * sizeof(uintmax_t) - 1)))))) ^ ((((uintmax_t)(4) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((4) &amp; (8 * sizeof(uintmax_t) - 1)))))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col6 ref" href="#226attrib" title='attrib' data-ref="226attrib" data-ref-filename="226attrib">attrib</a>, <a class="macro" href="#2145" title="(((uintmax_t)(4) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((4) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_SEG_ATTRIB_S">VMX_SEG_ATTRIB_S</a>);</td></tr>
<tr><th id="2195">2195</th><td>	<a class="local col3 ref" href="#223segs" title='segs' data-ref="223segs" data-ref-filename="223segs">segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::dpl" title='nvmm_x64_state_seg::(anonymous struct)::dpl' data-ref="nvmm_x64_state_seg::(anonymous)::dpl" data-ref-filename="nvmm_x64_state_seg..(anonymous)..dpl">dpl</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((attrib) &amp; ((((((uintmax_t)((( ((6))&gt;((5)))?((6)):((5))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&gt;((5)))?((6)):((5))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((6))&lt;=((5)))?((6)):((5)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&lt;=((5)))?((6)):((5)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((6))&gt;((5)))?((6)):((5))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&gt;((5)))?((6)):((5))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((6))&lt;=((5)))?((6)):((5)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&lt;=((5)))?((6)):((5)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((6))&gt;((5)))?((6)):((5))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&gt;((5)))?((6)):((5))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((6))&lt;=((5)))?((6)):((5)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&lt;=((5)))?((6)):((5)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((6))&gt;((5)))?((6)):((5))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&gt;((5)))?((6)):((5))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((6))&lt;=((5)))?((6)):((5)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&lt;=((5)))?((6)):((5)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col6 ref" href="#226attrib" title='attrib' data-ref="226attrib" data-ref-filename="226attrib">attrib</a>, <a class="macro" href="#2146" title="(((((uintmax_t)((( ((6))&gt;((5)))?((6)):((5))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&gt;((5)))?((6)):((5))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((6))&lt;=((5)))?((6)):((5)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((6))&lt;=((5)))?((6)):((5)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMX_SEG_ATTRIB_DPL">VMX_SEG_ATTRIB_DPL</a>);</td></tr>
<tr><th id="2196">2196</th><td>	<a class="local col3 ref" href="#223segs" title='segs' data-ref="223segs" data-ref-filename="223segs">segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::p" title='nvmm_x64_state_seg::(anonymous struct)::p' data-ref="nvmm_x64_state_seg::(anonymous)::p" data-ref-filename="nvmm_x64_state_seg..(anonymous)..p">p</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((attrib) &amp; ((((uintmax_t)(7) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((7) &amp; (8 * sizeof(uintmax_t) - 1)))))) / (((((((uintmax_t)(7) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((7) &amp; (8 * sizeof(uintmax_t) - 1))))) - 1) &amp; ((((uintmax_t)(7) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((7) &amp; (8 * sizeof(uintmax_t) - 1)))))) ^ ((((uintmax_t)(7) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((7) &amp; (8 * sizeof(uintmax_t) - 1)))))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col6 ref" href="#226attrib" title='attrib' data-ref="226attrib" data-ref-filename="226attrib">attrib</a>, <a class="macro" href="#2147" title="(((uintmax_t)(7) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((7) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_SEG_ATTRIB_P">VMX_SEG_ATTRIB_P</a>);</td></tr>
<tr><th id="2197">2197</th><td>	<a class="local col3 ref" href="#223segs" title='segs' data-ref="223segs" data-ref-filename="223segs">segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::avl" title='nvmm_x64_state_seg::(anonymous struct)::avl' data-ref="nvmm_x64_state_seg::(anonymous)::avl" data-ref-filename="nvmm_x64_state_seg..(anonymous)..avl">avl</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((attrib) &amp; ((((uintmax_t)(12) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((12) &amp; (8 * sizeof(uintmax_t) - 1)))))) / (((((((uintmax_t)(12) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((12) &amp; (8 * sizeof(uintmax_t) - 1))))) - 1) &amp; ((((uintmax_t)(12) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((12) &amp; (8 * sizeof(uintmax_t) - 1)))))) ^ ((((uintmax_t)(12) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((12) &amp; (8 * sizeof(uintmax_t) - 1)))))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col6 ref" href="#226attrib" title='attrib' data-ref="226attrib" data-ref-filename="226attrib">attrib</a>, <a class="macro" href="#2148" title="(((uintmax_t)(12) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((12) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_SEG_ATTRIB_AVL">VMX_SEG_ATTRIB_AVL</a>);</td></tr>
<tr><th id="2198">2198</th><td>	<a class="local col3 ref" href="#223segs" title='segs' data-ref="223segs" data-ref-filename="223segs">segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::l" title='nvmm_x64_state_seg::(anonymous struct)::l' data-ref="nvmm_x64_state_seg::(anonymous)::l" data-ref-filename="nvmm_x64_state_seg..(anonymous)..l">l</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((attrib) &amp; ((((uintmax_t)(13) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((13) &amp; (8 * sizeof(uintmax_t) - 1)))))) / (((((((uintmax_t)(13) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((13) &amp; (8 * sizeof(uintmax_t) - 1))))) - 1) &amp; ((((uintmax_t)(13) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((13) &amp; (8 * sizeof(uintmax_t) - 1)))))) ^ ((((uintmax_t)(13) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((13) &amp; (8 * sizeof(uintmax_t) - 1)))))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col6 ref" href="#226attrib" title='attrib' data-ref="226attrib" data-ref-filename="226attrib">attrib</a>, <a class="macro" href="#2149" title="(((uintmax_t)(13) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((13) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_SEG_ATTRIB_L">VMX_SEG_ATTRIB_L</a>);</td></tr>
<tr><th id="2199">2199</th><td>	<a class="local col3 ref" href="#223segs" title='segs' data-ref="223segs" data-ref-filename="223segs">segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::def" title='nvmm_x64_state_seg::(anonymous struct)::def' data-ref="nvmm_x64_state_seg::(anonymous)::def" data-ref-filename="nvmm_x64_state_seg..(anonymous)..def">def</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((attrib) &amp; ((((uintmax_t)(14) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((14) &amp; (8 * sizeof(uintmax_t) - 1)))))) / (((((((uintmax_t)(14) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((14) &amp; (8 * sizeof(uintmax_t) - 1))))) - 1) &amp; ((((uintmax_t)(14) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((14) &amp; (8 * sizeof(uintmax_t) - 1)))))) ^ ((((uintmax_t)(14) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((14) &amp; (8 * sizeof(uintmax_t) - 1)))))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col6 ref" href="#226attrib" title='attrib' data-ref="226attrib" data-ref-filename="226attrib">attrib</a>, <a class="macro" href="#2150" title="(((uintmax_t)(14) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((14) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_SEG_ATTRIB_DEF">VMX_SEG_ATTRIB_DEF</a>);</td></tr>
<tr><th id="2200">2200</th><td>	<a class="local col3 ref" href="#223segs" title='segs' data-ref="223segs" data-ref-filename="223segs">segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::g" title='nvmm_x64_state_seg::(anonymous struct)::g' data-ref="nvmm_x64_state_seg::(anonymous)::g" data-ref-filename="nvmm_x64_state_seg..(anonymous)..g">g</a> = <a class="macro" href="../../../sys/cdefs.h.html#606" title="(((attrib) &amp; ((((uintmax_t)(15) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((15) &amp; (8 * sizeof(uintmax_t) - 1)))))) / (((((((uintmax_t)(15) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((15) &amp; (8 * sizeof(uintmax_t) - 1))))) - 1) &amp; ((((uintmax_t)(15) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((15) &amp; (8 * sizeof(uintmax_t) - 1)))))) ^ ((((uintmax_t)(15) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((15) &amp; (8 * sizeof(uintmax_t) - 1)))))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col6 ref" href="#226attrib" title='attrib' data-ref="226attrib" data-ref-filename="226attrib">attrib</a>, <a class="macro" href="#2151" title="(((uintmax_t)(15) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((15) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_SEG_ATTRIB_G">VMX_SEG_ATTRIB_G</a>);</td></tr>
<tr><th id="2201">2201</th><td>	<b>if</b> (<a class="local col6 ref" href="#226attrib" title='attrib' data-ref="226attrib" data-ref-filename="226attrib">attrib</a> &amp; <a class="macro" href="#2152" title="(((uintmax_t)(16) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((16) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/VMX_SEG_ATTRIB_UNUSABLE">VMX_SEG_ATTRIB_UNUSABLE</a>) {</td></tr>
<tr><th id="2202">2202</th><td>		<a class="local col3 ref" href="#223segs" title='segs' data-ref="223segs" data-ref-filename="223segs">segs</a>[<a class="local col4 ref" href="#224idx" title='idx' data-ref="224idx" data-ref-filename="224idx">idx</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::attrib" title='nvmm_x64_state_seg::attrib' data-ref="nvmm_x64_state_seg::attrib" data-ref-filename="nvmm_x64_state_seg..attrib">attrib</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_seg::(anonymous)::p" title='nvmm_x64_state_seg::(anonymous struct)::p' data-ref="nvmm_x64_state_seg::(anonymous)::p" data-ref-filename="nvmm_x64_state_seg..(anonymous)..p">p</a> = <var>0</var>;</td></tr>
<tr><th id="2203">2203</th><td>	}</td></tr>
<tr><th id="2204">2204</th><td>}</td></tr>
<tr><th id="2205">2205</th><td></td></tr>
<tr><th id="2206">2206</th><td><em>static</em> <b>inline</b> <a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a></td></tr>
<tr><th id="2207">2207</th><td><dfn class="tu decl def fn" id="vmx_state_tlb_flush" title='vmx_state_tlb_flush' data-type='_Bool vmx_state_tlb_flush(const struct nvmm_x64_state * state, uint64_t flags)' data-ref="vmx_state_tlb_flush" data-ref-filename="vmx_state_tlb_flush">vmx_state_tlb_flush</dfn>(<em>const</em> <b>struct</b> <a class="type" href="nvmm_x86.h.html#nvmm_x64_state" title='nvmm_x64_state' data-ref="nvmm_x64_state" data-ref-filename="nvmm_x64_state">nvmm_x64_state</a> *<dfn class="local col9 decl" id="229state" title='state' data-type='const struct nvmm_x64_state *' data-ref="229state" data-ref-filename="229state">state</dfn>, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col0 decl" id="230flags" title='flags' data-type='uint64_t' data-ref="230flags" data-ref-filename="230flags">flags</dfn>)</td></tr>
<tr><th id="2208">2208</th><td>{</td></tr>
<tr><th id="2209">2209</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col1 decl" id="231cr0" title='cr0' data-type='uint64_t' data-ref="231cr0" data-ref-filename="231cr0">cr0</dfn>, <dfn class="local col2 decl" id="232cr3" title='cr3' data-type='uint64_t' data-ref="232cr3" data-ref-filename="232cr3">cr3</dfn>, <dfn class="local col3 decl" id="233cr4" title='cr4' data-type='uint64_t' data-ref="233cr4" data-ref-filename="233cr4">cr4</dfn>, <dfn class="local col4 decl" id="234efer" title='efer' data-type='uint64_t' data-ref="234efer" data-ref-filename="234efer">efer</dfn>;</td></tr>
<tr><th id="2210">2210</th><td></td></tr>
<tr><th id="2211">2211</th><td>	<b>if</b> (<a class="local col0 ref" href="#230flags" title='flags' data-ref="230flags" data-ref-filename="230flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#212" title="0x04" data-ref="_M/NVMM_X64_STATE_CRS">NVMM_X64_STATE_CRS</a>) {</td></tr>
<tr><th id="2212">2212</th><td>		<a class="local col1 ref" href="#231cr0" title='cr0' data-ref="231cr0" data-ref-filename="231cr0">cr0</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#457" title="0x00006800" data-ref="_M/VMCS_GUEST_CR0">VMCS_GUEST_CR0</a>);</td></tr>
<tr><th id="2213">2213</th><td>		<b>if</b> ((<a class="local col1 ref" href="#231cr0" title='cr0' data-ref="231cr0" data-ref-filename="231cr0">cr0</a> ^ <a class="local col9 ref" href="#229state" title='state' data-ref="229state" data-ref-filename="229state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#140" title="0" data-ref="_M/NVMM_X64_CR_CR0">NVMM_X64_CR_CR0</a>]) &amp; <a class="macro" href="#692" title="(0x80000000|0x00010000|0x40000000|0x20000000)" data-ref="_M/CR0_TLB_FLUSH">CR0_TLB_FLUSH</a>) {</td></tr>
<tr><th id="2214">2214</th><td>			<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="2215">2215</th><td>		}</td></tr>
<tr><th id="2216">2216</th><td>		<a class="local col2 ref" href="#232cr3" title='cr3' data-ref="232cr3" data-ref-filename="232cr3">cr3</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#458" title="0x00006802" data-ref="_M/VMCS_GUEST_CR3">VMCS_GUEST_CR3</a>);</td></tr>
<tr><th id="2217">2217</th><td>		<b>if</b> (<a class="local col2 ref" href="#232cr3" title='cr3' data-ref="232cr3" data-ref-filename="232cr3">cr3</a> != <a class="local col9 ref" href="#229state" title='state' data-ref="229state" data-ref-filename="229state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#142" title="2" data-ref="_M/NVMM_X64_CR_CR3">NVMM_X64_CR_CR3</a>]) {</td></tr>
<tr><th id="2218">2218</th><td>			<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="2219">2219</th><td>		}</td></tr>
<tr><th id="2220">2220</th><td>		<a class="local col3 ref" href="#233cr4" title='cr4' data-ref="233cr4" data-ref-filename="233cr4">cr4</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#459" title="0x00006804" data-ref="_M/VMCS_GUEST_CR4">VMCS_GUEST_CR4</a>);</td></tr>
<tr><th id="2221">2221</th><td>		<b>if</b> ((<a class="local col3 ref" href="#233cr4" title='cr4' data-ref="233cr4" data-ref-filename="233cr4">cr4</a> ^ <a class="local col9 ref" href="#229state" title='state' data-ref="229state" data-ref-filename="229state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#143" title="3" data-ref="_M/NVMM_X64_CR_CR4">NVMM_X64_CR_CR4</a>]) &amp; <a class="macro" href="#694" title="(0x00000080|0x00000020|0x00000010)" data-ref="_M/CR4_TLB_FLUSH">CR4_TLB_FLUSH</a>) {</td></tr>
<tr><th id="2222">2222</th><td>			<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="2223">2223</th><td>		}</td></tr>
<tr><th id="2224">2224</th><td>	}</td></tr>
<tr><th id="2225">2225</th><td></td></tr>
<tr><th id="2226">2226</th><td>	<b>if</b> (<a class="local col0 ref" href="#230flags" title='flags' data-ref="230flags" data-ref-filename="230flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#214" title="0x10" data-ref="_M/NVMM_X64_STATE_MSRS">NVMM_X64_STATE_MSRS</a>) {</td></tr>
<tr><th id="2227">2227</th><td>		<a class="local col4 ref" href="#234efer" title='efer' data-ref="234efer" data-ref-filename="234efer">efer</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#288" title="0x00002806" data-ref="_M/VMCS_GUEST_IA32_EFER">VMCS_GUEST_IA32_EFER</a>);</td></tr>
<tr><th id="2228">2228</th><td>		<b>if</b> ((<a class="local col4 ref" href="#234efer" title='efer' data-ref="234efer" data-ref-filename="234efer">efer</a> ^</td></tr>
<tr><th id="2229">2229</th><td>		     <a class="local col9 ref" href="#229state" title='state' data-ref="229state" data-ref-filename="229state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#158" title="0" data-ref="_M/NVMM_X64_MSR_EFER">NVMM_X64_MSR_EFER</a>]) &amp; <a class="macro" href="#690" title="(0x00000800|0x00000400|0x00000100)" data-ref="_M/EFER_TLB_FLUSH">EFER_TLB_FLUSH</a>) {</td></tr>
<tr><th id="2230">2230</th><td>			<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="2231">2231</th><td>		}</td></tr>
<tr><th id="2232">2232</th><td>	}</td></tr>
<tr><th id="2233">2233</th><td></td></tr>
<tr><th id="2234">2234</th><td>	<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2235">2235</th><td>}</td></tr>
<tr><th id="2236">2236</th><td></td></tr>
<tr><th id="2237">2237</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2238">2238</th><td><dfn class="tu decl def fn" id="vmx_vcpu_setstate" title='vmx_vcpu_setstate' data-type='void vmx_vcpu_setstate(struct nvmm_cpu * vcpu)' data-ref="vmx_vcpu_setstate" data-ref-filename="vmx_vcpu_setstate">vmx_vcpu_setstate</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col5 decl" id="235vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="235vcpu" data-ref-filename="235vcpu">vcpu</dfn>)</td></tr>
<tr><th id="2239">2239</th><td>{</td></tr>
<tr><th id="2240">2240</th><td>	<b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_comm_page" title='nvmm_comm_page' data-ref="nvmm_comm_page" data-ref-filename="nvmm_comm_page">nvmm_comm_page</a> *<dfn class="local col6 decl" id="236comm" title='comm' data-type='struct nvmm_comm_page *' data-ref="236comm" data-ref-filename="236comm">comm</dfn> = <a class="local col5 ref" href="#235vcpu" title='vcpu' data-ref="235vcpu" data-ref-filename="235vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>;</td></tr>
<tr><th id="2241">2241</th><td>	<em>const</em> <b>struct</b> <a class="type" href="nvmm_x86.h.html#nvmm_x64_state" title='nvmm_x64_state' data-ref="nvmm_x64_state" data-ref-filename="nvmm_x64_state">nvmm_x64_state</a> *<dfn class="local col7 decl" id="237state" title='state' data-type='const struct nvmm_x64_state *' data-ref="237state" data-ref-filename="237state">state</dfn> = &amp;<a class="local col6 ref" href="#236comm" title='comm' data-ref="236comm" data-ref-filename="236comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state" title='nvmm_comm_page::state' data-ref="nvmm_comm_page::state" data-ref-filename="nvmm_comm_page..state">state</a>;</td></tr>
<tr><th id="2242">2242</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col8 decl" id="238cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</dfn> = <a class="local col5 ref" href="#235vcpu" title='vcpu' data-ref="235vcpu" data-ref-filename="235vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="2243">2243</th><td>	<b>struct</b> <a class="type" href="../../../arch/x86/include/cpu_extended_state.h.html#fxsave" title='fxsave' data-ref="fxsave" data-ref-filename="fxsave">fxsave</a> *<dfn class="local col9 decl" id="239fpustate" title='fpustate' data-type='struct fxsave *' data-ref="239fpustate" data-ref-filename="239fpustate">fpustate</dfn>;</td></tr>
<tr><th id="2244">2244</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col0 decl" id="240ctls1" title='ctls1' data-type='uint64_t' data-ref="240ctls1" data-ref-filename="240ctls1">ctls1</dfn>, <dfn class="local col1 decl" id="241intstate" title='intstate' data-type='uint64_t' data-ref="241intstate" data-ref-filename="241intstate">intstate</dfn>;</td></tr>
<tr><th id="2245">2245</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="242flags" title='flags' data-type='uint64_t' data-ref="242flags" data-ref-filename="242flags">flags</dfn>;</td></tr>
<tr><th id="2246">2246</th><td></td></tr>
<tr><th id="2247">2247</th><td>	<a class="local col2 ref" href="#242flags" title='flags' data-ref="242flags" data-ref-filename="242flags">flags</a> = <a class="local col6 ref" href="#236comm" title='comm' data-ref="236comm" data-ref-filename="236comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state_wanted" title='nvmm_comm_page::state_wanted' data-ref="nvmm_comm_page::state_wanted" data-ref-filename="nvmm_comm_page..state_wanted">state_wanted</a>;</td></tr>
<tr><th id="2248">2248</th><td></td></tr>
<tr><th id="2249">2249</th><td>	<a class="tu ref fn" href="#vmx_vmcs_enter" title='vmx_vmcs_enter' data-use='c' data-ref="vmx_vmcs_enter" data-ref-filename="vmx_vmcs_enter">vmx_vmcs_enter</a>(<a class="local col5 ref" href="#235vcpu" title='vcpu' data-ref="235vcpu" data-ref-filename="235vcpu">vcpu</a>);</td></tr>
<tr><th id="2250">2250</th><td></td></tr>
<tr><th id="2251">2251</th><td>	<b>if</b> (<a class="tu ref fn" href="#vmx_state_tlb_flush" title='vmx_state_tlb_flush' data-use='c' data-ref="vmx_state_tlb_flush" data-ref-filename="vmx_state_tlb_flush">vmx_state_tlb_flush</a>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>, <a class="local col2 ref" href="#242flags" title='flags' data-ref="242flags" data-ref-filename="242flags">flags</a>)) {</td></tr>
<tr><th id="2252">2252</th><td>		<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gtlb_want_flush" title='vmx_cpudata::gtlb_want_flush' data-use='w' data-ref="vmx_cpudata::gtlb_want_flush" data-ref-filename="vmx_cpudata..gtlb_want_flush">gtlb_want_flush</a> = <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="2253">2253</th><td>	}</td></tr>
<tr><th id="2254">2254</th><td></td></tr>
<tr><th id="2255">2255</th><td>	<b>if</b> (<a class="local col2 ref" href="#242flags" title='flags' data-ref="242flags" data-ref-filename="242flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#210" title="0x01" data-ref="_M/NVMM_X64_STATE_SEGS">NVMM_X64_STATE_SEGS</a>) {</td></tr>
<tr><th id="2256">2256</th><td>		<a class="tu ref fn" href="#vmx_vcpu_setstate_seg" title='vmx_vcpu_setstate_seg' data-use='c' data-ref="vmx_vcpu_setstate_seg" data-ref-filename="vmx_vcpu_setstate_seg">vmx_vcpu_setstate_seg</a>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#107" title="1" data-ref="_M/NVMM_X64_SEG_CS">NVMM_X64_SEG_CS</a>);</td></tr>
<tr><th id="2257">2257</th><td>		<a class="tu ref fn" href="#vmx_vcpu_setstate_seg" title='vmx_vcpu_setstate_seg' data-use='c' data-ref="vmx_vcpu_setstate_seg" data-ref-filename="vmx_vcpu_setstate_seg">vmx_vcpu_setstate_seg</a>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#109" title="3" data-ref="_M/NVMM_X64_SEG_DS">NVMM_X64_SEG_DS</a>);</td></tr>
<tr><th id="2258">2258</th><td>		<a class="tu ref fn" href="#vmx_vcpu_setstate_seg" title='vmx_vcpu_setstate_seg' data-use='c' data-ref="vmx_vcpu_setstate_seg" data-ref-filename="vmx_vcpu_setstate_seg">vmx_vcpu_setstate_seg</a>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#106" title="0" data-ref="_M/NVMM_X64_SEG_ES">NVMM_X64_SEG_ES</a>);</td></tr>
<tr><th id="2259">2259</th><td>		<a class="tu ref fn" href="#vmx_vcpu_setstate_seg" title='vmx_vcpu_setstate_seg' data-use='c' data-ref="vmx_vcpu_setstate_seg" data-ref-filename="vmx_vcpu_setstate_seg">vmx_vcpu_setstate_seg</a>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#110" title="4" data-ref="_M/NVMM_X64_SEG_FS">NVMM_X64_SEG_FS</a>);</td></tr>
<tr><th id="2260">2260</th><td>		<a class="tu ref fn" href="#vmx_vcpu_setstate_seg" title='vmx_vcpu_setstate_seg' data-use='c' data-ref="vmx_vcpu_setstate_seg" data-ref-filename="vmx_vcpu_setstate_seg">vmx_vcpu_setstate_seg</a>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#111" title="5" data-ref="_M/NVMM_X64_SEG_GS">NVMM_X64_SEG_GS</a>);</td></tr>
<tr><th id="2261">2261</th><td>		<a class="tu ref fn" href="#vmx_vcpu_setstate_seg" title='vmx_vcpu_setstate_seg' data-use='c' data-ref="vmx_vcpu_setstate_seg" data-ref-filename="vmx_vcpu_setstate_seg">vmx_vcpu_setstate_seg</a>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#108" title="2" data-ref="_M/NVMM_X64_SEG_SS">NVMM_X64_SEG_SS</a>);</td></tr>
<tr><th id="2262">2262</th><td>		<a class="tu ref fn" href="#vmx_vcpu_setstate_seg" title='vmx_vcpu_setstate_seg' data-use='c' data-ref="vmx_vcpu_setstate_seg" data-ref-filename="vmx_vcpu_setstate_seg">vmx_vcpu_setstate_seg</a>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#112" title="6" data-ref="_M/NVMM_X64_SEG_GDT">NVMM_X64_SEG_GDT</a>);</td></tr>
<tr><th id="2263">2263</th><td>		<a class="tu ref fn" href="#vmx_vcpu_setstate_seg" title='vmx_vcpu_setstate_seg' data-use='c' data-ref="vmx_vcpu_setstate_seg" data-ref-filename="vmx_vcpu_setstate_seg">vmx_vcpu_setstate_seg</a>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#113" title="7" data-ref="_M/NVMM_X64_SEG_IDT">NVMM_X64_SEG_IDT</a>);</td></tr>
<tr><th id="2264">2264</th><td>		<a class="tu ref fn" href="#vmx_vcpu_setstate_seg" title='vmx_vcpu_setstate_seg' data-use='c' data-ref="vmx_vcpu_setstate_seg" data-ref-filename="vmx_vcpu_setstate_seg">vmx_vcpu_setstate_seg</a>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#114" title="8" data-ref="_M/NVMM_X64_SEG_LDT">NVMM_X64_SEG_LDT</a>);</td></tr>
<tr><th id="2265">2265</th><td>		<a class="tu ref fn" href="#vmx_vcpu_setstate_seg" title='vmx_vcpu_setstate_seg' data-use='c' data-ref="vmx_vcpu_setstate_seg" data-ref-filename="vmx_vcpu_setstate_seg">vmx_vcpu_setstate_seg</a>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#115" title="9" data-ref="_M/NVMM_X64_SEG_TR">NVMM_X64_SEG_TR</a>);</td></tr>
<tr><th id="2266">2266</th><td>	}</td></tr>
<tr><th id="2267">2267</th><td></td></tr>
<tr><th id="2268">2268</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#254" title="typedef char __ctassert15[ (sizeof(cpudata-&gt;gprs) == sizeof(state-&gt;gprs)) ? 1 : -1] __attribute__((__unused__))" data-ref="_M/CTASSERT">CTASSERT</a>(<b>sizeof</b>(<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>) == <b>sizeof</b>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::gprs" title='nvmm_x64_state::gprs' data-ref="nvmm_x64_state::gprs" data-ref-filename="nvmm_x64_state..gprs">gprs</a>));</td></tr>
<tr><th id="2269">2269</th><td>	<b>if</b> (<a class="local col2 ref" href="#242flags" title='flags' data-ref="242flags" data-ref-filename="242flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#211" title="0x02" data-ref="_M/NVMM_X64_STATE_GPRS">NVMM_X64_STATE_GPRS</a>) {</td></tr>
<tr><th id="2270">2270</th><td>		<a class="macro" href="../../../lib/libkern/libkern.h.html#380" title="__builtin_memcpy(cpudata-&gt;gprs, state-&gt;gprs, sizeof(state-&gt;gprs))" data-ref="_M/memcpy">memcpy</a>(<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>, <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::gprs" title='nvmm_x64_state::gprs' data-ref="nvmm_x64_state::gprs" data-ref-filename="nvmm_x64_state..gprs">gprs</a>, <b>sizeof</b>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::gprs" title='nvmm_x64_state::gprs' data-ref="nvmm_x64_state::gprs" data-ref-filename="nvmm_x64_state..gprs">gprs</a>));</td></tr>
<tr><th id="2271">2271</th><td></td></tr>
<tr><th id="2272">2272</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#472" title="0x0000681E" data-ref="_M/VMCS_GUEST_RIP">VMCS_GUEST_RIP</a>, <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::gprs" title='nvmm_x64_state::gprs' data-ref="nvmm_x64_state::gprs" data-ref-filename="nvmm_x64_state..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#135" title="16" data-ref="_M/NVMM_X64_GPR_RIP">NVMM_X64_GPR_RIP</a>]);</td></tr>
<tr><th id="2273">2273</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#471" title="0x0000681C" data-ref="_M/VMCS_GUEST_RSP">VMCS_GUEST_RSP</a>, <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::gprs" title='nvmm_x64_state::gprs' data-ref="nvmm_x64_state::gprs" data-ref-filename="nvmm_x64_state..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#123" title="4" data-ref="_M/NVMM_X64_GPR_RSP">NVMM_X64_GPR_RSP</a>]);</td></tr>
<tr><th id="2274">2274</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#473" title="0x00006820" data-ref="_M/VMCS_GUEST_RFLAGS">VMCS_GUEST_RFLAGS</a>, <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::gprs" title='nvmm_x64_state::gprs' data-ref="nvmm_x64_state::gprs" data-ref-filename="nvmm_x64_state..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#136" title="17" data-ref="_M/NVMM_X64_GPR_RFLAGS">NVMM_X64_GPR_RFLAGS</a>]);</td></tr>
<tr><th id="2275">2275</th><td>	}</td></tr>
<tr><th id="2276">2276</th><td></td></tr>
<tr><th id="2277">2277</th><td>	<b>if</b> (<a class="local col2 ref" href="#242flags" title='flags' data-ref="242flags" data-ref-filename="242flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#212" title="0x04" data-ref="_M/NVMM_X64_STATE_CRS">NVMM_X64_STATE_CRS</a>) {</td></tr>
<tr><th id="2278">2278</th><td>		<i>/*</i></td></tr>
<tr><th id="2279">2279</th><td><i>		 * CR0_NE and CR4_VMXE are mandatory.</i></td></tr>
<tr><th id="2280">2280</th><td><i>		 */</i></td></tr>
<tr><th id="2281">2281</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#457" title="0x00006800" data-ref="_M/VMCS_GUEST_CR0">VMCS_GUEST_CR0</a>,</td></tr>
<tr><th id="2282">2282</th><td>		    <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#140" title="0" data-ref="_M/NVMM_X64_CR_CR0">NVMM_X64_CR_CR0</a>] | <a class="macro" href="../../../arch/x86/include/specialreg.h.html#68" title="0x00000020" data-ref="_M/CR0_NE">CR0_NE</a>);</td></tr>
<tr><th id="2283">2283</th><td>		<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gcr2" title='vmx_cpudata::gcr2' data-use='w' data-ref="vmx_cpudata::gcr2" data-ref-filename="vmx_cpudata..gcr2">gcr2</a> = <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#141" title="1" data-ref="_M/NVMM_X64_CR_CR2">NVMM_X64_CR_CR2</a>];</td></tr>
<tr><th id="2284">2284</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#458" title="0x00006802" data-ref="_M/VMCS_GUEST_CR3">VMCS_GUEST_CR3</a>, <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#142" title="2" data-ref="_M/NVMM_X64_CR_CR3">NVMM_X64_CR_CR3</a>]); <i>// XXX PDPTE?</i></td></tr>
<tr><th id="2285">2285</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#459" title="0x00006804" data-ref="_M/VMCS_GUEST_CR4">VMCS_GUEST_CR4</a>,</td></tr>
<tr><th id="2286">2286</th><td>		    <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#143" title="3" data-ref="_M/NVMM_X64_CR_CR4">NVMM_X64_CR_CR4</a>] | <a class="macro" href="../../../arch/x86/include/specialreg.h.html#112" title="0x00002000" data-ref="_M/CR4_VMXE">CR4_VMXE</a>);</td></tr>
<tr><th id="2287">2287</th><td>		<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gcr8" title='vmx_cpudata::gcr8' data-use='w' data-ref="vmx_cpudata::gcr8" data-ref-filename="vmx_cpudata..gcr8">gcr8</a> = <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#144" title="4" data-ref="_M/NVMM_X64_CR_CR8">NVMM_X64_CR_CR8</a>];</td></tr>
<tr><th id="2288">2288</th><td></td></tr>
<tr><th id="2289">2289</th><td>		<b>if</b> (<a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a> != <var>0</var>) {</td></tr>
<tr><th id="2290">2290</th><td>			<i>/* Clear illegal XCR0 bits, set mandatory X87 bit. */</i></td></tr>
<tr><th id="2291">2291</th><td>			<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gxcr0" title='vmx_cpudata::gxcr0' data-use='w' data-ref="vmx_cpudata::gxcr0" data-ref-filename="vmx_cpudata..gxcr0">gxcr0</a> = <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#145" title="5" data-ref="_M/NVMM_X64_CR_XCR0">NVMM_X64_CR_XCR0</a>];</td></tr>
<tr><th id="2292">2292</th><td>			<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gxcr0" title='vmx_cpudata::gxcr0' data-use='w' data-ref="vmx_cpudata::gxcr0" data-ref-filename="vmx_cpudata..gxcr0">gxcr0</a> &amp;= <a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a>;</td></tr>
<tr><th id="2293">2293</th><td>			<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gxcr0" title='vmx_cpudata::gxcr0' data-use='w' data-ref="vmx_cpudata::gxcr0" data-ref-filename="vmx_cpudata..gxcr0">gxcr0</a> |= <a class="macro" href="../../../arch/x86/include/specialreg.h.html#124" title="0x00000001" data-ref="_M/XCR0_X87">XCR0_X87</a>;</td></tr>
<tr><th id="2294">2294</th><td>		}</td></tr>
<tr><th id="2295">2295</th><td>	}</td></tr>
<tr><th id="2296">2296</th><td></td></tr>
<tr><th id="2297">2297</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#254" title="typedef char __ctassert17[ (sizeof(cpudata-&gt;drs) == sizeof(state-&gt;drs)) ? 1 : -1] __attribute__((__unused__))" data-ref="_M/CTASSERT">CTASSERT</a>(<b>sizeof</b>(<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='r' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>) == <b>sizeof</b>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::drs" title='nvmm_x64_state::drs' data-ref="nvmm_x64_state::drs" data-ref-filename="nvmm_x64_state..drs">drs</a>));</td></tr>
<tr><th id="2298">2298</th><td>	<b>if</b> (<a class="local col2 ref" href="#242flags" title='flags' data-ref="242flags" data-ref-filename="242flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#213" title="0x08" data-ref="_M/NVMM_X64_STATE_DRS">NVMM_X64_STATE_DRS</a>) {</td></tr>
<tr><th id="2299">2299</th><td>		<a class="macro" href="../../../lib/libkern/libkern.h.html#380" title="__builtin_memcpy(cpudata-&gt;drs, state-&gt;drs, sizeof(state-&gt;drs))" data-ref="_M/memcpy">memcpy</a>(<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='r' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>, <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::drs" title='nvmm_x64_state::drs' data-ref="nvmm_x64_state::drs" data-ref-filename="nvmm_x64_state..drs">drs</a>, <b>sizeof</b>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::drs" title='nvmm_x64_state::drs' data-ref="nvmm_x64_state::drs" data-ref-filename="nvmm_x64_state..drs">drs</a>));</td></tr>
<tr><th id="2300">2300</th><td></td></tr>
<tr><th id="2301">2301</th><td>		<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='w' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>[<a class="macro" href="nvmm_x86.h.html#153" title="4" data-ref="_M/NVMM_X64_DR_DR6">NVMM_X64_DR_DR6</a>] &amp;= <var>0xFFFFFFFF</var>;</td></tr>
<tr><th id="2302">2302</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#470" title="0x0000681A" data-ref="_M/VMCS_GUEST_DR7">VMCS_GUEST_DR7</a>, <a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='r' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>[<a class="macro" href="nvmm_x86.h.html#154" title="5" data-ref="_M/NVMM_X64_DR_DR7">NVMM_X64_DR_DR7</a>]);</td></tr>
<tr><th id="2303">2303</th><td>	}</td></tr>
<tr><th id="2304">2304</th><td></td></tr>
<tr><th id="2305">2305</th><td>	<b>if</b> (<a class="local col2 ref" href="#242flags" title='flags' data-ref="242flags" data-ref-filename="242flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#214" title="0x10" data-ref="_M/NVMM_X64_STATE_MSRS">NVMM_X64_STATE_MSRS</a>) {</td></tr>
<tr><th id="2306">2306</th><td>		<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-use='r' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</a>[<a class="macro" href="#560" title="0" data-ref="_M/VMX_MSRLIST_STAR">VMX_MSRLIST_STAR</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='w' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a> =</td></tr>
<tr><th id="2307">2307</th><td>		    <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#159" title="1" data-ref="_M/NVMM_X64_MSR_STAR">NVMM_X64_MSR_STAR</a>];</td></tr>
<tr><th id="2308">2308</th><td>		<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-use='r' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</a>[<a class="macro" href="#561" title="1" data-ref="_M/VMX_MSRLIST_LSTAR">VMX_MSRLIST_LSTAR</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='w' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a> =</td></tr>
<tr><th id="2309">2309</th><td>		    <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#160" title="2" data-ref="_M/NVMM_X64_MSR_LSTAR">NVMM_X64_MSR_LSTAR</a>];</td></tr>
<tr><th id="2310">2310</th><td>		<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-use='r' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</a>[<a class="macro" href="#562" title="2" data-ref="_M/VMX_MSRLIST_CSTAR">VMX_MSRLIST_CSTAR</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='w' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a> =</td></tr>
<tr><th id="2311">2311</th><td>		    <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#161" title="3" data-ref="_M/NVMM_X64_MSR_CSTAR">NVMM_X64_MSR_CSTAR</a>];</td></tr>
<tr><th id="2312">2312</th><td>		<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-use='r' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</a>[<a class="macro" href="#563" title="3" data-ref="_M/VMX_MSRLIST_SFMASK">VMX_MSRLIST_SFMASK</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='w' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a> =</td></tr>
<tr><th id="2313">2313</th><td>		    <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#162" title="4" data-ref="_M/NVMM_X64_MSR_SFMASK">NVMM_X64_MSR_SFMASK</a>];</td></tr>
<tr><th id="2314">2314</th><td>		<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-use='r' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</a>[<a class="macro" href="#564" title="4" data-ref="_M/VMX_MSRLIST_KERNELGSBASE">VMX_MSRLIST_KERNELGSBASE</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='w' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a> =</td></tr>
<tr><th id="2315">2315</th><td>		    <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#163" title="5" data-ref="_M/NVMM_X64_MSR_KERNELGSBASE">NVMM_X64_MSR_KERNELGSBASE</a>];</td></tr>
<tr><th id="2316">2316</th><td></td></tr>
<tr><th id="2317">2317</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#288" title="0x00002806" data-ref="_M/VMCS_GUEST_IA32_EFER">VMCS_GUEST_IA32_EFER</a>,</td></tr>
<tr><th id="2318">2318</th><td>		    <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#158" title="0" data-ref="_M/NVMM_X64_MSR_EFER">NVMM_X64_MSR_EFER</a>]);</td></tr>
<tr><th id="2319">2319</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#287" title="0x00002804" data-ref="_M/VMCS_GUEST_IA32_PAT">VMCS_GUEST_IA32_PAT</a>,</td></tr>
<tr><th id="2320">2320</th><td>		    <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#167" title="9" data-ref="_M/NVMM_X64_MSR_PAT">NVMM_X64_MSR_PAT</a>]);</td></tr>
<tr><th id="2321">2321</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#436" title="0x0000482A" data-ref="_M/VMCS_GUEST_IA32_SYSENTER_CS">VMCS_GUEST_IA32_SYSENTER_CS</a>,</td></tr>
<tr><th id="2322">2322</th><td>		    <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#164" title="6" data-ref="_M/NVMM_X64_MSR_SYSENTER_CS">NVMM_X64_MSR_SYSENTER_CS</a>]);</td></tr>
<tr><th id="2323">2323</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#475" title="0x00006824" data-ref="_M/VMCS_GUEST_IA32_SYSENTER_ESP">VMCS_GUEST_IA32_SYSENTER_ESP</a>,</td></tr>
<tr><th id="2324">2324</th><td>		    <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#165" title="7" data-ref="_M/NVMM_X64_MSR_SYSENTER_ESP">NVMM_X64_MSR_SYSENTER_ESP</a>]);</td></tr>
<tr><th id="2325">2325</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#476" title="0x00006826" data-ref="_M/VMCS_GUEST_IA32_SYSENTER_EIP">VMCS_GUEST_IA32_SYSENTER_EIP</a>,</td></tr>
<tr><th id="2326">2326</th><td>		    <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#166" title="8" data-ref="_M/NVMM_X64_MSR_SYSENTER_EIP">NVMM_X64_MSR_SYSENTER_EIP</a>]);</td></tr>
<tr><th id="2327">2327</th><td></td></tr>
<tr><th id="2328">2328</th><td>		<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gtsc" title='vmx_cpudata::gtsc' data-use='w' data-ref="vmx_cpudata::gtsc" data-ref-filename="vmx_cpudata..gtsc">gtsc</a> = <a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#168" title="10" data-ref="_M/NVMM_X64_MSR_TSC">NVMM_X64_MSR_TSC</a>];</td></tr>
<tr><th id="2329">2329</th><td>		<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gtsc_want_update" title='vmx_cpudata::gtsc_want_update' data-use='w' data-ref="vmx_cpudata::gtsc_want_update" data-ref-filename="vmx_cpudata..gtsc_want_update">gtsc_want_update</a> = <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="2330">2330</th><td></td></tr>
<tr><th id="2331">2331</th><td>		<i>/* ENTRY_CTLS_LONG_MODE must match EFER_LMA. */</i></td></tr>
<tr><th id="2332">2332</th><td>		<a class="local col0 ref" href="#240ctls1" title='ctls1' data-ref="240ctls1" data-ref-filename="240ctls1">ctls1</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#346" title="0x00004012" data-ref="_M/VMCS_ENTRY_CTLS">VMCS_ENTRY_CTLS</a>);</td></tr>
<tr><th id="2333">2333</th><td>		<b>if</b> (<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#158" title="0" data-ref="_M/NVMM_X64_MSR_EFER">NVMM_X64_MSR_EFER</a>] &amp; <a class="macro" href="../../../arch/x86/include/specialreg.h.html#961" title="0x00000400" data-ref="_M/EFER_LMA">EFER_LMA</a>) {</td></tr>
<tr><th id="2334">2334</th><td>			<a class="local col0 ref" href="#240ctls1" title='ctls1' data-ref="240ctls1" data-ref-filename="240ctls1">ctls1</a> |= <a class="macro" href="#348" title="(((uintmax_t)(9) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((9) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/ENTRY_CTLS_LONG_MODE">ENTRY_CTLS_LONG_MODE</a>;</td></tr>
<tr><th id="2335">2335</th><td>		} <b>else</b> {</td></tr>
<tr><th id="2336">2336</th><td>			<a class="local col0 ref" href="#240ctls1" title='ctls1' data-ref="240ctls1" data-ref-filename="240ctls1">ctls1</a> &amp;= ~<a class="macro" href="#348" title="(((uintmax_t)(9) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((9) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/ENTRY_CTLS_LONG_MODE">ENTRY_CTLS_LONG_MODE</a>;</td></tr>
<tr><th id="2337">2337</th><td>		}</td></tr>
<tr><th id="2338">2338</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#346" title="0x00004012" data-ref="_M/VMCS_ENTRY_CTLS">VMCS_ENTRY_CTLS</a>, <a class="local col0 ref" href="#240ctls1" title='ctls1' data-ref="240ctls1" data-ref-filename="240ctls1">ctls1</a>);</td></tr>
<tr><th id="2339">2339</th><td>	}</td></tr>
<tr><th id="2340">2340</th><td></td></tr>
<tr><th id="2341">2341</th><td>	<b>if</b> (<a class="local col2 ref" href="#242flags" title='flags' data-ref="242flags" data-ref-filename="242flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#215" title="0x20" data-ref="_M/NVMM_X64_STATE_INTR">NVMM_X64_STATE_INTR</a>) {</td></tr>
<tr><th id="2342">2342</th><td>		<a class="local col1 ref" href="#241intstate" title='intstate' data-ref="241intstate" data-ref-filename="241intstate">intstate</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#428" title="0x00004824" data-ref="_M/VMCS_GUEST_INTERRUPTIBILITY">VMCS_GUEST_INTERRUPTIBILITY</a>);</td></tr>
<tr><th id="2343">2343</th><td>		<a class="local col1 ref" href="#241intstate" title='intstate' data-ref="241intstate" data-ref-filename="241intstate">intstate</a> &amp;= ~(<a class="macro" href="#429" title="(((uintmax_t)(0) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((0) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/INT_STATE_STI">INT_STATE_STI</a>|<a class="macro" href="#430" title="(((uintmax_t)(1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((1) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/INT_STATE_MOVSS">INT_STATE_MOVSS</a>);</td></tr>
<tr><th id="2344">2344</th><td>		<b>if</b> (<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::intr" title='nvmm_x64_state::intr' data-ref="nvmm_x64_state::intr" data-ref-filename="nvmm_x64_state..intr">intr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_intr::int_shadow" title='nvmm_x64_state_intr::int_shadow' data-ref="nvmm_x64_state_intr::int_shadow" data-ref-filename="nvmm_x64_state_intr..int_shadow">int_shadow</a>) {</td></tr>
<tr><th id="2345">2345</th><td>			<a class="local col1 ref" href="#241intstate" title='intstate' data-ref="241intstate" data-ref-filename="241intstate">intstate</a> |= <a class="macro" href="#430" title="(((uintmax_t)(1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((1) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/INT_STATE_MOVSS">INT_STATE_MOVSS</a>;</td></tr>
<tr><th id="2346">2346</th><td>		}</td></tr>
<tr><th id="2347">2347</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#428" title="0x00004824" data-ref="_M/VMCS_GUEST_INTERRUPTIBILITY">VMCS_GUEST_INTERRUPTIBILITY</a>, <a class="local col1 ref" href="#241intstate" title='intstate' data-ref="241intstate" data-ref-filename="241intstate">intstate</a>);</td></tr>
<tr><th id="2348">2348</th><td></td></tr>
<tr><th id="2349">2349</th><td>		<b>if</b> (<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::intr" title='nvmm_x64_state::intr' data-ref="nvmm_x64_state::intr" data-ref-filename="nvmm_x64_state..intr">intr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_intr::int_window_exiting" title='nvmm_x64_state_intr::int_window_exiting' data-ref="nvmm_x64_state_intr::int_window_exiting" data-ref-filename="nvmm_x64_state_intr..int_window_exiting">int_window_exiting</a>) {</td></tr>
<tr><th id="2350">2350</th><td>			<a class="tu ref fn" href="#vmx_event_waitexit_enable" title='vmx_event_waitexit_enable' data-use='c' data-ref="vmx_event_waitexit_enable" data-ref-filename="vmx_event_waitexit_enable">vmx_event_waitexit_enable</a>(<a class="local col5 ref" href="#235vcpu" title='vcpu' data-ref="235vcpu" data-ref-filename="235vcpu">vcpu</a>, <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>);</td></tr>
<tr><th id="2351">2351</th><td>		} <b>else</b> {</td></tr>
<tr><th id="2352">2352</th><td>			<a class="tu ref fn" href="#vmx_event_waitexit_disable" title='vmx_event_waitexit_disable' data-use='c' data-ref="vmx_event_waitexit_disable" data-ref-filename="vmx_event_waitexit_disable">vmx_event_waitexit_disable</a>(<a class="local col5 ref" href="#235vcpu" title='vcpu' data-ref="235vcpu" data-ref-filename="235vcpu">vcpu</a>, <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>);</td></tr>
<tr><th id="2353">2353</th><td>		}</td></tr>
<tr><th id="2354">2354</th><td></td></tr>
<tr><th id="2355">2355</th><td>		<b>if</b> (<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::intr" title='nvmm_x64_state::intr' data-ref="nvmm_x64_state::intr" data-ref-filename="nvmm_x64_state..intr">intr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_intr::nmi_window_exiting" title='nvmm_x64_state_intr::nmi_window_exiting' data-ref="nvmm_x64_state_intr::nmi_window_exiting" data-ref-filename="nvmm_x64_state_intr..nmi_window_exiting">nmi_window_exiting</a>) {</td></tr>
<tr><th id="2356">2356</th><td>			<a class="tu ref fn" href="#vmx_event_waitexit_enable" title='vmx_event_waitexit_enable' data-use='c' data-ref="vmx_event_waitexit_enable" data-ref-filename="vmx_event_waitexit_enable">vmx_event_waitexit_enable</a>(<a class="local col5 ref" href="#235vcpu" title='vcpu' data-ref="235vcpu" data-ref-filename="235vcpu">vcpu</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2357">2357</th><td>		} <b>else</b> {</td></tr>
<tr><th id="2358">2358</th><td>			<a class="tu ref fn" href="#vmx_event_waitexit_disable" title='vmx_event_waitexit_disable' data-use='c' data-ref="vmx_event_waitexit_disable" data-ref-filename="vmx_event_waitexit_disable">vmx_event_waitexit_disable</a>(<a class="local col5 ref" href="#235vcpu" title='vcpu' data-ref="235vcpu" data-ref-filename="235vcpu">vcpu</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2359">2359</th><td>		}</td></tr>
<tr><th id="2360">2360</th><td>	}</td></tr>
<tr><th id="2361">2361</th><td></td></tr>
<tr><th id="2362">2362</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#254" title="typedef char __ctassert19[ (sizeof(cpudata-&gt;gfpu.xsh_fxsave) == sizeof(state-&gt;fpu)) ? 1 : -1] __attribute__((__unused__))" data-ref="_M/CTASSERT">CTASSERT</a>(<b>sizeof</b>(<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gfpu" title='vmx_cpudata::gfpu' data-use='m' data-ref="vmx_cpudata::gfpu" data-ref-filename="vmx_cpudata..gfpu">gfpu</a>.<a class="ref field" href="../../../arch/x86/include/cpu_extended_state.h.html#xsave_header::xsh_fxsave" title='xsave_header::xsh_fxsave' data-ref="xsave_header::xsh_fxsave" data-ref-filename="xsave_header..xsh_fxsave">xsh_fxsave</a>) == <b>sizeof</b>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::fpu" title='nvmm_x64_state::fpu' data-ref="nvmm_x64_state::fpu" data-ref-filename="nvmm_x64_state..fpu">fpu</a>));</td></tr>
<tr><th id="2363">2363</th><td>	<b>if</b> (<a class="local col2 ref" href="#242flags" title='flags' data-ref="242flags" data-ref-filename="242flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#216" title="0x40" data-ref="_M/NVMM_X64_STATE_FPU">NVMM_X64_STATE_FPU</a>) {</td></tr>
<tr><th id="2364">2364</th><td>		<a class="macro" href="../../../lib/libkern/libkern.h.html#380" title="__builtin_memcpy(cpudata-&gt;gfpu.xsh_fxsave, &amp;state-&gt;fpu, sizeof(state-&gt;fpu))" data-ref="_M/memcpy">memcpy</a>(<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gfpu" title='vmx_cpudata::gfpu' data-use='m' data-ref="vmx_cpudata::gfpu" data-ref-filename="vmx_cpudata..gfpu">gfpu</a>.<a class="ref field" href="../../../arch/x86/include/cpu_extended_state.h.html#xsave_header::xsh_fxsave" title='xsave_header::xsh_fxsave' data-ref="xsave_header::xsh_fxsave" data-ref-filename="xsave_header..xsh_fxsave">xsh_fxsave</a>, &amp;<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::fpu" title='nvmm_x64_state::fpu' data-ref="nvmm_x64_state::fpu" data-ref-filename="nvmm_x64_state..fpu">fpu</a>,</td></tr>
<tr><th id="2365">2365</th><td>		    <b>sizeof</b>(<a class="local col7 ref" href="#237state" title='state' data-ref="237state" data-ref-filename="237state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::fpu" title='nvmm_x64_state::fpu' data-ref="nvmm_x64_state::fpu" data-ref-filename="nvmm_x64_state..fpu">fpu</a>));</td></tr>
<tr><th id="2366">2366</th><td></td></tr>
<tr><th id="2367">2367</th><td>		<a class="local col9 ref" href="#239fpustate" title='fpustate' data-ref="239fpustate" data-ref-filename="239fpustate">fpustate</a> = (<b>struct</b> <a class="type" href="../../../arch/x86/include/cpu_extended_state.h.html#fxsave" title='fxsave' data-ref="fxsave" data-ref-filename="fxsave">fxsave</a> *)<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gfpu" title='vmx_cpudata::gfpu' data-use='m' data-ref="vmx_cpudata::gfpu" data-ref-filename="vmx_cpudata..gfpu">gfpu</a>.<a class="ref field" href="../../../arch/x86/include/cpu_extended_state.h.html#xsave_header::xsh_fxsave" title='xsave_header::xsh_fxsave' data-ref="xsave_header::xsh_fxsave" data-ref-filename="xsave_header..xsh_fxsave">xsh_fxsave</a>;</td></tr>
<tr><th id="2368">2368</th><td>		<a class="local col9 ref" href="#239fpustate" title='fpustate' data-ref="239fpustate" data-ref-filename="239fpustate">fpustate</a>-&gt;<a class="ref field" href="../../../arch/x86/include/cpu_extended_state.h.html#fxsave::fx_mxcsr_mask" title='fxsave::fx_mxcsr_mask' data-ref="fxsave::fx_mxcsr_mask" data-ref-filename="fxsave..fx_mxcsr_mask">fx_mxcsr_mask</a> &amp;= <a class="ref" href="../../../arch/x86/include/cpu.h.html#x86_fpu_mxcsr_mask" title='x86_fpu_mxcsr_mask' data-ref="x86_fpu_mxcsr_mask" data-ref-filename="x86_fpu_mxcsr_mask">x86_fpu_mxcsr_mask</a>;</td></tr>
<tr><th id="2369">2369</th><td>		<a class="local col9 ref" href="#239fpustate" title='fpustate' data-ref="239fpustate" data-ref-filename="239fpustate">fpustate</a>-&gt;<a class="ref field" href="../../../arch/x86/include/cpu_extended_state.h.html#fxsave::fx_mxcsr" title='fxsave::fx_mxcsr' data-ref="fxsave::fx_mxcsr" data-ref-filename="fxsave..fx_mxcsr">fx_mxcsr</a> &amp;= <a class="local col9 ref" href="#239fpustate" title='fpustate' data-ref="239fpustate" data-ref-filename="239fpustate">fpustate</a>-&gt;<a class="ref field" href="../../../arch/x86/include/cpu_extended_state.h.html#fxsave::fx_mxcsr_mask" title='fxsave::fx_mxcsr_mask' data-ref="fxsave::fx_mxcsr_mask" data-ref-filename="fxsave..fx_mxcsr_mask">fx_mxcsr_mask</a>;</td></tr>
<tr><th id="2370">2370</th><td></td></tr>
<tr><th id="2371">2371</th><td>		<b>if</b> (<a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a> != <var>0</var>) {</td></tr>
<tr><th id="2372">2372</th><td>			<i>/* Reset XSTATE_BV, to force a reload. */</i></td></tr>
<tr><th id="2373">2373</th><td>			<a class="local col8 ref" href="#238cpudata" title='cpudata' data-ref="238cpudata" data-ref-filename="238cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gfpu" title='vmx_cpudata::gfpu' data-use='m' data-ref="vmx_cpudata::gfpu" data-ref-filename="vmx_cpudata..gfpu">gfpu</a>.<a class="ref field" href="../../../arch/x86/include/cpu_extended_state.h.html#xsave_header::xsh_xstate_bv" title='xsave_header::xsh_xstate_bv' data-ref="xsave_header::xsh_xstate_bv" data-ref-filename="xsave_header..xsh_xstate_bv">xsh_xstate_bv</a> = <a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a>;</td></tr>
<tr><th id="2374">2374</th><td>		}</td></tr>
<tr><th id="2375">2375</th><td>	}</td></tr>
<tr><th id="2376">2376</th><td></td></tr>
<tr><th id="2377">2377</th><td>	<a class="tu ref fn" href="#vmx_vmcs_leave" title='vmx_vmcs_leave' data-use='c' data-ref="vmx_vmcs_leave" data-ref-filename="vmx_vmcs_leave">vmx_vmcs_leave</a>(<a class="local col5 ref" href="#235vcpu" title='vcpu' data-ref="235vcpu" data-ref-filename="235vcpu">vcpu</a>);</td></tr>
<tr><th id="2378">2378</th><td></td></tr>
<tr><th id="2379">2379</th><td>	<a class="local col6 ref" href="#236comm" title='comm' data-ref="236comm" data-ref-filename="236comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state_wanted" title='nvmm_comm_page::state_wanted' data-ref="nvmm_comm_page::state_wanted" data-ref-filename="nvmm_comm_page..state_wanted">state_wanted</a> = <var>0</var>;</td></tr>
<tr><th id="2380">2380</th><td>	<a class="local col6 ref" href="#236comm" title='comm' data-ref="236comm" data-ref-filename="236comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state_cached" title='nvmm_comm_page::state_cached' data-ref="nvmm_comm_page::state_cached" data-ref-filename="nvmm_comm_page..state_cached">state_cached</a> |= <a class="local col2 ref" href="#242flags" title='flags' data-ref="242flags" data-ref-filename="242flags">flags</a>;</td></tr>
<tr><th id="2381">2381</th><td>}</td></tr>
<tr><th id="2382">2382</th><td></td></tr>
<tr><th id="2383">2383</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2384">2384</th><td><dfn class="tu decl def fn" id="vmx_vcpu_getstate" title='vmx_vcpu_getstate' data-type='void vmx_vcpu_getstate(struct nvmm_cpu * vcpu)' data-ref="vmx_vcpu_getstate" data-ref-filename="vmx_vcpu_getstate">vmx_vcpu_getstate</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col3 decl" id="243vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="243vcpu" data-ref-filename="243vcpu">vcpu</dfn>)</td></tr>
<tr><th id="2385">2385</th><td>{</td></tr>
<tr><th id="2386">2386</th><td>	<b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_comm_page" title='nvmm_comm_page' data-ref="nvmm_comm_page" data-ref-filename="nvmm_comm_page">nvmm_comm_page</a> *<dfn class="local col4 decl" id="244comm" title='comm' data-type='struct nvmm_comm_page *' data-ref="244comm" data-ref-filename="244comm">comm</dfn> = <a class="local col3 ref" href="#243vcpu" title='vcpu' data-ref="243vcpu" data-ref-filename="243vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>;</td></tr>
<tr><th id="2387">2387</th><td>	<b>struct</b> <a class="type" href="nvmm_x86.h.html#nvmm_x64_state" title='nvmm_x64_state' data-ref="nvmm_x64_state" data-ref-filename="nvmm_x64_state">nvmm_x64_state</a> *<dfn class="local col5 decl" id="245state" title='state' data-type='struct nvmm_x64_state *' data-ref="245state" data-ref-filename="245state">state</dfn> = &amp;<a class="local col4 ref" href="#244comm" title='comm' data-ref="244comm" data-ref-filename="244comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state" title='nvmm_comm_page::state' data-ref="nvmm_comm_page::state" data-ref-filename="nvmm_comm_page..state">state</a>;</td></tr>
<tr><th id="2388">2388</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col6 decl" id="246cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</dfn> = <a class="local col3 ref" href="#243vcpu" title='vcpu' data-ref="243vcpu" data-ref-filename="243vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="2389">2389</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col7 decl" id="247intstate" title='intstate' data-type='uint64_t' data-ref="247intstate" data-ref-filename="247intstate">intstate</dfn>, <dfn class="local col8 decl" id="248flags" title='flags' data-type='uint64_t' data-ref="248flags" data-ref-filename="248flags">flags</dfn>;</td></tr>
<tr><th id="2390">2390</th><td></td></tr>
<tr><th id="2391">2391</th><td>	<a class="local col8 ref" href="#248flags" title='flags' data-ref="248flags" data-ref-filename="248flags">flags</a> = <a class="local col4 ref" href="#244comm" title='comm' data-ref="244comm" data-ref-filename="244comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state_wanted" title='nvmm_comm_page::state_wanted' data-ref="nvmm_comm_page::state_wanted" data-ref-filename="nvmm_comm_page..state_wanted">state_wanted</a>;</td></tr>
<tr><th id="2392">2392</th><td></td></tr>
<tr><th id="2393">2393</th><td>	<a class="tu ref fn" href="#vmx_vmcs_enter" title='vmx_vmcs_enter' data-use='c' data-ref="vmx_vmcs_enter" data-ref-filename="vmx_vmcs_enter">vmx_vmcs_enter</a>(<a class="local col3 ref" href="#243vcpu" title='vcpu' data-ref="243vcpu" data-ref-filename="243vcpu">vcpu</a>);</td></tr>
<tr><th id="2394">2394</th><td></td></tr>
<tr><th id="2395">2395</th><td>	<b>if</b> (<a class="local col8 ref" href="#248flags" title='flags' data-ref="248flags" data-ref-filename="248flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#210" title="0x01" data-ref="_M/NVMM_X64_STATE_SEGS">NVMM_X64_STATE_SEGS</a>) {</td></tr>
<tr><th id="2396">2396</th><td>		<a class="tu ref fn" href="#vmx_vcpu_getstate_seg" title='vmx_vcpu_getstate_seg' data-use='c' data-ref="vmx_vcpu_getstate_seg" data-ref-filename="vmx_vcpu_getstate_seg">vmx_vcpu_getstate_seg</a>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#107" title="1" data-ref="_M/NVMM_X64_SEG_CS">NVMM_X64_SEG_CS</a>);</td></tr>
<tr><th id="2397">2397</th><td>		<a class="tu ref fn" href="#vmx_vcpu_getstate_seg" title='vmx_vcpu_getstate_seg' data-use='c' data-ref="vmx_vcpu_getstate_seg" data-ref-filename="vmx_vcpu_getstate_seg">vmx_vcpu_getstate_seg</a>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#109" title="3" data-ref="_M/NVMM_X64_SEG_DS">NVMM_X64_SEG_DS</a>);</td></tr>
<tr><th id="2398">2398</th><td>		<a class="tu ref fn" href="#vmx_vcpu_getstate_seg" title='vmx_vcpu_getstate_seg' data-use='c' data-ref="vmx_vcpu_getstate_seg" data-ref-filename="vmx_vcpu_getstate_seg">vmx_vcpu_getstate_seg</a>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#106" title="0" data-ref="_M/NVMM_X64_SEG_ES">NVMM_X64_SEG_ES</a>);</td></tr>
<tr><th id="2399">2399</th><td>		<a class="tu ref fn" href="#vmx_vcpu_getstate_seg" title='vmx_vcpu_getstate_seg' data-use='c' data-ref="vmx_vcpu_getstate_seg" data-ref-filename="vmx_vcpu_getstate_seg">vmx_vcpu_getstate_seg</a>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#110" title="4" data-ref="_M/NVMM_X64_SEG_FS">NVMM_X64_SEG_FS</a>);</td></tr>
<tr><th id="2400">2400</th><td>		<a class="tu ref fn" href="#vmx_vcpu_getstate_seg" title='vmx_vcpu_getstate_seg' data-use='c' data-ref="vmx_vcpu_getstate_seg" data-ref-filename="vmx_vcpu_getstate_seg">vmx_vcpu_getstate_seg</a>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#111" title="5" data-ref="_M/NVMM_X64_SEG_GS">NVMM_X64_SEG_GS</a>);</td></tr>
<tr><th id="2401">2401</th><td>		<a class="tu ref fn" href="#vmx_vcpu_getstate_seg" title='vmx_vcpu_getstate_seg' data-use='c' data-ref="vmx_vcpu_getstate_seg" data-ref-filename="vmx_vcpu_getstate_seg">vmx_vcpu_getstate_seg</a>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#108" title="2" data-ref="_M/NVMM_X64_SEG_SS">NVMM_X64_SEG_SS</a>);</td></tr>
<tr><th id="2402">2402</th><td>		<a class="tu ref fn" href="#vmx_vcpu_getstate_seg" title='vmx_vcpu_getstate_seg' data-use='c' data-ref="vmx_vcpu_getstate_seg" data-ref-filename="vmx_vcpu_getstate_seg">vmx_vcpu_getstate_seg</a>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#112" title="6" data-ref="_M/NVMM_X64_SEG_GDT">NVMM_X64_SEG_GDT</a>);</td></tr>
<tr><th id="2403">2403</th><td>		<a class="tu ref fn" href="#vmx_vcpu_getstate_seg" title='vmx_vcpu_getstate_seg' data-use='c' data-ref="vmx_vcpu_getstate_seg" data-ref-filename="vmx_vcpu_getstate_seg">vmx_vcpu_getstate_seg</a>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#113" title="7" data-ref="_M/NVMM_X64_SEG_IDT">NVMM_X64_SEG_IDT</a>);</td></tr>
<tr><th id="2404">2404</th><td>		<a class="tu ref fn" href="#vmx_vcpu_getstate_seg" title='vmx_vcpu_getstate_seg' data-use='c' data-ref="vmx_vcpu_getstate_seg" data-ref-filename="vmx_vcpu_getstate_seg">vmx_vcpu_getstate_seg</a>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#114" title="8" data-ref="_M/NVMM_X64_SEG_LDT">NVMM_X64_SEG_LDT</a>);</td></tr>
<tr><th id="2405">2405</th><td>		<a class="tu ref fn" href="#vmx_vcpu_getstate_seg" title='vmx_vcpu_getstate_seg' data-use='c' data-ref="vmx_vcpu_getstate_seg" data-ref-filename="vmx_vcpu_getstate_seg">vmx_vcpu_getstate_seg</a>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::segs" title='nvmm_x64_state::segs' data-ref="nvmm_x64_state::segs" data-ref-filename="nvmm_x64_state..segs">segs</a>, <a class="macro" href="nvmm_x86.h.html#115" title="9" data-ref="_M/NVMM_X64_SEG_TR">NVMM_X64_SEG_TR</a>);</td></tr>
<tr><th id="2406">2406</th><td>	}</td></tr>
<tr><th id="2407">2407</th><td></td></tr>
<tr><th id="2408">2408</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#254" title="typedef char __ctassert21[ (sizeof(cpudata-&gt;gprs) == sizeof(state-&gt;gprs)) ? 1 : -1] __attribute__((__unused__))" data-ref="_M/CTASSERT">CTASSERT</a>(<b>sizeof</b>(<a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>) == <b>sizeof</b>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::gprs" title='nvmm_x64_state::gprs' data-ref="nvmm_x64_state::gprs" data-ref-filename="nvmm_x64_state..gprs">gprs</a>));</td></tr>
<tr><th id="2409">2409</th><td>	<b>if</b> (<a class="local col8 ref" href="#248flags" title='flags' data-ref="248flags" data-ref-filename="248flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#211" title="0x02" data-ref="_M/NVMM_X64_STATE_GPRS">NVMM_X64_STATE_GPRS</a>) {</td></tr>
<tr><th id="2410">2410</th><td>		<a class="macro" href="../../../lib/libkern/libkern.h.html#380" title="__builtin_memcpy(state-&gt;gprs, cpudata-&gt;gprs, sizeof(state-&gt;gprs))" data-ref="_M/memcpy">memcpy</a>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::gprs" title='nvmm_x64_state::gprs' data-ref="nvmm_x64_state::gprs" data-ref-filename="nvmm_x64_state..gprs">gprs</a>, <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gprs" title='vmx_cpudata::gprs' data-use='r' data-ref="vmx_cpudata::gprs" data-ref-filename="vmx_cpudata..gprs">gprs</a>, <b>sizeof</b>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::gprs" title='nvmm_x64_state::gprs' data-ref="nvmm_x64_state::gprs" data-ref-filename="nvmm_x64_state..gprs">gprs</a>));</td></tr>
<tr><th id="2411">2411</th><td></td></tr>
<tr><th id="2412">2412</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::gprs" title='nvmm_x64_state::gprs' data-ref="nvmm_x64_state::gprs" data-ref-filename="nvmm_x64_state..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#135" title="16" data-ref="_M/NVMM_X64_GPR_RIP">NVMM_X64_GPR_RIP</a>] = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#472" title="0x0000681E" data-ref="_M/VMCS_GUEST_RIP">VMCS_GUEST_RIP</a>);</td></tr>
<tr><th id="2413">2413</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::gprs" title='nvmm_x64_state::gprs' data-ref="nvmm_x64_state::gprs" data-ref-filename="nvmm_x64_state..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#123" title="4" data-ref="_M/NVMM_X64_GPR_RSP">NVMM_X64_GPR_RSP</a>] = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#471" title="0x0000681C" data-ref="_M/VMCS_GUEST_RSP">VMCS_GUEST_RSP</a>);</td></tr>
<tr><th id="2414">2414</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::gprs" title='nvmm_x64_state::gprs' data-ref="nvmm_x64_state::gprs" data-ref-filename="nvmm_x64_state..gprs">gprs</a>[<a class="macro" href="nvmm_x86.h.html#136" title="17" data-ref="_M/NVMM_X64_GPR_RFLAGS">NVMM_X64_GPR_RFLAGS</a>] = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#473" title="0x00006820" data-ref="_M/VMCS_GUEST_RFLAGS">VMCS_GUEST_RFLAGS</a>);</td></tr>
<tr><th id="2415">2415</th><td>	}</td></tr>
<tr><th id="2416">2416</th><td></td></tr>
<tr><th id="2417">2417</th><td>	<b>if</b> (<a class="local col8 ref" href="#248flags" title='flags' data-ref="248flags" data-ref-filename="248flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#212" title="0x04" data-ref="_M/NVMM_X64_STATE_CRS">NVMM_X64_STATE_CRS</a>) {</td></tr>
<tr><th id="2418">2418</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#140" title="0" data-ref="_M/NVMM_X64_CR_CR0">NVMM_X64_CR_CR0</a>] = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#457" title="0x00006800" data-ref="_M/VMCS_GUEST_CR0">VMCS_GUEST_CR0</a>);</td></tr>
<tr><th id="2419">2419</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#141" title="1" data-ref="_M/NVMM_X64_CR_CR2">NVMM_X64_CR_CR2</a>] = <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gcr2" title='vmx_cpudata::gcr2' data-use='r' data-ref="vmx_cpudata::gcr2" data-ref-filename="vmx_cpudata..gcr2">gcr2</a>;</td></tr>
<tr><th id="2420">2420</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#142" title="2" data-ref="_M/NVMM_X64_CR_CR3">NVMM_X64_CR_CR3</a>] = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#458" title="0x00006802" data-ref="_M/VMCS_GUEST_CR3">VMCS_GUEST_CR3</a>);</td></tr>
<tr><th id="2421">2421</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#143" title="3" data-ref="_M/NVMM_X64_CR_CR4">NVMM_X64_CR_CR4</a>] = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#459" title="0x00006804" data-ref="_M/VMCS_GUEST_CR4">VMCS_GUEST_CR4</a>);</td></tr>
<tr><th id="2422">2422</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#144" title="4" data-ref="_M/NVMM_X64_CR_CR8">NVMM_X64_CR_CR8</a>] = <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gcr8" title='vmx_cpudata::gcr8' data-use='r' data-ref="vmx_cpudata::gcr8" data-ref-filename="vmx_cpudata..gcr8">gcr8</a>;</td></tr>
<tr><th id="2423">2423</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#145" title="5" data-ref="_M/NVMM_X64_CR_XCR0">NVMM_X64_CR_XCR0</a>] = <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gxcr0" title='vmx_cpudata::gxcr0' data-use='r' data-ref="vmx_cpudata::gxcr0" data-ref-filename="vmx_cpudata..gxcr0">gxcr0</a>;</td></tr>
<tr><th id="2424">2424</th><td></td></tr>
<tr><th id="2425">2425</th><td>		<i>/* Hide VMXE. */</i></td></tr>
<tr><th id="2426">2426</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::crs" title='nvmm_x64_state::crs' data-ref="nvmm_x64_state::crs" data-ref-filename="nvmm_x64_state..crs">crs</a>[<a class="macro" href="nvmm_x86.h.html#143" title="3" data-ref="_M/NVMM_X64_CR_CR4">NVMM_X64_CR_CR4</a>] &amp;= ~<a class="macro" href="../../../arch/x86/include/specialreg.h.html#112" title="0x00002000" data-ref="_M/CR4_VMXE">CR4_VMXE</a>;</td></tr>
<tr><th id="2427">2427</th><td>	}</td></tr>
<tr><th id="2428">2428</th><td></td></tr>
<tr><th id="2429">2429</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#254" title="typedef char __ctassert23[ (sizeof(cpudata-&gt;drs) == sizeof(state-&gt;drs)) ? 1 : -1] __attribute__((__unused__))" data-ref="_M/CTASSERT">CTASSERT</a>(<b>sizeof</b>(<a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='r' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>) == <b>sizeof</b>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::drs" title='nvmm_x64_state::drs' data-ref="nvmm_x64_state::drs" data-ref-filename="nvmm_x64_state..drs">drs</a>));</td></tr>
<tr><th id="2430">2430</th><td>	<b>if</b> (<a class="local col8 ref" href="#248flags" title='flags' data-ref="248flags" data-ref-filename="248flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#213" title="0x08" data-ref="_M/NVMM_X64_STATE_DRS">NVMM_X64_STATE_DRS</a>) {</td></tr>
<tr><th id="2431">2431</th><td>		<a class="macro" href="../../../lib/libkern/libkern.h.html#380" title="__builtin_memcpy(state-&gt;drs, cpudata-&gt;drs, sizeof(state-&gt;drs))" data-ref="_M/memcpy">memcpy</a>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::drs" title='nvmm_x64_state::drs' data-ref="nvmm_x64_state::drs" data-ref-filename="nvmm_x64_state..drs">drs</a>, <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::drs" title='vmx_cpudata::drs' data-use='r' data-ref="vmx_cpudata::drs" data-ref-filename="vmx_cpudata..drs">drs</a>, <b>sizeof</b>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::drs" title='nvmm_x64_state::drs' data-ref="nvmm_x64_state::drs" data-ref-filename="nvmm_x64_state..drs">drs</a>));</td></tr>
<tr><th id="2432">2432</th><td></td></tr>
<tr><th id="2433">2433</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::drs" title='nvmm_x64_state::drs' data-ref="nvmm_x64_state::drs" data-ref-filename="nvmm_x64_state..drs">drs</a>[<a class="macro" href="nvmm_x86.h.html#154" title="5" data-ref="_M/NVMM_X64_DR_DR7">NVMM_X64_DR_DR7</a>] = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#470" title="0x0000681A" data-ref="_M/VMCS_GUEST_DR7">VMCS_GUEST_DR7</a>);</td></tr>
<tr><th id="2434">2434</th><td>	}</td></tr>
<tr><th id="2435">2435</th><td></td></tr>
<tr><th id="2436">2436</th><td>	<b>if</b> (<a class="local col8 ref" href="#248flags" title='flags' data-ref="248flags" data-ref-filename="248flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#214" title="0x10" data-ref="_M/NVMM_X64_STATE_MSRS">NVMM_X64_STATE_MSRS</a>) {</td></tr>
<tr><th id="2437">2437</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#159" title="1" data-ref="_M/NVMM_X64_MSR_STAR">NVMM_X64_MSR_STAR</a>] =</td></tr>
<tr><th id="2438">2438</th><td>		    <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-use='r' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</a>[<a class="macro" href="#560" title="0" data-ref="_M/VMX_MSRLIST_STAR">VMX_MSRLIST_STAR</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='r' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a>;</td></tr>
<tr><th id="2439">2439</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#160" title="2" data-ref="_M/NVMM_X64_MSR_LSTAR">NVMM_X64_MSR_LSTAR</a>] =</td></tr>
<tr><th id="2440">2440</th><td>		    <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-use='r' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</a>[<a class="macro" href="#561" title="1" data-ref="_M/VMX_MSRLIST_LSTAR">VMX_MSRLIST_LSTAR</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='r' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a>;</td></tr>
<tr><th id="2441">2441</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#161" title="3" data-ref="_M/NVMM_X64_MSR_CSTAR">NVMM_X64_MSR_CSTAR</a>] =</td></tr>
<tr><th id="2442">2442</th><td>		    <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-use='r' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</a>[<a class="macro" href="#562" title="2" data-ref="_M/VMX_MSRLIST_CSTAR">VMX_MSRLIST_CSTAR</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='r' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a>;</td></tr>
<tr><th id="2443">2443</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#162" title="4" data-ref="_M/NVMM_X64_MSR_SFMASK">NVMM_X64_MSR_SFMASK</a>] =</td></tr>
<tr><th id="2444">2444</th><td>		    <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-use='r' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</a>[<a class="macro" href="#563" title="3" data-ref="_M/VMX_MSRLIST_SFMASK">VMX_MSRLIST_SFMASK</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='r' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a>;</td></tr>
<tr><th id="2445">2445</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#163" title="5" data-ref="_M/NVMM_X64_MSR_KERNELGSBASE">NVMM_X64_MSR_KERNELGSBASE</a>] =</td></tr>
<tr><th id="2446">2446</th><td>		    <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-use='r' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</a>[<a class="macro" href="#564" title="4" data-ref="_M/VMX_MSRLIST_KERNELGSBASE">VMX_MSRLIST_KERNELGSBASE</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='r' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a>;</td></tr>
<tr><th id="2447">2447</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#158" title="0" data-ref="_M/NVMM_X64_MSR_EFER">NVMM_X64_MSR_EFER</a>] =</td></tr>
<tr><th id="2448">2448</th><td>		    <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#288" title="0x00002806" data-ref="_M/VMCS_GUEST_IA32_EFER">VMCS_GUEST_IA32_EFER</a>);</td></tr>
<tr><th id="2449">2449</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#167" title="9" data-ref="_M/NVMM_X64_MSR_PAT">NVMM_X64_MSR_PAT</a>] =</td></tr>
<tr><th id="2450">2450</th><td>		    <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#287" title="0x00002804" data-ref="_M/VMCS_GUEST_IA32_PAT">VMCS_GUEST_IA32_PAT</a>);</td></tr>
<tr><th id="2451">2451</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#164" title="6" data-ref="_M/NVMM_X64_MSR_SYSENTER_CS">NVMM_X64_MSR_SYSENTER_CS</a>] =</td></tr>
<tr><th id="2452">2452</th><td>		    <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#436" title="0x0000482A" data-ref="_M/VMCS_GUEST_IA32_SYSENTER_CS">VMCS_GUEST_IA32_SYSENTER_CS</a>);</td></tr>
<tr><th id="2453">2453</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#165" title="7" data-ref="_M/NVMM_X64_MSR_SYSENTER_ESP">NVMM_X64_MSR_SYSENTER_ESP</a>] =</td></tr>
<tr><th id="2454">2454</th><td>		    <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#475" title="0x00006824" data-ref="_M/VMCS_GUEST_IA32_SYSENTER_ESP">VMCS_GUEST_IA32_SYSENTER_ESP</a>);</td></tr>
<tr><th id="2455">2455</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#166" title="8" data-ref="_M/NVMM_X64_MSR_SYSENTER_EIP">NVMM_X64_MSR_SYSENTER_EIP</a>] =</td></tr>
<tr><th id="2456">2456</th><td>		    <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#476" title="0x00006826" data-ref="_M/VMCS_GUEST_IA32_SYSENTER_EIP">VMCS_GUEST_IA32_SYSENTER_EIP</a>);</td></tr>
<tr><th id="2457">2457</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::msrs" title='nvmm_x64_state::msrs' data-ref="nvmm_x64_state::msrs" data-ref-filename="nvmm_x64_state..msrs">msrs</a>[<a class="macro" href="nvmm_x86.h.html#168" title="10" data-ref="_M/NVMM_X64_MSR_TSC">NVMM_X64_MSR_TSC</a>] = <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gtsc" title='vmx_cpudata::gtsc' data-use='r' data-ref="vmx_cpudata::gtsc" data-ref-filename="vmx_cpudata..gtsc">gtsc</a>;</td></tr>
<tr><th id="2458">2458</th><td>	}</td></tr>
<tr><th id="2459">2459</th><td></td></tr>
<tr><th id="2460">2460</th><td>	<b>if</b> (<a class="local col8 ref" href="#248flags" title='flags' data-ref="248flags" data-ref-filename="248flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#215" title="0x20" data-ref="_M/NVMM_X64_STATE_INTR">NVMM_X64_STATE_INTR</a>) {</td></tr>
<tr><th id="2461">2461</th><td>		<a class="local col7 ref" href="#247intstate" title='intstate' data-ref="247intstate" data-ref-filename="247intstate">intstate</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#428" title="0x00004824" data-ref="_M/VMCS_GUEST_INTERRUPTIBILITY">VMCS_GUEST_INTERRUPTIBILITY</a>);</td></tr>
<tr><th id="2462">2462</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::intr" title='nvmm_x64_state::intr' data-ref="nvmm_x64_state::intr" data-ref-filename="nvmm_x64_state..intr">intr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_intr::int_shadow" title='nvmm_x64_state_intr::int_shadow' data-ref="nvmm_x64_state_intr::int_shadow" data-ref-filename="nvmm_x64_state_intr..int_shadow">int_shadow</a> =</td></tr>
<tr><th id="2463">2463</th><td>		    (<a class="local col7 ref" href="#247intstate" title='intstate' data-ref="247intstate" data-ref-filename="247intstate">intstate</a> &amp; (<a class="macro" href="#429" title="(((uintmax_t)(0) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((0) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/INT_STATE_STI">INT_STATE_STI</a>|<a class="macro" href="#430" title="(((uintmax_t)(1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((1) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/INT_STATE_MOVSS">INT_STATE_MOVSS</a>)) != <var>0</var>;</td></tr>
<tr><th id="2464">2464</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::intr" title='nvmm_x64_state::intr' data-ref="nvmm_x64_state::intr" data-ref-filename="nvmm_x64_state..intr">intr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_intr::int_window_exiting" title='nvmm_x64_state_intr::int_window_exiting' data-ref="nvmm_x64_state_intr::int_window_exiting" data-ref-filename="nvmm_x64_state_intr..int_window_exiting">int_window_exiting</a> = <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::int_window_exit" title='vmx_cpudata::int_window_exit' data-use='r' data-ref="vmx_cpudata::int_window_exit" data-ref-filename="vmx_cpudata..int_window_exit">int_window_exit</a>;</td></tr>
<tr><th id="2465">2465</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::intr" title='nvmm_x64_state::intr' data-ref="nvmm_x64_state::intr" data-ref-filename="nvmm_x64_state..intr">intr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_intr::nmi_window_exiting" title='nvmm_x64_state_intr::nmi_window_exiting' data-ref="nvmm_x64_state_intr::nmi_window_exiting" data-ref-filename="nvmm_x64_state_intr..nmi_window_exiting">nmi_window_exiting</a> = <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::nmi_window_exit" title='vmx_cpudata::nmi_window_exit' data-use='r' data-ref="vmx_cpudata::nmi_window_exit" data-ref-filename="vmx_cpudata..nmi_window_exit">nmi_window_exit</a>;</td></tr>
<tr><th id="2466">2466</th><td>		<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::intr" title='nvmm_x64_state::intr' data-ref="nvmm_x64_state::intr" data-ref-filename="nvmm_x64_state..intr">intr</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state_intr::evt_pending" title='nvmm_x64_state_intr::evt_pending' data-ref="nvmm_x64_state_intr::evt_pending" data-ref-filename="nvmm_x64_state_intr..evt_pending">evt_pending</a> = <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::evt_pending" title='vmx_cpudata::evt_pending' data-use='r' data-ref="vmx_cpudata::evt_pending" data-ref-filename="vmx_cpudata..evt_pending">evt_pending</a>;</td></tr>
<tr><th id="2467">2467</th><td>	}</td></tr>
<tr><th id="2468">2468</th><td></td></tr>
<tr><th id="2469">2469</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#254" title="typedef char __ctassert25[ (sizeof(cpudata-&gt;gfpu.xsh_fxsave) == sizeof(state-&gt;fpu)) ? 1 : -1] __attribute__((__unused__))" data-ref="_M/CTASSERT">CTASSERT</a>(<b>sizeof</b>(<a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gfpu" title='vmx_cpudata::gfpu' data-use='m' data-ref="vmx_cpudata::gfpu" data-ref-filename="vmx_cpudata..gfpu">gfpu</a>.<a class="ref field" href="../../../arch/x86/include/cpu_extended_state.h.html#xsave_header::xsh_fxsave" title='xsave_header::xsh_fxsave' data-ref="xsave_header::xsh_fxsave" data-ref-filename="xsave_header..xsh_fxsave">xsh_fxsave</a>) == <b>sizeof</b>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::fpu" title='nvmm_x64_state::fpu' data-ref="nvmm_x64_state::fpu" data-ref-filename="nvmm_x64_state..fpu">fpu</a>));</td></tr>
<tr><th id="2470">2470</th><td>	<b>if</b> (<a class="local col8 ref" href="#248flags" title='flags' data-ref="248flags" data-ref-filename="248flags">flags</a> &amp; <a class="macro" href="nvmm_x86.h.html#216" title="0x40" data-ref="_M/NVMM_X64_STATE_FPU">NVMM_X64_STATE_FPU</a>) {</td></tr>
<tr><th id="2471">2471</th><td>		<a class="macro" href="../../../lib/libkern/libkern.h.html#380" title="__builtin_memcpy(&amp;state-&gt;fpu, cpudata-&gt;gfpu.xsh_fxsave, sizeof(state-&gt;fpu))" data-ref="_M/memcpy">memcpy</a>(&amp;<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::fpu" title='nvmm_x64_state::fpu' data-ref="nvmm_x64_state::fpu" data-ref-filename="nvmm_x64_state..fpu">fpu</a>, <a class="local col6 ref" href="#246cpudata" title='cpudata' data-ref="246cpudata" data-ref-filename="246cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gfpu" title='vmx_cpudata::gfpu' data-use='m' data-ref="vmx_cpudata::gfpu" data-ref-filename="vmx_cpudata..gfpu">gfpu</a>.<a class="ref field" href="../../../arch/x86/include/cpu_extended_state.h.html#xsave_header::xsh_fxsave" title='xsave_header::xsh_fxsave' data-ref="xsave_header::xsh_fxsave" data-ref-filename="xsave_header..xsh_fxsave">xsh_fxsave</a>,</td></tr>
<tr><th id="2472">2472</th><td>		    <b>sizeof</b>(<a class="local col5 ref" href="#245state" title='state' data-ref="245state" data-ref-filename="245state">state</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_x64_state::fpu" title='nvmm_x64_state::fpu' data-ref="nvmm_x64_state::fpu" data-ref-filename="nvmm_x64_state..fpu">fpu</a>));</td></tr>
<tr><th id="2473">2473</th><td>	}</td></tr>
<tr><th id="2474">2474</th><td></td></tr>
<tr><th id="2475">2475</th><td>	<a class="tu ref fn" href="#vmx_vmcs_leave" title='vmx_vmcs_leave' data-use='c' data-ref="vmx_vmcs_leave" data-ref-filename="vmx_vmcs_leave">vmx_vmcs_leave</a>(<a class="local col3 ref" href="#243vcpu" title='vcpu' data-ref="243vcpu" data-ref-filename="243vcpu">vcpu</a>);</td></tr>
<tr><th id="2476">2476</th><td></td></tr>
<tr><th id="2477">2477</th><td>	<a class="local col4 ref" href="#244comm" title='comm' data-ref="244comm" data-ref-filename="244comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state_wanted" title='nvmm_comm_page::state_wanted' data-ref="nvmm_comm_page::state_wanted" data-ref-filename="nvmm_comm_page..state_wanted">state_wanted</a> = <var>0</var>;</td></tr>
<tr><th id="2478">2478</th><td>	<a class="local col4 ref" href="#244comm" title='comm' data-ref="244comm" data-ref-filename="244comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state_cached" title='nvmm_comm_page::state_cached' data-ref="nvmm_comm_page::state_cached" data-ref-filename="nvmm_comm_page..state_cached">state_cached</a> |= <a class="local col8 ref" href="#248flags" title='flags' data-ref="248flags" data-ref-filename="248flags">flags</a>;</td></tr>
<tr><th id="2479">2479</th><td>}</td></tr>
<tr><th id="2480">2480</th><td></td></tr>
<tr><th id="2481">2481</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2482">2482</th><td><dfn class="tu decl def fn" id="vmx_vcpu_state_provide" title='vmx_vcpu_state_provide' data-type='void vmx_vcpu_state_provide(struct nvmm_cpu * vcpu, uint64_t flags)' data-ref="vmx_vcpu_state_provide" data-ref-filename="vmx_vcpu_state_provide">vmx_vcpu_state_provide</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col9 decl" id="249vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="249vcpu" data-ref-filename="249vcpu">vcpu</dfn>, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col0 decl" id="250flags" title='flags' data-type='uint64_t' data-ref="250flags" data-ref-filename="250flags">flags</dfn>)</td></tr>
<tr><th id="2483">2483</th><td>{</td></tr>
<tr><th id="2484">2484</th><td>	<a class="local col9 ref" href="#249vcpu" title='vcpu' data-ref="249vcpu" data-ref-filename="249vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state_wanted" title='nvmm_comm_page::state_wanted' data-ref="nvmm_comm_page::state_wanted" data-ref-filename="nvmm_comm_page..state_wanted">state_wanted</a> = <a class="local col0 ref" href="#250flags" title='flags' data-ref="250flags" data-ref-filename="250flags">flags</a>;</td></tr>
<tr><th id="2485">2485</th><td>	<a class="tu ref fn" href="#vmx_vcpu_getstate" title='vmx_vcpu_getstate' data-use='c' data-ref="vmx_vcpu_getstate" data-ref-filename="vmx_vcpu_getstate">vmx_vcpu_getstate</a>(<a class="local col9 ref" href="#249vcpu" title='vcpu' data-ref="249vcpu" data-ref-filename="249vcpu">vcpu</a>);</td></tr>
<tr><th id="2486">2486</th><td>}</td></tr>
<tr><th id="2487">2487</th><td></td></tr>
<tr><th id="2488">2488</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2489">2489</th><td><dfn class="tu decl def fn" id="vmx_vcpu_state_commit" title='vmx_vcpu_state_commit' data-type='void vmx_vcpu_state_commit(struct nvmm_cpu * vcpu)' data-ref="vmx_vcpu_state_commit" data-ref-filename="vmx_vcpu_state_commit">vmx_vcpu_state_commit</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col1 decl" id="251vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="251vcpu" data-ref-filename="251vcpu">vcpu</dfn>)</td></tr>
<tr><th id="2490">2490</th><td>{</td></tr>
<tr><th id="2491">2491</th><td>	<a class="local col1 ref" href="#251vcpu" title='vcpu' data-ref="251vcpu" data-ref-filename="251vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state_wanted" title='nvmm_comm_page::state_wanted' data-ref="nvmm_comm_page::state_wanted" data-ref-filename="nvmm_comm_page..state_wanted">state_wanted</a> = <a class="local col1 ref" href="#251vcpu" title='vcpu' data-ref="251vcpu" data-ref-filename="251vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state_commit" title='nvmm_comm_page::state_commit' data-ref="nvmm_comm_page::state_commit" data-ref-filename="nvmm_comm_page..state_commit">state_commit</a>;</td></tr>
<tr><th id="2492">2492</th><td>	<a class="local col1 ref" href="#251vcpu" title='vcpu' data-ref="251vcpu" data-ref-filename="251vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state_commit" title='nvmm_comm_page::state_commit' data-ref="nvmm_comm_page::state_commit" data-ref-filename="nvmm_comm_page..state_commit">state_commit</a> = <var>0</var>;</td></tr>
<tr><th id="2493">2493</th><td>	<a class="tu ref fn" href="#vmx_vcpu_setstate" title='vmx_vcpu_setstate' data-use='c' data-ref="vmx_vcpu_setstate" data-ref-filename="vmx_vcpu_setstate">vmx_vcpu_setstate</a>(<a class="local col1 ref" href="#251vcpu" title='vcpu' data-ref="251vcpu" data-ref-filename="251vcpu">vcpu</a>);</td></tr>
<tr><th id="2494">2494</th><td>}</td></tr>
<tr><th id="2495">2495</th><td></td></tr>
<tr><th id="2496">2496</th><td><i  data-doc="vmx_asid_alloc">/* -------------------------------------------------------------------------- */</i></td></tr>
<tr><th id="2497">2497</th><td></td></tr>
<tr><th id="2498">2498</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2499">2499</th><td><dfn class="tu decl def fn" id="vmx_asid_alloc" title='vmx_asid_alloc' data-type='void vmx_asid_alloc(struct nvmm_cpu * vcpu)' data-ref="vmx_asid_alloc" data-ref-filename="vmx_asid_alloc">vmx_asid_alloc</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col2 decl" id="252vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="252vcpu" data-ref-filename="252vcpu">vcpu</dfn>)</td></tr>
<tr><th id="2500">2500</th><td>{</td></tr>
<tr><th id="2501">2501</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col3 decl" id="253cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="253cpudata" data-ref-filename="253cpudata">cpudata</dfn> = <a class="local col2 ref" href="#252vcpu" title='vcpu' data-ref="252vcpu" data-ref-filename="252vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="2502">2502</th><td>	<a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col4 decl" id="254i" title='i' data-type='size_t' data-ref="254i" data-ref-filename="254i">i</dfn>, <dfn class="local col5 decl" id="255oct" title='oct' data-type='size_t' data-ref="255oct" data-ref-filename="255oct">oct</dfn>, <dfn class="local col6 decl" id="256bit" title='bit' data-type='size_t' data-ref="256bit" data-ref-filename="256bit">bit</dfn>;</td></tr>
<tr><th id="2503">2503</th><td></td></tr>
<tr><th id="2504">2504</th><td>	<a class="ref fn" href="../../../sys/mutex.h.html#mutex_enter" title='mutex_enter' data-ref="mutex_enter" data-ref-filename="mutex_enter">mutex_enter</a>(&amp;<a class="tu ref" href="#vmx_asidlock" title='vmx_asidlock' data-use='a' data-ref="vmx_asidlock" data-ref-filename="vmx_asidlock">vmx_asidlock</a>);</td></tr>
<tr><th id="2505">2505</th><td></td></tr>
<tr><th id="2506">2506</th><td>	<b>for</b> (<a class="local col4 ref" href="#254i" title='i' data-ref="254i" data-ref-filename="254i">i</a> = <var>0</var>; <a class="local col4 ref" href="#254i" title='i' data-ref="254i" data-ref-filename="254i">i</a> &lt; <a class="tu ref" href="#vmx_maxasid" title='vmx_maxasid' data-use='r' data-ref="vmx_maxasid" data-ref-filename="vmx_maxasid">vmx_maxasid</a>; <a class="local col4 ref" href="#254i" title='i' data-ref="254i" data-ref-filename="254i">i</a>++) {</td></tr>
<tr><th id="2507">2507</th><td>		<a class="local col5 ref" href="#255oct" title='oct' data-ref="255oct" data-ref-filename="255oct">oct</a> = <a class="local col4 ref" href="#254i" title='i' data-ref="254i" data-ref-filename="254i">i</a> / <var>8</var>;</td></tr>
<tr><th id="2508">2508</th><td>		<a class="local col6 ref" href="#256bit" title='bit' data-ref="256bit" data-ref-filename="256bit">bit</a> = <a class="local col4 ref" href="#254i" title='i' data-ref="254i" data-ref-filename="254i">i</a> % <var>8</var>;</td></tr>
<tr><th id="2509">2509</th><td></td></tr>
<tr><th id="2510">2510</th><td>		<b>if</b> (<a class="tu ref" href="#vmx_asidmap" title='vmx_asidmap' data-use='r' data-ref="vmx_asidmap" data-ref-filename="vmx_asidmap">vmx_asidmap</a>[<a class="local col5 ref" href="#255oct" title='oct' data-ref="255oct" data-ref-filename="255oct">oct</a>] &amp; <a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(bit) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((bit) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col6 ref" href="#256bit" title='bit' data-ref="256bit" data-ref-filename="256bit">bit</a>)) {</td></tr>
<tr><th id="2511">2511</th><td>			<b>continue</b>;</td></tr>
<tr><th id="2512">2512</th><td>		}</td></tr>
<tr><th id="2513">2513</th><td></td></tr>
<tr><th id="2514">2514</th><td>		<a class="local col3 ref" href="#253cpudata" title='cpudata' data-ref="253cpudata" data-ref-filename="253cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::asid" title='vmx_cpudata::asid' data-use='w' data-ref="vmx_cpudata::asid" data-ref-filename="vmx_cpudata..asid">asid</a> = <a class="local col4 ref" href="#254i" title='i' data-ref="254i" data-ref-filename="254i">i</a>;</td></tr>
<tr><th id="2515">2515</th><td></td></tr>
<tr><th id="2516">2516</th><td>		<a class="tu ref" href="#vmx_asidmap" title='vmx_asidmap' data-use='r' data-ref="vmx_asidmap" data-ref-filename="vmx_asidmap">vmx_asidmap</a>[<a class="local col5 ref" href="#255oct" title='oct' data-ref="255oct" data-ref-filename="255oct">oct</a>] |= <a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(bit) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((bit) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col6 ref" href="#256bit" title='bit' data-ref="256bit" data-ref-filename="256bit">bit</a>);</td></tr>
<tr><th id="2517">2517</th><td>		<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#227" title="0x00000000" data-ref="_M/VMCS_VPID">VMCS_VPID</a>, <a class="local col4 ref" href="#254i" title='i' data-ref="254i" data-ref-filename="254i">i</a>);</td></tr>
<tr><th id="2518">2518</th><td>		<a class="ref fn" href="../../../sys/mutex.h.html#mutex_exit" title='mutex_exit' data-ref="mutex_exit" data-ref-filename="mutex_exit">mutex_exit</a>(&amp;<a class="tu ref" href="#vmx_asidlock" title='vmx_asidlock' data-use='a' data-ref="vmx_asidlock" data-ref-filename="vmx_asidlock">vmx_asidlock</a>);</td></tr>
<tr><th id="2519">2519</th><td>		<b>return</b>;</td></tr>
<tr><th id="2520">2520</th><td>	}</td></tr>
<tr><th id="2521">2521</th><td></td></tr>
<tr><th id="2522">2522</th><td>	<a class="ref fn" href="../../../sys/mutex.h.html#mutex_exit" title='mutex_exit' data-ref="mutex_exit" data-ref-filename="mutex_exit">mutex_exit</a>(&amp;<a class="tu ref" href="#vmx_asidlock" title='vmx_asidlock' data-use='a' data-ref="vmx_asidlock" data-ref-filename="vmx_asidlock">vmx_asidlock</a>);</td></tr>
<tr><th id="2523">2523</th><td></td></tr>
<tr><th id="2524">2524</th><td>	<a class="ref fn" href="../../../sys/systm.h.html#panic" title='panic' data-ref="panic" data-ref-filename="panic">panic</a>(<q>"%s: impossible"</q>, <b>__func__</b>);</td></tr>
<tr><th id="2525">2525</th><td>}</td></tr>
<tr><th id="2526">2526</th><td></td></tr>
<tr><th id="2527">2527</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2528">2528</th><td><dfn class="tu decl def fn" id="vmx_asid_free" title='vmx_asid_free' data-type='void vmx_asid_free(struct nvmm_cpu * vcpu)' data-ref="vmx_asid_free" data-ref-filename="vmx_asid_free">vmx_asid_free</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col7 decl" id="257vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="257vcpu" data-ref-filename="257vcpu">vcpu</dfn>)</td></tr>
<tr><th id="2529">2529</th><td>{</td></tr>
<tr><th id="2530">2530</th><td>	<a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col8 decl" id="258oct" title='oct' data-type='size_t' data-ref="258oct" data-ref-filename="258oct">oct</dfn>, <dfn class="local col9 decl" id="259bit" title='bit' data-type='size_t' data-ref="259bit" data-ref-filename="259bit">bit</dfn>;</td></tr>
<tr><th id="2531">2531</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col0 decl" id="260asid" title='asid' data-type='uint64_t' data-ref="260asid" data-ref-filename="260asid">asid</dfn>;</td></tr>
<tr><th id="2532">2532</th><td></td></tr>
<tr><th id="2533">2533</th><td>	<a class="local col0 ref" href="#260asid" title='asid' data-ref="260asid" data-ref-filename="260asid">asid</a> = <a class="tu ref fn" href="#vmx_vmread" title='vmx_vmread' data-use='c' data-ref="vmx_vmread" data-ref-filename="vmx_vmread">vmx_vmread</a>(<a class="macro" href="#227" title="0x00000000" data-ref="_M/VMCS_VPID">VMCS_VPID</a>);</td></tr>
<tr><th id="2534">2534</th><td></td></tr>
<tr><th id="2535">2535</th><td>	<a class="local col8 ref" href="#258oct" title='oct' data-ref="258oct" data-ref-filename="258oct">oct</a> = <a class="local col0 ref" href="#260asid" title='asid' data-ref="260asid" data-ref-filename="260asid">asid</a> / <var>8</var>;</td></tr>
<tr><th id="2536">2536</th><td>	<a class="local col9 ref" href="#259bit" title='bit' data-ref="259bit" data-ref-filename="259bit">bit</a> = <a class="local col0 ref" href="#260asid" title='asid' data-ref="260asid" data-ref-filename="260asid">asid</a> % <var>8</var>;</td></tr>
<tr><th id="2537">2537</th><td></td></tr>
<tr><th id="2538">2538</th><td>	<a class="ref fn" href="../../../sys/mutex.h.html#mutex_enter" title='mutex_enter' data-ref="mutex_enter" data-ref-filename="mutex_enter">mutex_enter</a>(&amp;<a class="tu ref" href="#vmx_asidlock" title='vmx_asidlock' data-use='a' data-ref="vmx_asidlock" data-ref-filename="vmx_asidlock">vmx_asidlock</a>);</td></tr>
<tr><th id="2539">2539</th><td>	<a class="tu ref" href="#vmx_asidmap" title='vmx_asidmap' data-use='r' data-ref="vmx_asidmap" data-ref-filename="vmx_asidmap">vmx_asidmap</a>[<a class="local col8 ref" href="#258oct" title='oct' data-ref="258oct" data-ref-filename="258oct">oct</a>] &amp;= ~<a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(bit) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((bit) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col9 ref" href="#259bit" title='bit' data-ref="259bit" data-ref-filename="259bit">bit</a>);</td></tr>
<tr><th id="2540">2540</th><td>	<a class="ref fn" href="../../../sys/mutex.h.html#mutex_exit" title='mutex_exit' data-ref="mutex_exit" data-ref-filename="mutex_exit">mutex_exit</a>(&amp;<a class="tu ref" href="#vmx_asidlock" title='vmx_asidlock' data-use='a' data-ref="vmx_asidlock" data-ref-filename="vmx_asidlock">vmx_asidlock</a>);</td></tr>
<tr><th id="2541">2541</th><td>}</td></tr>
<tr><th id="2542">2542</th><td></td></tr>
<tr><th id="2543">2543</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2544">2544</th><td><dfn class="tu decl def fn" id="vmx_vcpu_init" title='vmx_vcpu_init' data-type='void vmx_vcpu_init(struct nvmm_machine * mach, struct nvmm_cpu * vcpu)' data-ref="vmx_vcpu_init" data-ref-filename="vmx_vcpu_init">vmx_vcpu_init</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col1 decl" id="261mach" title='mach' data-type='struct nvmm_machine *' data-ref="261mach" data-ref-filename="261mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col2 decl" id="262vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="262vcpu" data-ref-filename="262vcpu">vcpu</dfn>)</td></tr>
<tr><th id="2545">2545</th><td>{</td></tr>
<tr><th id="2546">2546</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col3 decl" id="263cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</dfn> = <a class="local col2 ref" href="#262vcpu" title='vcpu' data-ref="262vcpu" data-ref-filename="262vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="2547">2547</th><td>	<b>struct</b> <a class="type" href="#vmcs" title='vmcs' data-ref="vmcs" data-ref-filename="vmcs">vmcs</a> *<dfn class="local col4 decl" id="264vmcs" title='vmcs' data-type='struct vmcs *' data-ref="264vmcs" data-ref-filename="264vmcs">vmcs</dfn> = <a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs" title='vmx_cpudata::vmcs' data-use='r' data-ref="vmx_cpudata::vmcs" data-ref-filename="vmx_cpudata..vmcs">vmcs</a>;</td></tr>
<tr><th id="2548">2548</th><td>	<b>struct</b> <a class="type" href="#msr_entry" title='msr_entry' data-ref="msr_entry" data-ref-filename="msr_entry">msr_entry</a> *<dfn class="local col5 decl" id="265gmsr" title='gmsr' data-type='struct msr_entry *' data-ref="265gmsr" data-ref-filename="265gmsr">gmsr</dfn> = <a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-use='r' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</a>;</td></tr>
<tr><th id="2549">2549</th><td>	<b>extern</b> <a class="typedef" href="../../../sys/stdint.h.html#uint8_t" title='uint8_t' data-type='__uint8_t' data-ref="uint8_t" data-ref-filename="uint8_t">uint8_t</a> <dfn class="decl" id="vmx_resume_rip" title='vmx_resume_rip' data-ref="vmx_resume_rip" data-ref-filename="vmx_resume_rip">vmx_resume_rip</dfn>;</td></tr>
<tr><th id="2550">2550</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col6 decl" id="266rev" title='rev' data-type='uint64_t' data-ref="266rev" data-ref-filename="266rev">rev</dfn>, <dfn class="local col7 decl" id="267eptp" title='eptp' data-type='uint64_t' data-ref="267eptp" data-ref-filename="267eptp">eptp</dfn>;</td></tr>
<tr><th id="2551">2551</th><td></td></tr>
<tr><th id="2552">2552</th><td>	<a class="local col6 ref" href="#266rev" title='rev' data-ref="266rev" data-ref-filename="266rev">rev</a> = <a class="tu ref fn" href="#vmx_get_revision" title='vmx_get_revision' data-use='c' data-ref="vmx_get_revision" data-ref-filename="vmx_get_revision">vmx_get_revision</a>();</td></tr>
<tr><th id="2553">2553</th><td></td></tr>
<tr><th id="2554">2554</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#382" title="__builtin_memset(vmcs, 0, (1 * (1 &lt;&lt; 12)))" data-ref="_M/memset">memset</a>(<a class="local col4 ref" href="#264vmcs" title='vmcs' data-ref="264vmcs" data-ref-filename="264vmcs">vmcs</a>, <var>0</var>, <a class="macro" href="#685" title="(1 * (1 &lt;&lt; 12))" data-ref="_M/VMCS_SIZE">VMCS_SIZE</a>);</td></tr>
<tr><th id="2555">2555</th><td>	<a class="local col4 ref" href="#264vmcs" title='vmcs' data-ref="264vmcs" data-ref-filename="264vmcs">vmcs</a>-&gt;<a class="tu ref field" href="#vmcs::ident" title='vmcs::ident' data-use='w' data-ref="vmcs::ident" data-ref-filename="vmcs..ident">ident</a> = <a class="macro" href="../../../sys/cdefs.h.html#607" title="((rev) * (((((((((uintmax_t)((( ((30))&gt;((0)))?((30)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&gt;((0)))?((30)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((30))&lt;=((0)))?((30)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&lt;=((0)))?((30)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((30))&gt;((0)))?((30)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&gt;((0)))?((30)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((30))&lt;=((0)))?((30)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&lt;=((0)))?((30)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((30))&gt;((0)))?((30)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&gt;((0)))?((30)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((30))&lt;=((0)))?((30)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&lt;=((0)))?((30)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="local col6 ref" href="#266rev" title='rev' data-ref="266rev" data-ref-filename="266rev">rev</a>, <a class="macro" href="#589" title="(((((uintmax_t)((( ((30))&gt;((0)))?((30)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&gt;((0)))?((30)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((30))&lt;=((0)))?((30)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&lt;=((0)))?((30)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMCS_IDENT_REVISION">VMCS_IDENT_REVISION</a>);</td></tr>
<tr><th id="2556">2556</th><td>	<a class="local col4 ref" href="#264vmcs" title='vmcs' data-ref="264vmcs" data-ref-filename="264vmcs">vmcs</a>-&gt;<a class="tu ref field" href="#vmcs::abort" title='vmcs::abort' data-use='w' data-ref="vmcs::abort" data-ref-filename="vmcs..abort">abort</a> = <var>0</var>;</td></tr>
<tr><th id="2557">2557</th><td></td></tr>
<tr><th id="2558">2558</th><td>	<a class="tu ref fn" href="#vmx_vmcs_enter" title='vmx_vmcs_enter' data-use='c' data-ref="vmx_vmcs_enter" data-ref-filename="vmx_vmcs_enter">vmx_vmcs_enter</a>(<a class="local col2 ref" href="#262vcpu" title='vcpu' data-ref="262vcpu" data-ref-filename="262vcpu">vcpu</a>);</td></tr>
<tr><th id="2559">2559</th><td></td></tr>
<tr><th id="2560">2560</th><td>	<i>/* No link pointer. */</i></td></tr>
<tr><th id="2561">2561</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#285" title="0x00002800" data-ref="_M/VMCS_LINK_POINTER">VMCS_LINK_POINTER</a>, <var>0xFFFFFFFFFFFFFFFF</var>);</td></tr>
<tr><th id="2562">2562</th><td></td></tr>
<tr><th id="2563">2563</th><td>	<i>/* Install the CTLSs. */</i></td></tr>
<tr><th id="2564">2564</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#300" title="0x00004000" data-ref="_M/VMCS_PINBASED_CTLS">VMCS_PINBASED_CTLS</a>, <a class="tu ref" href="#vmx_pinbased_ctls" title='vmx_pinbased_ctls' data-use='r' data-ref="vmx_pinbased_ctls" data-ref-filename="vmx_pinbased_ctls">vmx_pinbased_ctls</a>);</td></tr>
<tr><th id="2565">2565</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#306" title="0x00004002" data-ref="_M/VMCS_PROCBASED_CTLS">VMCS_PROCBASED_CTLS</a>, <a class="tu ref" href="#vmx_procbased_ctls" title='vmx_procbased_ctls' data-use='r' data-ref="vmx_procbased_ctls" data-ref-filename="vmx_procbased_ctls">vmx_procbased_ctls</a>);</td></tr>
<tr><th id="2566">2566</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#372" title="0x0000401E" data-ref="_M/VMCS_PROCBASED_CTLS2">VMCS_PROCBASED_CTLS2</a>, <a class="tu ref" href="#vmx_procbased_ctls2" title='vmx_procbased_ctls2' data-use='r' data-ref="vmx_procbased_ctls2" data-ref-filename="vmx_procbased_ctls2">vmx_procbased_ctls2</a>);</td></tr>
<tr><th id="2567">2567</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#346" title="0x00004012" data-ref="_M/VMCS_ENTRY_CTLS">VMCS_ENTRY_CTLS</a>, <a class="tu ref" href="#vmx_entry_ctls" title='vmx_entry_ctls' data-use='r' data-ref="vmx_entry_ctls" data-ref-filename="vmx_entry_ctls">vmx_entry_ctls</a>);</td></tr>
<tr><th id="2568">2568</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#332" title="0x0000400C" data-ref="_M/VMCS_EXIT_CTLS">VMCS_EXIT_CTLS</a>, <a class="tu ref" href="#vmx_exit_ctls" title='vmx_exit_ctls' data-use='r' data-ref="vmx_exit_ctls" data-ref-filename="vmx_exit_ctls">vmx_exit_ctls</a>);</td></tr>
<tr><th id="2569">2569</th><td></td></tr>
<tr><th id="2570">2570</th><td>	<i>/* Allow direct access to certain MSRs. */</i></td></tr>
<tr><th id="2571">2571</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#382" title="__builtin_memset(cpudata-&gt;msrbm, 0xFF, (1 * (1 &lt;&lt; 12)))" data-ref="_M/memset">memset</a>(<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <var>0xFF</var>, <a class="macro" href="#688" title="(1 * (1 &lt;&lt; 12))" data-ref="_M/MSRBM_SIZE">MSRBM_SIZE</a>);</td></tr>
<tr><th id="2572">2572</th><td>	<a class="tu ref fn" href="#vmx_vcpu_msr_allow" title='vmx_vcpu_msr_allow' data-use='c' data-ref="vmx_vcpu_msr_allow" data-ref-filename="vmx_vcpu_msr_allow">vmx_vcpu_msr_allow</a>(<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#958" title="0xc0000080" data-ref="_M/MSR_EFER">MSR_EFER</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2573">2573</th><td>	<a class="tu ref fn" href="#vmx_vcpu_msr_allow" title='vmx_vcpu_msr_allow' data-use='c' data-ref="vmx_vcpu_msr_allow" data-ref-filename="vmx_vcpu_msr_allow">vmx_vcpu_msr_allow</a>(<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#968" title="0xc0000081" data-ref="_M/MSR_STAR">MSR_STAR</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2574">2574</th><td>	<a class="tu ref fn" href="#vmx_vcpu_msr_allow" title='vmx_vcpu_msr_allow' data-use='c' data-ref="vmx_vcpu_msr_allow" data-ref-filename="vmx_vcpu_msr_allow">vmx_vcpu_msr_allow</a>(<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#969" title="0xc0000082" data-ref="_M/MSR_LSTAR">MSR_LSTAR</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2575">2575</th><td>	<a class="tu ref fn" href="#vmx_vcpu_msr_allow" title='vmx_vcpu_msr_allow' data-use='c' data-ref="vmx_vcpu_msr_allow" data-ref-filename="vmx_vcpu_msr_allow">vmx_vcpu_msr_allow</a>(<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#970" title="0xc0000083" data-ref="_M/MSR_CSTAR">MSR_CSTAR</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2576">2576</th><td>	<a class="tu ref fn" href="#vmx_vcpu_msr_allow" title='vmx_vcpu_msr_allow' data-use='c' data-ref="vmx_vcpu_msr_allow" data-ref-filename="vmx_vcpu_msr_allow">vmx_vcpu_msr_allow</a>(<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#971" title="0xc0000084" data-ref="_M/MSR_SFMASK">MSR_SFMASK</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2577">2577</th><td>	<a class="tu ref fn" href="#vmx_vcpu_msr_allow" title='vmx_vcpu_msr_allow' data-use='c' data-ref="vmx_vcpu_msr_allow" data-ref-filename="vmx_vcpu_msr_allow">vmx_vcpu_msr_allow</a>(<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#975" title="0xc0000102" data-ref="_M/MSR_KERNELGSBASE">MSR_KERNELGSBASE</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2578">2578</th><td>	<a class="tu ref fn" href="#vmx_vcpu_msr_allow" title='vmx_vcpu_msr_allow' data-use='c' data-ref="vmx_vcpu_msr_allow" data-ref-filename="vmx_vcpu_msr_allow">vmx_vcpu_msr_allow</a>(<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#798" title="0x174" data-ref="_M/MSR_SYSENTER_CS">MSR_SYSENTER_CS</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2579">2579</th><td>	<a class="tu ref fn" href="#vmx_vcpu_msr_allow" title='vmx_vcpu_msr_allow' data-use='c' data-ref="vmx_vcpu_msr_allow" data-ref-filename="vmx_vcpu_msr_allow">vmx_vcpu_msr_allow</a>(<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#799" title="0x175" data-ref="_M/MSR_SYSENTER_ESP">MSR_SYSENTER_ESP</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2580">2580</th><td>	<a class="tu ref fn" href="#vmx_vcpu_msr_allow" title='vmx_vcpu_msr_allow' data-use='c' data-ref="vmx_vcpu_msr_allow" data-ref-filename="vmx_vcpu_msr_allow">vmx_vcpu_msr_allow</a>(<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#800" title="0x176" data-ref="_M/MSR_SYSENTER_EIP">MSR_SYSENTER_EIP</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2581">2581</th><td>	<a class="tu ref fn" href="#vmx_vcpu_msr_allow" title='vmx_vcpu_msr_allow' data-use='c' data-ref="vmx_vcpu_msr_allow" data-ref-filename="vmx_vcpu_msr_allow">vmx_vcpu_msr_allow</a>(<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#973" title="0xc0000100" data-ref="_M/MSR_FSBASE">MSR_FSBASE</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2582">2582</th><td>	<a class="tu ref fn" href="#vmx_vcpu_msr_allow" title='vmx_vcpu_msr_allow' data-use='c' data-ref="vmx_vcpu_msr_allow" data-ref-filename="vmx_vcpu_msr_allow">vmx_vcpu_msr_allow</a>(<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#974" title="0xc0000101" data-ref="_M/MSR_GSBASE">MSR_GSBASE</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2583">2583</th><td>	<a class="tu ref fn" href="#vmx_vcpu_msr_allow" title='vmx_vcpu_msr_allow' data-use='c' data-ref="vmx_vcpu_msr_allow" data-ref-filename="vmx_vcpu_msr_allow">vmx_vcpu_msr_allow</a>(<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#759" title="0x010" data-ref="_M/MSR_TSC">MSR_TSC</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>, <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>);</td></tr>
<tr><th id="2584">2584</th><td>	<a class="tu ref fn" href="#vmx_vcpu_msr_allow" title='vmx_vcpu_msr_allow' data-use='c' data-ref="vmx_vcpu_msr_allow" data-ref-filename="vmx_vcpu_msr_allow">vmx_vcpu_msr_allow</a>(<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#788" title="0x10a" data-ref="_M/MSR_IA32_ARCH_CAPABILITIES">MSR_IA32_ARCH_CAPABILITIES</a>,</td></tr>
<tr><th id="2585">2585</th><td>	    <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>, <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>);</td></tr>
<tr><th id="2586">2586</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#252" title="0x00002004" data-ref="_M/VMCS_MSR_BITMAP">VMCS_MSR_BITMAP</a>, (<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>)<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm_pa" title='vmx_cpudata::msrbm_pa' data-use='r' data-ref="vmx_cpudata::msrbm_pa" data-ref-filename="vmx_cpudata..msrbm_pa">msrbm_pa</a>);</td></tr>
<tr><th id="2587">2587</th><td></td></tr>
<tr><th id="2588">2588</th><td>	<i>/*</i></td></tr>
<tr><th id="2589">2589</th><td><i>	 * List of Guest MSRs loaded on VMENTRY, saved on VMEXIT. This</i></td></tr>
<tr><th id="2590">2590</th><td><i>	 * includes the L1D_FLUSH MSR, to mitigate L1TF.</i></td></tr>
<tr><th id="2591">2591</th><td><i>	 */</i></td></tr>
<tr><th id="2592">2592</th><td>	<a class="local col5 ref" href="#265gmsr" title='gmsr' data-ref="265gmsr" data-ref-filename="265gmsr">gmsr</a>[<a class="macro" href="#560" title="0" data-ref="_M/VMX_MSRLIST_STAR">VMX_MSRLIST_STAR</a>].<a class="tu ref field" href="#msr_entry::msr" title='msr_entry::msr' data-use='w' data-ref="msr_entry::msr" data-ref-filename="msr_entry..msr">msr</a> = <a class="macro" href="../../../arch/x86/include/specialreg.h.html#968" title="0xc0000081" data-ref="_M/MSR_STAR">MSR_STAR</a>;</td></tr>
<tr><th id="2593">2593</th><td>	<a class="local col5 ref" href="#265gmsr" title='gmsr' data-ref="265gmsr" data-ref-filename="265gmsr">gmsr</a>[<a class="macro" href="#560" title="0" data-ref="_M/VMX_MSRLIST_STAR">VMX_MSRLIST_STAR</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='w' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a> = <var>0</var>;</td></tr>
<tr><th id="2594">2594</th><td>	<a class="local col5 ref" href="#265gmsr" title='gmsr' data-ref="265gmsr" data-ref-filename="265gmsr">gmsr</a>[<a class="macro" href="#561" title="1" data-ref="_M/VMX_MSRLIST_LSTAR">VMX_MSRLIST_LSTAR</a>].<a class="tu ref field" href="#msr_entry::msr" title='msr_entry::msr' data-use='w' data-ref="msr_entry::msr" data-ref-filename="msr_entry..msr">msr</a> = <a class="macro" href="../../../arch/x86/include/specialreg.h.html#969" title="0xc0000082" data-ref="_M/MSR_LSTAR">MSR_LSTAR</a>;</td></tr>
<tr><th id="2595">2595</th><td>	<a class="local col5 ref" href="#265gmsr" title='gmsr' data-ref="265gmsr" data-ref-filename="265gmsr">gmsr</a>[<a class="macro" href="#561" title="1" data-ref="_M/VMX_MSRLIST_LSTAR">VMX_MSRLIST_LSTAR</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='w' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a> = <var>0</var>;</td></tr>
<tr><th id="2596">2596</th><td>	<a class="local col5 ref" href="#265gmsr" title='gmsr' data-ref="265gmsr" data-ref-filename="265gmsr">gmsr</a>[<a class="macro" href="#562" title="2" data-ref="_M/VMX_MSRLIST_CSTAR">VMX_MSRLIST_CSTAR</a>].<a class="tu ref field" href="#msr_entry::msr" title='msr_entry::msr' data-use='w' data-ref="msr_entry::msr" data-ref-filename="msr_entry..msr">msr</a> = <a class="macro" href="../../../arch/x86/include/specialreg.h.html#970" title="0xc0000083" data-ref="_M/MSR_CSTAR">MSR_CSTAR</a>;</td></tr>
<tr><th id="2597">2597</th><td>	<a class="local col5 ref" href="#265gmsr" title='gmsr' data-ref="265gmsr" data-ref-filename="265gmsr">gmsr</a>[<a class="macro" href="#562" title="2" data-ref="_M/VMX_MSRLIST_CSTAR">VMX_MSRLIST_CSTAR</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='w' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a> = <var>0</var>;</td></tr>
<tr><th id="2598">2598</th><td>	<a class="local col5 ref" href="#265gmsr" title='gmsr' data-ref="265gmsr" data-ref-filename="265gmsr">gmsr</a>[<a class="macro" href="#563" title="3" data-ref="_M/VMX_MSRLIST_SFMASK">VMX_MSRLIST_SFMASK</a>].<a class="tu ref field" href="#msr_entry::msr" title='msr_entry::msr' data-use='w' data-ref="msr_entry::msr" data-ref-filename="msr_entry..msr">msr</a> = <a class="macro" href="../../../arch/x86/include/specialreg.h.html#971" title="0xc0000084" data-ref="_M/MSR_SFMASK">MSR_SFMASK</a>;</td></tr>
<tr><th id="2599">2599</th><td>	<a class="local col5 ref" href="#265gmsr" title='gmsr' data-ref="265gmsr" data-ref-filename="265gmsr">gmsr</a>[<a class="macro" href="#563" title="3" data-ref="_M/VMX_MSRLIST_SFMASK">VMX_MSRLIST_SFMASK</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='w' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a> = <var>0</var>;</td></tr>
<tr><th id="2600">2600</th><td>	<a class="local col5 ref" href="#265gmsr" title='gmsr' data-ref="265gmsr" data-ref-filename="265gmsr">gmsr</a>[<a class="macro" href="#564" title="4" data-ref="_M/VMX_MSRLIST_KERNELGSBASE">VMX_MSRLIST_KERNELGSBASE</a>].<a class="tu ref field" href="#msr_entry::msr" title='msr_entry::msr' data-use='w' data-ref="msr_entry::msr" data-ref-filename="msr_entry..msr">msr</a> = <a class="macro" href="../../../arch/x86/include/specialreg.h.html#975" title="0xc0000102" data-ref="_M/MSR_KERNELGSBASE">MSR_KERNELGSBASE</a>;</td></tr>
<tr><th id="2601">2601</th><td>	<a class="local col5 ref" href="#265gmsr" title='gmsr' data-ref="265gmsr" data-ref-filename="265gmsr">gmsr</a>[<a class="macro" href="#564" title="4" data-ref="_M/VMX_MSRLIST_KERNELGSBASE">VMX_MSRLIST_KERNELGSBASE</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='w' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a> = <var>0</var>;</td></tr>
<tr><th id="2602">2602</th><td>	<a class="local col5 ref" href="#265gmsr" title='gmsr' data-ref="265gmsr" data-ref-filename="265gmsr">gmsr</a>[<a class="macro" href="#566" title="5" data-ref="_M/VMX_MSRLIST_L1DFLUSH">VMX_MSRLIST_L1DFLUSH</a>].<a class="tu ref field" href="#msr_entry::msr" title='msr_entry::msr' data-use='w' data-ref="msr_entry::msr" data-ref-filename="msr_entry..msr">msr</a> = <a class="macro" href="../../../arch/x86/include/specialreg.h.html#795" title="0x10b" data-ref="_M/MSR_IA32_FLUSH_CMD">MSR_IA32_FLUSH_CMD</a>;</td></tr>
<tr><th id="2603">2603</th><td>	<a class="local col5 ref" href="#265gmsr" title='gmsr' data-ref="265gmsr" data-ref-filename="265gmsr">gmsr</a>[<a class="macro" href="#566" title="5" data-ref="_M/VMX_MSRLIST_L1DFLUSH">VMX_MSRLIST_L1DFLUSH</a>].<a class="tu ref field" href="#msr_entry::val" title='msr_entry::val' data-use='w' data-ref="msr_entry::val" data-ref-filename="msr_entry..val">val</a> = <a class="macro" href="../../../arch/x86/include/specialreg.h.html#796" title="0x01" data-ref="_M/IA32_FLUSH_CMD_L1D_FLUSH">IA32_FLUSH_CMD_L1D_FLUSH</a>;</td></tr>
<tr><th id="2604">2604</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#255" title="0x0000200A" data-ref="_M/VMCS_ENTRY_MSR_LOAD_ADDRESS">VMCS_ENTRY_MSR_LOAD_ADDRESS</a>, <a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr_pa" title='vmx_cpudata::gmsr_pa' data-use='r' data-ref="vmx_cpudata::gmsr_pa" data-ref-filename="vmx_cpudata..gmsr_pa">gmsr_pa</a>);</td></tr>
<tr><th id="2605">2605</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#253" title="0x00002006" data-ref="_M/VMCS_EXIT_MSR_STORE_ADDRESS">VMCS_EXIT_MSR_STORE_ADDRESS</a>, <a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr_pa" title='vmx_cpudata::gmsr_pa' data-use='r' data-ref="vmx_cpudata::gmsr_pa" data-ref-filename="vmx_cpudata..gmsr_pa">gmsr_pa</a>);</td></tr>
<tr><th id="2606">2606</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#356" title="0x00004014" data-ref="_M/VMCS_ENTRY_MSR_LOAD_COUNT">VMCS_ENTRY_MSR_LOAD_COUNT</a>, <a class="tu ref" href="#vmx_msrlist_entry_nmsr" title='vmx_msrlist_entry_nmsr' data-use='r' data-ref="vmx_msrlist_entry_nmsr" data-ref-filename="vmx_msrlist_entry_nmsr">vmx_msrlist_entry_nmsr</a>);</td></tr>
<tr><th id="2607">2607</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#344" title="0x0000400E" data-ref="_M/VMCS_EXIT_MSR_STORE_COUNT">VMCS_EXIT_MSR_STORE_COUNT</a>, <a class="macro" href="#565" title="5" data-ref="_M/VMX_MSRLIST_EXIT_NMSR">VMX_MSRLIST_EXIT_NMSR</a>);</td></tr>
<tr><th id="2608">2608</th><td></td></tr>
<tr><th id="2609">2609</th><td>	<i>/* Force CR0_NW and CR0_CD to zero, CR0_ET to one. */</i></td></tr>
<tr><th id="2610">2610</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#441" title="0x00006000" data-ref="_M/VMCS_CR0_MASK">VMCS_CR0_MASK</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#71" title="0x20000000" data-ref="_M/CR0_NW">CR0_NW</a>|<a class="macro" href="../../../arch/x86/include/specialreg.h.html#72" title="0x40000000" data-ref="_M/CR0_CD">CR0_CD</a>|<a class="macro" href="../../../arch/x86/include/specialreg.h.html#67" title="0x00000010" data-ref="_M/CR0_ET">CR0_ET</a>);</td></tr>
<tr><th id="2611">2611</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#443" title="0x00006004" data-ref="_M/VMCS_CR0_SHADOW">VMCS_CR0_SHADOW</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#67" title="0x00000010" data-ref="_M/CR0_ET">CR0_ET</a>);</td></tr>
<tr><th id="2612">2612</th><td></td></tr>
<tr><th id="2613">2613</th><td>	<i>/* Force CR4_VMXE to zero. */</i></td></tr>
<tr><th id="2614">2614</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#442" title="0x00006002" data-ref="_M/VMCS_CR4_MASK">VMCS_CR4_MASK</a>, <a class="macro" href="../../../arch/x86/include/specialreg.h.html#112" title="0x00002000" data-ref="_M/CR4_VMXE">CR4_VMXE</a>);</td></tr>
<tr><th id="2615">2615</th><td></td></tr>
<tr><th id="2616">2616</th><td>	<i>/* Set the Host state for resuming. */</i></td></tr>
<tr><th id="2617">2617</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#489" title="0x00006c16" data-ref="_M/VMCS_HOST_RIP">VMCS_HOST_RIP</a>, (<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>)&amp;<a class="ref" href="#vmx_resume_rip" title='vmx_resume_rip' data-ref="vmx_resume_rip" data-ref-filename="vmx_resume_rip">vmx_resume_rip</a>);</td></tr>
<tr><th id="2618">2618</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#243" title="0x00000C02" data-ref="_M/VMCS_HOST_CS_SELECTOR">VMCS_HOST_CS_SELECTOR</a>, <a class="macro" href="../../../arch/amd64/include/segments.h.html#132" title="(((1) &lt;&lt; 3) | 0)" data-ref="_M/GSEL">GSEL</a>(<a class="macro" href="../../../arch/amd64/include/segments.h.html#331" title="1" data-ref="_M/GCODE_SEL">GCODE_SEL</a>, <a class="macro" href="../../../arch/amd64/include/segments.h.html#103" title="0" data-ref="_M/SEL_KPL">SEL_KPL</a>));</td></tr>
<tr><th id="2619">2619</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#244" title="0x00000C04" data-ref="_M/VMCS_HOST_SS_SELECTOR">VMCS_HOST_SS_SELECTOR</a>, <a class="macro" href="../../../arch/amd64/include/segments.h.html#132" title="(((2) &lt;&lt; 3) | 0)" data-ref="_M/GSEL">GSEL</a>(<a class="macro" href="../../../arch/amd64/include/segments.h.html#332" title="2" data-ref="_M/GDATA_SEL">GDATA_SEL</a>, <a class="macro" href="../../../arch/amd64/include/segments.h.html#103" title="0" data-ref="_M/SEL_KPL">SEL_KPL</a>));</td></tr>
<tr><th id="2620">2620</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#245" title="0x00000C06" data-ref="_M/VMCS_HOST_DS_SELECTOR">VMCS_HOST_DS_SELECTOR</a>, <a class="macro" href="../../../arch/amd64/include/segments.h.html#132" title="(((2) &lt;&lt; 3) | 0)" data-ref="_M/GSEL">GSEL</a>(<a class="macro" href="../../../arch/amd64/include/segments.h.html#332" title="2" data-ref="_M/GDATA_SEL">GDATA_SEL</a>, <a class="macro" href="../../../arch/amd64/include/segments.h.html#103" title="0" data-ref="_M/SEL_KPL">SEL_KPL</a>));</td></tr>
<tr><th id="2621">2621</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#242" title="0x00000C00" data-ref="_M/VMCS_HOST_ES_SELECTOR">VMCS_HOST_ES_SELECTOR</a>, <a class="macro" href="../../../arch/amd64/include/segments.h.html#132" title="(((2) &lt;&lt; 3) | 0)" data-ref="_M/GSEL">GSEL</a>(<a class="macro" href="../../../arch/amd64/include/segments.h.html#332" title="2" data-ref="_M/GDATA_SEL">GDATA_SEL</a>, <a class="macro" href="../../../arch/amd64/include/segments.h.html#103" title="0" data-ref="_M/SEL_KPL">SEL_KPL</a>));</td></tr>
<tr><th id="2622">2622</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#246" title="0x00000C08" data-ref="_M/VMCS_HOST_FS_SELECTOR">VMCS_HOST_FS_SELECTOR</a>, <var>0</var>);</td></tr>
<tr><th id="2623">2623</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#247" title="0x00000C0A" data-ref="_M/VMCS_HOST_GS_SELECTOR">VMCS_HOST_GS_SELECTOR</a>, <var>0</var>);</td></tr>
<tr><th id="2624">2624</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#439" title="0x00004C00" data-ref="_M/VMCS_HOST_IA32_SYSENTER_CS">VMCS_HOST_IA32_SYSENTER_CS</a>, <var>0</var>);</td></tr>
<tr><th id="2625">2625</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#486" title="0x00006C10" data-ref="_M/VMCS_HOST_IA32_SYSENTER_ESP">VMCS_HOST_IA32_SYSENTER_ESP</a>, <var>0</var>);</td></tr>
<tr><th id="2626">2626</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#487" title="0x00006C12" data-ref="_M/VMCS_HOST_IA32_SYSENTER_EIP">VMCS_HOST_IA32_SYSENTER_EIP</a>, <var>0</var>);</td></tr>
<tr><th id="2627">2627</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#485" title="0x00006C0E" data-ref="_M/VMCS_HOST_IDTR_BASE">VMCS_HOST_IDTR_BASE</a>, (<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a>)<a class="ref" href="../../../arch/amd64/include/segments.h.html#idt" title='idt' data-ref="idt" data-ref-filename="idt">idt</a>);</td></tr>
<tr><th id="2628">2628</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#296" title="0x00002C00" data-ref="_M/VMCS_HOST_IA32_PAT">VMCS_HOST_IA32_PAT</a>, <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#873" title="0x277" data-ref="_M/MSR_CR_PAT">MSR_CR_PAT</a>));</td></tr>
<tr><th id="2629">2629</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#297" title="0x00002C02" data-ref="_M/VMCS_HOST_IA32_EFER">VMCS_HOST_IA32_EFER</a>, <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#958" title="0xc0000080" data-ref="_M/MSR_EFER">MSR_EFER</a>));</td></tr>
<tr><th id="2630">2630</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#478" title="0x00006C00" data-ref="_M/VMCS_HOST_CR0">VMCS_HOST_CR0</a>, <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#213" title='rcr0' data-ref="rcr0" data-ref-filename="rcr0">rcr0</a>());</td></tr>
<tr><th id="2631">2631</th><td></td></tr>
<tr><th id="2632">2632</th><td>	<i>/* Generate ASID. */</i></td></tr>
<tr><th id="2633">2633</th><td>	<a class="tu ref fn" href="#vmx_asid_alloc" title='vmx_asid_alloc' data-use='c' data-ref="vmx_asid_alloc" data-ref-filename="vmx_asid_alloc">vmx_asid_alloc</a>(<a class="local col2 ref" href="#262vcpu" title='vcpu' data-ref="262vcpu" data-ref-filename="262vcpu">vcpu</a>);</td></tr>
<tr><th id="2634">2634</th><td></td></tr>
<tr><th id="2635">2635</th><td>	<i>/* Enable Extended Paging, 4-Level. */</i></td></tr>
<tr><th id="2636">2636</th><td>	<a class="local col7 ref" href="#267eptp" title='eptp' data-ref="267eptp" data-ref-filename="267eptp">eptp</a> =</td></tr>
<tr><th id="2637">2637</th><td>	    <a class="macro" href="../../../sys/cdefs.h.html#607" title="((vmx_eptp_type) * (((((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="tu ref" href="#vmx_eptp_type" title='vmx_eptp_type' data-use='r' data-ref="vmx_eptp_type" data-ref-filename="vmx_eptp_type">vmx_eptp_type</a>, <a class="macro" href="#264" title="(((((uintmax_t)((( ((2))&gt;((0)))?((2)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&gt;((0)))?((2)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((2))&lt;=((0)))?((2)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((2))&lt;=((0)))?((2)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/EPTP_TYPE">EPTP_TYPE</a>) |</td></tr>
<tr><th id="2638">2638</th><td>	    <a class="macro" href="../../../sys/cdefs.h.html#607" title="((4-1) * (((((((((uintmax_t)((( ((5))&gt;((3)))?((5)):((3))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((3)))?((5)):((3))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((3)))?((5)):((3)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((3)))?((5)):((3)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((5))&gt;((3)))?((5)):((3))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((3)))?((5)):((3))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((3)))?((5)):((3)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((3)))?((5)):((3)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((5))&gt;((3)))?((5)):((3))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((3)))?((5)):((3))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((3)))?((5)):((3)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((3)))?((5)):((3)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<var>4</var>-<var>1</var>, <a class="macro" href="#267" title="(((((uintmax_t)((( ((5))&gt;((3)))?((5)):((3))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&gt;((3)))?((5)):((3))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((5))&lt;=((3)))?((5)):((3)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((5))&lt;=((3)))?((5)):((3)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/EPTP_WALKLEN">EPTP_WALKLEN</a>) |</td></tr>
<tr><th id="2639">2639</th><td>	    (<a class="ref" href="#pmap_ept_has_ad" title='pmap_ept_has_ad' data-ref="pmap_ept_has_ad" data-ref-filename="pmap_ept_has_ad">pmap_ept_has_ad</a> ? <a class="macro" href="#268" title="(((uintmax_t)(6) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((6) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/EPTP_FLAGS_AD">EPTP_FLAGS_AD</a> : <var>0</var>) |</td></tr>
<tr><th id="2640">2640</th><td>	    <a class="local col1 ref" href="#261mach" title='mach' data-ref="261mach" data-ref-filename="261mach">mach</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_machine::vm" title='nvmm_machine::vm' data-ref="nvmm_machine::vm" data-ref-filename="nvmm_machine..vm">vm</a>-&gt;<a class="ref field" href="../../../uvm/uvm_extern.h.html#vmspace::vm_map" title='vmspace::vm_map' data-ref="vmspace::vm_map" data-ref-filename="vmspace..vm_map">vm_map</a>.<a class="ref field" href="../../../uvm/uvm_map.h.html#vm_map::pmap" title='vm_map::pmap' data-ref="vm_map::pmap" data-ref-filename="vm_map..pmap">pmap</a>-&gt;<a class="ref field" href="../../../arch/x86/include/pmap.h.html#pmap::pm_pdirpa" title='pmap::pm_pdirpa' data-ref="pmap::pm_pdirpa" data-ref-filename="pmap..pm_pdirpa">pm_pdirpa</a>[<var>0</var>];</td></tr>
<tr><th id="2641">2641</th><td>	<a class="tu ref fn" href="#vmx_vmwrite" title='vmx_vmwrite' data-use='c' data-ref="vmx_vmwrite" data-ref-filename="vmx_vmwrite">vmx_vmwrite</a>(<a class="macro" href="#263" title="0x0000201A" data-ref="_M/VMCS_EPTP">VMCS_EPTP</a>, <a class="local col7 ref" href="#267eptp" title='eptp' data-ref="267eptp" data-ref-filename="267eptp">eptp</a>);</td></tr>
<tr><th id="2642">2642</th><td></td></tr>
<tr><th id="2643">2643</th><td>	<i>/* Init IA32_MISC_ENABLE. */</i></td></tr>
<tr><th id="2644">2644</th><td>	<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr_misc_enable" title='vmx_cpudata::gmsr_misc_enable' data-use='w' data-ref="vmx_cpudata::gmsr_misc_enable" data-ref-filename="vmx_cpudata..gmsr_misc_enable">gmsr_misc_enable</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#812" title="0x1a0" data-ref="_M/MSR_MISC_ENABLE">MSR_MISC_ENABLE</a>);</td></tr>
<tr><th id="2645">2645</th><td>	<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr_misc_enable" title='vmx_cpudata::gmsr_misc_enable' data-use='w' data-ref="vmx_cpudata::gmsr_misc_enable" data-ref-filename="vmx_cpudata..gmsr_misc_enable">gmsr_misc_enable</a> &amp;=</td></tr>
<tr><th id="2646">2646</th><td>	    ~(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#815" title="(((uintmax_t)(7) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((7) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_MISC_PERFMON_EN">IA32_MISC_PERFMON_EN</a>|<a class="macro" href="../../../arch/x86/include/specialreg.h.html#818" title="(((uintmax_t)(16) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((16) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_MISC_EISST_EN">IA32_MISC_EISST_EN</a>|<a class="macro" href="../../../arch/x86/include/specialreg.h.html#819" title="(((uintmax_t)(18) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((18) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_MISC_MWAIT_EN">IA32_MISC_MWAIT_EN</a>);</td></tr>
<tr><th id="2647">2647</th><td>	<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr_misc_enable" title='vmx_cpudata::gmsr_misc_enable' data-use='w' data-ref="vmx_cpudata::gmsr_misc_enable" data-ref-filename="vmx_cpudata..gmsr_misc_enable">gmsr_misc_enable</a> |=</td></tr>
<tr><th id="2648">2648</th><td>	    (<a class="macro" href="../../../arch/x86/include/specialreg.h.html#816" title="(((uintmax_t)(11) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((11) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_MISC_BTS_UNAVAIL">IA32_MISC_BTS_UNAVAIL</a>|<a class="macro" href="../../../arch/x86/include/specialreg.h.html#817" title="(((uintmax_t)(12) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((12) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_MISC_PEBS_UNAVAIL">IA32_MISC_PEBS_UNAVAIL</a>);</td></tr>
<tr><th id="2649">2649</th><td></td></tr>
<tr><th id="2650">2650</th><td>	<i>/* Init XSAVE header. */</i></td></tr>
<tr><th id="2651">2651</th><td>	<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gfpu" title='vmx_cpudata::gfpu' data-use='m' data-ref="vmx_cpudata::gfpu" data-ref-filename="vmx_cpudata..gfpu">gfpu</a>.<a class="ref field" href="../../../arch/x86/include/cpu_extended_state.h.html#xsave_header::xsh_xstate_bv" title='xsave_header::xsh_xstate_bv' data-ref="xsave_header::xsh_xstate_bv" data-ref-filename="xsave_header..xsh_xstate_bv">xsh_xstate_bv</a> = <a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a>;</td></tr>
<tr><th id="2652">2652</th><td>	<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gfpu" title='vmx_cpudata::gfpu' data-use='m' data-ref="vmx_cpudata::gfpu" data-ref-filename="vmx_cpudata..gfpu">gfpu</a>.<a class="ref field" href="../../../arch/x86/include/cpu_extended_state.h.html#xsave_header::xsh_xcomp_bv" title='xsave_header::xsh_xcomp_bv' data-ref="xsave_header::xsh_xcomp_bv" data-ref-filename="xsave_header..xsh_xcomp_bv">xsh_xcomp_bv</a> = <var>0</var>;</td></tr>
<tr><th id="2653">2653</th><td></td></tr>
<tr><th id="2654">2654</th><td>	<i>/* These MSRs are static. */</i></td></tr>
<tr><th id="2655">2655</th><td>	<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::star" title='vmx_cpudata::star' data-use='w' data-ref="vmx_cpudata::star" data-ref-filename="vmx_cpudata..star">star</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#968" title="0xc0000081" data-ref="_M/MSR_STAR">MSR_STAR</a>);</td></tr>
<tr><th id="2656">2656</th><td>	<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::lstar" title='vmx_cpudata::lstar' data-use='w' data-ref="vmx_cpudata::lstar" data-ref-filename="vmx_cpudata..lstar">lstar</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#969" title="0xc0000082" data-ref="_M/MSR_LSTAR">MSR_LSTAR</a>);</td></tr>
<tr><th id="2657">2657</th><td>	<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::cstar" title='vmx_cpudata::cstar' data-use='w' data-ref="vmx_cpudata::cstar" data-ref-filename="vmx_cpudata..cstar">cstar</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#970" title="0xc0000083" data-ref="_M/MSR_CSTAR">MSR_CSTAR</a>);</td></tr>
<tr><th id="2658">2658</th><td>	<a class="local col3 ref" href="#263cpudata" title='cpudata' data-ref="263cpudata" data-ref-filename="263cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::sfmask" title='vmx_cpudata::sfmask' data-use='w' data-ref="vmx_cpudata::sfmask" data-ref-filename="vmx_cpudata..sfmask">sfmask</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#971" title="0xc0000084" data-ref="_M/MSR_SFMASK">MSR_SFMASK</a>);</td></tr>
<tr><th id="2659">2659</th><td></td></tr>
<tr><th id="2660">2660</th><td>	<i>/* Install the RESET state. */</i></td></tr>
<tr><th id="2661">2661</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#380" title="__builtin_memcpy(&amp;vcpu-&gt;comm-&gt;state, &amp;nvmm_x86_reset_state, sizeof(nvmm_x86_reset_state))" data-ref="_M/memcpy">memcpy</a>(&amp;<a class="local col2 ref" href="#262vcpu" title='vcpu' data-ref="262vcpu" data-ref-filename="262vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state" title='nvmm_comm_page::state' data-ref="nvmm_comm_page::state" data-ref-filename="nvmm_comm_page..state">state</a>, &amp;<a class="ref" href="nvmm_x86.h.html#nvmm_x86_reset_state" title='nvmm_x86_reset_state' data-ref="nvmm_x86_reset_state" data-ref-filename="nvmm_x86_reset_state">nvmm_x86_reset_state</a>,</td></tr>
<tr><th id="2662">2662</th><td>	    <b>sizeof</b>(<a class="ref" href="nvmm_x86.h.html#nvmm_x86_reset_state" title='nvmm_x86_reset_state' data-ref="nvmm_x86_reset_state" data-ref-filename="nvmm_x86_reset_state">nvmm_x86_reset_state</a>));</td></tr>
<tr><th id="2663">2663</th><td>	<a class="local col2 ref" href="#262vcpu" title='vcpu' data-ref="262vcpu" data-ref-filename="262vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state_wanted" title='nvmm_comm_page::state_wanted' data-ref="nvmm_comm_page::state_wanted" data-ref-filename="nvmm_comm_page..state_wanted">state_wanted</a> = <a class="macro" href="nvmm_x86.h.html#217" title="(0x01 | 0x02 | 0x04 | 0x08 | 0x10 | 0x20 | 0x40)" data-ref="_M/NVMM_X64_STATE_ALL">NVMM_X64_STATE_ALL</a>;</td></tr>
<tr><th id="2664">2664</th><td>	<a class="local col2 ref" href="#262vcpu" title='vcpu' data-ref="262vcpu" data-ref-filename="262vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::comm" title='nvmm_cpu::comm' data-ref="nvmm_cpu::comm" data-ref-filename="nvmm_cpu..comm">comm</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_comm_page::state_cached" title='nvmm_comm_page::state_cached' data-ref="nvmm_comm_page::state_cached" data-ref-filename="nvmm_comm_page..state_cached">state_cached</a> = <var>0</var>;</td></tr>
<tr><th id="2665">2665</th><td>	<a class="tu ref fn" href="#vmx_vcpu_setstate" title='vmx_vcpu_setstate' data-use='c' data-ref="vmx_vcpu_setstate" data-ref-filename="vmx_vcpu_setstate">vmx_vcpu_setstate</a>(<a class="local col2 ref" href="#262vcpu" title='vcpu' data-ref="262vcpu" data-ref-filename="262vcpu">vcpu</a>);</td></tr>
<tr><th id="2666">2666</th><td></td></tr>
<tr><th id="2667">2667</th><td>	<a class="tu ref fn" href="#vmx_vmcs_leave" title='vmx_vmcs_leave' data-use='c' data-ref="vmx_vmcs_leave" data-ref-filename="vmx_vmcs_leave">vmx_vmcs_leave</a>(<a class="local col2 ref" href="#262vcpu" title='vcpu' data-ref="262vcpu" data-ref-filename="262vcpu">vcpu</a>);</td></tr>
<tr><th id="2668">2668</th><td>}</td></tr>
<tr><th id="2669">2669</th><td></td></tr>
<tr><th id="2670">2670</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="2671">2671</th><td><dfn class="tu decl def fn" id="vmx_vcpu_create" title='vmx_vcpu_create' data-type='int vmx_vcpu_create(struct nvmm_machine * mach, struct nvmm_cpu * vcpu)' data-ref="vmx_vcpu_create" data-ref-filename="vmx_vcpu_create">vmx_vcpu_create</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col8 decl" id="268mach" title='mach' data-type='struct nvmm_machine *' data-ref="268mach" data-ref-filename="268mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col9 decl" id="269vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="269vcpu" data-ref-filename="269vcpu">vcpu</dfn>)</td></tr>
<tr><th id="2672">2672</th><td>{</td></tr>
<tr><th id="2673">2673</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col0 decl" id="270cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</dfn>;</td></tr>
<tr><th id="2674">2674</th><td>	<em>int</em> <dfn class="local col1 decl" id="271error" title='error' data-type='int' data-ref="271error" data-ref-filename="271error">error</dfn>;</td></tr>
<tr><th id="2675">2675</th><td></td></tr>
<tr><th id="2676">2676</th><td>	<i>/* Allocate the VMX cpudata. */</i></td></tr>
<tr><th id="2677">2677</th><td>	<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a> = (<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *)<a class="ref fn" href="../../../uvm/uvm_extern.h.html#uvm_km_alloc" title='uvm_km_alloc' data-ref="uvm_km_alloc" data-ref-filename="uvm_km_alloc">uvm_km_alloc</a>(<a class="ref" href="../../../uvm/uvm_extern.h.html#kernel_map" title='kernel_map' data-ref="kernel_map" data-ref-filename="kernel_map">kernel_map</a>,</td></tr>
<tr><th id="2678">2678</th><td>	    <a class="macro" href="../../../sys/param.h.html#390" title="((((sizeof(*cpudata))+(((1 &lt;&lt; 12))-1))/((1 &lt;&lt; 12)))*((1 &lt;&lt; 12)))" data-ref="_M/roundup">roundup</a>(<b>sizeof</b>(*<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>), <a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>), <var>0</var>,</td></tr>
<tr><th id="2679">2679</th><td>	    <a class="macro" href="../../../uvm/uvm_extern.h.html#195" title="0x1" data-ref="_M/UVM_KMF_WIRED">UVM_KMF_WIRED</a>|<a class="macro" href="../../../uvm/uvm_extern.h.html#200" title="0x10" data-ref="_M/UVM_KMF_ZERO">UVM_KMF_ZERO</a>);</td></tr>
<tr><th id="2680">2680</th><td>	<a class="local col9 ref" href="#269vcpu" title='vcpu' data-ref="269vcpu" data-ref-filename="269vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a> = <a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>;</td></tr>
<tr><th id="2681">2681</th><td></td></tr>
<tr><th id="2682">2682</th><td>	<i>/* VMCS */</i></td></tr>
<tr><th id="2683">2683</th><td>	<a class="local col1 ref" href="#271error" title='error' data-ref="271error" data-ref-filename="271error">error</a> = <a class="tu ref fn" href="#vmx_memalloc" title='vmx_memalloc' data-use='c' data-ref="vmx_memalloc" data-ref-filename="vmx_memalloc">vmx_memalloc</a>(&amp;<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_pa" title='vmx_cpudata::vmcs_pa' data-use='a' data-ref="vmx_cpudata::vmcs_pa" data-ref-filename="vmx_cpudata..vmcs_pa">vmcs_pa</a>, (<a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a> *)&amp;<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs" title='vmx_cpudata::vmcs' data-use='a' data-ref="vmx_cpudata::vmcs" data-ref-filename="vmx_cpudata..vmcs">vmcs</a>,</td></tr>
<tr><th id="2684">2684</th><td>	    <a class="macro" href="#684" title="1" data-ref="_M/VMCS_NPAGES">VMCS_NPAGES</a>);</td></tr>
<tr><th id="2685">2685</th><td>	<b>if</b> (<a class="local col1 ref" href="#271error" title='error' data-ref="271error" data-ref-filename="271error">error</a>)</td></tr>
<tr><th id="2686">2686</th><td>		<b>goto</b> <a class="lbl" href="#272error" data-ref="272error" data-ref-filename="272error">error</a>;</td></tr>
<tr><th id="2687">2687</th><td></td></tr>
<tr><th id="2688">2688</th><td>	<i>/* MSR Bitmap */</i></td></tr>
<tr><th id="2689">2689</th><td>	<a class="local col1 ref" href="#271error" title='error' data-ref="271error" data-ref-filename="271error">error</a> = <a class="tu ref fn" href="#vmx_memalloc" title='vmx_memalloc' data-use='c' data-ref="vmx_memalloc" data-ref-filename="vmx_memalloc">vmx_memalloc</a>(&amp;<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm_pa" title='vmx_cpudata::msrbm_pa' data-use='a' data-ref="vmx_cpudata::msrbm_pa" data-ref-filename="vmx_cpudata..msrbm_pa">msrbm_pa</a>, (<a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a> *)&amp;<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='a' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>,</td></tr>
<tr><th id="2690">2690</th><td>	    <a class="macro" href="#687" title="1" data-ref="_M/MSRBM_NPAGES">MSRBM_NPAGES</a>);</td></tr>
<tr><th id="2691">2691</th><td>	<b>if</b> (<a class="local col1 ref" href="#271error" title='error' data-ref="271error" data-ref-filename="271error">error</a>)</td></tr>
<tr><th id="2692">2692</th><td>		<b>goto</b> <a class="lbl" href="#272error" data-ref="272error" data-ref-filename="272error">error</a>;</td></tr>
<tr><th id="2693">2693</th><td></td></tr>
<tr><th id="2694">2694</th><td>	<i>/* Guest MSR List */</i></td></tr>
<tr><th id="2695">2695</th><td>	<a class="local col1 ref" href="#271error" title='error' data-ref="271error" data-ref-filename="271error">error</a> = <a class="tu ref fn" href="#vmx_memalloc" title='vmx_memalloc' data-use='c' data-ref="vmx_memalloc" data-ref-filename="vmx_memalloc">vmx_memalloc</a>(&amp;<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr_pa" title='vmx_cpudata::gmsr_pa' data-use='a' data-ref="vmx_cpudata::gmsr_pa" data-ref-filename="vmx_cpudata..gmsr_pa">gmsr_pa</a>, (<a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a> *)&amp;<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-use='a' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</a>, <var>1</var>);</td></tr>
<tr><th id="2696">2696</th><td>	<b>if</b> (<a class="local col1 ref" href="#271error" title='error' data-ref="271error" data-ref-filename="271error">error</a>)</td></tr>
<tr><th id="2697">2697</th><td>		<b>goto</b> <a class="lbl" href="#272error" data-ref="272error" data-ref-filename="272error">error</a>;</td></tr>
<tr><th id="2698">2698</th><td></td></tr>
<tr><th id="2699">2699</th><td>	<a class="ref fn" href="../../../sys/kcpuset.h.html#kcpuset_create" title='kcpuset_create' data-ref="kcpuset_create" data-ref-filename="kcpuset_create">kcpuset_create</a>(&amp;<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::htlb_want_flush" title='vmx_cpudata::htlb_want_flush' data-use='a' data-ref="vmx_cpudata::htlb_want_flush" data-ref-filename="vmx_cpudata..htlb_want_flush">htlb_want_flush</a>, <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>);</td></tr>
<tr><th id="2700">2700</th><td></td></tr>
<tr><th id="2701">2701</th><td>	<i>/* Init the VCPU info. */</i></td></tr>
<tr><th id="2702">2702</th><td>	<a class="tu ref fn" href="#vmx_vcpu_init" title='vmx_vcpu_init' data-use='c' data-ref="vmx_vcpu_init" data-ref-filename="vmx_vcpu_init">vmx_vcpu_init</a>(<a class="local col8 ref" href="#268mach" title='mach' data-ref="268mach" data-ref-filename="268mach">mach</a>, <a class="local col9 ref" href="#269vcpu" title='vcpu' data-ref="269vcpu" data-ref-filename="269vcpu">vcpu</a>);</td></tr>
<tr><th id="2703">2703</th><td></td></tr>
<tr><th id="2704">2704</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="2705">2705</th><td></td></tr>
<tr><th id="2706">2706</th><td><dfn class="lbl" id="272error" data-ref="272error" data-ref-filename="272error">error</dfn>:</td></tr>
<tr><th id="2707">2707</th><td>	<b>if</b> (<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_pa" title='vmx_cpudata::vmcs_pa' data-use='r' data-ref="vmx_cpudata::vmcs_pa" data-ref-filename="vmx_cpudata..vmcs_pa">vmcs_pa</a>) {</td></tr>
<tr><th id="2708">2708</th><td>		<a class="tu ref fn" href="#vmx_memfree" title='vmx_memfree' data-use='c' data-ref="vmx_memfree" data-ref-filename="vmx_memfree">vmx_memfree</a>(<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_pa" title='vmx_cpudata::vmcs_pa' data-use='r' data-ref="vmx_cpudata::vmcs_pa" data-ref-filename="vmx_cpudata..vmcs_pa">vmcs_pa</a>, (<a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a>)<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs" title='vmx_cpudata::vmcs' data-use='r' data-ref="vmx_cpudata::vmcs" data-ref-filename="vmx_cpudata..vmcs">vmcs</a>,</td></tr>
<tr><th id="2709">2709</th><td>		    <a class="macro" href="#684" title="1" data-ref="_M/VMCS_NPAGES">VMCS_NPAGES</a>);</td></tr>
<tr><th id="2710">2710</th><td>	}</td></tr>
<tr><th id="2711">2711</th><td>	<b>if</b> (<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm_pa" title='vmx_cpudata::msrbm_pa' data-use='r' data-ref="vmx_cpudata::msrbm_pa" data-ref-filename="vmx_cpudata..msrbm_pa">msrbm_pa</a>) {</td></tr>
<tr><th id="2712">2712</th><td>		<a class="tu ref fn" href="#vmx_memfree" title='vmx_memfree' data-use='c' data-ref="vmx_memfree" data-ref-filename="vmx_memfree">vmx_memfree</a>(<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm_pa" title='vmx_cpudata::msrbm_pa' data-use='r' data-ref="vmx_cpudata::msrbm_pa" data-ref-filename="vmx_cpudata..msrbm_pa">msrbm_pa</a>, (<a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a>)<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>,</td></tr>
<tr><th id="2713">2713</th><td>		    <a class="macro" href="#687" title="1" data-ref="_M/MSRBM_NPAGES">MSRBM_NPAGES</a>);</td></tr>
<tr><th id="2714">2714</th><td>	}</td></tr>
<tr><th id="2715">2715</th><td>	<b>if</b> (<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr_pa" title='vmx_cpudata::gmsr_pa' data-use='r' data-ref="vmx_cpudata::gmsr_pa" data-ref-filename="vmx_cpudata..gmsr_pa">gmsr_pa</a>) {</td></tr>
<tr><th id="2716">2716</th><td>		<a class="tu ref fn" href="#vmx_memfree" title='vmx_memfree' data-use='c' data-ref="vmx_memfree" data-ref-filename="vmx_memfree">vmx_memfree</a>(<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr_pa" title='vmx_cpudata::gmsr_pa' data-use='r' data-ref="vmx_cpudata::gmsr_pa" data-ref-filename="vmx_cpudata..gmsr_pa">gmsr_pa</a>, (<a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a>)<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-use='r' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</a>, <var>1</var>);</td></tr>
<tr><th id="2717">2717</th><td>	}</td></tr>
<tr><th id="2718">2718</th><td></td></tr>
<tr><th id="2719">2719</th><td>	<a class="ref fn" href="../../../sys/kmem.h.html#kmem_free" title='kmem_free' data-ref="kmem_free" data-ref-filename="kmem_free">kmem_free</a>(<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>, <b>sizeof</b>(*<a class="local col0 ref" href="#270cpudata" title='cpudata' data-ref="270cpudata" data-ref-filename="270cpudata">cpudata</a>));</td></tr>
<tr><th id="2720">2720</th><td>	<b>return</b> <a class="local col1 ref" href="#271error" title='error' data-ref="271error" data-ref-filename="271error">error</a>;</td></tr>
<tr><th id="2721">2721</th><td>}</td></tr>
<tr><th id="2722">2722</th><td></td></tr>
<tr><th id="2723">2723</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2724">2724</th><td><dfn class="tu decl def fn" id="vmx_vcpu_destroy" title='vmx_vcpu_destroy' data-type='void vmx_vcpu_destroy(struct nvmm_machine * mach, struct nvmm_cpu * vcpu)' data-ref="vmx_vcpu_destroy" data-ref-filename="vmx_vcpu_destroy">vmx_vcpu_destroy</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col3 decl" id="273mach" title='mach' data-type='struct nvmm_machine *' data-ref="273mach" data-ref-filename="273mach">mach</dfn>, <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_cpu" title='nvmm_cpu' data-ref="nvmm_cpu" data-ref-filename="nvmm_cpu">nvmm_cpu</a> *<dfn class="local col4 decl" id="274vcpu" title='vcpu' data-type='struct nvmm_cpu *' data-ref="274vcpu" data-ref-filename="274vcpu">vcpu</dfn>)</td></tr>
<tr><th id="2725">2725</th><td>{</td></tr>
<tr><th id="2726">2726</th><td>	<b>struct</b> <a class="type" href="#vmx_cpudata" title='vmx_cpudata' data-ref="vmx_cpudata" data-ref-filename="vmx_cpudata">vmx_cpudata</a> *<dfn class="local col5 decl" id="275cpudata" title='cpudata' data-type='struct vmx_cpudata *' data-ref="275cpudata" data-ref-filename="275cpudata">cpudata</dfn> = <a class="local col4 ref" href="#274vcpu" title='vcpu' data-ref="274vcpu" data-ref-filename="274vcpu">vcpu</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_cpu::cpudata" title='nvmm_cpu::cpudata' data-ref="nvmm_cpu::cpudata" data-ref-filename="nvmm_cpu..cpudata">cpudata</a>;</td></tr>
<tr><th id="2727">2727</th><td></td></tr>
<tr><th id="2728">2728</th><td>	<a class="tu ref fn" href="#vmx_vmcs_enter" title='vmx_vmcs_enter' data-use='c' data-ref="vmx_vmcs_enter" data-ref-filename="vmx_vmcs_enter">vmx_vmcs_enter</a>(<a class="local col4 ref" href="#274vcpu" title='vcpu' data-ref="274vcpu" data-ref-filename="274vcpu">vcpu</a>);</td></tr>
<tr><th id="2729">2729</th><td>	<a class="tu ref fn" href="#vmx_asid_free" title='vmx_asid_free' data-use='c' data-ref="vmx_asid_free" data-ref-filename="vmx_asid_free">vmx_asid_free</a>(<a class="local col4 ref" href="#274vcpu" title='vcpu' data-ref="274vcpu" data-ref-filename="274vcpu">vcpu</a>);</td></tr>
<tr><th id="2730">2730</th><td>	<a class="tu ref fn" href="#vmx_vmcs_destroy" title='vmx_vmcs_destroy' data-use='c' data-ref="vmx_vmcs_destroy" data-ref-filename="vmx_vmcs_destroy">vmx_vmcs_destroy</a>(<a class="local col4 ref" href="#274vcpu" title='vcpu' data-ref="274vcpu" data-ref-filename="274vcpu">vcpu</a>);</td></tr>
<tr><th id="2731">2731</th><td></td></tr>
<tr><th id="2732">2732</th><td>	<a class="ref fn" href="../../../sys/kcpuset.h.html#kcpuset_destroy" title='kcpuset_destroy' data-ref="kcpuset_destroy" data-ref-filename="kcpuset_destroy">kcpuset_destroy</a>(<a class="local col5 ref" href="#275cpudata" title='cpudata' data-ref="275cpudata" data-ref-filename="275cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::htlb_want_flush" title='vmx_cpudata::htlb_want_flush' data-use='r' data-ref="vmx_cpudata::htlb_want_flush" data-ref-filename="vmx_cpudata..htlb_want_flush">htlb_want_flush</a>);</td></tr>
<tr><th id="2733">2733</th><td></td></tr>
<tr><th id="2734">2734</th><td>	<a class="tu ref fn" href="#vmx_memfree" title='vmx_memfree' data-use='c' data-ref="vmx_memfree" data-ref-filename="vmx_memfree">vmx_memfree</a>(<a class="local col5 ref" href="#275cpudata" title='cpudata' data-ref="275cpudata" data-ref-filename="275cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs_pa" title='vmx_cpudata::vmcs_pa' data-use='r' data-ref="vmx_cpudata::vmcs_pa" data-ref-filename="vmx_cpudata..vmcs_pa">vmcs_pa</a>, (<a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a>)<a class="local col5 ref" href="#275cpudata" title='cpudata' data-ref="275cpudata" data-ref-filename="275cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::vmcs" title='vmx_cpudata::vmcs' data-use='r' data-ref="vmx_cpudata::vmcs" data-ref-filename="vmx_cpudata..vmcs">vmcs</a>, <a class="macro" href="#684" title="1" data-ref="_M/VMCS_NPAGES">VMCS_NPAGES</a>);</td></tr>
<tr><th id="2735">2735</th><td>	<a class="tu ref fn" href="#vmx_memfree" title='vmx_memfree' data-use='c' data-ref="vmx_memfree" data-ref-filename="vmx_memfree">vmx_memfree</a>(<a class="local col5 ref" href="#275cpudata" title='cpudata' data-ref="275cpudata" data-ref-filename="275cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm_pa" title='vmx_cpudata::msrbm_pa' data-use='r' data-ref="vmx_cpudata::msrbm_pa" data-ref-filename="vmx_cpudata..msrbm_pa">msrbm_pa</a>, (<a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a>)<a class="local col5 ref" href="#275cpudata" title='cpudata' data-ref="275cpudata" data-ref-filename="275cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::msrbm" title='vmx_cpudata::msrbm' data-use='r' data-ref="vmx_cpudata::msrbm" data-ref-filename="vmx_cpudata..msrbm">msrbm</a>, <a class="macro" href="#687" title="1" data-ref="_M/MSRBM_NPAGES">MSRBM_NPAGES</a>);</td></tr>
<tr><th id="2736">2736</th><td>	<a class="tu ref fn" href="#vmx_memfree" title='vmx_memfree' data-use='c' data-ref="vmx_memfree" data-ref-filename="vmx_memfree">vmx_memfree</a>(<a class="local col5 ref" href="#275cpudata" title='cpudata' data-ref="275cpudata" data-ref-filename="275cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr_pa" title='vmx_cpudata::gmsr_pa' data-use='r' data-ref="vmx_cpudata::gmsr_pa" data-ref-filename="vmx_cpudata..gmsr_pa">gmsr_pa</a>, (<a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a>)<a class="local col5 ref" href="#275cpudata" title='cpudata' data-ref="275cpudata" data-ref-filename="275cpudata">cpudata</a>-&gt;<a class="tu ref field" href="#vmx_cpudata::gmsr" title='vmx_cpudata::gmsr' data-use='r' data-ref="vmx_cpudata::gmsr" data-ref-filename="vmx_cpudata..gmsr">gmsr</a>, <var>1</var>);</td></tr>
<tr><th id="2737">2737</th><td>	<a class="ref fn" href="../../../uvm/uvm_extern.h.html#uvm_km_free" title='uvm_km_free' data-ref="uvm_km_free" data-ref-filename="uvm_km_free">uvm_km_free</a>(<a class="ref" href="../../../uvm/uvm_extern.h.html#kernel_map" title='kernel_map' data-ref="kernel_map" data-ref-filename="kernel_map">kernel_map</a>, (<a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a>)<a class="local col5 ref" href="#275cpudata" title='cpudata' data-ref="275cpudata" data-ref-filename="275cpudata">cpudata</a>,</td></tr>
<tr><th id="2738">2738</th><td>	    <a class="macro" href="../../../sys/param.h.html#390" title="((((sizeof(*cpudata))+(((1 &lt;&lt; 12))-1))/((1 &lt;&lt; 12)))*((1 &lt;&lt; 12)))" data-ref="_M/roundup">roundup</a>(<b>sizeof</b>(*<a class="local col5 ref" href="#275cpudata" title='cpudata' data-ref="275cpudata" data-ref-filename="275cpudata">cpudata</a>), <a class="macro" href="../../../arch/amd64/include/vmparam.h.html#56" title="(1 &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>), <a class="macro" href="../../../uvm/uvm_extern.h.html#195" title="0x1" data-ref="_M/UVM_KMF_WIRED">UVM_KMF_WIRED</a>);</td></tr>
<tr><th id="2739">2739</th><td>}</td></tr>
<tr><th id="2740">2740</th><td></td></tr>
<tr><th id="2741">2741</th><td><i  data-doc="vmx_tlb_flush">/* -------------------------------------------------------------------------- */</i></td></tr>
<tr><th id="2742">2742</th><td></td></tr>
<tr><th id="2743">2743</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2744">2744</th><td><dfn class="tu decl def fn" id="vmx_tlb_flush" title='vmx_tlb_flush' data-type='void vmx_tlb_flush(struct pmap * pm)' data-ref="vmx_tlb_flush" data-ref-filename="vmx_tlb_flush">vmx_tlb_flush</dfn>(<b>struct</b> <a class="type" href="../../../arch/x86/include/pmap.h.html#pmap" title='pmap' data-ref="pmap" data-ref-filename="pmap">pmap</a> *<dfn class="local col6 decl" id="276pm" title='pm' data-type='struct pmap *' data-ref="276pm" data-ref-filename="276pm">pm</dfn>)</td></tr>
<tr><th id="2745">2745</th><td>{</td></tr>
<tr><th id="2746">2746</th><td>	<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col7 decl" id="277mach" title='mach' data-type='struct nvmm_machine *' data-ref="277mach" data-ref-filename="277mach">mach</dfn> = <a class="local col6 ref" href="#276pm" title='pm' data-ref="276pm" data-ref-filename="276pm">pm</a>-&gt;<a class="ref field" href="../../../arch/x86/include/pmap.h.html#pmap::pm_data" title='pmap::pm_data' data-ref="pmap::pm_data" data-ref-filename="pmap..pm_data">pm_data</a>;</td></tr>
<tr><th id="2747">2747</th><td>	<b>struct</b> <a class="type" href="#vmx_machdata" title='vmx_machdata' data-ref="vmx_machdata" data-ref-filename="vmx_machdata">vmx_machdata</a> *<dfn class="local col8 decl" id="278machdata" title='machdata' data-type='struct vmx_machdata *' data-ref="278machdata" data-ref-filename="278machdata">machdata</dfn> = <a class="local col7 ref" href="#277mach" title='mach' data-ref="277mach" data-ref-filename="277mach">mach</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_machine::machdata" title='nvmm_machine::machdata' data-ref="nvmm_machine::machdata" data-ref-filename="nvmm_machine..machdata">machdata</a>;</td></tr>
<tr><th id="2748">2748</th><td></td></tr>
<tr><th id="2749">2749</th><td>	<a class="ref fn" href="../../../sys/atomic.h.html#atomic_inc_64" title='atomic_inc_64' data-ref="atomic_inc_64" data-ref-filename="atomic_inc_64">atomic_inc_64</a>(&amp;<a class="local col8 ref" href="#278machdata" title='machdata' data-ref="278machdata" data-ref-filename="278machdata">machdata</a>-&gt;<a class="tu ref field" href="#vmx_machdata::mach_htlb_gen" title='vmx_machdata::mach_htlb_gen' data-use='a' data-ref="vmx_machdata::mach_htlb_gen" data-ref-filename="vmx_machdata..mach_htlb_gen">mach_htlb_gen</a>);</td></tr>
<tr><th id="2750">2750</th><td></td></tr>
<tr><th id="2751">2751</th><td>	<i>/* Generates IPIs, which cause #VMEXITs. */</i></td></tr>
<tr><th id="2752">2752</th><td>	<a class="ref fn" href="../../../arch/x86/include/pmap.h.html#pmap_tlb_shootdown" title='pmap_tlb_shootdown' data-ref="pmap_tlb_shootdown" data-ref-filename="pmap_tlb_shootdown">pmap_tlb_shootdown</a>(<a class="macro" href="../../../uvm/uvm_pmap.h.html#91" title="kernel_pmap_ptr" data-ref="_M/pmap_kernel">pmap_kernel</a>(), -<var>1</var>, <a class="macro" href="../../../arch/amd64/include/pte.h.html#133" title="0x0000000000000100" data-ref="_M/PG_G">PG_G</a>, <a class="enum" href="../../../arch/x86/include/pmap.h.html#TLBSHOOT_UPDATE" title='TLBSHOOT_UPDATE' data-ref="TLBSHOOT_UPDATE" data-ref-filename="TLBSHOOT_UPDATE">TLBSHOOT_UPDATE</a>);</td></tr>
<tr><th id="2753">2753</th><td>}</td></tr>
<tr><th id="2754">2754</th><td></td></tr>
<tr><th id="2755">2755</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2756">2756</th><td><dfn class="tu decl def fn" id="vmx_machine_create" title='vmx_machine_create' data-type='void vmx_machine_create(struct nvmm_machine * mach)' data-ref="vmx_machine_create" data-ref-filename="vmx_machine_create">vmx_machine_create</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col9 decl" id="279mach" title='mach' data-type='struct nvmm_machine *' data-ref="279mach" data-ref-filename="279mach">mach</dfn>)</td></tr>
<tr><th id="2757">2757</th><td>{</td></tr>
<tr><th id="2758">2758</th><td>	<b>struct</b> <a class="type" href="../../../arch/x86/include/pmap.h.html#pmap" title='pmap' data-ref="pmap" data-ref-filename="pmap">pmap</a> *<dfn class="local col0 decl" id="280pmap" title='pmap' data-type='struct pmap *' data-ref="280pmap" data-ref-filename="280pmap">pmap</dfn> = <a class="local col9 ref" href="#279mach" title='mach' data-ref="279mach" data-ref-filename="279mach">mach</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_machine::vm" title='nvmm_machine::vm' data-ref="nvmm_machine::vm" data-ref-filename="nvmm_machine..vm">vm</a>-&gt;<a class="ref field" href="../../../uvm/uvm_extern.h.html#vmspace::vm_map" title='vmspace::vm_map' data-ref="vmspace::vm_map" data-ref-filename="vmspace..vm_map">vm_map</a>.<a class="ref field" href="../../../uvm/uvm_map.h.html#vm_map::pmap" title='vm_map::pmap' data-ref="vm_map::pmap" data-ref-filename="vm_map..pmap">pmap</a>;</td></tr>
<tr><th id="2759">2759</th><td>	<b>struct</b> <a class="type" href="#vmx_machdata" title='vmx_machdata' data-ref="vmx_machdata" data-ref-filename="vmx_machdata">vmx_machdata</a> *<dfn class="local col1 decl" id="281machdata" title='machdata' data-type='struct vmx_machdata *' data-ref="281machdata" data-ref-filename="281machdata">machdata</dfn>;</td></tr>
<tr><th id="2760">2760</th><td></td></tr>
<tr><th id="2761">2761</th><td>	<i>/* Convert to EPT. */</i></td></tr>
<tr><th id="2762">2762</th><td>	<a class="ref fn" href="../../../arch/x86/include/pmap.h.html#pmap_ept_transform" title='pmap_ept_transform' data-ref="pmap_ept_transform" data-ref-filename="pmap_ept_transform">pmap_ept_transform</a>(<a class="local col0 ref" href="#280pmap" title='pmap' data-ref="280pmap" data-ref-filename="280pmap">pmap</a>);</td></tr>
<tr><th id="2763">2763</th><td></td></tr>
<tr><th id="2764">2764</th><td>	<i>/* Fill in pmap info. */</i></td></tr>
<tr><th id="2765">2765</th><td>	<a class="local col0 ref" href="#280pmap" title='pmap' data-ref="280pmap" data-ref-filename="280pmap">pmap</a>-&gt;<a class="ref field" href="../../../arch/x86/include/pmap.h.html#pmap::pm_data" title='pmap::pm_data' data-ref="pmap::pm_data" data-ref-filename="pmap..pm_data">pm_data</a> = (<em>void</em> *)<a class="local col9 ref" href="#279mach" title='mach' data-ref="279mach" data-ref-filename="279mach">mach</a>;</td></tr>
<tr><th id="2766">2766</th><td>	<a class="local col0 ref" href="#280pmap" title='pmap' data-ref="280pmap" data-ref-filename="280pmap">pmap</a>-&gt;<a class="ref field" href="../../../arch/x86/include/pmap.h.html#pmap::pm_tlb_flush" title='pmap::pm_tlb_flush' data-ref="pmap::pm_tlb_flush" data-ref-filename="pmap..pm_tlb_flush">pm_tlb_flush</a> = <a class="tu ref fn" href="#vmx_tlb_flush" title='vmx_tlb_flush' data-use='r' data-ref="vmx_tlb_flush" data-ref-filename="vmx_tlb_flush">vmx_tlb_flush</a>;</td></tr>
<tr><th id="2767">2767</th><td></td></tr>
<tr><th id="2768">2768</th><td>	<a class="local col1 ref" href="#281machdata" title='machdata' data-ref="281machdata" data-ref-filename="281machdata">machdata</a> = <a class="ref fn" href="../../../sys/kmem.h.html#kmem_zalloc" title='kmem_zalloc' data-ref="kmem_zalloc" data-ref-filename="kmem_zalloc">kmem_zalloc</a>(<b>sizeof</b>(<b>struct</b> <a class="type" href="#vmx_machdata" title='vmx_machdata' data-ref="vmx_machdata" data-ref-filename="vmx_machdata">vmx_machdata</a>), <a class="macro" href="../../../sys/kmem.h.html#57" title="0x00000001" data-ref="_M/KM_SLEEP">KM_SLEEP</a>);</td></tr>
<tr><th id="2769">2769</th><td>	<a class="local col9 ref" href="#279mach" title='mach' data-ref="279mach" data-ref-filename="279mach">mach</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_machine::machdata" title='nvmm_machine::machdata' data-ref="nvmm_machine::machdata" data-ref-filename="nvmm_machine..machdata">machdata</a> = <a class="local col1 ref" href="#281machdata" title='machdata' data-ref="281machdata" data-ref-filename="281machdata">machdata</a>;</td></tr>
<tr><th id="2770">2770</th><td></td></tr>
<tr><th id="2771">2771</th><td>	<i>/* Start with an hTLB flush everywhere. */</i></td></tr>
<tr><th id="2772">2772</th><td>	<a class="local col1 ref" href="#281machdata" title='machdata' data-ref="281machdata" data-ref-filename="281machdata">machdata</a>-&gt;<a class="tu ref field" href="#vmx_machdata::mach_htlb_gen" title='vmx_machdata::mach_htlb_gen' data-use='w' data-ref="vmx_machdata::mach_htlb_gen" data-ref-filename="vmx_machdata..mach_htlb_gen">mach_htlb_gen</a> = <var>1</var>;</td></tr>
<tr><th id="2773">2773</th><td>}</td></tr>
<tr><th id="2774">2774</th><td></td></tr>
<tr><th id="2775">2775</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2776">2776</th><td><dfn class="tu decl def fn" id="vmx_machine_destroy" title='vmx_machine_destroy' data-type='void vmx_machine_destroy(struct nvmm_machine * mach)' data-ref="vmx_machine_destroy" data-ref-filename="vmx_machine_destroy">vmx_machine_destroy</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col2 decl" id="282mach" title='mach' data-type='struct nvmm_machine *' data-ref="282mach" data-ref-filename="282mach">mach</dfn>)</td></tr>
<tr><th id="2777">2777</th><td>{</td></tr>
<tr><th id="2778">2778</th><td>	<b>struct</b> <a class="type" href="#vmx_machdata" title='vmx_machdata' data-ref="vmx_machdata" data-ref-filename="vmx_machdata">vmx_machdata</a> *<dfn class="local col3 decl" id="283machdata" title='machdata' data-type='struct vmx_machdata *' data-ref="283machdata" data-ref-filename="283machdata">machdata</dfn> = <a class="local col2 ref" href="#282mach" title='mach' data-ref="282mach" data-ref-filename="282mach">mach</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_machine::machdata" title='nvmm_machine::machdata' data-ref="nvmm_machine::machdata" data-ref-filename="nvmm_machine..machdata">machdata</a>;</td></tr>
<tr><th id="2779">2779</th><td></td></tr>
<tr><th id="2780">2780</th><td>	<a class="ref fn" href="../../../sys/kmem.h.html#kmem_free" title='kmem_free' data-ref="kmem_free" data-ref-filename="kmem_free">kmem_free</a>(<a class="local col3 ref" href="#283machdata" title='machdata' data-ref="283machdata" data-ref-filename="283machdata">machdata</a>, <b>sizeof</b>(<b>struct</b> <a class="type" href="#vmx_machdata" title='vmx_machdata' data-ref="vmx_machdata" data-ref-filename="vmx_machdata">vmx_machdata</a>));</td></tr>
<tr><th id="2781">2781</th><td>}</td></tr>
<tr><th id="2782">2782</th><td></td></tr>
<tr><th id="2783">2783</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="2784">2784</th><td><dfn class="tu decl def fn" id="vmx_machine_configure" title='vmx_machine_configure' data-type='int vmx_machine_configure(struct nvmm_machine * mach, uint64_t op, void * data)' data-ref="vmx_machine_configure" data-ref-filename="vmx_machine_configure">vmx_machine_configure</dfn>(<b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_machine" title='nvmm_machine' data-ref="nvmm_machine" data-ref-filename="nvmm_machine">nvmm_machine</a> *<dfn class="local col4 decl" id="284mach" title='mach' data-type='struct nvmm_machine *' data-ref="284mach" data-ref-filename="284mach">mach</dfn>, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col5 decl" id="285op" title='op' data-type='uint64_t' data-ref="285op" data-ref-filename="285op">op</dfn>, <em>void</em> *<dfn class="local col6 decl" id="286data" title='data' data-type='void *' data-ref="286data" data-ref-filename="286data">data</dfn>)</td></tr>
<tr><th id="2785">2785</th><td>{</td></tr>
<tr><th id="2786">2786</th><td>	<b>struct</b> <a class="type" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid" title='nvmm_mach_conf_x86_cpuid' data-ref="nvmm_mach_conf_x86_cpuid" data-ref-filename="nvmm_mach_conf_x86_cpuid">nvmm_mach_conf_x86_cpuid</a> *<dfn class="local col7 decl" id="287cpuid" title='cpuid' data-type='struct nvmm_mach_conf_x86_cpuid *' data-ref="287cpuid" data-ref-filename="287cpuid">cpuid</dfn> = <a class="local col6 ref" href="#286data" title='data' data-ref="286data" data-ref-filename="286data">data</a>;</td></tr>
<tr><th id="2787">2787</th><td>	<b>struct</b> <a class="type" href="#vmx_machdata" title='vmx_machdata' data-ref="vmx_machdata" data-ref-filename="vmx_machdata">vmx_machdata</a> *<dfn class="local col8 decl" id="288machdata" title='machdata' data-type='struct vmx_machdata *' data-ref="288machdata" data-ref-filename="288machdata">machdata</dfn> = (<b>struct</b> <a class="type" href="#vmx_machdata" title='vmx_machdata' data-ref="vmx_machdata" data-ref-filename="vmx_machdata">vmx_machdata</a> *)<a class="local col4 ref" href="#284mach" title='mach' data-ref="284mach" data-ref-filename="284mach">mach</a>-&gt;<a class="ref field" href="../nvmm_internal.h.html#nvmm_machine::machdata" title='nvmm_machine::machdata' data-ref="nvmm_machine::machdata" data-ref-filename="nvmm_machine..machdata">machdata</a>;</td></tr>
<tr><th id="2788">2788</th><td>	<a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col9 decl" id="289i" title='i' data-type='size_t' data-ref="289i" data-ref-filename="289i">i</dfn>;</td></tr>
<tr><th id="2789">2789</th><td></td></tr>
<tr><th id="2790">2790</th><td>	<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#488" title="__builtin_expect((op != (200 - 200)) != 0, 0)" data-ref="_M/__predict_false">__predict_false</a>(<a class="local col5 ref" href="#285op" title='op' data-ref="285op" data-ref-filename="285op">op</a> != <a class="macro" href="../nvmm.h.html#102" title="(200 - 200)" data-ref="_M/NVMM_MACH_CONF_MD">NVMM_MACH_CONF_MD</a>(<a class="macro" href="nvmm_x86.h.html#234" title="200" data-ref="_M/NVMM_MACH_CONF_X86_CPUID">NVMM_MACH_CONF_X86_CPUID</a>))) {</td></tr>
<tr><th id="2791">2791</th><td>		<b>return</b> <a class="macro" href="../../../sys/errno.h.html#64" title="22" data-ref="_M/EINVAL">EINVAL</a>;</td></tr>
<tr><th id="2792">2792</th><td>	}</td></tr>
<tr><th id="2793">2793</th><td></td></tr>
<tr><th id="2794">2794</th><td>	<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#488" title="__builtin_expect(((cpuid-&gt;set.eax &amp; cpuid-&gt;del.eax) || (cpuid-&gt;set.ebx &amp; cpuid-&gt;del.ebx) || (cpuid-&gt;set.ecx &amp; cpuid-&gt;del.ecx) || (cpuid-&gt;set.edx &amp; cpuid-&gt;del.edx)) != 0, 0)" data-ref="_M/__predict_false">__predict_false</a>((<a class="local col7 ref" href="#287cpuid" title='cpuid' data-ref="287cpuid" data-ref-filename="287cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::set" title='nvmm_mach_conf_x86_cpuid::set' data-ref="nvmm_mach_conf_x86_cpuid::set" data-ref-filename="nvmm_mach_conf_x86_cpuid..set">set</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::eax" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::eax' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::eax" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..eax">eax</a> &amp; <a class="local col7 ref" href="#287cpuid" title='cpuid' data-ref="287cpuid" data-ref-filename="287cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::del" title='nvmm_mach_conf_x86_cpuid::del' data-ref="nvmm_mach_conf_x86_cpuid::del" data-ref-filename="nvmm_mach_conf_x86_cpuid..del">del</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::eax" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::eax' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::eax" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..eax">eax</a>) ||</td></tr>
<tr><th id="2795">2795</th><td>	    (<a class="local col7 ref" href="#287cpuid" title='cpuid' data-ref="287cpuid" data-ref-filename="287cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::set" title='nvmm_mach_conf_x86_cpuid::set' data-ref="nvmm_mach_conf_x86_cpuid::set" data-ref-filename="nvmm_mach_conf_x86_cpuid..set">set</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::ebx" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::ebx' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::ebx" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..ebx">ebx</a> &amp; <a class="local col7 ref" href="#287cpuid" title='cpuid' data-ref="287cpuid" data-ref-filename="287cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::del" title='nvmm_mach_conf_x86_cpuid::del' data-ref="nvmm_mach_conf_x86_cpuid::del" data-ref-filename="nvmm_mach_conf_x86_cpuid..del">del</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::ebx" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::ebx' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::ebx" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..ebx">ebx</a>) ||</td></tr>
<tr><th id="2796">2796</th><td>	    (<a class="local col7 ref" href="#287cpuid" title='cpuid' data-ref="287cpuid" data-ref-filename="287cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::set" title='nvmm_mach_conf_x86_cpuid::set' data-ref="nvmm_mach_conf_x86_cpuid::set" data-ref-filename="nvmm_mach_conf_x86_cpuid..set">set</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::ecx" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::ecx' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::ecx" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..ecx">ecx</a> &amp; <a class="local col7 ref" href="#287cpuid" title='cpuid' data-ref="287cpuid" data-ref-filename="287cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::del" title='nvmm_mach_conf_x86_cpuid::del' data-ref="nvmm_mach_conf_x86_cpuid::del" data-ref-filename="nvmm_mach_conf_x86_cpuid..del">del</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::ecx" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::ecx' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::ecx" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..ecx">ecx</a>) ||</td></tr>
<tr><th id="2797">2797</th><td>	    (<a class="local col7 ref" href="#287cpuid" title='cpuid' data-ref="287cpuid" data-ref-filename="287cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::set" title='nvmm_mach_conf_x86_cpuid::set' data-ref="nvmm_mach_conf_x86_cpuid::set" data-ref-filename="nvmm_mach_conf_x86_cpuid..set">set</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::edx" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::edx' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::edx" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..edx">edx</a> &amp; <a class="local col7 ref" href="#287cpuid" title='cpuid' data-ref="287cpuid" data-ref-filename="287cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::del" title='nvmm_mach_conf_x86_cpuid::del' data-ref="nvmm_mach_conf_x86_cpuid::del" data-ref-filename="nvmm_mach_conf_x86_cpuid..del">del</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::(anonymous)::edx" title='nvmm_mach_conf_x86_cpuid::(anonymous struct)::edx' data-ref="nvmm_mach_conf_x86_cpuid::(anonymous)::edx" data-ref-filename="nvmm_mach_conf_x86_cpuid..(anonymous)..edx">edx</a>))) {</td></tr>
<tr><th id="2798">2798</th><td>		<b>return</b> <a class="macro" href="../../../sys/errno.h.html#64" title="22" data-ref="_M/EINVAL">EINVAL</a>;</td></tr>
<tr><th id="2799">2799</th><td>	}</td></tr>
<tr><th id="2800">2800</th><td></td></tr>
<tr><th id="2801">2801</th><td>	<i>/* If already here, replace. */</i></td></tr>
<tr><th id="2802">2802</th><td>	<b>for</b> (<a class="local col9 ref" href="#289i" title='i' data-ref="289i" data-ref-filename="289i">i</a> = <var>0</var>; <a class="local col9 ref" href="#289i" title='i' data-ref="289i" data-ref-filename="289i">i</a> &lt; <a class="macro" href="#682" title="32" data-ref="_M/VMX_NCPUIDS">VMX_NCPUIDS</a>; <a class="local col9 ref" href="#289i" title='i' data-ref="289i" data-ref-filename="289i">i</a>++) {</td></tr>
<tr><th id="2803">2803</th><td>		<b>if</b> (!<a class="local col8 ref" href="#288machdata" title='machdata' data-ref="288machdata" data-ref-filename="288machdata">machdata</a>-&gt;<a class="tu ref field" href="#vmx_machdata::cpuidpresent" title='vmx_machdata::cpuidpresent' data-use='r' data-ref="vmx_machdata::cpuidpresent" data-ref-filename="vmx_machdata..cpuidpresent">cpuidpresent</a>[<a class="local col9 ref" href="#289i" title='i' data-ref="289i" data-ref-filename="289i">i</a>]) {</td></tr>
<tr><th id="2804">2804</th><td>			<b>continue</b>;</td></tr>
<tr><th id="2805">2805</th><td>		}</td></tr>
<tr><th id="2806">2806</th><td>		<b>if</b> (<a class="local col8 ref" href="#288machdata" title='machdata' data-ref="288machdata" data-ref-filename="288machdata">machdata</a>-&gt;<a class="tu ref field" href="#vmx_machdata::cpuid" title='vmx_machdata::cpuid' data-use='m' data-ref="vmx_machdata::cpuid" data-ref-filename="vmx_machdata..cpuid">cpuid</a>[<a class="local col9 ref" href="#289i" title='i' data-ref="289i" data-ref-filename="289i">i</a>].<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::leaf" title='nvmm_mach_conf_x86_cpuid::leaf' data-ref="nvmm_mach_conf_x86_cpuid::leaf" data-ref-filename="nvmm_mach_conf_x86_cpuid..leaf">leaf</a> == <a class="local col7 ref" href="#287cpuid" title='cpuid' data-ref="287cpuid" data-ref-filename="287cpuid">cpuid</a>-&gt;<a class="ref field" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid::leaf" title='nvmm_mach_conf_x86_cpuid::leaf' data-ref="nvmm_mach_conf_x86_cpuid::leaf" data-ref-filename="nvmm_mach_conf_x86_cpuid..leaf">leaf</a>) {</td></tr>
<tr><th id="2807">2807</th><td>			<a class="macro" href="../../../lib/libkern/libkern.h.html#380" title="__builtin_memcpy(&amp;machdata-&gt;cpuid[i], cpuid, sizeof(struct nvmm_mach_conf_x86_cpuid))" data-ref="_M/memcpy">memcpy</a>(&amp;<a class="local col8 ref" href="#288machdata" title='machdata' data-ref="288machdata" data-ref-filename="288machdata">machdata</a>-&gt;<a class="tu ref field" href="#vmx_machdata::cpuid" title='vmx_machdata::cpuid' data-use='a' data-ref="vmx_machdata::cpuid" data-ref-filename="vmx_machdata..cpuid">cpuid</a>[<a class="local col9 ref" href="#289i" title='i' data-ref="289i" data-ref-filename="289i">i</a>], <a class="local col7 ref" href="#287cpuid" title='cpuid' data-ref="287cpuid" data-ref-filename="287cpuid">cpuid</a>,</td></tr>
<tr><th id="2808">2808</th><td>			    <b>sizeof</b>(<b>struct</b> <a class="type" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid" title='nvmm_mach_conf_x86_cpuid' data-ref="nvmm_mach_conf_x86_cpuid" data-ref-filename="nvmm_mach_conf_x86_cpuid">nvmm_mach_conf_x86_cpuid</a>));</td></tr>
<tr><th id="2809">2809</th><td>			<b>return</b> <var>0</var>;</td></tr>
<tr><th id="2810">2810</th><td>		}</td></tr>
<tr><th id="2811">2811</th><td>	}</td></tr>
<tr><th id="2812">2812</th><td></td></tr>
<tr><th id="2813">2813</th><td>	<i>/* Not here, insert. */</i></td></tr>
<tr><th id="2814">2814</th><td>	<b>for</b> (<a class="local col9 ref" href="#289i" title='i' data-ref="289i" data-ref-filename="289i">i</a> = <var>0</var>; <a class="local col9 ref" href="#289i" title='i' data-ref="289i" data-ref-filename="289i">i</a> &lt; <a class="macro" href="#682" title="32" data-ref="_M/VMX_NCPUIDS">VMX_NCPUIDS</a>; <a class="local col9 ref" href="#289i" title='i' data-ref="289i" data-ref-filename="289i">i</a>++) {</td></tr>
<tr><th id="2815">2815</th><td>		<b>if</b> (!<a class="local col8 ref" href="#288machdata" title='machdata' data-ref="288machdata" data-ref-filename="288machdata">machdata</a>-&gt;<a class="tu ref field" href="#vmx_machdata::cpuidpresent" title='vmx_machdata::cpuidpresent' data-use='r' data-ref="vmx_machdata::cpuidpresent" data-ref-filename="vmx_machdata..cpuidpresent">cpuidpresent</a>[<a class="local col9 ref" href="#289i" title='i' data-ref="289i" data-ref-filename="289i">i</a>]) {</td></tr>
<tr><th id="2816">2816</th><td>			<a class="local col8 ref" href="#288machdata" title='machdata' data-ref="288machdata" data-ref-filename="288machdata">machdata</a>-&gt;<a class="tu ref field" href="#vmx_machdata::cpuidpresent" title='vmx_machdata::cpuidpresent' data-use='w' data-ref="vmx_machdata::cpuidpresent" data-ref-filename="vmx_machdata..cpuidpresent">cpuidpresent</a>[<a class="local col9 ref" href="#289i" title='i' data-ref="289i" data-ref-filename="289i">i</a>] = <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="2817">2817</th><td>			<a class="macro" href="../../../lib/libkern/libkern.h.html#380" title="__builtin_memcpy(&amp;machdata-&gt;cpuid[i], cpuid, sizeof(struct nvmm_mach_conf_x86_cpuid))" data-ref="_M/memcpy">memcpy</a>(&amp;<a class="local col8 ref" href="#288machdata" title='machdata' data-ref="288machdata" data-ref-filename="288machdata">machdata</a>-&gt;<a class="tu ref field" href="#vmx_machdata::cpuid" title='vmx_machdata::cpuid' data-use='a' data-ref="vmx_machdata::cpuid" data-ref-filename="vmx_machdata..cpuid">cpuid</a>[<a class="local col9 ref" href="#289i" title='i' data-ref="289i" data-ref-filename="289i">i</a>], <a class="local col7 ref" href="#287cpuid" title='cpuid' data-ref="287cpuid" data-ref-filename="287cpuid">cpuid</a>,</td></tr>
<tr><th id="2818">2818</th><td>			    <b>sizeof</b>(<b>struct</b> <a class="type" href="nvmm_x86.h.html#nvmm_mach_conf_x86_cpuid" title='nvmm_mach_conf_x86_cpuid' data-ref="nvmm_mach_conf_x86_cpuid" data-ref-filename="nvmm_mach_conf_x86_cpuid">nvmm_mach_conf_x86_cpuid</a>));</td></tr>
<tr><th id="2819">2819</th><td>			<b>return</b> <var>0</var>;</td></tr>
<tr><th id="2820">2820</th><td>		}</td></tr>
<tr><th id="2821">2821</th><td>	}</td></tr>
<tr><th id="2822">2822</th><td></td></tr>
<tr><th id="2823">2823</th><td>	<b>return</b> <a class="macro" href="../../../sys/errno.h.html#106" title="55" data-ref="_M/ENOBUFS">ENOBUFS</a>;</td></tr>
<tr><th id="2824">2824</th><td>}</td></tr>
<tr><th id="2825">2825</th><td></td></tr>
<tr><th id="2826">2826</th><td><i  data-doc="vmx_init_ctls">/* -------------------------------------------------------------------------- */</i></td></tr>
<tr><th id="2827">2827</th><td></td></tr>
<tr><th id="2828">2828</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="2829">2829</th><td><dfn class="tu decl def fn" id="vmx_init_ctls" title='vmx_init_ctls' data-type='int vmx_init_ctls(uint64_t msr_ctls, uint64_t msr_true_ctls, uint64_t set_one, uint64_t set_zero, uint64_t * res)' data-ref="vmx_init_ctls" data-ref-filename="vmx_init_ctls">vmx_init_ctls</dfn>(<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col0 decl" id="290msr_ctls" title='msr_ctls' data-type='uint64_t' data-ref="290msr_ctls" data-ref-filename="290msr_ctls">msr_ctls</dfn>, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col1 decl" id="291msr_true_ctls" title='msr_true_ctls' data-type='uint64_t' data-ref="291msr_true_ctls" data-ref-filename="291msr_true_ctls">msr_true_ctls</dfn>,</td></tr>
<tr><th id="2830">2830</th><td>    <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="292set_one" title='set_one' data-type='uint64_t' data-ref="292set_one" data-ref-filename="292set_one">set_one</dfn>, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col3 decl" id="293set_zero" title='set_zero' data-type='uint64_t' data-ref="293set_zero" data-ref-filename="293set_zero">set_zero</dfn>, <a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> *<dfn class="local col4 decl" id="294res" title='res' data-type='uint64_t *' data-ref="294res" data-ref-filename="294res">res</dfn>)</td></tr>
<tr><th id="2831">2831</th><td>{</td></tr>
<tr><th id="2832">2832</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col5 decl" id="295basic" title='basic' data-type='uint64_t' data-ref="295basic" data-ref-filename="295basic">basic</dfn>, <dfn class="local col6 decl" id="296val" title='val' data-type='uint64_t' data-ref="296val" data-ref-filename="296val">val</dfn>, <dfn class="local col7 decl" id="297true_val" title='true_val' data-type='uint64_t' data-ref="297true_val" data-ref-filename="297true_val">true_val</dfn>;</td></tr>
<tr><th id="2833">2833</th><td>	<a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="local col8 decl" id="298one_allowed" title='one_allowed' data-type='_Bool' data-ref="298one_allowed" data-ref-filename="298one_allowed">one_allowed</dfn>, <dfn class="local col9 decl" id="299zero_allowed" title='zero_allowed' data-type='_Bool' data-ref="299zero_allowed" data-ref-filename="299zero_allowed">zero_allowed</dfn>, <dfn class="local col0 decl" id="300has_true" title='has_true' data-type='_Bool' data-ref="300has_true" data-ref-filename="300has_true">has_true</dfn>;</td></tr>
<tr><th id="2834">2834</th><td>	<a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col1 decl" id="301i" title='i' data-type='size_t' data-ref="301i" data-ref-filename="301i">i</dfn>;</td></tr>
<tr><th id="2835">2835</th><td></td></tr>
<tr><th id="2836">2836</th><td>	<a class="local col5 ref" href="#295basic" title='basic' data-ref="295basic" data-ref-filename="295basic">basic</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="#183" title="0x0480" data-ref="_M/MSR_IA32_VMX_BASIC">MSR_IA32_VMX_BASIC</a>);</td></tr>
<tr><th id="2837">2837</th><td>	<a class="local col0 ref" href="#300has_true" title='has_true' data-ref="300has_true" data-ref-filename="300has_true">has_true</a> = (<a class="local col5 ref" href="#295basic" title='basic' data-ref="295basic" data-ref-filename="295basic">basic</a> &amp; <a class="macro" href="#192" title="(((uintmax_t)(55) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((55) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_VMX_BASIC_TRUE_CTLS">IA32_VMX_BASIC_TRUE_CTLS</a>) != <var>0</var>;</td></tr>
<tr><th id="2838">2838</th><td></td></tr>
<tr><th id="2839">2839</th><td>	<a class="local col6 ref" href="#296val" title='val' data-ref="296val" data-ref-filename="296val">val</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="local col0 ref" href="#290msr_ctls" title='msr_ctls' data-ref="290msr_ctls" data-ref-filename="290msr_ctls">msr_ctls</a>);</td></tr>
<tr><th id="2840">2840</th><td>	<b>if</b> (<a class="local col0 ref" href="#300has_true" title='has_true' data-ref="300has_true" data-ref-filename="300has_true">has_true</a>) {</td></tr>
<tr><th id="2841">2841</th><td>		<a class="local col7 ref" href="#297true_val" title='true_val' data-ref="297true_val" data-ref-filename="297true_val">true_val</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="local col1 ref" href="#291msr_true_ctls" title='msr_true_ctls' data-ref="291msr_true_ctls" data-ref-filename="291msr_true_ctls">msr_true_ctls</a>);</td></tr>
<tr><th id="2842">2842</th><td>	} <b>else</b> {</td></tr>
<tr><th id="2843">2843</th><td>		<a class="local col7 ref" href="#297true_val" title='true_val' data-ref="297true_val" data-ref-filename="297true_val">true_val</a> = <a class="local col6 ref" href="#296val" title='val' data-ref="296val" data-ref-filename="296val">val</a>;</td></tr>
<tr><th id="2844">2844</th><td>	}</td></tr>
<tr><th id="2845">2845</th><td></td></tr>
<tr><th id="2846">2846</th><td><u>#define <dfn class="macro" id="_M/ONE_ALLOWED" data-ref="_M/ONE_ALLOWED">ONE_ALLOWED</dfn>(msrval, bitoff) \</u></td></tr>
<tr><th id="2847">2847</th><td><u>	((msrval &amp; __BIT(32 + bitoff)) != 0)</u></td></tr>
<tr><th id="2848">2848</th><td><u>#define <dfn class="macro" id="_M/ZERO_ALLOWED" data-ref="_M/ZERO_ALLOWED">ZERO_ALLOWED</dfn>(msrval, bitoff) \</u></td></tr>
<tr><th id="2849">2849</th><td><u>	((msrval &amp; __BIT(bitoff)) == 0)</u></td></tr>
<tr><th id="2850">2850</th><td></td></tr>
<tr><th id="2851">2851</th><td>	<b>for</b> (<a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a> = <var>0</var>; <a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a> &lt; <var>32</var>; <a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>++) {</td></tr>
<tr><th id="2852">2852</th><td>		<a class="local col8 ref" href="#298one_allowed" title='one_allowed' data-ref="298one_allowed" data-ref-filename="298one_allowed">one_allowed</a> = <a class="macro" href="#2846" title="((true_val &amp; (((uintmax_t)(32 + i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((32 + i) &amp; (8 * sizeof(uintmax_t) - 1))))) != 0)" data-ref="_M/ONE_ALLOWED">ONE_ALLOWED</a>(<a class="local col7 ref" href="#297true_val" title='true_val' data-ref="297true_val" data-ref-filename="297true_val">true_val</a>, <a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>);</td></tr>
<tr><th id="2853">2853</th><td>		<a class="local col9 ref" href="#299zero_allowed" title='zero_allowed' data-ref="299zero_allowed" data-ref-filename="299zero_allowed">zero_allowed</a> = <a class="macro" href="#2848" title="((true_val &amp; (((uintmax_t)(i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((i) &amp; (8 * sizeof(uintmax_t) - 1))))) == 0)" data-ref="_M/ZERO_ALLOWED">ZERO_ALLOWED</a>(<a class="local col7 ref" href="#297true_val" title='true_val' data-ref="297true_val" data-ref-filename="297true_val">true_val</a>, <a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>);</td></tr>
<tr><th id="2854">2854</th><td></td></tr>
<tr><th id="2855">2855</th><td>		<b>if</b> (<a class="local col9 ref" href="#299zero_allowed" title='zero_allowed' data-ref="299zero_allowed" data-ref-filename="299zero_allowed">zero_allowed</a> &amp;&amp; !<a class="local col8 ref" href="#298one_allowed" title='one_allowed' data-ref="298one_allowed" data-ref-filename="298one_allowed">one_allowed</a>) {</td></tr>
<tr><th id="2856">2856</th><td>			<b>if</b> (<a class="local col2 ref" href="#292set_one" title='set_one' data-ref="292set_one" data-ref-filename="292set_one">set_one</a> &amp; <a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((i) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>))</td></tr>
<tr><th id="2857">2857</th><td>				<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="2858">2858</th><td>			*<a class="local col4 ref" href="#294res" title='res' data-ref="294res" data-ref-filename="294res">res</a> &amp;= ~<a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((i) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>);</td></tr>
<tr><th id="2859">2859</th><td>		} <b>else</b> <b>if</b> (<a class="local col8 ref" href="#298one_allowed" title='one_allowed' data-ref="298one_allowed" data-ref-filename="298one_allowed">one_allowed</a> &amp;&amp; !<a class="local col9 ref" href="#299zero_allowed" title='zero_allowed' data-ref="299zero_allowed" data-ref-filename="299zero_allowed">zero_allowed</a>) {</td></tr>
<tr><th id="2860">2860</th><td>			<b>if</b> (<a class="local col3 ref" href="#293set_zero" title='set_zero' data-ref="293set_zero" data-ref-filename="293set_zero">set_zero</a> &amp; <a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((i) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>))</td></tr>
<tr><th id="2861">2861</th><td>				<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="2862">2862</th><td>			*<a class="local col4 ref" href="#294res" title='res' data-ref="294res" data-ref-filename="294res">res</a> |= <a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((i) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>);</td></tr>
<tr><th id="2863">2863</th><td>		} <b>else</b> {</td></tr>
<tr><th id="2864">2864</th><td>			<b>if</b> (<a class="local col3 ref" href="#293set_zero" title='set_zero' data-ref="293set_zero" data-ref-filename="293set_zero">set_zero</a> &amp; <a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((i) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>)) {</td></tr>
<tr><th id="2865">2865</th><td>				*<a class="local col4 ref" href="#294res" title='res' data-ref="294res" data-ref-filename="294res">res</a> &amp;= ~<a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((i) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>);</td></tr>
<tr><th id="2866">2866</th><td>			} <b>else</b> <b>if</b> (<a class="local col2 ref" href="#292set_one" title='set_one' data-ref="292set_one" data-ref-filename="292set_one">set_one</a> &amp; <a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((i) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>)) {</td></tr>
<tr><th id="2867">2867</th><td>				*<a class="local col4 ref" href="#294res" title='res' data-ref="294res" data-ref-filename="294res">res</a> |= <a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((i) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>);</td></tr>
<tr><th id="2868">2868</th><td>			} <b>else</b> <b>if</b> (!<a class="local col0 ref" href="#300has_true" title='has_true' data-ref="300has_true" data-ref-filename="300has_true">has_true</a>) {</td></tr>
<tr><th id="2869">2869</th><td>				*<a class="local col4 ref" href="#294res" title='res' data-ref="294res" data-ref-filename="294res">res</a> &amp;= ~<a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((i) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>);</td></tr>
<tr><th id="2870">2870</th><td>			} <b>else</b> <b>if</b> (<a class="macro" href="#2848" title="((val &amp; (((uintmax_t)(i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((i) &amp; (8 * sizeof(uintmax_t) - 1))))) == 0)" data-ref="_M/ZERO_ALLOWED">ZERO_ALLOWED</a>(<a class="local col6 ref" href="#296val" title='val' data-ref="296val" data-ref-filename="296val">val</a>, <a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>)) {</td></tr>
<tr><th id="2871">2871</th><td>				*<a class="local col4 ref" href="#294res" title='res' data-ref="294res" data-ref-filename="294res">res</a> &amp;= ~<a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((i) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>);</td></tr>
<tr><th id="2872">2872</th><td>			} <b>else</b> <b>if</b> (<a class="macro" href="#2846" title="((val &amp; (((uintmax_t)(32 + i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((32 + i) &amp; (8 * sizeof(uintmax_t) - 1))))) != 0)" data-ref="_M/ONE_ALLOWED">ONE_ALLOWED</a>(<a class="local col6 ref" href="#296val" title='val' data-ref="296val" data-ref-filename="296val">val</a>, <a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>)) {</td></tr>
<tr><th id="2873">2873</th><td>				*<a class="local col4 ref" href="#294res" title='res' data-ref="294res" data-ref-filename="294res">res</a> |= <a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(i) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((i) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<a class="local col1 ref" href="#301i" title='i' data-ref="301i" data-ref-filename="301i">i</a>);</td></tr>
<tr><th id="2874">2874</th><td>			} <b>else</b> {</td></tr>
<tr><th id="2875">2875</th><td>				<b>return</b> -<var>1</var>;</td></tr>
<tr><th id="2876">2876</th><td>			}</td></tr>
<tr><th id="2877">2877</th><td>		}</td></tr>
<tr><th id="2878">2878</th><td>	}</td></tr>
<tr><th id="2879">2879</th><td></td></tr>
<tr><th id="2880">2880</th><td>	<b>return</b> <var>0</var>;</td></tr>
<tr><th id="2881">2881</th><td>}</td></tr>
<tr><th id="2882">2882</th><td></td></tr>
<tr><th id="2883">2883</th><td><em>static</em> <a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a></td></tr>
<tr><th id="2884">2884</th><td><dfn class="tu decl def fn" id="vmx_ident" title='vmx_ident' data-type='_Bool vmx_ident()' data-ref="vmx_ident" data-ref-filename="vmx_ident">vmx_ident</dfn>(<em>void</em>)</td></tr>
<tr><th id="2885">2885</th><td>{</td></tr>
<tr><th id="2886">2886</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="302msr" title='msr' data-type='uint64_t' data-ref="302msr" data-ref-filename="302msr">msr</dfn>;</td></tr>
<tr><th id="2887">2887</th><td>	<em>int</em> <dfn class="local col3 decl" id="303ret" title='ret' data-type='int' data-ref="303ret" data-ref-filename="303ret">ret</dfn>;</td></tr>
<tr><th id="2888">2888</th><td></td></tr>
<tr><th id="2889">2889</th><td>	<b>if</b> (!(<a class="ref" href="../../../arch/x86/include/cpuvar.h.html#cpu_feature" title='cpu_feature' data-ref="cpu_feature" data-ref-filename="cpu_feature">cpu_feature</a>[<var>1</var>] &amp; <a class="macro" href="../../../arch/x86/include/specialreg.h.html#233" title="0x00000020" data-ref="_M/CPUID2_VMX">CPUID2_VMX</a>)) {</td></tr>
<tr><th id="2890">2890</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2891">2891</th><td>	}</td></tr>
<tr><th id="2892">2892</th><td></td></tr>
<tr><th id="2893">2893</th><td>	<a class="local col2 ref" href="#302msr" title='msr' data-ref="302msr" data-ref-filename="302msr">msr</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="#178" title="0x003A" data-ref="_M/MSR_IA32_FEATURE_CONTROL">MSR_IA32_FEATURE_CONTROL</a>);</td></tr>
<tr><th id="2894">2894</th><td>	<b>if</b> ((<a class="local col2 ref" href="#302msr" title='msr' data-ref="302msr" data-ref-filename="302msr">msr</a> &amp; <a class="macro" href="#179" title="(((uintmax_t)(0) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((0) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_FEATURE_CONTROL_LOCK">IA32_FEATURE_CONTROL_LOCK</a>) == <var>0</var>) {</td></tr>
<tr><th id="2895">2895</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2896">2896</th><td>	}</td></tr>
<tr><th id="2897">2897</th><td>	<b>if</b> ((<a class="local col2 ref" href="#302msr" title='msr' data-ref="302msr" data-ref-filename="302msr">msr</a> &amp; <a class="macro" href="#181" title="(((uintmax_t)(2) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((2) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_FEATURE_CONTROL_OUT_SMX">IA32_FEATURE_CONTROL_OUT_SMX</a>) == <var>0</var>) {</td></tr>
<tr><th id="2898">2898</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2899">2899</th><td>	}</td></tr>
<tr><th id="2900">2900</th><td></td></tr>
<tr><th id="2901">2901</th><td>	<a class="local col2 ref" href="#302msr" title='msr' data-ref="302msr" data-ref-filename="302msr">msr</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="#183" title="0x0480" data-ref="_M/MSR_IA32_VMX_BASIC">MSR_IA32_VMX_BASIC</a>);</td></tr>
<tr><th id="2902">2902</th><td>	<b>if</b> ((<a class="local col2 ref" href="#302msr" title='msr' data-ref="302msr" data-ref-filename="302msr">msr</a> &amp; <a class="macro" href="#191" title="(((uintmax_t)(54) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((54) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_VMX_BASIC_IO_REPORT">IA32_VMX_BASIC_IO_REPORT</a>) == <var>0</var>) {</td></tr>
<tr><th id="2903">2903</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2904">2904</th><td>	}</td></tr>
<tr><th id="2905">2905</th><td>	<b>if</b> (<a class="macro" href="../../../sys/cdefs.h.html#606" title="(((msr) &amp; ((((((uintmax_t)((( ((53))&gt;((50)))?((53)):((50))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((53))&gt;((50)))?((53)):((50))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((53))&lt;=((50)))?((53)):((50)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((53))&lt;=((50)))?((53)):((50)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) / (((((((((uintmax_t)((( ((53))&gt;((50)))?((53)):((50))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((53))&gt;((50)))?((53)):((50))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((53))&lt;=((50)))?((53)):((50)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((53))&lt;=((50)))?((53)):((50)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((53))&gt;((50)))?((53)):((50))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((53))&gt;((50)))?((53)):((50))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((53))&lt;=((50)))?((53)):((50)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((53))&lt;=((50)))?((53)):((50)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((53))&gt;((50)))?((53)):((50))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((53))&gt;((50)))?((53)):((50))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((53))&lt;=((50)))?((53)):((50)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((53))&lt;=((50)))?((53)):((50)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTOUT">__SHIFTOUT</a>(<a class="local col2 ref" href="#302msr" title='msr' data-ref="302msr" data-ref-filename="302msr">msr</a>, <a class="macro" href="#188" title="(((((uintmax_t)((( ((53))&gt;((50)))?((53)):((50))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((53))&gt;((50)))?((53)):((50))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((53))&lt;=((50)))?((53)):((50)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((53))&lt;=((50)))?((53)):((50)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/IA32_VMX_BASIC_MEM_TYPE">IA32_VMX_BASIC_MEM_TYPE</a>) != <a class="macro" href="#190" title="6" data-ref="_M/MEM_TYPE_WB">MEM_TYPE_WB</a>) {</td></tr>
<tr><th id="2906">2906</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2907">2907</th><td>	}</td></tr>
<tr><th id="2908">2908</th><td></td></tr>
<tr><th id="2909">2909</th><td>	<i>/* PG and PE are reported, even if Unrestricted Guests is supported. */</i></td></tr>
<tr><th id="2910">2910</th><td>	<a class="tu ref" href="#vmx_cr0_fixed0" title='vmx_cr0_fixed0' data-use='w' data-ref="vmx_cr0_fixed0" data-ref-filename="vmx_cr0_fixed0">vmx_cr0_fixed0</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="#205" title="0x0486" data-ref="_M/MSR_IA32_VMX_CR0_FIXED0">MSR_IA32_VMX_CR0_FIXED0</a>) &amp; ~(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#73" title="0x80000000" data-ref="_M/CR0_PG">CR0_PG</a>|<a class="macro" href="../../../arch/x86/include/specialreg.h.html#63" title="0x00000001" data-ref="_M/CR0_PE">CR0_PE</a>);</td></tr>
<tr><th id="2911">2911</th><td>	<a class="tu ref" href="#vmx_cr0_fixed1" title='vmx_cr0_fixed1' data-use='w' data-ref="vmx_cr0_fixed1" data-ref-filename="vmx_cr0_fixed1">vmx_cr0_fixed1</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="#206" title="0x0487" data-ref="_M/MSR_IA32_VMX_CR0_FIXED1">MSR_IA32_VMX_CR0_FIXED1</a>) | (<a class="macro" href="../../../arch/x86/include/specialreg.h.html#73" title="0x80000000" data-ref="_M/CR0_PG">CR0_PG</a>|<a class="macro" href="../../../arch/x86/include/specialreg.h.html#63" title="0x00000001" data-ref="_M/CR0_PE">CR0_PE</a>);</td></tr>
<tr><th id="2912">2912</th><td>	<a class="local col3 ref" href="#303ret" title='ret' data-ref="303ret" data-ref-filename="303ret">ret</a> = <a class="tu ref fn" href="#vmx_check_cr" title='vmx_check_cr' data-use='c' data-ref="vmx_check_cr" data-ref-filename="vmx_check_cr">vmx_check_cr</a>(<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#213" title='rcr0' data-ref="rcr0" data-ref-filename="rcr0">rcr0</a>(), <a class="tu ref" href="#vmx_cr0_fixed0" title='vmx_cr0_fixed0' data-use='r' data-ref="vmx_cr0_fixed0" data-ref-filename="vmx_cr0_fixed0">vmx_cr0_fixed0</a>, <a class="tu ref" href="#vmx_cr0_fixed1" title='vmx_cr0_fixed1' data-use='r' data-ref="vmx_cr0_fixed1" data-ref-filename="vmx_cr0_fixed1">vmx_cr0_fixed1</a>);</td></tr>
<tr><th id="2913">2913</th><td>	<b>if</b> (<a class="local col3 ref" href="#303ret" title='ret' data-ref="303ret" data-ref-filename="303ret">ret</a> == -<var>1</var>) {</td></tr>
<tr><th id="2914">2914</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2915">2915</th><td>	}</td></tr>
<tr><th id="2916">2916</th><td></td></tr>
<tr><th id="2917">2917</th><td>	<a class="tu ref" href="#vmx_cr4_fixed0" title='vmx_cr4_fixed0' data-use='w' data-ref="vmx_cr4_fixed0" data-ref-filename="vmx_cr4_fixed0">vmx_cr4_fixed0</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="#207" title="0x0488" data-ref="_M/MSR_IA32_VMX_CR4_FIXED0">MSR_IA32_VMX_CR4_FIXED0</a>);</td></tr>
<tr><th id="2918">2918</th><td>	<a class="tu ref" href="#vmx_cr4_fixed1" title='vmx_cr4_fixed1' data-use='w' data-ref="vmx_cr4_fixed1" data-ref-filename="vmx_cr4_fixed1">vmx_cr4_fixed1</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="#208" title="0x0489" data-ref="_M/MSR_IA32_VMX_CR4_FIXED1">MSR_IA32_VMX_CR4_FIXED1</a>);</td></tr>
<tr><th id="2919">2919</th><td>	<a class="local col3 ref" href="#303ret" title='ret' data-ref="303ret" data-ref-filename="303ret">ret</a> = <a class="tu ref fn" href="#vmx_check_cr" title='vmx_check_cr' data-use='c' data-ref="vmx_check_cr" data-ref-filename="vmx_check_cr">vmx_check_cr</a>(<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#222" title='rcr4' data-ref="rcr4" data-ref-filename="rcr4">rcr4</a>() | <a class="macro" href="../../../arch/x86/include/specialreg.h.html#112" title="0x00002000" data-ref="_M/CR4_VMXE">CR4_VMXE</a>, <a class="tu ref" href="#vmx_cr4_fixed0" title='vmx_cr4_fixed0' data-use='r' data-ref="vmx_cr4_fixed0" data-ref-filename="vmx_cr4_fixed0">vmx_cr4_fixed0</a>, <a class="tu ref" href="#vmx_cr4_fixed1" title='vmx_cr4_fixed1' data-use='r' data-ref="vmx_cr4_fixed1" data-ref-filename="vmx_cr4_fixed1">vmx_cr4_fixed1</a>);</td></tr>
<tr><th id="2920">2920</th><td>	<b>if</b> (<a class="local col3 ref" href="#303ret" title='ret' data-ref="303ret" data-ref-filename="303ret">ret</a> == -<var>1</var>) {</td></tr>
<tr><th id="2921">2921</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2922">2922</th><td>	}</td></tr>
<tr><th id="2923">2923</th><td></td></tr>
<tr><th id="2924">2924</th><td>	<i>/* Init the CTLSs right now, and check for errors. */</i></td></tr>
<tr><th id="2925">2925</th><td>	<a class="local col3 ref" href="#303ret" title='ret' data-ref="303ret" data-ref-filename="303ret">ret</a> = <a class="tu ref fn" href="#vmx_init_ctls" title='vmx_init_ctls' data-use='c' data-ref="vmx_init_ctls" data-ref-filename="vmx_init_ctls">vmx_init_ctls</a>(</td></tr>
<tr><th id="2926">2926</th><td>	    <a class="macro" href="#194" title="0x0481" data-ref="_M/MSR_IA32_VMX_PINBASED_CTLS">MSR_IA32_VMX_PINBASED_CTLS</a>, <a class="macro" href="#200" title="0x048D" data-ref="_M/MSR_IA32_VMX_TRUE_PINBASED_CTLS">MSR_IA32_VMX_TRUE_PINBASED_CTLS</a>,</td></tr>
<tr><th id="2927">2927</th><td>	    <a class="macro" href="#626" title="((((uintmax_t)(0) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((0) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(3) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((3) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(5) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((5) &amp; (8 * sizeof(uintmax_t) - 1)))))" data-ref="_M/VMX_PINBASED_CTLS_ONE">VMX_PINBASED_CTLS_ONE</a>, <a class="macro" href="#631" title="0" data-ref="_M/VMX_PINBASED_CTLS_ZERO">VMX_PINBASED_CTLS_ZERO</a>,</td></tr>
<tr><th id="2928">2928</th><td>	    &amp;<a class="tu ref" href="#vmx_pinbased_ctls" title='vmx_pinbased_ctls' data-use='a' data-ref="vmx_pinbased_ctls" data-ref-filename="vmx_pinbased_ctls">vmx_pinbased_ctls</a>);</td></tr>
<tr><th id="2929">2929</th><td>	<b>if</b> (<a class="local col3 ref" href="#303ret" title='ret' data-ref="303ret" data-ref-filename="303ret">ret</a> == -<var>1</var>) {</td></tr>
<tr><th id="2930">2930</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2931">2931</th><td>	}</td></tr>
<tr><th id="2932">2932</th><td>	<a class="local col3 ref" href="#303ret" title='ret' data-ref="303ret" data-ref-filename="303ret">ret</a> = <a class="tu ref fn" href="#vmx_init_ctls" title='vmx_init_ctls' data-use='c' data-ref="vmx_init_ctls" data-ref-filename="vmx_init_ctls">vmx_init_ctls</a>(</td></tr>
<tr><th id="2933">2933</th><td>	    <a class="macro" href="#195" title="0x0482" data-ref="_M/MSR_IA32_VMX_PROCBASED_CTLS">MSR_IA32_VMX_PROCBASED_CTLS</a>, <a class="macro" href="#201" title="0x048E" data-ref="_M/MSR_IA32_VMX_TRUE_PROCBASED_CTLS">MSR_IA32_VMX_TRUE_PROCBASED_CTLS</a>,</td></tr>
<tr><th id="2934">2934</th><td>	    <a class="macro" href="#633" title="((((uintmax_t)(3) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((3) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(7) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((7) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(10) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((10) &amp; (8 * sizeof(uintmax_t) - 1)))) | (((uintmax_t)(11) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((11) &amp; (8 * sizeof(uintmax_t) - 1)))) | (((uintmax_t)(19) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((19) &amp; (8 * sizeof(uintmax_t) - 1)))) | (((uintmax_t)(20) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((20) &amp; (8 * sizeof(uintmax_t) - 1)))) | (((uintmax_t)(24) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((24) &amp; (8 * sizeof(uintmax_t) - 1)))) | (((uintmax_t)(28) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((28) &amp; (8 * sizeof(uintmax_t) - 1)))) | (((uintmax_t)(29) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((29) &amp; (8 * sizeof(uintmax_t) - 1)))) | (((uintmax_t)(31) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((31) &amp; (8 * sizeof(uintmax_t) - 1)))))" data-ref="_M/VMX_PROCBASED_CTLS_ONE">VMX_PROCBASED_CTLS_ONE</a>, <a class="macro" href="#645" title="((((uintmax_t)(15) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((15) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(16) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((16) &amp; (8 * sizeof(uintmax_t) - 1)))))" data-ref="_M/VMX_PROCBASED_CTLS_ZERO">VMX_PROCBASED_CTLS_ZERO</a>,</td></tr>
<tr><th id="2935">2935</th><td>	    &amp;<a class="tu ref" href="#vmx_procbased_ctls" title='vmx_procbased_ctls' data-use='a' data-ref="vmx_procbased_ctls" data-ref-filename="vmx_procbased_ctls">vmx_procbased_ctls</a>);</td></tr>
<tr><th id="2936">2936</th><td>	<b>if</b> (<a class="local col3 ref" href="#303ret" title='ret' data-ref="303ret" data-ref-filename="303ret">ret</a> == -<var>1</var>) {</td></tr>
<tr><th id="2937">2937</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2938">2938</th><td>	}</td></tr>
<tr><th id="2939">2939</th><td>	<a class="local col3 ref" href="#303ret" title='ret' data-ref="303ret" data-ref-filename="303ret">ret</a> = <a class="tu ref fn" href="#vmx_init_ctls" title='vmx_init_ctls' data-use='c' data-ref="vmx_init_ctls" data-ref-filename="vmx_init_ctls">vmx_init_ctls</a>(</td></tr>
<tr><th id="2940">2940</th><td>	    <a class="macro" href="#198" title="0x048B" data-ref="_M/MSR_IA32_VMX_PROCBASED_CTLS2">MSR_IA32_VMX_PROCBASED_CTLS2</a>, <a class="macro" href="#198" title="0x048B" data-ref="_M/MSR_IA32_VMX_PROCBASED_CTLS2">MSR_IA32_VMX_PROCBASED_CTLS2</a>,</td></tr>
<tr><th id="2941">2941</th><td>	    <a class="macro" href="#649" title="((((uintmax_t)(1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((1) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(5) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((5) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(7) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((7) &amp; (8 * sizeof(uintmax_t) - 1)))))" data-ref="_M/VMX_PROCBASED_CTLS2_ONE">VMX_PROCBASED_CTLS2_ONE</a>, <a class="macro" href="#654" title="0" data-ref="_M/VMX_PROCBASED_CTLS2_ZERO">VMX_PROCBASED_CTLS2_ZERO</a>,</td></tr>
<tr><th id="2942">2942</th><td>	    &amp;<a class="tu ref" href="#vmx_procbased_ctls2" title='vmx_procbased_ctls2' data-use='a' data-ref="vmx_procbased_ctls2" data-ref-filename="vmx_procbased_ctls2">vmx_procbased_ctls2</a>);</td></tr>
<tr><th id="2943">2943</th><td>	<b>if</b> (<a class="local col3 ref" href="#303ret" title='ret' data-ref="303ret" data-ref-filename="303ret">ret</a> == -<var>1</var>) {</td></tr>
<tr><th id="2944">2944</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2945">2945</th><td>	}</td></tr>
<tr><th id="2946">2946</th><td>	<a class="local col3 ref" href="#303ret" title='ret' data-ref="303ret" data-ref-filename="303ret">ret</a> = <a class="tu ref fn" href="#vmx_init_ctls" title='vmx_init_ctls' data-use='c' data-ref="vmx_init_ctls" data-ref-filename="vmx_init_ctls">vmx_init_ctls</a>(</td></tr>
<tr><th id="2947">2947</th><td>	    <a class="macro" href="#197" title="0x0484" data-ref="_M/MSR_IA32_VMX_ENTRY_CTLS">MSR_IA32_VMX_ENTRY_CTLS</a>, <a class="macro" href="#203" title="0x0490" data-ref="_M/MSR_IA32_VMX_TRUE_ENTRY_CTLS">MSR_IA32_VMX_TRUE_ENTRY_CTLS</a>,</td></tr>
<tr><th id="2948">2948</th><td>	    <a class="macro" href="#656" title="((((uintmax_t)(2) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((2) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(15) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((15) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(14) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((14) &amp; (8 * sizeof(uintmax_t) - 1)))))" data-ref="_M/VMX_ENTRY_CTLS_ONE">VMX_ENTRY_CTLS_ONE</a>, <a class="macro" href="#661" title="((((uintmax_t)(10) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((10) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(11) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((11) &amp; (8 * sizeof(uintmax_t) - 1)))))" data-ref="_M/VMX_ENTRY_CTLS_ZERO">VMX_ENTRY_CTLS_ZERO</a>,</td></tr>
<tr><th id="2949">2949</th><td>	    &amp;<a class="tu ref" href="#vmx_entry_ctls" title='vmx_entry_ctls' data-use='a' data-ref="vmx_entry_ctls" data-ref-filename="vmx_entry_ctls">vmx_entry_ctls</a>);</td></tr>
<tr><th id="2950">2950</th><td>	<b>if</b> (<a class="local col3 ref" href="#303ret" title='ret' data-ref="303ret" data-ref-filename="303ret">ret</a> == -<var>1</var>) {</td></tr>
<tr><th id="2951">2951</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2952">2952</th><td>	}</td></tr>
<tr><th id="2953">2953</th><td>	<a class="local col3 ref" href="#303ret" title='ret' data-ref="303ret" data-ref-filename="303ret">ret</a> = <a class="tu ref fn" href="#vmx_init_ctls" title='vmx_init_ctls' data-use='c' data-ref="vmx_init_ctls" data-ref-filename="vmx_init_ctls">vmx_init_ctls</a>(</td></tr>
<tr><th id="2954">2954</th><td>	    <a class="macro" href="#196" title="0x0483" data-ref="_M/MSR_IA32_VMX_EXIT_CTLS">MSR_IA32_VMX_EXIT_CTLS</a>, <a class="macro" href="#202" title="0x048F" data-ref="_M/MSR_IA32_VMX_TRUE_EXIT_CTLS">MSR_IA32_VMX_TRUE_EXIT_CTLS</a>,</td></tr>
<tr><th id="2955">2955</th><td>	    <a class="macro" href="#665" title="((((uintmax_t)(2) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((2) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(9) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((9) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(18) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((18) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(19) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((19) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(20) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((20) &amp; (8 * sizeof(uintmax_t) - 1))))| (((uintmax_t)(21) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((21) &amp; (8 * sizeof(uintmax_t) - 1)))))" data-ref="_M/VMX_EXIT_CTLS_ONE">VMX_EXIT_CTLS_ONE</a>, <a class="macro" href="#673" title="0" data-ref="_M/VMX_EXIT_CTLS_ZERO">VMX_EXIT_CTLS_ZERO</a>,</td></tr>
<tr><th id="2956">2956</th><td>	    &amp;<a class="tu ref" href="#vmx_exit_ctls" title='vmx_exit_ctls' data-use='a' data-ref="vmx_exit_ctls" data-ref-filename="vmx_exit_ctls">vmx_exit_ctls</a>);</td></tr>
<tr><th id="2957">2957</th><td>	<b>if</b> (<a class="local col3 ref" href="#303ret" title='ret' data-ref="303ret" data-ref-filename="303ret">ret</a> == -<var>1</var>) {</td></tr>
<tr><th id="2958">2958</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2959">2959</th><td>	}</td></tr>
<tr><th id="2960">2960</th><td></td></tr>
<tr><th id="2961">2961</th><td>	<a class="local col2 ref" href="#302msr" title='msr' data-ref="302msr" data-ref-filename="302msr">msr</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="#210" title="0x048C" data-ref="_M/MSR_IA32_VMX_EPT_VPID_CAP">MSR_IA32_VMX_EPT_VPID_CAP</a>);</td></tr>
<tr><th id="2962">2962</th><td>	<b>if</b> ((<a class="local col2 ref" href="#302msr" title='msr' data-ref="302msr" data-ref-filename="302msr">msr</a> &amp; <a class="macro" href="#211" title="(((uintmax_t)(6) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((6) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_VMX_EPT_VPID_WALKLENGTH_4">IA32_VMX_EPT_VPID_WALKLENGTH_4</a>) == <var>0</var>) {</td></tr>
<tr><th id="2963">2963</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2964">2964</th><td>	}</td></tr>
<tr><th id="2965">2965</th><td>	<b>if</b> ((<a class="local col2 ref" href="#302msr" title='msr' data-ref="302msr" data-ref-filename="302msr">msr</a> &amp; <a class="macro" href="#214" title="(((uintmax_t)(20) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((20) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_VMX_EPT_VPID_INVEPT">IA32_VMX_EPT_VPID_INVEPT</a>) == <var>0</var>) {</td></tr>
<tr><th id="2966">2966</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2967">2967</th><td>	}</td></tr>
<tr><th id="2968">2968</th><td>	<b>if</b> ((<a class="local col2 ref" href="#302msr" title='msr' data-ref="302msr" data-ref-filename="302msr">msr</a> &amp; <a class="macro" href="#218" title="(((uintmax_t)(32) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((32) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_VMX_EPT_VPID_INVVPID">IA32_VMX_EPT_VPID_INVVPID</a>) == <var>0</var>) {</td></tr>
<tr><th id="2969">2969</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2970">2970</th><td>	}</td></tr>
<tr><th id="2971">2971</th><td>	<b>if</b> ((<a class="local col2 ref" href="#302msr" title='msr' data-ref="302msr" data-ref-filename="302msr">msr</a> &amp; <a class="macro" href="#215" title="(((uintmax_t)(21) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((21) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_VMX_EPT_VPID_FLAGS_AD">IA32_VMX_EPT_VPID_FLAGS_AD</a>) != <var>0</var>) {</td></tr>
<tr><th id="2972">2972</th><td>		<a class="ref" href="#pmap_ept_has_ad" title='pmap_ept_has_ad' data-ref="pmap_ept_has_ad" data-ref-filename="pmap_ept_has_ad">pmap_ept_has_ad</a> = <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="2973">2973</th><td>	} <b>else</b> {</td></tr>
<tr><th id="2974">2974</th><td>		<a class="ref" href="#pmap_ept_has_ad" title='pmap_ept_has_ad' data-ref="pmap_ept_has_ad" data-ref-filename="pmap_ept_has_ad">pmap_ept_has_ad</a> = <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2975">2975</th><td>	}</td></tr>
<tr><th id="2976">2976</th><td>	<b>if</b> (!(<a class="local col2 ref" href="#302msr" title='msr' data-ref="302msr" data-ref-filename="302msr">msr</a> &amp; <a class="macro" href="#212" title="(((uintmax_t)(8) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((8) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_VMX_EPT_VPID_UC">IA32_VMX_EPT_VPID_UC</a>) &amp;&amp; !(<a class="local col2 ref" href="#302msr" title='msr' data-ref="302msr" data-ref-filename="302msr">msr</a> &amp; <a class="macro" href="#213" title="(((uintmax_t)(14) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((14) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_VMX_EPT_VPID_WB">IA32_VMX_EPT_VPID_WB</a>)) {</td></tr>
<tr><th id="2977">2977</th><td>		<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>;</td></tr>
<tr><th id="2978">2978</th><td>	}</td></tr>
<tr><th id="2979">2979</th><td></td></tr>
<tr><th id="2980">2980</th><td>	<b>return</b> <a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>;</td></tr>
<tr><th id="2981">2981</th><td>}</td></tr>
<tr><th id="2982">2982</th><td></td></tr>
<tr><th id="2983">2983</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2984">2984</th><td><dfn class="tu decl def fn" id="vmx_init_asid" title='vmx_init_asid' data-type='void vmx_init_asid(uint32_t maxasid)' data-ref="vmx_init_asid" data-ref-filename="vmx_init_asid">vmx_init_asid</dfn>(<a class="typedef" href="../../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="local col4 decl" id="304maxasid" title='maxasid' data-type='uint32_t' data-ref="304maxasid" data-ref-filename="304maxasid">maxasid</dfn>)</td></tr>
<tr><th id="2985">2985</th><td>{</td></tr>
<tr><th id="2986">2986</th><td>	<a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col5 decl" id="305allocsz" title='allocsz' data-type='size_t' data-ref="305allocsz" data-ref-filename="305allocsz">allocsz</dfn>;</td></tr>
<tr><th id="2987">2987</th><td></td></tr>
<tr><th id="2988">2988</th><td>	<a class="ref fn" href="../../../sys/mutex.h.html#mutex_init" title='mutex_init' data-ref="mutex_init" data-ref-filename="mutex_init">mutex_init</a>(&amp;<a class="tu ref" href="#vmx_asidlock" title='vmx_asidlock' data-use='a' data-ref="vmx_asidlock" data-ref-filename="vmx_asidlock">vmx_asidlock</a>, <a class="enum" href="../../../sys/mutex.h.html#MUTEX_DEFAULT" title='MUTEX_DEFAULT' data-ref="MUTEX_DEFAULT" data-ref-filename="MUTEX_DEFAULT">MUTEX_DEFAULT</a>, <a class="macro" href="../../../arch/x86/include/intrdefs.h.html#7" title="0x0" data-ref="_M/IPL_NONE">IPL_NONE</a>);</td></tr>
<tr><th id="2989">2989</th><td></td></tr>
<tr><th id="2990">2990</th><td>	<a class="tu ref" href="#vmx_maxasid" title='vmx_maxasid' data-use='w' data-ref="vmx_maxasid" data-ref-filename="vmx_maxasid">vmx_maxasid</a> = <a class="local col4 ref" href="#304maxasid" title='maxasid' data-ref="304maxasid" data-ref-filename="304maxasid">maxasid</a>;</td></tr>
<tr><th id="2991">2991</th><td>	<a class="local col5 ref" href="#305allocsz" title='allocsz' data-ref="305allocsz" data-ref-filename="305allocsz">allocsz</a> = <a class="macro" href="../../../sys/param.h.html#390" title="((((maxasid)+((8)-1))/(8))*(8))" data-ref="_M/roundup">roundup</a>(<a class="local col4 ref" href="#304maxasid" title='maxasid' data-ref="304maxasid" data-ref-filename="304maxasid">maxasid</a>, <var>8</var>) / <var>8</var>;</td></tr>
<tr><th id="2992">2992</th><td>	<a class="tu ref" href="#vmx_asidmap" title='vmx_asidmap' data-use='w' data-ref="vmx_asidmap" data-ref-filename="vmx_asidmap">vmx_asidmap</a> = <a class="ref fn" href="../../../sys/kmem.h.html#kmem_zalloc" title='kmem_zalloc' data-ref="kmem_zalloc" data-ref-filename="kmem_zalloc">kmem_zalloc</a>(<a class="local col5 ref" href="#305allocsz" title='allocsz' data-ref="305allocsz" data-ref-filename="305allocsz">allocsz</a>, <a class="macro" href="../../../sys/kmem.h.html#57" title="0x00000001" data-ref="_M/KM_SLEEP">KM_SLEEP</a>);</td></tr>
<tr><th id="2993">2993</th><td></td></tr>
<tr><th id="2994">2994</th><td>	<i>/* ASID 0 is reserved for the host. */</i></td></tr>
<tr><th id="2995">2995</th><td>	<a class="tu ref" href="#vmx_asidmap" title='vmx_asidmap' data-use='r' data-ref="vmx_asidmap" data-ref-filename="vmx_asidmap">vmx_asidmap</a>[<var>0</var>] |= <a class="macro" href="../../../sys/cdefs.h.html#584" title="(((uintmax_t)(0) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((0) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/__BIT">__BIT</a>(<var>0</var>);</td></tr>
<tr><th id="2996">2996</th><td>}</td></tr>
<tr><th id="2997">2997</th><td></td></tr>
<tr><th id="2998">2998</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="2999">2999</th><td><dfn class="tu decl def fn" id="vmx_change_cpu" title='vmx_change_cpu' data-type='void vmx_change_cpu(void * arg1, void * arg2)' data-ref="vmx_change_cpu" data-ref-filename="vmx_change_cpu">vmx_change_cpu</dfn>(<em>void</em> *<dfn class="local col6 decl" id="306arg1" title='arg1' data-type='void *' data-ref="306arg1" data-ref-filename="306arg1">arg1</dfn>, <em>void</em> *<dfn class="local col7 decl" id="307arg2" title='arg2' data-type='void *' data-ref="307arg2" data-ref-filename="307arg2">arg2</dfn>)</td></tr>
<tr><th id="3000">3000</th><td>{</td></tr>
<tr><th id="3001">3001</th><td>	<b>struct</b> <a class="type" href="../../../arch/x86/include/cpu.h.html#cpu_info" title='cpu_info' data-ref="cpu_info" data-ref-filename="cpu_info">cpu_info</a> *<dfn class="local col8 decl" id="308ci" title='ci' data-type='struct cpu_info *' data-ref="308ci" data-ref-filename="308ci">ci</dfn> = <a class="macro" href="../../../arch/x86/include/cpu.h.html#404" title="x86_curcpu()" data-ref="_M/curcpu">curcpu</a>();</td></tr>
<tr><th id="3002">3002</th><td>	<a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a> <dfn class="local col9 decl" id="309enable" title='enable' data-type='_Bool' data-ref="309enable" data-ref-filename="309enable">enable</dfn> = (<a class="macro" href="../../../sys/stdbool.h.html#37" title="_Bool" data-ref="_M/bool">bool</a>)<a class="local col6 ref" href="#306arg1" title='arg1' data-ref="306arg1" data-ref-filename="306arg1">arg1</a>;</td></tr>
<tr><th id="3003">3003</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col0 decl" id="310cr4" title='cr4' data-type='uint64_t' data-ref="310cr4" data-ref-filename="310cr4">cr4</dfn>;</td></tr>
<tr><th id="3004">3004</th><td></td></tr>
<tr><th id="3005">3005</th><td>	<b>if</b> (!<a class="local col9 ref" href="#309enable" title='enable' data-ref="309enable" data-ref-filename="309enable">enable</a>) {</td></tr>
<tr><th id="3006">3006</th><td>		<a class="macro" href="#66" title="if (__builtin_expect((_vmx_vmxoff() != 0) != 0, 0)) { panic(&quot;%s: VMXOFF failed&quot;, __func__); }" data-ref="_M/vmx_vmxoff">vmx_vmxoff</a>();</td></tr>
<tr><th id="3007">3007</th><td>	}</td></tr>
<tr><th id="3008">3008</th><td></td></tr>
<tr><th id="3009">3009</th><td>	<a class="local col0 ref" href="#310cr4" title='cr4' data-ref="310cr4" data-ref-filename="310cr4">cr4</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#222" title='rcr4' data-ref="rcr4" data-ref-filename="rcr4">rcr4</a>();</td></tr>
<tr><th id="3010">3010</th><td>	<b>if</b> (<a class="local col9 ref" href="#309enable" title='enable' data-ref="309enable" data-ref-filename="309enable">enable</a>) {</td></tr>
<tr><th id="3011">3011</th><td>		<a class="local col0 ref" href="#310cr4" title='cr4' data-ref="310cr4" data-ref-filename="310cr4">cr4</a> |= <a class="macro" href="../../../arch/x86/include/specialreg.h.html#112" title="0x00002000" data-ref="_M/CR4_VMXE">CR4_VMXE</a>;</td></tr>
<tr><th id="3012">3012</th><td>	} <b>else</b> {</td></tr>
<tr><th id="3013">3013</th><td>		<a class="local col0 ref" href="#310cr4" title='cr4' data-ref="310cr4" data-ref-filename="310cr4">cr4</a> &amp;= ~<a class="macro" href="../../../arch/x86/include/specialreg.h.html#112" title="0x00002000" data-ref="_M/CR4_VMXE">CR4_VMXE</a>;</td></tr>
<tr><th id="3014">3014</th><td>	}</td></tr>
<tr><th id="3015">3015</th><td>	<a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#222" title='lcr4' data-ref="lcr4" data-ref-filename="lcr4">lcr4</a>(<a class="local col0 ref" href="#310cr4" title='cr4' data-ref="310cr4" data-ref-filename="310cr4">cr4</a>);</td></tr>
<tr><th id="3016">3016</th><td></td></tr>
<tr><th id="3017">3017</th><td>	<b>if</b> (<a class="local col9 ref" href="#309enable" title='enable' data-ref="309enable" data-ref-filename="309enable">enable</a>) {</td></tr>
<tr><th id="3018">3018</th><td>		<a class="macro" href="#62" title="if (__builtin_expect((_vmx_vmxon(&amp;vmxoncpu[cpu_index(ci)].pa) != 0) != 0, 0)) { panic(&quot;%s: VMXON failed&quot;, __func__); }" data-ref="_M/vmx_vmxon">vmx_vmxon</a>(&amp;<a class="tu ref" href="#vmxoncpu" title='vmxoncpu' data-use='m' data-ref="vmxoncpu" data-ref-filename="vmxoncpu">vmxoncpu</a>[<a class="ref fn" href="../../../sys/cpu.h.html#cpu_index" title='cpu_index' data-ref="cpu_index" data-ref-filename="cpu_index">cpu_index</a>(<a class="local col8 ref" href="#308ci" title='ci' data-ref="308ci" data-ref-filename="308ci">ci</a>)].<a class="tu ref field" href="#vmxoncpu::pa" title='vmxoncpu::pa' data-use='a' data-ref="vmxoncpu::pa" data-ref-filename="vmxoncpu..pa">pa</a>);</td></tr>
<tr><th id="3019">3019</th><td>	}</td></tr>
<tr><th id="3020">3020</th><td>}</td></tr>
<tr><th id="3021">3021</th><td></td></tr>
<tr><th id="3022">3022</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="3023">3023</th><td><dfn class="tu decl def fn" id="vmx_init_l1tf" title='vmx_init_l1tf' data-type='void vmx_init_l1tf()' data-ref="vmx_init_l1tf" data-ref-filename="vmx_init_l1tf">vmx_init_l1tf</dfn>(<em>void</em>)</td></tr>
<tr><th id="3024">3024</th><td>{</td></tr>
<tr><th id="3025">3025</th><td>	<a class="typedef" href="../../../sys/types.h.html#u_int" title='u_int' data-type='unsigned int' data-ref="u_int" data-ref-filename="u_int">u_int</a> <dfn class="local col1 decl" id="311descs" title='descs' data-type='u_int [4]' data-ref="311descs" data-ref-filename="311descs">descs</dfn>[<var>4</var>];</td></tr>
<tr><th id="3026">3026</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="312msr" title='msr' data-type='uint64_t' data-ref="312msr" data-ref-filename="312msr">msr</dfn>;</td></tr>
<tr><th id="3027">3027</th><td></td></tr>
<tr><th id="3028">3028</th><td>	<b>if</b> (<a class="ref" href="../../../arch/x86/include/cpu.h.html#cpuid_level" title='cpuid_level' data-ref="cpuid_level" data-ref-filename="cpuid_level">cpuid_level</a> &lt; <var>7</var>) {</td></tr>
<tr><th id="3029">3029</th><td>		<b>return</b>;</td></tr>
<tr><th id="3030">3030</th><td>	}</td></tr>
<tr><th id="3031">3031</th><td></td></tr>
<tr><th id="3032">3032</th><td>	<a class="macro" href="../../../arch/x86/include/cpufunc.h.html#132" title="x86_cpuid2((7), 0, (descs))" data-ref="_M/x86_cpuid">x86_cpuid</a>(<var>7</var>, <a class="local col1 ref" href="#311descs" title='descs' data-ref="311descs" data-ref-filename="311descs">descs</a>);</td></tr>
<tr><th id="3033">3033</th><td></td></tr>
<tr><th id="3034">3034</th><td>	<b>if</b> (<a class="local col1 ref" href="#311descs" title='descs' data-ref="311descs" data-ref-filename="311descs">descs</a>[<var>3</var>] &amp; <a class="macro" href="../../../arch/x86/include/specialreg.h.html#481" title="(((uintmax_t)(29) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((29) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/CPUID_SEF_ARCH_CAP">CPUID_SEF_ARCH_CAP</a>) {</td></tr>
<tr><th id="3035">3035</th><td>		<a class="local col2 ref" href="#312msr" title='msr' data-ref="312msr" data-ref-filename="312msr">msr</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="../../../arch/x86/include/specialreg.h.html#788" title="0x10a" data-ref="_M/MSR_IA32_ARCH_CAPABILITIES">MSR_IA32_ARCH_CAPABILITIES</a>);</td></tr>
<tr><th id="3036">3036</th><td>		<b>if</b> (<a class="local col2 ref" href="#312msr" title='msr' data-ref="312msr" data-ref-filename="312msr">msr</a> &amp; <a class="macro" href="../../../arch/x86/include/specialreg.h.html#792" title="0x08" data-ref="_M/IA32_ARCH_SKIP_L1DFL_VMENTRY">IA32_ARCH_SKIP_L1DFL_VMENTRY</a>) {</td></tr>
<tr><th id="3037">3037</th><td>			<i>/* No mitigation needed. */</i></td></tr>
<tr><th id="3038">3038</th><td>			<b>return</b>;</td></tr>
<tr><th id="3039">3039</th><td>		}</td></tr>
<tr><th id="3040">3040</th><td>	}</td></tr>
<tr><th id="3041">3041</th><td></td></tr>
<tr><th id="3042">3042</th><td>	<b>if</b> (<a class="local col1 ref" href="#311descs" title='descs' data-ref="311descs" data-ref-filename="311descs">descs</a>[<var>3</var>] &amp; <a class="macro" href="../../../arch/x86/include/specialreg.h.html#480" title="(((uintmax_t)(28) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((28) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/CPUID_SEF_L1D_FLUSH">CPUID_SEF_L1D_FLUSH</a>) {</td></tr>
<tr><th id="3043">3043</th><td>		<i>/* Enable hardware mitigation. */</i></td></tr>
<tr><th id="3044">3044</th><td>		<a class="tu ref" href="#vmx_msrlist_entry_nmsr" title='vmx_msrlist_entry_nmsr' data-use='w' data-ref="vmx_msrlist_entry_nmsr" data-ref-filename="vmx_msrlist_entry_nmsr">vmx_msrlist_entry_nmsr</a> += <var>1</var>;</td></tr>
<tr><th id="3045">3045</th><td>	}</td></tr>
<tr><th id="3046">3046</th><td>}</td></tr>
<tr><th id="3047">3047</th><td></td></tr>
<tr><th id="3048">3048</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="3049">3049</th><td><dfn class="tu decl def fn" id="vmx_init" title='vmx_init' data-type='void vmx_init()' data-ref="vmx_init" data-ref-filename="vmx_init">vmx_init</dfn>(<em>void</em>)</td></tr>
<tr><th id="3050">3050</th><td>{</td></tr>
<tr><th id="3051">3051</th><td>	<a class="macro" href="../../../arch/x86/include/cpu.h.html#364" title="int __attribute__((__unused__))" data-ref="_M/CPU_INFO_ITERATOR">CPU_INFO_ITERATOR</a> <dfn class="local col3 decl" id="313cii" title='cii' data-type='int' data-ref="313cii" data-ref-filename="313cii">cii</dfn>;</td></tr>
<tr><th id="3052">3052</th><td>	<b>struct</b> <a class="type" href="../../../arch/x86/include/cpu.h.html#cpu_info" title='cpu_info' data-ref="cpu_info" data-ref-filename="cpu_info">cpu_info</a> *<dfn class="local col4 decl" id="314ci" title='ci' data-type='struct cpu_info *' data-ref="314ci" data-ref-filename="314ci">ci</dfn>;</td></tr>
<tr><th id="3053">3053</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col5 decl" id="315xc" title='xc' data-type='uint64_t' data-ref="315xc" data-ref-filename="315xc">xc</dfn>, <dfn class="local col6 decl" id="316msr" title='msr' data-type='uint64_t' data-ref="316msr" data-ref-filename="316msr">msr</dfn>;</td></tr>
<tr><th id="3054">3054</th><td>	<b>struct</b> <a class="type" href="#vmxon" title='vmxon' data-ref="vmxon" data-ref-filename="vmxon">vmxon</a> *<dfn class="local col7 decl" id="317vmxon" title='vmxon' data-type='struct vmxon *' data-ref="317vmxon" data-ref-filename="317vmxon">vmxon</dfn>;</td></tr>
<tr><th id="3055">3055</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint32_t" title='uint32_t' data-type='__uint32_t' data-ref="uint32_t" data-ref-filename="uint32_t">uint32_t</a> <dfn class="local col8 decl" id="318revision" title='revision' data-type='uint32_t' data-ref="318revision" data-ref-filename="318revision">revision</dfn>;</td></tr>
<tr><th id="3056">3056</th><td>	<a class="typedef" href="../../../arch/amd64/include/types.h.html#paddr_t" title='paddr_t' data-type='unsigned long' data-ref="paddr_t" data-ref-filename="paddr_t">paddr_t</a> <dfn class="local col9 decl" id="319pa" title='pa' data-type='paddr_t' data-ref="319pa" data-ref-filename="319pa">pa</dfn>;</td></tr>
<tr><th id="3057">3057</th><td>	<a class="typedef" href="../../../arch/amd64/include/types.h.html#vaddr_t" title='vaddr_t' data-type='unsigned long' data-ref="vaddr_t" data-ref-filename="vaddr_t">vaddr_t</a> <dfn class="local col0 decl" id="320va" title='va' data-type='vaddr_t' data-ref="320va" data-ref-filename="320va">va</dfn>;</td></tr>
<tr><th id="3058">3058</th><td>	<em>int</em> <dfn class="local col1 decl" id="321error" title='error' data-type='int' data-ref="321error" data-ref-filename="321error">error</dfn>;</td></tr>
<tr><th id="3059">3059</th><td></td></tr>
<tr><th id="3060">3060</th><td>	<i>/* Init the ASID bitmap (VPID). */</i></td></tr>
<tr><th id="3061">3061</th><td>	<a class="tu ref fn" href="#vmx_init_asid" title='vmx_init_asid' data-use='c' data-ref="vmx_init_asid" data-ref-filename="vmx_init_asid">vmx_init_asid</a>(<a class="macro" href="#604" title="0xFFFF" data-ref="_M/VPID_MAX">VPID_MAX</a>);</td></tr>
<tr><th id="3062">3062</th><td></td></tr>
<tr><th id="3063">3063</th><td>	<i>/* Init the XCR0 mask. */</i></td></tr>
<tr><th id="3064">3064</th><td>	<a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='w' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a> = <a class="macro" href="#679" title="(0x00000001|0x00000002)" data-ref="_M/VMX_XCR0_MASK_DEFAULT">VMX_XCR0_MASK_DEFAULT</a> &amp; <a class="ref" href="../../../arch/x86/include/cpu.h.html#x86_xsave_features" title='x86_xsave_features' data-ref="x86_xsave_features" data-ref-filename="x86_xsave_features">x86_xsave_features</a>;</td></tr>
<tr><th id="3065">3065</th><td></td></tr>
<tr><th id="3066">3066</th><td>	<i>/* Init the TLB flush op, the EPT flush op and the EPTP type. */</i></td></tr>
<tr><th id="3067">3067</th><td>	<a class="local col6 ref" href="#316msr" title='msr' data-ref="316msr" data-ref-filename="316msr">msr</a> = <a class="ref fn" href="../../../arch/x86/include/cpufunc.h.html#rdmsr" title='rdmsr' data-ref="rdmsr" data-ref-filename="rdmsr">rdmsr</a>(<a class="macro" href="#210" title="0x048C" data-ref="_M/MSR_IA32_VMX_EPT_VPID_CAP">MSR_IA32_VMX_EPT_VPID_CAP</a>);</td></tr>
<tr><th id="3068">3068</th><td>	<b>if</b> ((<a class="local col6 ref" href="#316msr" title='msr' data-ref="316msr" data-ref-filename="316msr">msr</a> &amp; <a class="macro" href="#220" title="(((uintmax_t)(41) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((41) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_VMX_EPT_VPID_INVVPID_CONTEXT">IA32_VMX_EPT_VPID_INVVPID_CONTEXT</a>) != <var>0</var>) {</td></tr>
<tr><th id="3069">3069</th><td>		<a class="tu ref" href="#vmx_tlb_flush_op" title='vmx_tlb_flush_op' data-use='w' data-ref="vmx_tlb_flush_op" data-ref-filename="vmx_tlb_flush_op">vmx_tlb_flush_op</a> = <a class="macro" href="#1793" title="1" data-ref="_M/VMX_INVVPID_CONTEXT">VMX_INVVPID_CONTEXT</a>;</td></tr>
<tr><th id="3070">3070</th><td>	} <b>else</b> {</td></tr>
<tr><th id="3071">3071</th><td>		<a class="tu ref" href="#vmx_tlb_flush_op" title='vmx_tlb_flush_op' data-use='w' data-ref="vmx_tlb_flush_op" data-ref-filename="vmx_tlb_flush_op">vmx_tlb_flush_op</a> = <a class="macro" href="#1794" title="2" data-ref="_M/VMX_INVVPID_ALL">VMX_INVVPID_ALL</a>;</td></tr>
<tr><th id="3072">3072</th><td>	}</td></tr>
<tr><th id="3073">3073</th><td>	<b>if</b> ((<a class="local col6 ref" href="#316msr" title='msr' data-ref="316msr" data-ref-filename="316msr">msr</a> &amp; <a class="macro" href="#216" title="(((uintmax_t)(25) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((25) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_VMX_EPT_VPID_INVEPT_CONTEXT">IA32_VMX_EPT_VPID_INVEPT_CONTEXT</a>) != <var>0</var>) {</td></tr>
<tr><th id="3074">3074</th><td>		<a class="tu ref" href="#vmx_ept_flush_op" title='vmx_ept_flush_op' data-use='w' data-ref="vmx_ept_flush_op" data-ref-filename="vmx_ept_flush_op">vmx_ept_flush_op</a> = <a class="macro" href="#1797" title="1" data-ref="_M/VMX_INVEPT_CONTEXT">VMX_INVEPT_CONTEXT</a>;</td></tr>
<tr><th id="3075">3075</th><td>	} <b>else</b> {</td></tr>
<tr><th id="3076">3076</th><td>		<a class="tu ref" href="#vmx_ept_flush_op" title='vmx_ept_flush_op' data-use='w' data-ref="vmx_ept_flush_op" data-ref-filename="vmx_ept_flush_op">vmx_ept_flush_op</a> = <a class="macro" href="#1798" title="2" data-ref="_M/VMX_INVEPT_ALL">VMX_INVEPT_ALL</a>;</td></tr>
<tr><th id="3077">3077</th><td>	}</td></tr>
<tr><th id="3078">3078</th><td>	<b>if</b> ((<a class="local col6 ref" href="#316msr" title='msr' data-ref="316msr" data-ref-filename="316msr">msr</a> &amp; <a class="macro" href="#213" title="(((uintmax_t)(14) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)((14) &amp; (8 * sizeof(uintmax_t) - 1))))" data-ref="_M/IA32_VMX_EPT_VPID_WB">IA32_VMX_EPT_VPID_WB</a>) != <var>0</var>) {</td></tr>
<tr><th id="3079">3079</th><td>		<a class="tu ref" href="#vmx_eptp_type" title='vmx_eptp_type' data-use='w' data-ref="vmx_eptp_type" data-ref-filename="vmx_eptp_type">vmx_eptp_type</a> = <a class="macro" href="#266" title="6" data-ref="_M/EPTP_TYPE_WB">EPTP_TYPE_WB</a>;</td></tr>
<tr><th id="3080">3080</th><td>	} <b>else</b> {</td></tr>
<tr><th id="3081">3081</th><td>		<a class="tu ref" href="#vmx_eptp_type" title='vmx_eptp_type' data-use='w' data-ref="vmx_eptp_type" data-ref-filename="vmx_eptp_type">vmx_eptp_type</a> = <a class="macro" href="#265" title="0" data-ref="_M/EPTP_TYPE_UC">EPTP_TYPE_UC</a>;</td></tr>
<tr><th id="3082">3082</th><td>	}</td></tr>
<tr><th id="3083">3083</th><td></td></tr>
<tr><th id="3084">3084</th><td>	<i>/* Init the L1TF mitigation. */</i></td></tr>
<tr><th id="3085">3085</th><td>	<a class="tu ref fn" href="#vmx_init_l1tf" title='vmx_init_l1tf' data-use='c' data-ref="vmx_init_l1tf" data-ref-filename="vmx_init_l1tf">vmx_init_l1tf</a>();</td></tr>
<tr><th id="3086">3086</th><td></td></tr>
<tr><th id="3087">3087</th><td>	<a class="macro" href="../../../lib/libkern/libkern.h.html#382" title="__builtin_memset(vmxoncpu, 0, sizeof(vmxoncpu))" data-ref="_M/memset">memset</a>(<a class="tu ref" href="#vmxoncpu" title='vmxoncpu' data-use='r' data-ref="vmxoncpu" data-ref-filename="vmxoncpu">vmxoncpu</a>, <var>0</var>, <b>sizeof</b>(<a class="tu ref" href="#vmxoncpu" title='vmxoncpu' data-use='r' data-ref="vmxoncpu" data-ref-filename="vmxoncpu">vmxoncpu</a>));</td></tr>
<tr><th id="3088">3088</th><td>	<a class="local col8 ref" href="#318revision" title='revision' data-ref="318revision" data-ref-filename="318revision">revision</a> = <a class="tu ref fn" href="#vmx_get_revision" title='vmx_get_revision' data-use='c' data-ref="vmx_get_revision" data-ref-filename="vmx_get_revision">vmx_get_revision</a>();</td></tr>
<tr><th id="3089">3089</th><td></td></tr>
<tr><th id="3090">3090</th><td>	<b>for</b> (<a class="macro" href="../../../arch/x86/include/cpu.h.html#365" title="ci = cpu_info_list; ci != ((void *)0); ci = ci-&gt;ci_next" data-ref="_M/CPU_INFO_FOREACH">CPU_INFO_FOREACH</a>(cii, <a class="local col4 ref" href="#314ci" title='ci' data-ref="314ci" data-ref-filename="314ci">ci</a>)) {</td></tr>
<tr><th id="3091">3091</th><td>		<a class="local col1 ref" href="#321error" title='error' data-ref="321error" data-ref-filename="321error">error</a> = <a class="tu ref fn" href="#vmx_memalloc" title='vmx_memalloc' data-use='c' data-ref="vmx_memalloc" data-ref-filename="vmx_memalloc">vmx_memalloc</a>(&amp;<a class="local col9 ref" href="#319pa" title='pa' data-ref="319pa" data-ref-filename="319pa">pa</a>, &amp;<a class="local col0 ref" href="#320va" title='va' data-ref="320va" data-ref-filename="320va">va</a>, <var>1</var>);</td></tr>
<tr><th id="3092">3092</th><td>		<b>if</b> (<a class="local col1 ref" href="#321error" title='error' data-ref="321error" data-ref-filename="321error">error</a>) {</td></tr>
<tr><th id="3093">3093</th><td>			<a class="ref fn" href="../../../sys/systm.h.html#panic" title='panic' data-ref="panic" data-ref-filename="panic">panic</a>(<q>"%s: out of memory"</q>, <b>__func__</b>);</td></tr>
<tr><th id="3094">3094</th><td>		}</td></tr>
<tr><th id="3095">3095</th><td>		<a class="tu ref" href="#vmxoncpu" title='vmxoncpu' data-use='m' data-ref="vmxoncpu" data-ref-filename="vmxoncpu">vmxoncpu</a>[<a class="ref fn" href="../../../sys/cpu.h.html#cpu_index" title='cpu_index' data-ref="cpu_index" data-ref-filename="cpu_index">cpu_index</a>(<a class="local col4 ref" href="#314ci" title='ci' data-ref="314ci" data-ref-filename="314ci">ci</a>)].<a class="tu ref field" href="#vmxoncpu::pa" title='vmxoncpu::pa' data-use='w' data-ref="vmxoncpu::pa" data-ref-filename="vmxoncpu..pa">pa</a> = <a class="local col9 ref" href="#319pa" title='pa' data-ref="319pa" data-ref-filename="319pa">pa</a>;</td></tr>
<tr><th id="3096">3096</th><td>		<a class="tu ref" href="#vmxoncpu" title='vmxoncpu' data-use='m' data-ref="vmxoncpu" data-ref-filename="vmxoncpu">vmxoncpu</a>[<a class="ref fn" href="../../../sys/cpu.h.html#cpu_index" title='cpu_index' data-ref="cpu_index" data-ref-filename="cpu_index">cpu_index</a>(<a class="local col4 ref" href="#314ci" title='ci' data-ref="314ci" data-ref-filename="314ci">ci</a>)].<a class="tu ref field" href="#vmxoncpu::va" title='vmxoncpu::va' data-use='w' data-ref="vmxoncpu::va" data-ref-filename="vmxoncpu..va">va</a> = <a class="local col0 ref" href="#320va" title='va' data-ref="320va" data-ref-filename="320va">va</a>;</td></tr>
<tr><th id="3097">3097</th><td></td></tr>
<tr><th id="3098">3098</th><td>		<a class="local col7 ref" href="#317vmxon" title='vmxon' data-ref="317vmxon" data-ref-filename="317vmxon">vmxon</a> = (<b>struct</b> <a class="type" href="#vmxon" title='vmxon' data-ref="vmxon" data-ref-filename="vmxon">vmxon</a> *)<a class="tu ref" href="#vmxoncpu" title='vmxoncpu' data-use='m' data-ref="vmxoncpu" data-ref-filename="vmxoncpu">vmxoncpu</a>[<a class="ref fn" href="../../../sys/cpu.h.html#cpu_index" title='cpu_index' data-ref="cpu_index" data-ref-filename="cpu_index">cpu_index</a>(<a class="local col4 ref" href="#314ci" title='ci' data-ref="314ci" data-ref-filename="314ci">ci</a>)].<a class="tu ref field" href="#vmxoncpu::va" title='vmxoncpu::va' data-use='r' data-ref="vmxoncpu::va" data-ref-filename="vmxoncpu..va">va</a>;</td></tr>
<tr><th id="3099">3099</th><td>		<a class="local col7 ref" href="#317vmxon" title='vmxon' data-ref="317vmxon" data-ref-filename="317vmxon">vmxon</a>-&gt;<a class="tu ref field" href="#vmxon::ident" title='vmxon::ident' data-use='w' data-ref="vmxon::ident" data-ref-filename="vmxon..ident">ident</a> = <a class="macro" href="../../../sys/cdefs.h.html#607" title="((revision) * (((((((((uintmax_t)((( ((30))&gt;((0)))?((30)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&gt;((0)))?((30)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((30))&lt;=((0)))?((30)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&lt;=((0)))?((30)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))) - 1) &amp; ((((((uintmax_t)((( ((30))&gt;((0)))?((30)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&gt;((0)))?((30)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((30))&lt;=((0)))?((30)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&lt;=((0)))?((30)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))) ^ ((((((uintmax_t)((( ((30))&gt;((0)))?((30)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&gt;((0)))?((30)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((30))&lt;=((0)))?((30)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&lt;=((0)))?((30)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1)))))" data-ref="_M/__SHIFTIN">__SHIFTIN</a>(<a class="local col8 ref" href="#318revision" title='revision' data-ref="318revision" data-ref-filename="318revision">revision</a>, <a class="macro" href="#573" title="(((((uintmax_t)((( ((30))&gt;((0)))?((30)):((0))) + 1) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&gt;((0)))?((30)):((0))) + 1) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1) ^ ((((uintmax_t)((( ((30))&lt;=((0)))?((30)):((0)))) &gt;= 8 * sizeof(uintmax_t)) ? 0 : ((uintmax_t)1 &lt;&lt; (uintmax_t)(((( ((30))&lt;=((0)))?((30)):((0)))) &amp; (8 * sizeof(uintmax_t) - 1)))) - 1))" data-ref="_M/VMXON_IDENT_REVISION">VMXON_IDENT_REVISION</a>);</td></tr>
<tr><th id="3100">3100</th><td>	}</td></tr>
<tr><th id="3101">3101</th><td></td></tr>
<tr><th id="3102">3102</th><td>	<a class="local col5 ref" href="#315xc" title='xc' data-ref="315xc" data-ref-filename="315xc">xc</a> = <a class="ref fn" href="../../../sys/xcall.h.html#xc_broadcast" title='xc_broadcast' data-ref="xc_broadcast" data-ref-filename="xc_broadcast">xc_broadcast</a>(<var>0</var>, <a class="tu ref fn" href="#vmx_change_cpu" title='vmx_change_cpu' data-use='r' data-ref="vmx_change_cpu" data-ref-filename="vmx_change_cpu">vmx_change_cpu</a>, (<em>void</em> *)<a class="macro" href="../../../sys/stdbool.h.html#39" title="1" data-ref="_M/true">true</a>, <a class="macro" href="../../../sys/null.h.html#13" title="((void *)0)" data-ref="_M/NULL">NULL</a>);</td></tr>
<tr><th id="3103">3103</th><td>	<a class="ref fn" href="../../../sys/xcall.h.html#xc_wait" title='xc_wait' data-ref="xc_wait" data-ref-filename="xc_wait">xc_wait</a>(<a class="local col5 ref" href="#315xc" title='xc' data-ref="315xc" data-ref-filename="315xc">xc</a>);</td></tr>
<tr><th id="3104">3104</th><td>}</td></tr>
<tr><th id="3105">3105</th><td></td></tr>
<tr><th id="3106">3106</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="3107">3107</th><td><dfn class="tu decl def fn" id="vmx_fini_asid" title='vmx_fini_asid' data-type='void vmx_fini_asid()' data-ref="vmx_fini_asid" data-ref-filename="vmx_fini_asid">vmx_fini_asid</dfn>(<em>void</em>)</td></tr>
<tr><th id="3108">3108</th><td>{</td></tr>
<tr><th id="3109">3109</th><td>	<a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col2 decl" id="322allocsz" title='allocsz' data-type='size_t' data-ref="322allocsz" data-ref-filename="322allocsz">allocsz</dfn>;</td></tr>
<tr><th id="3110">3110</th><td></td></tr>
<tr><th id="3111">3111</th><td>	<a class="local col2 ref" href="#322allocsz" title='allocsz' data-ref="322allocsz" data-ref-filename="322allocsz">allocsz</a> = <a class="macro" href="../../../sys/param.h.html#390" title="((((vmx_maxasid)+((8)-1))/(8))*(8))" data-ref="_M/roundup">roundup</a>(<a class="tu ref" href="#vmx_maxasid" title='vmx_maxasid' data-use='r' data-ref="vmx_maxasid" data-ref-filename="vmx_maxasid">vmx_maxasid</a>, <var>8</var>) / <var>8</var>;</td></tr>
<tr><th id="3112">3112</th><td>	<a class="ref fn" href="../../../sys/kmem.h.html#kmem_free" title='kmem_free' data-ref="kmem_free" data-ref-filename="kmem_free">kmem_free</a>(<a class="tu ref" href="#vmx_asidmap" title='vmx_asidmap' data-use='r' data-ref="vmx_asidmap" data-ref-filename="vmx_asidmap">vmx_asidmap</a>, <a class="local col2 ref" href="#322allocsz" title='allocsz' data-ref="322allocsz" data-ref-filename="322allocsz">allocsz</a>);</td></tr>
<tr><th id="3113">3113</th><td></td></tr>
<tr><th id="3114">3114</th><td>	<a class="ref fn" href="../../../sys/mutex.h.html#mutex_destroy" title='mutex_destroy' data-ref="mutex_destroy" data-ref-filename="mutex_destroy">mutex_destroy</a>(&amp;<a class="tu ref" href="#vmx_asidlock" title='vmx_asidlock' data-use='a' data-ref="vmx_asidlock" data-ref-filename="vmx_asidlock">vmx_asidlock</a>);</td></tr>
<tr><th id="3115">3115</th><td>}</td></tr>
<tr><th id="3116">3116</th><td></td></tr>
<tr><th id="3117">3117</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="3118">3118</th><td><dfn class="tu decl def fn" id="vmx_fini" title='vmx_fini' data-type='void vmx_fini()' data-ref="vmx_fini" data-ref-filename="vmx_fini">vmx_fini</dfn>(<em>void</em>)</td></tr>
<tr><th id="3119">3119</th><td>{</td></tr>
<tr><th id="3120">3120</th><td>	<a class="typedef" href="../../../sys/stdint.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t" data-ref-filename="uint64_t">uint64_t</a> <dfn class="local col3 decl" id="323xc" title='xc' data-type='uint64_t' data-ref="323xc" data-ref-filename="323xc">xc</dfn>;</td></tr>
<tr><th id="3121">3121</th><td>	<a class="typedef" href="../../../sys/types.h.html#size_t" title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</a> <dfn class="local col4 decl" id="324i" title='i' data-type='size_t' data-ref="324i" data-ref-filename="324i">i</dfn>;</td></tr>
<tr><th id="3122">3122</th><td></td></tr>
<tr><th id="3123">3123</th><td>	<a class="local col3 ref" href="#323xc" title='xc' data-ref="323xc" data-ref-filename="323xc">xc</a> = <a class="ref fn" href="../../../sys/xcall.h.html#xc_broadcast" title='xc_broadcast' data-ref="xc_broadcast" data-ref-filename="xc_broadcast">xc_broadcast</a>(<var>0</var>, <a class="tu ref fn" href="#vmx_change_cpu" title='vmx_change_cpu' data-use='r' data-ref="vmx_change_cpu" data-ref-filename="vmx_change_cpu">vmx_change_cpu</a>, (<em>void</em> *)<a class="macro" href="../../../sys/stdbool.h.html#40" title="0" data-ref="_M/false">false</a>, <a class="macro" href="../../../sys/null.h.html#13" title="((void *)0)" data-ref="_M/NULL">NULL</a>);</td></tr>
<tr><th id="3124">3124</th><td>	<a class="ref fn" href="../../../sys/xcall.h.html#xc_wait" title='xc_wait' data-ref="xc_wait" data-ref-filename="xc_wait">xc_wait</a>(<a class="local col3 ref" href="#323xc" title='xc' data-ref="323xc" data-ref-filename="323xc">xc</a>);</td></tr>
<tr><th id="3125">3125</th><td></td></tr>
<tr><th id="3126">3126</th><td>	<b>for</b> (<a class="local col4 ref" href="#324i" title='i' data-ref="324i" data-ref-filename="324i">i</a> = <var>0</var>; <a class="local col4 ref" href="#324i" title='i' data-ref="324i" data-ref-filename="324i">i</a> &lt; <a class="macro" href="../../../arch/amd64/include/param.h.html#7" title="256" data-ref="_M/MAXCPUS">MAXCPUS</a>; <a class="local col4 ref" href="#324i" title='i' data-ref="324i" data-ref-filename="324i">i</a>++) {</td></tr>
<tr><th id="3127">3127</th><td>		<b>if</b> (<a class="tu ref" href="#vmxoncpu" title='vmxoncpu' data-use='m' data-ref="vmxoncpu" data-ref-filename="vmxoncpu">vmxoncpu</a>[<a class="local col4 ref" href="#324i" title='i' data-ref="324i" data-ref-filename="324i">i</a>].<a class="tu ref field" href="#vmxoncpu::pa" title='vmxoncpu::pa' data-use='r' data-ref="vmxoncpu::pa" data-ref-filename="vmxoncpu..pa">pa</a> != <var>0</var>)</td></tr>
<tr><th id="3128">3128</th><td>			<a class="tu ref fn" href="#vmx_memfree" title='vmx_memfree' data-use='c' data-ref="vmx_memfree" data-ref-filename="vmx_memfree">vmx_memfree</a>(<a class="tu ref" href="#vmxoncpu" title='vmxoncpu' data-use='m' data-ref="vmxoncpu" data-ref-filename="vmxoncpu">vmxoncpu</a>[<a class="local col4 ref" href="#324i" title='i' data-ref="324i" data-ref-filename="324i">i</a>].<a class="tu ref field" href="#vmxoncpu::pa" title='vmxoncpu::pa' data-use='r' data-ref="vmxoncpu::pa" data-ref-filename="vmxoncpu..pa">pa</a>, <a class="tu ref" href="#vmxoncpu" title='vmxoncpu' data-use='m' data-ref="vmxoncpu" data-ref-filename="vmxoncpu">vmxoncpu</a>[<a class="local col4 ref" href="#324i" title='i' data-ref="324i" data-ref-filename="324i">i</a>].<a class="tu ref field" href="#vmxoncpu::va" title='vmxoncpu::va' data-use='r' data-ref="vmxoncpu::va" data-ref-filename="vmxoncpu..va">va</a>, <var>1</var>);</td></tr>
<tr><th id="3129">3129</th><td>	}</td></tr>
<tr><th id="3130">3130</th><td></td></tr>
<tr><th id="3131">3131</th><td>	<a class="tu ref fn" href="#vmx_fini_asid" title='vmx_fini_asid' data-use='c' data-ref="vmx_fini_asid" data-ref-filename="vmx_fini_asid">vmx_fini_asid</a>();</td></tr>
<tr><th id="3132">3132</th><td>}</td></tr>
<tr><th id="3133">3133</th><td></td></tr>
<tr><th id="3134">3134</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="3135">3135</th><td><dfn class="tu decl def fn" id="vmx_capability" title='vmx_capability' data-type='void vmx_capability(struct nvmm_capability * cap)' data-ref="vmx_capability" data-ref-filename="vmx_capability">vmx_capability</dfn>(<b>struct</b> <a class="type" href="../nvmm.h.html#nvmm_capability" title='nvmm_capability' data-ref="nvmm_capability" data-ref-filename="nvmm_capability">nvmm_capability</a> *<dfn class="local col5 decl" id="325cap" title='cap' data-type='struct nvmm_capability *' data-ref="325cap" data-ref-filename="325cap">cap</dfn>)</td></tr>
<tr><th id="3136">3136</th><td>{</td></tr>
<tr><th id="3137">3137</th><td>	<a class="local col5 ref" href="#325cap" title='cap' data-ref="325cap" data-ref-filename="325cap">cap</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_capability::arch" title='nvmm_capability::arch' data-ref="nvmm_capability::arch" data-ref-filename="nvmm_capability..arch">arch</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_cap_md::xcr0_mask" title='nvmm_cap_md::xcr0_mask' data-ref="nvmm_cap_md::xcr0_mask" data-ref-filename="nvmm_cap_md..xcr0_mask">xcr0_mask</a> = <a class="tu ref" href="#vmx_xcr0_mask" title='vmx_xcr0_mask' data-use='r' data-ref="vmx_xcr0_mask" data-ref-filename="vmx_xcr0_mask">vmx_xcr0_mask</a>;</td></tr>
<tr><th id="3138">3138</th><td>	<a class="local col5 ref" href="#325cap" title='cap' data-ref="325cap" data-ref-filename="325cap">cap</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_capability::arch" title='nvmm_capability::arch' data-ref="nvmm_capability::arch" data-ref-filename="nvmm_capability..arch">arch</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_cap_md::mxcsr_mask" title='nvmm_cap_md::mxcsr_mask' data-ref="nvmm_cap_md::mxcsr_mask" data-ref-filename="nvmm_cap_md..mxcsr_mask">mxcsr_mask</a> = <a class="ref" href="../../../arch/x86/include/cpu.h.html#x86_fpu_mxcsr_mask" title='x86_fpu_mxcsr_mask' data-ref="x86_fpu_mxcsr_mask" data-ref-filename="x86_fpu_mxcsr_mask">x86_fpu_mxcsr_mask</a>;</td></tr>
<tr><th id="3139">3139</th><td>	<a class="local col5 ref" href="#325cap" title='cap' data-ref="325cap" data-ref-filename="325cap">cap</a>-&gt;<a class="ref field" href="../nvmm.h.html#nvmm_capability::arch" title='nvmm_capability::arch' data-ref="nvmm_capability::arch" data-ref-filename="nvmm_capability..arch">arch</a>.<a class="ref field" href="nvmm_x86.h.html#nvmm_cap_md::conf_cpuid_maxops" title='nvmm_cap_md::conf_cpuid_maxops' data-ref="nvmm_cap_md::conf_cpuid_maxops" data-ref-filename="nvmm_cap_md..conf_cpuid_maxops">conf_cpuid_maxops</a> = <a class="macro" href="#682" title="32" data-ref="_M/VMX_NCPUIDS">VMX_NCPUIDS</a>;</td></tr>
<tr><th id="3140">3140</th><td>}</td></tr>
<tr><th id="3141">3141</th><td></td></tr>
<tr><th id="3142">3142</th><td><em>const</em> <b>struct</b> <a class="type" href="../nvmm_internal.h.html#nvmm_impl" title='nvmm_impl' data-ref="nvmm_impl" data-ref-filename="nvmm_impl">nvmm_impl</a> <dfn class="decl def" id="nvmm_x86_vmx" title='nvmm_x86_vmx' data-ref="nvmm_x86_vmx" data-ref-filename="nvmm_x86_vmx">nvmm_x86_vmx</dfn> = {</td></tr>
<tr><th id="3143">3143</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::ident" title='nvmm_impl::ident' data-ref="nvmm_impl::ident" data-ref-filename="nvmm_impl..ident">ident</a> = <a class="tu ref fn" href="#vmx_ident" title='vmx_ident' data-ref="vmx_ident" data-ref-filename="vmx_ident">vmx_ident</a>,</td></tr>
<tr><th id="3144">3144</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::init" title='nvmm_impl::init' data-ref="nvmm_impl::init" data-ref-filename="nvmm_impl..init">init</a> = <a class="tu ref fn" href="#vmx_init" title='vmx_init' data-ref="vmx_init" data-ref-filename="vmx_init">vmx_init</a>,</td></tr>
<tr><th id="3145">3145</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::fini" title='nvmm_impl::fini' data-ref="nvmm_impl::fini" data-ref-filename="nvmm_impl..fini">fini</a> = <a class="tu ref fn" href="#vmx_fini" title='vmx_fini' data-ref="vmx_fini" data-ref-filename="vmx_fini">vmx_fini</a>,</td></tr>
<tr><th id="3146">3146</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::capability" title='nvmm_impl::capability' data-ref="nvmm_impl::capability" data-ref-filename="nvmm_impl..capability">capability</a> = <a class="tu ref fn" href="#vmx_capability" title='vmx_capability' data-ref="vmx_capability" data-ref-filename="vmx_capability">vmx_capability</a>,</td></tr>
<tr><th id="3147">3147</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::conf_max" title='nvmm_impl::conf_max' data-ref="nvmm_impl::conf_max" data-ref-filename="nvmm_impl..conf_max">conf_max</a> = <a class="macro" href="nvmm_x86.h.html#235" title="1" data-ref="_M/NVMM_X86_NCONF">NVMM_X86_NCONF</a>,</td></tr>
<tr><th id="3148">3148</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::conf_sizes" title='nvmm_impl::conf_sizes' data-ref="nvmm_impl::conf_sizes" data-ref-filename="nvmm_impl..conf_sizes">conf_sizes</a> = <a class="tu ref" href="#vmx_conf_sizes" title='vmx_conf_sizes' data-ref="vmx_conf_sizes" data-ref-filename="vmx_conf_sizes">vmx_conf_sizes</a>,</td></tr>
<tr><th id="3149">3149</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::state_size" title='nvmm_impl::state_size' data-ref="nvmm_impl::state_size" data-ref-filename="nvmm_impl..state_size">state_size</a> = <b>sizeof</b>(<b>struct</b> <a class="type" href="nvmm_x86.h.html#nvmm_x64_state" title='nvmm_x64_state' data-ref="nvmm_x64_state" data-ref-filename="nvmm_x64_state">nvmm_x64_state</a>),</td></tr>
<tr><th id="3150">3150</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::machine_create" title='nvmm_impl::machine_create' data-ref="nvmm_impl::machine_create" data-ref-filename="nvmm_impl..machine_create">machine_create</a> = <a class="tu ref fn" href="#vmx_machine_create" title='vmx_machine_create' data-ref="vmx_machine_create" data-ref-filename="vmx_machine_create">vmx_machine_create</a>,</td></tr>
<tr><th id="3151">3151</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::machine_destroy" title='nvmm_impl::machine_destroy' data-ref="nvmm_impl::machine_destroy" data-ref-filename="nvmm_impl..machine_destroy">machine_destroy</a> = <a class="tu ref fn" href="#vmx_machine_destroy" title='vmx_machine_destroy' data-ref="vmx_machine_destroy" data-ref-filename="vmx_machine_destroy">vmx_machine_destroy</a>,</td></tr>
<tr><th id="3152">3152</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::machine_configure" title='nvmm_impl::machine_configure' data-ref="nvmm_impl::machine_configure" data-ref-filename="nvmm_impl..machine_configure">machine_configure</a> = <a class="tu ref fn" href="#vmx_machine_configure" title='vmx_machine_configure' data-ref="vmx_machine_configure" data-ref-filename="vmx_machine_configure">vmx_machine_configure</a>,</td></tr>
<tr><th id="3153">3153</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::vcpu_create" title='nvmm_impl::vcpu_create' data-ref="nvmm_impl::vcpu_create" data-ref-filename="nvmm_impl..vcpu_create">vcpu_create</a> = <a class="tu ref fn" href="#vmx_vcpu_create" title='vmx_vcpu_create' data-ref="vmx_vcpu_create" data-ref-filename="vmx_vcpu_create">vmx_vcpu_create</a>,</td></tr>
<tr><th id="3154">3154</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::vcpu_destroy" title='nvmm_impl::vcpu_destroy' data-ref="nvmm_impl::vcpu_destroy" data-ref-filename="nvmm_impl..vcpu_destroy">vcpu_destroy</a> = <a class="tu ref fn" href="#vmx_vcpu_destroy" title='vmx_vcpu_destroy' data-ref="vmx_vcpu_destroy" data-ref-filename="vmx_vcpu_destroy">vmx_vcpu_destroy</a>,</td></tr>
<tr><th id="3155">3155</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::vcpu_setstate" title='nvmm_impl::vcpu_setstate' data-ref="nvmm_impl::vcpu_setstate" data-ref-filename="nvmm_impl..vcpu_setstate">vcpu_setstate</a> = <a class="tu ref fn" href="#vmx_vcpu_setstate" title='vmx_vcpu_setstate' data-ref="vmx_vcpu_setstate" data-ref-filename="vmx_vcpu_setstate">vmx_vcpu_setstate</a>,</td></tr>
<tr><th id="3156">3156</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::vcpu_getstate" title='nvmm_impl::vcpu_getstate' data-ref="nvmm_impl::vcpu_getstate" data-ref-filename="nvmm_impl..vcpu_getstate">vcpu_getstate</a> = <a class="tu ref fn" href="#vmx_vcpu_getstate" title='vmx_vcpu_getstate' data-ref="vmx_vcpu_getstate" data-ref-filename="vmx_vcpu_getstate">vmx_vcpu_getstate</a>,</td></tr>
<tr><th id="3157">3157</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::vcpu_inject" title='nvmm_impl::vcpu_inject' data-ref="nvmm_impl::vcpu_inject" data-ref-filename="nvmm_impl..vcpu_inject">vcpu_inject</a> = <a class="tu ref fn" href="#vmx_vcpu_inject" title='vmx_vcpu_inject' data-ref="vmx_vcpu_inject" data-ref-filename="vmx_vcpu_inject">vmx_vcpu_inject</a>,</td></tr>
<tr><th id="3158">3158</th><td>	.<a class="ref field" href="../nvmm_internal.h.html#nvmm_impl::vcpu_run" title='nvmm_impl::vcpu_run' data-ref="nvmm_impl::vcpu_run" data-ref-filename="nvmm_impl..vcpu_run">vcpu_run</a> = <a class="tu ref fn" href="#vmx_vcpu_run" title='vmx_vcpu_run' data-ref="vmx_vcpu_run" data-ref-filename="vmx_vcpu_run">vmx_vcpu_run</a></td></tr>
<tr><th id="3159">3159</th><td>};</td></tr>
<tr><th id="3160">3160</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2019-Jul-19</em> from project netbsd revision <em>f9da89e0d</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
